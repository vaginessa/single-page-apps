!function(){function t(){var e=F([":@@ngb.toast.close-aria\u241ff4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8\u241f7819314041543176992:Close"]);return t=function(){return e},e}function e(){var t=F([":@@ngb.timepicker.AM\u241f69a1f176a93998876952adac57c3bc3863b6105e\u241f4592818992509942761:",":INTERPOLATION:"]);return e=function(){return t},t}function n(){var t=F([":@@ngb.timepicker.PM\u241f8d6e691e10306c1b34c6b26805151aaea320ef7f\u241f3564199131264287502:",":INTERPOLATION:"]);return n=function(){return t},t}function r(){var t=F([":@@ngb.timepicker.decrement-seconds\u241f5db47ac104294243a70eb9124fbea9d0004ddf69\u241f753633511487974857:Decrement seconds"]);return r=function(){return t},t}function i(){var t=F([":@@ngb.timepicker.increment-seconds\u241f912322ecee7d659d04dcf494a70e22e49d334b26\u241f5364772110539092174:Increment seconds"]);return i=function(){return t},t}function o(){var t=F([":@@ngb.timepicker.seconds\u241f4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c\u241f8874012390997067175:Seconds"]);return o=function(){return t},t}function u(){var t=F([":@@ngb.timepicker.SS\u241febe38d36a40a2383c5fefa9b4608ffbda08bd4a3\u241f3628127143071124194:SS"]);return u=function(){return t},t}function l(){var t=F([":@@ngb.timepicker.decrement-minutes\u241fc1a6899e529c096da5b660385d4e77fe1f7ad271\u241f7447789825403243588:Decrement minutes"]);return l=function(){return t},t}function c(){var t=F([":@@ngb.timepicker.increment-minutes\u241ff5a4a3bc05e053f6732475d0e74875ec01c3a348\u241f180147720391025024:Increment minutes"]);return c=function(){return t},t}function f(){var t=F([":@@ngb.timepicker.decrement-hours\u241f147c7a19429da7d999e247d22e33fee370b1691b\u241f3651829882940481818:Decrement hours"]);return f=function(){return t},t}function d(){var t=F([":@@ngb.timepicker.increment-hours\u241fcb74bc1d625a6c1742f0d7d47306cf495780c218\u241f5939278348542933629:Increment hours"]);return d=function(){return t},t}function h(){var t=F([":@@ngb.timepicker.minutes\u241f41e62daa962947c0d23ded0981975d1bddf0bf38\u241f5531237363767747080:Minutes"]);return h=function(){return t},t}function p(){var t=F([":@@ngb.timepicker.MM\u241f72c8edf6a50068a05bde70991e36b1e881f4ca54\u241f1647282246509919852:MM"]);return p=function(){return t},t}function g(){var t=F([":@@ngb.timepicker.hours\u241f3bbce5fef7e1151da052a4e529453edb340e3912\u241f8070396816726827304:Hours"]);return g=function(){return t},t}function v(){var t=F([":@@ngb.timepicker.HH\u241fce676ab1d6d98f85c836381cf100a4a91ef95a1f\u241f4043638465245303811:HH"]);return v=function(){return t},t}function m(){var t=F([":@@ngb.progressbar.value\u241ff8e9a947b9db4252c0e9905765338712f2fd032f\u241f3720830768741091151:",":INTERPOLATION:"]);return m=function(){return t},t}function y(){var t=F([":@@ngb.pagination.last-aria\u241f5c729788ba138508aca1bec050b610f7bf81db3e\u241f4882268002141858767:Last"]);return y=function(){return t},t}function _(){var t=F([":@@ngb.pagination.next-aria\u241ff732c304c7433e5a83ffcd862c3dce709a0f4982\u241f3885497195825665706:Next"]);return _=function(){return t},t}function b(){var t=F([":@@ngb.pagination.previous-aria\u241f680d5c75b7fd8d37961083608b9fcdc4167b4c43\u241f4452427314943113135:Previous"]);return b=function(){return t},t}function E(){var t=F([":@@ngb.pagination.first-aria\u241ff2f852318759c6396b5d3d17031d53817d7b38cc\u241f2241508602425256033:First"]);return E=function(){return t},t}function T(){var t=F([":@@ngb.pagination.last\u241f49f27a460bc97e7e00be5b37098bfa79884fc7d9\u241f5277020320267646988:\xbb\xbb"]);return T=function(){return t},t}function S(){var t=F([":@@ngb.pagination.next\u241fba9cbb4ff311464308a3627e4f1c3345d9fe6d7d\u241f5458177150283468089:\xbb"]);return S=function(){return t},t}function w(){var t=F([":@@ngb.pagination.previous\u241f6e52b6ee77a4848d899dd21b591c6fd499e3aef3\u241f6479320895410098858:\xab"]);return w=function(){return t},t}function A(){var t=F([":@@ngb.pagination.first\u241f656506dfd46380956a655f919f1498d018f75ca0\u241f6867721956102594380:\xab\xab"]);return A=function(){return t},t}function x(){var t=F([":@@ngb.datepicker.select-year\u241f8ceb09d002bf0c5d1cac171dfbffe1805d2b3962\u241f8852264961585484321:Select year"]);return x=function(){return t},t}function C(){var t=F([":@@ngb.datepicker.select-year\u241f8ceb09d002bf0c5d1cac171dfbffe1805d2b3962\u241f8852264961585484321:Select year"]);return C=function(){return t},t}function D(){var t=F([":@@ngb.datepicker.select-month\u241f1dbc84807f35518112f62e5775d1daebd3d8462b\u241f2253869508135064750:Select month"]);return D=function(){return t},t}function I(){var t=F([":@@ngb.datepicker.select-month\u241f1dbc84807f35518112f62e5775d1daebd3d8462b\u241f2253869508135064750:Select month"]);return I=function(){return t},t}function R(){var t=F([":@@ngb.datepicker.next-month\u241f4bd046985cfe13040d5ef0cd881edce0968a111a\u241f3628374603023447227:Next month"]);return R=function(){return t},t}function k(){var t=F([":@@ngb.datepicker.next-month\u241f4bd046985cfe13040d5ef0cd881edce0968a111a\u241f3628374603023447227:Next month"]);return k=function(){return t},t}function O(){var t=F([":@@ngb.datepicker.previous-month\u241fc3b08b07b5ab98e7cdcf18df39355690ab7d3884\u241f8586908745456864217:Previous month"]);return O=function(){return t},t}function P(){var t=F([":@@ngb.datepicker.previous-month\u241fc3b08b07b5ab98e7cdcf18df39355690ab7d3884\u241f8586908745456864217:Previous month"]);return P=function(){return t},t}function M(){var t=F([":@@ngb.carousel.next\u241ff732c304c7433e5a83ffcd862c3dce709a0f4982\u241f3885497195825665706:Next"]);return M=function(){return t},t}function L(){var t=F([":@@ngb.carousel.previous\u241f680d5c75b7fd8d37961083608b9fcdc4167b4c43\u241f4452427314943113135:Previous"]);return L=function(){return t},t}function N(){var t=F([":@@ngb.alert.close\u241ff4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8\u241f7819314041543176992:Close"]);return N=function(){return t},t}function F(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function j(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=et(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function U(t,e,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function V(t){var e="function"==typeof Map?new Map:void 0;return(V=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return G(t,arguments,Z(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),q(r,t)})(t)}function G(t,e,n){return(G=Q()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&q(i,n.prototype),i}).apply(null,arguments)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}function z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=Q();return function(){var n,r=Z(t);if(e){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?W(t):e}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||et(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"4abu":function(t,e,n){"use strict";var r="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e)for(var r=Object.keys(e),i=r.length,a=0;a<i;a++)t[r[a]]="strict"===n?[e[r[a]]]:e[r[a]]},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var r={};if(!t)return e;for(var i=0;i<n.length;i++)r[n[i]]=void 0!==t[n[i]]?t[n[i]]:e[n[i]];return r},e.isName=function(t){return!(null==i.exec(t))},e.getAllMatches=function(t,e){for(var n=[],r=e.exec(t);r;){for(var i=[],a=r.length,o=0;o<a;o++)i.push(r[o]);n.push(i),r=e.exec(t)}return n},e.nameRegexp=r},Cnnb:function(t,e,n){"use strict";n.r(e);var r=function(t,e,n,r,i,a){var o,u,l,c=r("pixelsPerLabel"),f=[];if(a)for(o=0;o<a.length;o++)f.push({v:a[o]});else{if(r("logscale")){l=Math.floor(n/c);var d=O(t,s,1),h=O(e,s,-1);-1==d&&(d=0),-1==h&&(h=s.length-1);var p=null;if(h-d>=l/4){for(var g=h;g>=d;g--){var v=s[g],m=Math.log(v/t)/Math.log(e/t)*n,y={v:v};null===p||Math.abs(m-p.pixel_coord)>=c?p={tickValue:v,pixel_coord:m}:y.label="",f.push(y)}f.reverse()}}if(0===f.length){var _,b;r("labelsKMG2")?(_=[1,2,4,8,16,32,64,128,256],b=16):(_=[1,2,5,10,20,50,100],b=10);var E,T,S,w=Math.ceil(n/c),A=Math.abs(e-t)/w,x=Math.floor(Math.log(A)/Math.log(b)),C=Math.pow(b,x);for(u=0;u<_.length&&(E=C*_[u],T=Math.floor(t/E)*E,S=Math.ceil(e/E)*E,!(n/(l=Math.abs(S-T)/E)>c));u++);for(T>S&&(E*=-1),o=0;o<=l;o++)f.push({v:T+o*E})}}var D=r("axisLabelFormatter");for(o=0;o<f.length;o++)void 0===f[o].label&&(f[o].label=D.call(i,f[o].v,0,r,i));return f},i=function(t,e,n,r,i,a){var o=u(t,e,n,r);return o>=0?c(t,e,o,r,i):[]},a={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29},o=[];o[a.MILLISECONDLY]={datefield:6,step:1,spacing:1},o[a.TWO_MILLISECONDLY]={datefield:6,step:2,spacing:2},o[a.FIVE_MILLISECONDLY]={datefield:6,step:5,spacing:5},o[a.TEN_MILLISECONDLY]={datefield:6,step:10,spacing:10},o[a.FIFTY_MILLISECONDLY]={datefield:6,step:50,spacing:50},o[a.HUNDRED_MILLISECONDLY]={datefield:6,step:100,spacing:100},o[a.FIVE_HUNDRED_MILLISECONDLY]={datefield:6,step:500,spacing:500},o[a.SECONDLY]={datefield:5,step:1,spacing:1e3},o[a.TWO_SECONDLY]={datefield:5,step:2,spacing:2e3},o[a.FIVE_SECONDLY]={datefield:5,step:5,spacing:5e3},o[a.TEN_SECONDLY]={datefield:5,step:10,spacing:1e4},o[a.THIRTY_SECONDLY]={datefield:5,step:30,spacing:3e4},o[a.MINUTELY]={datefield:4,step:1,spacing:6e4},o[a.TWO_MINUTELY]={datefield:4,step:2,spacing:12e4},o[a.FIVE_MINUTELY]={datefield:4,step:5,spacing:3e5},o[a.TEN_MINUTELY]={datefield:4,step:10,spacing:6e5},o[a.THIRTY_MINUTELY]={datefield:4,step:30,spacing:18e5},o[a.HOURLY]={datefield:3,step:1,spacing:36e5},o[a.TWO_HOURLY]={datefield:3,step:2,spacing:72e5},o[a.SIX_HOURLY]={datefield:3,step:6,spacing:216e5},o[a.DAILY]={datefield:2,step:1,spacing:864e5},o[a.TWO_DAILY]={datefield:2,step:2,spacing:1728e5},o[a.WEEKLY]={datefield:2,step:7,spacing:6048e5},o[a.MONTHLY]={datefield:1,step:1,spacing:2629817280},o[a.QUARTERLY]={datefield:1,step:3,spacing:7889451840.000001},o[a.BIANNUAL]={datefield:1,step:6,spacing:432e5*365.2524},o[a.ANNUAL]={datefield:0,step:1,spacing:864e5*365.2524},o[a.DECADAL]={datefield:0,step:10,spacing:315578073600},o[a.CENTENNIAL]={datefield:0,step:100,spacing:3155780736e3};var s=function(){for(var t=[],e=-39;e<=39;e++)for(var n=Math.pow(10,e),r=1;r<=9;r++)t.push(n*r);return t}(),u=function(t,e,n,r){for(var i=r("pixelsPerLabel"),o=0;o<a.NUM_GRANULARITIES;o++)if(n/l(t,e,o)>=i)return o;return-1},l=function(t,e,n){return Math.round(1*(e-t)/o[n].spacing)},c=function(t,e,n,r,i){var s=r("axisLabelFormatter"),u=r("labelsUTC")?D:C,l=o[n].datefield,c=o[n].step,f=o[n].spacing,d=new Date(t),h=[];h[0]=u.getFullYear(d),h[1]=u.getMonth(d),h[2]=u.getDate(d),h[3]=u.getHours(d),h[4]=u.getMinutes(d),h[5]=u.getSeconds(d),h[6]=u.getMilliseconds(d);var p=h[l]%c;n==a.WEEKLY&&(p=u.getDay(d)),h[l]-=p;for(var g=l+1;g<7;g++)h[g]=2===g?1:0;var v=[],m=u.makeDate.apply(null,h),y=m.getTime();if(n<=a.HOURLY)for(y<t&&(y+=f,m=new Date(y));y<=e;)v.push({v:y,label:s.call(i,m,n,r,i)}),y+=f,m=new Date(y);else for(y<t&&(h[l]+=c,y=(m=u.makeDate.apply(null,h)).getTime());y<=e;)(n>=a.DAILY||u.getHours(m)%c==0)&&v.push({v:y,label:s.call(i,m,n,r,i)}),h[l]+=c,y=(m=u.makeDate.apply(null,h)).getTime();return v},f=Math.log(10),d=function(t){return Math.log(t)/f},h=function(t,e,n){var r=d(t),i=d(e);return Math.pow(10,r+n*(i-r))},p=function(t){return t.getContext("2d")},g=function(t,e,n){t.addEventListener(e,n,!1)};function v(t,e,n){t.removeEventListener(e,n,!1)}function m(t){return(t=t||window.event).stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,!1}function y(t,e,n){var r,i,a;if(0===e)r=n,i=n,a=n;else{var o=Math.floor(6*t),s=6*t-o,u=n*(1-e),l=n*(1-e*s),c=n*(1-e*(1-s));switch(o){case 1:r=l,i=n,a=u;break;case 2:r=u,i=n,a=c;break;case 3:r=u,i=l,a=n;break;case 4:r=c,i=u,a=n;break;case 5:r=n,i=u,a=l;break;case 6:case 0:r=n,i=c,a=u}}return"rgb("+(r=Math.floor(255*r+.5))+","+(i=Math.floor(255*i+.5))+","+(a=Math.floor(255*a+.5))+")"}function _(t){var e=t.getBoundingClientRect(),n=window,r=document.documentElement;return{x:e.left+(n.pageXOffset||r.scrollLeft),y:e.top+(n.pageYOffset||r.scrollTop)}}function b(t){return!t.pageX||t.pageX<0?0:t.pageX}function E(t){return!t.pageY||t.pageY<0?0:t.pageY}function T(t,e){return b(t)-e.px}function S(t,e){return E(t)-e.py}function w(t,e){return!!t&&null!==t.yval&&null!=t.x&&null!=t.y&&!(isNaN(t.x)||!e&&isNaN(t.y))}function A(t,e){var n=Math.min(Math.max(1,e||2),21);return Math.abs(t)<.001&&0!==t?t.toExponential(n-1):t.toPrecision(n)}function x(t){return t<10?"0"+t:""+t}var C={getFullYear:function(t){return t.getFullYear()},getMonth:function(t){return t.getMonth()},getDate:function(t){return t.getDate()},getHours:function(t){return t.getHours()},getMinutes:function(t){return t.getMinutes()},getSeconds:function(t){return t.getSeconds()},getMilliseconds:function(t){return t.getMilliseconds()},getDay:function(t){return t.getDay()},makeDate:function(t,e,n,r,i,a,o){return new Date(t,e,n,r,i,a,o)}},D={getFullYear:function(t){return t.getUTCFullYear()},getMonth:function(t){return t.getUTCMonth()},getDate:function(t){return t.getUTCDate()},getHours:function(t){return t.getUTCHours()},getMinutes:function(t){return t.getUTCMinutes()},getSeconds:function(t){return t.getUTCSeconds()},getMilliseconds:function(t){return t.getUTCMilliseconds()},getDay:function(t){return t.getUTCDay()},makeDate:function(t,e,n,r,i,a,o){return new Date(Date.UTC(t,e,n,r,i,a,o))}};function I(t,e,n,r){var i=x(t)+":"+x(e);if(n&&(i+=":"+x(n),r)){var a=""+r;i+="."+("000"+a).substring(a.length)}return i}function R(t,e){var n=e?D:C,r=new Date(t),i=n.getFullYear(r),a=n.getMonth(r),o=n.getDate(r),s=n.getHours(r),u=n.getMinutes(r),l=n.getSeconds(r),c=n.getMilliseconds(r),f=i+"/"+x(a+1)+"/"+x(o);return 3600*s+60*u+l+.001*c&&(f+=" "+I(s,u,l,c)),f}function k(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function O(t,e,n,r,i){if(null!=r&&null!=i||(r=0,i=e.length-1),r>i)return-1;null==n&&(n=0);var a,o=function(t){return t>=0&&t<e.length},s=parseInt((r+i)/2,10),u=e[s];return u==t?s:u>t?n>0&&o(a=s-1)&&e[a]<t?s:O(t,e,n,r,s-1):u<t?n<0&&o(a=s+1)&&e[a]>t?s:O(t,e,n,s+1,i):-1}function P(t){var e,n;if((-1==t.search("-")||-1!=t.search("T")||-1!=t.search("Z"))&&(n=M(t))&&!isNaN(n))return n;if(-1!=t.search("-")){for(e=t.replace("-","/","g");-1!=e.search("-");)e=e.replace("-","/");n=M(e)}else n=M(8==t.length?e=t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2):t);return n&&!isNaN(n)||console.error("Couldn't parse "+t+" as a date"),n}function M(t){return new Date(t).getTime()}function L(t,e){if(null!=e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function N(t,e){function n(t){return"object"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}if(null!=e)for(var r in e)e.hasOwnProperty(r)&&(null===e[r]?t[r]=null:F(e[r])?t[r]=e[r].slice():n(e[r])?t[r]=e[r]:"object"==typeof e[r]?("object"==typeof t[r]&&null!==t[r]||(t[r]={}),N(t[r],e[r])):t[r]=e[r]);return t}function F(t){var e=typeof t;return("object"==e||"function"==e&&"function"==typeof t.item)&&null!==t&&"number"==typeof t.length&&3!==t.nodeType}function j(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime}function B(){return document.createElement("canvas")}function U(t){try{var e=window.devicePixelRatio;return void 0!==e?e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1):1}catch(n){return 1}}function V(t,e,n,r){e=e||0,n=n||t.length,this.hasNext=!0,this.peek=null,this.start_=e,this.array_=t,this.predicate_=r,this.end_=Math.min(t.length,e+n),this.nextIdx_=e-1,this.next()}function G(t,e,n,r){return new V(t,e,n,r)}V.prototype.next=function(){if(!this.hasNext)return null;for(var t=this.peek,e=this.nextIdx_+1,n=!1;e<this.end_;){if(!this.predicate_||this.predicate_(this.array_,e)){this.peek=this.array_[e],n=!0;break}e++}return this.nextIdx_=e,n||(this.hasNext=!1,this.peek=null),t};var H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function Y(t,e,n,r){var i,a=0,o=(new Date).getTime();if(t(a),1!=e){var s=e-1;!function u(){a>=e||H.call(window,(function(){var e=(new Date).getTime();i=a;var l=(a=Math.floor((e-o)/n))-i;a+l>s||a>=s?(t(s),r()):(0!==l&&t(a),u())}))}()}else r()}var z={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,labelsDiv:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotFillGradientColor:!0,rangeSelectorPlotStrokeColor:!0,rangeSelectorBackgroundStrokeColor:!0,rangeSelectorBackgroundLineWidth:!0,rangeSelectorPlotLineWidth:!0,rangeSelectorForegroundStrokeColor:!0,rangeSelectorForegroundLineWidth:!0,rangeSelectorAlpha:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0},q={DEFAULT:function(t,e,n,r,i,a,o){n.beginPath(),n.fillStyle=a,n.arc(r,i,o,0,2*Math.PI,!1),n.fill()}};function X(t){for(var e=0;e<t.length;e++){var n=t.charAt(e);if("\r"===n)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":n;if("\n"===n)return e+1<t.length&&"\r"===t.charAt(e+1)?"\n\r":n}return null}function K(t,e){if(null===e||null===t)return!1;for(var n=t;n&&n!==e;)n=n.parentNode;return n===e}function W(t,e){return e<0?1/Math.pow(t,-e):Math.pow(t,e)}var Q=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;function $(t){var e=Q.exec(t);if(!e)return null;var n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);return e[4]?{r:n,g:r,b:i,a:parseFloat(e[4])}:{r:n,g:r,b:i}}function Z(t){var e=$(t);if(e)return e;var n=document.createElement("div");n.style.backgroundColor=t,n.style.visibility="hidden",document.body.appendChild(n);var r=window.getComputedStyle(n,null).backgroundColor;return document.body.removeChild(n),$(r)}function J(t,e,n){var r=parseFloat(t);if(!isNaN(r))return r;if(/^ *$/.test(t))return null;if(/^ *nan *$/i.test(t))return NaN;var i="Unable to parse '"+t+"' as a number";return void 0!==n&&void 0!==e&&(i+=" on line "+(1+(e||0))+" ('"+n+"') of CSV."),console.error(i),null}var et=["K","M","B","T","Q"],nt=["k","M","G","T","P","E","Z","Y"],rt=["m","u","n","p","f","a","z","y"];function it(t,e){var n=e("sigFigs");if(null!==n)return A(t,n);var r,i=e("digitsAfterDecimal"),a=e("maxNumberWidth"),o=e("labelsKMB"),s=e("labelsKMG2");if(r=0!==t&&(Math.abs(t)>=Math.pow(10,a)||Math.abs(t)<Math.pow(10,-i))?t.toExponential(i):""+k(t,i),o||s){var u,l=[],c=[];o&&(u=1e3,l=et),s&&(o&&console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),u=1024,l=nt,c=rt);for(var f=Math.abs(t),d=W(u,l.length),h=l.length-1;h>=0;h--,d/=u)if(f>=d){r=k(t/d,i)+l[h];break}if(s){var p=String(t.toExponential()).split("e-");2===p.length&&p[1]>=3&&p[1]<=24&&(r=p[1]%3>0?k(p[0]/W(10,p[1]%3),i):Number(p[0]).toFixed(2),r+=c[Math.floor(p[1]/3)-1])}}return r}function at(t,e,n){return it.call(this,t,n)}var ot=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function st(t,e,n){var r=n("labelsUTC")?D:C,i=r.getFullYear(t),o=r.getMonth(t),s=r.getDate(t),u=r.getHours(t),l=r.getMinutes(t),c=r.getSeconds(t),f=r.getMilliseconds(t);if(e>=a.DECADAL)return""+i;if(e>=a.MONTHLY)return ot[o]+"&#160;"+i;if(0===3600*u+60*l+c+.001*f||e>=a.DAILY)return x(s)+"&#160;"+ot[o];if(e<a.SECONDLY){var d=""+f;return x(c)+"."+("000"+d).substring(d.length)}return I(u,l,c,e>a.MINUTELY?0:f)}function ut(t,e){return R(t,e("labelsUTC"))}var lt=function(t){this.dygraph_=t,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};lt.prototype.addDataset=function(t,e){this.points.push(e),this.setNames.push(t)},lt.prototype.getPlotArea=function(){return this.area_},lt.prototype.computePlotArea=function(){var t={x:0,y:0};t.w=this.dygraph_.width_-t.x-this.dygraph_.getOption("rightGap"),t.h=this.dygraph_.height_,this.dygraph_.cascadeEvents_("layout",{chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(e){var n={x:t.x,y:t.y,w:e,h:t.h};return t.x+=e,t.w-=e,n},reserveSpaceRight:function(e){var n={x:t.x+t.w-e,y:t.y,w:e,h:t.h};return t.w-=e,n},reserveSpaceTop:function(e){var n={x:t.x,y:t.y,w:t.w,h:e};return t.y+=e,t.h-=e,n},reserveSpaceBottom:function(e){var n={x:t.x,y:t.y+t.h-e,w:t.w,h:e};return t.h-=e,n},chartRect:function(){return{x:t.x,y:t.y,w:t.w,h:t.h}}}),this.area_=t},lt.prototype.setAnnotations=function(t){this.annotations=[];for(var e=this.dygraph_.getOption("xValueParser")||function(t){return t},n=0;n<t.length;n++){var r={};if(!t[n].xval&&void 0===t[n].x)return void console.error("Annotations must have an 'x' property");if(t[n].icon&&(!t[n].hasOwnProperty("width")||!t[n].hasOwnProperty("height")))return void console.error("Must set width and height when setting annotation.icon property");L(r,t[n]),r.xval||(r.xval=e(r.x)),this.annotations.push(r)}},lt.prototype.setXTicks=function(t){this.xTicks_=t},lt.prototype.setYAxes=function(t){this.yAxes_=t},lt.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},lt.prototype._evaluateLimits=function(){var t=this.dygraph_.xAxisRange();this._xAxis.minval=t[0],this._xAxis.maxval=t[1];var e=t[1]-t[0];this._xAxis.scale=0!==e?1/e:1,this.dygraph_.getOptionForAxis("logscale","x")&&(this._xAxis.xlogrange=d(this._xAxis.maxval)-d(this._xAxis.minval),this._xAxis.xlogscale=0!==this._xAxis.xlogrange?1/this._xAxis.xlogrange:1);for(var n=0;n<this.yAxes_.length;n++){var r=this.yAxes_[n];r.minyval=r.computedValueRange[0],r.maxyval=r.computedValueRange[1],r.yrange=r.maxyval-r.minyval,r.yscale=0!==r.yrange?1/r.yrange:1,this.dygraph_.getOption("logscale")&&(r.ylogrange=d(r.maxyval)-d(r.minyval),r.ylogscale=0!==r.ylogrange?1/r.ylogrange:1,isFinite(r.ylogrange)&&!isNaN(r.ylogrange)||console.error("axis "+n+" of graph at "+r.g+" can't be displayed in log scale for range ["+r.minyval+" - "+r.maxyval+"]"))}},lt.calcXNormal_=function(t,e,n){return n?(d(t)-d(e.minval))*e.xlogscale:(t-e.minval)*e.scale},lt.calcYNormal_=function(t,e,n){if(n){var r=1-(d(e)-d(t.minyval))*t.ylogscale;return isFinite(r)?r:NaN}return 1-(e-t.minyval)*t.yscale},lt.prototype._evaluateLineCharts=function(){for(var t=this.dygraph_.getOption("stackedGraph"),e=this.dygraph_.getOptionForAxis("logscale","x"),n=0;n<this.points.length;n++){for(var r=this.points[n],i=this.setNames[n],a=this.dygraph_.getOption("connectSeparatedPoints",i),o=this.dygraph_.axisPropertiesForSeries(i),s=this.dygraph_.attributes_.getForSeries("logscale",i),u=0;u<r.length;u++){var l=r[u];l.x=lt.calcXNormal_(l.xval,this._xAxis,e);var c=l.yval;t&&(l.y_stacked=lt.calcYNormal_(o,l.yval_stacked,s),null===c||isNaN(c)||(c=l.yval_stacked)),null===c&&(c=NaN,a||(l.yval=NaN)),l.y=lt.calcYNormal_(o,c,s)}this.dygraph_.dataHandler_.onLineEvaluated(r,o,s)}},lt.prototype._evaluateLineTicks=function(){var t,e,n,r,i;for(this.xticks=[],t=0;t<this.xTicks_.length;t++)n=(e=this.xTicks_[t]).label,(r=this.dygraph_.toPercentXCoord((i=!("label_v"in e))?e.v:e.label_v))>=0&&r<1&&this.xticks.push({pos:r,label:n,has_tick:i});for(this.yticks=[],t=0;t<this.yAxes_.length;t++)for(var a=this.yAxes_[t],o=0;o<a.ticks.length;o++)n=(e=a.ticks[o]).label,(r=this.dygraph_.toPercentYCoord((i=!("label_v"in e))?e.v:e.label_v,t))>0&&r<=1&&this.yticks.push({axis:t,pos:r,label:n,has_tick:i})},lt.prototype._evaluateAnnotations=function(){var t,e={};for(t=0;t<this.annotations.length;t++){var n=this.annotations[t];e[n.xval+","+n.series]=n}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var r=0;r<this.points.length;r++){var i=this.points[r];for(t=0;t<i.length;t++){var a=i[t],o=a.xval+","+a.name;o in e&&(a.annotation=e[o],this.annotated_points.push(a))}}},lt.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]};var ct=lt,ft=function(t,e,n,r){if(this.dygraph_=t,this.layout=r,this.element=e,this.elementContext=n,this.height=t.height_,this.width=t.width_,!function(t){try{(t||document.createElement("canvas")).getContext("2d")}catch(e){return!1}return!0}(this.element))throw"Canvas is not supported.";this.area=r.getPlotArea();var i=this.dygraph_.canvas_ctx_;i.beginPath(),i.rect(this.area.x,this.area.y,this.area.w,this.area.h),i.clip(),(i=this.dygraph_.hidden_ctx_).beginPath(),i.rect(this.area.x,this.area.y,this.area.w,this.area.h),i.clip()};ft.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)},ft.prototype.render=function(){this._updatePoints(),this._renderLineChart()},ft._getIteratorPredicate=function(t){return t?ft._predicateThatSkipsEmptyPoints:null},ft._predicateThatSkipsEmptyPoints=function(t,e){return null!==t[e].yval},ft._drawStyledLine=function(t,e,n,r,i,a,o){var s=t.dygraph,u=s.getBooleanOption("stepPlot",t.setName);F(r)||(r=null);var l=s.getBooleanOption("drawGapEdgePoints",t.setName),c=t.points,f=G(c,0,c.length,ft._getIteratorPredicate(s.getBooleanOption("connectSeparatedPoints",t.setName))),d=r&&r.length>=2,h=t.drawingContext;h.save(),d&&h.setLineDash&&h.setLineDash(r);var p=ft._drawSeries(t,f,n,o,i,l,u,e);ft._drawPointsOnLine(t,p,a,e,o),d&&h.setLineDash&&h.setLineDash([]),h.restore()},ft._drawSeries=function(t,e,n,r,i,a,o,s){var u,l,c=null,f=null,d=null,h=[],p=!0,g=t.drawingContext;g.beginPath(),g.strokeStyle=s,g.lineWidth=n;for(var v=e.array_,m=e.end_,y=e.predicate_,_=e.start_;_<m;_++){if(l=v[_],y){for(;_<m&&!y(v,_);)_++;if(_==m)break;l=v[_]}if(null===l.canvasy||l.canvasy!=l.canvasy)o&&null!==c&&(g.moveTo(c,f),g.lineTo(l.canvasx,f)),c=f=null;else{if(u=!1,a||null===c){e.nextIdx_=_,e.next();var b=null===(d=e.hasNext?e.peek.canvasy:null)||d!=d;u=null===c&&b,a&&(!p&&null===c||e.hasNext&&b)&&(u=!0)}null!==c?n&&(o&&(g.moveTo(c,f),g.lineTo(l.canvasx,f)),g.lineTo(l.canvasx,l.canvasy)):g.moveTo(l.canvasx,l.canvasy),(i||u)&&h.push([l.canvasx,l.canvasy,l.idx]),c=l.canvasx,f=l.canvasy}p=!1}return g.stroke(),h},ft._drawPointsOnLine=function(t,e,n,r,i){for(var a=t.drawingContext,o=0;o<e.length;o++){var s=e[o];a.save(),n.call(t.dygraph,t.dygraph,t.setName,a,s[0],s[1],r,i,s[2]),a.restore()}},ft.prototype._updatePoints=function(){for(var t=this.layout.points,e=t.length;e--;)for(var n=t[e],r=n.length;r--;){var i=n[r];i.canvasx=this.area.w*i.x+this.area.x,i.canvasy=this.area.h*i.y+this.area.y}},ft.prototype._renderLineChart=function(t,e){var n,r,i=e||this.elementContext,a=this.layout.points,o=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var s=this.dygraph_.getOption("plotter"),u=s;F(u)||(u=[u]);var l={};for(n=0;n<o.length;n++){var c=this.dygraph_.getOption("plotter",r=o[n]);c!=s&&(l[r]=c)}for(n=0;n<u.length;n++)for(var f=u[n],d=n==u.length-1,h=0;h<a.length;h++)if(r=o[h],!t||r==t){var p=a[h],g=f;if(r in l){if(!d)continue;g=l[r]}var v=this.colors[r],m=this.dygraph_.getOption("strokeWidth",r);i.save(),i.strokeStyle=v,i.lineWidth=m,g({points:p,setName:r,drawingContext:i,color:v,strokeWidth:m,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(r),plotArea:this.area,seriesIndex:h,seriesCount:a.length,singleSeriesName:t,allSeriesPoints:a}),i.restore()}},ft._Plotters={linePlotter:function(t){ft._linePlotter(t)},fillPlotter:function(t){ft._fillPlotter(t)},errorPlotter:function(t){ft._errorPlotter(t)}},ft._linePlotter=function(t){var e=t.dygraph,n=t.setName,r=t.strokeWidth,i=e.getNumericOption("strokeBorderWidth",n),a=e.getOption("drawPointCallback",n)||q.DEFAULT,o=e.getOption("strokePattern",n),s=e.getBooleanOption("drawPoints",n),u=e.getNumericOption("pointSize",n);i&&r&&ft._drawStyledLine(t,e.getOption("strokeBorderColor",n),r+2*i,o,s,a,u),ft._drawStyledLine(t,t.color,r,o,s,a,u)},ft._errorPlotter=function(t){var e=t.dygraph,n=t.setName;if(e.getBooleanOption("errorBars")||e.getBooleanOption("customBars")){e.getBooleanOption("fillGraph",n)&&console.warn("Can't use fillGraph option with error bars");var r,i=t.drawingContext,a=t.color,o=e.getNumericOption("fillAlpha",n),s=e.getBooleanOption("stepPlot",n),u=t.points,l=G(u,0,u.length,ft._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",n))),c=NaN,f=NaN,d=[-1,-1],h=Z(a);i.fillStyle="rgba("+h.r+","+h.g+","+h.b+","+o+")",i.beginPath();for(var p=function(t){return null==t||isNaN(t)};l.hasNext;){var g=l.next();!s&&p(g.y)||s&&!isNaN(f)&&p(f)?c=NaN:(r=[g.y_bottom,g.y_top],s&&(f=g.y),isNaN(r[0])&&(r[0]=g.y),isNaN(r[1])&&(r[1]=g.y),r[0]=t.plotArea.h*r[0]+t.plotArea.y,r[1]=t.plotArea.h*r[1]+t.plotArea.y,isNaN(c)||(s?(i.moveTo(c,d[0]),i.lineTo(g.canvasx,d[0]),i.lineTo(g.canvasx,d[1])):(i.moveTo(c,d[0]),i.lineTo(g.canvasx,r[0]),i.lineTo(g.canvasx,r[1])),i.lineTo(c,d[1]),i.closePath()),d=r,c=g.canvasx)}i.fill()}},ft._fastCanvasProxy=function(t){var e=[],n=null,r=null,i=0,a=function(n){!function(t){if(!(e.length<=1)){for(var n=e.length-1;n>0;n--)if(2==(s=e[n])[0]){var r=e[n-1];r[1]==s[1]&&r[2]==s[2]&&e.splice(n,1)}for(n=0;n<e.length-1;)2==(s=e[n])[0]&&2==e[n+1][0]?e.splice(n,1):n++;if(e.length>2&&!t){var i=0;2==e[0][0]&&i++;var a=null,o=null;for(n=i;n<e.length;n++){var s;if(1==(s=e[n])[0])if(null===a&&null===o)a=n,o=n;else{var u=s[2];u<e[a][2]?a=n:u>e[o][2]&&(o=n)}}var l=e[a],c=e[o];e.splice(i,e.length-i),a<o?(e.push(l),e.push(c)):a>o?(e.push(c),e.push(l)):e.push(l)}}}(n);for(var a=0,o=e.length;a<o;a++){var s=e[a];1==s[0]?t.lineTo(s[1],s[2]):2==s[0]&&t.moveTo(s[1],s[2])}e.length&&(r=e[e.length-1][1]),i+=e.length,e=[]},o=function(t,i,o){var s=Math.round(i);null!==n&&s==n||(a(n-r>1||s-n>1),n=s),e.push([t,i,o])};return{moveTo:function(t,e){o(2,t,e)},lineTo:function(t,e){o(1,t,e)},stroke:function(){a(!0),t.stroke()},fill:function(){a(!0),t.fill()},beginPath:function(){a(!0),t.beginPath()},closePath:function(){a(!0),t.closePath()},_count:function(){return i}}},ft._fillPlotter=function(t){if(!t.singleSeriesName&&0===t.seriesIndex){for(var e=t.dygraph,n=e.getLabels().slice(1),r=n.length;r>=0;r--)e.visibility()[r]||n.splice(r,1);if(function(){for(var t=0;t<n.length;t++)if(e.getBooleanOption("fillGraph",n[t]))return!0;return!1}())for(var i,a,o,s=t.plotArea,u=t.allSeriesPoints,l=u.length,c=e.getBooleanOption("stackedGraph"),f=e.getColors(),d={},h=function(t,e,n,r){if(t.lineTo(e,n),c)for(var i=r.length-1;i>=0;i--){var a=r[i];t.lineTo(a[0],a[1])}},p=l-1;p>=0;p--){var g=t.drawingContext,v=n[p];if(e.getBooleanOption("fillGraph",v)){var m=e.getNumericOption("fillAlpha",v),y=e.getBooleanOption("stepPlot",v),_=f[p],b=e.axisPropertiesForSeries(v),E=1+b.minyval*b.yscale;E<0?E=0:E>1&&(E=1),E=s.h*E+s.y;var T,S=u[p],w=G(S,0,S.length,ft._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",v))),A=NaN,x=[-1,-1],C=Z(_);g.fillStyle="rgba("+C.r+","+C.g+","+C.b+","+m+")",g.beginPath();var D,I=!0;(S.length>2*e.width_||te.FORCE_FAST_PROXY)&&(g=ft._fastCanvasProxy(g));for(var R,k=[];w.hasNext;)if((o=(R=w.next()).y)&&!isNaN(o)||y){if(c){if(!I&&D==R.xval)continue;I=!1,D=R.xval,T=[R.canvasy,void 0===(i=d[R.canvasx])?E:a?i[0]:i],d[R.canvasx]=y?-1===x[0]?[R.canvasy,E]:[R.canvasy,x[0]]:R.canvasy}else T=isNaN(R.canvasy)&&y?[s.y+s.h,E]:[R.canvasy,E];isNaN(A)?(g.moveTo(R.canvasx,T[1]),g.lineTo(R.canvasx,T[0])):(y?(g.lineTo(R.canvasx,x[0]),g.lineTo(R.canvasx,T[0])):g.lineTo(R.canvasx,T[0]),c&&(k.push([A,x[1]]),k.push(a&&i?[R.canvasx,i[1]]:[R.canvasx,T[1]]))),x=T,A=R.canvasx}else h(g,A,x[1],k),k=[],A=NaN,null===R.y_stacked||isNaN(R.y_stacked)||(d[R.canvasx]=s.h*R.y_stacked+s.y);a=y,T&&R&&(h(g,R.canvasx,T[1],k),k=[]),g.fill()}}}};var dt=ft,ht={maybeTreatMouseOpAsClick:function(t,e,n){n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=Math.abs(n.dragEndX-n.dragStartX),i=Math.abs(n.dragEndY-n.dragStartY);r<2&&i<2&&void 0!==e.lastx_&&-1!=e.lastx_&&ht.treatMouseOpAsClick(e,t,n),n.regionWidth=r,n.regionHeight=i},startPan:function(t,e,n){var r,i;n.isPanning=!0;var a=e.xAxisRange();if(e.getOptionForAxis("logscale","x")?(n.initialLeftmostDate=d(a[0]),n.dateRange=d(a[1])-d(a[0])):(n.initialLeftmostDate=a[0],n.dateRange=a[1]-a[0]),n.xUnitsPerPixel=n.dateRange/(e.plotter_.area.w-1),e.getNumericOption("panEdgeFraction")){var o=e.width_*e.getNumericOption("panEdgeFraction"),s=e.xAxisExtremes(),u=e.toDomXCoord(s[0])-o,l=e.toDomXCoord(s[1])+o,c=e.toDataXCoord(u),f=e.toDataXCoord(l);n.boundedDates=[c,f];var h=[],p=e.height_*e.getNumericOption("panEdgeFraction");for(r=0;r<e.axes_.length;r++){var g=(i=e.axes_[r]).extremeRange,v=e.toDomYCoord(g[0],r)+p,m=e.toDomYCoord(g[1],r)-p,y=e.toDataYCoord(v,r),_=e.toDataYCoord(m,r);h[r]=[y,_]}n.boundedValues=h}for(n.is2DPan=!1,n.axes=[],r=0;r<e.axes_.length;r++){i=e.axes_[r];var b={},E=e.yAxisRange(r);e.attributes_.getForAxis("logscale",r)?(b.initialTopValue=d(E[1]),b.dragValueRange=d(E[1])-d(E[0])):(b.initialTopValue=E[1],b.dragValueRange=E[1]-E[0]),b.unitsPerPixel=b.dragValueRange/(e.plotter_.area.h-1),n.axes.push(b),i.valueRange&&(n.is2DPan=!0)}},movePan:function(t,e,n){n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=n.initialLeftmostDate-(n.dragEndX-n.dragStartX)*n.xUnitsPerPixel;n.boundedDates&&(r=Math.max(r,n.boundedDates[0]));var i=r+n.dateRange;if(n.boundedDates&&i>n.boundedDates[1]&&(i=(r-=i-n.boundedDates[1])+n.dateRange),e.dateWindow_=e.getOptionForAxis("logscale","x")?[Math.pow(10,r),Math.pow(10,i)]:[r,i],n.is2DPan)for(var a=n.dragEndY-n.dragStartY,o=0;o<e.axes_.length;o++){var s=e.axes_[o],u=n.axes[o],l=n.boundedValues?n.boundedValues[o]:null,c=u.initialTopValue+a*u.unitsPerPixel;l&&(c=Math.min(c,l[1]));var f=c-u.dragValueRange;l&&f<l[0]&&(f=(c-=f-l[0])-u.dragValueRange),s.valueRange=e.attributes_.getForAxis("logscale",o)?[Math.pow(10,f),Math.pow(10,c)]:[f,c]}e.drawGraph_(!1)}};ht.endPan=ht.maybeTreatMouseOpAsClick,ht.startZoom=function(t,e,n){n.isZooming=!0,n.zoomMoved=!1},ht.moveZoom=function(t,e,n){n.zoomMoved=!0,n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=Math.abs(n.dragStartX-n.dragEndX),i=Math.abs(n.dragStartY-n.dragEndY);n.dragDirection=r<i/2?2:1,e.drawZoomRect_(n.dragDirection,n.dragStartX,n.dragEndX,n.dragStartY,n.dragEndY,n.prevDragDirection,n.prevEndX,n.prevEndY),n.prevEndX=n.dragEndX,n.prevEndY=n.dragEndY,n.prevDragDirection=n.dragDirection},ht.treatMouseOpAsClick=function(t,e,n){for(var r=t.getFunctionOption("clickCallback"),i=t.getFunctionOption("pointClickCallback"),a=null,o=-1,s=Number.MAX_VALUE,u=0;u<t.selPoints_.length;u++){var l=t.selPoints_[u],c=Math.pow(l.canvasx-n.dragEndX,2)+Math.pow(l.canvasy-n.dragEndY,2);!isNaN(c)&&(-1==o||c<s)&&(s=c,o=u)}var f=t.getNumericOption("highlightCircleSize")+2;if(s<=f*f&&(a=t.selPoints_[o]),a){if(t.cascadeEvents_("pointClick",{cancelable:!0,point:a,canvasx:n.dragEndX,canvasy:n.dragEndY}))return;i&&i.call(t,e,a)}t.cascadeEvents_("click",{cancelable:!0,xval:t.lastx_,pts:t.selPoints_,canvasx:n.dragEndX,canvasy:n.dragEndY})||r&&r.call(t,e,t.lastx_,t.selPoints_)},ht.endZoom=function(t,e,n){e.clearZoomRect_(),n.isZooming=!1,ht.maybeTreatMouseOpAsClick(t,e,n);var r=e.getArea();if(n.regionWidth>=10&&1==n.dragDirection){var i=Math.min(n.dragStartX,n.dragEndX),a=Math.max(n.dragStartX,n.dragEndX);(i=Math.max(i,r.x))<(a=Math.min(a,r.x+r.w))&&e.doZoomX_(i,a),n.cancelNextDblclick=!0}else if(n.regionHeight>=10&&2==n.dragDirection){var o=Math.min(n.dragStartY,n.dragEndY),s=Math.max(n.dragStartY,n.dragEndY);(o=Math.max(o,r.y))<(s=Math.min(s,r.y+r.h))&&e.doZoomY_(o,s),n.cancelNextDblclick=!0}n.dragStartX=null,n.dragStartY=null},ht.startTouch=function(t,e,n){t.preventDefault(),t.touches.length>1&&(n.startTimeForDoubleTapMs=null);for(var r=[],i=0;i<t.touches.length;i++){var a=t.touches[i];r.push({pageX:a.pageX,pageY:a.pageY,dataX:e.toDataXCoord(a.pageX),dataY:e.toDataYCoord(a.pageY)})}if(n.initialTouches=r,1==r.length)n.initialPinchCenter=r[0],n.touchDirections={x:!0,y:!0};else if(r.length>=2){n.initialPinchCenter={pageX:.5*(r[0].pageX+r[1].pageX),pageY:.5*(r[0].pageY+r[1].pageY),dataX:.5*(r[0].dataX+r[1].dataX),dataY:.5*(r[0].dataY+r[1].dataY)};var o=180/Math.PI*Math.atan2(n.initialPinchCenter.pageY-r[0].pageY,r[0].pageX-n.initialPinchCenter.pageX);(o=Math.abs(o))>90&&(o=90-o),n.touchDirections={x:o<67.5,y:o>22.5}}n.initialRange={x:e.xAxisRange(),y:e.yAxisRange()}},ht.moveTouch=function(t,e,n){n.startTimeForDoubleTapMs=null;var r,i=[];for(r=0;r<t.touches.length;r++){var a=t.touches[r];i.push({pageX:a.pageX,pageY:a.pageY})}var o,s,u,l=n.initialTouches,c=n.initialPinchCenter,f={pageX:(o=1==i.length?i[0]:{pageX:.5*(i[0].pageX+i[1].pageX),pageY:.5*(i[0].pageY+i[1].pageY)}).pageX-c.pageX,pageY:o.pageY-c.pageY},d=n.initialRange.y[0]-n.initialRange.y[1];f.dataX=f.pageX/e.plotter_.area.w*(n.initialRange.x[1]-n.initialRange.x[0]),f.dataY=f.pageY/e.plotter_.area.h*d,1==i.length?(s=1,u=1):i.length>=2&&(s=(i[1].pageX-o.pageX)/(l[1].pageX-c.pageX),u=(i[1].pageY-o.pageY)/(l[1].pageY-c.pageY)),s=Math.min(8,Math.max(.125,s)),u=Math.min(8,Math.max(.125,u));var h=!1;if(n.touchDirections.x&&(e.dateWindow_=[c.dataX-f.dataX+(n.initialRange.x[0]-c.dataX)/s,c.dataX-f.dataX+(n.initialRange.x[1]-c.dataX)/s],h=!0),n.touchDirections.y)for(r=0;r<1;r++){var p=e.axes_[r];e.attributes_.getForAxis("logscale",r)||(p.valueRange=[c.dataY-f.dataY+(n.initialRange.y[0]-c.dataY)/u,c.dataY-f.dataY+(n.initialRange.y[1]-c.dataY)/u],h=!0)}if(e.drawGraph_(!1),h&&i.length>1&&e.getFunctionOption("zoomCallback")){var g=e.xAxisRange();e.getFunctionOption("zoomCallback").call(e,g[0],g[1],e.yAxisRanges())}},ht.endTouch=function(t,e,n){if(0!==t.touches.length)ht.startTouch(t,e,n);else if(1==t.changedTouches.length){var r=(new Date).getTime(),i=t.changedTouches[0];n.startTimeForDoubleTapMs&&r-n.startTimeForDoubleTapMs<500&&n.doubleTapX&&Math.abs(n.doubleTapX-i.screenX)<50&&n.doubleTapY&&Math.abs(n.doubleTapY-i.screenY)<50?e.resetZoom():(n.startTimeForDoubleTapMs=r,n.doubleTapX=i.screenX,n.doubleTapY=i.screenY)}};var pt=function(t,e,n){return t<e?e-t:t>n?t-n:0};ht.defaultModel={mousedown:function(t,e,n){if(!t.button||2!=t.button){n.initializeMouseDown(t,e,n),t.altKey||t.shiftKey?ht.startPan(t,e,n):ht.startZoom(t,e,n);var r=function(t){n.isZooming?function(t,e){var n=_(e.canvas_),r={left:n.x,right:n.x+e.canvas_.offsetWidth,top:n.y,bottom:n.y+e.canvas_.offsetHeight},i={x:b(t),y:E(t)},a=pt(i.x,r.left,r.right),o=pt(i.y,r.top,r.bottom);return Math.max(a,o)}(t,e)<100?ht.moveZoom(t,e,n):null!==n.dragEndX&&(n.dragEndX=null,n.dragEndY=null,e.clearZoomRect_()):n.isPanning&&ht.movePan(t,e,n)};e.addAndTrackEvent(document,"mousemove",r),e.addAndTrackEvent(document,"mouseup",(function t(i){n.isZooming?null!==n.dragEndX?ht.endZoom(i,e,n):ht.maybeTreatMouseOpAsClick(i,e,n):n.isPanning&&ht.endPan(i,e,n),v(document,"mousemove",r),v(document,"mouseup",t),n.destroy()}))}},willDestroyContextMyself:!0,touchstart:function(t,e,n){ht.startTouch(t,e,n)},touchmove:function(t,e,n){ht.moveTouch(t,e,n)},touchend:function(t,e,n){ht.endTouch(t,e,n)},dblclick:function(t,e,n){n.cancelNextDblclick?n.cancelNextDblclick=!1:e.cascadeEvents_("dblclick",{canvasx:n.dragEndX,canvasy:n.dragEndY,cancelable:!0})||t.altKey||t.shiftKey||e.resetZoom()}},ht.nonInteractiveModel_={mousedown:function(t,e,n){n.initializeMouseDown(t,e,n)},mouseup:ht.maybeTreatMouseOpAsClick},ht.dragIsPanInteractionModel={mousedown:function(t,e,n){n.initializeMouseDown(t,e,n),ht.startPan(t,e,n)},mousemove:function(t,e,n){n.isPanning&&ht.movePan(t,e,n)},mouseup:function(t,e,n){n.isPanning&&ht.endPan(t,e,n)}};var gt=ht,vt={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,xValueParser:void 0,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:50,gridLineColor:"rgb(128,128,128)",interactionModel:gt.defaultModel,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[dt._fillPlotter,dt._errorPlotter,dt._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:st,valueFormatter:ut,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:i},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:it,axisLabelFormatter:at,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:r},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:it,axisLabelFormatter:at,drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:r}}},mt=function(t){this.dygraph_=t,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};mt.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},mt.axisToIndex_=function(t){if("string"==typeof t){if(mt.AXIS_STRING_MAPPINGS_.hasOwnProperty(t))return mt.AXIS_STRING_MAPPINGS_[t];throw"Unknown axis : "+t}if("number"==typeof t){if(0===t||1===t)return t;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(t)throw"Unknown axis : "+t;return 0},mt.prototype.reparseSeries=function(){var t=this.get("labels");if(t){this.labels_=t.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};for(var e=this.user_.series||{},n=0;n<this.labels_.length;n++){var r=this.labels_[n],i=e[r]||{},a=mt.axisToIndex_(i.axis);this.series_[r]={idx:n,yAxis:a,options:i},this.yAxes_[a]?this.yAxes_[a].series.push(r):this.yAxes_[a]={series:[r],options:{}}}var o=this.user_.axes||{};L(this.yAxes_[0].options,o.y||{}),this.yAxes_.length>1&&L(this.yAxes_[1].options,o.y2||{}),L(this.xAxis_.options,o.x||{})}},mt.prototype.get=function(t){var e=this.getGlobalUser_(t);return null!==e?e:this.getGlobalDefault_(t)},mt.prototype.getGlobalUser_=function(t){return this.user_.hasOwnProperty(t)?this.user_[t]:null},mt.prototype.getGlobalDefault_=function(t){return this.global_.hasOwnProperty(t)?this.global_[t]:vt.hasOwnProperty(t)?vt[t]:null},mt.prototype.getForAxis=function(t,e){var n,r;if("number"==typeof e)r=0===(n=e)?"y":"y2";else{if("y1"==e&&(e="y"),"y"==e)n=0;else if("y2"==e)n=1;else{if("x"!=e)throw"Unknown axis "+e;n=-1}r=e}var i=-1==n?this.xAxis_:this.yAxes_[n];if(i){var a=i.options;if(a.hasOwnProperty(t))return a[t]}if("x"!==e||"logscale"!==t){var o=this.getGlobalUser_(t);if(null!==o)return o}var s=vt.axes[r];return s.hasOwnProperty(t)?s[t]:this.getGlobalDefault_(t)},mt.prototype.getForSeries=function(t,e){if(e===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(t))return this.highlightSeries_[t];if(!this.series_.hasOwnProperty(e))throw"Unknown series: "+e;var n=this.series_[e],r=n.options;return r.hasOwnProperty(t)?r[t]:this.getForAxis(t,n.yAxis)},mt.prototype.numAxes=function(){return this.yAxes_.length},mt.prototype.axisForSeries=function(t){return this.series_[t].yAxis},mt.prototype.axisOptions=function(t){return this.yAxes_[t].options},mt.prototype.seriesForAxis=function(t){return this.yAxes_[t].series},mt.prototype.seriesNames=function(){return this.labels_};var yt=mt;function _t(){this.tarps=[]}_t.prototype.cover=function(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var n=t[e],r=_(n),i=r.x,a=r.y,o=n.offsetWidth,s=n.offsetHeight,u=document.createElement("div");u.style.position="absolute",u.style.left=i+"px",u.style.top=a+"px",u.style.width=o+"px",u.style.height=s+"px",u.style.zIndex=999,document.body.appendChild(u),this.tarps.push(u)}},_t.prototype.uncover=function(){for(var t=0;t<this.tarps.length;t++)this.tarps[t].parentNode.removeChild(this.tarps[t]);this.tarps=[]};var bt=_t,Et=function(){},Tt=Et;Tt.X=0,Tt.Y=1,Tt.EXTRAS=2,Tt.prototype.extractSeries=function(t,e,n){},Tt.prototype.seriesToPoints=function(t,e,n){for(var r=[],i=0;i<t.length;++i){var a=t[i],o=a[1],s=null===o?null:Tt.parseFloat(o),u={x:NaN,y:NaN,xval:Tt.parseFloat(a[0]),yval:s,name:e,idx:i+n};r.push(u)}return this.onPointsCreated_(t,r),r},Tt.prototype.onPointsCreated_=function(t,e){},Tt.prototype.rollingAverage=function(t,e,n){},Tt.prototype.getExtremeYValues=function(t,e,n){},Tt.prototype.onLineEvaluated=function(t,e,n){},Tt.parseFloat=function(t){return null===t?NaN:t};var St=Et,wt=function(){};(wt.prototype=new St).extractSeries=function(t,e,n){for(var r=[],i=n.get("logscale"),a=0;a<t.length;a++){var o=t[a][e];i&&o<=0&&(o=null),r.push([t[a][0],o])}return r},wt.prototype.rollingAverage=function(t,e,n){var r,i,a,o,s,u=[];if(1==(e=Math.min(e,t.length)))return t;for(r=0;r<t.length;r++){for(o=0,s=0,i=Math.max(0,r-e+1);i<r+1;i++)null===(a=t[i][1])||isNaN(a)||(s++,o+=t[i][1]);u[r]=s?[t[r][0],o/s]:[t[r][0],null]}return u},wt.prototype.getExtremeYValues=function(t,e,n){for(var r,i=null,a=null,o=t.length-1,s=0;s<=o;s++)null===(r=t[s][1])||isNaN(r)||((null===a||r>a)&&(a=r),(null===i||r<i)&&(i=r));return[i,a]};var At=wt,xt=function(){St.call(this)};(xt.prototype=new St).extractSeries=function(t,e,n){},xt.prototype.rollingAverage=function(t,e,n){},xt.prototype.onPointsCreated_=function(t,e){for(var n=0;n<t.length;++n){var r=t[n],i=e[n];i.y_top=NaN,i.y_bottom=NaN,i.yval_minus=St.parseFloat(r[2][0]),i.yval_plus=St.parseFloat(r[2][1])}},xt.prototype.getExtremeYValues=function(t,e,n){for(var r,i=null,a=null,o=t.length-1,s=0;s<=o;s++)if(null!==(r=t[s][1])&&!isNaN(r)){var u=t[s][2][0],l=t[s][2][1];u>r&&(u=r),l<r&&(l=r),(null===a||l>a)&&(a=l),(null===i||u<i)&&(i=u)}return[i,a]},xt.prototype.onLineEvaluated=function(t,e,n){for(var r,i=0;i<t.length;i++)(r=t[i]).y_top=ct.calcYNormal_(e,r.yval_minus,n),r.y_bottom=ct.calcYNormal_(e,r.yval_plus,n)};var Ct=xt,Dt=function(){};(Dt.prototype=new Ct).extractSeries=function(t,e,n){for(var r,i,a,o,s=[],u=n.get("sigma"),l=n.get("logscale"),c=0;c<t.length;c++)r=t[c][0],o=t[c][e],l&&null!==o&&(o[0]<=0||o[0]-u*o[1]<=0)&&(o=null),null!==o?null===(i=o[0])||isNaN(i)?s.push([r,i,[i,i,i]]):s.push([r,i,[i-(a=u*o[1]),i+a,o[1]]]):s.push([r,null,[null,null,null]]);return s},Dt.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a,o,s,u,l,c,f,d=[],h=n.get("sigma");for(r=0;r<t.length;r++){for(s=0,c=0,u=0,i=Math.max(0,r-e+1);i<r+1;i++)null===(a=t[i][1])||isNaN(a)||(u++,s+=a,c+=Math.pow(t[i][2][2],2));u?(l=Math.sqrt(c)/u,d[r]=[t[r][0],f=s/u,[f-h*l,f+h*l]]):d[r]=[t[r][0],o=1==e?t[r][1]:null,[o,o]]}return d};var It=Dt,Rt=function(){};(Rt.prototype=new Ct).extractSeries=function(t,e,n){for(var r,i,a,o=[],s=n.get("logscale"),u=0;u<t.length;u++)r=t[u][0],a=t[u][e],s&&null!==a&&(a[0]<=0||a[1]<=0||a[2]<=0)&&(a=null),null!==a?null===(i=a[1])||isNaN(i)?o.push([r,i,[i,i]]):o.push([r,i,[a[0],a[2]]]):o.push([r,null,[null,null]]);return o},Rt.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a,o,s,u,l,c=[];for(i=0,o=0,a=0,s=0,u=0;u<t.length;u++){if(r=t[u][1],l=t[u][2],c[u]=t[u],null===r||isNaN(r)||(i+=l[0],o+=r,a+=l[1],s+=1),u-e>=0){var f=t[u-e];null===f[1]||isNaN(f[1])||(i-=f[2][0],o-=f[1],a-=f[2][1],s-=1)}c[u]=s?[t[u][0],1*o/s,[1*i/s,1*a/s]]:[t[u][0],null,[null,null]]}return c};var kt=Rt,Ot=function(){};(Ot.prototype=new At).extractSeries=function(t,e,n){for(var r,i,a,o,s=[],u=n.get("logscale"),l=0;l<t.length;l++)r=t[l][0],i=t[l][e],u&&null!==i&&(i[0]<=0||i[1]<=0)&&(i=null),null!==i?(o=i[1],null===(a=i[0])||isNaN(a)?s.push([r,a,[a,o]]):s.push([r,100*(o?a/o:0),[a,o]])):s.push([r,null,[null,null]]);return s},Ot.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i=[],a=0,o=0;for(r=0;r<t.length;r++)a+=t[r][2][0],o+=t[r][2][1],r-e>=0&&(a-=t[r-e][2][0],o-=t[r-e][2][1]),i[r]=[t[r][0],100*(o?a/o:0)];return i};var Pt=Ot,Mt=function(){};(Mt.prototype=new Ct).extractSeries=function(t,e,n){for(var r,i,a,o,s,u,l,c,f=[],d=n.get("sigma"),h=n.get("logscale"),p=0;p<t.length;p++)r=t[p][0],a=t[p][e],h&&null!==a&&(a[0]<=0||a[1]<=0)&&(a=null),null!==a?(s=a[1],null===(o=a[0])||isNaN(o)?f.push([r,o,[o,o,o,s]]):(u=s?o/s:0,l=s?d*Math.sqrt(u*(1-u)/s):1,f.push([r,i=100*u,[i-(c=100*l),i+c,o,s]]))):f.push([r,null,[null,null,null,null]]);return f},Mt.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a=[],o=n.get("sigma"),s=n.get("wilsonInterval"),u=0,l=0;for(r=0;r<t.length;r++){u+=t[r][2][2],l+=t[r][2][3],r-e>=0&&(u-=t[r-e][2][2],l-=t[r-e][2][3]);var c=t[r][0],f=l?u/l:0;if(s)if(l){var d=f<0?0:f,h=o*Math.sqrt(d*(1-d)/l+o*o/(4*l*l)),p=1+o*o/l;a[r]=[c,100*d,[(d+o*o/(2*l)-h)/p*100,(d+o*o/(2*l)+h)/p*100]]}else a[r]=[c,0,[0,0]];else i=l?o*Math.sqrt(f*(1-f)/l):1,a[r]=[c,100*f,[100*(f-i),100*(f+i)]]}return a};var Lt=Mt,Nt=function(){this.annotations_=[]};Nt.prototype.toString=function(){return"Annotations Plugin"},Nt.prototype.activate=function(t){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},Nt.prototype.detachLabels=function(){for(var t=0;t<this.annotations_.length;t++){var e=this.annotations_[t];e.parentNode&&e.parentNode.removeChild(e),this.annotations_[t]=null}this.annotations_=[]},Nt.prototype.clearChart=function(t){this.detachLabels()},Nt.prototype.didDrawChart=function(t){var e=t.dygraph,n=e.layout_.annotated_points;if(n&&0!==n.length)for(var r=t.canvas.parentNode,i=function(t,n,r){return function(i){var a=r.annotation;a.hasOwnProperty(t)?a[t](a,r,e,i):e.getOption(n)&&e.getOption(n)(a,r,e,i)}},a=t.dygraph.getArea(),o={},s=0;s<n.length;s++){var u=n[s];if(!(u.canvasx<a.x||u.canvasx>a.x+a.w||u.canvasy<a.y||u.canvasy>a.y+a.h)){var l=u.annotation,c=6;l.hasOwnProperty("tickHeight")&&(c=l.tickHeight);var f=document.createElement("div");f.style.fontSize=e.getOption("axisLabelFontSize")+"px";var d="dygraph-annotation";l.hasOwnProperty("icon")||(d+=" dygraphDefaultAnnotation dygraph-default-annotation"),l.hasOwnProperty("cssClass")&&(d+=" "+l.cssClass),f.className=d;var h=l.hasOwnProperty("width")?l.width:16,p=l.hasOwnProperty("height")?l.height:16;if(l.hasOwnProperty("icon")){var g=document.createElement("img");g.src=l.icon,g.width=h,g.height=p,f.appendChild(g)}else u.annotation.hasOwnProperty("shortText")&&f.appendChild(document.createTextNode(u.annotation.shortText));var v=u.canvasx-h/2;f.style.left=v+"px";var m=0;if(l.attachAtBottom){var y=a.y+a.h-p-c;o[v]?y-=o[v]:o[v]=0,o[v]+=c+p,m=y}else m=u.canvasy-p-c;f.style.top=m+"px",f.style.width=h+"px",f.style.height=p+"px",f.title=u.annotation.text,f.style.color=e.colorsMap_[u.name],f.style.borderColor=e.colorsMap_[u.name],l.div=f,e.addAndTrackEvent(f,"click",i("clickHandler","annotationClickHandler",u)),e.addAndTrackEvent(f,"mouseover",i("mouseOverHandler","annotationMouseOverHandler",u)),e.addAndTrackEvent(f,"mouseout",i("mouseOutHandler","annotationMouseOutHandler",u)),e.addAndTrackEvent(f,"dblclick",i("dblClickHandler","annotationDblClickHandler",u)),r.appendChild(f),this.annotations_.push(f);var _=t.drawingContext;_.save(),_.strokeStyle=l.hasOwnProperty("tickColor")?l.tickColor:e.colorsMap_[u.name],_.lineWidth=l.hasOwnProperty("tickWidth")?l.tickWidth:e.getOption("strokeWidth"),_.beginPath(),l.attachAtBottom?(_.moveTo(u.canvasx,y=m+p),_.lineTo(u.canvasx,y+c)):(_.moveTo(u.canvasx,u.canvasy),_.lineTo(u.canvasx,u.canvasy-2-c)),_.closePath(),_.stroke(),_.restore()}}},Nt.prototype.destroy=function(){this.detachLabels()};var Ft=Nt,jt=function(){this.xlabels_=[],this.ylabels_=[]};jt.prototype.toString=function(){return"Axes Plugin"},jt.prototype.activate=function(t){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},jt.prototype.layout=function(t){var e,n=t.dygraph;if(n.getOptionForAxis("drawAxis","y")){var r=n.getOptionForAxis("axisLabelWidth","y")+2*n.getOptionForAxis("axisTickSize","y");t.reserveSpaceLeft(r)}n.getOptionForAxis("drawAxis","x")&&(e=n.getOption("xAxisHeight")?n.getOption("xAxisHeight"):n.getOptionForAxis("axisLabelFontSize","x")+2*n.getOptionForAxis("axisTickSize","x"),t.reserveSpaceBottom(e)),2==n.numAxes()?n.getOptionForAxis("drawAxis","y2")&&(r=n.getOptionForAxis("axisLabelWidth","y2")+2*n.getOptionForAxis("axisTickSize","y2"),t.reserveSpaceRight(r)):n.numAxes()>2&&n.error("Only two y-axes are supported at this time. (Trying to use "+n.numAxes()+")")},jt.prototype.detachLabels=function(){function t(t){for(var e=0;e<t.length;e++){var n=t[e];n.parentNode&&n.parentNode.removeChild(n)}}t(this.xlabels_),t(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},jt.prototype.clearChart=function(t){this.detachLabels()},jt.prototype.willDrawChart=function(t){var e=this,n=t.dygraph;if(n.getOptionForAxis("drawAxis","x")||n.getOptionForAxis("drawAxis","y")||n.getOptionForAxis("drawAxis","y2")){var r,i,a,o=t.drawingContext,s=t.canvas.parentNode,u=n.width_,l=n.height_,c=function(t){return{position:"absolute",fontSize:n.getOptionForAxis("axisLabelFontSize",t)+"px",width:n.getOptionForAxis("axisLabelWidth",t)+"px"}},f={x:c("x"),y:c("y"),y2:c("y2")},d=function(t,e,n){var r=document.createElement("div");L(r.style,f["y2"==n?"y2":e]);var i=document.createElement("div");return i.className="dygraph-axis-label dygraph-axis-label-"+e+(n?" dygraph-axis-label-"+n:""),i.innerHTML=t,r.appendChild(i),r};o.save();var h=n.layout_,p=t.dygraph.plotter_.area,g=function(t){return function(e){return n.getOptionForAxis(e,t)}};if(n.getOptionForAxis("drawAxis","y")){if(h.yticks&&h.yticks.length>0){var v=n.numAxes(),m=[g("y"),g("y2")];h.yticks.forEach((function(t){if(void 0!==t.label){i=p.x;var n="y1",o=m[0];1==t.axis&&(i=p.x+p.w,n="y2",o=m[1]);var u=o("axisLabelFontSize");a=p.y+t.pos*p.h,r=d(t.label,"y",2==v?n:null);var c=a-u/2;c<0&&(c=0),c+u+3>l?r.style.bottom="0":r.style.top=c+"px",0===t.axis?(r.style.left=p.x-o("axisLabelWidth")-o("axisTickSize")+"px",r.style.textAlign="right"):1==t.axis&&(r.style.left=p.x+p.w+o("axisTickSize")+"px",r.style.textAlign="left"),r.style.width=o("axisLabelWidth")+"px",s.appendChild(r),e.ylabels_.push(r)}}));var y=this.ylabels_[0],_=n.getOptionForAxis("axisLabelFontSize","y");parseInt(y.style.top,10)+_>l-_&&(y.style.top=parseInt(y.style.top,10)-_/2+"px")}var b;n.getOption("drawAxesAtZero")?(((S=n.toPercentXCoord(0))>1||S<0||isNaN(S))&&(S=0),b=w(p.x+S*p.w)):b=w(p.x),o.strokeStyle=n.getOptionForAxis("axisLineColor","y"),o.lineWidth=n.getOptionForAxis("axisLineWidth","y"),o.beginPath(),o.moveTo(b,A(p.y)),o.lineTo(b,A(p.y+p.h)),o.closePath(),o.stroke(),2==n.numAxes()&&(o.strokeStyle=n.getOptionForAxis("axisLineColor","y2"),o.lineWidth=n.getOptionForAxis("axisLineWidth","y2"),o.beginPath(),o.moveTo(A(p.x+p.w),A(p.y)),o.lineTo(A(p.x+p.w),A(p.y+p.h)),o.closePath(),o.stroke())}if(n.getOptionForAxis("drawAxis","x")){if(h.xticks){var E=g("x");h.xticks.forEach((function(t){if(void 0!==t.label){i=p.x+t.pos*p.w,a=p.y+p.h,(r=d(t.label,"x")).style.textAlign="center",r.style.top=a+E("axisTickSize")+"px";var n=i-E("axisLabelWidth")/2;n+E("axisLabelWidth")>u&&(n=u-E("axisLabelWidth"),r.style.textAlign="right"),n<0&&(n=0,r.style.textAlign="left"),r.style.left=n+"px",r.style.width=E("axisLabelWidth")+"px",s.appendChild(r),e.xlabels_.push(r)}}))}var T,S;o.strokeStyle=n.getOptionForAxis("axisLineColor","x"),o.lineWidth=n.getOptionForAxis("axisLineWidth","x"),o.beginPath(),n.getOption("drawAxesAtZero")?(((S=n.toPercentYCoord(0,0))>1||S<0)&&(S=1),T=A(p.y+S*p.h)):T=A(p.y+p.h),o.moveTo(w(p.x),T),o.lineTo(w(p.x+p.w),T),o.closePath(),o.stroke()}o.restore()}function w(t){return Math.round(t)+.5}function A(t){return Math.round(t)-.5}};var Bt=jt,Ut=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};Ut.prototype.toString=function(){return"ChartLabels Plugin"},Ut.prototype.activate=function(t){return{layout:this.layout,didDrawChart:this.didDrawChart}};var Vt=function(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.width=t.w+"px",e.style.height=t.h+"px",e};Ut.prototype.detachLabels_=function(){for(var t=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],e=0;e<t.length;e++){var n=t[e];n&&n.parentNode&&n.parentNode.removeChild(n)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var Gt=function(t,e,n,r,i){var a=document.createElement("div");a.style.position="absolute",a.style.left=1==n?"0px":e.x+"px",a.style.top=e.y+"px",a.style.width=e.w+"px",a.style.height=e.h+"px",a.style.fontSize=t.getOption("yLabelWidth")-2+"px";var o=document.createElement("div");o.style.position="absolute",o.style.width=e.h+"px",o.style.height=e.w+"px",o.style.top=e.h/2-e.w/2+"px",o.style.left=e.w/2-e.h/2+"px",o.className="dygraph-label-rotate-"+(1==n?"right":"left");var s=document.createElement("div");return s.className=r,s.innerHTML=i,o.appendChild(s),a.appendChild(o),a};Ut.prototype.layout=function(t){this.detachLabels_();var e=t.dygraph,n=t.chart_div;if(e.getOption("title")){var r=t.reserveSpaceTop(e.getOption("titleHeight"));this.title_div_=Vt(r),this.title_div_.style.fontSize=e.getOption("titleHeight")-8+"px",(i=document.createElement("div")).className="dygraph-label dygraph-title",i.innerHTML=e.getOption("title"),this.title_div_.appendChild(i),n.appendChild(this.title_div_)}if(e.getOption("xlabel")){var i,a=t.reserveSpaceBottom(e.getOption("xLabelHeight"));this.xlabel_div_=Vt(a),this.xlabel_div_.style.fontSize=e.getOption("xLabelHeight")-2+"px",(i=document.createElement("div")).className="dygraph-label dygraph-xlabel",i.innerHTML=e.getOption("xlabel"),this.xlabel_div_.appendChild(i),n.appendChild(this.xlabel_div_)}if(e.getOption("ylabel")){var o=t.reserveSpaceLeft(0);this.ylabel_div_=Gt(e,o,1,"dygraph-label dygraph-ylabel",e.getOption("ylabel")),n.appendChild(this.ylabel_div_)}if(e.getOption("y2label")&&2==e.numAxes()){var s=t.reserveSpaceRight(0);this.y2label_div_=Gt(e,s,2,"dygraph-label dygraph-y2label",e.getOption("y2label")),n.appendChild(this.y2label_div_)}},Ut.prototype.didDrawChart=function(t){var e=t.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=e.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=e.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=e.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=e.getOption("y2label"))},Ut.prototype.clearChart=function(){},Ut.prototype.destroy=function(){this.detachLabels_()};var Ht=Ut,Yt=function(){};Yt.prototype.toString=function(){return"Gridline Plugin"},Yt.prototype.activate=function(t){return{willDrawChart:this.willDrawChart}},Yt.prototype.willDrawChart=function(t){var e,n,r,i=t.dygraph,a=t.drawingContext,o=i.layout_,s=t.dygraph.plotter_.area;function u(t){return Math.round(t)+.5}function l(t){return Math.round(t)-.5}if(i.getOptionForAxis("drawGrid","y")){for(var c=["y","y2"],f=[],d=[],h=[],p=[],g=[],v=0;v<c.length;v++)h[v]=i.getOptionForAxis("drawGrid",c[v]),h[v]&&(f[v]=i.getOptionForAxis("gridLineColor",c[v]),d[v]=i.getOptionForAxis("gridLineWidth",c[v]),g[v]=i.getOptionForAxis("gridLinePattern",c[v]),p[v]=g[v]&&g[v].length>=2);r=o.yticks,a.save(),r.forEach((function(t){if(t.has_tick){var r=t.axis;h[r]&&(a.save(),p[r]&&a.setLineDash&&a.setLineDash(g[r]),a.strokeStyle=f[r],a.lineWidth=d[r],e=u(s.x),n=l(s.y+t.pos*s.h),a.beginPath(),a.moveTo(e,n),a.lineTo(e+s.w,n),a.stroke(),a.restore())}})),a.restore()}i.getOptionForAxis("drawGrid","x")&&(r=o.xticks,a.save(),g=i.getOptionForAxis("gridLinePattern","x"),(p=g&&g.length>=2)&&a.setLineDash&&a.setLineDash(g),a.strokeStyle=i.getOptionForAxis("gridLineColor","x"),a.lineWidth=i.getOptionForAxis("gridLineWidth","x"),r.forEach((function(t){t.has_tick&&(e=u(s.x+t.pos*s.w),n=l(s.y+s.h),a.beginPath(),a.moveTo(e,n),a.lineTo(e,s.y),a.closePath(),a.stroke())})),p&&a.setLineDash&&a.setLineDash([]),a.restore())},Yt.prototype.destroy=function(){};var zt=Yt,qt=function(){this.legend_div_=null,this.is_generated_div_=!1};function Xt(t,e,n){if(!t||t.length<=1)return'<div class="dygraph-legend-line" style="border-bottom-color: '.concat(e,';"></div>');var r,i,a,o=0,s=0,u=[];for(r=0;r<=t.length;r++)o+=t[r%t.length];if((a=Math.floor(n/(o-t[0])))>1){for(r=0;r<t.length;r++)u[r]=t[r]/n;s=u.length}else{for(a=1,r=0;r<t.length;r++)u[r]=t[r]/o;s=u.length+1}var l="";for(i=0;i<a;i++)for(r=0;r<s;r+=2)l+='<div class="dygraph-legend-dash" style="margin-right: '.concat(r<t.length?u[(r+1)%u.length]:0,"em; padding-left: ").concat(u[r%u.length],'em;"></div>');return l}qt.prototype.toString=function(){return"Legend Plugin"},qt.prototype.activate=function(t){var e,n=t.getOption("labelsDiv");return n&&null!==n?e="string"==typeof n||n instanceof String?document.getElementById(n):n:((e=document.createElement("div")).className="dygraph-legend",t.graphDiv.appendChild(e),this.is_generated_div_=!0),this.legend_div_=e,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}},qt.prototype.select=function(t){var e=t.selectedX,n=t.selectedPoints,r=t.selectedRow,i=t.dygraph.getOption("legend");if("never"!==i){if("follow"===i){var a=t.dygraph.plotter_.area,o=this.legend_div_.offsetWidth,s=t.dygraph.getOptionForAxis("axisLabelWidth","y"),u=n[0].x*a.w+50,l=n[0].y*a.h-50;u+o+1>a.w&&(u=u-100-o-(s-a.x)),t.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=s+u+"px",this.legend_div_.style.top=l+"px"}var c=qt.generateLegendHTML(t.dygraph,e,n,this.one_em_width_,r);this.legend_div_.innerHTML=c,this.legend_div_.style.display=""}else this.legend_div_.style.display="none"},qt.prototype.deselect=function(t){"always"!==t.dygraph.getOption("legend")&&(this.legend_div_.style.display="none");var e=function(t){var e=document.createElement("span");e.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),t.appendChild(e);var n=e.offsetWidth;return t.removeChild(e),n}(this.legend_div_);this.one_em_width_=e;var n=qt.generateLegendHTML(t.dygraph,void 0,void 0,e,null);this.legend_div_.innerHTML=n},qt.prototype.didDrawChart=function(t){this.deselect(t)},qt.prototype.predraw=function(t){if(this.is_generated_div_){t.dygraph.graphDiv.appendChild(this.legend_div_);var e=t.dygraph.getArea();this.legend_div_.style.left=e.x+e.w-this.legend_div_.offsetWidth-1+"px",this.legend_div_.style.top=e.y+"px"}},qt.prototype.destroy=function(){this.legend_div_=null},qt.generateLegendHTML=function(t,e,n,r,i){var a,o={dygraph:t,x:e,series:[]},s={},u=t.getLabels();if(u)for(var l=1;l<u.length;l++){var c=t.getPropertiesForSeries(u[l]),f={dashHTML:Xt(t.getOption("strokePattern",u[l]),c.color,r),label:u[l],labelHTML:(a=u[l],a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),isVisible:c.visible,color:c.color};o.series.push(f),s[u[l]]=f}if(void 0!==e){var d=t.optionsViewForAxis_("x"),h=d("valueFormatter");o.xHTML=h.call(t,e,d,u[0],t,i,0);var p=[],g=t.numAxes();for(l=0;l<g;l++)p[l]=t.optionsViewForAxis_("y"+(l?1+l:""));var v=t.getOption("labelsShowZeroValues"),m=t.getHighlightSeries();for(l=0;l<n.length;l++){var y=n[l];if((f=s[y.name]).y=y.yval,0===y.yval&&!v||isNaN(y.canvasy))f.isVisible=!1;else{var _=p[(c=t.getPropertiesForSeries(y.name)).axis-1];L(f,{yHTML:_("valueFormatter").call(t,y.yval,_,y.name,t,i,u.indexOf(y.name))}),y.name==m&&(f.isHighlighted=!0)}}}return(t.getOption("legendFormatter")||qt.defaultFormatter).call(t,o)},qt.defaultFormatter=function(t){var e=t.dygraph;if(!0!==e.getOption("showLabelsOnHighlight"))return"";var n,r=e.getOption("labelsSeparateLines");if(void 0===t.x){if("always"!=e.getOption("legend"))return"";n="";for(var i=0;i<t.series.length;i++)(a=t.series[i]).isVisible&&(""!==n&&(n+=r?"<br/>":" "),n+="<span style='font-weight: bold; color: ".concat(a.color,";'>").concat(a.dashHTML," ").concat(a.labelHTML,"</span>"));return n}for(n=t.xHTML+":",i=0;i<t.series.length;i++){var a;(a=t.series[i]).isVisible&&(r&&(n+="<br>"),n+="<span".concat(a.isHighlighted?' class="highlight"':"","> <b><span style='color: ").concat(a.color,";'>").concat(a.labelHTML,"</span></b>:&#160;").concat(a.yHTML,"</span>"))}return n};var Kt=qt,Wt=function(){this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};Wt.prototype.toString=function(){return"RangeSelector Plugin"},Wt.prototype.activate=function(t){return this.dygraph_=t,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},Wt.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null},Wt.prototype.getOption_=function(t,e){return this.dygraph_.getOption(t,e)},Wt.prototype.setDefaultOption_=function(t,e){this.dygraph_.attrs_[t]=e},Wt.prototype.createInterface_=function(){this.createCanvases_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},Wt.prototype.addToGraph_=function(){var t=this.graphDiv_=this.dygraph_.graphDiv;t.appendChild(this.bgcanvas_),t.appendChild(this.fgcanvas_),t.appendChild(this.leftZoomHandle_),t.appendChild(this.rightZoomHandle_)},Wt.prototype.removeFromGraph_=function(){var t=this.graphDiv_;t.removeChild(this.bgcanvas_),t.removeChild(this.fgcanvas_),t.removeChild(this.leftZoomHandle_),t.removeChild(this.rightZoomHandle_),this.graphDiv_=null},Wt.prototype.reserveSpace_=function(t){this.getOption_("showRangeSelector")&&t.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},Wt.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},Wt.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},Wt.prototype.updateVisibility_=function(){var t=this.getOption_("showRangeSelector");if(t)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var e=this.dygraph_;setTimeout((function(){e.width_=0,e.resize()}),1)}return t},Wt.prototype.resize_=function(){function t(t,e,n,r){var i=r||U(e);t.style.top=n.y+"px",t.style.left=n.x+"px",t.width=n.w*i,t.height=n.h*i,t.style.width=n.w+"px",t.style.height=n.h+"px",1!=i&&e.scale(i,i)}var e=this.dygraph_.layout_.getPlotArea(),n=0;this.dygraph_.getOptionForAxis("drawAxis","x")&&(n=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:e.x,y:e.y+e.h+n+4,w:e.w,h:this.getOption_("rangeSelectorHeight")};var r=this.dygraph_.getNumericOption("pixelRatio");t(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,r),t(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,r)},Wt.prototype.createCanvases_=function(){this.bgcanvas_=B(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=p(this.bgcanvas_),this.fgcanvas_=B(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=p(this.fgcanvas_)},Wt.prototype.createZoomHandles_=function(){var t=new Image;t.className="dygraph-rangesel-zoomhandle",t.style.position="absolute",t.style.zIndex=10,t.style.visibility="hidden",t.style.cursor="col-resize",t.width=9,t.height=16,t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=",this.isMobileDevice_&&(t.width*=2,t.height*=2),this.leftZoomHandle_=t,this.rightZoomHandle_=t.cloneNode(!1)},Wt.prototype.initInteraction_=function(){var t,e,n,r,i,a,o,s,u,l,c,f,d,h,p=this,y=document,_=0,b=null,E=!1,T=!1,S=!this.isMobileDevice_,w=new bt;t=function(t){var e=p.dygraph_.xAxisExtremes(),n=(e[1]-e[0])/p.canvasRect_.w;return[e[0]+(t.leftHandlePos-p.canvasRect_.x)*n,e[0]+(t.rightHandlePos-p.canvasRect_.x)*n]},e=function(t){return m(t),E=!0,_=t.clientX,b=t.target?t.target:t.srcElement,"mousedown"!==t.type&&"dragstart"!==t.type||(g(y,"mousemove",n),g(y,"mouseup",r)),p.fgcanvas_.style.cursor="col-resize",w.cover(),!0},n=function(t){if(!E)return!1;m(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var n,r=p.getZoomHandleStatus_();return b==p.leftZoomHandle_?(n=r.leftHandlePos+e,n=Math.min(n,r.rightHandlePos-b.width-3),n=Math.max(n,p.canvasRect_.x)):(n=r.rightHandlePos+e,n=Math.min(n,p.canvasRect_.x+p.canvasRect_.w),n=Math.max(n,r.leftHandlePos+b.width+3)),b.style.left=n-b.width/2+"px",p.drawInteractiveLayer_(),S&&i(),!0},r=function(t){return!!E&&(E=!1,w.uncover(),v(y,"mousemove",n),v(y,"mouseup",r),p.fgcanvas_.style.cursor="default",S||i(),!0)},i=function(){try{var e=p.getZoomHandleStatus_();if(p.isChangingRange_=!0,e.isZoomed){var n=t(e);p.dygraph_.doZoomXDates_(n[0],n[1])}else p.dygraph_.resetZoom()}finally{p.isChangingRange_=!1}},a=function(t){var e=p.leftZoomHandle_.getBoundingClientRect(),n=e.left+e.width/2;return e=p.rightZoomHandle_.getBoundingClientRect(),t.clientX>n&&t.clientX<e.left+e.width/2},o=function(t){return!(T||!a(t)||!p.getZoomHandleStatus_().isZoomed||(m(t),T=!0,_=t.clientX,"mousedown"===t.type&&(g(y,"mousemove",s),g(y,"mouseup",u)),0))},s=function(t){if(!T)return!1;m(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var n=p.getZoomHandleStatus_(),r=n.leftHandlePos,i=n.rightHandlePos,a=i-r;r+e<=p.canvasRect_.x?i=(r=p.canvasRect_.x)+a:i+e>=p.canvasRect_.x+p.canvasRect_.w?r=(i=p.canvasRect_.x+p.canvasRect_.w)-a:(r+=e,i+=e);var o=p.leftZoomHandle_.width/2;return p.leftZoomHandle_.style.left=r-o+"px",p.rightZoomHandle_.style.left=i-o+"px",p.drawInteractiveLayer_(),S&&l(),!0},u=function(t){return!!T&&(T=!1,v(y,"mousemove",s),v(y,"mouseup",u),S||l(),!0)},l=function(){try{p.isChangingRange_=!0,p.dygraph_.dateWindow_=t(p.getZoomHandleStatus_()),p.dygraph_.drawGraph_(!1)}finally{p.isChangingRange_=!1}},c=function(t){if(!E&&!T){var e=a(t)?"move":"default";e!=p.fgcanvas_.style.cursor&&(p.fgcanvas_.style.cursor=e)}},f=function(t){"touchstart"==t.type&&1==t.targetTouches.length?e(t.targetTouches[0])&&m(t):"touchmove"==t.type&&1==t.targetTouches.length?n(t.targetTouches[0])&&m(t):r(t)},d=function(t){"touchstart"==t.type&&1==t.targetTouches.length?o(t.targetTouches[0])&&m(t):"touchmove"==t.type&&1==t.targetTouches.length?s(t.targetTouches[0])&&m(t):u(t)},h=function(t,e){for(var n=["touchstart","touchend","touchmove","touchcancel"],r=0;r<n.length;r++)p.dygraph_.addAndTrackEvent(t,n[r],e)},this.setDefaultOption_("interactionModel",gt.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var A=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,A,e),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,A,e),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",o),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",c),this.hasTouchInterface_&&(h(this.leftZoomHandle_,f),h(this.rightZoomHandle_,f),h(this.fgcanvas_,d))},Wt.prototype.drawStaticLayer_=function(){var t=this.bgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(e){console.warn(e)}this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth"),t.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor"),t.beginPath(),t.moveTo(.5,.5),t.lineTo(.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,.5),t.stroke()},Wt.prototype.drawMiniPlot_=function(){var t=this.getOption_("rangeSelectorPlotFillColor"),e=this.getOption_("rangeSelectorPlotFillGradientColor"),n=this.getOption_("rangeSelectorPlotStrokeColor");if(t||n){var r=this.getOption_("stepPlot"),i=this.computeCombinedSeriesAndLimits_(),a=i.yMax-i.yMin,o=this.bgcanvas_ctx_,s=this.dygraph_.xAxisExtremes(),u=Math.max(s[1]-s[0],1e-30),l=(this.canvasRect_.w-.5)/u,c=(this.canvasRect_.h-.5)/a,f=this.canvasRect_.w-.5,d=this.canvasRect_.h-.5,h=null,p=null;o.beginPath(),o.moveTo(.5,d);for(var g=0;g<i.data.length;g++){var v=i.data[g],m=null!==v[0]?(v[0]-s[0])*l:NaN,y=null!==v[1]?d-(v[1]-i.yMin)*c:NaN;(r||null===h||Math.round(m)!=Math.round(h))&&(isFinite(m)&&isFinite(y)?(null===h?o.lineTo(m,d):r&&o.lineTo(m,p),o.lineTo(m,y),h=m,p=y):(null!==h&&(r?(o.lineTo(m,p),o.lineTo(m,d)):o.lineTo(h,d)),h=p=null))}if(o.lineTo(f,d),o.closePath(),t){var _=this.bgcanvas_ctx_.createLinearGradient(0,0,0,d);e&&_.addColorStop(0,e),_.addColorStop(1,t),this.bgcanvas_ctx_.fillStyle=_,o.fill()}n&&(this.bgcanvas_ctx_.strokeStyle=n,this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth"),o.stroke())}},Wt.prototype.computeCombinedSeriesAndLimits_=function(){var t,e=this.dygraph_,n=this.getOption_("logscale"),r=e.numColumns(),i=e.getLabels(),a=new Array(r),o=!1,s=e.visibility(),u=[];for(t=1;t<r;t++){var l=this.getOption_("showInRangeSelector",i[t]);u.push(l),null!==l&&(o=!0)}if(o)for(t=1;t<r;t++)a[t]=u[t-1];else for(t=1;t<r;t++)a[t]=s[t-1];var c=[],f=e.dataHandler_,h=e.attributes_;for(t=1;t<e.numColumns();t++)if(a[t]){var p=f.extractSeries(e.rawData_,t,h);e.rollPeriod()>1&&(p=f.rollingAverage(p,e.rollPeriod(),h)),c.push(p)}var g=[];for(t=0;t<c[0].length;t++){for(var v=0,m=0,y=0;y<c.length;y++){var _=c[y][t][1];null===_||isNaN(_)||(m++,v+=_)}g.push([c[0][t][0],v/m])}var b=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(t=0;t<g.length;t++){var T=g[t][1];null!==T&&isFinite(T)&&(!n||T>0)&&(b=Math.min(b,T),E=Math.max(E,T))}if(n)for(E=d(E),E+=.25*E,b=d(b),t=0;t<g.length;t++)g[t][1]=d(g[t][1]);else{var S,w=E-b;E+=S=w<=Number.MIN_VALUE?.25*E:.25*w,b-=S}return{data:g,yMin:b,yMax:E}},Wt.prototype.placeZoomHandles_=function(){var t=this.dygraph_.xAxisExtremes(),e=this.dygraph_.xAxisRange(),n=t[1]-t[0],r=Math.max(0,(e[0]-t[0])/n),i=Math.max(0,(t[1]-e[1])/n),a=this.canvasRect_.x+this.canvasRect_.w*r,o=this.canvasRect_.x+this.canvasRect_.w*(1-i),s=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),u=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=a-u+"px",this.leftZoomHandle_.style.top=s+"px",this.rightZoomHandle_.style.left=o-u+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},Wt.prototype.drawInteractiveLayer_=function(){var t=this.fgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var e=this.canvasRect_.w-1,n=this.canvasRect_.h-1,r=this.getZoomHandleStatus_();if(t.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor"),t.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth"),r.isZoomed){var i=Math.max(1,r.leftHandlePos-this.canvasRect_.x),a=Math.min(e,r.rightHandlePos-this.canvasRect_.x);t.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")",t.fillRect(0,0,i,this.canvasRect_.h),t.fillRect(a,0,this.canvasRect_.w-a,this.canvasRect_.h),t.beginPath(),t.moveTo(1,1),t.lineTo(i,1),t.lineTo(i,n),t.lineTo(a,n),t.lineTo(a,1),t.lineTo(e,1),t.stroke()}else t.beginPath(),t.moveTo(1,1),t.lineTo(1,n),t.lineTo(e,n),t.lineTo(e,1),t.stroke()},Wt.prototype.getZoomHandleStatus_=function(){var t=this.leftZoomHandle_.width/2,e=parseFloat(this.leftZoomHandle_.style.left)+t,n=parseFloat(this.rightZoomHandle_.style.left)+t;return{leftHandlePos:e,rightHandlePos:n,isZoomed:e-1>this.canvasRect_.x||n+1<this.canvasRect_.x+this.canvasRect_.w}};var Qt=Wt,$t=function(t){this.container=t};$t.prototype.draw=function(t,e){this.container.innerHTML="",void 0!==this.date_graph&&this.date_graph.destroy(),this.date_graph=new te(this.container,t,e)},$t.prototype.setSelection=function(t){var e=!1;t.length&&(e=t[0].row),this.date_graph.setSelection(e)},$t.prototype.getSelection=function(){var t=[],e=this.date_graph.getSelection();if(e<0)return t;for(var n=this.date_graph.layout_.points,r=0;r<n.length;++r)t.push({row:e,column:r+1});return t};var Zt=$t,Jt=function(t,e,n){this.__init__(t,e,n)};Jt.NAME="Dygraph",Jt.VERSION="2.0.0",Jt.DEFAULT_ROLL_PERIOD=1,Jt.DEFAULT_WIDTH=480,Jt.DEFAULT_HEIGHT=320,Jt.ANIMATION_STEPS=12,Jt.ANIMATION_DURATION=200,Jt.Plotters=dt._Plotters,Jt.addedAnnotationCSS=!1,Jt.prototype.__init__=function(t,e,n){if(this.is_initial_draw_=!0,this.readyFns_=[],null==n&&(n={}),n=Jt.copyUserAttrs_(n),"string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("Constructing dygraph with a non-existent div!");this.maindiv_=t,this.file_=e,this.rollPeriod_=n.rollPeriod||Jt.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=n.fractions||!1,this.dateWindow_=n.dateWindow||null,this.annotations_=[],t.innerHTML="",""===t.style.width&&n.width&&(t.style.width=n.width+"px"),""===t.style.height&&n.height&&(t.style.height=n.height+"px"),""===t.style.height&&0===t.clientHeight&&(t.style.height=Jt.DEFAULT_HEIGHT+"px",""===t.style.width&&(t.style.width=Jt.DEFAULT_WIDTH+"px")),this.width_=t.clientWidth||n.width||0,this.height_=t.clientHeight||n.height||0,n.stackedGraph&&(n.fillGraph=!0),this.user_attrs_={},L(this.user_attrs_,n),this.attrs_={},N(this.attrs_,vt),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new yt(this),this.createInterface_(),this.plugins_=[];for(var r=Jt.PLUGINS.concat(this.getOption("plugins")),i=0;i<r.length;i++){var a,o=r[i],s={plugin:a=void 0!==o.activate?o:new o,events:{},options:{},pluginOptions:{}},u=a.activate(this);for(var l in u)u.hasOwnProperty(l)&&(s.events[l]=u[l]);this.plugins_.push(s)}for(i=0;i<this.plugins_.length;i++){var c=this.plugins_[i];for(var l in c.events)if(c.events.hasOwnProperty(l)){var f=[c.plugin,c.events[l]];l in this.eventListeners_?this.eventListeners_[l].push(f):this.eventListeners_[l]=[f]}}this.createDragInterface_(),this.start_()},Jt.prototype.cascadeEvents_=function(t,e){if(!(t in this.eventListeners_))return!1;var n={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!n.cancelable)throw"Cannot call preventDefault on non-cancelable event.";n.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){n.propagationStopped=!0}};L(n,e);var r=this.eventListeners_[t];if(r)for(var i=r.length-1;i>=0&&(r[i][1].call(r[i][0],n),!n.propagationStopped);i--);return n.defaultPrevented},Jt.prototype.getPluginInstance_=function(t){for(var e=0;e<this.plugins_.length;e++){var n=this.plugins_[e];if(n.plugin instanceof t)return n.plugin}return null},Jt.prototype.isZoomed=function(t){var e=!!this.dateWindow_;if("x"===t)return e;var n=this.axes_.map((function(t){return!!t.valueRange})).indexOf(!0)>=0;if(null==t)return e||n;if("y"===t)return n;throw new Error("axis parameter is [".concat(t,"] must be null, 'x' or 'y'."))},Jt.prototype.toString=function(){var t=this.maindiv_;return"[Dygraph "+(t&&t.id?t.id:t)+"]"},Jt.prototype.attr_=function(t,e){return e?this.attributes_.getForSeries(t,e):this.attributes_.get(t)},Jt.prototype.getOption=function(t,e){return this.attr_(t,e)},Jt.prototype.getNumericOption=function(t,e){return this.getOption(t,e)},Jt.prototype.getStringOption=function(t,e){return this.getOption(t,e)},Jt.prototype.getBooleanOption=function(t,e){return this.getOption(t,e)},Jt.prototype.getFunctionOption=function(t,e){return this.getOption(t,e)},Jt.prototype.getOptionForAxis=function(t,e){return this.attributes_.getForAxis(t,e)},Jt.prototype.optionsViewForAxis_=function(t){var e=this;return function(n){var r=e.user_attrs_.axes;return r&&r[t]&&r[t].hasOwnProperty(n)?r[t][n]:("x"!==t||"logscale"!==n)&&(void 0!==e.user_attrs_[n]?e.user_attrs_[n]:(r=e.attrs_.axes)&&r[t]&&r[t].hasOwnProperty(n)?r[t][n]:"y"==t&&e.axes_[0].hasOwnProperty(n)?e.axes_[0][n]:"y2"==t&&e.axes_[1].hasOwnProperty(n)?e.axes_[1][n]:e.attr_(n))}},Jt.prototype.rollPeriod=function(){return this.rollPeriod_},Jt.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Jt.prototype.xAxisExtremes=function(){var t=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-t,1+t];var e=this.rawData_[0][0],n=this.rawData_[this.rawData_.length-1][0];if(t){var r=n-e;e-=r*t,n+=r*t}return[e,n]},Jt.prototype.yAxisExtremes=function(){var t=this.gatherDatasets_(this.rolledSeries_,null).extremes,e=this.axes_;this.computeYAxisRanges_(t);var n=this.axes_;return this.axes_=e,n.map((function(t){return t.extremeRange}))},Jt.prototype.yAxisRange=function(t){if(void 0===t&&(t=0),t<0||t>=this.axes_.length)return null;var e=this.axes_[t];return[e.computedValueRange[0],e.computedValueRange[1]]},Jt.prototype.yAxisRanges=function(){for(var t=[],e=0;e<this.axes_.length;e++)t.push(this.yAxisRange(e));return t},Jt.prototype.toDomCoords=function(t,e,n){return[this.toDomXCoord(t),this.toDomYCoord(e,n)]},Jt.prototype.toDomXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,n=this.xAxisRange();return e.x+(t-n[0])/(n[1]-n[0])*e.w},Jt.prototype.toDomYCoord=function(t,e){var n=this.toPercentYCoord(t,e);if(null===n)return null;var r=this.plotter_.area;return r.y+n*r.h},Jt.prototype.toDataCoords=function(t,e,n){return[this.toDataXCoord(t),this.toDataYCoord(e,n)]},Jt.prototype.toDataXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,n=this.xAxisRange();return this.attributes_.getForAxis("logscale","x")?h(n[0],n[1],(t-e.x)/e.w):n[0]+(t-e.x)/e.w*(n[1]-n[0])},Jt.prototype.toDataYCoord=function(t,e){if(null===t)return null;var n=this.plotter_.area,r=this.yAxisRange(e);return void 0===e&&(e=0),this.attributes_.getForAxis("logscale",e)?h(r[1],r[0],(t-n.y)/n.h):r[0]+(n.y+n.h-t)/n.h*(r[1]-r[0])},Jt.prototype.toPercentYCoord=function(t,e){if(null===t)return null;void 0===e&&(e=0);var n,r=this.yAxisRange(e);if(this.attributes_.getForAxis("logscale",e)){var i=d(r[0]),a=d(r[1]);n=(a-d(t))/(a-i)}else n=(r[1]-t)/(r[1]-r[0]);return n},Jt.prototype.toPercentXCoord=function(t){if(null===t)return null;var e,n=this.xAxisRange();if(!0===this.attributes_.getForAxis("logscale","x")){var r=d(n[0]),i=d(n[1]);e=(d(t)-r)/(i-r)}else e=(t-n[0])/(n[1]-n[0]);return e},Jt.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},Jt.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},Jt.prototype.getValue=function(t,e){return t<0||t>this.rawData_.length||e<0||e>this.rawData_[t].length?null:this.rawData_[t][e]},Jt.prototype.createInterface_=function(){var t=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",this.graphDiv.style.position="relative",t.appendChild(this.graphDiv),this.canvas_=B(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=p(this.canvas_),this.hidden_ctx_=p(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new ct(this);var e=this;this.mouseMoveHandler_=function(t){e.mouseMove_(t)},this.mouseOutHandler_=function(t){var n=t.relatedTarget||t.toElement;K(t.target||t.fromElement,e.graphDiv)&&!K(n,e.graphDiv)&&e.mouseOut_(t)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(t){e.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},Jt.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px";var t=this.getNumericOption("pixelRatio"),e=t||U(this.canvas_ctx_);this.canvas_.width=this.width_*e,this.canvas_.height=this.height_*e,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",1!==e&&this.canvas_ctx_.scale(e,e);var n=t||U(this.hidden_ctx_);this.hidden_.width=this.width_*n,this.hidden_.height=this.height_*n,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px",1!==n&&this.hidden_ctx_.scale(n,n)},Jt.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var t=this.plugins_.length-1;t>=0;t--){var e=this.plugins_.pop();e.plugin.destroy&&e.plugin.destroy()}this.removeTrackedEvents_(),v(window,"mouseout",this.mouseOutHandler_),v(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),v(window,"resize",this.resizeHandler_),this.resizeHandler_=null,function t(e){for(;e.hasChildNodes();)t(e.firstChild),e.removeChild(e.firstChild)}(this.maindiv_);var n=function(t){for(var e in t)"object"==typeof t[e]&&(t[e]=null)};n(this.layout_),n(this.plotter_),n(this)},Jt.prototype.createPlotKitCanvas_=function(t){var e=B();return e.style.position="absolute",e.style.top=t.style.top,e.style.left=t.style.left,e.width=this.width_,e.height=this.height_,e.style.width=this.width_+"px",e.style.height=this.height_+"px",e},Jt.prototype.createMouseEventElement_=function(){return this.canvas_},Jt.prototype.setColors_=function(){var t=this.getLabels(),e=t.length-1;this.colors_=[],this.colorsMap_={};for(var n=this.getNumericOption("colorSaturation")||1,r=this.getNumericOption("colorValue")||.5,i=Math.ceil(e/2),a=this.getOption("colors"),o=this.visibility(),s=0;s<e;s++)if(o[s]){var u=t[s+1],l=this.attributes_.getForSeries("color",u);l||(l=a?a[s%a.length]:y(1*(s%2?i+(s+1)/2:Math.ceil((s+1)/2))/(1+e),n,r)),this.colors_.push(l),this.colorsMap_[u]=l}},Jt.prototype.getColors=function(){return this.colors_},Jt.prototype.getPropertiesForSeries=function(t){for(var e=-1,n=this.getLabels(),r=1;r<n.length;r++)if(n[r]==t){e=r;break}return-1==e?null:{name:t,column:e,visible:this.visibility()[e-1],color:this.colorsMap_[t],axis:1+this.attributes_.axisForSeries(t)}},Jt.prototype.createRollInterface_=function(){var t=this,e=this.roller_;e||(this.roller_=e=document.createElement("input"),e.type="text",e.style.display="none",e.className="dygraph-roller",this.graphDiv.appendChild(e));var n=this.getBooleanOption("showRoller")?"block":"none",r=this.getArea(),i={top:r.y+r.h-25+"px",left:r.x+1+"px",display:n};e.size="2",e.value=this.rollPeriod_,L(e.style,i),e.onchange=function(){return t.adjustRoll(e.value)}},Jt.prototype.createDragInterface_=function(){var t={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new bt,initializeMouseDown:function(t,e,n){t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0);var r=_(e.canvas_);n.px=r.x,n.py=r.y,n.dragStartX=T(t,n),n.dragStartY=S(t,n),n.cancelNextDblclick=!1,n.tarp.cover()},destroy:function(){if((this.isZooming||this.isPanning)&&(this.isZooming=!1,this.dragStartX=null,this.dragStartY=null),this.isPanning){this.isPanning=!1,this.draggingDate=null,this.dateRange=null;for(var t=0;t<n.axes_.length;t++)delete n.axes_[t].draggingValue,delete n.axes_[t].dragValueRange}this.tarp.uncover()}},e=this.getOption("interactionModel"),n=this,r=function(e){return function(r){e(r,n,t)}};for(var i in e)e.hasOwnProperty(i)&&this.addAndTrackEvent(this.mouseEventElement_,i,r(e[i]));e.willDestroyContextMyself||this.addAndTrackEvent(document,"mouseup",(function(e){t.destroy()}))},Jt.prototype.drawZoomRect_=function(t,e,n,r,i,a,o,s){var u=this.canvas_ctx_;1==a?u.clearRect(Math.min(e,o),this.layout_.getPlotArea().y,Math.abs(e-o),this.layout_.getPlotArea().h):2==a&&u.clearRect(this.layout_.getPlotArea().x,Math.min(r,s),this.layout_.getPlotArea().w,Math.abs(r-s)),1==t?n&&e&&(u.fillStyle="rgba(128,128,128,0.33)",u.fillRect(Math.min(e,n),this.layout_.getPlotArea().y,Math.abs(n-e),this.layout_.getPlotArea().h)):2==t&&i&&r&&(u.fillStyle="rgba(128,128,128,0.33)",u.fillRect(this.layout_.getPlotArea().x,Math.min(r,i),this.layout_.getPlotArea().w,Math.abs(i-r)))},Jt.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},Jt.prototype.doZoomX_=function(t,e){this.currentZoomRectArgs_=null;var n=this.toDataXCoord(t),r=this.toDataXCoord(e);this.doZoomXDates_(n,r)},Jt.prototype.doZoomXDates_=function(t,e){var n=this,r=this.xAxisRange(),i=[t,e],a=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(r,i,null,null,(function(){a&&a.call(n,t,e,n.yAxisRanges())}))},Jt.prototype.doZoomY_=function(t,e){var n=this;this.currentZoomRectArgs_=null;for(var r=this.yAxisRanges(),i=[],a=0;a<this.axes_.length;a++){var o=this.toDataYCoord(t,a),s=this.toDataYCoord(e,a);i.push([s,o])}var u=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,r,i,(function(){if(u){var t=tt(n.xAxisRange(),2),e=t[0],r=t[1];u.call(n,e,r,n.yAxisRanges())}}))},Jt.zoomAnimationFunction=function(t,e){return(1-Math.pow(1.5,-t))/(1-Math.pow(1.5,-e))},Jt.prototype.resetZoom=function(){var t=this,e=this.isZoomed("x"),n=this.isZoomed("y"),r=e||n;if(this.clearSelection(),r){var i=tt(this.xAxisExtremes(),2),a=i[0],o=i[1],s=this.getBooleanOption("animatedZooms"),u=this.getFunctionOption("zoomCallback");if(!s)return this.dateWindow_=null,this.axes_.forEach((function(t){t.valueRange&&delete t.valueRange})),this.drawGraph_(),void(u&&u.call(this,a,o,this.yAxisRanges()));var l=null,c=null,f=null,d=null;e&&(l=this.xAxisRange(),c=[a,o]),n&&(f=this.yAxisRanges(),d=this.yAxisExtremes()),this.doAnimatedZoom(l,c,f,d,(function(){t.dateWindow_=null,t.axes_.forEach((function(t){t.valueRange&&delete t.valueRange})),u&&u.call(t,a,o,t.yAxisRanges())}))}},Jt.prototype.doAnimatedZoom=function(t,e,n,r,i){var a,o,s=this,u=this.getBooleanOption("animatedZooms")?Jt.ANIMATION_STEPS:1,l=[],c=[];if(null!==t&&null!==e)for(a=1;a<=u;a++)o=Jt.zoomAnimationFunction(a,u),l[a-1]=[t[0]*(1-o)+o*e[0],t[1]*(1-o)+o*e[1]];if(null!==n&&null!==r)for(a=1;a<=u;a++){o=Jt.zoomAnimationFunction(a,u);for(var f=[],d=0;d<this.axes_.length;d++)f.push([n[d][0]*(1-o)+o*r[d][0],n[d][1]*(1-o)+o*r[d][1]]);c[a-1]=f}Y((function(t){if(c.length)for(var e=0;e<s.axes_.length;e++){var n=c[t][e];s.axes_[e].valueRange=[n[0],n[1]]}l.length&&(s.dateWindow_=l[t]),s.drawGraph_()}),u,Jt.ANIMATION_DURATION/u,i)},Jt.prototype.getArea=function(){return this.plotter_.area},Jt.prototype.eventToDomCoords=function(t){if(t.offsetX&&t.offsetY)return[t.offsetX,t.offsetY];var e=_(this.mouseEventElement_);return[b(t)-e.x,E(t)-e.y]},Jt.prototype.findClosestRow=function(t){for(var e=1/0,n=-1,r=this.layout_.points,i=0;i<r.length;i++)for(var a=r[i],o=a.length,s=0;s<o;s++){var u=a[s];if(w(u,!0)){var l=Math.abs(u.canvasx-t);l<e&&(e=l,n=u.idx)}}return n},Jt.prototype.findClosestPoint=function(t,e){for(var n,r,i,a,o,s,u,l=1/0,c=this.layout_.points.length-1;c>=0;--c)for(var f=this.layout_.points[c],d=0;d<f.length;++d)w(a=f[d])&&(n=(r=a.canvasx-t)*r+(i=a.canvasy-e)*i)<l&&(l=n,o=a,s=c,u=a.idx);return{row:u,seriesName:this.layout_.setNames[s],point:o}},Jt.prototype.findStackedPoint=function(t,e){for(var n,r,i=this.findClosestRow(t),a=0;a<this.layout_.points.length;++a){var o=i-this.getLeftBoundary_(a),s=this.layout_.points[a];if(!(o>=s.length)){var u=s[o];if(w(u)){var l=u.canvasy;if(t>u.canvasx&&o+1<s.length){var c=s[o+1];w(c)&&(f=c.canvasx-u.canvasx)>0&&(l+=(t-u.canvasx)/f*(c.canvasy-u.canvasy))}else if(t<u.canvasx&&o>0){var f,d=s[o-1];w(d)&&(f=u.canvasx-d.canvasx)>0&&(l+=(u.canvasx-t)/f*(d.canvasy-u.canvasy))}(0===a||l<e)&&(n=u,r=a)}}}return{row:i,seriesName:this.layout_.setNames[r],point:n}},Jt.prototype.mouseMove_=function(t){if(null!=this.layout_.points){var e=this.eventToDomCoords(t),n=e[0],r=e[1],i=!1;if(this.getOption("highlightSeriesOpts")&&!this.isSeriesLocked()){var a;a=this.getBooleanOption("stackedGraph")?this.findStackedPoint(n,r):this.findClosestPoint(n,r),i=this.setSelection(a.row,a.seriesName)}else{var o=this.findClosestRow(n);i=this.setSelection(o)}var s=this.getFunctionOption("highlightCallback");s&&i&&s.call(this,t,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},Jt.prototype.getLeftBoundary_=function(t){if(this.boundaryIds_[t])return this.boundaryIds_[t][0];for(var e=0;e<this.boundaryIds_.length;e++)if(void 0!==this.boundaryIds_[e])return this.boundaryIds_[e][0];return 0},Jt.prototype.animateSelection_=function(t){void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var e=this.fadeLevel,n=t<0?e:10-e;if(n<=0)this.fadeLevel&&this.updateSelection_(1);else{var r=++this.animateId,i=this;Y((function(e){i.animateId==r&&(i.fadeLevel+=t,0===i.fadeLevel?i.clearSelection():i.updateSelection_(i.fadeLevel/10))}),n,30,(function(){0!==i.fadeLevel&&t<0&&(i.fadeLevel=0,i.clearSelection())}))}},Jt.prototype.updateSelection_=function(t){var e;this.cascadeEvents_("select",{selectedRow:-1===this.lastRow_?void 0:this.lastRow_,selectedX:-1===this.lastx_?void 0:this.lastx_,selectedPoints:this.selPoints_});var n=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){n.clearRect(0,0,this.width_,this.height_);var r=1-this.getNumericOption("highlightSeriesBackgroundAlpha"),i=Z(this.getOption("highlightSeriesBackgroundColor"));if(r){if(void 0===t)return void this.animateSelection_(1);n.fillStyle="rgba("+i.r+","+i.g+","+i.b+","+(r*=t)+")",n.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,n)}else if(this.previousVerticalX_>=0){var a=0,o=this.attr_("labels");for(e=1;e<o.length;e++){var s=this.getNumericOption("highlightCircleSize",o[e]);s>a&&(a=s)}n.clearRect(this.previousVerticalX_-a-1,0,2*a+2,this.height_)}if(this.selPoints_.length>0){var u=this.selPoints_[0].canvasx;for(n.save(),e=0;e<this.selPoints_.length;e++){var l=this.selPoints_[e];if(!isNaN(l.canvasy)){var c=this.getNumericOption("highlightCircleSize",l.name),f=this.getFunctionOption("drawHighlightPointCallback",l.name),d=this.plotter_.colors[l.name];f||(f=q.DEFAULT),n.lineWidth=this.getNumericOption("strokeWidth",l.name),n.strokeStyle=d,n.fillStyle=d,f.call(this,this,l.name,n,u,l.canvasy,d,c,l.idx)}}n.restore(),this.previousVerticalX_=u}},Jt.prototype.setSelection=function(t,e,n){this.selPoints_=[];var r=!1;if(!1!==t&&t>=0){t!=this.lastRow_&&(r=!0),this.lastRow_=t;for(var i=0;i<this.layout_.points.length;++i){var a=this.layout_.points[i],o=t-this.getLeftBoundary_(i);if(o>=0&&o<a.length&&a[o].idx==t)null!==(u=a[o]).yval&&this.selPoints_.push(u);else for(var s=0;s<a.length;++s){var u;if((u=a[s]).idx==t){null!==u.yval&&this.selPoints_.push(u);break}}}}else this.lastRow_>=0&&(r=!0),this.lastRow_=-1;return this.lastx_=this.selPoints_.length?this.selPoints_[0].xval:-1,void 0!==e&&(this.highlightSet_!==e&&(r=!0),this.highlightSet_=e),void 0!==n&&(this.lockedSet_=n),r&&this.updateSelection_(void 0),r},Jt.prototype.mouseOut_=function(t){this.getFunctionOption("unhighlightCallback")&&this.getFunctionOption("unhighlightCallback").call(this,t),this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},Jt.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null)},Jt.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var t=0;t<this.layout_.points.length;t++)for(var e=this.layout_.points[t],n=0;n<e.length;n++)if(e[n].x==this.selPoints_[0].x)return e[n].idx;return-1},Jt.prototype.getHighlightSeries=function(){return this.highlightSet_},Jt.prototype.isSeriesLocked=function(){return this.lockedSet_},Jt.prototype.loadedEvent_=function(t){this.rawData_=this.parseCSV_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_()},Jt.prototype.addXTicks_=function(){var t;t=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var e=this.optionsViewForAxis_("x"),n=e("ticker")(t[0],t[1],this.plotter_.area.w,e,this);this.layout_.setXTicks(n)},Jt.prototype.getHandlerClass_=function(){return this.attr_("dataHandler")?this.attr_("dataHandler"):this.fractions_?this.getBooleanOption("errorBars")?Lt:Pt:this.getBooleanOption("customBars")?kt:this.getBooleanOption("errorBars")?It:At},Jt.prototype.predraw_=function(){var t=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new dt(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var e=1;e<this.numColumns();e++){var n=this.dataHandler_.extractSeries(this.rawData_,e,this.attributes_);this.rollPeriod_>1&&(n=this.dataHandler_.rollingAverage(n,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(n)}this.drawGraph_();var r=new Date;this.drawingTimeMs_=r-t},Jt.PointType=void 0,Jt.stackPoints_=function(t,e,n,r){for(var i=null,a=null,o=null,s=-1,u=function(e){if(!(s>=e))for(var n=e;n<t.length;++n)if(o=null,!isNaN(t[n].yval)&&null!==t[n].yval){s=n,o=t[n];break}},l=0;l<t.length;++l){var c=t[l],f=c.xval;void 0===e[f]&&(e[f]=0);var d=c.yval;isNaN(d)||null===d?"none"==r?d=0:(u(l),d=a&&o&&"none"!=r?a.yval+(f-a.xval)/(o.xval-a.xval)*(o.yval-a.yval):a&&"all"==r?a.yval:o&&"all"==r?o.yval:0):a=c;var h=e[f];i!=f&&(e[f]=h+=d),i=f,c.yval_stacked=h,h>n[1]&&(n[1]=h),h<n[0]&&(n[0]=h)}},Jt.prototype.gatherDatasets_=function(t,e){var n,r,i,a,o,s,u=[],l=[],c=[],f={};for(n=t.length-1;n>=1;n--)if(this.visibility()[n-1]){if(e){s=t[n];var d=e[0],h=e[1];for(i=null,a=null,r=0;r<s.length;r++)s[r][0]>=d&&null===i&&(i=r),s[r][0]<=h&&(a=r);null===i&&(i=0);for(var p=i,g=!0;g&&p>0;)g=null===s[--p][1];null===a&&(a=s.length-1);var v=a;for(g=!0;g&&v<s.length-1;)g=null===s[++v][1];p!==i&&(i=p),v!==a&&(a=v),u[n-1]=[i,a],s=s.slice(i,a+1)}else u[n-1]=[0,(s=t[n]).length-1];var m=this.attr_("labels")[n],y=this.dataHandler_.getExtremeYValues(s,e,this.getBooleanOption("stepPlot",m)),_=this.dataHandler_.seriesToPoints(s,m,u[n-1][0]);this.getBooleanOption("stackedGraph")&&(void 0===c[o=this.attributes_.axisForSeries(m)]&&(c[o]=[]),Jt.stackPoints_(_,c[o],y,this.getBooleanOption("stackedGraphNaNFill"))),f[m]=y,l[n]=_}return{points:l,extremes:f,boundaryIds:u}},Jt.prototype.drawGraph_=function(){var t=new Date,e=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var n=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),r=n.points,i=n.extremes;this.boundaryIds_=n.boundaryIds,this.setIndexByName_={};for(var a=this.attr_("labels"),o=0,s=1;s<r.length;s++)this.visibility()[s-1]&&(this.layout_.addDataset(a[s],r[s]),this.datasetIndex_[s]=o++);for(s=0;s<a.length;s++)this.setIndexByName_[a[s]]=s;if(this.computeYAxisRanges_(i),this.layout_.setYAxes(this.axes_),this.addXTicks_(),this.layout_.evaluate(),this.renderGraph_(e),this.getStringOption("timingName")){var u=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(u-t)+"ms")}},Jt.prototype.renderGraph_=function(t){this.cascadeEvents_("clearChart"),this.plotter_.clear();var e=this.getFunctionOption("underlayCallback");e&&e.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var n={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",n),this.plotter_.render(),this.cascadeEvents_("didDrawChart",n),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);var r=this.getFunctionOption("drawCallback");if(null!==r&&r.call(this,this,t),t)for(this.readyFired_=!0;this.readyFns_.length>0;)this.readyFns_.pop()(this)},Jt.prototype.computeYAxes_=function(){var t,e,n;for(this.axes_=[],t=0;t<this.attributes_.numAxes();t++)L(e={g:this},this.attributes_.axisOptions(t)),this.axes_[t]=e;for(t=0;t<this.axes_.length;t++)if(0===t)(n=(e=this.optionsViewForAxis_("y"+(t?"2":"")))("valueRange"))&&(this.axes_[t].valueRange=n);else{var r=this.user_attrs_.axes;r&&r.y2&&(n=r.y2.valueRange)&&(this.axes_[t].valueRange=n)}},Jt.prototype.numAxes=function(){return this.attributes_.numAxes()},Jt.prototype.axisPropertiesForSeries=function(t){return this.axes_[this.attributes_.axisForSeries(t)]},Jt.prototype.computeYAxisRanges_=function(t){for(var e,n,r,i,a,o=function(t){return isNaN(parseFloat(t))},s=this.attributes_.numAxes(),u=0;u<s;u++){var l=this.axes_[u],c=this.attributes_.getForAxis("logscale",u),f=this.attributes_.getForAxis("includeZero",u),d=this.attributes_.getForAxis("independentTicks",u);r=this.attributes_.seriesForAxis(u),e=!0,i=.1;var p=this.getNumericOption("yRangePad");if(null!==p&&(e=!1,i=p/this.plotter_.area.h),0===r.length)l.extremeRange=[0,1];else{for(var g,v,m=1/0,y=-1/0,_=0;_<r.length;_++)t.hasOwnProperty(r[_])&&(null!==(g=t[r[_]][0])&&(m=Math.min(g,m)),null!==(v=t[r[_]][1])&&(y=Math.max(v,y)));f&&!c&&(m>0&&(m=0),y<0&&(y=0)),m==1/0&&(m=0),y==-1/0&&(y=1),0==(n=y-m)&&(0!==y?n=Math.abs(y):(y=1,n=1));var b=y,E=m;e&&(c?(b=y+i*n,E=m):((E=m-i*n)<0&&m>=0&&(E=0),(b=y+i*n)>0&&y<=0&&(b=0))),l.extremeRange=[E,b]}if(l.valueRange){var T=o(l.valueRange[0])?l.extremeRange[0]:l.valueRange[0],S=o(l.valueRange[1])?l.extremeRange[1]:l.valueRange[1];l.computedValueRange=[T,S]}else l.computedValueRange=l.extremeRange;if(!e)if(c){var w=(i-1)/(2*i-1);l.computedValueRange[0]=h(T=l.computedValueRange[0],S=l.computedValueRange[1],i/(2*i-1)),l.computedValueRange[1]=h(T,S,w)}else l.computedValueRange[0]=(T=l.computedValueRange[0])-(n=(S=l.computedValueRange[1])-T)*i,l.computedValueRange[1]=S+n*i;if(d){l.independentTicks=d;var A=(x=this.optionsViewForAxis_("y"+(u?"2":"")))("ticker");l.ticks=A(l.computedValueRange[0],l.computedValueRange[1],this.plotter_.area.h,x,this),a||(a=l)}}if(void 0===a)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(u=0;u<s;u++)if(!(l=this.axes_[u]).independentTicks){A=(x=this.optionsViewForAxis_("y"+(u?"2":"")))("ticker");for(var x,C=a.ticks,D=a.computedValueRange[1]-a.computedValueRange[0],I=l.computedValueRange[1]-l.computedValueRange[0],R=[],k=0;k<C.length;k++)R.push(l.computedValueRange[0]+(C[k].v-a.computedValueRange[0])/D*I);l.ticks=A(l.computedValueRange[0],l.computedValueRange[1],this.plotter_.area.h,x,this,R)}},Jt.prototype.detectTypeFromString_=function(t){var e=!1,n=t.indexOf("-");(n>0&&"e"!=t[n-1]&&"E"!=t[n-1]||t.indexOf("/")>=0||isNaN(parseFloat(t))||8==t.length&&t>"19700101"&&t<"20371231")&&(e=!0),this.setXAxisOptions_(e)},Jt.prototype.setXAxisOptions_=function(t){t?(this.attrs_.xValueParser=P,this.attrs_.axes.x.valueFormatter=ut,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st):(this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Jt.prototype.parseCSV_=function(t){var e,n,r=[],i=X(t),a=t.split(i||"\n"),o=this.getStringOption("delimiter");-1==a[0].indexOf(o)&&a[0].indexOf("\t")>=0&&(o="\t");var s=0;"labels"in this.user_attrs_||(s=1,this.attrs_.labels=a[0].split(o),this.attributes_.reparseSeries());for(var u,l=!1,c=this.attr_("labels").length,f=!1,d=s;d<a.length;d++){var h=a[d];if(0!==h.length&&"#"!=h[0]){var p=h.split(o);if(!(p.length<2)){var g=[];if(l||(this.detectTypeFromString_(p[0]),u=this.getFunctionOption("xValueParser"),l=!0),g[0]=u(p[0],this),this.fractions_)for(n=1;n<p.length;n++)2!=(e=p[n].split("/")).length?(console.error('Expected fractional "num/den" values in CSV data but found a value \''+p[n]+"' on line "+(1+d)+" ('"+h+"') which is not of this form."),g[n]=[0,0]):g[n]=[J(e[0],d,h),J(e[1],d,h)];else if(this.getBooleanOption("errorBars"))for(p.length%2!=1&&console.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+d)+" has an odd number of values ("+(p.length-1)+"): '"+h+"'"),n=1;n<p.length;n+=2)g[(n+1)/2]=[J(p[n],d,h),J(p[n+1],d,h)];else if(this.getBooleanOption("customBars"))for(n=1;n<p.length;n++){var v=p[n];/^ *$/.test(v)?g[n]=[null,null,null]:3==(e=v.split(";")).length?g[n]=[J(e[0],d,h),J(e[1],d,h),J(e[2],d,h)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+v+'" on line '+(1+d))}else for(n=1;n<p.length;n++)g[n]=J(p[n],d,h);if(r.length>0&&g[0]<r[r.length-1][0]&&(f=!0),g.length!=c&&console.error("Number of columns in line "+d+" ("+g.length+") does not agree with number of labels ("+c+") "+h),0===d&&this.attr_("labels")){var m=!0;for(n=0;m&&n<g.length;n++)g[n]&&(m=!1);if(m){console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+h+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}r.push(g)}}}return f&&(console.warn("CSV is out of order; order it correctly to speed loading."),r.sort((function(t,e){return t[0]-e[0]}))),r},Jt.prototype.parseArray_=function(t){if(0===t.length)return console.error("Can't plot empty data set"),null;if(0===t[0].length)return console.error("Data set cannot contain an empty row"),null;var e;if(function(t){var e=t[0],n=e[0];if("number"!=typeof n&&!j(n))throw new Error("Expected number or date but got ".concat(typeof n,": ").concat(n,"."));for(var r=1;r<e.length;r++){var i=e[r];if(null!=i&&"number"!=typeof i&&!F(i))throw new Error("Expected number or array but got ".concat(typeof i,": ").concat(i,"."))}}(t),null===this.attr_("labels")){for(console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],e=1;e<t[0].length;e++)this.attrs_.labels.push("Y"+e);this.attributes_.reparseSeries()}else{var n=this.attr_("labels");if(n.length!=t[0].length)return console.error("Mismatch between number of labels ("+n+") and number of columns in array ("+t[0].length+")"),null}if(j(t[0][0])){this.attrs_.axes.x.valueFormatter=ut,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st;var a=function t(e){for(var n=[],r=0;r<e.length;r++)F(e[r])?n.push(t(e[r])):n.push(e[r]);return n}(t);for(e=0;e<t.length;e++){if(0===a[e].length)return console.error("Row "+(1+e)+" of data is empty"),null;if(null===a[e][0]||"function"!=typeof a[e][0].getTime||isNaN(a[e][0].getTime()))return console.error("x value in row "+(1+e)+" is not a Date"),null;a[e][0]=a[e][0].getTime()}return a}return this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=at,t},Jt.prototype.parseDataTable_=function(t){var e=function(t){var e=String.fromCharCode(65+t%26);for(t=Math.floor(t/26);t>0;)e=String.fromCharCode(65+(t-1)%26)+e.toLowerCase(),t=Math.floor((t-1)/26);return e},n=t.getNumberOfColumns(),a=t.getNumberOfRows(),o=t.getColumnType(0);if("date"==o||"datetime"==o)this.attrs_.xValueParser=P,this.attrs_.axes.x.valueFormatter=ut,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st;else{if("number"!=o)throw new Error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+o+"')");this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var s,u,l=[],c={},f=!1;for(s=1;s<n;s++){var d=t.getColumnType(s);if("number"==d)l.push(s);else{if("string"!=d||!this.getBooleanOption("displayAnnotations"))throw new Error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");var h=l[l.length-1];c.hasOwnProperty(h)?c[h].push(s):c[h]=[s],f=!0}}var p=[t.getColumnLabel(0)];for(s=0;s<l.length;s++)p.push(t.getColumnLabel(l[s])),this.getBooleanOption("errorBars")&&(s+=1);this.attrs_.labels=p,n=p.length;var g=[],v=!1,m=[];for(s=0;s<a;s++){var y=[];if(void 0!==t.getValue(s,0)&&null!==t.getValue(s,0)){if(y.push("date"==o||"datetime"==o?t.getValue(s,0).getTime():t.getValue(s,0)),this.getBooleanOption("errorBars"))for(u=0;u<n-1;u++)y.push([t.getValue(s,1+2*u),t.getValue(s,2+2*u)]);else{for(u=0;u<l.length;u++){var _=l[u];if(y.push(t.getValue(s,_)),f&&c.hasOwnProperty(_)&&null!==t.getValue(s,c[_][0])){var b={};b.series=t.getColumnLabel(_),b.xval=y[0],b.shortText=e(m.length),b.text="";for(var E=0;E<c[_].length;E++)E&&(b.text+="\n"),b.text+=t.getValue(s,c[_][E]);m.push(b)}}for(u=0;u<y.length;u++)isFinite(y[u])||(y[u]=null)}g.length>0&&y[0]<g[g.length-1][0]&&(v=!0),g.push(y)}else console.warn("Ignoring row "+s+" of DataTable because of undefined or null first column.")}v&&(console.warn("DataTable is out of order; order it correctly to speed loading."),g.sort((function(t,e){return t[0]-e[0]}))),this.rawData_=g,m.length>0&&this.setAnnotations(m,!0),this.attributes_.reparseSeries()},Jt.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})},Jt.prototype.start_=function(){var t=this.file_;if("function"==typeof t&&(t=t()),F(t))this.rawData_=this.parseArray_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("object"==typeof t&&"function"==typeof t.getColumnRange)this.parseDataTable_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("string"==typeof t)if(X(t))this.loadedEvent_(t);else{var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){4==e.readyState&&(200!==e.status&&0!==e.status||n.loadedEvent_(e.responseText))},e.open("GET",t,!0),e.send(null)}else console.error("Unknown data format: "+typeof t)},Jt.prototype.updateOptions=function(t,e){void 0===e&&(e=!1);var n=t.file,r=Jt.copyUserAttrs_(t);"rollPeriod"in r&&(this.rollPeriod_=r.rollPeriod),"dateWindow"in r&&(this.dateWindow_=r.dateWindow);var i=function(t,e){var n={};if(t)for(var r=1;r<t.length;r++)n[t[r]]=!0;var i=function(t){for(var e in t)if(t.hasOwnProperty(e)&&!z[e])return!0;return!1};for(var a in e)if(e.hasOwnProperty(a))if("highlightSeriesOpts"==a||n[a]&&!e.series){if(i(e[a]))return!0}else if("series"==a||"axes"==a){var o=e[a];for(var s in o)if(o.hasOwnProperty(s)&&i(o[s]))return!0}else if(!z[a])return!0;return!1}(this.attr_("labels"),r);N(this.user_attrs_,r),this.attributes_.reparseSeries(),n?(this.cascadeEvents_("dataWillUpdate",{}),this.file_=n,e||this.start_()):e||(i?this.predraw_():this.renderGraph_(!1))},Jt.copyUserAttrs_=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&"file"!=n&&t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Jt.prototype.resize=function(t,e){if(!this.resize_lock){this.resize_lock=!0,null===t!=(null===e)&&(console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),t=e=null);var n=this.width_,r=this.height_;t?(this.maindiv_.style.width=t+"px",this.maindiv_.style.height=e+"px",this.width_=t,this.height_=e):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),n==this.width_&&r==this.height_||(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},Jt.prototype.adjustRoll=function(t){this.rollPeriod_=t,this.predraw_()},Jt.prototype.visibility=function(){for(this.getOption("visibility")||(this.attrs_.visibility=[]);this.getOption("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption("visibility")},Jt.prototype.setVisibility=function(t,e){var n=this.visibility(),r=!1;if(Array.isArray(t)||(null!==t&&"object"==typeof t?r=!0:t=[t]),r)for(var i in t)t.hasOwnProperty(i)&&(i<0||i>=n.length?console.warn("Invalid series number in setVisibility: "+i):n[i]=t[i]);else for(i=0;i<t.length;i++)"boolean"==typeof t[i]?i>=n.length?console.warn("Invalid series number in setVisibility: "+i):n[i]=t[i]:t[i]<0||t[i]>=n.length?console.warn("Invalid series number in setVisibility: "+t[i]):n[t[i]]=e;this.predraw_()},Jt.prototype.size=function(){return{width:this.width_,height:this.height_}},Jt.prototype.setAnnotations=function(t,e){this.annotations_=t,this.layout_?(this.layout_.setAnnotations(this.annotations_),e||this.predraw_()):console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html")},Jt.prototype.annotations=function(){return this.annotations_},Jt.prototype.getLabels=function(){var t=this.attr_("labels");return t?t.slice():null},Jt.prototype.indexFromSetName=function(t){return this.setIndexByName_[t]},Jt.prototype.getRowForX=function(t){for(var e=0,n=this.numRows()-1;e<=n;){var r=n+e>>1,i=this.getValue(r,0);if(i<t)e=r+1;else if(i>t)n=r-1;else{if(e==r)return r;n=r}}return null},Jt.prototype.ready=function(t){this.is_initial_draw_?this.readyFns_.push(t):t.call(this,this)},Jt.prototype.addAndTrackEvent=function(t,e,n){g(t,e,n),this.registeredEvents_.push({elem:t,type:e,fn:n})},Jt.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var t=0;t<this.registeredEvents_.length;t++){var e=this.registeredEvents_[t];v(e.elem,e.type,e.fn)}this.registeredEvents_=[]},Jt.PLUGINS=[Kt,Bt,Qt,Ht,Ft,zt],Jt.GVizChart=Zt,Jt.DASHED_LINE=[7,3],Jt.DOT_DASH_LINE=[7,2,2,2],Jt.dateAxisLabelFormatter=st,Jt.toRGB_=Z,Jt.findPos=_,Jt.pageX=b,Jt.pageY=E,Jt.dateString_=R,Jt.defaultInteractionModel=gt.defaultModel,Jt.nonInteractiveModel=Jt.nonInteractiveModel_=gt.nonInteractiveModel_,Jt.Circles=q,Jt.Plugins={Legend:Kt,Axes:Bt,Annotations:Ft,ChartLabels:Ht,Grid:zt,RangeSelector:Qt},Jt.DataHandlers={DefaultHandler:At,BarsHandler:Ct,CustomBarsHandler:kt,DefaultFractionHandler:Pt,ErrorBarsHandler:It,FractionsBarsHandler:Lt},Jt.startPan=gt.startPan,Jt.startZoom=gt.startZoom,Jt.movePan=gt.movePan,Jt.moveZoom=gt.moveZoom,Jt.endPan=gt.endPan,Jt.endZoom=gt.endZoom,Jt.numericLinearTicks=function(t,e,n,i,a,o){return r(t,e,n,(function(t){return"logscale"!==t&&i(t)}),a,o)},Jt.numericTicks=r,Jt.dateTicker=i,Jt.Granularity=a,Jt.getDateAxis=c,Jt.floatFormat=A;var te=e.default=Jt},DbhI:function(t,e,n){var r=n("ScnH"),i=function t(e){J(this,t),r.PARAMCHECK(e),this.type=e},a=function(t){z(n,t);var e=X(n);function n(t){var i,a=t.isMasterPlaylist,o=t.uri,s=t.version,u=t.independentSegments,l=void 0!==u&&u,c=t.start,f=t.source;return J(this,n),i=e.call(this,"playlist"),r.PARAMCHECK(a),i.isMasterPlaylist=a,i.uri=o,i.version=s,i.independentSegments=l,i.start=c,i.source=f,i}return n}(i);t.exports={Rendition:function(){function t(e){var n=e.type,i=e.uri,a=e.groupId,o=e.language,s=e.assocLanguage,u=e.name,l=e.isDefault,c=e.autoselect,f=e.forced,d=e.instreamId,h=e.characteristics,p=e.channels;J(this,t),r.PARAMCHECK(n,a,u),r.CONDITIONALASSERT(["SUBTITLES"===n,i],["CLOSED-CAPTIONS"===n,d],["CLOSED-CAPTIONS"===n,!i],[f,"CLOSED-CAPTIONS"===n]),this.type=n,this.uri=i,this.groupId=a,this.language=o,this.assocLanguage=s,this.name=u,this.isDefault=l,this.autoselect=c,this.forced=f,this.instreamId=d,this.characteristics=h,this.channels=p}return Y(t,[{key:"toString",value:function(){return"".concat(this.name,", ").concat(this.type,", ").concat(this.language)}}]),t}(),Variant:function t(e){var n=e.uri,i=e.isIFrameOnly,a=void 0!==i&&i,o=e.bandwidth,s=e.averageBandwidth,u=e.codecs,l=e.resolution,c=e.frameRate,f=e.hdcpLevel,d=e.audio,h=void 0===d?[]:d,p=e.video,g=void 0===p?[]:p,v=e.subtitles,m=void 0===v?[]:v,y=e.closedCaptions,_=void 0===y?[]:y,b=e.currentRenditions,E=void 0===b?{audio:0,video:0,subtitles:0,closedCaptions:0}:b;J(this,t),r.PARAMCHECK(n,o),this.uri=n,this.isIFrameOnly=a,this.bandwidth=o,this.averageBandwidth=s,this.codecs=u,this.resolution=l,this.frameRate=c,this.hdcpLevel=f,this.audio=h,this.video=g,this.subtitles=m,this.closedCaptions=_,this.currentRenditions=E},SessionData:function t(e){var n=e.id,i=e.value,a=e.uri,o=e.language;J(this,t),r.PARAMCHECK(n,i||a),r.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(i&&a)),this.id=n,this.value=i,this.uri=a,this.language=o},Key:function t(e){var n=e.method,i=e.uri,a=e.iv,o=e.format,s=e.formatVersion;J(this,t),r.PARAMCHECK(n),r.CONDITIONALPARAMCHECK(["NONE"!==n,i]),r.CONDITIONALASSERT(["NONE"===n,!(i||a||o||s)]),this.method=n,this.uri=i,this.iv=a,this.format=o,this.formatVersion=s},MediaInitializationSection:function t(e){var n=e.uri,i=e.mimeType,a=e.byterange;J(this,t),r.PARAMCHECK(n),this.uri=n,this.mimeType=i,this.byterange=a},DateRange:function t(e){var n=e.id,i=e.classId,a=e.start,o=e.end,s=e.duration,u=e.plannedDuration,l=e.endOnNext,c=e.attributes,f=void 0===c?{}:c;J(this,t),r.PARAMCHECK(n,a),r.CONDITIONALPARAMCHECK([!0===l,i]),r.CONDITIONALASSERT([o,a<=o],[s,s>=0],[u,u>=0]),this.id=n,this.classId=i,this.start=a,this.end=o,this.duration=s,this.plannedDuration=u,this.endOnNext=l,this.attributes=f},SpliceInfo:function t(e){var n=e.type,i=e.duration,a=e.tagName,o=e.value;J(this,t),r.PARAMCHECK(n),r.CONDITIONALPARAMCHECK(["OUT"===n,i]),r.CONDITIONALPARAMCHECK(["RAW"===n,a]),this.type=n,this.duration=i,this.tagName=a,this.value=o},Playlist:a,MasterPlaylist:function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};J(this,n),r.isMasterPlaylist=!0,t=e.call(this,r);var i=r.variants,a=void 0===i?[]:i,o=r.currentVariant,s=r.sessionDataList,u=void 0===s?[]:s,l=r.sessionKeyList,c=void 0===l?[]:l;return t.variants=a,t.currentVariant=o,t.sessionDataList=u,t.sessionKeyList=c,t}return n}(a),MediaPlaylist:function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};J(this,n),r.isMasterPlaylist=!1,t=e.call(this,r);var i=r.targetDuration,a=r.mediaSequenceBase,o=void 0===a?0:a,s=r.discontinuitySequenceBase,u=void 0===s?0:s,l=r.endlist,c=void 0!==l&&l,f=r.playlistType,d=r.isIFrame,h=r.segments,p=void 0===h?[]:h,g=r.hash;return t.targetDuration=i,t.mediaSequenceBase=o,t.discontinuitySequenceBase=u,t.endlist=c,t.playlistType=f,t.isIFrame=d,t.segments=p,t.hash=g,t}return n}(a),Segment:function(t){z(n,t);var e=X(n);function n(t){var i,a=t.uri,o=t.mimeType,s=t.data,u=t.duration,l=t.title,c=t.byterange,f=t.discontinuity,d=t.mediaSequenceNumber,h=t.discontinuitySequence,p=t.key,g=t.map,v=t.programDateTime,m=t.dateRange,y=t.markers,_=void 0===y?[]:y;return J(this,n),i=e.call(this,"segment"),r.PARAMCHECK(a,d,h),i.uri=a,i.mimeType=o,i.data=s,i.duration=u,i.title=l,i.byterange=c,i.discontinuity=f,i.mediaSequenceNumber=d,i.discontinuitySequence=h,i.key=p,i.map=g,i.programDateTime=v,i.dateRange=m,i.markers=_,i}return n}(i)}},DlQD:function(t,e,n){t.exports=function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,void 0):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var n=function(t){var e={exports:{}};return function(t){t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},changeDefaults:function(e){t.exports.defaults=e}}}(e),e.exports}(),r=/[&<>"']/,i=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,o=/[<>"']|&(?!#?\w+;)/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(t){return s[t]},l=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function c(t){return t.replace(l,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var f=/(^|[^\[])\^/g,d=/[^\w:]/g,h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,p={},g=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,m=/^([^:]+:\/*[^/]*)[\s\S]*$/;function y(t,e,n){var r=t.length;if(0===r)return"";for(var i=0;i<r;){var a=t.charAt(r-i-1);if(a!==e||n){if(a===e||!n)break;i++}else i++}return t.substr(0,r-i)}var _=function(t,e){if(e){if(r.test(t))return t.replace(i,u)}else if(a.test(t))return t.replace(o,u);return t},b=c,E=function(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},T=n.defaults,S=y,w=function(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var r=!1,i=e;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},A=_;function x(t,e,n){var r=e.href,i=e.title?A(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");return"!"!==t[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:a}:{type:"image",raw:n,href:r,title:i,text:A(a)}}var C=function(){function t(t){this.options=t||T}var e=t.prototype;return e.space=function(t){var e=this.rules.block.newline.exec(t);if(e)return e[0].length>1?{type:"space",raw:e[0]}:{raw:"\n"}},e.code=function(t,e){var n=this.rules.block.code.exec(t);if(n){var r=e[e.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:S(i,"\n")}}},e.fences=function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],r=function(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var r=n[1];return e.split("\n").map((function(t){var e=t.match(/^\s+/);return null===e?t:e[0].length>=r.length?t.slice(r.length):t})).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:r}}},e.heading=function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var r=S(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n}}},e.nptable=function(t){var e=this.rules.block.nptable.exec(t);if(e){var n={type:"table",header:w(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[],raw:e[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)n.align[r]=/^ *-+: *$/.test(n.align[r])?"right":/^ *:-+: *$/.test(n.align[r])?"center":/^ *:-+ *$/.test(n.align[r])?"left":null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=w(n.cells[r],n.header.length);return n}}},e.hr=function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}},e.blockquote=function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],text:n}}},e.list=function(t){var e=this.rules.block.list.exec(t);if(e){var n,r,i,a,o,s,u,l,c=e[0],f=e[2],d=f.length>1,h={type:"list",raw:c,ordered:d,start:d?+f.slice(0,-1):"",loose:!1,items:[]},p=e[0].match(this.rules.block.item),g=!1,v=p.length;i=this.rules.block.listItemStart.exec(p[0]);for(var m=0;m<v;m++){if(c=n=p[m],m!==v-1){if(a=this.rules.block.listItemStart.exec(p[m+1]),this.options.pedantic?a[1].length>i[1].length:a[1].length>i[0].length||a[1].length>3){p.splice(m,2,p[m]+"\n"+p[m+1]),m--,v--;continue}(!this.options.pedantic||this.options.smartLists?a[2][a[2].length-1]!==f[f.length-1]:d===(1===a[2].length))&&(o=p.slice(m+1).join("\n"),h.raw=h.raw.substring(0,h.raw.length-o.length),m=v-1),i=a}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=n.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+r+"}","gm"),"")),s=g||/\n\n(?!\s*$)/.test(n),m!==v-1&&(g="\n"===n.charAt(n.length-1),s||(s=g)),s&&(h.loose=!0),this.options.gfm&&(l=void 0,(u=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),h.items.push({type:"list_item",raw:c,task:u,checked:l,loose:s,text:n})}return h}},e.html=function(t){var e=this.rules.block.html.exec(t);if(e)return{type:this.options.sanitize?"paragraph":"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):A(e[0]):e[0]}},e.def=function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}},e.table=function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:w(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var r,i=n.align.length;for(r=0;r<i;r++)n.align[r]=/^ *-+: *$/.test(n.align[r])?"right":/^ *:-+: *$/.test(n.align[r])?"center":/^ *:-+ *$/.test(n.align[r])?"left":null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=w(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},e.lheading=function(t){var e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1]}},e.paragraph=function(t){var e=this.rules.block.paragraph.exec(t);if(e)return{type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]}},e.text=function(t,e){var n=this.rules.block.text.exec(t);if(n){var r=e[e.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},e.escape=function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:A(e[1])}},e.tag=function(t,e,n){var r=this.rules.inline.tag.exec(t);if(r)return!e&&/^<a /i.test(r[0])?e=!0:e&&/^<\/a>/i.test(r[0])&&(e=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:e,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):A(r[0]):r[0]}},e.link=function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=S(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var i=function(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,r=0,i=0;i<n;i++)if("\\"===t[i])i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&--r<0)return i;return-1}(e[2],"()");if(i>-1){var a=(0===e[0].indexOf("!")?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}var o=e[2],s="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);u&&(o=u[1],s=u[3])}else s=e[3]?e[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(n)?o.slice(1):o.slice(1,-1)),x(e,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:s?s.replace(this.rules.inline._escapes,"$1"):s},e[0])}},e.reflink=function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=e[r.toLowerCase()])||!r.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return x(n,r,n[0])}},e.strong=function(t,e,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(t);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){e=e.slice(-1*t.length);var i,a="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(a.lastIndex=0;null!=(r=a.exec(e));)if(i=this.rules.inline.strong.middle.exec(e.slice(0,r.index+3)))return{type:"strong",raw:t.slice(0,i[0].length),text:t.slice(2,i[0].length-2)}}},e.em=function(t,e,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(t);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){e=e.slice(-1*t.length);var i,a="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(a.lastIndex=0;null!=(r=a.exec(e));)if(i=this.rules.inline.em.middle.exec(e.slice(0,r.index+2)))return{type:"em",raw:t.slice(0,i[0].length),text:t.slice(1,i[0].length-1)}}},e.codespan=function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=A(n,!0),{type:"codespan",raw:e[0],text:n}}},e.br=function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}},e.del=function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2]}},e.autolink=function(t,e){var n,r,i=this.rules.inline.autolink.exec(t);if(i)return r="@"===i[2]?"mailto:"+(n=A(this.options.mangle?e(i[1]):i[1])):n=A(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},e.url=function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var r,i;if("@"===n[2])i="mailto:"+(r=A(this.options.mangle?e(n[0]):n[0]));else{var a;do{a=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(a!==n[0]);r=A(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},e.inlineText=function(t,e,n){var r,i=this.rules.inline.text.exec(t);if(i)return r=e?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):A(i[0]):i[0]:A(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},t}(),D={exec:function(){}},I=function(t,e){t=t.source||t,e=e||"";var n={replace:function(e,r){return r=(r=r.source||r).replace(f,"$1"),t=t.replace(e,r),n},getRegex:function(){return new RegExp(t,e)}};return n},R=E,k={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:D,table:D,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};k.def=I(k.def).replace("label",k._label).replace("title",k._title).getRegex(),k.bullet=/(?:[*+-]|\d{1,9}[.)])/,k.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,k.item=I(k.item,"gm").replace(/bull/g,k.bullet).getRegex(),k.listItemStart=I(/^( *)(bull)/).replace("bull",k.bullet).getRegex(),k.list=I(k.list).replace(/bull/g,k.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+k.def.source+")").getRegex(),k._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",k._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,k.html=I(k.html,"i").replace("comment",k._comment).replace("tag",k._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),k.paragraph=I(k._paragraph).replace("hr",k.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",k._tag).getRegex(),k.blockquote=I(k.blockquote).replace("paragraph",k.paragraph).getRegex(),k.normal=R({},k),k.gfm=R({},k.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),k.gfm.nptable=I(k.gfm.nptable).replace("hr",k.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",k._tag).getRegex(),k.gfm.table=I(k.gfm.table).replace("hr",k.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",k._tag).getRegex(),k.pedantic=R({},k.normal,{html:I("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",k._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:D,paragraph:I(k.normal._paragraph).replace("hr",k.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",k.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var O={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:D,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:D,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};O.punctuation=I(O.punctuation).replace(/punctuation/g,O._punctuation).getRegex(),O._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",O._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",O._comment=I(k._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),O.em.start=I(O.em.start).replace(/punctuation/g,O._punctuation).getRegex(),O.em.middle=I(O.em.middle).replace(/punctuation/g,O._punctuation).replace(/overlapSkip/g,O._overlapSkip).getRegex(),O.em.endAst=I(O.em.endAst,"g").replace(/punctuation/g,O._punctuation).getRegex(),O.em.endUnd=I(O.em.endUnd,"g").replace(/punctuation/g,O._punctuation).getRegex(),O.strong.start=I(O.strong.start).replace(/punctuation/g,O._punctuation).getRegex(),O.strong.middle=I(O.strong.middle).replace(/punctuation/g,O._punctuation).replace(/overlapSkip/g,O._overlapSkip).getRegex(),O.strong.endAst=I(O.strong.endAst,"g").replace(/punctuation/g,O._punctuation).getRegex(),O.strong.endUnd=I(O.strong.endUnd,"g").replace(/punctuation/g,O._punctuation).getRegex(),O.blockSkip=I(O._blockSkip,"g").getRegex(),O.overlapSkip=I(O._overlapSkip,"g").getRegex(),O._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,O._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,O._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,O.autolink=I(O.autolink).replace("scheme",O._scheme).replace("email",O._email).getRegex(),O._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,O.tag=I(O.tag).replace("comment",O._comment).replace("attribute",O._attribute).getRegex(),O._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,O._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,O._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,O.link=I(O.link).replace("label",O._label).replace("href",O._href).replace("title",O._title).getRegex(),O.reflink=I(O.reflink).replace("label",O._label).getRegex(),O.reflinkSearch=I(O.reflinkSearch,"g").replace("reflink",O.reflink).replace("nolink",O.nolink).getRegex(),O.normal=R({},O),O.pedantic=R({},O.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",O._label).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",O._label).getRegex()}),O.gfm=R({},O.normal,{escape:I(O.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),O.gfm.url=I(O.gfm.url,"i").replace("email",O.gfm._extended_email).getRegex(),O.breaks=R({},O.gfm,{br:I(O.br).replace("{2,}","*").getRegex(),text:I(O.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var P={block:k,inline:O},M=n.defaults,L=P.block,N=P.inline,F=function(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t};function j(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function B(t){var e,n,r="",i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var U=function(){function t(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||M,this.options.tokenizer=this.options.tokenizer||new C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:L.normal,inline:N.normal};this.options.pedantic?(e.block=L.pedantic,e.inline=N.pedantic):this.options.gfm&&(e.block=L.gfm,e.inline=this.options.breaks?N.breaks:N.gfm),this.tokenizer.rules=e}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var e,n=t.prototype;return n.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(t,this.tokens,!0),this.inline(this.tokens),this.tokens},n.blockTokens=function(t,e,n){var r,i,a,o;for(void 0===e&&(e=[]),void 0===n&&(n=!0),this.options.pedantic&&(t=t.replace(/^ +$/gm,""));t;)if(r=this.tokenizer.space(t))t=t.substring(r.raw.length),r.type&&e.push(r);else if(r=this.tokenizer.code(t,e))t=t.substring(r.raw.length),r.type?e.push(r):((o=e[e.length-1]).raw+="\n"+r.raw,o.text+="\n"+r.text);else if(r=this.tokenizer.fences(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.heading(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.nptable(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.hr(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.blockquote(t))t=t.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),e.push(r);else if(r=this.tokenizer.list(t)){for(t=t.substring(r.raw.length),a=r.items.length,i=0;i<a;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);e.push(r)}else if(r=this.tokenizer.html(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.def(t)))t=t.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.lheading(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.paragraph(t)))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.text(t,e))t=t.substring(r.raw.length),r.type?e.push(r):((o=e[e.length-1]).raw+="\n"+r.raw,o.text+="\n"+r.text);else if(t){var s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return e},n.inline=function(t){var e,n,r,i,a,o,s=t.length;for(e=0;e<s;e++)switch((o=t[e]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},i=o.header.length,n=0;n<i;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(i=o.cells.length,n=0;n<i;n++)for(a=o.cells[n],o.tokens.cells[n]=[],r=0;r<a.length;r++)o.tokens.cells[n][r]=[],this.inlineTokens(a[r],o.tokens.cells[n][r]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(i=o.items.length,n=0;n<i;n++)this.inline(o.items[n].tokens)}return t},n.inlineTokens=function(t,e,n,r){var i;void 0===e&&(e=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var a,o,s,u=t;if(this.tokens.links){var l=Object.keys(this.tokens.links);if(l.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(u));)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,a.index)+"["+F("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,a.index)+"["+F("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;t;)if(o||(s=""),o=!1,i=this.tokenizer.escape(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.tag(t,n,r))t=t.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,e.push(i);else if(i=this.tokenizer.link(t))t=t.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),e.push(i);else if(i=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),e.push(i);else if(i=this.tokenizer.strong(t,u,s))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.em(t,u,s))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.codespan(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.br(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.del(t))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.autolink(t,B))t=t.substring(i.raw.length),e.push(i);else if(n||!(i=this.tokenizer.url(t,B))){if(i=this.tokenizer.inlineText(t,r,j))t=t.substring(i.raw.length),s=i.raw.slice(-1),o=!0,e.push(i);else if(t){var c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else t=t.substring(i.raw.length),e.push(i);return e},(e=[{key:"rules",get:function(){return{block:L,inline:N}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}(),V=n.defaults,G=function(t,e,n){if(t){var r;try{r=decodeURIComponent(c(n)).replace(d,"").toLowerCase()}catch(i){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!h.test(n)&&(n=function(t,e){p[" "+t]||(p[" "+t]=g.test(t)?t+"/":y(t,"/",!0));var n=-1===(t=p[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(v,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(m,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(i){return null}return n},H=_,Y=function(){function t(t){this.options=t||V}var e=t.prototype;return e.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(t,r);null!=i&&i!==t&&(n=!0,t=i)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+H(r,!0)+'">'+(n?t:H(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:H(t,!0))+"</code></pre>\n"},e.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},e.html=function(t){return t},e.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},e.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},e.listitem=function(t){return"<li>"+t+"</li>\n"},e.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(t){return"<p>"+t+"</p>\n"},e.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},e.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},e.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},e.strong=function(t){return"<strong>"+t+"</strong>"},e.em=function(t){return"<em>"+t+"</em>"},e.codespan=function(t){return"<code>"+t+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(t){return"<del>"+t+"</del>"},e.link=function(t,e,n){if(null===(t=G(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+H(t)+'"';return e&&(r+=' title="'+e+'"'),r+">"+n+"</a>"},e.image=function(t,e,n){if(null===(t=G(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+(this.options.xhtml?"/>":">")},e.text=function(t){return t},t}(),z=function(){function t(){}var e=t.prototype;return e.strong=function(t){return t},e.em=function(t){return t},e.codespan=function(t){return t},e.del=function(t){return t},e.html=function(t){return t},e.text=function(t){return t},e.link=function(t,e,n){return""+n},e.image=function(t,e,n){return""+n},e.br=function(){return""},t}(),q=function(){function t(){this.seen={}}var e=t.prototype;return e.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(t,e){var n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do{n=t+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n},e.slug=function(t,e){void 0===e&&(e={});var n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)},t}(),X=n.defaults,K=b,W=function(){function t(t){this.options=t||X,this.options.renderer=this.options.renderer||new Y,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new z,this.slugger=new q}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var e=t.prototype;return e.parse=function(t,e){void 0===e&&(e=!0);var n,r,i,a,o,s,u,l,c,f,d,h,p,g,v,m,y,_,b="",E=t.length;for(n=0;n<E;n++)switch((f=t[n]).type){case"space":continue;case"hr":b+=this.renderer.hr();continue;case"heading":b+=this.renderer.heading(this.parseInline(f.tokens),f.depth,K(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":b+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(l="",u="",a=f.header.length,r=0;r<a;r++)u+=this.renderer.tablecell(this.parseInline(f.tokens.header[r]),{header:!0,align:f.align[r]});for(l+=this.renderer.tablerow(u),c="",a=f.cells.length,r=0;r<a;r++){for(u="",o=(s=f.tokens.cells[r]).length,i=0;i<o;i++)u+=this.renderer.tablecell(this.parseInline(s[i]),{header:!1,align:f.align[i]});c+=this.renderer.tablerow(u)}b+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(f.tokens),b+=this.renderer.blockquote(c);continue;case"list":for(d=f.ordered,h=f.start,p=f.loose,a=f.items.length,c="",r=0;r<a;r++)m=(v=f.items[r]).checked,y=v.task,g="",v.task&&(_=this.renderer.checkbox(m),p?v.tokens.length>0&&"text"===v.tokens[0].type?(v.tokens[0].text=_+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=_+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:_}):g+=_),g+=this.parse(v.tokens,p),c+=this.renderer.listitem(g,y,m);b+=this.renderer.list(c,d,h);continue;case"html":b+=this.renderer.html(f.text);continue;case"paragraph":b+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(c=f.tokens?this.parseInline(f.tokens):f.text;n+1<E&&"text"===t[n+1].type;)c+="\n"+((f=t[++n]).tokens?this.parseInline(f.tokens):f.text);b+=e?this.renderer.paragraph(c):c;continue;default:var T='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(T);throw new Error(T)}return b},e.parseInline=function(t,e){e=e||this.renderer;var n,r,i="",a=t.length;for(n=0;n<a;n++)switch((r=t[n]).type){case"escape":i+=e.text(r.text);break;case"html":i+=e.html(r.text);break;case"link":i+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":i+=e.image(r.href,r.title,r.text);break;case"strong":i+=e.strong(this.parseInline(r.tokens,e));break;case"em":i+=e.em(this.parseInline(r.tokens,e));break;case"codespan":i+=e.codespan(r.text);break;case"br":i+=e.br();break;case"del":i+=e.del(this.parseInline(r.tokens,e));break;case"text":i+=e.text(r.text);break;default:var o='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(o);throw new Error(o)}return i},t}(),Q=E,$=function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},Z=_,J=n.getDefaults,tt=n.changeDefaults,et=n.defaults;function nt(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),e=Q({},nt.defaults,e||{}),$(e),n){var r,i=e.highlight;try{r=U.lex(t,e)}catch(u){return n(u)}var a=function(t){var a;if(!t)try{a=W.parse(r,e)}catch(u){t=u}return e.highlight=i,t?n(t):n(null,a)};if(!i||i.length<3)return a();if(delete e.highlight,!r.length)return a();var o=0;return nt.walkTokens(r,(function(t){"code"===t.type&&(o++,setTimeout((function(){i(t.text,t.lang,(function(e,n){if(e)return a(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0==--o&&a()}))}),0))})),void(0===o&&a())}try{var s=U.lex(t,e);return e.walkTokens&&nt.walkTokens(s,e.walkTokens),W.parse(s,e)}catch(u){if(u.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+Z(u.message+"",!0)+"</pre>";throw u}}return nt.options=nt.setOptions=function(t){return Q(nt.defaults,t),tt(nt.defaults),nt},nt.getDefaults=J,nt.defaults=et,nt.use=function(t){var e=Q({},t);if(t.renderer&&function(){var n=nt.defaults.renderer||new Y,r=function(e){var r=n[e];n[e]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=t.renderer[e].apply(n,a);return!1===s&&(s=r.apply(n,a)),s}};for(var i in t.renderer)r(i);e.renderer=n}(),t.tokenizer&&function(){var n=nt.defaults.tokenizer||new C,r=function(e){var r=n[e];n[e]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=t.tokenizer[e].apply(n,a);return!1===s&&(s=r.apply(n,a)),s}};for(var i in t.tokenizer)r(i);e.tokenizer=n}(),t.walkTokens){var n=nt.defaults.walkTokens;e.walkTokens=function(e){t.walkTokens(e),n&&n(e)}}nt.setOptions(e)},nt.walkTokens=function(t,n){for(var r,i=e(t);!(r=i()).done;){var a=r.value;switch(n(a),a.type){case"table":for(var o,s=e(a.tokens.header);!(o=s()).done;)nt.walkTokens(o.value,n);for(var u,l=e(a.tokens.cells);!(u=l()).done;)for(var c,f=e(u.value);!(c=f()).done;)nt.walkTokens(c.value,n);break;case"list":nt.walkTokens(a.items,n);break;default:a.tokens&&nt.walkTokens(a.tokens,n)}}},nt.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Q({},nt.defaults,e||{}),$(e);try{var n=U.lexInline(t,e);return e.walkTokens&&nt.walkTokens(n,e.walkTokens),W.parseInline(n,e)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+Z(r.message+"",!0)+"</pre>";throw r}},nt.Parser=W,nt.parser=W.parse,nt.Renderer=Y,nt.TextRenderer=z,nt.Lexer=U,nt.lexer=U.lex,nt.Tokenizer=C,nt.Slugger=q,nt.parse=nt,nt}()},E1E9:function(t,e,n){"use strict";var r=n("4abu"),i=n("4abu").buildOptions,a=n("Y81X");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=o;var s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function u(t,e,n){return e&&(n.trimValues&&(e=e.trim()),e=c(e=n.tagValueProcessor(e,t),n.parseNodeValue,n.parseTrueNumberOnly)),e}function l(t,e){if(e.ignoreNameSpace){var n=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===n[0])return"";2===n.length&&(t=r+n[1])}return t}function c(t,e,n){var i;return e&&"string"==typeof t?(""===t.trim()||isNaN(t)?i="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?i=Number.parseInt(t,16):-1!==t.indexOf(".")?(i=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):i=Number.parseInt(t,10),n&&(i=String(i)===t?i:t)),i):r.isExist(t)?t:""}e.props=s;var f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function d(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");for(var n=r.getAllMatches(t,f),i=n.length,a={},o=0;o<i;o++){var s=l(n[o][1],e);s.length&&(void 0!==n[o][4]?(e.trimValues&&(n[o][4]=n[o][4].trim()),n[o][4]=e.attrValueProcessor(n[o][4],s),a[e.attributeNamePrefix+s]=c(n[o][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(a[e.attributeNamePrefix+s]=!0))}if(!Object.keys(a).length)return;if(e.attrNodeName){var u={};return u[e.attrNodeName]=a,u}return a}}function h(t,e){for(var n,r="",i=e;i<t.length;i++){var a=t[i];if(n)a===n&&(n="");else if('"'===a||"'"===a)n=a;else{if(">"===a)return{data:r,index:i};"\t"===a&&(a=" ")}r+=a}}function p(t,e,n,r){var i=t.indexOf(e,n);if(-1===i)throw new Error(r);return i+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/(\r\n)|\n/," "),e=i(e,o,s);for(var n=new a("!xml"),l=n,c="",f=0;f<t.length;f++)if("<"===t[f])if("/"===t[f+1]){var g=p(t,">",f,"Closing Tag is not closed."),v=t.substring(f+2,g).trim();if(e.ignoreNameSpace){var m=v.indexOf(":");-1!==m&&(v=v.substr(m+1))}l&&(l.val=l.val?r.getValue(l.val)+""+u(v,c,e):u(v,c,e)),e.stopNodes.length&&e.stopNodes.includes(l.tagname)&&(l.child=[],null==l.attrsMap&&(l.attrsMap={}),l.val=t.substr(l.startIndex+1,f-l.startIndex-1)),l=l.parent,c="",f=g}else if("?"===t[f+1])f=p(t,"?>",f,"Pi Tag is not closed.");else if("!--"===t.substr(f+1,3))f=p(t,"--\x3e",f,"Comment is not closed.");else if("!D"===t.substr(f+1,2)){var y=p(t,">",f,"DOCTYPE is not closed.");f=t.substring(f,y).indexOf("[")>=0?t.indexOf("]>",f)+1:y}else if("!["===t.substr(f+1,2)){var _=p(t,"]]>",f,"CDATA is not closed.")-2,b=t.substring(f+9,_);if(c&&(l.val=r.getValue(l.val)+""+u(l.tagname,c,e),c=""),e.cdataTagName){var E=new a(e.cdataTagName,l,b);l.addChild(E),l.val=r.getValue(l.val)+e.cdataPositionChar,b&&(E.val=b)}else l.val=(l.val||"")+(b||"");f=_+2}else{var T=h(t,f+1),S=T.data,w=T.index,A=S.indexOf(" "),x=S;if(-1!==A&&(x=S.substr(0,A).trimRight(),S=S.substr(A+1)),e.ignoreNameSpace){var C=x.indexOf(":");-1!==C&&(x=x.substr(C+1))}if(l&&c&&"!xml"!==l.tagname&&(l.val=r.getValue(l.val)+""+u(l.tagname,c,e)),S.length>0&&S.lastIndexOf("/")===S.length-1){"/"===x[x.length-1]?S=x=x.substr(0,x.length-1):S=S.substr(0,S.length-1);var D=new a(x,l,"");x!==S&&(D.attrsMap=d(S,e)),l.addChild(D)}else{var I=new a(x,l);e.stopNodes.length&&e.stopNodes.includes(I.tagname)&&(I.startIndex=w),x!==S&&(I.attrsMap=d(S,e)),l.addChild(I),l=I}c="",f=w}else c+=t[f];return n}},EVdn:function(t,e,n){var r;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var a=[],o=Object.getPrototypeOf,s=a.slice,u=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},l=a.push,c=a.indexOf,f={},d=f.toString,h=f.hasOwnProperty,p=h.toString,g=p.call(Object),v={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},_=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function E(t,e,n){var r,i,a=(n=n||_).createElement("script");if(a.text=t,e)for(r in b)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function T(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[d.call(t)]||"object":typeof t}var S=function t(e,n){return new t.fn.init(e,n)};function w(t){var e=!!t&&"length"in t&&t.length,n=T(t);return!m(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}S.fn=S.prototype={jquery:"3.5.1",constructor:S,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},S.extend=S.fn.extend=function(){var t,e,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||m(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&o!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[e],a=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,o[e]=S.extend(l,a,r)):void 0!==r&&(o[e]=r));return o},S.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=o(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){E(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(w(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?S.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,a=t.length,o=!n;i<a;i++)!e(t[i],i)!==o&&r.push(t[i]);return r},map:function(t,e,n){var r,i,a=0,o=[];if(w(t))for(r=t.length;a<r;a++)null!=(i=e(t[a],a,n))&&o.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&o.push(i);return u(o)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=a[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){f["[object "+e+"]"]=e.toLowerCase()}));var A=function(t){var e,n,r,i,a,o,s,u,l,c,f,d,h,p,g,v,m,y,_,b="sizzle"+1*new Date,E=t.document,T=0,S=0,w=ut(),A=ut(),x=ut(),C=ut(),D=function(t,e){return t===e&&(f=!0),0},I={}.hasOwnProperty,R=[],k=R.pop,O=R.push,P=R.push,M=R.slice,L=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+F+"*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",U=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),H=new RegExp("^"+F+"*,"+F+"*"),Y=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp(F+"|>"),q=new RegExp(U),X=new RegExp("^"+j+"$"),K={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},W=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=function(){d()},ot=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(R=M.call(E.childNodes),E.childNodes)}catch(At){P={apply:R.length?function(t,e){O.apply(t,M.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var a,s,l,c,f,p,m,y=e&&e.ownerDocument,E=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==E&&9!==E&&11!==E)return r;if(!i&&(d(e),e=e||h,g)){if(11!==E&&(f=J.exec(t)))if(a=f[1]){if(9===E){if(!(l=e.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(y&&(l=y.getElementById(a))&&_(e,l)&&l.id===a)return r.push(l),r}else{if(f[2])return P.apply(r,e.getElementsByTagName(t)),r;if((a=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(r,e.getElementsByClassName(a)),r}if(n.qsa&&!C[t+" "]&&(!v||!v.test(t))&&(1!==E||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===E&&(z.test(t)||Y.test(t))){for((y=tt.test(t)&&mt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=b)),s=(p=o(t)).length;s--;)p[s]=(c?"#"+c:":scope")+" "+_t(p[s]);m=p.join(",")}try{return P.apply(r,y.querySelectorAll(m)),r}catch(T){C(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return u(t.replace(G,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function lt(t){return t[b]=!0,t}function ct(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(At){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return lt((function(e){return e=+e,lt((function(n,r){for(var i,a=t([],n.length,e),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},a=st.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!W.test(t.namespaceURI||e&&e.nodeName||"HTML")},d=st.setDocument=function(t){var e,i,o=t?t.ownerDocument||t:E;return o!=h&&9===o.nodeType&&o.documentElement?(p=(h=o).documentElement,g=!a(h),E!=h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",at,!1):i.attachEvent&&i.attachEvent("onunload",at)),n.scope=ct((function(t){return p.appendChild(t).appendChild(h.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(h.getElementsByClassName),n.getById=ct((function(t){return p.appendChild(t).id=b,!h.getElementsByName||!h.getElementsByName(b).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(i=e.getElementsByName(t),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(n.qsa=Z.test(h.querySelectorAll))&&(ct((function(t){var e;p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+F+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",U)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=Z.test(p.compareDocumentPosition),_=e||Z.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},D=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==h||t.ownerDocument==E&&_(E,t)?-1:e==h||e.ownerDocument==E&&_(E,e)?1:c?L(c,t)-L(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,a=e.parentNode,o=[t],s=[e];if(!i||!a)return t==h?-1:e==h?1:i?-1:a?1:c?L(c,t)-L(c,e):0;if(i===a)return dt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?dt(o[r],s[r]):o[r]==E?-1:s[r]==E?1:0},h):h},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!C[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(At){C(e,!0)}return st(e,h,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=h&&d(t),_(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=h&&d(t);var i=r.attrHandle[e.toLowerCase()],a=i&&I.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==a?a:n.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,a=0;if(f=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(D),f){for(;e=t[a++];)e===t[a]&&(i=r.push(a));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=st.selectors={cacheLength:50,createPseudo:lt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=w[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&w(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,f,d,h,p,g=a!==o?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!u&&!s,_=!1;if(v){if(a){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?v.firstChild:v.lastChild],o&&y){for(_=(h=(l=(c=(f=(d=v)[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]||[])[0]===T&&l[1])&&l[2],d=h&&v.childNodes[h];d=++h&&d&&d[g]||(_=h=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[T,h,_];break}}else if(y&&(_=h=(l=(c=(f=(d=e)[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]||[])[0]===T&&l[1]),!1===_)for(;(d=++h&&d&&d[g]||(_=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++_||(y&&((c=(f=d[b]||(d[b]={}))[d.uniqueID]||(f[d.uniqueID]={}))[t]=[T,_]),d!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var r,a=i(t,e),o=a.length;o--;)t[r=L(t,a[o])]=!(n[r]=a[o])})):function(t){return i(t,0,n)}):i}},pseudos:{not:lt((function(t){var e=[],n=[],r=s(t.replace(G,"$1"));return r[b]?lt((function(t,e,n,i){for(var a,o=r(t,null,i,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))})):function(t,i,a){return e[0]=t,r(e,null,a,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return st(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}})),lang:lt((function(t){return X.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,n){return[n<0?n+e:n]})),even:vt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:vt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:vt((function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:vt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function yt(){}function _t(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function bt(t,e,n){var r=e.dir,i=e.next,a=i||r,o=n&&"parentNode"===a,s=S++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||o)return t(e,n,i);return!1}:function(e,n,u){var l,c,f,d=[T,s];if(u){for(;e=e[r];)if((1===e.nodeType||o)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||o)if(c=(f=e[b]||(e[b]={}))[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[a])&&l[0]===T&&l[1]===s)return d[2]=l[2];if(c[a]=d,d[2]=t(e,n,u))return!0}return!1}}function Et(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Tt(t,e,n,r,i){for(var a,o=[],s=0,u=t.length,l=null!=e;s<u;s++)(a=t[s])&&(n&&!n(a,r,i)||(o.push(a),l&&e.push(s)));return o}function St(t,e,n,r,i,a){return r&&!r[b]&&(r=St(r)),i&&!i[b]&&(i=St(i,a)),lt((function(a,o,s,u){var l,c,f,d=[],h=[],p=o.length,g=a||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!a&&e?g:Tt(g,d,t,s,u),m=n?i||(a?t:p||r)?[]:o:v;if(n&&n(v,m,s,u),r)for(l=Tt(m,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(m[h[c]]=!(v[h[c]]=f));if(a){if(i||t){if(i){for(l=[],c=m.length;c--;)(f=m[c])&&l.push(v[c]=f);i(null,m=[],l,u)}for(c=m.length;c--;)(f=m[c])&&(l=i?L(a,f):d[c])>-1&&(a[l]=!(o[l]=f))}}else m=Tt(m===o?m.splice(p,m.length):m),i?i(null,o,m,u):P.apply(o,m)}))}function wt(t){for(var e,n,i,a=t.length,o=r.relative[t[0].type],s=o||r.relative[" "],u=o?1:0,c=bt((function(t){return t===e}),s,!0),f=bt((function(t){return L(e,t)>-1}),s,!0),d=[function(t,n,r){var i=!o&&(r||n!==l)||((e=n).nodeType?c(t,n,r):f(t,n,r));return e=null,i}];u<a;u++)if(n=r.relative[t[u].type])d=[bt(Et(d),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[b]){for(i=++u;i<a&&!r.relative[t[i].type];i++);return St(u>1&&Et(d),u>1&&_t(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&wt(t.slice(u,i)),i<a&&wt(t=t.slice(i)),i<a&&_t(t))}d.push(n)}return Et(d)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,o=st.tokenize=function(t,e){var n,i,a,o,s,u,l,c=A[t+" "];if(c)return e?0:c.slice(0);for(s=t,u=[],l=r.preFilter;s;){for(o in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(a=[])),n=!1,(i=Y.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(G," ")}),s=s.slice(n.length)),r.filter)!(i=K[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):A(t,u).slice(0)},s=st.compile=function(t,e){var n,i=[],a=[],s=x[t+" "];if(!s){for(e||(e=o(t)),n=e.length;n--;)(s=wt(e[n]))[b]?i.push(s):a.push(s);(s=x(t,function(t,e){var n=e.length>0,i=t.length>0,a=function(a,o,s,u,c){var f,p,v,m=0,y="0",_=a&&[],b=[],E=l,S=a||i&&r.find.TAG("*",c),w=T+=null==E?1:Math.random()||.1,A=S.length;for(c&&(l=o==h||o||c);y!==A&&null!=(f=S[y]);y++){if(i&&f){for(p=0,o||f.ownerDocument==h||(d(f),s=!g);v=t[p++];)if(v(f,o||h,s)){u.push(f);break}c&&(T=w)}n&&((f=!v&&f)&&m--,a&&_.push(f))}if(m+=y,n&&y!==m){for(p=0;v=e[p++];)v(_,b,o,s);if(a){if(m>0)for(;y--;)_[y]||b[y]||(b[y]=k.call(u));b=Tt(b)}P.apply(u,b),c&&!a&&b.length>0&&m+e.length>1&&st.uniqueSort(u)}return c&&(T=w,l=E),_};return n?lt(a):a}(a,i))).selector=t}return s},u=st.select=function(t,e,n,i){var a,u,l,c,f,d="function"==typeof t&&t,h=!i&&o(t=d.selector||t);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(a=K.needsContext.test(t)?0:u.length;a--&&!r.relative[c=(l=u[a]).type];)if((f=r.find[c])&&(i=f(l.matches[0].replace(et,nt),tt.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(a,1),!(t=i.length&&_t(u)))return P.apply(n,i),n;break}}return(d||s(t,h))(i,e,!g,n,!e||tt.test(t)&&mt(e.parentNode)||e),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,d(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ft("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ft("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ft(N,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),st}(n);S.find=A,(S.expr=A.selectors)[":"]=S.expr.pseudos,S.uniqueSort=S.unique=A.uniqueSort,S.text=A.getText,S.isXMLDoc=A.isXML,S.contains=A.contains,S.escapeSelector=A.escape;var x=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&S(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=S.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(t,e,n){return m(e)?S.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return c.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?S.find.matchesSelector(r,t)?[r]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<r;e++)if(S.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)S.find(t,i[e],n);return r>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&D.test(t)?S(t):t||[],!1).length}});var O,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||O,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:P.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(S.merge(this,S.parseHTML(r[1],(e=e instanceof S?e[0]:e)&&e.nodeType?e.ownerDocument||e:_,!0)),R.test(r[1])&&S.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,O=S(_);var M=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,a=[],o="string"!=typeof t&&S(t);if(!D.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?c.call(S(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return x(t,"parentNode")},parentsUntil:function(t,e,n){return x(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return x(t,"nextSibling")},prevAll:function(t){return x(t,"previousSibling")},nextUntil:function(t,e,n){return x(t,"nextSibling",n)},prevUntil:function(t,e,n){return x(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,r){var i=S.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=S.filter(r,i)),this.length>1&&(L[t]||S.uniqueSort(i),M.test(t)&&i.reverse()),this.pushStack(i)}}));var F=/[^\x20\t\r\n\f]+/g;function j(t){return t}function B(t){throw t}function U(t,e,n,r){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(n):t&&m(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(F)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,r,i,a=[],o=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},l={add:function(){return a&&(n&&!e&&(s=a.length-1,o.push(n)),function e(n){S.each(n,(function(n,r){m(r)?t.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==T(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(t){return t?S.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||e||(a=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,r){var i=m(t[r[4]])&&t[r[4]];a[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,r,i){var a=0;function o(t,e,r,i){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(t<a)){if((n=r.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");m(l=n&&("object"==typeof n||"function"==typeof n)&&n.then)?i?l.call(n,o(a,e,j,i),o(a,e,B,i)):(a++,l.call(n,o(a,e,j,i),o(a,e,B,i),o(a,e,j,e.notifyWith))):(r!==j&&(s=void 0,u=[n]),(i||e.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,c.stackTrace),t+1>=a&&(r!==B&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),n.setTimeout(c))}}return S.Deferred((function(n){e[0][3].add(o(0,n,m(i)?i:j,n.notifyWith)),e[1][3].add(o(0,n,m(t)?t:j)),e[2][3].add(o(0,n,m(r)?r:B))})).promise()},promise:function(t){return null!=t?S.extend(t,i):i}},a={};return S.each(e,(function(t,n){var o=n[2],s=n[5];i[n[1]]=o.add,s&&o.add((function(){r=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=o.fireWith})),i.promise(a),t&&t.call(a,a),a},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),a=S.Deferred(),o=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(U(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||m(i[n]&&i[n].then)))return a.then();for(;n--;)U(i[n],o(n),a.reject);return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&V.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){n.setTimeout((function(){throw t}))};var G=S.Deferred();function H(){_.removeEventListener("DOMContentLoaded",H),n.removeEventListener("load",H),S.ready()}S.fn.ready=function(t){return G.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||G.resolveWith(_,[S]))}}),S.ready.then=G.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?n.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",H),n.addEventListener("load",H));var Y=function t(e,n,r,i,a,o,s){var u=0,l=e.length,c=null==r;if("object"===T(r))for(u in a=!0,r)t(e,n,u,r[u],!0,o,s);else if(void 0!==i&&(a=!0,m(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(t,e,n){return c.call(S(t),n)})),n))for(;u<l;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return a?e:c?n.call(e):l?n(e[0],r):o},z=/^-ms-/,q=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function K(t){return t.replace(z,"ms-").replace(q,X)}var W=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=S.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},W(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||S.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var $=new Q,Z=new Q,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(i){}Z.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return Z.hasData(t)||$.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===t){if(this.length&&(i=Z.get(a),1===a.nodeType&&!$.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=K(r.slice(5)),et(a,r,i[r]));$.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){Z.set(this,t)})):Y(this,(function(e){var n;if(a&&void 0===e)return void 0!==(n=Z.get(a,t))||void 0!==(n=et(a,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var r;if(t)return r=$.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=$.access(t,e,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=S.queue(t,e=e||"fx"),r=n.length,i=n.shift(),a=S._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete a.stop,i.call(t,(function(){S.dequeue(t,e)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:S.Callbacks("once memory").add((function(){$.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=S.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=$.get(a[o],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],at=_.documentElement,ot=function(t){return S.contains(t.ownerDocument,t)},st={composed:!0};at.getRootNode&&(ot=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===S.css(t,"display")};function lt(t,e,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return S.css(t,e,"")},u=s(),l=n&&n[3]||(S.cssNumber[e]?"":"px"),c=t.nodeType&&(S.cssNumber[e]||"px"!==l&&+u)&&rt.exec(S.css(t,e));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;o--;)S.style(t,e,c+l),(1-a)*(1-(a=s()/u||.5))<=0&&(o=0),c/=a;S.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ct={};function ft(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=S.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function dt(t,e){for(var n,r,i=[],a=0,o=t.length;a<o;a++)(r=t[a]).style&&(n=r.style.display,e?("none"===n&&(i[a]=$.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&ut(r)&&(i[a]=ft(r))):"none"!==n&&(i[a]="none",$.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(t[a].style.display=i[a]);return t}S.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ut(this)?S(this).show():S(this).hide()}))}});var ht,pt,gt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i;ht=_.createDocumentFragment().appendChild(_.createElement("div")),(pt=_.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),ht.appendChild(pt),v.checkClone=ht.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ht.cloneNode(!0).lastChild.defaultValue,ht.innerHTML="<option></option>",v.option=!!ht.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?S.merge([t],n):n}function bt(t,e){for(var n=0,r=t.length;n<r;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,v.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var Et=/<|&#?\w+;/;function Tt(t,e,n,r,i){for(var a,o,s,u,l,c,f=e.createDocumentFragment(),d=[],h=0,p=t.length;h<p;h++)if((a=t[h])||0===a)if("object"===T(a))S.merge(d,a.nodeType?[a]:a);else if(Et.test(a)){for(o=o||f.appendChild(e.createElement("div")),s=(vt.exec(a)||["",""])[1].toLowerCase(),o.innerHTML=(u=yt[s]||yt._default)[1]+S.htmlPrefilter(a)+u[2],c=u[0];c--;)o=o.lastChild;S.merge(d,o.childNodes),(o=f.firstChild).textContent=""}else d.push(e.createTextNode(a));for(f.textContent="",h=0;a=d[h++];)if(r&&S.inArray(a,r)>-1)i&&i.push(a);else if(l=ot(a),o=_t(f.appendChild(a),"script"),l&&bt(o),n)for(c=0;a=o[c++];)mt.test(a.type||"")&&n.push(a);return f}var St=/^key/,wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,At=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Ct(){return!1}function Dt(t,e){return t===function(){try{return _.activeElement}catch(t){}}()==("focus"===e)}function It(t,e,n,r,i,a){var o,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)It(t,s,n,r,e[s],a);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===a&&(o=i,(i=function(t){return S().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=S.guid++)),t.each((function(){S.event.add(this,e,i,r,n)}))}function Rt(t,e,n){n?($.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var r,i,a=$.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=s.call(arguments),$.set(this,e,a),r=n(this,e),this[e](),a!==(i=$.get(this,e))||r?$.set(this,e,!1):i={},a!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else a.length&&($.set(this,e,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===$.get(t,e)&&S.event.add(t,e,xt)}S.event={global:{},add:function(t,e,n,r,i){var a,o,s,u,l,c,f,d,h,p,g,v=$.get(t);if(W(t))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&S.find.matchesSelector(at,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(o=v.handle)||(o=v.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(F)||[""]).length;l--;)h=g=(s=At.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=S.event.special[h]||{},f=S.event.special[h=(i?f.delegateType:f.bindType)||h]||{},c=S.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:p.join(".")},a),(d=u[h])||((d=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,o)||t.addEventListener&&t.addEventListener(h,o)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[h]=!0)},remove:function(t,e,n,r,i){var a,o,s,u,l,c,f,d,h,p,g,v=$.hasData(t)&&$.get(t);if(v&&(u=v.events)){for(l=(e=(e||"").match(F)||[""]).length;l--;)if(h=g=(s=At.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=S.event.special[h]||{},d=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(t,c));o&&!d.length&&(f.teardown&&!1!==f.teardown.call(t,p,v.handle)||S.removeEvent(t,h,v.handle),delete u[h])}else for(h in u)S.event.remove(t,h+e[l],n,r,!0);S.isEmptyObject(u)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,a,o,s=new Array(arguments.length),u=S.event.fix(t),l=($.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(o=S.event.handlers.call(this,u,l),e=0;(i=o[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,void 0!==(r=((S.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,a,o,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(a=[],o={},n=0;n<u;n++)void 0===o[i=(r=e[n]).selector+" "]&&(o[i]=r.needsContext?S(i,this).index(l)>-1:S.find(i,this,null,[l]).length),o[i]&&a.push(r);a.length&&s.push({elem:l,handlers:a})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Rt(e,"click",xt),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&I(e,"input")&&$.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0}).prototype={constructor:S.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&St.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&wt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(t,e){S.event.special[t]={setup:function(){return Rt(this,t,Dt),!1},trigger:function(){return Rt(this,t),!0},delegateType:e}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,a=t.handleObj;return i&&(i===r||S.contains(r,i))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,r){return It(this,t,e,n,r)},one:function(t,e,n,r){return It(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each((function(){S.event.remove(this,t,n,e)}))}});var kt=/<script|<style|<link/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,i,a,o,s;if(1===e.nodeType){if($.hasData(t)&&(s=$.get(t).events))for(i in $.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(e,i,s[i][n]);Z.hasData(t)&&(a=Z.access(t),o=S.extend({},a),Z.set(e,o))}}function jt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Bt(t,e,n,r){e=u(e);var i,a,o,s,l,c,f=0,d=t.length,h=d-1,p=e[0],g=m(p);if(g||d>1&&"string"==typeof p&&!v.checkClone&&Ot.test(p))return t.each((function(i){var a=t.eq(i);g&&(e[0]=p.call(this,i,a.html())),Bt(a,e,n,r)}));if(d&&(a=(i=Tt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=S.map(_t(i,"script"),Lt)).length;f<d;f++)l=i,f!==h&&(l=S.clone(l,!0,!0),s&&S.merge(o,_t(l,"script"))),n.call(t[f],l,f);if(s)for(c=o[o.length-1].ownerDocument,S.map(o,Nt),f=0;f<s;f++)mt.test((l=o[f]).type||"")&&!$.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):E(l.textContent.replace(Pt,""),l,c))}return t}function Ut(t,e,n){for(var r,i=e?S.filter(e,t):t,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||S.cleanData(_t(r)),r.parentNode&&(n&&ot(r)&&bt(_t(r,"script")),r.parentNode.removeChild(r));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,a,o,s=t.cloneNode(!0),u=ot(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(o=_t(s),r=0,i=(a=_t(t)).length;r<i;r++)jt(a[r],o[r]);if(e)if(n)for(a=a||_t(t),o=o||_t(s),r=0,i=a.length;r<i;r++)Ft(a[r],o[r]);else Ft(t,s);return(o=_t(s,"script")).length>0&&bt(o,!u&&_t(t,"script")),s},cleanData:function(t){for(var e,n,r,i=S.event.special,a=0;void 0!==(n=t[a]);a++)if(W(n)){if(e=n[$.expando]){if(e.events)for(r in e.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,e.handle);n[$.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Ut(this,t,!0)},remove:function(t){return Ut(this,t)},text:function(t){return Y(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Bt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)}))},prepend:function(){return Bt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return Y(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!yt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Bt(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(_t(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,r=[],i=S(t),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),S(i[o])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Vt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ht=function(t,e,n){var r,i,a={};for(i in e)a[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=a[i];return r},Yt=new RegExp(it.join("|"),"i");function zt(t,e,n){var r,i,a,o,s=t.style;return(n=n||Gt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||ot(t)||(o=S.style(t,e)),!v.pixelBoxStyles()&&Vt.test(o)&&Yt.test(e)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(c);var t=n.getComputedStyle(c);r="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",o=36===e(t.right),i=36===e(t.width),c.style.position="absolute",a=12===e(c.offsetWidth/3),at.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var r,i,a,o,s,u,l=_.createElement("div"),c=_.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,e,r,i;return null==s&&(t=_.createElement("table"),e=_.createElement("tr"),r=_.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",r.style.height="9px",at.appendChild(t).appendChild(e).appendChild(r),i=n.getComputedStyle(e),s=parseInt(i.height)>3,at.removeChild(t)),s}}))}();var Xt=["Webkit","Moz","ms"],Kt=_.createElement("div").style,Wt={};function Qt(t){return S.cssProps[t]||Wt[t]||(t in Kt?t:Wt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in Kt)return t}(t)||t)}var $t=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,n){var r=rt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ne(t,e,n,r,i,a){var o="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=S.css(t,n+it[o],!0,i)),r?("content"===n&&(u-=S.css(t,"padding"+it[o],!0,i)),"margin"!==n&&(u-=S.css(t,"border"+it[o]+"Width",!0,i))):(u+=S.css(t,"padding"+it[o],!0,i),"padding"!==n?u+=S.css(t,"border"+it[o]+"Width",!0,i):s+=S.css(t,"border"+it[o]+"Width",!0,i));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-u-s-.5))||0),u}function re(t,e,n){var r=Gt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,r),a=i,o=zt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&I(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===S.css(t,"boxSizing",!1,r),(a=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+ne(t,e,n||(i?"border":"content"),a,r,o)+"px"}function ie(t,e,n,r,i){return new ie.prototype.init(t,e,n,r,i)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,a,o,s=K(e),u=Zt.test(e),l=t.style;if(u||(e=Qt(s)),o=S.cssHooks[e]||S.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(t,!1,r))?i:l[e];"string"==(a=typeof n)&&(i=rt.exec(n))&&i[1]&&(n=lt(t,e,i),a="number"),null!=n&&n==n&&("number"!==a||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,a,o,s=K(e);return Zt.test(e)||(e=Qt(s)),(o=S.cssHooks[e]||S.cssHooks[s])&&"get"in o&&(i=o.get(t,!0,n)),void 0===i&&(i=zt(t,e,r)),"normal"===i&&e in te&&(i=te[e]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,r){if(n)return!$t.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?re(t,e,r):Ht(t,Jt,(function(){return re(t,e,r)}))},set:function(t,n,r){var i,a=Gt(t),o=!v.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===S.css(t,"boxSizing",!1,a),u=r?ne(t,e,r,s,a):0;return s&&o&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-ne(t,e,"border",!1,a)-.5)),u&&(i=rt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),ee(0,n,u)}}})),S.cssHooks.marginLeft=qt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(zt(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+it[r]+e]=a[r]||a[r-2]||a[0];return i}},"margin"!==t&&(S.cssHooks[t+e].set=ee)})),S.fn.extend({css:function(t,e){return Y(this,(function(t,e,n){var r,i,a={},o=0;if(Array.isArray(e)){for(r=Gt(t),i=e.length;o<i;o++)a[e[o]]=S.css(t,e[o],!1,r);return a}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=ie,(ie.prototype={constructor:ie,init:function(t,e,n,r,i,a){this.elem=t,this.prop=n,this.easing=i||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.pos=e=this.options.duration?S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}}).init.prototype=ie.prototype,(ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[Qt(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(S.fx=ie.prototype.init).step={};var ae,oe,se=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function le(){oe&&(!1===_.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(le):n.setTimeout(le,S.fx.interval),S.fx.tick())}function ce(){return n.setTimeout((function(){ae=void 0})),ae=Date.now()}function fe(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=it[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function de(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,e,t))return r}function he(t,e,n){var r,i,a=0,o=he.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=ae||ce(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),a=0,o=l.tweens.length;a<o;a++)l.tweens[a].run(r);return s.notifyWith(t,[l,r,n]),r<1&&o?n:(o||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:ae||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var r=S.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,r,i,a,o;for(n in t)if(i=e[r=K(n)],a=t[n],Array.isArray(a)&&(i=a[1],a=t[n]=a[0]),n!==r&&(t[r]=a,delete t[n]),(o=S.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete t[r],a)n in t||(t[n]=a[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);a<o;a++)if(r=he.prefilters[a].call(l,t,c,l.opts))return m(r.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,de,l),m(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)(he.tweeners[n=t[r]]=he.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,a,o,s,u,l,c,f="width"in e||"height"in e,d=this,h={},p=t.style,g=t.nodeType&&ut(t),v=$.get(t,"fxshow");for(r in n.queue||(null==(o=S._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,S.queue(t,"fx").length||o.empty.fire()}))}))),e)if(se.test(i=e[r])){if(delete e[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}h[r]=v&&v[r]||S.style(t,r)}if((u=!S.isEmptyObject(e))||!S.isEmptyObject(h))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=$.get(t,"display")),"none"===(c=S.css(t,"display"))&&(l?c=l:(dt([t],!0),l=t.style.display||l,c=S.css(t,"display"),dt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(t,"float")&&(u||(d.done((function(){p.display=l})),null==l&&(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(v?"hidden"in v&&(g=v.hidden):v=$.access(t,"fxshow",{display:l}),a&&(v.hidden=!g),g&&dt([t],!0),d.done((function(){for(r in g||dt([t]),$.remove(t,"fxshow"),h)S.style(t,r,h[r])}))),u=de(g?v[r]:0,r,d),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in S.fx.speeds?S.fx.speeds[r.duration]:S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),a=S.speed(e,n,r),o=function(){var e=he(this,S.extend({},t),a);(i||$.get(this,"finish"))&&e.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",a=S.timers,o=$.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&ue.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=t&&a[i].queue!==t||(a[i].anim.stop(n),e=!1,a.splice(i,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=$.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],a=S.timers,o=r?r.length:0;for(n.finish=!0,S.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(fe(e,!0),t,r,i)}})),S.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(ae=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),ae=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){oe||(oe=!0,le())},S.fx.stop=function(){oe=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,this.queue(e=e||"fx",(function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}}))},function(){var t=_.createElement("input"),e=_.createElement("select").appendChild(_.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=_.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var pe,ge=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return Y(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?S.prop(t,e,n):(1===a&&S.isXMLDoc(t)||(i=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&I(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ge[e]||S.find.attr;ge[e]=function(t,e,r){var i,a,o=e.toLowerCase();return r||(a=ge[o],ge[o]=i,i=null!=n(t,e,r)?o:null,ge[o]=a),i}}));var ve=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ye(t){return(t.match(F)||[]).join(" ")}function _e(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}S.fn.extend({prop:function(t,e){return Y(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(t)||(i=S.propHooks[e=S.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(t){return null},set:function(t){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,r,i,a,o,s,u=0;if(m(t))return this.each((function(e){S(this).addClass(t.call(this,e,_e(this)))}));if((e=be(t)).length)for(;n=this[u++];)if(i=_e(n),r=1===n.nodeType&&" "+ye(i)+" "){for(o=0;a=e[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=ye(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,a,o,s,u=0;if(m(t))return this.each((function(e){S(this).removeClass(t.call(this,e,_e(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[u++];)if(i=_e(n),r=1===n.nodeType&&" "+ye(i)+" "){for(o=0;a=e[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=ye(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,_e(this),e),e)})):this.each((function(){var e,i,a,o;if(r)for(i=0,a=S(this),o=be(t);e=o[i++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=_e(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ye(_e(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ee=/\r/g;S.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=m(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,S(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ee,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:ye(S.text(t))}},select:{get:function(t){var e,n,r,i=t.options,a=t.selectedIndex,o="select-one"===t.type,s=o?null:[],u=o?a+1:i.length;for(r=a<0?u:o?a:0;r<u;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!I(n.parentNode,"optgroup"))){if(e=S(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,a=S.makeArray(e),o=i.length;o--;)((r=i[o]).selected=S.inArray(S.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},v.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in n;var Te=/^(?:focusinfocus|focusoutblur)$/,Se=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,r,i){var a,o,s,u,l,c,f,d,p=[r||_],g=h.call(t,"type")?t.type:t,v=h.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||_,3!==r.nodeType&&8!==r.nodeType&&!Te.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[S.expando]?t:new S.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:S.makeArray(e,[t]),f=S.event.special[g]||{},i||!f.trigger||!1!==f.trigger.apply(r,e))){if(!i&&!f.noBubble&&!y(r)){for(Te.test((u=f.delegateType||g)+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(r.ownerDocument||_)&&p.push(s.defaultView||s.parentWindow||n)}for(a=0;(o=p[a++])&&!t.isPropagationStopped();)d=o,t.type=a>1?u:f.bindType||g,(c=($.get(o,"events")||Object.create(null))[t.type]&&$.get(o,"handle"))&&c.apply(o,e),(c=l&&o[l])&&c.apply&&W(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),e)||!W(r)||l&&m(r[g])&&!y(r)&&((s=r[l])&&(r[l]=null),S.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,Se),r[g](),t.isPropagationStopped()&&d.removeEventListener(g,Se),S.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(t,e,n){var r=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(r,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){S.event.simulate(e,t.target,S.event.fix(t))};S.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=$.access(r,e);i||r.addEventListener(t,n,!0),$.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=$.access(r,e)-1;i?$.access(r,e,i):(r.removeEventListener(t,n,!0),$.remove(r,e))}}}));var we=n.location,Ae={guid:Date.now()},xe=/\?/;S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(r){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Ce=/\[\]$/,De=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function ke(t,e,n,r){var i;if(Array.isArray(e))S.each(e,(function(e,i){n||Ce.test(t)?r(t,i):ke(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==T(e))r(t,e);else for(i in e)ke(t+"["+i+"]",e[i],n,r)}S.param=function(t,e){var n,r=[],i=function(t,e){var n=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){i(this.name,this.value)}));else for(n in t)ke(n,t[n],e,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Re.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(De,"\r\n")}})):{name:e.name,value:n.replace(De,"\r\n")}})).get()}});var Oe=/%20/g,Pe=/#.*$/,Me=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,Fe=/^\/\//,je={},Be={},Ue="*/".concat("*"),Ve=_.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,a=e.toLowerCase().match(F)||[];if(m(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function He(t,e,n,r){var i={},a=t===Be;function o(s){var u;return i[s]=!0,S.each(t[s]||[],(function(t,s){var l=s(e,n,r);return"string"!=typeof l||a||i[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),u}return o(e.dataTypes[0])||!i["*"]&&o("*")}function Ye(t,e){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&S.extend(!0,t,r),t}Ve.href=we.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ye(Ye(t,S.ajaxSettings),e):Ye(S.ajaxSettings,t)},ajaxPrefilter:Ge(je),ajaxTransport:Ge(Be),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var r,i,a,o,s,u,l,c,f,d,h=S.ajaxSetup({},e=e||{}),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?S(p):S.event,v=S.Deferred(),m=S.Callbacks("once memory"),y=h.statusCode||{},b={},E={},T="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Le.exec(a);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(t,e){return null==l&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)w.always(t[w.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||T;return r&&r.abort(e),A(0,e),this}};if(v.promise(w),h.url=((t||h.url||we.href)+"").replace(Fe,we.protocol+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(F)||[""],null==h.crossDomain){u=_.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Ve.protocol+"//"+Ve.host!=u.protocol+"//"+u.host}catch(x){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=S.param(h.data,h.traditional)),He(je,h,e,w),l)return w;for(f in(c=S.event&&h.global)&&0==S.active++&&S.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ne.test(h.type),i=h.url.replace(Pe,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Oe,"+")):(d=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(xe.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Me,"$1"),d=(xe.test(i)?"&":"?")+"_="+Ae.guid+++d),h.url=i+d),h.ifModified&&(S.lastModified[i]&&w.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&w.setRequestHeader("If-None-Match",S.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ue+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(p,w,h)||l))return w.abort();if(T="abort",m.add(h.complete),w.done(h.success),w.fail(h.error),r=He(Be,h,e,w)){if(w.readyState=1,c&&g.trigger("ajaxSend",[w,h]),l)return w;h.async&&h.timeout>0&&(s=n.setTimeout((function(){w.abort("timeout")}),h.timeout));try{l=!1,r.send(b,A)}catch(x){if(l)throw x;A(-1,x)}}else A(-1,"No Transport");function A(t,e,o,u){var f,d,_,b,E,T=e;l||(l=!0,s&&n.clearTimeout(s),r=void 0,a=u||"",w.readyState=t>0?4:0,f=t>=200&&t<300||304===t,o&&(b=function(t,e,n){for(var r,i,a,o,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==u[0]&&u.unshift(a),n[a]}(h,w,o)),!f&&S.inArray("script",h.dataTypes)>-1&&(h.converters["text script"]=function(){}),b=function(t,e,n,r){var i,a,o,s,u,l={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(o=l[u+" "+a]||l["* "+a]))for(i in l)if((s=i.split(" "))[1]===a&&(o=l[u+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[i]:!0!==l[i]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(x){return{state:"parsererror",error:o?x:"No conversion from "+u+" to "+a}}}return{state:"success",data:e}}(h,b,w,f),f?(h.ifModified&&((E=w.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=E),(E=w.getResponseHeader("etag"))&&(S.etag[i]=E)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=b.state,d=b.data,f=!(_=b.error))):(_=T,!t&&T||(T="error",t<0&&(t=0))),w.status=t,w.statusText=(e||T)+"",f?v.resolveWith(p,[d,T,w]):v.rejectWith(p,[w,T,_]),w.statusCode(y),y=void 0,c&&g.trigger(f?"ajaxSuccess":"ajaxError",[w,h,f?d:_]),m.fireWith(p,[w,T]),c&&(g.trigger("ajaxComplete",[w,h]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:i,data:n,success:r},S.isPlainObject(t)&&t))}})),S.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},qe=S.ajaxSettings.xhr();v.cors=!!qe&&"withCredentials"in qe,v.ajax=qe=!!qe,S.ajaxTransport((function(t){var e,r;if(v.cors||qe&&!t.crossDomain)return{send:function(i,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(e=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(ze[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),r=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){e&&r()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(e)throw u}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),_.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Xe,Ke=[],We=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||S.expando+"_"+Ae.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,r){var i,a,o,s=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(xe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=n[i],n[i]=function(){o=arguments},r.always((function(){void 0===a?S(n).removeProp(i):n[i]=a,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(i)),o&&m(a)&&a(o[0]),o=a=void 0})),"script"})),v.createHTMLDocument=((Xe=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,e.head.appendChild(r)):e=_),a=!n&&[],(i=R.exec(t))?[e.createElement(i[1])]:(i=Tt([t],e,a),a&&a.length&&S(a).remove(),S.merge([],i.childNodes)));var r,i,a},S.fn.load=function(t,e,n){var r,i,a,o=this,s=t.indexOf(" ");return s>-1&&(r=ye(t.slice(s)),t=t.slice(0,s)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),o.length>0&&S.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){a=arguments,o.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,a||[t.responseText,e,t])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var r,i,a,o,s,u,l=S.css(t,"position"),c=S(t),f={};"static"===l&&(t.style.position="relative"),s=c.offset(),a=S.css(t,"top"),u=S.css(t,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(o=(r=c.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,n,S.extend({},s))),null!=e.top&&(f.top=e.top-s.top+o),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),i.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-S.css(r,"marginTop",!0),left:e.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||at}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(r){return Y(this,(function(t,r,i){var a;if(y(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===i)return a?a[e]:t[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):t[r]=i}),t,r,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=qt(v.pixelPosition,(function(t,n){if(n)return n=zt(t,e),Vt.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){S.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return Y(this,(function(e,n,i){var a;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===i?S.css(e,n,s):S.style(e,n,i,s)}),e,o?i:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Qe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return r=s.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(s.call(arguments)))}).guid=t.guid=t.guid||S.guid++,i},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=I,S.isFunction=m,S.isWindow=y,S.camelCase=K,S.type=T,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace(Qe,"")},void 0===(r=(function(){return S}).apply(e,[]))||(t.exports=r);var $e=n.jQuery,Ze=n.$;return S.noConflict=function(t){return n.$===S&&(n.$=Ze),t&&n.jQuery===S&&(n.jQuery=$e),S},void 0===i&&(n.jQuery=n.$=S),S}))},KjvB:function(t,e,n){var r=n("c4+4"),i=n("V26T"),a=new r,o="undefined"!=typeof window?window:self,s=o.crypto||o.msCrypto||{},u=s.subtle||s.webkitSubtle;function l(t){return a.digest(t)}try{u.digest({name:"sha-1"},new Uint8Array).catch((function(){u=!1}))}catch(c){u=!1}t.exports=function(t,e){u?("string"==typeof t&&(t=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}(t)),u.digest({name:"sha-1"},t).then((function(t){e(function(t){for(var e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")}(new Uint8Array(t)))}),(function(){e(l(t))}))):"undefined"!=typeof window?i(t,(function(n,r){e(n?l(t):r)})):queueMicrotask((function(){return e(l(t))}))},t.exports.sync=l},LV99:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){var e=this;e.d3=window.d3?window.d3:n("VphZ"),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function r(t){this.internal=new e(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function t(e,n,r){Object.keys(e).forEach((function(i){n[i]=e[i].bind(r),Object.keys(e[i]).length>0&&t(e[i],n[i],r)}))}(r.prototype,this,this)}function i(t,e){this.component=t,this.params=e||{},this.d3=t.d3,this.scale=this.d3.scaleLinear(),this.orient="bottom",this.innerTickSize=6,this.outerTickSize=this.params.withOuterTick?6:0,this.tickPadding=3,this.tickValues=null,this.tickOffset=0,this.tickCulling=!0,this.tickTextRotate=this.params.tickTextRotate,this.axis=this.generateAxis()}i.prototype.axisX=function(t,e,n){t.attr("transform",(function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"}))},i.prototype.axisY=function(t,e){t.attr("transform",(function(t){return"translate(0,"+Math.ceil(e(t))+")"}))},i.prototype.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},i.prototype.generateTicks=function(t){var e,n,r=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)r.push(e);return r.length>0&&r[0]>0&&r.unshift(r[0]-(r[1]-r[0])),r},i.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},i.prototype.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},i.prototype.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},i.prototype.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var n={h:11.5,w:5.5};return t.select("text").text((function(t){return e.textFormatted(t)})).each((function(t){var r=this.getBoundingClientRect(),i=e.textFormatted(t),a=r.height,o=i?r.width/i.length:void 0;a&&o&&(n.h=a,n.w=o)})).text(""),e.tickTextCharSize=n,n},i.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},i.prototype.tspanData=function(t,e,n){var r=this.params.tickMultiline?this.splitTickText(t,n):[].concat(this.textFormatted(t));return this.params.tickMultiline&&this.params.tickMultilineMax>0&&(r=this.ellipsify(r,this.params.tickMultilineMax)),r.map((function(t){return{index:e,splitted:t,length:r.length}}))},i.prototype.splitTickText=function(t,e){var n,r,i=this,a=i.textFormatted(t),o=i.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(a)?a:((!o||o<=0)&&(o=i.isVertical()?95:i.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function t(e,a){r=void 0;for(var s=1;s<a.length;s++)if(" "===a.charAt(s)&&(r=s),n=a.substr(0,s+1),o<i.tickTextCharSize.w*n.length)return t(e.concat(a.substr(0,r||s)),a.slice(r?r+1:s));return e.concat(a)}([],a+""))},i.prototype.ellipsify=function(t,e){if(t.length<=e)return t;for(var n=t.slice(0,e),r=3,i=e-1;i>=0;i--){var a=n[i].length;if(n[i]=n[i].substr(0,a-r).padEnd(a,"."),(r-=a)<=0)break}return n},i.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},i.prototype.lineY2=function(t){var e=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<e&&e<this.range[1]?this.innerTickSize:0},i.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(t>0?1:-1):this.tickLength},i.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},i.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?t>0?"start":"end":"middle"},i.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},i.prototype.tspanDy=function(t,e){var n=this.tickTextCharSize.h;return 0===e&&(n=this.isVertical()?-(this.tickTextCharSize.h/2*(t.length-1)-3):".71em"),n},i.prototype.generateAxis=function(){var t=this,e=t.d3,n=t.params;function r(i,a){var o;return i.each((function(){var i,s,u,l=r.g=e.select(this),c=this.__chart__||t.scale,f=this.__chart__=t.copyScale(),d=t.tickValues?t.tickValues:t.generateTicks(f),h=l.selectAll(".tick").data(d,f),p=h.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),g=h.exit().remove(),v=h.merge(p);n.isCategory?(t.tickOffset=Math.ceil((f(1)-f(0))/2),s=t.tickCentered?0:t.tickOffset,u=t.tickCentered?t.tickOffset:0):t.tickOffset=s=0,t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(l.select(".tick"));var m=v.select("line").merge(p.append("line")),y=v.select("text").merge(p.append("text")),_=v.selectAll("text").selectAll("tspan").data((function(e,n){return t.tspanData(e,n,f)})),b=_.enter().append("tspan").merge(_).text((function(t){return t.splitted}));_.exit().remove();var E=l.selectAll(".domain").data([0]),T=E.enter().append("path").merge(E).attr("class","domain");switch(t.orient){case"bottom":i=t.axisX,m.attr("x1",s).attr("x2",s).attr("y2",(function(e,n){return t.lineY2(e,n)})),y.attr("x",0).attr("y",(function(e,n){return t.textY(e,n)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),b.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),T.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":i=t.axisX,m.attr("x1",s).attr("x2",s).attr("y2",(function(e,n){return-1*t.lineY2(e,n)})),y.attr("x",0).attr("y",(function(e,r){return-1*t.textY(e,r)-(n.isCategory?2:t.tickLength-2)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),b.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),T.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":i=t.axisY,m.attr("x2",-t.innerTickSize).attr("y1",u).attr("y2",u),y.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),b.attr("x",-t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),T.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":i=t.axisY,m.attr("x2",t.innerTickSize).attr("y1",u).attr("y2",u),y.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),b.attr("x",t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),T.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize)}if(f.rangeBand){var S=f,w=S.rangeBand()/2;c=f=function(t){return S(t)+w}}else c.rangeBand?c=f:g.call(i,f,t.tickOffset);p.call(i,c,t.tickOffset),o=(a?v.transition(a):v).style("opacity",1).call(i,f,t.tickOffset)})),o}return r.scale=function(e){return arguments.length?(t.scale=e,r):t.scale},r.orient=function(e){return arguments.length?(t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",r):t.orient},r.tickFormat=function(e){return arguments.length?(t.tickFormat=e,r):t.tickFormat},r.tickCentered=function(e){return arguments.length?(t.tickCentered=e,r):t.tickCentered},r.tickOffset=function(){return t.tickOffset},r.tickInterval=function(){var e;return(e=n.isCategory?2*t.tickOffset:(r.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize)/r.g.selectAll("line").size())==1/0?0:e},r.ticks=function(){return arguments.length?(t.tickArguments=arguments,r):t.tickArguments},r.tickCulling=function(e){return arguments.length?(t.tickCulling=e,r):t.tickCulling},r.tickValues=function(e){if("function"==typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return r},r};var a={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},o=function(t){return Math.ceil(t)+.5},s=function(t){return 10*Math.ceil(t/10)},u=function(t){return t[1]-t[0]},l=function(t,e,n){return d(t[e])?t[e]:n},c=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:e.width,height:e.height}},f=function(t){return Array.isArray(t)},d=function(t){return void 0!==t},h=function(e){return null==e||g(e)&&0===e.length||"object"===t(e)&&0===Object.keys(e).length},p=function(t){return"function"==typeof t},g=function(t){return"string"==typeof t},v=function(t){return void 0===t},m=function(t){return t||0===t},y=function(t){return!h(t)},_=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},b=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=e,this.d3=e.d3,this.internal=i};b.prototype.init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",a.axis+" "+a.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",a.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",a.axis+" "+a.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",a.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",a.axis+" "+a.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",a.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},b.prototype.getXAxis=function(t,e,n,r,i,a,o){var s=this.owner,u=s.config,l={isCategory:s.isCategorized(),withOuterTick:i,tickMultiline:u.axis_x_tick_multiline,tickMultilineMax:u.axis_x_tick_multiline?Number(u.axis_x_tick_multilineMax):0,tickWidth:u.axis_x_tick_width,tickTextRotate:o?0:u.axis_x_tick_rotate,withoutTransition:a},c=new this.internal(this,l).axis.scale(t).orient(e);return s.isTimeSeries()&&r&&"function"!=typeof r&&(r=r.map((function(t){return s.parseDate(t)}))),c.tickFormat(n).tickValues(r),s.isCategorized()&&(c.tickCentered(u.axis_x_tick_centered),h(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),c},b.prototype.updateXAxisTickValues=function(t,e){var n,r=this.owner,i=r.config;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(n=this.generateTickValues(r.mapTargetsToUniqueXs(t),i.axis_x_tick_count,r.isTimeSeries())),e?e.tickValues(n):(r.xAxis.tickValues(n),r.subXAxis.tickValues(n)),n},b.prototype.getYAxis=function(t,e,n,r,i,a,o){var s=this.owner,u=s.config,l=new this.internal(this,{withOuterTick:i,withoutTransition:a,tickTextRotate:o?0:u.axis_y_tick_rotate}).axis.scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?l.ticks(u.axis_y_tick_time_type,u.axis_y_tick_time_interval):l.tickValues(r),l},b.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},b.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return t};return e.axis_x_tick_format&&(p(e.axis_x_tick_format)?n=e.axis_x_tick_format:t.isTimeSeries()&&(n=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),p(n)?function(e){return n.call(t,e)}:n},b.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},b.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},b.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},b.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},b.prototype.getLabelOptionByAxisId=function(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},b.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return g(e)?e:e?e.text:null},b.prototype.setLabelText=function(t,e){var n=this.owner.config,r=this.getLabelOptionByAxisId(t);g(r)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):r&&(r.text=e)},b.prototype.getLabelPosition=function(e,n){var r=this.getLabelOptionByAxisId(e),i=r&&"object"===t(r)&&r.position?r.position:n;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},b.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},b.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},b.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},b.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},b.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},b.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},b.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},b.prototype.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},b.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},b.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},b.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},b.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},b.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},b.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.textAnchorForY2AxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.getMaxTickWidth=function(t,e){var n,r,i,a,o=this.owner,s=o.config,u=0;return e&&o.currentMaxTickWidths[t]||(o.svg&&(n=o.filterTargetsToShow(o.data.targets),"y"===t?(r=o.y.copy().domain(o.getYDomain(n,"y")),i=this.getYAxis(r,o.yOrient,s.axis_y_tick_format,o.yAxisTickValues,!1,!0,!0)):"y2"===t?(r=o.y2.copy().domain(o.getYDomain(n,"y2")),i=this.getYAxis(r,o.y2Orient,s.axis_y2_tick_format,o.y2AxisTickValues,!1,!0,!0)):(r=o.x.copy().domain(o.getXDomain(n)),i=this.getXAxis(r,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,i)),(a=o.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(i).each((function(){o.d3.select(this).selectAll("text").each((function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)})),a.remove()}))),o.currentMaxTickWidths[t]=u<=0?o.currentMaxTickWidths[t]:u),o.currentMaxTickWidths[t]},b.prototype.updateLabels=function(t){var e=this.owner,n=e.main.select("."+a.axisX+" ."+a.axisXLabel),r=e.main.select("."+a.axisY+" ."+a.axisYLabel),i=e.main.select("."+a.axisY2+" ."+a.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},b.prototype.getPadding=function(t,e,n,r){var i="number"==typeof t?t:t[e];return m(i)?"ratio"===t.unit?t[e]*r:this.convertPixelsToAxisPadding(i,r):n},b.prototype.convertPixelsToAxisPadding=function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},b.prototype.generateTickValues=function(t,e,n){var r,i,a,o,s,u,l,c=t;if(e)if(1===(r=p(e)?e():e))c=[t[0]];else if(2===r)c=[t[0],t[t.length-1]];else if(r>2){for(s=((a=t[t.length-1])-(i=t[0]))/(1+(o=r-2)),c=[i],u=0;u<o;u++)l=+i+s*(u+1),c.push(n?new Date(l):l);c.push(a)}return n||(c=c.sort((function(t,e){return t-e}))),c},b.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},b.prototype.redraw=function(t,e){var n=this.owner,r=t?n.d3.transition().duration(t):null;n.axes.x.style("opacity",e?0:1).call(n.xAxis,r),n.axes.y.style("opacity",e?0:1).call(n.yAxis,r),n.axes.y2.style("opacity",e?0:1).call(n.y2Axis,r),n.axes.subx.style("opacity",e?0:1).call(n.subXAxis,r)};var E={version:"0.6.14",chart:{fn:r.prototype,internal:{fn:e.prototype,axis:{fn:b.prototype,internal:{fn:i.prototype}}}},generate:function(t){return new r(t)}};return e.prototype.beforeInit=function(){},e.prototype.afterInit=function(){},e.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},e.prototype.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(n.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=n.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(t){return t.getMilliseconds()?e.timeFormat(".%L")(t):t.getSeconds()?e.timeFormat(":%S")(t):t.getMinutes()?e.timeFormat("%I:%M")(t):t.getHours()?e.timeFormat("%I %p")(t):t.getDay()&&1!==t.getDate()||1!==t.getDate()||t.getMonth()?e.timeFormat("%-m/%-d")(t):e.timeFormat("%Y/%-m/%-d")(t)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},e.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},e.prototype.initWithData=function(t){var e,n,r=this,i=r.d3,o=r.config,s=!0;r.axis=new b(r),r.selectChart=o.bindto?"function"==typeof o.bindto.node?o.bindto:i.select(o.bindto):i.selectAll([]),r.selectChart.empty()&&(r.selectChart=i.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),s=!1),r.selectChart.html("").classed("c3",!0),r.data.xs={},r.data.targets=r.convertDataToTargets(t),o.data_filter&&(r.data.targets=r.data.targets.filter(o.data_filter)),o.data_hide&&r.addHiddenTargetIds(!0===o.data_hide?r.mapToIds(r.data.targets):o.data_hide),o.legend_hide&&r.addHiddenLegendIds(!0===o.legend_hide?r.mapToIds(r.data.targets):o.legend_hide),r.updateSizes(),r.updateScales(),r.x.domain(i.extent(r.getXDomain(r.data.targets))),r.y.domain(r.getYDomain(r.data.targets,"y")),r.y2.domain(r.getYDomain(r.data.targets,"y2")),r.subX.domain(r.x.domain()),r.subY.domain(r.y.domain()),r.subY2.domain(r.y2.domain()),r.orgXDomain=r.x.domain(),r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return o.onmouseover.call(r)})).on("mouseleave",(function(){return o.onmouseout.call(r)})),r.config.svg_classname&&r.svg.attr("class",r.config.svg_classname),e=r.svg.append("defs"),r.clipChart=r.appendClip(e,r.clipId),r.clipXAxis=r.appendClip(e,r.clipIdForXAxis),r.clipYAxis=r.appendClip(e,r.clipIdForYAxis),r.clipGrid=r.appendClip(e,r.clipIdForGrid),r.clipSubchart=r.appendClip(e,r.clipIdForSubchart),r.updateSvgSize(),n=r.main=r.svg.append("g").attr("transform",r.getTranslate("main")),r.initPie&&r.initPie(),r.initDragZoom&&r.initDragZoom(),r.initSubchart&&r.initSubchart(),r.initTooltip&&r.initTooltip(),r.initLegend&&r.initLegend(),r.initTitle&&r.initTitle(),r.initZoom&&r.initZoom(),r.initSubchartBrush&&r.initSubchartBrush(),n.append("text").attr("class",a.text+" "+a.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),r.initRegion(),r.initGrid(),n.append("g").attr("clip-path",r.clipPath).attr("class",a.chart),o.grid_lines_front&&r.initGridLines(),r.initEventRect(),r.initChartElements(),r.axis.init(),r.updateTargets(r.data.targets),o.axis_x_selection&&r.brush.selectionAsValue(r.getDefaultSelection()),s&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),r.bindResize(),r.bindWindowFocus(),r.api.element=r.selectChart.node()},e.prototype.smoothLines=function(t,e){var n=this;"grid"===e&&t.each((function(){var t=n.d3.select(this),e=t.attr("x1"),r=t.attr("x2"),i=t.attr("y1"),a=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(r),y1:Math.ceil(i),y2:Math.ceil(a)})}))},e.prototype.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,r=t.legend?t.getLegendWidth():0,i=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+i+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+i+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+i,left:t.rotated_padding_left}:{top:t.currentHeight-s-i,right:NaN,bottom:o+i,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,r),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?r+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},e.prototype.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},e.prototype.showTargets=function(){var t=this;t.svg.selectAll("."+a.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(t.config.transition_duration).style("opacity",1)},e.prototype.redraw=function(t,e){var n,r,i,o,s,u,c,f,d,h,p,g,v,m,y,_,b,E,T,S,w,A,x,C,D,I,R,k,O,P,M,L=this,N=L.main,F=L.d3,j=L.config,B=L.getShapeIndices(L.isAreaType),U=L.getShapeIndices(L.isBarType),V=L.getShapeIndices(L.isLineType),G=L.hasArcType(),H=L.filterTargetsToShow(L.data.targets),Y=L.xv.bind(L);if(n=l(t=t||{},"withY",!0),r=l(t,"withSubchart",!0),i=l(t,"withTransition",!0),u=l(t,"withTransform",!1),c=l(t,"withUpdateXDomain",!1),f=l(t,"withUpdateOrgXDomain",!1),d=l(t,"withTrimXDomain",!0),v=l(t,"withUpdateXAxis",c),h=l(t,"withLegend",!1),p=l(t,"withEventRect",!0),g=l(t,"withDimension",!0),o=l(t,"withTransitionForExit",i),s=l(t,"withTransitionForAxis",i),T=i?j.transition_duration:0,S=o?T:0,w=s?T:0,e=e||L.axis.generateTransitions(w),h&&j.legend_show?L.updateLegend(L.mapToIds(L.data.targets),t,e):g&&L.updateDimension(!0),L.isCategorized()&&0===H.length&&L.x.domain([0,L.axes.x.selectAll(".tick").size()]),H.length?(L.updateXDomain(H,c,f,d),j.axis_x_tick_values||(I=L.axis.updateXAxisTickValues(H))):(L.xAxis.tickValues([]),L.subXAxis.tickValues([])),j.zoom_rescale&&!t.flow&&(O=L.x.orgDomain()),L.y.domain(L.getYDomain(H,"y",O)),L.y2.domain(L.getYDomain(H,"y2",O)),!j.axis_y_tick_values&&j.axis_y_tick_count&&L.yAxis.tickValues(L.axis.generateTickValues(L.y.domain(),j.axis_y_tick_count)),!j.axis_y2_tick_values&&j.axis_y2_tick_count&&L.y2Axis.tickValues(L.axis.generateTickValues(L.y2.domain(),j.axis_y2_tick_count)),L.axis.redraw(w,G),L.axis.updateLabels(i),(c||v)&&H.length)if(j.axis_x_tick_culling&&I){for(R=1;R<I.length;R++)if(I.length/R<j.axis_x_tick_culling_max){k=R;break}L.svg.selectAll("."+a.axisX+" .tick text").each((function(t){var e=I.indexOf(t);e>=0&&F.select(this).style("display",e%k?"none":"block")}))}else L.svg.selectAll("."+a.axisX+" .tick text").style("display","block");m=L.generateDrawArea?L.generateDrawArea(B,!1):void 0,y=L.generateDrawBar?L.generateDrawBar(U):void 0,_=L.generateDrawLine?L.generateDrawLine(V,!1):void 0,b=L.generateXYForText(B,U,V,!0),E=L.generateXYForText(B,U,V,!1),L.updateCircleY(),P=(L.config.axis_rotated?L.circleY:L.circleX).bind(L),M=(L.config.axis_rotated?L.circleX:L.circleY).bind(L),n&&(L.subY.domain(L.getYDomain(H,"y")),L.subY2.domain(L.getYDomain(H,"y2"))),L.updateXgridFocus(),N.select("text."+a.text+"."+a.empty).attr("x",L.width/2).attr("y",L.height/2).text(j.data_empty_label_text).transition().style("opacity",H.length?0:1),p&&L.redrawEventRect(),L.updateGrid(T),L.updateRegion(T),L.updateBar(S),L.updateLine(S),L.updateArea(S),L.updateCircle(P,M),L.hasDataLabel()&&L.updateText(b,E,S),L.redrawTitle&&L.redrawTitle(),L.redrawArc&&L.redrawArc(T,S,u),L.redrawSubchart&&L.redrawSubchart(r,e,T,S,B,U,V),N.selectAll("."+a.selectedCircles).filter(L.isBarType.bind(L)).selectAll("circle").remove(),t.flow&&(C=L.generateFlow({targets:H,flow:t.flow,duration:t.flow.duration,drawBar:y,drawLine:_,drawArea:m,cx:P,cy:M,xv:Y,xForText:b,yForText:E})),L.isTabVisible()&&(T?(D=F.transition().duration(T),A=[],[L.redrawBar(y,!0,D),L.redrawLine(_,!0,D),L.redrawArea(m,!0,D),L.redrawCircle(P,M,!0,D),L.redrawText(b,E,t.flow,!0,D),L.redrawRegion(!0,D),L.redrawGrid(!0,D)].forEach((function(t){t.forEach((function(t){A.push(t)}))})),x=L.generateWait(),A.forEach((function(t){x.add(t)})),x((function(){C&&C(),j.onrendered&&j.onrendered.call(L)}))):(L.redrawBar(y),L.redrawLine(_),L.redrawArea(m),L.redrawCircle(P,M),L.redrawText(b,E,t.flow),L.redrawRegion(),L.redrawGrid(),C&&C(),j.onrendered&&j.onrendered.call(L))),L.mapToIds(L.data.targets).forEach((function(t){L.withoutFadeIn[t]=!0}))},e.prototype.updateAndRedraw=function(t){var e,n=this,r=n.config;(t=t||{}).withTransition=l(t,"withTransition",!0),t.withTransform=l(t,"withTransform",!1),t.withLegend=l(t,"withLegend",!1),t.withUpdateXDomain=l(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=l(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=l(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&r.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?r.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},e.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},e.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},e.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},e.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||y(t.data_xs))},e.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},e.prototype.getTranslate=function(t){var e,n,r=this,i=r.config;return"main"===t?(e=o(r.margin.left),n=o(r.margin.top)):"context"===t?(e=o(r.margin2.left),n=o(r.margin2.top)):"legend"===t?(e=r.margin3.left,n=r.margin3.top):"x"===t?(e=0,n=i.axis_rotated?0:r.height):"y"===t?(e=0,n=i.axis_rotated?r.height:0):"y2"===t?(e=i.axis_rotated?0:r.width,n=i.axis_rotated?1:0):"subx"===t?(e=0,n=i.axis_rotated?0:r.height2):"arc"===t&&(e=r.arcWidth/2,n=r.arcHeight/2-(r.hasType("gauge")?6:0)),"translate("+e+","+n+")"},e.prototype.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},e.prototype.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},e.prototype.opacityForCircle=function(t){var e=(p(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return m(t.value)?this.isScatterType(t)?.5:e:0},e.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},e.prototype.xx=function(t){return t?this.x(t.x):null},e.prototype.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},e.prototype.yv=function(t){return Math.ceil((t.axis&&"y2"===t.axis?this.y2:this.y)(t.value))},e.prototype.subxx=function(t){return t?this.subX(t.x):null},e.prototype.transformMain=function(t,e){var n,r,i,o=this;e&&e.axisX?n=e.axisX:(n=o.main.select("."+a.axisX),t&&(n=n.transition())),e&&e.axisY?r=e.axisY:(r=o.main.select("."+a.axisY),t&&(r=r.transition())),e&&e.axisY2?i=e.axisY2:(i=o.main.select("."+a.axisY2),t&&(i=i.transition())),(t?o.main.transition():o.main).attr("transform",o.getTranslate("main")),n.attr("transform",o.getTranslate("x")),r.attr("transform",o.getTranslate("y")),i.attr("transform",o.getTranslate("y2")),o.main.select("."+a.chartArcs).attr("transform",o.getTranslate("arc"))},e.prototype.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},e.prototype.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.selectChart.style("max-height",t.currentHeight+"px")},e.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},e.prototype.observeInserted=function(t){var e,n=this;"undefined"!=typeof MutationObserver?(e=new MutationObserver((function(r){r.forEach((function(r){"childList"===r.type&&r.previousSibling&&(e.disconnect(),n.intervalForObserveInserted=window.setInterval((function(){t.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))}),10))}))}))).observe(t.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},e.prototype.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add((function(){e.onresize.call(t)})),e.resize_auto&&t.resizeFunction.add((function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout((function(){delete t.resizeTimeout,t.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.brush&&t.brush.update()}),100)})),t.resizeFunction.add((function(){e.onresized.call(t)})),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(window.onresize):n=t.generateResize(),n.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&n()}}},e.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},e.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},e.prototype.generateResize=function(){var t=[];function e(){t.forEach((function(t){t()}))}return e.add=function(e){t.push(e)},e.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}},e},e.prototype.endall=function(t,e){var n=0;t.each((function(){++n})).on("end",(function(){--n||e.apply(this,arguments)}))},e.prototype.generateWait=function(){var t=this,e=[],n=function(n){var r=setInterval((function(){if(t.isTabVisible()){var i=0;e.forEach((function(t){if(t.empty())i+=1;else try{t.transition()}catch(e){i+=1}})),i===e.length&&(clearInterval(r),n&&n())}}),50)};return n.add=function(t){e.push(t)},n},e.prototype.parseDate=function(e){var n;return e instanceof Date?n=e:"string"==typeof e?n=this.dataTimeParse(e):"object"===t(e)?n=new Date(+e):"number"!=typeof e||isNaN(e)||(n=new Date(+e)),n&&!isNaN(+n)||window.console.error("Failed to parse x '"+e+"' to Date object"),n},e.prototype.isTabVisible=function(){return!document.hidden},e.prototype.getPathBox=c,e.prototype.CLASS=a,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=r,this._y1=i,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=r,this._y1=i,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=r,this._y1=i},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=r,this._y1=i},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,r,i,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=r,this._r2=i,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,r,i,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=r,this._r2=i,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=r,this._y2=i},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=r,this._y2=i},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,r,i,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,r,i,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,n,r,i,a,o)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcRel(void 0,t,e,n,r,i,a,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(e.pathSegList.removeItem(n),t>e.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach((function(t){"d"==t.attributeName&&(e=!0)})),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach((function(t){t._owningPathSegList=null})),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),this._list[e]=t,t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach((function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()})),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var e=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(t){this.pathSegList.push(t)};var r=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};r.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},r.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},r.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},r.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},r.prototype.peekSegmentType=function(){return this._pathSegTypeFromChar(this._string[this._currentIndex])},r.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},r.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},r.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},r.prototype._parseNumber=function(){var t=0,e=0,n=1,r=0,i=1,a=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,i=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var u=this._currentIndex-1,l=1;u>=s;)e+=l*(this._string.charAt(u--)-"0"),l*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,r+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=e+r;if(c*=i,t&&(c*=Math.pow(10,a*t)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},r.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},r.prototype.parseSegment=function(){var t=this._string[this._currentIndex],n=this._pathSegTypeFromChar(t);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);default:throw"Unknown path seg type."}};var i=new n,a=new r(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];i.appendSegment(o)}return i.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),(r.prototype.axis=function(){}).labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach((function(n){e.axis.setLabelText(n,t[n])})),e.axis.updateLabels())},r.prototype.axis.max=function(e){var n=this.internal,r=n.config;if(!arguments.length)return{x:r.axis_x_max,y:r.axis_y_max,y2:r.axis_y2_max};"object"===t(e)?(m(e.x)&&(r.axis_x_max=e.x),m(e.y)&&(r.axis_y_max=e.y),m(e.y2)&&(r.axis_y2_max=e.y2)):r.axis_y_max=r.axis_y2_max=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},r.prototype.axis.min=function(e){var n=this.internal,r=n.config;if(!arguments.length)return{x:r.axis_x_min,y:r.axis_y_min,y2:r.axis_y2_min};"object"===t(e)?(m(e.x)&&(r.axis_x_min=e.x),m(e.y)&&(r.axis_y_min=e.y),m(e.y2)&&(r.axis_y2_min=e.y2)):r.axis_y_min=r.axis_y2_min=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},r.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};d(t.max)&&this.axis.max(t.max),d(t.min)&&this.axis.min(t.min)},r.prototype.category=function(t,e){var n=this.internal,r=n.config;return arguments.length>1&&(r.axis_x_categories[t]=e,n.redraw()),r.axis_x_categories[t]},r.prototype.categories=function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories},r.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},r.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},r.prototype.destroy=function(){var t=this.internal;if(window.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),window.detachEvent)window.detachEvent("onresize",t.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",t.resizeIfElementDisplayed);else{var e=window.onresize;e&&e.add&&e.remove&&e.remove(t.resizeFunction)}return t.resizeFunction.remove(),t.unbindWindowFocus(),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach((function(e){t[e]=null})),null},r.prototype.color=function(t){return this.internal.color(t)},(r.prototype.data=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter((function(e){return[].concat(t).indexOf(e.id)>=0}))}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},r.prototype.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map((function(t){return t.value})):null),n},r.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},r.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},r.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},r.prototype.flow=function(t){var e,n,r,i,a,o,s,u=this.internal,l=[],c=u.getMaxDataCount(),f=0,h=0;if(t.json)n=u.convertJsonToData(t.json,t.keys);else if(t.rows)n=u.convertRowsToData(t.rows);else{if(!t.columns)return;n=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(n,!0),u.data.targets.forEach((function(t){var n,r,i=!1;for(n=0;n<e.length;n++)if(t.id===e[n].id){for(i=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),f=e[n].values.length,r=0;r<f;r++)e[n].values[r].index=h+r,u.isTimeSeries()||(e[n].values[r].x=h+r);t.values=t.values.concat(e[n].values),e.splice(n,1);break}i||l.push(t.id)})),u.data.targets.forEach((function(t){var e,n;for(e=0;e<l.length;e++)if(t.id===l[e])for(h=t.values[t.values.length-1].index+1,n=0;n<f;n++)t.values.push({id:t.id,index:h+n,x:u.isTimeSeries()?u.getOtherTargetX(h+n):h+n,value:null})})),u.data.targets.length&&e.forEach((function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<h;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach((function(t){t.index+=h,u.isTimeSeries()||(t.x+=h)})),t.values=n.concat(t.values)})),u.data.targets=u.data.targets.concat(e),u.getMaxDataCount(),a=(i=u.data.targets[0]).values[0],d(t.to)?(f=0,s=u.isTimeSeries()?u.parseDate(t.to):t.to,i.values.forEach((function(t){t.x<s&&f++}))):d(t.length)&&(f=t.length),c?1===c&&u.isTimeSeries()&&(o=(i.values[i.values.length-1].x-a.x)/2,r=[new Date(+a.x-o),new Date(+a.x+o)],u.updateXDomain(null,!0,!0,!1,r)):(o=u.isTimeSeries()?i.values.length>1?i.values[i.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,u.updateXDomain(null,!0,!0,!1,r=[a.x-o,a.x])),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:f,duration:m(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:c},withLegend:!0,withTransition:c>1,withTrimXDomain:!1,withUpdateXAxis:!0})},e.prototype.generateFlow=function(t){var e=this,n=e.config,r=e.d3;return function(){var i,o,s,l,c,f,d,h,p,g,v,m=t.targets,y=t.flow,_=t.drawBar,b=t.drawLine,E=t.drawArea,T=t.cx,S=t.cy,w=t.xv,A=t.xForText,x=t.yForText,C=t.duration,D=y.index,I=y.length,R=e.getValueOnIndex(e.data.targets[0].values,D),k=e.getValueOnIndex(e.data.targets[0].values,D+I),O=e.x.domain(),P=y.duration||C,M=y.done||function(){},L=e.generateWait();e.flowing=!0,e.data.targets.forEach((function(t){t.values.splice(0,I)})),s=e.updateXDomain(m,!0,!0),e.updateXGrid&&e.updateXGrid(!0),l=e.xgrid||r.selectAll([]),c=e.xgridLines||r.selectAll([]),f=e.mainRegion||r.selectAll([]),d=e.mainText||r.selectAll([]),h=e.mainBar||r.selectAll([]),p=e.mainLine||r.selectAll([]),g=e.mainArea||r.selectAll([]),v=e.mainCircle||r.selectAll([]),y.orgDataCount?i=1===y.orgDataCount||(R&&R.x)===(k&&k.x)||e.isTimeSeries()?e.x(O[0])-e.x(s[0]):e.x(R.x)-e.x(k.x):1!==e.data.targets[0].values.length?i=e.x(O[0])-e.x(s[0]):e.isTimeSeries()?(R=e.getValueOnIndex(e.data.targets[0].values,0),k=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),i=e.x(R.x)-e.x(k.x)):i=u(s)/2,o="translate("+i+",0) scale("+u(O)/u(s)+",1)",e.hideXGridFocus();var N=r.transition().ease(r.easeLinear).duration(P);L.add(e.xAxis(e.axes.x,N)),L.add(h.transition(N).attr("transform",o)),L.add(p.transition(N).attr("transform",o)),L.add(g.transition(N).attr("transform",o)),L.add(v.transition(N).attr("transform",o)),L.add(d.transition(N).attr("transform",o)),L.add(f.filter(e.isRegionOnX).transition(N).attr("transform",o)),L.add(l.transition(N).attr("transform",o)),L.add(c.transition(N).attr("transform",o)),L((function(){var t,r=[],i=[];if(I){for(t=0;t<I;t++)r.push("."+a.shape+"-"+(D+t)),i.push("."+a.text+"-"+(D+t));e.svg.selectAll("."+a.shapes).selectAll(r).remove(),e.svg.selectAll("."+a.texts).selectAll(i).remove(),e.svg.select("."+a.xgrid).remove()}l.attr("transform",null).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),c.attr("transform",null),c.select("line").attr("x1",n.axis_rotated?0:w).attr("x2",n.axis_rotated?e.width:w),c.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",w),h.attr("transform",null).attr("d",_),p.attr("transform",null).attr("d",b),g.attr("transform",null).attr("d",E),v.attr("transform",null).attr("cx",T).attr("cy",S),d.attr("transform",null).attr("x",A).attr("y",x).style("fill-opacity",e.opacityForText.bind(e)),f.attr("transform",null),f.filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),M(),e.flowing=!1}))}},r.prototype.focus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),e.classed(a.focused,!0).classed(a.defocused,!1),n.hasArcType()&&n.expandArc(t),n.toggleFocusLegend(t,!0),n.focusedTargetIds=t,n.defocusedTargetIds=n.defocusedTargetIds.filter((function(e){return t.indexOf(e)<0}))},r.prototype.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(a.focused,!1).classed(a.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter((function(e){return t.indexOf(e)<0})),e.defocusedTargetIds=t},r.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(a.focused,!1).classed(a.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter((function(){return e.d3.select(this).classed(a.legendItemFocused)})).classed(a.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(r.prototype.xgrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines}).add=function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},r.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(r.prototype.ygrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines}).add=function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},r.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},r.prototype.groups=function(t){var e=this.internal,n=e.config;return v(t)||(n.data_groups=t,e.redraw()),n.data_groups},(r.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},r.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},r.prototype.load=function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&r.prototype.data.names.bind(this)(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){n.data_classes[e]=t.classes[e]})),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){n.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){n.data_colors[e]=t.colors[e]})),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):"unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),(function(){e.loadFromArgs(t)})):e.loadFromArgs(t)},r.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),(function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()}))},(r.prototype.regions=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),n.regions):n.regions}).add=function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},r.prototype.regions.remove=function(t){var e,n,r,i=this.internal,o=i.config;return e=l(t=t||{},"duration",o.transition_duration),n=l(t,"classes",[a.region]),r=i.main.select("."+a.regions).selectAll(n.map((function(t){return"."+t}))),(e?r.transition().duration(e):r).style("opacity",0).remove(),o.regions=o.regions.filter((function(t){var e=!1;return!t.class||(t.class.split(" ").forEach((function(t){n.indexOf(t)>=0&&(e=!0)})),!e)})),o.regions},r.prototype.selected=function(t){var e=this.internal,n=e.d3;return e.main.selectAll("."+a.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+a.shape).filter((function(){return n.select(this).classed(a.SELECTED)})).nodes().map((function(t){var e=t.__data__;return e.data?e.data:e}))},r.prototype.select=function(t,e,n){var r=this.internal,i=r.d3,o=r.config;o.data_selection_enabled&&r.main.selectAll("."+a.shapes).selectAll("."+a.shape).each((function(s,u){var l=i.select(this),c=s.data?s.data.id:s.id,f=r.getToggle(this,s).bind(r),h=o.data_selection_grouped||!t||t.indexOf(c)>=0,p=!e||e.indexOf(u)>=0,g=l.classed(a.SELECTED);l.classed(a.line)||l.classed(a.area)||(h&&p?o.data_selection_isselectable(s)&&!g&&f(!0,l.classed(a.SELECTED,!0),s,u):d(n)&&n&&g&&f(!1,l.classed(a.SELECTED,!1),s,u))}))},r.prototype.unselect=function(t,e){var n=this.internal,r=n.d3,i=n.config;i.data_selection_enabled&&n.main.selectAll("."+a.shapes).selectAll("."+a.shape).each((function(o,s){var u=r.select(this),l=o.data?o.data.id:o.id,c=n.getToggle(this,o).bind(n),f=i.data_selection_grouped||!t||t.indexOf(l)>=0,d=!e||e.indexOf(s)>=0,h=u.classed(a.SELECTED);u.classed(a.line)||u.classed(a.area)||f&&d&&i.data_selection_isselectable(o)&&h&&c(!1,u.classed(a.SELECTED,!1),o,s)}))},r.prototype.show=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.removeHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("display","initial","important").style("opacity",1,"important").call(r.endall,(function(){n.style("opacity",null).style("opacity",1)})),e.withLegend&&r.showLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.prototype.hide=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.addHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("opacity",0,"important").call(r.endall,(function(){n.style("opacity",null).style("opacity",0),n.style("display","none")})),e.withLegend&&r.hideLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.prototype.toggle=function(t,e){var n=this,r=this.internal;r.mapToTargetIds(t).forEach((function(t){r.isTargetToShow(t)?n.hide(t,e):n.show(t,e)}))},(r.prototype.tooltip=function(){}).show=function(t){var e,n,r=this.internal,i={};t.mouse?i=t.mouse:(t.data?n=t.data:void 0!==t.x&&(e=t.id?r.data.targets.filter((function(e){return e.id===t.id})):r.data.targets,n=r.filterByX(e,t.x).slice(0,1)[0]),i=n?r.getMousePosition(n):null),r.dispatchEvent("mousemove",i),r.config.tooltip_onshow.call(r,n)},r.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},r.prototype.transform=function(t,e){var n=this.internal,r=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;n.transformTo(e,t,r)},e.prototype.transformTo=function(t,e,n){var r=this,i=!r.hasArcType(),a=n||{withTransitionForAxis:i};a.withTransitionForTransform=!1,r.transiting=!1,r.setTargetType(t,e),r.updateTargets(r.data.targets),r.updateAndRedraw(a)},r.prototype.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},r.prototype.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(r.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&&(t=t.map((function(t){return e.parseDate(t)}))),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},r.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},r.prototype.zoom.max=function(t){var e=this.internal,n=e.config;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=e.d3.max([e.orgXDomain[1],t])},r.prototype.zoom.min=function(t){var e=this.internal,n=e.config;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=e.d3.min([e.orgXDomain[0],t])},r.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};d(t.max)&&this.domain.max(t.max),d(t.min)&&this.domain.min(t.min)},e.prototype.initPie=function(){var t=this;t.pie=t.d3.pie().value((function(t){return t.values.reduce((function(t,e){return t+e.value}),0)}));var e=t.getOrderFunction();if(e&&(t.isOrderAsc()||t.isOrderDesc())){var n=e;e=function(t,e){return-1*n(t,e)}}t.pie.sort(e||null)},e.prototype.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,r=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=n||(r<=t.radius-t.innerRadius?t.radius-t.innerRadius:r<=t.radius?r:t.radius)},e.prototype.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},e.prototype.updateAngle=function(t){var e,n,r,i,a=this,o=a.config,s=!1,u=0;return o?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach((function(e){s||e.data.id!==t.data.id||(s=!0,(t=e).index=u),u++})),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),a.isGaugeType(t.data)&&(e=o.gauge_min,n=o.gauge_max,r=Math.PI*(o.gauge_fullCircle?2:1)/(n-e),i=t.value<e?0:t.value<n?t.value-e:n-e,t.startAngle=o.gauge_startingAngle,t.endAngle=t.startAngle+r*i),s?t:null):null},e.prototype.getSvgArc=function(){var t=this,e=t.hasType("gauge"),n=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=t.d3.arc().outerRadius((function(r){return e?t.radius-n*r.index:t.radius})).innerRadius((function(r){return e?t.radius-n*(r.index+1):t.innerRadius})),i=function(e,n){var i;return n?r(e):(i=t.updateAngle(e))?r(i):"M 0 0"};return i.centroid=r.centroid,i},e.prototype.getSvgArcExpanded=function(t){t=t||1;var e=this,n=e.hasType("gauge"),r=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=Math.min(e.radiusExpanded*t-e.radius,.8*r-100*(1-t)),a=e.d3.arc().outerRadius((function(a){return n?e.radius-r*a.index+i:e.radiusExpanded*t})).innerRadius((function(t){return n?e.radius-r*(t.index+1):e.innerRadius}));return function(t){var n=e.updateAngle(t);return n?a(n):"M 0 0"}},e.prototype.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},e.prototype.transformForArcLabel=function(t){var e,n,r,i,a,o=this,s=o.config,u=o.updateAngle(t),l="",c=o.hasType("gauge");if(u&&!c)e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1],i=Math.sqrt(n*n+r*r),l="translate("+n*(a=o.hasType("donut")&&s.donut_label_ratio?p(s.donut_label_ratio)?s.donut_label_ratio(t,o.radius,i):s.donut_label_ratio:o.hasType("pie")&&s.pie_label_ratio?p(s.pie_label_ratio)?s.pie_label_ratio(t,o.radius,i):s.pie_label_ratio:o.radius&&i?(36/o.radius>.375?1.175-36/o.radius:.8)*o.radius/i:0)+","+r*a+")";else if(u&&c&&o.filterTargetsToShow(o.data.targets).length>1){var f=Math.sin(u.endAngle-Math.PI/2);l="translate("+(n=Math.cos(u.endAngle-Math.PI/2)*(o.radiusExpanded+25))+","+(r=f*(o.radiusExpanded+15-Math.abs(10*f))+3)+")"}return l},e.prototype.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},e.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},e.prototype.textForArcLabel=function(t){var e,n,r,i,a,o=this;return o.shouldShowArcLabel()?(n=(e=o.updateAngle(t))?e.value:null,r=o.getArcRatio(e),i=t.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(r)?(a=o.getArcLabelFormat())?a(n,r,i):o.defaultArcValueFormat(n,r):""):""},e.prototype.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},e.prototype.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval((function(){n.transiting||(window.clearInterval(e),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(t))}),10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+a.chartArc)).each((function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each((function(t){n.isDonutType(t.data)}))})))},e.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+a.chartArc)).selectAll("path").transition().duration((function(t){return e.expandDuration(t.data.id)})).attr("d",e.svgArc),e.svg.selectAll("."+a.arc))},e.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},e.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},e.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},e.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},e.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},e.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},e.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},e.prototype.updateTargetsForArc=function(t){var e,n=this,r=n.main,i=n.classChartArc.bind(n),o=n.classArcs.bind(n),s=n.classFocus.bind(n);(e=r.select("."+a.chartArcs).selectAll("."+a.chartArc).data(n.pie(t)).attr("class",(function(t){return i(t)+s(t.data)})).enter().append("g").attr("class",i)).append("g").attr("class",o),e.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},e.prototype.initArc=function(){var t=this;t.arcs=t.main.select("."+a.chart).append("g").attr("class",a.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",a.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},e.prototype.redrawArc=function(t,e,n){var r,i,o,s,u=this,l=u.d3,c=u.config,f=u.main,d=u.hasType("gauge");if(i=(r=f.selectAll("."+a.arcs).selectAll("."+a.arc).data(u.arcData.bind(u))).enter().append("path").attr("class",u.classArc.bind(u)).style("fill",(function(t){return u.color(t.data)})).style("cursor",(function(t){return c.interaction_enabled&&c.data_selection_isselectable(t)?"pointer":null})).each((function(t){u.isGaugeType(t.data)&&(t.startAngle=t.endAngle=c.gauge_startingAngle),this._current=t})).merge(r),d&&(s=(o=f.selectAll("."+a.arcs).selectAll("."+a.arcLabelLine).data(u.arcData.bind(u))).enter().append("rect").attr("class",(function(t){return a.arcLabelLine+" "+a.target+" "+a.target+"-"+t.data.id})).merge(o),1===u.filterTargetsToShow(u.data.targets).length?s.style("display","none"):s.style("fill",(function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data)})).style("display",c.gauge_labelLine_show?"":"none").each((function(t){var e=0,n=0,r=0,i="";if(u.hiddenTargetIds.indexOf(t.data.id)<0){var a=u.updateAngle(t),o=u.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(a.index+1),s=a.endAngle-Math.PI/2,c=u.radius-o,f=s-(0===c?0:1/c);e=u.radiusExpanded-u.radius+o,n=Math.cos(f)*c,r=Math.sin(f)*c,i="rotate("+180*s/Math.PI+", "+n+", "+r+")"}l.select(this).attr("x",n).attr("y",r).attr("width",e).attr("height",2).attr("transform",i).style("stroke-dasharray","0, "+(e+2)+", 0")}))),i.attr("transform",(function(t){return!u.isGaugeType(t.data)&&n?"scale(0)":""})).on("mouseover",c.interaction_enabled?function(t){var e,n;u.transiting||(e=u.updateAngle(t))&&(n=u.convertToArcData(e),u.expandArc(e.data.id),u.api.focus(e.data.id),u.toggleFocusLegend(e.data.id,!0),u.config.data_onmouseover(n,this))}:null).on("mousemove",c.interaction_enabled?function(t){var e,n=u.updateAngle(t);n&&(e=u.convertToArcData(n),u.showTooltip([e],this))}:null).on("mouseout",c.interaction_enabled?function(t){var e,n;u.transiting||(e=u.updateAngle(t))&&(n=u.convertToArcData(e),u.unexpandArc(e.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(n,this))}:null).on("click",c.interaction_enabled?function(t,e){var n,r=u.updateAngle(t);r&&(n=u.convertToArcData(r),u.toggleShape&&u.toggleShape(this,n,e),u.config.data_onclick.call(u.api,n,this))}:null).each((function(){u.transiting=!0})).transition().duration(t).attrTween("d",(function(t){var e,n=u.updateAngle(t);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=l.interpolate(this._current,n),this._current=e(0),function(n){var r=e(n);return r.data=t.data,u.getArc(r,!0)}):function(){return"M 0 0"}})).attr("transform",n?"scale(1)":"").style("fill",(function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data.id)})).call(u.endall,(function(){u.transiting=!1})),r.exit().transition().duration(e).style("opacity",0).remove(),f.selectAll("."+a.chartArc).select("text").style("opacity",0).attr("class",(function(t){return u.isGaugeType(t.data)?a.gaugeValue:""})).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",(function(t){return u.isGaugeType(t.data)&&1===u.filterTargetsToShow(u.data.targets).length?Math.round(u.radius/5)+"px":""})).transition().duration(t).style("opacity",(function(t){return u.isTargetToShow(t.data.id)&&u.isArcType(t.data)?1:0})),f.select("."+a.chartArcsTitle).style("opacity",u.hasType("donut")||d?1:0),d){var h=0,p=u.arcs.select("g."+a.chartArcsBackground).selectAll("path."+a.chartArcsBackground).data(u.data.targets);p.enter().append("path").attr("class",(function(t,e){return a.chartArcsBackground+" "+a.chartArcsBackground+"-"+e})).merge(p).attr("d",(function(t){if(u.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:c.gauge_max}],startAngle:c.gauge_startingAngle,endAngle:-1*c.gauge_startingAngle*(c.gauge_fullCircle?Math.PI:1),index:h++};return u.getArc(e,!0,!0)})),p.exit().remove(),u.arcs.select("."+a.chartArcsGaugeUnit).attr("dy",".75em").text(c.gauge_label_show?c.gauge_units:""),u.arcs.select("."+a.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/(c.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(c.gauge_label_show?u.textForGaugeMinMax(c.gauge_min,!1):""),u.arcs.select("."+a.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/(c.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(c.gauge_label_show?u.textForGaugeMinMax(c.gauge_max,!0):"")}},e.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",a.chartArcsBackground),t.append("text").attr("class",a.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",a.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",a.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},e.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},e.prototype.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},e.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},e.prototype.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n},e.prototype.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},e.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""},e.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},e.prototype.classText=function(t){return this.generateClass(a.text,t.index)},e.prototype.classTexts=function(t){return this.generateClass(a.texts,t.id)},e.prototype.classShape=function(t){return this.generateClass(a.shape,t.index)},e.prototype.classShapes=function(t){return this.generateClass(a.shapes,t.id)},e.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(a.line,t.id)},e.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(a.lines,t.id)},e.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(a.circle,t.index)},e.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(a.circles,t.id)},e.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(a.bar,t.index)},e.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(a.bars,t.id)},e.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(a.arc,t.data.id)},e.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(a.arcs,t.data.id)},e.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(a.area,t.id)},e.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(a.areas,t.id)},e.prototype.classRegion=function(t,e){return this.generateClass(a.region,e)+" "+("class"in t?t.class:"")},e.prototype.classEvent=function(t){return this.generateClass(a.eventRect,t.index)},e.prototype.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+a.target+"-"+e),this.generateClass(a.target,t)+n},e.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},e.prototype.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?a.focused:"")},e.prototype.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?a.defocused:"")},e.prototype.classChartText=function(t){return a.chartText+this.classTarget(t.id)},e.prototype.classChartLine=function(t){return a.chartLine+this.classTarget(t.id)},e.prototype.classChartBar=function(t){return a.chartBar+this.classTarget(t.id)},e.prototype.classChartArc=function(t){return a.chartArc+this.classTarget(t.data.id)},e.prototype.getTargetSelectorSuffix=function(t){return this.generateTargetClass(t).replace(/([?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},e.prototype.selectorTarget=function(t,e){return(e||"")+"."+a.target+this.getTargetSelectorSuffix(t)},e.prototype.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map((function(t){return n.selectorTarget(t,e)})):null},e.prototype.selectorLegend=function(t){return"."+a.legendItem+this.getTargetSelectorSuffix(t)},e.prototype.selectorLegends=function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null},e.prototype.getClipPath=function(t){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"},e.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},e.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},e.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},e.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},e.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},e.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},e.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},e.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},e.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},e.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},e.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},e.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},e.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},e.prototype.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,r=y(t.color_pattern)?t.color_pattern:e.schemeCategory10,i=t.data_color,a=[];return function(t){var e,o=t.id||t.data&&t.data.id||t;return n[o]instanceof Function?e=n[o](t):n[o]?e=n[o]:(a.indexOf(o)<0&&a.push(o),e=r[a.indexOf(o)%r.length],n[o]=e),i instanceof Function?i(e,t):e}},e.prototype.generateLevelColor=function(){var t=this.config,e=t.color_pattern,n=t.color_threshold,r="value"===n.unit,i=n.values&&n.values.length?n.values:[],a=n.max||100;return y(n)&&y(e)?function(t){var n,o=e[e.length-1];for(n=0;n<i.length;n++)if((r?t:100*t/a)<i[n]){o=e[n];break}return o}:null},e.prototype.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,r){return this.getTooltipContent?this.getTooltipContent(t,e,n,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach((function(e){t[e]=this.additionalConfig[e]}),this),t},e.prototype.additionalConfig={},e.prototype.loadConfig=function(e){var n,r,i,a=this.config;Object.keys(a).forEach((function(o){n=e,r=o.split("_"),i=function e(){var i=r.shift();return i&&n&&"object"===t(n)&&i in n?(n=n[i],e()):i?void 0:n}(),d(i)&&(a[o]=i)}))},e.prototype.convertUrlToData=function(t,e,n,r,i){var a,o,s=this,u=e||"csv";"json"===u?(a=s.d3.json,o=s.convertJsonToData):"tsv"===u?(a=s.d3.tsv,o=s.convertXsvToData):(a=s.d3.csv,o=s.convertXsvToData),a(t,n).then((function(t){i.call(s,o.call(s,t,r))})).catch((function(t){throw t}))},e.prototype.convertXsvToData=function(t){var e=t.columns;return 0===t.length?{keys:e,rows:[e.reduce((function(t,e){return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[e]=null,t}({},e))}),{})]}:{keys:e,rows:[].concat(t)}},e.prototype.convertJsonToData=function(t,e){var n,r,i=this,a=[];return e?(e.x?(n=e.value.concat(e.x),i.config.data_x=e.x):n=e.value,a.push(n),t.forEach((function(t){var e=[];n.forEach((function(n){var r=i.findValueInJson(t,n);v(r)&&(r=null),e.push(r)})),a.push(e)})),r=i.convertRowsToData(a)):(Object.keys(t).forEach((function(e){a.push([e].concat(t[e]))})),r=i.convertColumnsToData(a)),r},e.prototype.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<n.length;++r){var i=n[r];if(!(i in t))return;t=t[i]}return t},e.prototype.convertRowsToData=function(t){for(var e=[],n=t[0],r=1;r<t.length;r++){for(var i={},a=0;a<t[r].length;a++){if(v(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");i[n[a]]=t[r][a]}e.push(i)}return{keys:n,rows:e}},e.prototype.convertColumnsToData=function(t){for(var e=[],n=[],r=0;r<t.length;r++){for(var i=t[r][0],a=1;a<t[r].length;a++){if(v(e[a-1])&&(e[a-1]={}),v(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");e[a-1][i]=t[r][a]}n.push(i)}return{keys:n,rows:e}},e.prototype.convertDataToTargets=function(t,e){var n,r,i,a,o=this,s=o.config;return f(t)?a=Object.keys(t[0]):(a=t.keys,t=t.rows),r=a.filter(o.isNotX,o),i=a.filter(o.isX,o),r.forEach((function(n){var r=o.getXKey(n);o.isCustomX()||o.isTimeSeries()?i.indexOf(r)>=0?o.data.xs[n]=(e&&o.data.xs[n]?o.data.xs[n]:[]).concat(t.map((function(t){return t[r]})).filter(m).map((function(t,e){return o.generateTargetX(t,n,e)}))):s.data_x?o.data.xs[n]=o.getOtherTargetXs():y(s.data_xs)&&(o.data.xs[n]=o.getXValuesOfXKey(r,o.data.targets)):o.data.xs[n]=t.map((function(t,e){return e}))})),r.forEach((function(t){if(!o.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')})),(n=r.map((function(e,n){var r=s.data_idConverter(e);return{id:r,id_org:e,values:t.map((function(t,i){var a,u=t[o.getXKey(e)],l=null===t[e]||isNaN(t[e])?null:+t[e];return o.isCustomX()&&o.isCategorized()&&!v(u)?(0===n&&0===i&&(s.axis_x_categories=[]),-1===(a=s.axis_x_categories.indexOf(u))&&(a=s.axis_x_categories.length,s.axis_x_categories.push(u))):a=o.generateTargetX(u,e,i),(v(t[e])||o.data.xs[e].length<=i)&&(a=void 0),{x:a,value:l,id:r}})).filter((function(t){return d(t.x)}))}}))).forEach((function(t){var e;s.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),e=0,t.values.forEach((function(t){t.index=e++})),o.data.xs[t.id].sort((function(t,e){return t-e}))})),o.hasNegativeValue=o.hasNegativeValueInTargets(n),o.hasPositiveValue=o.hasPositiveValueInTargets(n),s.data_type&&o.setTargetType(o.mapToIds(n).filter((function(t){return!(t in s.data_types)})),s.data_type),n.forEach((function(t){o.addCache(t.id_org,t)})),n},e.prototype.isX=function(t){var e,n,r,i=this.config;return i.data_x&&t===i.data_x||y(i.data_xs)&&(e=i.data_xs,n=t,r=!1,Object.keys(e).forEach((function(t){e[t]===n&&(r=!0)})),r)},e.prototype.isNotX=function(t){return!this.isX(t)},e.prototype.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:y(e.data_xs)?e.data_xs[t]:null},e.prototype.getXValuesOfXKey=function(t,e){var n,r=this;return(e&&y(e)?r.mapToIds(e):[]).forEach((function(e){r.getXKey(e)===t&&(n=r.data.xs[e])})),n},e.prototype.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&m(this.data.xs[t][e])?this.data.xs[t][e]:e},e.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},e.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},e.prototype.addXs=function(t){var e=this;Object.keys(t).forEach((function(n){e.config.data_xs[n]=t[n]}))},e.prototype.addName=function(t){var e;return t&&(t.name=void 0!==(e=this.config.data_names[t.id])?e:t.id),t},e.prototype.getValueOnIndex=function(t,e){var n=t.filter((function(t){return t.index===e}));return n.length?n[0]:null},e.prototype.updateTargetX=function(t,e){var n=this;t.forEach((function(t){t.values.forEach((function(r,i){r.x=n.generateTargetX(e[i],t.id,i)})),n.data.xs[t.id]=e}))},e.prototype.updateTargetXs=function(t,e){var n=this;t.forEach((function(t){e[t.id]&&n.updateTargetX([t],e[t.id])}))},e.prototype.generateTargetX=function(t,e,n){var r=this;return r.isTimeSeries()?r.parseDate(t||r.getXValue(e,n)):r.isCustomX()&&!r.isCategorized()?m(t)?+t:r.getXValue(e,n):n},e.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},e.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,(function(t){return t.values.length}))},e.prototype.mapToIds=function(t){return t.map((function(t){return t.id}))},e.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},e.prototype.hasTarget=function(t,e){var n,r=this.mapToIds(t);for(n=0;n<r.length;n++)if(r[n]===e)return!0;return!1},e.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},e.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},e.prototype.filterTargetsToShow=function(t){var e=this;return t.filter((function(t){return e.isTargetToShow(t.id)}))},e.prototype.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map((function(t){return t.values.map((function(t){return+t.x}))})))).values();return(e=this.isTimeSeries()?e.map((function(t){return new Date(+t)})):e.map((function(t){return+t}))).sort((function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}))},e.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},e.prototype.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},e.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},e.prototype.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},e.prototype.getValuesAsIdKeyed=function(t){var e={};return t.forEach((function(t){e[t.id]=[],t.values.forEach((function(n){e[t.id].push(n.value)}))})),e},e.prototype.checkValueInTargets=function(t,e){var n,r,i,a=Object.keys(t);for(n=0;n<a.length;n++)for(i=t[a[n]].values,r=0;r<i.length;r++)if(e(i[r].value))return!0;return!1},e.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},e.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},e.prototype.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},e.prototype.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},e.prototype.getOrderFunction=function(){var t=this.config,e=this.isOrderAsc(),n=this.isOrderDesc();if(e||n){var r=function(t,e){return t+Math.abs(e.value)};return function(t,n){var i=t.values.reduce(r,0),a=n.values.reduce(r,0);return e?a-i:i-a}}if(p(t.data_order))return t.data_order;if(f(t.data_order)){var i=t.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}},e.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&&t.sort(e),t},e.prototype.filterByX=function(t,e){return this.d3.merge(t.map((function(t){return t.values}))).filter((function(t){return t.x-e==0}))},e.prototype.filterRemoveNull=function(t){return t.filter((function(t){return m(t.value)}))},e.prototype.filterByXDomain=function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},e.prototype.hasDataLabel=function(){var e=this.config;return!("boolean"!=typeof e.data_labels||!e.data_labels)||!("object"!==t(e.data_labels)||!y(e.data_labels))},e.prototype.getDataLabelLength=function(t,e,n){var r=this,i=[0,0];return r.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return r.dataLabelFormat(t.id)(t)})).each((function(t,e){i[e]=1.3*this.getBoundingClientRect()[n]})).remove(),i},e.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},e.prototype.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},e.prototype.findClosestFromTargets=function(t,e){var n,r=this;return n=t.map((function(t){return r.findClosest(t.values,e)})),r.findClosest(n,e)},e.prototype.findClosest=function(t,e){var n,r=this,i=r.config.point_sensitivity;return t.filter((function(t){return t&&r.isBarType(t.id)})).forEach((function(t){var e=r.main.select("."+a.bars+r.getTargetSelectorSuffix(t.id)+" ."+a.bar+"-"+t.index).node();!n&&r.isWithinBar(r.d3.mouse(e),e)&&(n=t)})),t.filter((function(t){return t&&!r.isBarType(t.id)})).forEach((function(t){var a=r.dist(t,e);a<i&&(i=a,n=t)})),n},e.prototype.dist=function(t,e){var n=this.config,r=n.axis_rotated?1:0,i=n.axis_rotated?0:1,a=this.circleY(t,t.index),o=this.x(t.x);return Math.sqrt(Math.pow(o-e[r],2)+Math.pow(a-e[i],2))},e.prototype.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},e.prototype.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach((function(t){n[t]=e[t]})),this.redraw({withLegend:!0})),n},e.prototype.load=function(t,e){var n=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach((function(t){n.setTargetType(t.id,e.types&&e.types[t.id]?e.types[t.id]:e.type)})),n.data.targets.forEach((function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}})),n.data.targets=n.data.targets.concat(t)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},e.prototype.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,(function(n){e.load(e.convertDataToTargets(n),t)})):e.load(t.json?e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)):t.rows?e.convertDataToTargets(e.convertRowsToData(t.rows)):t.columns?e.convertDataToTargets(e.convertColumnsToData(t.columns)):null,t)},e.prototype.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter((function(t){return n.hasTarget(n.data.targets,t)})))&&0!==t.length?(n.svg.selectAll(t.map((function(t){return n.selectorTarget(t)}))).transition().style("opacity",0).remove().call(n.endall,e),t.forEach((function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll("."+a.legendItem+n.getTargetSelectorSuffix(t)).remove(),n.data.targets=n.data.targets.filter((function(e){return e.id!==t}))}))):e()},e.prototype.getYDomainMin=function(t){var e,n,r,i,a,o,s=this,u=s.config,l=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(u.data_groups.length>0)for(o=s.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter((function(t){return l.indexOf(t)>=0}))).length)for(r=i[0],o&&c[r]&&c[r].forEach((function(t,e){c[r][e]=t<0?t:0})),n=1;n<i.length;n++)c[a=i[n]]&&c[a].forEach((function(t,e){s.axis.getId(a)!==s.axis.getId(r)||!c[r]||o&&+t>0||(c[r][e]+=+t)}));return s.d3.min(Object.keys(c).map((function(t){return s.d3.min(c[t])})))},e.prototype.getYDomainMax=function(t){var e,n,r,i,a,o,s=this,u=s.config,l=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(u.data_groups.length>0)for(o=s.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter((function(t){return l.indexOf(t)>=0}))).length)for(r=i[0],o&&c[r]&&c[r].forEach((function(t,e){c[r][e]=t>0?t:0})),n=1;n<i.length;n++)c[a=i[n]]&&c[a].forEach((function(t,e){s.axis.getId(a)!==s.axis.getId(r)||!c[r]||o&&+t<0||(c[r][e]+=+t)}));return s.d3.max(Object.keys(c).map((function(t){return s.d3.max(c[t])})))},e.prototype.getYDomain=function(t,e,n){var r,i,a,o,s,l,c,f,d,h,p=this,g=p.config,v=t.filter((function(t){return p.axis.getId(t.id)===e})),_=n?p.filterByXDomain(v,n):v,b="y2"===e?g.axis_y2_min:g.axis_y_min,E="y2"===e?g.axis_y2_max:g.axis_y_max,T=p.getYDomainMin(_),S=p.getYDomainMax(_),w="y2"===e?g.axis_y2_center:g.axis_y_center,A=p.hasType("bar",_)&&g.bar_zerobased||p.hasType("area",_)&&g.area_zerobased,x="y2"===e?g.axis_y2_inverted:g.axis_y_inverted,C=p.hasDataLabel()&&g.axis_rotated,D=p.hasDataLabel()&&!g.axis_rotated;return T=m(b)?b:m(E)?T<E?T:E-10:T,S=m(E)?E:m(b)?b<S?S:b+10:S,0===_.length?"y2"===e?p.y2.domain():p.y.domain():(isNaN(T)&&(T=0),isNaN(S)&&(S=T),T===S&&(T<0?S=0:T=0),d=T>=0&&S>=0,h=T<=0&&S<=0,(m(b)&&d||m(E)&&h)&&(A=!1),A&&(d&&(T=0),h&&(S=0)),a=o=.1*(i=Math.abs(S-T)),void 0!==w&&(S=w+(s=Math.max(Math.abs(T),Math.abs(S))),T=w-s),C?(l=p.getDataLabelLength(T,S,"width"),c=u(p.y.range()),a+=i*((f=[l[0]/c,l[1]/c])[1]/(1-f[0]-f[1])),o+=i*(f[0]/(1-f[0]-f[1]))):D&&(l=p.getDataLabelLength(T,S,"height"),a+=p.axis.convertPixelsToAxisPadding(l[1],i),o+=p.axis.convertPixelsToAxisPadding(l[0],i)),"y"===e&&y(g.axis_y_padding)&&(a=p.axis.getPadding(g.axis_y_padding,"top",a,i),o=p.axis.getPadding(g.axis_y_padding,"bottom",o,i)),"y2"===e&&y(g.axis_y2_padding)&&(a=p.axis.getPadding(g.axis_y2_padding,"top",a,i),o=p.axis.getPadding(g.axis_y2_padding,"bottom",o,i)),A&&(d&&(o=T),h&&(a=-S)),r=[T-o,S+a],x?r.reverse():r)},e.prototype.getXDomainMin=function(t){var e=this,n=e.config;return d(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,(function(t){return e.d3.min(t.values,(function(t){return t.x}))}))},e.prototype.getXDomainMax=function(t){var e=this,n=e.config;return d(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,(function(t){return e.d3.max(t.values,(function(t){return t.x}))}))},e.prototype.getXDomainPadding=function(e){var n,r,i,a,o=this.config,s=e[1]-e[0];return r=this.isCategorized()?0:this.hasType("bar")?(n=this.getMaxDataCount())>1?s/(n-1)/2:.5:.01*s,"object"===t(o.axis_x_padding)&&y(o.axis_x_padding)?(i=m(o.axis_x_padding.left)?o.axis_x_padding.left:r,a=m(o.axis_x_padding.right)?o.axis_x_padding.right:r):i=a="number"==typeof o.axis_x_padding?o.axis_x_padding:r,{left:i,right:a}},e.prototype.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],r=n[0],i=n[1],a=e.getXDomainPadding(n),o=0,s=0;return r-i!=0||e.isCategorized()||(e.isTimeSeries()?(r=new Date(.5*r.getTime()),i=new Date(1.5*i.getTime())):(r=0===r?1:.5*r,i=0===i?-1:1.5*i)),(r||0===r)&&(o=e.isTimeSeries()?new Date(r.getTime()-a.left):r-a.left),(i||0===i)&&(s=e.isTimeSeries()?new Date(i.getTime()+a.right):i+a.right),[o,s]},e.prototype.updateXDomain=function(t,e,n,r,i){var a=this,o=a.config;return n&&(a.x.domain(i||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.update(),a.subX.domain(a.x.domain()),a.brush&&a.brush.updateScale(a.subX)),e&&a.x.domain(i||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.selectionAsValue())),r&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},e.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],r=e[1];return t[0]<=n&&(t[1]=n-t[0]+ +t[1],t[0]=n),r<=t[1]&&(t[0]=+t[0]-(t[1]-r),t[1]=r),t},e.prototype.drag=function(t){var e,n,r,i,o,s,u,l,f=this,d=f.config,h=f.main,p=f.d3;f.hasArcType()||d.data_selection_enabled&&d.data_selection_multiple&&(e=f.dragStart[0],n=f.dragStart[1],r=t[0],i=t[1],o=Math.min(e,r),s=Math.max(e,r),u=d.data_selection_grouped?f.margin.top:Math.min(n,i),l=d.data_selection_grouped?f.height:Math.max(n,i),h.select("."+a.dragarea).attr("x",o).attr("y",u).attr("width",s-o).attr("height",l-u),h.selectAll("."+a.shapes).selectAll("."+a.shape).filter((function(t){return d.data_selection_isselectable(t)})).each((function(t,e){var n,r,i,d,h=p.select(this),g=h.classed(a.SELECTED),v=h.classed(a.INCLUDED),m=!1;if(h.classed(a.circle))n=1*h.attr("cx"),r=1*h.attr("cy"),i=f.togglePoint,m=o<n&&n<s&&u<r&&r<l;else{if(!h.classed(a.bar))return;r=(d=c(this)).y,i=f.togglePath,m=!(s<(n=d.x)||n+d.width<o||l<r||r+d.height<u)}m^v&&(h.classed(a.INCLUDED,!v),h.classed(a.SELECTED,!g),i.call(f,!g,h,t,e))})))},e.prototype.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+a.chart).append("rect").attr("class",a.dragarea).style("opacity",.1),e.dragging=!0)},e.prototype.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+a.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+a.shape).classed(a.INCLUDED,!1),t.dragging=!1)},e.prototype.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,r=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,i,a){return("y2"===e.axis.getId(a)?r:n).call(e,t,i)}},e.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},e.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},e.prototype.defaultValueFormat=function(t){return m(t)?+t:""},e.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},e.prototype.dataLabelFormat=function(e){var n=this.config.data_labels,r=function(t){return m(t)?+t:""};return"function"==typeof n.format?n.format:"object"===t(n.format)?n.format[e]?!0===n.format[e]?r:n.format[e]:function(){return""}:r},e.prototype.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",a.grid),e.grid_x_show&&t.grid.append("g").attr("class",a.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",a.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",a.xgridFocus).append("line").attr("class",a.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},e.prototype.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",a.grid+" "+a.gridLines),t.gridLines.append("g").attr("class",a.xgridLines),t.gridLines.append("g").attr("class",a.ygridLines),t.xgridLines=e.selectAll([])},e.prototype.updateXGrid=function(t){var e=this,n=e.config,r=e.d3,i=e.generateGridData(n.grid_x_type,e.x),o=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-o},y2:function(t){return e.x(t)-o}}:{x1:function(t){return e.x(t)+o},x2:function(t){return e.x(t)+o},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+r.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1};var s=e.main.select("."+a.xgrids).selectAll("."+a.xgrid).data(i),u=s.enter().append("line").attr("class",a.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=u.merge(s),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),s.exit().remove()},e.prototype.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),r=t.main.select("."+a.ygrids).selectAll("."+a.ygrid).data(n),i=r.enter().append("line").attr("class",a.ygrid);t.ygrid=i.merge(r),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),r.exit().remove(),t.smoothLines(t.ygrid,"grid")},e.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"},e.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},e.prototype.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},e.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},e.prototype.updateGrid=function(t){var e,n,r,i,o=this,s=o.main,u=o.config,l=o.xv.bind(o),c=o.yv.bind(o),f=o.xGridTextX.bind(o),d=o.yGridTextX.bind(o);o.grid.style("visibility",o.hasArcType()?"hidden":"visible"),s.select("line."+a.xgridFocus).style("visibility","hidden"),u.grid_x_show&&o.updateXGrid(),(n=(e=s.select("."+a.xgridLines).selectAll("."+a.xgridLine).data(u.grid_x_lines)).enter().append("g").attr("class",(function(t){return a.xgridLine+(t.class?" "+t.class:"")}))).append("line").attr("x1",u.axis_rotated?0:l).attr("x2",u.axis_rotated?o.width:l).attr("y1",u.axis_rotated?l:0).attr("y2",u.axis_rotated?l:o.height).style("opacity",0),n.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",u.axis_rotated?"":"rotate(-90)").attr("x",u.axis_rotated?d:f).attr("y",l).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.xgridLines=n.merge(e),e.exit().transition().duration(t).style("opacity",0).remove(),u.grid_y_show&&o.updateYGrid(),(i=(r=s.select("."+a.ygridLines).selectAll("."+a.ygridLine).data(u.grid_y_lines)).enter().append("g").attr("class",(function(t){return a.ygridLine+(t.class?" "+t.class:"")}))).append("line").attr("x1",u.axis_rotated?c:0).attr("x2",u.axis_rotated?c:o.width).attr("y1",u.axis_rotated?0:c).attr("y2",u.axis_rotated?o.height:c).style("opacity",0),i.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",u.axis_rotated?"rotate(-90)":"").attr("x",u.axis_rotated?f:d).attr("y",c).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.ygridLines=i.merge(r),o.ygridLines.select("line").transition().duration(t).attr("x1",u.axis_rotated?c:0).attr("x2",u.axis_rotated?c:o.width).attr("y1",u.axis_rotated?0:c).attr("y2",u.axis_rotated?o.height:c).style("opacity",1),o.ygridLines.select("text").transition().duration(t).attr("x",u.axis_rotated?o.xGridTextX.bind(o):o.yGridTextX.bind(o)).attr("y",c).text((function(t){return t.text})).style("opacity",1),r.exit().transition().duration(t).style("opacity",0).remove()},e.prototype.redrawGrid=function(t,e){var n=this,r=n.config,i=n.xv.bind(n),a=n.xgridLines.select("line"),o=n.xgridLines.select("text");return[(t?a.transition(e):a).attr("x1",r.axis_rotated?0:i).attr("x2",r.axis_rotated?n.width:i).attr("y1",r.axis_rotated?i:0).attr("y2",r.axis_rotated?i:n.height).style("opacity",1),(t?o.transition(e):o).attr("x",r.axis_rotated?n.yGridTextX.bind(n):n.xGridTextX.bind(n)).attr("y",i).text((function(t){return t.text})).style("opacity",1)]},e.prototype.showXGridFocus=function(t){var e=this,n=e.config,r=t.filter((function(t){return t&&m(t.value)})),i=e.main.selectAll("line."+a.xgridFocus),o=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(i.style("visibility","visible").data([r[0]]).attr(n.axis_rotated?"y1":"x1",o).attr(n.axis_rotated?"y2":"x2",o),e.smoothLines(i,"grid")))},e.prototype.hideXGridFocus=function(){this.main.select("line."+a.xgridFocus).style("visibility","hidden")},e.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+a.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},e.prototype.generateGridData=function(t,e){var n,r,i,o,s=[],u=this.main.select("."+a.axisX).selectAll(".tick").size();if("year"===t)for(r=(n=this.getXDomain())[0].getFullYear(),i=n[1].getFullYear(),o=r;o<=i;o++)s.push(new Date(o+"-01-01 00:00:00"));else(s=e.ticks(10)).length>u&&(s=s.filter((function(t){return(""+t).indexOf(".")<0})));return s},e.prototype.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach((function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)})),n}:function(){return!0}},e.prototype.removeGridLines=function(t,e){var n=this.config,r=this.getGridFilterToRemove(t),i=function(t){return!r(t)},o=e?a.xgridLine:a.ygridLine;this.main.select("."+(e?a.xgridLines:a.ygridLines)).selectAll("."+o).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},e.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+a.chart).append("g").attr("class",a.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+a.eventRects).append("rect").attr("class",a.eventRect),e.zoom_enabled&&t.zoom&&(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},e.prototype.redrawEventRect=function(){var t,e,n=this,r=n.d3,i=n.config;function o(){n.svg.select("."+a.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}t=n.width,e=n.height,n.main.select("."+a.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null),n.eventRect.attr("x",0).attr("y",0).attr("width",t).attr("height",e).on("mouseout",i.interaction_enabled?function(){i&&(n.hasArcType()||o())}:null).on("mousemove",i.interaction_enabled?function(){var t,e,s,u;n.dragging||n.hasArcType(t)||(t=n.filterTargetsToShow(n.data.targets),e=r.mouse(this),s=n.findClosestFromTargets(t,e),!n.mouseover||s&&s.id===n.mouseover.id||(i.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),s?(u=(n.isScatterType(s)||!i.tooltip_grouped?[s]:n.filterByX(t,s.x)).map((function(t){return n.addName(t)})),n.showTooltip(u,this),i.point_focus_expand_enabled&&(n.unexpandCircles(),u.forEach((function(t){n.expandCircles(t.index,t.id,!1)}))),n.expandBars(s.index,s.id,!0),n.showXGridFocus(u),(n.isBarType(s.id)||n.dist(s,e)<i.point_sensitivity)&&(n.svg.select("."+a.eventRect).style("cursor","pointer"),n.mouseover||(i.data_onmouseover.call(n.api,s),n.mouseover=s))):o())}:null).on("click",i.interaction_enabled?function(){var t,e,o;n.hasArcType(t)||(t=n.filterTargetsToShow(n.data.targets),e=r.mouse(this),(o=n.findClosestFromTargets(t,e))&&(n.isBarType(o.id)||n.dist(o,e)<i.point_sensitivity)&&(n.isScatterType(o)||!i.data_selection_grouped?[o]:n.filterByX(t,o.x)).forEach((function(t){n.main.selectAll("."+a.shapes+n.getTargetSelectorSuffix(t.id)).selectAll("."+a.shape+"-"+t.index).each((function(){(i.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,t.index),i.data_onclick.call(n.api,t,this))}))})))}:null).call(i.interaction_enabled&&i.data_selection_draggable&&n.drag?r.drag().on("drag",(function(){n.drag(r.mouse(this))})).on("start",(function(){n.dragstart(r.mouse(this))})).on("end",(function(){n.dragend()})):function(){})},e.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},e.prototype.dispatchEvent=function(t,e){var n=this.main.select("."+a.eventRect).node(),r=n.getBoundingClientRect(),i=r.left+(e?e[0]:0),o=r.top+(e?e[1]:0),s=document.createEvent("MouseEvents");s.initMouseEvent(t,!0,!0,window,0,i,o,i,o,!1,!1,!1,!1,0,null),n.dispatchEvent(s)},e.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},e.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},e.prototype.updateSizeForLegend=function(t,e){var n=this,r=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+r.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-r.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+r.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-r.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?i.left:0}},e.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},e.prototype.updateLegendStep=function(t){this.legendStep=t},e.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},e.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},e.prototype.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},e.prototype.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},e.prototype.opacityForLegend=function(t){return t.classed(a.legendItemHidden)?null:1},e.prototype.opacityForUnfocusedLegend=function(t){return t.classed(a.legendItemHidden)?null:.3},e.prototype.toggleFocusLegend=function(t,e){var n=this;t=n.mapToTargetIds(t),n.legend.selectAll("."+a.legendItem).filter((function(e){return t.indexOf(e)>=0})).classed(a.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))}))},e.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+a.legendItem).classed(a.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(e.select(this))}))},e.prototype.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(e.d3.select(this))}))},e.prototype.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&h(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},e.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},e.prototype.updateLegend=function(t,e,n){var r,i,o,s,u,c,f,h,p,g,v,m,y,_,b,E,T=this,S=T.config,w=0,A=0,x=S.legend_item_tile_width+5,C=0,D={},I={},R={},k=[0],O={},P=0;function M(e,n,r){var i,o,s=0===r,u=r===t.length-1,l=function(t,e){return T.legendItemTextBox[e]||(T.legendItemTextBox[e]=T.getTextRect(t.textContent,a.legendItem,t)),T.legendItemTextBox[e]}(e,n),c=l.width+x+(!u||T.isLegendRight||T.isLegendInset?10:0)+S.legend_padding,f=l.height+4,d=T.isLegendRight||T.isLegendInset?f:c,h=T.isLegendRight||T.isLegendInset?T.getLegendHeight():T.getLegendWidth();function p(t,e){e||(i=(h-C-d)/2)<10&&(i=(h-d)/2,C=0,P++),O[t]=P,k[P]=T.isLegendInset?10:i,D[t]=C,C+=d}s&&(C=0,P=0,w=0,A=0),!S.legend_show||T.isLegendToShow(n)?(I[n]=c,R[n]=f,(!w||c>=w)&&(w=c),(!A||f>=A)&&(A=f),o=T.isLegendRight||T.isLegendInset?A:w,S.legend_equally?(Object.keys(I).forEach((function(t){I[t]=w})),Object.keys(R).forEach((function(t){R[t]=A})),(i=(h-o*t.length)/2)<10?(C=0,P=0,t.forEach((function(t){p(t)}))):p(n,!0)):p(n)):I[n]=R[n]=O[n]=D[n]=0}t=t.filter((function(t){return!d(S.data_names[t])||null!==S.data_names[t]})),v=l(e=e||{},"withTransition",!0),m=l(e,"withTransitionForTransform",!0),T.isLegendInset&&T.updateLegendStep(P=S.legend_inset_step?S.legend_inset_step:t.length),T.isLegendRight?(r=function(t){return w*O[t]},s=function(t){return k[O[t]]+D[t]}):T.isLegendInset?(r=function(t){return w*O[t]+10},s=function(t){return k[O[t]]+D[t]}):(r=function(t){return k[O[t]]+D[t]},s=function(t){return A*O[t]}),i=function(t,e){return r(t,e)+4+S.legend_item_tile_width},u=function(t,e){return s(t,e)+9},o=function(t,e){return r(t,e)},c=function(t,e){return s(t,e)-5},f=function(t,e){return r(t,e)-2},h=function(t,e){return r(t,e)-2+S.legend_item_tile_width},p=function(t,e){return s(t,e)+4},(g=T.legend.selectAll("."+a.legendItem).data(t).enter().append("g").attr("class",(function(t){return T.generateClass(a.legendItem,t)})).style("visibility",(function(t){return T.isLegendToShow(t)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(t){S.legend_item_onclick?S.legend_item_onclick.call(T,t):T.d3.event.altKey?(T.api.hide(),T.api.show(t)):(T.api.toggle(t),T.isTargetToShow(t)?T.api.focus(t):T.api.revert())})).on("mouseover",(function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(T,t):(T.d3.select(this).classed(a.legendItemFocused,!0),!T.transiting&&T.isTargetToShow(t)&&T.api.focus(t))})).on("mouseout",(function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(T,t):(T.d3.select(this).classed(a.legendItemFocused,!1),T.api.revert())}))).append("text").text((function(t){return d(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){M(this,t,e)})).style("pointer-events","none").attr("x",T.isLegendRight||T.isLegendInset?i:-200).attr("y",T.isLegendRight||T.isLegendInset?-200:u),g.append("rect").attr("class",a.legendItemEvent).style("fill-opacity",0).attr("x",T.isLegendRight||T.isLegendInset?o:-200).attr("y",T.isLegendRight||T.isLegendInset?-200:c),g.append("line").attr("class",a.legendItemTile).style("stroke",T.color).style("pointer-events","none").attr("x1",T.isLegendRight||T.isLegendInset?f:-200).attr("y1",T.isLegendRight||T.isLegendInset?-200:p).attr("x2",T.isLegendRight||T.isLegendInset?h:-200).attr("y2",T.isLegendRight||T.isLegendInset?-200:p).attr("stroke-width",S.legend_item_tile_height),E=T.legend.select("."+a.legendBackground+" rect"),T.isLegendInset&&w>0&&0===E.size()&&(E=T.legend.insert("g","."+a.legendItem).attr("class",a.legendBackground).append("rect")),y=T.legend.selectAll("text").data(t).text((function(t){return d(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){M(this,t,e)})),(v?y.transition():y).attr("x",i).attr("y",u),_=T.legend.selectAll("rect."+a.legendItemEvent).data(t),(v?_.transition():_).attr("width",(function(t){return I[t]})).attr("height",(function(t){return R[t]})).attr("x",o).attr("y",c),b=T.legend.selectAll("line."+a.legendItemTile).data(t),(v?b.transition():b).style("stroke",T.levelColor?function(t){return T.levelColor(T.cache[t].values[0].value)}:T.color).attr("x1",f).attr("y1",p).attr("x2",h).attr("y2",p),E&&(v?E.transition():E).attr("height",T.getLegendHeight()-12).attr("width",w*(P+1)+10),T.legend.selectAll("."+a.legendItem).classed(a.legendItemHidden,(function(t){return!T.isTargetToShow(t)})),T.updateLegendItemWidth(w),T.updateLegendItemHeight(A),T.updateLegendStep(P),T.updateSizes(),T.updateScales(),T.updateSvgSize(),T.transformAll(m,n),T.legendHasRendered=!0},e.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",a.regions)},e.prototype.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var r=e.main.select("."+a.regions).selectAll("."+a.region).data(n.regions),i=r.enter().append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",0);e.mainRegion=i.merge(r).attr("class",e.classRegion.bind(e)),r.exit().transition().duration(t).style("opacity",0).remove()},e.prototype.redrawRegion=function(t,e){var n=this,r=n.mainRegion;return[(t?r.transition(e):r).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n)).style("fill-opacity",(function(t){return m(t.opacity)?t.opacity:.1}))]},e.prototype.regionX=function(t){var e=this,n=e.config;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?("y"===t.axis?e.y:e.y2)(t.start):0:n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},e.prototype.regionY=function(t){var e=this,n=e.config;return"y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?("y"===t.axis?e.y:e.y2)(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},e.prototype.regionWidth=function(t){var e,n=this,r=n.config,i=n.regionX(t);return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated&&"end"in t?("y"===t.axis?n.y:n.y2)(t.end):n.width:r.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<i?0:e-i},e.prototype.regionHeight=function(t){var e,n=this,r=n.config,i=this.regionY(t);return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated?n.height:"start"in t?("y"===t.axis?n.y:n.y2)(t.start):n.height:r.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<i?0:e-i},e.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis},e.prototype.getScale=function(t,e,n){return(n?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},e.prototype.getX=function(t,e,n,r){var i,a=this.getScale(t,e,this.isTimeSeries()),o=n?a.domain(n):a;for(i in this.isCategorized()?(r=r||function(){return 0},a=function(t,e){var n=o(t)+r(t);return e?n:Math.ceil(n)}):a=function(t,e){var n=o(t);return e?n:Math.ceil(n)},o)a[i]=o[i];return a.orgDomain=function(){return o.domain()},this.isCategorized()&&(a.domain=function(t){return arguments.length?(o.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},e.prototype.getY=function(t,e,n){var r=this.getScale(t,e,this.isTimeSeriesY());return n&&r.domain(n),r},e.prototype.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},e.prototype.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},e.prototype.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),(function(){return t.xAxis.tickOffset()})),t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,(function(e){return e%1?0:t.subXAxis.tickOffset()})),t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),n||t.brush&&t.brush.updateScale(t.subX),t.updateArc&&t.updateArc()},e.prototype.selectPoint=function(t,e,n){var r=this,i=r.config,o=(i.axis_rotated?r.circleY:r.circleX).bind(r),s=(i.axis_rotated?r.circleX:r.circleY).bind(r),u=r.pointSelectR.bind(r);i.data_onselected.call(r.api,e,t.node()),r.main.select("."+a.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+a.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",(function(){return r.generateClass(a.selectedCircle,n)})).attr("cx",o).attr("cy",s).attr("stroke",(function(){return r.color(e)})).attr("r",(function(t){return 1.4*r.pointSelectR(t)})).transition().duration(100).attr("r",u)},e.prototype.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+a.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+a.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},e.prototype.togglePoint=function(t,e,n,r){t?this.selectPoint(e,n,r):this.unselectPoint(e,n,r)},e.prototype.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.d3.rgb(n.color(e)).brighter(.75)}))},e.prototype.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.color(e)}))},e.prototype.togglePath=function(t,e,n,r){t?this.selectPath(e,n,r):this.unselectPath(e,n,r)},e.prototype.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},e.prototype.toggleShape=function(t,e,n){var r=this,i=r.d3,o=r.config,s=i.select(t),u=s.classed(a.SELECTED),l=r.getToggle(t,e).bind(r);o.data_selection_enabled&&o.data_selection_isselectable(e)&&(o.data_selection_multiple||r.main.selectAll("."+a.shapes+(o.data_selection_grouped?r.getTargetSelectorSuffix(e.id):"")).selectAll("."+a.shape).each((function(t,e){var n=i.select(this);n.classed(a.SELECTED)&&l(!1,n.classed(a.SELECTED,!1),t,e)})),s.classed(a.SELECTED,!u),l(!u,s,e,n))},e.prototype.initBar=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartBars)},e.prototype.updateTargetsForBar=function(t){var e=this,n=e.config,r=e.classChartBar.bind(e),i=e.classBars.bind(e),o=e.classFocus.bind(e);e.main.select("."+a.chartBars).selectAll("."+a.chartBar).data(t).attr("class",(function(t){return r(t)+o(t)})).enter().append("g").attr("class",r).style("pointer-events","none").append("g").attr("class",i).style("cursor",(function(t){return n.data_selection_isselectable(t)?"pointer":null}))},e.prototype.updateBar=function(t){var e=this,n=e.barData.bind(e),r=e.classBar.bind(e),i=e.initialOpacity.bind(e),o=function(t){return e.color(t.id)},s=e.main.selectAll("."+a.bars).selectAll("."+a.bar).data(n),u=s.enter().append("path").attr("class",r).style("stroke",o).style("fill",o);e.mainBar=u.merge(s).style("opacity",i),s.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawBar=function(t,e,n){return[(e?this.mainBar.transition(n):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},e.prototype.getBarW=function(t,e){var n=this.config,r="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&r>n.bar_width_max?n.bar_width_max:r},e.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+a.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+a.bar+(m(t)?"-"+t:""))},e.prototype.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(a.EXPANDED,!0)},e.prototype.unexpandBars=function(t){this.getBars(t).classed(a.EXPANDED,!1)},e.prototype.generateDrawBar=function(t,e){var n=this.config,r=this.generateGetBarPoints(t,e);return function(t,e){var i=r(t,e),a=n.axis_rotated?1:0,o=n.axis_rotated?0:1;return"M "+i[0][a]+","+i[0][o]+" L"+i[1][a]+","+i[1][o]+" L"+i[2][a]+","+i[2][o]+" L"+i[3][a]+","+i[3][o]+" z"}},e.prototype.generateGetBarPoints=function(t,e){var n=this,r=t.__max__+1,i=n.getBarW(e?n.subXAxis:n.xAxis,r),a=n.getShapeX(i,r,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isBarType,t,!!e),u=i*(n.config.bar_space/2),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),c=s(t,e)||r,f=a(t),d=o(t);return n.config.axis_rotated&&(0<t.value&&d<r||t.value<0&&r<d)&&(d=r),[[f+u,c],[f+u,d-(r-c)],[f+i-u,d-(r-c)],[f+i-u,c]]}},e.prototype.isWithinBar=function(t,e){var n=e.getBoundingClientRect(),r=e.pathSegList.getItem(0),i=e.pathSegList.getItem(1),a=Math.min(r.x,i.x),o=Math.min(r.y,i.y);return a-2<t[0]&&t[0]<a+n.width+2&&o-2<t[1]&&t[1]<o+n.height+2},e.prototype.getShapeIndices=function(t){var e,n,r=this.config,i={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach((function(t){for(e=0;e<r.data_groups.length;e++)if(!(r.data_groups[e].indexOf(t.id)<0))for(n=0;n<r.data_groups[e].length;n++)if(r.data_groups[e][n]in i){i[t.id]=i[r.data_groups[e][n]];break}v(i[t.id])&&(i[t.id]=a++)})),i.__max__=a-1,i},e.prototype.getShapeX=function(t,e,n,r){var i=r?this.subX:this.x;return function(r){var a=r.id in n?n[r.id]:0;return r.x||0===r.x?i(r.x)-t*(e/2-a):0}},e.prototype.getShapeY=function(t){var e=this;return function(n){return(t?e.getSubYScale(n.id):e.getYScale(n.id))(n.value)}},e.prototype.getShapeOffset=function(t,e,n){var r=this,i=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),a=i.map((function(t){return t.id}));return function(t,o){var s=n?r.getSubYScale(t.id):r.getYScale(t.id),u=s(0),l=u;return i.forEach((function(n){var i=r.isStepType(t)?r.convertValuesToStep(n.values):n.values;n.id!==t.id&&e[n.id]===e[t.id]&&a.indexOf(n.id)<a.indexOf(t.id)&&(void 0!==i[o]&&+i[o].x==+t.x||(o=-1,i.forEach((function(e,n){e.x===t.x&&(o=n)}))),o in i&&i[o].value*t.value>=0&&(l+=s(i[o].value)-u))})),l}},e.prototype.isWithinShape=function(t,e){var n,r=this,i=r.d3.select(t);return r.isTargetToShow(e.id)?"circle"===t.nodeName?n=r.isStepType(e)?r.isWithinStep(t,r.getYScale(e.id)(e.value)):r.isWithinCircle(t,1.5*r.pointSelectR(e)):"path"===t.nodeName&&(n=!i.classed(a.bar)||r.isWithinBar(r.d3.mouse(t),t)):n=!1,n},e.prototype.getInterpolate=function(t){var e=this,n=e.d3,r={linear:n.curveLinear,"linear-closed":n.curveLinearClosed,basis:n.curveBasis,"basis-open":n.curveBasisOpen,"basis-closed":n.curveBasisClosed,bundle:n.curveBundle,cardinal:n.curveCardinal,"cardinal-open":n.curveCardinalOpen,"cardinal-closed":n.curveCardinalClosed,monotone:n.curveMonotoneX,step:n.curveStep,"step-before":n.curveStepBefore,"step-after":n.curveStepAfter};return e.isSplineType(t)?r[e.config.spline_interpolation_type]||r.cardinal:e.isStepType(t)?r[e.config.line_step_type]:r.linear},e.prototype.initLine=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartLines)},e.prototype.updateTargetsForLine=function(t){var e,n=this,r=n.config,i=n.classChartLine.bind(n),o=n.classLines.bind(n),s=n.classAreas.bind(n),u=n.classCircles.bind(n),l=n.classFocus.bind(n);(e=n.main.select("."+a.chartLines).selectAll("."+a.chartLine).data(t).attr("class",(function(t){return i(t)+l(t)})).enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none")).append("g").attr("class",o),e.append("g").attr("class",s),e.append("g").attr("class",(function(t){return n.generateClass(a.selectedCircles,t.id)})),e.append("g").attr("class",u).style("cursor",(function(t){return r.data_selection_isselectable(t)?"pointer":null})),t.forEach((function(t){n.main.selectAll("."+a.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+a.selectedCircle).each((function(e){e.value=t.values[e.index].value}))}))},e.prototype.updateLine=function(t){var e=this,n=e.main.selectAll("."+a.lines).selectAll("."+a.line).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=r.merge(n).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",(function(t){return e.isStepType(t)?"crispEdges":""})).attr("transform",null),n.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawLine=function(t,e,n){return[(e?this.mainLine.transition(n):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},e.prototype.generateDrawLine=function(t,e){var n=this,r=n.config,i=n.d3.line(),a=n.generateGetLinePoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},u=function(t,e){return r.data_groups.length>0?a(t,e)[0][1]:o.call(n,t.id)(t.value)};return i=r.axis_rotated?i.x(u).y(s):i.x(s).y(u),r.line_connectNull||(i=i.defined((function(t){return null!=t.value}))),function(t){var a,s=r.line_connectNull?n.filterRemoveNull(t.values):t.values,u=e?n.subX:n.x,l=o.call(n,t.id),c=0,f=0;return n.isLineType(t)?r.data_regions[t.id]?a=n.lineWithRegions(s,u,l,r.data_regions[t.id]):(n.isStepType(t)&&(s=n.convertValuesToStep(s)),a=i.curve(n.getInterpolate(t))(s)):(s[0]&&(c=u(s[0].x),f=l(s[0].value)),a=r.axis_rotated?"M "+f+" "+c:"M "+c+" "+f),a||"M 0 0"}},e.prototype.generateGetLinePoints=function(t,e){var n=this,r=n.config,i=n.getShapeX(0,t.__max__+1,t,!!e),a=n.getShapeY(!!e),o=n.getShapeOffset(n.isLineType,t,!!e),s=e?n.getSubYScale:n.getYScale;return function(t,e){var u=s.call(n,t.id)(0),l=o(t,e)||u,c=i(t),f=a(t);return r.axis_rotated&&(0<t.value&&f<u||t.value<0&&u<f)&&(f=u),[[c,f-(u-l)],[c,f-(u-l)],[c,f-(u-l)],[c,f-(u-l)]]}},e.prototype.lineWithRegions=function(t,e,n,r){var i,a,o,s,u,l,c,f,h,p,g,m=this,y=m.config,_="M",b=m.isCategorized()?.5:0,E=[];function T(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}if(d(r))for(i=0;i<r.length;i++)E[i]={},E[i].start=v(r[i].start)?t[0].x:m.isTimeSeries()?m.parseDate(r[i].start):r[i].start,E[i].end=v(r[i].end)?t[t.length-1].x:m.isTimeSeries()?m.parseDate(r[i].end):r[i].end;function S(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(p=y.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)},g=y.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)},o=m.isTimeSeries()?function(t,r,i,a){var o=t.x.getTime(),s=r.x-t.x,l=new Date(o+s*i),c=new Date(o+s*(i+a));return S(y.axis_rotated?[[n(u(i)),e(l)],[n(u(i+a)),e(c)]]:[[e(l),n(u(i))],[e(c),n(u(i+a))]])}:function(t,r,i,a){return S(y.axis_rotated?[[n(u(i),!0),e(s(i))],[n(u(i+a),!0),e(s(i+a))]]:[[e(s(i),!0),n(u(i))],[e(s(i+a),!0),n(u(i+a))]])},i=0;i<t.length;i++)if(v(E)||!T(t[i].x,E))_+=" "+p(t[i])+" "+g(t[i]);else for(s=m.getScale(t[i-1].x+b,t[i].x+b,m.isTimeSeries()),u=m.getScale(t[i-1].value,t[i].value),l=e(t[i].x)-e(t[i-1].x),c=n(t[i].value)-n(t[i-1].value),h=2*(f=2/Math.sqrt(Math.pow(l,2)+Math.pow(c,2))),a=f;a<=1;a+=h)_+=o(t[i-1],t[i],a,f);return _},e.prototype.updateArea=function(t){var e=this,n=e.d3,r=e.main.selectAll("."+a.areas).selectAll("."+a.area).data(e.lineData.bind(e)),i=r.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}));e.mainArea=i.merge(r).style("opacity",e.orgAreaOpacity),r.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawArea=function(t,e,n){return[(e?this.mainArea.transition(n):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},e.prototype.generateDrawArea=function(t,e){var n=this,r=n.config,i=n.d3.area(),a=n.generateGetAreaPoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},u=function(t,e){return r.data_groups.length>0?a(t,e)[0][1]:o.call(n,t.id)(n.getAreaBaseValue(t.id))},l=function(t,e){return r.data_groups.length>0?a(t,e)[1][1]:o.call(n,t.id)(t.value)};return i=r.axis_rotated?i.x0(u).x1(l).y(s):i.x(s).y0(r.area_above?0:u).y1(l),r.line_connectNull||(i=i.defined((function(t){return null!==t.value}))),function(t){var e,a=r.line_connectNull?n.filterRemoveNull(t.values):t.values,o=0,s=0;return n.isAreaType(t)?(n.isStepType(t)&&(a=n.convertValuesToStep(a)),e=i.curve(n.getInterpolate(t))(a)):(a[0]&&(o=n.x(a[0].x),s=n.getYScale(t.id)(a[0].value)),e=r.axis_rotated?"M "+s+" "+o:"M "+o+" "+s),e||"M 0 0"}},e.prototype.getAreaBaseValue=function(){return 0},e.prototype.generateGetAreaPoints=function(t,e){var n=this,r=n.config,i=n.getShapeX(0,t.__max__+1,t,!!e),a=n.getShapeY(!!e),o=n.getShapeOffset(n.isAreaType,t,!!e),s=e?n.getSubYScale:n.getYScale;return function(t,e){var u=s.call(n,t.id)(0),l=o(t,e)||u,c=i(t),f=a(t);return r.axis_rotated&&(0<t.value&&f<u||t.value<0&&u<f)&&(f=u),[[c,l],[c,f-(u-l)],[c,f-(u-l)],[c,l]]}},e.prototype.updateCircle=function(t,e){var n=this,r=n.main.selectAll("."+a.circles).selectAll("."+a.circle).data(n.lineOrScatterData.bind(n)),i=r.enter().append("circle").attr("class",n.classCircle.bind(n)).attr("cx",t).attr("cy",e).attr("r",n.pointR.bind(n)).style("fill",n.color);n.mainCircle=i.merge(r).style("opacity",n.initialOpacityForCircle.bind(n)),r.exit().style("opacity",0)},e.prototype.redrawCircle=function(t,e,n,r){var i=this,o=i.main.selectAll("."+a.selectedCircle);return[(n?i.mainCircle.transition(r):i.mainCircle).style("opacity",this.opacityForCircle.bind(i)).style("fill",i.color).attr("cx",t).attr("cy",e),(n?o.transition(r):o).attr("cx",t).attr("cy",e)]},e.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},e.prototype.updateCircleY=function(){var t,e,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),e=n.generateGetLinePoints(t),n.circleY=function(t,n){return e(t,n)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}},e.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+a.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+a.circle+(m(t)?"-"+t:""))},e.prototype.expandCircles=function(t,e,n){var r=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(a.EXPANDED,!0).attr("r",r)},e.prototype.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter((function(){return e.d3.select(this).classed(a.EXPANDED)})).classed(a.EXPANDED,!1).attr("r",n)},e.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:p(e.point_r)?e.point_r(t):e.point_r},e.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?p(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},e.prototype.pointSelectR=function(t){var e=this.config;return p(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},e.prototype.isWithinCircle=function(t,e){var n=this.d3,r=n.mouse(t),i=n.select(t),a=+i.attr("cx"),o=+i.attr("cy");return Math.sqrt(Math.pow(a-r[0],2)+Math.pow(o-r[1],2))<e},e.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},e.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},e.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},e.prototype.getCurrentPaddingTop=function(){var t=this.config,e=m(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},e.prototype.getCurrentPaddingBottom=function(){var t=this.config;return m(t.padding_bottom)?t.padding_bottom:0},e.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return m(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(s(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:s(this.getAxisWidthByAxisId("y",t))},e.prototype.getCurrentPaddingRight=function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return m(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):s(t.getAxisWidthByAxisId("y2"))+n},e.prototype.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(r){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},e.prototype.getParentWidth=function(){return this.getParentRectValue("width")},e.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},e.prototype.getSvgLeft=function(t){var e=this,n=e.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,i=e.main.select("."+(n.axis_rotated?a.axisX:a.axisY)).node(),o=i&&r?i.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),l=o.right-s.left-(u?0:e.getCurrentPaddingLeft(t));return l>0?l:0},e.prototype.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},e.prototype.getHorizontalAxisHeight=function(t){var e=this,n=e.config,r=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_x_tick_rotate))/180)),"y"===t&&n.axis_rotated&&n.axis_y_tick_rotate&&(r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_y_tick_rotate))/180)),r+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},e.prototype.initBrush=function(t){var e=this,n=e.d3;return e.brush=(e.config.axis_rotated?n.brushY():n.brushX()).on("brush",(function(){var t=n.event.sourceEvent;t&&"zoom"===t.type||e.redrawForBrush()})).on("end",(function(){var t=n.event.sourceEvent;t&&"zoom"===t.type||e.brush.empty()&&t&&"end"!==t.type&&e.brush.clear()})),e.brush.updateExtent=function(){var t=this.scale.range();return this.extent(e.config.axis_rotated?[[0,t[0]],[e.width2,t[1]]]:[[t[0],0],[t[1],e.height2]]),this},e.brush.updateScale=function(t){return this.scale=t,this},e.brush.update=function(t){this.updateScale(t||e.subX).updateExtent(),e.context.select("."+a.brush).call(this)},e.brush.clear=function(){e.context.select("."+a.brush).call(e.brush.move,null)},e.brush.selection=function(){return n.brushSelection(e.context.select("."+a.brush).node())},e.brush.selectionAsValue=function(t,n){var r,i;return t?(e.context&&(r=[this.scale(t[0]),this.scale(t[1])],i=e.context.select("."+a.brush),n&&(i=i.transition()),e.brush.move(i,r)),[]):(r=e.brush.selection()||[0,0],[this.scale.invert(r[0]),this.scale.invert(r[1])])},e.brush.empty=function(){var t=e.brush.selection();return!t||t[0]===t[1]},e.brush.updateScale(t)},e.prototype.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));n.style("visibility",e.subchart_show?"visible":"hidden"),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",a.chart),n.select("."+a.chart).append("g").attr("class",a.chartBars),n.select("."+a.chart).append("g").attr("class",a.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",a.brush),t.axes.subx=n.append("g").attr("class",a.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis)},e.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+a.brush).call(this.brush)},e.prototype.updateTargetsForSubchart=function(t){var e,n,r,i,o=this,s=o.context,u=o.config,l=o.classChartBar.bind(o),c=o.classBars.bind(o),f=o.classChartLine.bind(o),d=o.classLines.bind(o),h=o.classAreas.bind(o);u.subchart_show&&((r=(i=s.select("."+a.chartBars).selectAll("."+a.chartBar).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",l),r.append("g").attr("class",c),(e=(n=s.select("."+a.chartLines).selectAll("."+a.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(n).attr("class",f),e.append("g").attr("class",d),e.append("g").attr("class",h),s.selectAll("."+a.brush+" rect").attr(u.axis_rotated?"width":"height",u.axis_rotated?o.width2:o.height2))},e.prototype.updateBarForSubchart=function(t){var e=this,n=e.context.selectAll("."+a.bars).selectAll("."+a.bar).data(e.barData.bind(e)),r=n.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color);n.exit().transition().duration(t).style("opacity",0).remove(),e.contextBar=r.merge(n).style("opacity",e.initialOpacity.bind(e))},e.prototype.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},e.prototype.updateLineForSubchart=function(t){var e=this,n=e.context.selectAll("."+a.lines).selectAll("."+a.line).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);n.exit().transition().duration(t).style("opacity",0).remove(),e.contextLine=r.merge(n).style("opacity",e.initialOpacity.bind(e))},e.prototype.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},e.prototype.updateAreaForSubchart=function(t){var e=this,n=e.d3,r=e.context.selectAll("."+a.areas).selectAll("."+a.area).data(e.lineData.bind(e)),i=r.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}));r.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=i.merge(r).style("opacity",0)},e.prototype.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},e.prototype.redrawSubchart=function(t,e,n,r,i,a,o){var s,u,l,c=this,f=c.d3,d=c.config;c.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(f.event&&"zoom"===f.event.type&&c.brush.selectionAsValue(c.x.orgDomain()),t&&(c.brush.empty()||c.brush.selectionAsValue(c.x.orgDomain()),s=c.generateDrawArea(i,!0),u=c.generateDrawBar(a,!0),l=c.generateDrawLine(o,!0),c.updateBarForSubchart(n),c.updateLineForSubchart(n),c.updateAreaForSubchart(n),c.redrawBarForSubchart(u,n,n),c.redrawLineForSubchart(l,n,n),c.redrawAreaForSubchart(s,n,n)))},e.prototype.redrawForBrush=function(){var t,e=this,n=e.x,r=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=r.event.selection||e.brush.scale.range(),e.main.select("."+a.eventRect).call(e.zoom.transform,r.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,n.orgDomain())},e.prototype.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+a.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},e.prototype.getDefaultSelection=function(){var t=this,e=t.config,n=p(e.axis_x_selection)?e.axis_x_selection(t.getXDomain(t.data.targets)):e.axis_x_selection;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},e.prototype.initText=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartTexts),this.mainText=this.d3.selectAll([])},e.prototype.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),r=e.classTexts.bind(e),i=e.classFocus.bind(e),o=e.main.select("."+a.chartTexts).selectAll("."+a.chartText).data(t),s=o.enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none");s.append("g").attr("class",r),s.merge(o).attr("class",(function(t){return n(t)+i(t)}))},e.prototype.updateText=function(t,e,n){var r=this,i=r.config,o=r.barOrLineData.bind(r),s=r.classText.bind(r),u=r.main.selectAll("."+a.texts).selectAll("."+a.text).data(o),l=u.enter().append("text").attr("class",s).attr("text-anchor",(function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"})).style("stroke","none").attr("x",t).attr("y",e).style("fill",(function(t){return r.color(t)})).style("fill-opacity",0);r.mainText=l.merge(u).text((function(t,e,n){return r.dataLabelFormat(t.id)(t.value,t.id,e,n)})),u.exit().transition().duration(n).style("fill-opacity",0).remove()},e.prototype.redrawText=function(t,e,n,r,i){return[(r?this.mainText.transition(i):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},e.prototype.getTextRect=function(t,e,n){var r,i=this.d3.select("body").append("div").classed("c3",!0),a=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(n).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",o).text(t).each((function(){r=this.getBoundingClientRect()})),i.remove(),r},e.prototype.generateXYForText=function(t,e,n,r){var i=this,a=i.generateGetAreaPoints(t,!1),o=i.generateGetBarPoints(e,!1),s=i.generateGetLinePoints(n,!1),u=r?i.getXForText:i.getYForText;return function(t,e){var n=i.isAreaType(t)?a:i.isBarType(t)?o:s;return u.call(i,n(t,e),t,this)}},e.prototype.getXForText=function(t,e,n){var r,i,a=this,o=n.getBoundingClientRect();return a.config.axis_rotated?(i=a.isBarType(e)?4:6,r=t[2][1]+i*(e.value<0?-1:1)):r=a.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(r>a.width?r=a.width-o.width:r<0&&(r=4)),r},e.prototype.getYForText=function(t,e,n){var r,i=this,a=n.getBoundingClientRect();return i.config.axis_rotated?r=(t[0][0]+t[2][0]+.6*a.height)/2:(r=t[2][1],e.value<0||0===e.value&&!i.hasPositiveValue?(r+=a.height,i.isBarType(e)&&i.isSafari()?r-=3:!i.isBarType(e)&&i.isChrome()&&(r+=3)):r+=i.isBarType(e)?-3:-6),null!==e.value||i.config.axis_rotated||(r<a.height?r=a.height:r>this.height&&(r=this.height-4)),r},e.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},e.prototype.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},e.prototype.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return n.indexOf("right")>=0?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:n.indexOf("center")>=0?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},e.prototype.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},e.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},e.prototype.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",a.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&g(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map((function(t){return e.addName(t.values[n.tooltip_init_x])})),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},e.prototype.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&&void 0===e.tooltip_order){var n=t.orderTargets(t.data.targets).map((function(t){return t.id}));return(t.isOrderAsc()||t.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}var r=e.tooltip_order;void 0===r&&(r=e.data_order);var i=function(t){return t?t.value:null};if(g(r)&&"asc"===r.toLowerCase())return function(t,e){return i(t)-i(e)};if(g(r)&&"desc"===r.toLowerCase())return function(t,e){return i(e)-i(t)};if(p(r)){var a=r;return void 0===e.tooltip_order&&(a=function(t,e){return r(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),a}return f(r)?function(t,e){return r.indexOf(t.id)-r.indexOf(e.id)}:void 0},e.prototype.getTooltipContent=function(t,e,n,r){var i,a,o,s,u,l,c=this,f=c.config,d=f.tooltip_format_title||e,h=f.tooltip_format_name||function(t){return t},p=f.tooltip_format_value||n,g=this.getTooltipSortFunction();for(g&&t.sort(g),a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)&&(i||(o=_(d?d(t[a].x,t[a].index):t[a].x),i="<table class='"+c.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),void 0!==(s=_(p(t[a].value,t[a].ratio,t[a].id,t[a].index,t))))){if(null===t[a].name)continue;u=_(h(t[a].name,t[a].ratio,t[a].id,t[a].index)),l=c.levelColor?c.levelColor(t[a].value):r(t[a].id),i+="<tr class='"+c.CLASS.tooltipName+"-"+c.getTargetSelectorSuffix(t[a].id)+"'>",i+="<td class='name'><span style='background-color:"+l+"'></span>"+u+"</td>",i+="<td class='value'>"+s+"</td>",i+="</tr>"}return i+"</table>"},e.prototype.tooltipPosition=function(t,e,n,r){var i,a,o,s,u,l=this,c=l.config,f=l.d3,d=l.hasArcType(),h=f.mouse(r);return d?(a=(l.width-(l.isLegendRight?l.getLegendWidth():0))/2+h[0],s=(l.hasType("gauge")?l.height:l.height/2)+h[1]+20):(i=l.getSvgLeft(!0),c.axis_rotated?(o=(a=i+h[0]+100)+e,u=l.currentWidth-l.getCurrentPaddingRight(),s=l.x(t[0].x)+20):(o=(a=i+l.getCurrentPaddingLeft(!0)+l.x(t[0].x)+20)+e,u=i+l.currentWidth-l.getCurrentPaddingRight(),s=h[1]+15),o>u&&(a-=o-u+20),s+n>l.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:a}},e.prototype.showTooltip=function(t,n){var r,i,a,o=this,s=o.config,u=o.hasArcType(),l=t.filter((function(t){return t&&m(t.value)})),c=s.tooltip_position||e.prototype.tooltipPosition;0!==l.length&&s.tooltip_show&&(o.tooltip.html(s.tooltip_contents.call(o,t,o.axis.getXAxisTickFormat(),o.getYFormat(u),o.color)).style("display","block"),r=o.tooltip.property("offsetWidth"),i=o.tooltip.property("offsetHeight"),a=c.call(this,l,r,i,n),o.tooltip.style("top",a.top+"px").style("left",a.left+"px"))},e.prototype.hideTooltip=function(){this.tooltip.style("display","none")},e.prototype.setTargetType=function(t,e){var n=this,r=n.config;n.mapToTargetIds(t).forEach((function(t){n.withoutFadeIn[t]=e===r.data_types[t],r.data_types[t]=e})),t||(r.data_type=e)},e.prototype.hasType=function(t,e){var n=this.config.data_types,r=!1;return(e=e||this.data.targets)&&e.length?e.forEach((function(e){var i=n[e.id];(i&&i.indexOf(t)>=0||!i&&"line"===t)&&(r=!0)})):Object.keys(n).length?Object.keys(n).forEach((function(e){n[e]===t&&(r=!0)})):r=this.config.data_type===t,r},e.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},e.prototype.isLineType=function(t){var e=this.config,n=g(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0},e.prototype.isStepType=function(t){var e=g(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},e.prototype.isSplineType=function(t){var e=g(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},e.prototype.isAreaType=function(t){var e=g(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},e.prototype.isBarType=function(t){var e=g(t)?t:t.id;return"bar"===this.config.data_types[e]},e.prototype.isScatterType=function(t){var e=g(t)?t:t.id;return"scatter"===this.config.data_types[e]},e.prototype.isPieType=function(t){var e=g(t)?t:t.id;return"pie"===this.config.data_types[e]},e.prototype.isGaugeType=function(t){var e=g(t)?t:t.id;return"gauge"===this.config.data_types[e]},e.prototype.isDonutType=function(t){var e=g(t)?t:t.id;return"donut"===this.config.data_types[e]},e.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},e.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},e.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},e.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},e.prototype.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},e.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},e.prototype.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},e.prototype.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},e.prototype.initZoom=function(){var t,e=this,n=e.d3,r=e.config;return e.zoom=n.zoom().on("start",(function(){if("scroll"===r.zoom_type){var i=n.event.sourceEvent;i&&"brush"===i.type||(t=i,r.zoom_onzoomstart.call(e.api,i))}})).on("zoom",(function(){if("scroll"===r.zoom_type){var t=n.event.sourceEvent;t&&"brush"===t.type||(e.redrawForZoom(),r.zoom_onzoom.call(e.api,e.x.orgDomain()))}})).on("end",(function(){if("scroll"===r.zoom_type){var i=n.event.sourceEvent;i&&"brush"===i.type||i&&t.clientX===i.clientX&&t.clientY===i.clientY||r.zoom_onzoomend.call(e.api,e.x.orgDomain())}})),e.zoom.updateDomain=function(){return n.event&&n.event.transform&&e.x.domain(n.event.transform.rescaleX(e.subX).domain()),this},e.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[e.width,e.height]]).extent([[0,0],[e.width,e.height]]),this},e.zoom.update=function(){return this.updateExtent().updateDomain()},e.zoom.updateExtent()},e.prototype.zoomTransform=function(t){var e=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(e[1]-e[0])).translate(-e[0],0)},e.prototype.initDragZoom=function(){var t=this,e=t.d3,n=t.config,r=t.context=t.svg,i=t.margin.left+20.5,o=t.margin.top+.5;if("drag"===n.zoom_type&&n.zoom_enabled){var s=function(e){return e&&e.map((function(e){return t.x.invert(e)}))},u=t.dragZoomBrush=e.brushX().on("start",(function(){t.api.unzoom(),t.svg.select("."+a.dragZoom).classed("disabled",!1),n.zoom_onzoomstart.call(t.api,e.event.sourceEvent)})).on("brush",(function(){n.zoom_onzoom.call(t.api,s(e.event.selection))})).on("end",(function(){if(null!=e.event.selection){var r=s(e.event.selection);n.zoom_disableDefaultBehavior||t.api.zoom(r),t.svg.select("."+a.dragZoom).classed("disabled",!0),n.zoom_onzoomend.call(t.api,r)}}));r.append("g").classed(a.dragZoom,!0).attr("clip-path",t.clipPath).attr("transform","translate("+i+","+o+")").call(u)}},e.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},e.prototype.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,r=t.zoom,i=t.x;n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length&&(r.update(),n.zoom_disableDefaultBehavior||(t.isCategorized()&&i.orgDomain()[0]===t.orgXDomain[0]&&i.domain([t.orgXDomain[0]-1e-10,i.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&&"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0)))},E}()},NMsv:function(t,e,n){var r=n("ScnH"),i=r.getOptions,a=r.setOptions,o=n("wnj/"),s=n("Pq0d"),u=n("DbhI");t.exports={parse:o,stringify:s,types:u,getOptions:i,setOptions:a}},Pq0d:function(t,e,n){var r=n("ScnH"),i=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN"],a=["#EXT-X-KEY","#EXT-X-MAP","#EXT-X-MEDIA"],o=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this)).baseUri=t,r}return Y(n,[{key:"push",value:function(){for(var t=this,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];for(var u=function(){var e=c[l];if(e.startsWith("#"))if(i.some((function(t){return e.startsWith(t)})))U(Z(n.prototype),"push",t).call(t,e);else{if(t.includes(e)){if(a.some((function(t){return e.startsWith(t)})))return"continue";r.INVALIDPLAYLIST("Redundant item (".concat(e,")"))}U(Z(n.prototype),"push",t).call(t,e)}else U(Z(n.prototype),"push",t).call(t,e)},l=0,c=o;l<c.length;l++)u()}}]),n}(V(Array));function s(t,e){var n=Math.round(1e3*t)/1e3;return e?n.toFixed(e):n}function u(t,e){var n=['DATA-ID="'.concat(e.id,'"')];e.language&&n.push('LANGUAGE="'.concat(e.language,'"')),e.value?n.push('VALUE="'.concat(e.value,'"')):e.uri&&n.push('URI="'.concat(e.uri,'"')),t.push("#EXT-X-SESSION-DATA:"+n.join(","))}function l(t,e,n){var i=n?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",a=["METHOD="+e.method];e.uri&&a.push('URI="'.concat(e.uri,'"')),e.iv&&(16!==e.iv.length&&r.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),a.push("IV="+r.byteSequenceToHex(e.iv))),e.format&&a.push('KEYFORMAT="'.concat(e.format,'"')),e.formatVersion&&a.push('KEYFORMATVERSIONS="'.concat(e.formatVersion,'"')),t.push("".concat(i,":").concat(a.join(",")))}function c(t,e){var n=e.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",i=["BANDWIDTH="+e.bandwidth];if(e.averageBandwidth&&i.push("AVERAGE-BANDWIDTH="+e.averageBandwidth),e.isIFrameOnly&&i.push('URI="'.concat(e.uri,'"')),e.codecs&&i.push('CODECS="'.concat(e.codecs,'"')),e.resolution&&i.push("RESOLUTION=".concat(e.resolution.width,"x").concat(e.resolution.height)),e.frameRate&&i.push("FRAME-RATE="+s(e.frameRate,3)),e.hdcpLevel&&i.push("HDCP-LEVEL="+e.hdcpLevel),e.audio.length>0){i.push('AUDIO="'.concat(e.audio[0].groupId,'"'));var a,o=B(e.audio);try{for(o.s();!(a=o.n()).done;){f(t,a.value)}}catch(g){o.e(g)}finally{o.f()}}if(e.video.length>0){i.push('VIDEO="'.concat(e.video[0].groupId,'"'));var u,l=B(e.video);try{for(l.s();!(u=l.n()).done;){f(t,u.value)}}catch(g){l.e(g)}finally{l.f()}}if(e.subtitles.length>0){i.push('SUBTITLES="'.concat(e.subtitles[0].groupId,'"'));var c,d=B(e.subtitles);try{for(d.s();!(c=d.n()).done;){f(t,c.value)}}catch(g){d.e(g)}finally{d.f()}}if(r.getOptions().allowClosedCaptionsNone&&0===e.closedCaptions.length)i.push("CLOSED-CAPTIONS=NONE");else if(e.closedCaptions.length>0){i.push('CLOSED-CAPTIONS="'.concat(e.closedCaptions[0].groupId,'"'));var h,p=B(e.closedCaptions);try{for(p.s();!(h=p.n()).done;){f(t,h.value)}}catch(g){p.e(g)}finally{p.f()}}t.push("".concat(n,":").concat(i.join(","))),e.isIFrameOnly||t.push(""+e.uri)}function f(t,e){var n=["TYPE="+e.type,'GROUP-ID="'.concat(e.groupId,'"'),'NAME="'.concat(e.name,'"')];void 0!==e.isDefault&&n.push("DEFAULT="+(e.isDefault?"YES":"NO")),void 0!==e.autoselect&&n.push("AUTOSELECT="+(e.autoselect?"YES":"NO")),void 0!==e.forced&&n.push("FORCED="+(e.forced?"YES":"NO")),e.language&&n.push('LANGUAGE="'.concat(e.language,'"')),e.assocLanguage&&n.push('ASSOC-LANGUAGE="'.concat(e.assocLanguage,'"')),e.instreamId&&n.push('INSTREAM-ID="'.concat(e.instreamId,'"')),e.characteristics&&n.push('CHARACTERISTICS="'.concat(e.characteristics,'"')),e.channels&&n.push('CHANNELS="'.concat(e.channels,'"')),e.uri&&n.push('URI="'.concat(e.uri,'"')),t.push("#EXT-X-MEDIA:"+n.join(","))}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.byterange&&t.push("#EXT-X-BYTERANGE:"+h(e.byterange)),e.discontinuity&&t.push("#EXT-X-DISCONTINUITY"),e.key&&l(t,e.key),e.map&&function(t,e){var n=['URI="'.concat(e.uri,'"')];e.byterange&&n.push("BYTERANGE="+h(e.byterange)),t.push("#EXT-X-MAP:"+n.join(","))}(t,e.map),e.programDateTime&&t.push("#EXT-X-PROGRAM-DATE-TIME:"+r.formatDate(e.programDateTime)),e.dateRange&&function(t,e){var n=['ID="'.concat(e.id,'"'),'START-DATE="'.concat(r.formatDate(e.start),'"')];e.end&&n.push('END-DATE="'.concat(e.end,'"')),e.duration&&n.push("DURATION="+e.duration),e.plannedDuration&&n.push("PLANNED-DURATION="+e.plannedDuration),e.classId&&n.push('CLASS="'.concat(e.classId,'"')),e.endOnNext&&n.push("END-ON-NEXT=YES"),Object.keys(e.attributes).forEach((function(t){t.startsWith("X-")?n.push("number"==typeof e.attributes[t]?"".concat(t,"=").concat(e.attributes[t]):"".concat(t,'="').concat(e.attributes[t],'"')):t.startsWith("SCTE35-")&&n.push("".concat(t,"=").concat(r.byteSequenceToHex(e.attributes[t])))})),t.push("#EXT-X-DATERANGE:"+n.join(","))}(t,e.dateRange),e.markers.length>0&&function(t,e){var n,r=B(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;"OUT"===i.type?t.push("#EXT-X-CUE-OUT:"+i.duration):"IN"===i.type?t.push("#EXT-X-CUE-IN"):"RAW"===i.type&&t.push("#".concat(i.tagName).concat(i.value?":"+i.value:""))}}catch(a){r.e(a)}finally{r.f()}}(t,e.markers);var i=n<3?Math.round(e.duration):s(e.duration);t.push("#EXTINF:".concat(i,",").concat(unescape(encodeURIComponent(e.title||"")))),Array.prototype.push.call(t,""+e.uri)}function h(t){return"".concat(t.length,"@").concat(t.offset)}t.exports=function(t){r.PARAMCHECK(t),r.ASSERT("Not a playlist","playlist"===t.type);var e=new o(t.uri);return e.push("#EXTM3U"),t.version&&e.push("#EXT-X-VERSION:"+t.version),t.independentSegments&&e.push("#EXT-X-INDEPENDENT-SEGMENTS"),t.start&&e.push("#EXT-X-START:TIME-OFFSET=".concat(s(t.start.offset)).concat(t.start.precise?",PRECISE=YES":"")),t.isMasterPlaylist?function(t,e){var n,r=B(e.sessionDataList);try{for(r.s();!(n=r.n()).done;){u(t,n.value)}}catch(f){r.e(f)}finally{r.f()}var i,a=B(e.sessionKeyList);try{for(a.s();!(i=a.n()).done;){l(t,i.value,!0)}}catch(f){a.e(f)}finally{a.f()}var o,s=B(e.variants);try{for(s.s();!(o=s.n()).done;){c(t,o.value)}}catch(f){s.e(f)}finally{s.f()}}(e,t):function(t,e){e.targetDuration&&t.push("#EXT-X-TARGETDURATION:"+e.targetDuration),e.mediaSequenceBase&&t.push("#EXT-X-MEDIA-SEQUENCE:"+e.mediaSequenceBase),e.discontinuitySequenceBase&&t.push("#EXT-X-DISCONTINUITY-SEQUENCE:"+e.discontinuitySequenceBase),e.playlistType&&t.push("#EXT-X-PLAYLIST-TYPE:"+e.playlistType),e.isIFrame&&t.push("#EXT-X-I-FRAMES-ONLY");var n,r=B(e.segments);try{for(r.s();!(n=r.n()).done;){d(t,n.value,e.version)}}catch(i){r.e(i)}finally{r.f()}e.endlist&&t.push("#EXT-X-ENDLIST")}(e,t),e.join("\n")}},ScnH:function(t,e){var n={};function r(t){if(!n.strictMode)return console.error(t.message);throw t}function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return"number"==typeof t?t:(e=10===n?parseFloat(t,n):parseInt(t,n),isNaN(e)?0:e)}t.exports={THROW:r,ASSERT:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a,o=B(n.entries());try{for(o.s();!(a=o.n()).done;){var s=tt(a.value,2),u=s[0],l=s[1];l||r(new Error("".concat(t," : Failed at [").concat(u,"]")))}}catch(c){o.e(c)}finally{o.f()}},CONDITIONALASSERT:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,a=B(e.entries());try{for(a.s();!(i=a.n()).done;){var o=tt(i.value,2),s=o[0],u=tt(o[1],2),l=u[0],c=u[1];l&&(c||r(new Error("Conditional Assert : Failed at [".concat(s,"]"))))}}catch(f){a.e(f)}finally{a.f()}},PARAMCHECK:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,a=B(e.entries());try{for(a.s();!(i=a.n()).done;){var o=tt(i.value,2),s=o[0],u=o[1];void 0===u&&r(new Error("Param Check : Failed at [".concat(s,"]")))}}catch(l){a.e(l)}finally{a.f()}},CONDITIONALPARAMCHECK:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,a=B(e.entries());try{for(a.s();!(i=a.n()).done;){var o=tt(i.value,2),s=o[0],u=tt(o[1],2),l=u[0],c=u[1];l&&void 0===c&&r(new Error("Conditional Param Check : Failed at [".concat(s,"]")))}}catch(f){a.e(f)}finally{a.f()}},INVALIDPLAYLIST:function(t,e){null!=n.onError?n.onError(t,null!=e?e:"-"):r(new Error("Invalid Playlist : "+t))},toInteger:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(e=parseInt(t,n))!=parseFloat(t,n)&&(e=NaN),e},toNumber:i,hexToByteSequence:function(t){(t.startsWith("0x")||t.startsWith("0X"))&&(t=t.slice(2));for(var e=[],n=0;n<t.length;n+=2)e.push(i(t.slice(n,n+2),16));return Buffer.from(e)},byteSequenceToHex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;n<=e&&r(new Error("end must be larger than start : start=".concat(e,", end=").concat(n)));for(var i=[],a=e;a<n;a++)i.push(("0"+(255&t[a]).toString(16).toUpperCase()).slice(-2));return"0x"+i.join("")},tryCatch:function(t,e){try{return t()}catch(n){return e(n)}},splitAt:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=0,a=0;i<t.length;i++)if(t[i]===e){if(a++===n)return[t.slice(0,i),t.slice(i+1)];r=i}return-1!==r?[t.slice(0,r),t.slice(r+1)]:[t]},trim:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t?(t=t.trim()," "===e||(t.startsWith(e)&&(t=t.slice(1)),t.endsWith(e)&&(t=t.slice(0,-1))),t):t},splitByCommaWithPreservingQuotes:function(t){for(var e=[],n=!0,r=0,i=[],a=0;a<t.length;a++){var o=t[a];n&&","===o?(e.push(t.slice(r,a).trim()),r=a+1):'"'!==o&&"'"!==o||(n?(i.push(o),n=!1):o===i[i.length-1]?(i.pop(),n=!0):i.push(o))}return e.push(t.slice(r).trim()),e},camelify:function(t){var e,n=[],r=!1,i=B(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;"-"!==a&&"_"!==a?r?(n.push(a.toUpperCase()),r=!1):n.push(a.toLowerCase()):r=!0}}catch(o){i.e(o)}finally{i.f()}return n.join("")},formatDate:function(t){return"".concat(t.getUTCFullYear(),"-").concat(("0"+(t.getUTCMonth()+1)).slice(-2),"-").concat(("0"+t.getUTCDate()).slice(-2),"T").concat(("0"+t.getUTCHours()).slice(-2),":").concat(("0"+t.getUTCMinutes()).slice(-2),":").concat(("0"+t.getUTCSeconds()).slice(-2),".").concat(("00"+t.getUTCMilliseconds()).slice(-3),"Z")},hasOwnProp:function(t,e){return Object.hasOwnProperty.call(t,e)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=Object.assign(n,t)},getOptions:function(){return Object.assign({},n)}}},V26T:function(t,e,n){var r,i,a,o=n("c4+4");t.exports=function(t,e){r||(r=o.createWorker(),i=1,a={},r.onmessage=function(t){var e=t.data.id,n=a[e];delete a[e],null!=t.data.error?n(new Error("Rusha worker error: "+t.data.error)):n(null,t.data.hash)}),a[i]=e,r.postMessage({id:i,data:t}),i+=1}},VphZ:function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return r})),n.d(e,"bisect",(function(){return l})),n.d(e,"bisectRight",(function(){return s})),n.d(e,"bisectLeft",(function(){return u})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return a})),n.d(e,"cross",(function(){return d})),n.d(e,"descending",(function(){return h})),n.d(e,"deviation",(function(){return v})),n.d(e,"extent",(function(){return m})),n.d(e,"histogram",(function(){return k})),n.d(e,"thresholdFreedmanDiaconis",(function(){return P})),n.d(e,"thresholdScott",(function(){return M})),n.d(e,"thresholdSturges",(function(){return R})),n.d(e,"max",(function(){return L})),n.d(e,"mean",(function(){return N})),n.d(e,"median",(function(){return F})),n.d(e,"merge",(function(){return j})),n.d(e,"min",(function(){return B})),n.d(e,"pairs",(function(){return c})),n.d(e,"permute",(function(){return U})),n.d(e,"quantile",(function(){return O})),n.d(e,"range",(function(){return S})),n.d(e,"scan",(function(){return V})),n.d(e,"shuffle",(function(){return G})),n.d(e,"sum",(function(){return H})),n.d(e,"ticks",(function(){return C})),n.d(e,"tickIncrement",(function(){return D})),n.d(e,"tickStep",(function(){return I})),n.d(e,"transpose",(function(){return Y})),n.d(e,"variance",(function(){return g})),n.d(e,"zip",(function(){return q})),n.d(e,"axisTop",(function(){return et})),n.d(e,"axisRight",(function(){return nt})),n.d(e,"axisBottom",(function(){return rt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return Ai})),n.d(e,"brushX",(function(){return Si})),n.d(e,"brushY",(function(){return wi})),n.d(e,"brushSelection",(function(){return Ti})),n.d(e,"chord",(function(){return Mi})),n.d(e,"ribbon",(function(){return Ki})),n.d(e,"nest",(function(){return Zi})),n.d(e,"set",(function(){return oa})),n.d(e,"map",(function(){return $i})),n.d(e,"keys",(function(){return sa})),n.d(e,"values",(function(){return ua})),n.d(e,"entries",(function(){return la})),n.d(e,"color",(function(){return Ye})),n.d(e,"rgb",(function(){return Ke})),n.d(e,"hsl",(function(){return en})),n.d(e,"lab",(function(){return pa})),n.d(e,"hcl",(function(){return Ta})),n.d(e,"lch",(function(){return Ea})),n.d(e,"gray",(function(){return ha})),n.d(e,"cubehelix",(function(){return Ra})),n.d(e,"contours",(function(){return Ua})),n.d(e,"contourDensity",(function(){return qa})),n.d(e,"dispatch",(function(){return ft})),n.d(e,"drag",(function(){return Ja})),n.d(e,"dragDisable",(function(){return xe})),n.d(e,"dragEnable",(function(){return Ce})),n.d(e,"dsvFormat",(function(){return ao})),n.d(e,"csvParse",(function(){return so})),n.d(e,"csvParseRows",(function(){return uo})),n.d(e,"csvFormat",(function(){return lo})),n.d(e,"csvFormatBody",(function(){return co})),n.d(e,"csvFormatRows",(function(){return fo})),n.d(e,"csvFormatRow",(function(){return ho})),n.d(e,"csvFormatValue",(function(){return po})),n.d(e,"tsvParse",(function(){return vo})),n.d(e,"tsvParseRows",(function(){return mo})),n.d(e,"tsvFormat",(function(){return yo})),n.d(e,"tsvFormatBody",(function(){return _o})),n.d(e,"tsvFormatRows",(function(){return bo})),n.d(e,"tsvFormatRow",(function(){return Eo})),n.d(e,"tsvFormatValue",(function(){return To})),n.d(e,"autoType",(function(){return So})),n.d(e,"easeLinear",(function(){return Ao})),n.d(e,"easeQuad",(function(){return Do})),n.d(e,"easeQuadIn",(function(){return xo})),n.d(e,"easeQuadOut",(function(){return Co})),n.d(e,"easeQuadInOut",(function(){return Do})),n.d(e,"easeCubic",(function(){return qr})),n.d(e,"easeCubicIn",(function(){return Yr})),n.d(e,"easeCubicOut",(function(){return zr})),n.d(e,"easeCubicInOut",(function(){return qr})),n.d(e,"easePoly",(function(){return ko})),n.d(e,"easePolyIn",(function(){return Io})),n.d(e,"easePolyOut",(function(){return Ro})),n.d(e,"easePolyInOut",(function(){return ko})),n.d(e,"easeSin",(function(){return No})),n.d(e,"easeSinIn",(function(){return Mo})),n.d(e,"easeSinOut",(function(){return Lo})),n.d(e,"easeSinInOut",(function(){return No})),n.d(e,"easeExp",(function(){return Uo})),n.d(e,"easeExpIn",(function(){return jo})),n.d(e,"easeExpOut",(function(){return Bo})),n.d(e,"easeExpInOut",(function(){return Uo})),n.d(e,"easeCircle",(function(){return Ho})),n.d(e,"easeCircleIn",(function(){return Vo})),n.d(e,"easeCircleOut",(function(){return Go})),n.d(e,"easeCircleInOut",(function(){return Ho})),n.d(e,"easeBounce",(function(){return zo})),n.d(e,"easeBounceIn",(function(){return Yo})),n.d(e,"easeBounceOut",(function(){return zo})),n.d(e,"easeBounceInOut",(function(){return qo})),n.d(e,"easeBack",(function(){return Wo})),n.d(e,"easeBackIn",(function(){return Xo})),n.d(e,"easeBackOut",(function(){return Ko})),n.d(e,"easeBackInOut",(function(){return Wo})),n.d(e,"easeElastic",(function(){return Zo})),n.d(e,"easeElasticIn",(function(){return $o})),n.d(e,"easeElasticOut",(function(){return Zo})),n.d(e,"easeElasticInOut",(function(){return Jo})),n.d(e,"blob",(function(){return es})),n.d(e,"buffer",(function(){return rs})),n.d(e,"dsv",(function(){return ss})),n.d(e,"csv",(function(){return us})),n.d(e,"tsv",(function(){return ls})),n.d(e,"image",(function(){return cs})),n.d(e,"json",(function(){return ds})),n.d(e,"text",(function(){return as})),n.d(e,"xml",(function(){return ps})),n.d(e,"html",(function(){return gs})),n.d(e,"svg",(function(){return vs})),n.d(e,"forceCenter",(function(){return ms})),n.d(e,"forceCollide",(function(){return Rs})),n.d(e,"forceLink",(function(){return Ps})),n.d(e,"forceManyBody",(function(){return js})),n.d(e,"forceRadial",(function(){return Bs})),n.d(e,"forceSimulation",(function(){return Fs})),n.d(e,"forceX",(function(){return Us})),n.d(e,"forceY",(function(){return Vs})),n.d(e,"formatDefaultLocale",(function(){return ru})),n.d(e,"format",(function(){return Ws})),n.d(e,"formatPrefix",(function(){return Qs})),n.d(e,"formatLocale",(function(){return nu})),n.d(e,"formatSpecifier",(function(){return zs})),n.d(e,"FormatSpecifier",(function(){return qs})),n.d(e,"precisionFixed",(function(){return iu})),n.d(e,"precisionPrefix",(function(){return au})),n.d(e,"precisionRound",(function(){return ou})),n.d(e,"geoArea",(function(){return $u})),n.d(e,"geoBounds",(function(){return Hl})),n.d(e,"geoCentroid",(function(){return ec})),n.d(e,"geoCircle",(function(){return dc})),n.d(e,"geoClipAntimeridian",(function(){return wc})),n.d(e,"geoClipCircle",(function(){return Ac})),n.d(e,"geoClipExtent",(function(){return Rc})),n.d(e,"geoClipRectangle",(function(){return xc})),n.d(e,"geoContains",(function(){return Kc})),n.d(e,"geoDistance",(function(){return Bc})),n.d(e,"geoGraticule",(function(){return $c})),n.d(e,"geoGraticule10",(function(){return Zc})),n.d(e,"geoInterpolate",(function(){return rf})),n.d(e,"geoLength",(function(){return Nc})),n.d(e,"geoPath",(function(){return nd})),n.d(e,"geoAlbers",(function(){return Ed})),n.d(e,"geoAlbersUsa",(function(){return Td})),n.d(e,"geoAzimuthalEqualArea",(function(){return xd})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return Ad})),n.d(e,"geoAzimuthalEquidistant",(function(){return Dd})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return Cd})),n.d(e,"geoConicConformal",(function(){return Md})),n.d(e,"geoConicConformalRaw",(function(){return Pd})),n.d(e,"geoConicEqualArea",(function(){return bd})),n.d(e,"geoConicEqualAreaRaw",(function(){return _d})),n.d(e,"geoConicEquidistant",(function(){return jd})),n.d(e,"geoConicEquidistantRaw",(function(){return Fd})),n.d(e,"geoEqualEarth",(function(){return zd})),n.d(e,"geoEqualEarthRaw",(function(){return Yd})),n.d(e,"geoEquirectangular",(function(){return Nd})),n.d(e,"geoEquirectangularRaw",(function(){return Ld})),n.d(e,"geoGnomonic",(function(){return Xd})),n.d(e,"geoGnomonicRaw",(function(){return qd})),n.d(e,"geoIdentity",(function(){return Kd})),n.d(e,"geoProjection",(function(){return vd})),n.d(e,"geoProjectionMutator",(function(){return md})),n.d(e,"geoMercator",(function(){return Rd})),n.d(e,"geoMercatorRaw",(function(){return Id})),n.d(e,"geoNaturalEarth1",(function(){return Qd})),n.d(e,"geoNaturalEarth1Raw",(function(){return Wd})),n.d(e,"geoOrthographic",(function(){return Zd})),n.d(e,"geoOrthographicRaw",(function(){return $d})),n.d(e,"geoStereographic",(function(){return th})),n.d(e,"geoStereographicRaw",(function(){return Jd})),n.d(e,"geoTransverseMercator",(function(){return nh})),n.d(e,"geoTransverseMercatorRaw",(function(){return eh})),n.d(e,"geoRotation",(function(){return lc})),n.d(e,"geoStream",(function(){return Hu})),n.d(e,"geoTransform",(function(){return rd})),n.d(e,"cluster",(function(){return oh})),n.d(e,"hierarchy",(function(){return uh})),n.d(e,"pack",(function(){return Ph})),n.d(e,"packSiblings",(function(){return Ch})),n.d(e,"packEnclose",(function(){return ph})),n.d(e,"partition",(function(){return Bh})),n.d(e,"stratify",(function(){return Yh})),n.d(e,"tree",(function(){return $h})),n.d(e,"treemap",(function(){return np})),n.d(e,"treemapBinary",(function(){return rp})),n.d(e,"treemapDice",(function(){return jh})),n.d(e,"treemapSlice",(function(){return Zh})),n.d(e,"treemapSliceDice",(function(){return ip})),n.d(e,"treemapSquarify",(function(){return ep})),n.d(e,"treemapResquarify",(function(){return ap})),n.d(e,"interpolate",(function(){return Dn})),n.d(e,"interpolateArray",(function(){return yn})),n.d(e,"interpolateBasis",(function(){return on})),n.d(e,"interpolateBasisClosed",(function(){return sn})),n.d(e,"interpolateDate",(function(){return Tn})),n.d(e,"interpolateDiscrete",(function(){return op})),n.d(e,"interpolateHue",(function(){return sp})),n.d(e,"interpolateNumber",(function(){return Sn})),n.d(e,"interpolateNumberArray",(function(){return vn})),n.d(e,"interpolateObject",(function(){return wn})),n.d(e,"interpolateRound",(function(){return up})),n.d(e,"interpolateString",(function(){return Cn})),n.d(e,"interpolateTransformCss",(function(){return fr})),n.d(e,"interpolateTransformSvg",(function(){return dr})),n.d(e,"interpolateZoom",(function(){return fp})),n.d(e,"interpolateRgb",(function(){return dn})),n.d(e,"interpolateRgbBasis",(function(){return pn})),n.d(e,"interpolateRgbBasisClosed",(function(){return gn})),n.d(e,"interpolateHsl",(function(){return hp})),n.d(e,"interpolateHslLong",(function(){return pp})),n.d(e,"interpolateLab",(function(){return gp})),n.d(e,"interpolateHcl",(function(){return mp})),n.d(e,"interpolateHclLong",(function(){return yp})),n.d(e,"interpolateCubehelix",(function(){return bp})),n.d(e,"interpolateCubehelixLong",(function(){return Ep})),n.d(e,"piecewise",(function(){return Tp})),n.d(e,"quantize",(function(){return Sp})),n.d(e,"path",(function(){return Gi})),n.d(e,"polygonArea",(function(){return wp})),n.d(e,"polygonCentroid",(function(){return Ap})),n.d(e,"polygonHull",(function(){return Ip})),n.d(e,"polygonContains",(function(){return Rp})),n.d(e,"polygonLength",(function(){return kp})),n.d(e,"quadtree",(function(){return ws})),n.d(e,"randomUniform",(function(){return Pp})),n.d(e,"randomNormal",(function(){return Mp})),n.d(e,"randomLogNormal",(function(){return Lp})),n.d(e,"randomBates",(function(){return Fp})),n.d(e,"randomIrwinHall",(function(){return Np})),n.d(e,"randomExponential",(function(){return jp})),n.d(e,"scaleBand",(function(){return qp})),n.d(e,"scalePoint",(function(){return Kp})),n.d(e,"scaleIdentity",(function(){return ug})),n.d(e,"scaleLinear",(function(){return sg})),n.d(e,"scaleLog",(function(){return mg})),n.d(e,"scaleSymlog",(function(){return Eg})),n.d(e,"scaleOrdinal",(function(){return zp})),n.d(e,"scaleImplicit",(function(){return Yp})),n.d(e,"scalePow",(function(){return xg})),n.d(e,"scaleSqrt",(function(){return Cg})),n.d(e,"scaleQuantile",(function(){return Dg})),n.d(e,"scaleQuantize",(function(){return Ig})),n.d(e,"scaleThreshold",(function(){return Rg})),n.d(e,"scaleTime",(function(){return hy})),n.d(e,"scaleUtc",(function(){return Sy})),n.d(e,"scaleSequential",(function(){return xy})),n.d(e,"scaleSequentialLog",(function(){return Cy})),n.d(e,"scaleSequentialPow",(function(){return Iy})),n.d(e,"scaleSequentialSqrt",(function(){return Ry})),n.d(e,"scaleSequentialSymlog",(function(){return Dy})),n.d(e,"scaleSequentialQuantile",(function(){return ky})),n.d(e,"scaleDiverging",(function(){return Py})),n.d(e,"scaleDivergingLog",(function(){return My})),n.d(e,"scaleDivergingPow",(function(){return Ny})),n.d(e,"scaleDivergingSqrt",(function(){return Fy})),n.d(e,"scaleDivergingSymlog",(function(){return Ly})),n.d(e,"tickFormat",(function(){return ag})),n.d(e,"schemeCategory10",(function(){return By})),n.d(e,"schemeAccent",(function(){return Uy})),n.d(e,"schemeDark2",(function(){return Vy})),n.d(e,"schemePaired",(function(){return Gy})),n.d(e,"schemePastel1",(function(){return Hy})),n.d(e,"schemePastel2",(function(){return Yy})),n.d(e,"schemeSet1",(function(){return zy})),n.d(e,"schemeSet2",(function(){return qy})),n.d(e,"schemeSet3",(function(){return Xy})),n.d(e,"schemeTableau10",(function(){return Ky})),n.d(e,"interpolateBrBG",(function(){return $y})),n.d(e,"schemeBrBG",(function(){return Qy})),n.d(e,"interpolatePRGn",(function(){return Jy})),n.d(e,"schemePRGn",(function(){return Zy})),n.d(e,"interpolatePiYG",(function(){return e_})),n.d(e,"schemePiYG",(function(){return t_})),n.d(e,"interpolatePuOr",(function(){return r_})),n.d(e,"schemePuOr",(function(){return n_})),n.d(e,"interpolateRdBu",(function(){return a_})),n.d(e,"schemeRdBu",(function(){return i_})),n.d(e,"interpolateRdGy",(function(){return s_})),n.d(e,"schemeRdGy",(function(){return o_})),n.d(e,"interpolateRdYlBu",(function(){return l_})),n.d(e,"schemeRdYlBu",(function(){return u_})),n.d(e,"interpolateRdYlGn",(function(){return f_})),n.d(e,"schemeRdYlGn",(function(){return c_})),n.d(e,"interpolateSpectral",(function(){return h_})),n.d(e,"schemeSpectral",(function(){return d_})),n.d(e,"interpolateBuGn",(function(){return g_})),n.d(e,"schemeBuGn",(function(){return p_})),n.d(e,"interpolateBuPu",(function(){return m_})),n.d(e,"schemeBuPu",(function(){return v_})),n.d(e,"interpolateGnBu",(function(){return __})),n.d(e,"schemeGnBu",(function(){return y_})),n.d(e,"interpolateOrRd",(function(){return E_})),n.d(e,"schemeOrRd",(function(){return b_})),n.d(e,"interpolatePuBuGn",(function(){return S_})),n.d(e,"schemePuBuGn",(function(){return T_})),n.d(e,"interpolatePuBu",(function(){return A_})),n.d(e,"schemePuBu",(function(){return w_})),n.d(e,"interpolatePuRd",(function(){return C_})),n.d(e,"schemePuRd",(function(){return x_})),n.d(e,"interpolateRdPu",(function(){return I_})),n.d(e,"schemeRdPu",(function(){return D_})),n.d(e,"interpolateYlGnBu",(function(){return k_})),n.d(e,"schemeYlGnBu",(function(){return R_})),n.d(e,"interpolateYlGn",(function(){return P_})),n.d(e,"schemeYlGn",(function(){return O_})),n.d(e,"interpolateYlOrBr",(function(){return L_})),n.d(e,"schemeYlOrBr",(function(){return M_})),n.d(e,"interpolateYlOrRd",(function(){return F_})),n.d(e,"schemeYlOrRd",(function(){return N_})),n.d(e,"interpolateBlues",(function(){return B_})),n.d(e,"schemeBlues",(function(){return j_})),n.d(e,"interpolateGreens",(function(){return V_})),n.d(e,"schemeGreens",(function(){return U_})),n.d(e,"interpolateGreys",(function(){return H_})),n.d(e,"schemeGreys",(function(){return G_})),n.d(e,"interpolatePurples",(function(){return z_})),n.d(e,"schemePurples",(function(){return Y_})),n.d(e,"interpolateReds",(function(){return X_})),n.d(e,"schemeReds",(function(){return q_})),n.d(e,"interpolateOranges",(function(){return W_})),n.d(e,"schemeOranges",(function(){return K_})),n.d(e,"interpolateCividis",(function(){return Q_})),n.d(e,"interpolateCubehelixDefault",(function(){return $_})),n.d(e,"interpolateRainbow",(function(){return eb})),n.d(e,"interpolateWarm",(function(){return Z_})),n.d(e,"interpolateCool",(function(){return J_})),n.d(e,"interpolateSinebow",(function(){return ab})),n.d(e,"interpolateTurbo",(function(){return ob})),n.d(e,"interpolateViridis",(function(){return ub})),n.d(e,"interpolateMagma",(function(){return lb})),n.d(e,"interpolateInferno",(function(){return cb})),n.d(e,"interpolatePlasma",(function(){return fb})),n.d(e,"create",(function(){return db})),n.d(e,"creator",(function(){return re})),n.d(e,"local",(function(){return pb})),n.d(e,"matcher",(function(){return vt})),n.d(e,"mouse",(function(){return On})),n.d(e,"namespace",(function(){return wt})),n.d(e,"namespaces",(function(){return St})),n.d(e,"clientPoint",(function(){return Rn})),n.d(e,"select",(function(){return Se})),n.d(e,"selectAll",(function(){return vb})),n.d(e,"selection",(function(){return Te})),n.d(e,"selector",(function(){return ht})),n.d(e,"selectorAll",(function(){return gt})),n.d(e,"style",(function(){return Lt})),n.d(e,"touch",(function(){return kn})),n.d(e,"touches",(function(){return mb})),n.d(e,"window",(function(){return kt})),n.d(e,"event",(function(){return le})),n.d(e,"customEvent",(function(){return ge})),n.d(e,"arc",(function(){return jb})),n.d(e,"area",(function(){return Yb})),n.d(e,"line",(function(){return Hb})),n.d(e,"pie",(function(){return Xb})),n.d(e,"areaRadial",(function(){return Jb})),n.d(e,"radialArea",(function(){return Jb})),n.d(e,"lineRadial",(function(){return Zb})),n.d(e,"radialLine",(function(){return Zb})),n.d(e,"pointRadial",(function(){return tE})),n.d(e,"linkHorizontal",(function(){return uE})),n.d(e,"linkVertical",(function(){return lE})),n.d(e,"linkRadial",(function(){return cE})),n.d(e,"symbol",(function(){return DE})),n.d(e,"symbols",(function(){return CE})),n.d(e,"symbolCircle",(function(){return fE})),n.d(e,"symbolCross",(function(){return dE})),n.d(e,"symbolDiamond",(function(){return gE})),n.d(e,"symbolSquare",(function(){return bE})),n.d(e,"symbolStar",(function(){return _E})),n.d(e,"symbolTriangle",(function(){return TE})),n.d(e,"symbolWye",(function(){return xE})),n.d(e,"curveBasisClosed",(function(){return ME})),n.d(e,"curveBasisOpen",(function(){return NE})),n.d(e,"curveBasis",(function(){return OE})),n.d(e,"curveBundle",(function(){return jE})),n.d(e,"curveCardinalClosed",(function(){return HE})),n.d(e,"curveCardinalOpen",(function(){return zE})),n.d(e,"curveCardinal",(function(){return VE})),n.d(e,"curveCatmullRomClosed",(function(){return QE})),n.d(e,"curveCatmullRomOpen",(function(){return ZE})),n.d(e,"curveCatmullRom",(function(){return KE})),n.d(e,"curveLinearClosed",(function(){return tT})),n.d(e,"curveLinear",(function(){return Ub})),n.d(e,"curveMonotoneX",(function(){return uT})),n.d(e,"curveMonotoneY",(function(){return lT})),n.d(e,"curveNatural",(function(){return dT})),n.d(e,"curveStep",(function(){return pT})),n.d(e,"curveStepAfter",(function(){return vT})),n.d(e,"curveStepBefore",(function(){return gT})),n.d(e,"stack",(function(){return bT})),n.d(e,"stackOffsetExpand",(function(){return ET})),n.d(e,"stackOffsetDiverging",(function(){return TT})),n.d(e,"stackOffsetNone",(function(){return mT})),n.d(e,"stackOffsetSilhouette",(function(){return ST})),n.d(e,"stackOffsetWiggle",(function(){return wT})),n.d(e,"stackOrderAppearance",(function(){return AT})),n.d(e,"stackOrderAscending",(function(){return CT})),n.d(e,"stackOrderDescending",(function(){return IT})),n.d(e,"stackOrderInsideOut",(function(){return RT})),n.d(e,"stackOrderNone",(function(){return yT})),n.d(e,"stackOrderReverse",(function(){return kT})),n.d(e,"timeInterval",(function(){return Pg})),n.d(e,"timeMillisecond",(function(){return pv})),n.d(e,"timeMilliseconds",(function(){return gv})),n.d(e,"utcMillisecond",(function(){return pv})),n.d(e,"utcMilliseconds",(function(){return gv})),n.d(e,"timeSecond",(function(){return fv})),n.d(e,"timeSeconds",(function(){return dv})),n.d(e,"utcSecond",(function(){return fv})),n.d(e,"utcSeconds",(function(){return dv})),n.d(e,"timeMinute",(function(){return uv})),n.d(e,"timeMinutes",(function(){return lv})),n.d(e,"timeHour",(function(){return av})),n.d(e,"timeHours",(function(){return ov})),n.d(e,"timeDay",(function(){return nv})),n.d(e,"timeDays",(function(){return rv})),n.d(e,"timeWeek",(function(){return Vg})),n.d(e,"timeWeeks",(function(){return Kg})),n.d(e,"timeSunday",(function(){return Vg})),n.d(e,"timeSundays",(function(){return Kg})),n.d(e,"timeMonday",(function(){return Gg})),n.d(e,"timeMondays",(function(){return Wg})),n.d(e,"timeTuesday",(function(){return Hg})),n.d(e,"timeTuesdays",(function(){return Qg})),n.d(e,"timeWednesday",(function(){return Yg})),n.d(e,"timeWednesdays",(function(){return $g})),n.d(e,"timeThursday",(function(){return zg})),n.d(e,"timeThursdays",(function(){return Zg})),n.d(e,"timeFriday",(function(){return qg})),n.d(e,"timeFridays",(function(){return Jg})),n.d(e,"timeSaturday",(function(){return Xg})),n.d(e,"timeSaturdays",(function(){return tv})),n.d(e,"timeMonth",(function(){return jg})),n.d(e,"timeMonths",(function(){return Bg})),n.d(e,"timeYear",(function(){return Lg})),n.d(e,"timeYears",(function(){return Ng})),n.d(e,"utcMinute",(function(){return Ey})),n.d(e,"utcMinutes",(function(){return Ty})),n.d(e,"utcHour",(function(){return yy})),n.d(e,"utcHours",(function(){return _y})),n.d(e,"utcDay",(function(){return Ov})),n.d(e,"utcDays",(function(){return Pv})),n.d(e,"utcWeek",(function(){return mv})),n.d(e,"utcWeeks",(function(){return wv})),n.d(e,"utcSunday",(function(){return mv})),n.d(e,"utcSundays",(function(){return wv})),n.d(e,"utcMonday",(function(){return yv})),n.d(e,"utcMondays",(function(){return Av})),n.d(e,"utcTuesday",(function(){return _v})),n.d(e,"utcTuesdays",(function(){return xv})),n.d(e,"utcWednesday",(function(){return bv})),n.d(e,"utcWednesdays",(function(){return Cv})),n.d(e,"utcThursday",(function(){return Ev})),n.d(e,"utcThursdays",(function(){return Dv})),n.d(e,"utcFriday",(function(){return Tv})),n.d(e,"utcFridays",(function(){return Iv})),n.d(e,"utcSaturday",(function(){return Sv})),n.d(e,"utcSaturdays",(function(){return Rv})),n.d(e,"utcMonth",(function(){return gy})),n.d(e,"utcMonths",(function(){return vy})),n.d(e,"utcYear",(function(){return Lv})),n.d(e,"utcYears",(function(){return Nv})),n.d(e,"timeFormatDefaultLocale",(function(){return ly})),n.d(e,"timeFormat",(function(){return Gv})),n.d(e,"timeParse",(function(){return Hv})),n.d(e,"utcFormat",(function(){return Yv})),n.d(e,"utcParse",(function(){return zv})),n.d(e,"timeFormatLocale",(function(){return Uv})),n.d(e,"isoFormat",(function(){return OT})),n.d(e,"isoParse",(function(){return PT})),n.d(e,"now",(function(){return Vn})),n.d(e,"timer",(function(){return Yn})),n.d(e,"timerFlush",(function(){return zn})),n.d(e,"timeout",(function(){return Wn})),n.d(e,"interval",(function(){return MT})),n.d(e,"transition",(function(){return Vr})),n.d(e,"active",(function(){return Qr})),n.d(e,"interrupt",(function(){return or})),n.d(e,"voronoi",(function(){return bS})),n.d(e,"zoom",(function(){return MS})),n.d(e,"zoomTransform",(function(){return AS})),n.d(e,"zoomIdentity",(function(){return wS}));var r="5.16.0",i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},a=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}},o=a(i),s=o.right,u=o.left,l=s,c=function(t,e){null==e&&(e=f);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return a};function f(t,e){return[t,e]}var d=function(t,e,n){var r,i,a,o,s=t.length,u=e.length,l=new Array(s*u);for(null==n&&(n=f),r=a=0;r<s;++r)for(o=t[r],i=0;i<u;++i,++a)l[a]=n(o,e[i]);return l},h=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},g=function(t,e){var n,r,i=t.length,a=0,o=-1,s=0,u=0;if(null==e)for(;++o<i;)isNaN(n=p(t[o]))||(u+=(r=n-s)*(n-(s+=r/++a)));else for(;++o<i;)isNaN(n=p(e(t[o],o,t)))||(u+=(r=n-s)*(n-(s+=r/++a)));if(a>1)return u/(a-1)},v=function(t,e){var n=g(t,e);return n?Math.sqrt(n):n},m=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,_=y.slice,b=y.map,E=function(t){return function(){return t}},T=function(t){return t},S=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},w=Math.sqrt(50),A=Math.sqrt(10),x=Math.sqrt(2),C=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=D(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function D(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=w?10:a>=A?5:a>=x?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=w?10:a>=A?5:a>=x?2:1)}function I(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=w?i*=10:a>=A?i*=5:a>=x&&(i*=2),e<t?-i:i}var R=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},k=function(){var t=T,e=m,n=R;function r(r){var i,a,o=r.length,s=new Array(o);for(i=0;i<o;++i)s[i]=t(r[i],i,r);var u=e(s),c=u[0],f=u[1],d=n(s,c,f);Array.isArray(d)||(d=I(c,f,d),d=S(Math.ceil(c/d)*d,f,d));for(var h=d.length;d[0]<=c;)d.shift(),--h;for(;d[h-1]>f;)d.pop(),--h;var p,g=new Array(h+1);for(i=0;i<=h;++i)(p=g[i]=[]).x0=i>0?d[i-1]:c,p.x1=i<h?d[i]:f;for(i=0;i<o;++i)c<=(a=s[i])&&a<=f&&g[l(d,a,0,h)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:E(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:E([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?E(_.call(t)):E(t),r):n},r},O=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}},P=function(t,e,n){return t=b.call(t,p).sort(i),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},M=function(t,e,n){return Math.ceil((n-e)/(3.5*v(t)*Math.pow(t.length,-1/3)))},L=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},N=function(t,e){var n,r=t.length,i=r,a=-1,o=0;if(null==e)for(;++a<r;)isNaN(n=p(t[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=p(e(t[a],a,t)))?--i:o+=n;if(i)return o/i},F=function(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=p(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=p(e(t[a],a,t)))||o.push(n);return O(o.sort(i),.5)},j=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n},B=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r},U=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},V=function(t,e){if(n=t.length){var n,r,a=0,o=0,s=t[o];for(null==e&&(e=i);++a<n;)(e(r=t[a],s)<0||0!==e(s,s))&&(s=r,o=a);return 0===e(s,s)?o:void 0}},G=function(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},H=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a},Y=function(t){if(!(i=t.length))return[];for(var e=-1,n=B(t,z),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r};function z(t){return t.length}var q=function(){return Y(arguments)},X=Array.prototype.slice,K=function(t){return t};function W(t){return"translate("+(t+.5)+",0)"}function Q(t){return"translate(0,"+(t+.5)+")"}function $(t){return function(e){return+t(e)}}function Z(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function J(){return!this.__axis}function tt(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,u=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",c=1===t||3===t?W:Q;function f(f){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,h=null==i?e.tickFormat?e.tickFormat.apply(e,n):K:i,p=Math.max(a,0)+s,g=e.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,y=(e.bandwidth?Z:$)(e.copy()),_=f.selection?f.selection():f,b=_.selectAll(".domain").data([null]),E=_.selectAll(".tick").data(d,e).order(),T=E.exit(),S=E.enter().append("g").attr("class","tick"),w=E.select("line"),A=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(S),w=w.merge(S.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),A=A.merge(S.append("text").attr("fill","currentColor").attr(l,u*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==_&&(b=b.transition(f),E=E.transition(f),w=w.transition(f),A=A.transition(f),T=T.transition(f).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?c(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:y(t))}))),T.remove(),b.attr("d",4===t||2==t?o?"M"+u*o+","+v+"H0.5V"+m+"H"+u*o:"M0.5,"+v+"V"+m:o?"M"+v+","+u*o+"V0.5H"+m+"V"+u*o:"M"+v+",0.5H"+m),E.attr("opacity",1).attr("transform",(function(t){return c(y(t))})),w.attr(l+"2",u*a),A.attr(l,u*p).text(h),_.filter(J).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=y}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=X.call(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:X.call(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:X.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f}function et(t){return tt(1,t)}function nt(t){return tt(2,t)}function rt(t){return tt(3,t)}function it(t){return tt(4,t)}var at={value:function(){}};function ot(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ut(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function lt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ct(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ot.prototype={constructor:st,on:function(t,e){var n,r=this._,i=ut(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=ct(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ct(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=lt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var ft=ot;function dt(){}var ht=function(t){return null==t?dt:function(){return this.querySelector(t)}};function pt(){return[]}var gt=function(t){return null==t?pt:function(){return this.querySelectorAll(t)}},vt=function(t){return function(){return this.matches(t)}},mt=function(t){return new Array(t.length)};function yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function _t(t,e,n,r,i,a){for(var o,s=0,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new yt(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function bt(t,e,n,r,i,a,o){var s,u,l,c={},f=e.length,d=a.length,h=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(h[s]=l="$"+o.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<d;++s)(u=c[l="$"+o.call(t,a[s],s,a)])?(r[s]=u,u.__data__=a[s],c[l]=null):n[s]=new yt(t,a[s]);for(s=0;s<f;++s)(u=e[s])&&c[h[s]]===u&&(i[s]=u)}function Et(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}yt.prototype={constructor:yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Tt="http://www.w3.org/1999/xhtml",St={svg:"http://www.w3.org/2000/svg",xhtml:Tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),St.hasOwnProperty(e)?{space:St[e],local:t}:t};function At(t){return function(){this.removeAttribute(t)}}function xt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ct(t,e){return function(){this.setAttribute(t,e)}}function Dt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function It(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Rt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var kt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Ot(t){return function(){this.style.removeProperty(t)}}function Pt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Mt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Lt(t,e){return t.style.getPropertyValue(e)||kt(t).getComputedStyle(t,null).getPropertyValue(e)}function Nt(t){return function(){delete this[t]}}function Ft(t,e){return function(){this[t]=e}}function jt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Bt(t){return t.trim().split(/^|\s+/)}function Ut(t){return t.classList||new Vt(t)}function Vt(t){this._node=t,this._names=Bt(t.getAttribute("class")||"")}function Gt(t,e){for(var n=Ut(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ht(t,e){for(var n=Ut(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Yt(t){return function(){Gt(this,t)}}function zt(t){return function(){Ht(this,t)}}function qt(t,e){return function(){(e.apply(this,arguments)?Gt:Ht)(this,t)}}function Xt(){this.textContent=""}function Kt(t){return function(){this.textContent=t}}function Wt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Qt(){this.innerHTML=""}function $t(t){return function(){this.innerHTML=t}}function Zt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Jt(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tt&&e.documentElement.namespaceURI===Tt?e.createElement(t):e.createElementNS(n,t)}}function ne(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}Vt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var re=function(t){var e=wt(t);return(e.local?ne:ee)(e)};function ie(){return null}function ae(){var t=this.parentNode;t&&t.removeChild(this)}function oe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function se(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var ue={},le=null;function ce(t,e,n){return t=fe(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function fe(t,e,n){return function(r){var i=le;le=r;try{t.call(this,this.__data__,e,n)}finally{le=i}}}function de(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function he(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function pe(t,e,n){var r=ue.hasOwnProperty(t.type)?ce:fe;return function(i,a,o){var s,u=this.__on,l=r(e,a,o);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function ge(t,e,n,r){var i=le;t.sourceEvent=le,le=t;try{return e.apply(n,r)}finally{le=i}}function ve(t,e,n){var r=kt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function me(t,e){return function(){return ve(this,t,e)}}function ye(t,e){return function(){return ve(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ue={mouseenter:"mouseover",mouseleave:"mouseout"}));var _e=[null];function be(t,e){this._groups=t,this._parents=e}function Ee(){return new be([[document.documentElement]],_e)}be.prototype=Ee.prototype={constructor:be,select:function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new be(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=gt(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new be(r,i)},filter:function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new be(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n,r=e?bt:_t,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var f=i[c],d=a[c],h=d.length,p=t.call(f,f&&f.__data__,c,i),g=p.length,v=u[c]=new Array(g),m=s[c]=new Array(g);r(f,d,v,m,l[c]=new Array(h),p,e);for(var y,_,b=0,E=0;b<g;++b)if(y=v[b]){for(b>=E&&(E=b+1);!(_=m[E])&&++E<g;);y._next=_||null}}return(s=new be(s,i))._enter=u,s._exit=l,s},enter:function(){return new be(this._enter||this._groups.map(mt),this._parents)},exit:function(){return new be(this._exit||this._groups.map(mt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),a=new Array(r),o=0;o<i;++o)for(var s,u=e[o],l=n[o],c=u.length,f=a[o]=new Array(c),d=0;d<c;++d)(s=u[d]||l[d])&&(f[d]=s);for(;o<r;++o)a[o]=e[o];return new be(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Et);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(e)}return new be(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=wt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?xt:At:"function"==typeof e?n.local?Rt:It:n.local?Dt:Ct)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ot:"function"==typeof e?Mt:Pt)(t,e,null==n?"":n)):Lt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Nt:"function"==typeof e?jt:Ft)(t,e)):this.node()[t]},classed:function(t,e){var n=Bt(t+"");if(arguments.length<2){for(var r=Ut(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?qt:e?Yt:zt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Xt:("function"==typeof t?Wt:Kt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Qt:("function"==typeof t?Zt:$t)(t)):this.node().innerHTML},raise:function(){return this.each(Jt)},lower:function(){return this.each(te)},append:function(t){var e="function"==typeof t?t:re(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:re(t),r=null==e?ie:"function"==typeof e?e:ht(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ae)},clone:function(t){return this.select(t?se:oe)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=de(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?pe:he,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ye:me)(t,e))}};var Te=Ee,Se=function(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],_e)};function we(){le.stopImmediatePropagation()}var Ae=function(){le.preventDefault(),le.stopImmediatePropagation()},xe=function(t){var e=t.document.documentElement,n=Se(t).on("dragstart.drag",Ae,!0);"onselectstart"in e?n.on("selectstart.drag",Ae,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Ce(t,e){var n=t.document.documentElement,r=Se(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ae,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var De=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Ie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Re(){}var ke="\\s*([+-]?\\d+)\\s*",Oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Me=/^#([0-9a-f]{3,8})$/,Le=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),Ne=new RegExp("^rgb\\("+[Pe,Pe,Pe]+"\\)$"),Fe=new RegExp("^rgba\\("+[ke,ke,ke,Oe]+"\\)$"),je=new RegExp("^rgba\\("+[Pe,Pe,Pe,Oe]+"\\)$"),Be=new RegExp("^hsl\\("+[Oe,Pe,Pe]+"\\)$"),Ue=new RegExp("^hsla\\("+[Oe,Pe,Pe,Oe]+"\\)$"),Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ge(){return this.rgb().formatHex()}function He(){return this.rgb().formatRgb()}function Ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Me.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ze(e):3===n?new We(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Le.exec(t))?new We(e[1],e[2],e[3],1):(e=Ne.exec(t))?new We(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Fe.exec(t))?qe(e[1],e[2],e[3],e[4]):(e=je.exec(t))?qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Be.exec(t))?Je(e[1],e[2]/100,e[3]/100,1):(e=Ue.exec(t))?Je(e[1],e[2]/100,e[3]/100,e[4]):Ve.hasOwnProperty(t)?ze(Ve[t]):"transparent"===t?new We(NaN,NaN,NaN,0):null}function ze(t){return new We(t>>16&255,t>>8&255,255&t,1)}function qe(t,e,n,r){return r<=0&&(t=e=n=NaN),new We(t,e,n,r)}function Xe(t){return t instanceof Re||(t=Ye(t)),t?new We((t=t.rgb()).r,t.g,t.b,t.opacity):new We}function Ke(t,e,n,r){return 1===arguments.length?Xe(t):new We(t,e,n,null==r?1:r)}function We(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Qe(){return"#"+Ze(this.r)+Ze(this.g)+Ze(this.b)}function $e(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ze(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Je(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nn(t,e,n,r)}function tn(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Re||(t=Ye(t)),!t)return new nn;if(t instanceof nn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new nn(o,s,u,t.opacity)}function en(t,e,n,r){return 1===arguments.length?tn(t):new nn(t,e,n,null==r?1:r)}function nn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function rn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function an(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}De(Re,Ye,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ge,formatHex:Ge,formatHsl:function(){return tn(this).formatHsl()},formatRgb:He,toString:He}),De(We,Ke,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new We(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new We(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qe,formatHex:Qe,formatRgb:$e,toString:$e})),De(nn,en,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new We(rn(t>=240?t-240:t+120,i,r),rn(t,i,r),rn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var on=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1];return an((n-r/e)*e,r>0?t[r-1]:2*i-a,i,a,r<e-1?t[r+2]:2*a-i)}},sn=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return an((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}},un=function(t){return function(){return t}};function ln(t,e){return function(n){return t+n*e}}function cn(t,e){var n=e-t;return n?ln(t,n>180||n<-180?n-360*Math.round(n/360):n):un(isNaN(t)?e:t)}function fn(t,e){var n=e-t;return n?ln(t,n):un(isNaN(t)?e:t)}var dn=function t(e){var n=function(t){return 1==(t=+t)?fn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):un(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Ke(t)).r,(e=Ke(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=fn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function hn(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ke(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var pn=hn(on),gn=hn(sn),vn=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function mn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var yn=function(t,e){return(mn(e)?vn:_n)(t,e)};function _n(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Dn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var bn,En,Tn=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Sn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},wn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Dn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},An=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(An.source,"g"),Cn=function(t,e){var n,r,i,a=An.lastIndex=xn.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=An.exec(t))&&(r=xn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Sn(n,r)})),a=xn.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Dn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?un(e):("number"===r?Sn:"string"===r?(n=Ye(e))?(e=n,dn):Cn:e instanceof Ye?dn:e instanceof Date?Tn:mn(e)?vn:Array.isArray(e)?_n:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?wn:Sn)(t,e)},In=function(){for(var t,e=le;t=e.sourceEvent;)e=t;return e},Rn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},kn=function(t,e,n){arguments.length<3&&(n=e,e=In().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return Rn(t,r);return null},On=function(t){var e=In();return e.changedTouches&&(e=e.changedTouches[0]),Rn(t,e)},Pn=0,Mn=0,Ln=0,Nn=0,Fn=0,jn=0,Bn="object"==typeof performance&&performance.now?performance:Date,Un="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vn(){return Fn||(Un(Gn),Fn=Bn.now()+jn)}function Gn(){Fn=0}function Hn(){this._call=this._time=this._next=null}function Yn(t,e,n){var r=new Hn;return r.restart(t,e,n),r}function zn(){Vn(),++Pn;for(var t,e=bn;e;)(t=Fn-e._time)>=0&&e._call.call(null,t),e=e._next;--Pn}function qn(){Fn=(Nn=Bn.now())+jn,Pn=Mn=0;try{zn()}finally{Pn=0,function(){for(var t,e,n=bn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bn=e);En=t,Kn(r)}(),Fn=0}}function Xn(){var t=Bn.now(),e=t-Nn;e>1e3&&(jn-=e,Nn=t)}function Kn(t){Pn||(Mn&&(Mn=clearTimeout(Mn)),t-Fn>24?(t<1/0&&(Mn=setTimeout(qn,t-Bn.now()-jn)),Ln&&(Ln=clearInterval(Ln))):(Ln||(Nn=Bn.now(),Ln=setInterval(Xn,1e3)),Pn=1,Un(qn)))}Hn.prototype=Yn.prototype={constructor:Hn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Vn():+n)+(null==e?0:+e),this._next||En===this||(En?En._next=this:bn=this,En=this),this._call=t,this._time=n,Kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kn())}};var Wn=function(t,e,n){var r=new Hn;return r.restart((function(n){r.stop(),t(n+e)}),e=null==e?0:+e,n),r},Qn=ft("start","end","cancel","interrupt"),$n=[],Zn=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(u){var l,c,f,d;if(1!==n.state)return s();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return Wn(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[l]):+l<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[l])}if(Wn((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Yn((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Qn,tween:$n,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function Jn(t,e){var n=er(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function tr(t,e){var n=er(t,e);if(n.state>3)throw new Error("too late; already running");return n}function er(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var nr,rr,ir,ar,or=function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}},sr=180/Math.PI,ur={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},lr=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*sr,skewX:Math.atan(u)*sr,scaleX:o,scaleY:s}};function cr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Sn(t,i)},{i:u-2,x:Sn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Sn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Sn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Sn(t,n)},{i:s-2,x:Sn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var fr=cr((function(t){return"none"===t?ur:(nr||(nr=document.createElement("DIV"),rr=document.documentElement,ir=document.defaultView),nr.style.transform=t,t=ir.getComputedStyle(rr.appendChild(nr),null).getPropertyValue("transform"),rr.removeChild(nr),t=t.slice(7,-1).split(","),lr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),dr=cr((function(t){return null==t?ur:(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),(t=ar.transform.baseVal.consolidate())?lr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ur)}),", ",")",")");function hr(t,e){var n,r;return function(){var i=tr(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function pr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=tr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function gr(t,e,n){var r=t._id;return t.each((function(){var t=tr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return er(t,r).value[e]}}var vr=function(t,e){var n;return("number"==typeof e?Sn:e instanceof Ye?dn:(n=Ye(e))?(e=n,dn):Cn)(t,e)};function mr(t){return function(){this.removeAttribute(t)}}function yr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _r(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function br(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Er(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttribute(t)}}function Tr(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function Sr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ar(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&wr(t,i)),n}return i._value=e,i}function xr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Sr(t,i)),n}return i._value=e,i}function Cr(t,e){return function(){Jn(this,t).delay=+e.apply(this,arguments)}}function Dr(t,e){return e=+e,function(){Jn(this,t).delay=e}}function Ir(t,e){return function(){tr(this,t).duration=+e.apply(this,arguments)}}function Rr(t,e){return e=+e,function(){tr(this,t).duration=e}}function kr(t,e){if("function"!=typeof e)throw new Error;return function(){tr(this,t).ease=e}}function Or(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Jn:tr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}var Pr=Te.prototype.constructor;function Mr(t){return function(){this.style.removeProperty(t)}}function Lr(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Nr(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Lr(t,a,n)),r}return a._value=e,a}function Fr(t){return function(e){this.textContent=t.call(this,e)}}function jr(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Fr(r)),e}return r._value=t,r}var Br=0;function Ur(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vr(t){return Te().transition(t)}function Gr(){return++Br}var Hr=Te.prototype;function Yr(t){return t*t*t}function zr(t){return--t*t*t+1}function qr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ur.prototype=Vr.prototype={constructor:Ur,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ht(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,f=a[o]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=t.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,Zn(f[d],e,n,d,f,er(s,n)));return new Ur(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=gt(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=t.call(u,u.__data__,f,l),p=er(u,n),g=0,v=h.length;g<v;++g)(d=h[g])&&Zn(d,e,n,g,h,p);a.push(h),o.push(u)}return new Ur(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Ur(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),a=new Array(r),o=0;o<i;++o)for(var s,u=e[o],l=n[o],c=u.length,f=a[o]=new Array(c),d=0;d<c;++d)(s=u[d]||l[d])&&(f[d]=s);for(;o<r;++o)a[o]=e[o];return new Ur(a,this._parents,this._name,this._id)},selection:function(){return new Pr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Gr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=er(o,e);Zn(o,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ur(r,this._parents,t,n)},call:Hr.call,nodes:Hr.nodes,node:Hr.node,size:Hr.size,empty:Hr.empty,each:Hr.each,on:function(t,e){var n=this._id;return arguments.length<2?er(this.node(),n).on.on(t):this.each(Or(n,t,e))},attr:function(t,e){var n=wt(t),r="transform"===n?dr:vr;return this.attrTween(t,"function"==typeof e?(n.local?Tr:Er)(n,r,gr(this,"attr."+t,e)):null==e?(n.local?yr:mr)(n):(n.local?br:_r)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=wt(t);return this.tween(n,(r.local?Ar:xr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?fr:vr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Lt(this,t),o=(this.style.removeProperty(t),Lt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Mr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Lt(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Lt(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}(t,r,gr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var u=tr(this,t),l=u.on,c=null==u.value[o]?a||(a=Mr(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Lt(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Nr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(gr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,jr(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=er(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?hr:pr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cr:Dr)(e,t)):er(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ir:Rr)(e,t)):er(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(kr(e,t)):er(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=tr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Xr={time:null,delay:0,duration:250,ease:qr};function Kr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Xr.time=Vn(),Xr;return n}Te.prototype.interrupt=function(t){return this.each((function(){or(this,t)}))},Te.prototype.transition=function(t){var e,n;t instanceof Ur?(e=t._id,t=t._name):(e=Gr(),(n=Xr).time=Vn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&Zn(o,t,e,l,s,n||Kr(o,e));return new Ur(r,this._parents,t,e)};var Wr=[null],Qr=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new Ur([[t]],Wr,e,+r);return null},$r=function(t){return function(){return t}},Zr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function Jr(){le.stopImmediatePropagation()}var ti=function(){le.preventDefault(),le.stopImmediatePropagation()},ei={name:"drag"},ni={name:"space"},ri={name:"handle"},ii={name:"center"};function ai(t){return[+t[0],+t[1]]}function oi(t){return[ai(t[0]),ai(t[1])]}function si(t){return function(e){return kn(e,le.touches,t)}}var ui={name:"x",handles:["w","e"].map(vi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},li={name:"y",handles:["n","s"].map(vi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ci={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(vi),input:function(t){return null==t?null:oi(t)},output:function(t){return t}},fi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},di={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vi(t){return{type:t}}function mi(){return!le.ctrlKey&&!le.button}function yi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function _i(){return navigator.maxTouchPoints||"ontouchstart"in this}function bi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ei(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ti(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Si(){return xi(ui)}function wi(){return xi(li)}var Ai=function(){return xi(ci)};function xi(t){var e,n=yi,r=mi,i=_i,a=!0,o=ft("start","brush","end"),s=6;function u(e){var n=e.property("__brush",g).selectAll(".overlay").data([vi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",fi.overlay).merge(n).each((function(){var t=bi(this).extent;Se(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([vi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",fi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return fi[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Se(this),e=bi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(){if((!e||le.touches)&&r.apply(this,arguments)){var n,i,o,s,u,f,d,h,p,g,v,m=this,y=le.target.__data__.type,_="selection"===(a&&le.metaKey?y="overlay":y)?ei:a&&le.altKey?ii:ri,b=t===li?null:pi[y],E=t===ui?null:gi[y],T=bi(m),S=T.extent,w=T.selection,A=S[0][0],x=S[0][1],C=S[1][0],D=S[1][1],I=0,R=0,k=b&&E&&a&&le.shiftKey,O=le.touches?si(le.changedTouches[0].identifier):On,P=O(m),M=P,L=c(m,arguments,!0).beforestart();"overlay"===y?(w&&(p=!0),T.selection=w=[[n=t===li?A:P[0],o=t===ui?x:P[1]],[u=t===li?C:n,d=t===ui?D:o]]):(n=w[0][0],o=w[0][1],u=w[1][0],d=w[1][1]),i=n,s=o,f=u,h=d;var N=Se(m).attr("pointer-events","none"),F=N.selectAll(".overlay").attr("cursor",fi[y]);if(le.touches)L.moved=B,L.ended=V;else{var j=Se(le.view).on("mousemove.brush",B,!0).on("mouseup.brush",V,!0);a&&j.on("keydown.brush",G,!0).on("keyup.brush",H,!0),xe(le.view)}Jr(),or(m),l.call(m),L.start()}function B(){var t=O(m);!k||g||v||(Math.abs(t[0]-M[0])>Math.abs(t[1]-M[1])?v=!0:g=!0),M=t,p=!0,ti(),U()}function U(){var t;switch(I=M[0]-P[0],R=M[1]-P[1],_){case ni:case ei:b&&(I=Math.max(A-n,Math.min(C-u,I)),i=n+I,f=u+I),E&&(R=Math.max(x-o,Math.min(D-d,R)),s=o+R,h=d+R);break;case ri:b<0?(I=Math.max(A-n,Math.min(C-n,I)),i=n+I,f=u):b>0&&(I=Math.max(A-u,Math.min(C-u,I)),i=n,f=u+I),E<0?(R=Math.max(x-o,Math.min(D-o,R)),s=o+R,h=d):E>0&&(R=Math.max(x-d,Math.min(D-d,R)),s=o,h=d+R);break;case ii:b&&(i=Math.max(A,Math.min(C,n-I*b)),f=Math.max(A,Math.min(C,u+I*b))),E&&(s=Math.max(x,Math.min(D,o-R*E)),h=Math.max(x,Math.min(D,d+R*E)))}f<i&&(b*=-1,t=n,n=u,u=t,t=i,i=f,f=t,y in di&&F.attr("cursor",fi[y=di[y]])),h<s&&(E*=-1,t=o,o=d,d=t,t=s,s=h,h=t,y in hi&&F.attr("cursor",fi[y=hi[y]])),T.selection&&(w=T.selection),g&&(i=w[0][0],f=w[1][0]),v&&(s=w[0][1],h=w[1][1]),w[0][0]===i&&w[0][1]===s&&w[1][0]===f&&w[1][1]===h||(T.selection=[[i,s],[f,h]],l.call(m),L.brush())}function V(){if(Jr(),le.touches){if(le.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ce(le.view,p),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),F.attr("cursor",fi.overlay),T.selection&&(w=T.selection),Ei(w)&&(T.selection=null,l.call(m)),L.end()}function G(){switch(le.keyCode){case 16:k=b&&E;break;case 18:_===ri&&(b&&(u=f-I*b,n=i+I*b),E&&(d=h-R*E,o=s+R*E),_=ii,U());break;case 32:_!==ri&&_!==ii||(b<0?u=f-I:b>0&&(n=i-I),E<0?d=h-R:E>0&&(o=s-R),_=ni,F.attr("cursor",fi.selection),U());break;default:return}ti()}function H(){switch(le.keyCode){case 16:k&&(g=v=k=!1,U());break;case 18:_===ii&&(b<0?u=f:b>0&&(n=i),E<0?d=h:E>0&&(o=s),_=ri,U());break;case 32:_===ni&&(le.altKey?(b&&(u=f-I*b,n=i+I*b),E&&(d=h-R*E,o=s+R*E),_=ii):(b<0?u=f:b>0&&(n=i),E<0?d=h:E>0&&(o=s),_=ri),F.attr("cursor",fi[y]),U());break;default:return}ti()}}function h(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=oi(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=c(e,arguments),a=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Dn(a,o);function u(t){r.selection=1===t&&null===o?null:s(t),l.call(e),i.brush()}return null!==a&&null!==o?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),o=c(e,r).beforestart();or(e),i.selection=null===a?null:a,l.call(e),o.start().brush().end()}))},u.clear=function(t){u.move(t,null)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ge(new Zr(u,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:$r(oi(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:$r(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:$r(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var Ci=Math.cos,Di=Math.sin,Ii=Math.PI,Ri=Ii/2,ki=2*Ii,Oi=Math.max;function Pi(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Mi=function(){var t=0,e=null,n=null,r=null;function i(i){var a,o,s,u,l,c,f=i.length,d=[],h=S(f),p=[],g=[],v=g.groups=new Array(f),m=new Array(f*f);for(a=0,l=-1;++l<f;){for(o=0,c=-1;++c<f;)o+=i[l][c];d.push(o),p.push(S(f)),a+=o}for(e&&h.sort((function(t,n){return e(d[t],d[n])})),n&&p.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(a=Oi(0,ki-t*f)/a)?t:ki/f,o=0,l=-1;++l<f;){for(s=o,c=-1;++c<f;){var y=h[l],_=p[y][c],b=i[y][_],E=o,T=o+=b*a;m[_*f+y]={index:y,subindex:_,startAngle:E,endAngle:T,value:b}}v[y]={index:y,startAngle:s,endAngle:o,value:d[y]},o+=u}for(l=-1;++l<f;)for(c=l-1;++c<f;){var w=m[c*f+l],A=m[l*f+c];(w.value||A.value)&&g.push(w.value<A.value?{source:A,target:w}:{source:w,target:A})}return r?g.sort(r):g}return i.padAngle=function(e){return arguments.length?(t=Oi(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Pi(t))._=t,i):r&&r._},i},Li=Array.prototype.slice,Ni=function(t){return function(){return t}},Fi=Math.PI,ji=2*Fi,Bi=ji-1e-6;function Ui(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vi(){return new Ui}Ui.prototype=Vi.prototype={constructor:Ui,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){var a=this._x1,o=this._y1,s=(n=+n)-(t=+t),u=(r=+r)-(e=+e),l=a-t,c=o-e,f=l*l+c*c;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var d=n-a,h=r-o,p=s*s+u*u,g=d*d+h*h,v=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((Fi-Math.acos((p+f-g)/(2*v*m)))/2),_=y/m,b=y/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(e+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+o,l=e+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%ji+ji),f>Bi?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Fi)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Gi=Vi;function Hi(t){return t.source}function Yi(t){return t.target}function zi(t){return t.radius}function qi(t){return t.startAngle}function Xi(t){return t.endAngle}var Ki=function(){var t=Hi,e=Yi,n=zi,r=qi,i=Xi,a=null;function o(){var o,s=Li.call(arguments),u=t.apply(this,s),l=e.apply(this,s),c=+n.apply(this,(s[0]=u,s)),f=r.apply(this,s)-Ri,d=i.apply(this,s)-Ri,h=c*Ci(f),p=c*Di(f),g=+n.apply(this,(s[0]=l,s)),v=r.apply(this,s)-Ri,m=i.apply(this,s)-Ri;if(a||(a=o=Gi()),a.moveTo(h,p),a.arc(0,0,c,f,d),f===v&&d===m||(a.quadraticCurveTo(0,0,g*Ci(v),g*Di(v)),a.arc(0,0,g,v,m)),a.quadraticCurveTo(0,0,h,p),a.closePath(),o)return a=null,o+""||null}return o.radius=function(t){return arguments.length?(n="function"==typeof t?t:Ni(+t),o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Ni(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ni(+t),o):i},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o};function Wi(){}function Qi(t,e){var n=new Wi;if(t instanceof Wi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Wi.prototype=Qi.prototype={constructor:Wi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var $i=Qi,Zi=function(){var t,e,n,r=[],i=[];function a(n,i,o,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,l,c,f=-1,d=n.length,h=r[i++],p=$i(),g=o();++f<d;)(c=p.get(u=h(l=n[f])+""))?c.push(l):p.set(u,[l]);return p.each((function(t,e){s(g,e,a(t,i,o,s))})),g}return n={object:function(t){return a(t,0,Ji,ta)},map:function(t){return a(t,0,ea,na)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,s=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}(a(t,0,ea,na),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function Ji(){return{}}function ta(t,e,n){t[e]=n}function ea(){return $i()}function na(t,e,n){t.set(e,n)}function ra(){}var ia=$i.prototype;function aa(t,e){var n=new ra;if(t instanceof ra)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}ra.prototype=aa.prototype={constructor:ra,has:ia.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ia.remove,clear:ia.clear,values:ia.keys,size:ia.size,empty:ia.empty,each:ia.each};var oa=aa,sa=function(t){var e=[];for(var n in t)e.push(n);return e},ua=function(t){var e=[];for(var n in t)e.push(t[n]);return e},la=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ca=Math.PI/180,fa=180/Math.PI;function da(t){if(t instanceof ga)return new ga(t.l,t.a,t.b,t.opacity);if(t instanceof Sa)return wa(t);t instanceof We||(t=Xe(t));var e,n,r=_a(t.r),i=_a(t.g),a=_a(t.b),o=va((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=va((.4360747*r+.3850649*i+.1430804*a)/.96422),n=va((.0139322*r+.0971045*i+.7141733*a)/.82521)),new ga(116*o-16,500*(e-o),200*(o-n),t.opacity)}function ha(t,e){return new ga(t,0,0,null==e?1:e)}function pa(t,e,n,r){return 1===arguments.length?da(t):new ga(t,e,n,null==r?1:r)}function ga(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function va(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function ma(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function ya(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function _a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ba(t){if(t instanceof Sa)return new Sa(t.h,t.c,t.l,t.opacity);if(t instanceof ga||(t=da(t)),0===t.a&&0===t.b)return new Sa(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*fa;return new Sa(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ea(t,e,n,r){return 1===arguments.length?ba(t):new Sa(n,e,t,null==r?1:r)}function Ta(t,e,n,r){return 1===arguments.length?ba(t):new Sa(t,e,n,null==r?1:r)}function Sa(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function wa(t){if(isNaN(t.h))return new ga(t.l,0,0,t.opacity);var e=t.h*ca;return new ga(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}De(ga,pa,Ie(Re,{brighter:function(t){return new ga(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ga(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new We(ya(3.1338561*(e=.96422*ma(e))-1.6168667*(t=1*ma(t))-.4906146*(n=.82521*ma(n))),ya(-.9787684*e+1.9161415*t+.033454*n),ya(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),De(Sa,Ta,Ie(Re,{brighter:function(t){return new Sa(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Sa(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return wa(this).rgb()}}));var Aa=-.29227,xa=-1.7884503806,Ca=3.5172982438,Da=-.6557636667999999;function Ia(t){if(t instanceof ka)return new ka(t.h,t.s,t.l,t.opacity);t instanceof We||(t=Xe(t));var e=t.g/255,n=t.b/255,r=(Da*n+xa*(t.r/255)-Ca*e)/(Da+xa-Ca),i=n-r,a=(1.97294*(e-r)-Aa*i)/-.90649,o=Math.sqrt(a*a+i*i)/(1.97294*r*(1-r)),s=o?Math.atan2(a,i)*fa-120:NaN;return new ka(s<0?s+360:s,o,r,t.opacity)}function Ra(t,e,n,r){return 1===arguments.length?Ia(t):new ka(t,e,n,null==r?1:r)}function ka(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}De(ka,Ra,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ka(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ka(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ca,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new We(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Aa*r+-.90649*i)),255*(e+n*(1.97294*r)),this.opacity)}}));var Oa=Array.prototype.slice,Pa=function(t,e){return t-e},Ma=function(t){return function(){return t}},La=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Na(t,e[r]))return n;return 0};function Na(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],l=u[0],c=u[1],f=t[s],d=f[0],h=f[1];if(Fa(u,f,e))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Fa(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=e[r],i<=(a=n[r])&&a<=o||o<=a&&a<=i)}var ja=function(){},Ba=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Ua=function(){var t=1,e=1,n=R,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Pa);else{var r=m(t),i=r[0],o=r[1];e=I(i,o,e),e=S(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f=new Array,d=new Array;for(a=s=-1,Ba[(u=n[0]>=r)<<1].forEach(h);++a<t-1;)Ba[u|(u=n[a+1]>=r)<<1].forEach(h);for(Ba[u<<0].forEach(h);++s<e-1;){for(a=-1,Ba[(u=n[s*t+t]>=r)<<1|(l=n[s*t]>=r)<<2].forEach(h);++a<t-1;)c=l,Ba[u|(u=n[s*t+t+a+1]>=r)<<1|(l=n[s*t+a+1]>=r)<<2|c<<3].forEach(h);Ba[u|l<<3].forEach(h)}for(a=-1,Ba[(l=n[s*t]>=r)<<2].forEach(h);++a<t-1;)c=l,Ba[(l=n[s*t+a+1]>=r)<<2|c<<3].forEach(h);function h(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],l=o(r),c=o(u);(e=d[l])?(n=f[c])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=c]=e):(e=f[c])?(n=d[l])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=l]=e):f[l]=d[c]={start:l,end:c,ring:[r,u]}}Ba[l<<3].forEach(h)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==La((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var a,o=n[0],s=n[1],u=0|o,l=0|s,c=r[l*t+u];o>0&&o<t&&u===o&&(n[0]=o+(i-(a=r[l*t+u-1]))/(c-a)-.5),s>0&&s<e&&l===s&&(n[1]=s+(i-(a=r[(l-1)*t+u]))/(c-a)-.5)}))}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0&&a>0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Ma(Oa.call(t)):Ma(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:ja,i):r===s},i};function Va(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+o*r]),s>=n&&(s>=a&&(u-=t.data[s-a+o*r]),e.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function Ga(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[o+s*r]),s>=n&&(s>=a&&(u-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}function Ha(t){return t[0]}function Ya(t){return t[1]}function za(){return 1}var qa=function(){var t=Ha,e=Ya,n=za,r=960,i=500,a=20,o=2,s=3*a,u=r+2*s>>o,l=i+2*s>>o,c=Ma(20);function f(r){var i=new Float32Array(u*l),f=new Float32Array(u*l);r.forEach((function(r,a,c){var f=+t(r,a,c)+s>>o,d=+e(r,a,c)+s>>o,h=+n(r,a,c);f>=0&&f<u&&d>=0&&d<l&&(i[f+d*u]+=h)})),Va({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),Ga({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),Va({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),Ga({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),Va({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),Ga({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o);var h=c(i);if(!Array.isArray(h)){var p=L(i);h=I(0,p,h),(h=S(0,Math.floor(p/h)*h,h)).shift()}return Ua().thresholds(h).size([u,l])(i).map(d)}function d(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(h),t}function h(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function v(){return u=r+2*(s=3*a)>>o,l=i+2*s>>o,f}return f.x=function(e){return arguments.length?(t="function"==typeof e?e:Ma(+e),f):t},f.y=function(t){return arguments.length?(e="function"==typeof t?t:Ma(+t),f):e},f.weight=function(t){return arguments.length?(n="function"==typeof t?t:Ma(+t),f):n},f.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,v()},f.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),v()},f.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?Ma(Oa.call(t)):Ma(t),f):c},f.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},f},Xa=function(t){return function(){return t}};function Ka(t,e,n,r,i,a,o,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=u,this._=l}function Wa(){return!le.ctrlKey&&!le.button}function Qa(){return this.parentNode}function $a(t){return null==t?{x:le.x,y:le.y}:t}function Za(){return navigator.maxTouchPoints||"ontouchstart"in this}Ka.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ja=function(){var t,e,n,r,i=Wa,a=Qa,o=$a,s=Za,u={},l=ft("start","drag","end"),c=0,f=0;function d(t){t.on("mousedown.drag",h).filter(s).on("touchstart.drag",v).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){if(!r&&i.apply(this,arguments)){var o=_("mouse",a.apply(this,arguments),On,this,arguments);o&&(Se(le.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),xe(le.view),we(),n=!1,t=le.clientX,e=le.clientY,o("start"))}}function p(){if(Ae(),!n){var r=le.clientX-t,i=le.clientY-e;n=r*r+i*i>f}u.mouse("drag")}function g(){Se(le.view).on("mousemove.drag mouseup.drag",null),Ce(le.view,n),Ae(),u.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=le.changedTouches,r=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=_(n[t].identifier,r,kn,this,arguments))&&(we(),e("start"))}}function m(){var t,e,n=le.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(Ae(),e("drag"))}function y(){var t,e,n=le.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(we(),e("end"))}function _(t,e,n,r,i){var a,s,f,h=n(e,t),p=l.copy();if(ge(new Ka(d,"beforestart",a,t,c,h[0],h[1],0,0,p),(function(){return null!=(le.subject=a=o.apply(r,i))&&(s=a.x-h[0]||0,f=a.y-h[1]||0,!0)})))return function o(l){var g,v=h;switch(l){case"start":u[t]=o,g=c++;break;case"end":delete u[t],--c;case"drag":h=n(e,t),g=c}ge(new Ka(d,l,a,t,g,h[0]+s,h[1]+f,h[0]-v[0],h[1]-v[1],p),p.apply,p,[l,r,i])}}return d.filter=function(t){return arguments.length?(i="function"==typeof t?t:Xa(!!t),d):i},d.container=function(t){return arguments.length?(a="function"==typeof t?t:Xa(t),d):a},d.subject=function(t){return arguments.length?(o="function"==typeof t?t:Xa(t),d):o},d.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Xa(!!t),d):s},d.on=function(){var t=l.on.apply(l,arguments);return t===l?d:t},d.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,d):Math.sqrt(f)},d},to={},eo={};function no(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function ro(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function io(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}var ao=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return eo;if(l)return l=!1,to;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?u=!0:10===(r=t.charCodeAt(o++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=c())!==eo;){for(var f=[];r!==to&&r!==eo;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?function(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+io(-e,6):e>9999?"+"+io(e,6):io(e,4))+"-"+io(t.getUTCMonth()+1,2)+"-"+io(t.getUTCDate(),2)+(a?"T"+io(n,2)+":"+io(r,2)+":"+io(i,2)+"."+io(a,3)+"Z":i?"T"+io(n,2)+":"+io(r,2)+":"+io(i,2)+"Z":r||n?"T"+io(n,2)+":"+io(r,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=no(t);return function(r,i){return e(n(r),i,t)}}(t,e):no(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=ro(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=ro(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}},oo=ao(","),so=oo.parse,uo=oo.parseRows,lo=oo.format,co=oo.formatBody,fo=oo.formatRows,ho=oo.formatRow,po=oo.formatValue,go=ao("\t"),vo=go.parse,mo=go.parseRows,yo=go.format,_o=go.formatBody,bo=go.formatRows,Eo=go.formatRow,To=go.formatValue;function So(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;wo&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var wo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ao(t){return+t}function xo(t){return t*t}function Co(t){return t*(2-t)}function Do(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Io=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Ro=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),ko=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Oo=Math.PI,Po=Oo/2;function Mo(t){return 1==+t?1:1-Math.cos(t*Po)}function Lo(t){return Math.sin(t*Po)}function No(t){return(1-Math.cos(Oo*t))/2}function Fo(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function jo(t){return Fo(1-+t)}function Bo(t){return 1-Fo(t)}function Uo(t){return((t*=2)<=1?Fo(1-t):2-Fo(t-1))/2}function Vo(t){return 1-Math.sqrt(1-t*t)}function Go(t){return Math.sqrt(1- --t*t)}function Ho(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Yo(t){return 1-zo(1-t)}function zo(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+3/4:t<10/11?7.5625*(t-=9/11)*t+15/16:7.5625*(t-=21/22)*t+63/64}function qo(t){return((t*=2)<=1?1-zo(1-t):zo(t-1)+1)/2}var Xo=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),Ko=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),Wo=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Qo=2*Math.PI,$o=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Qo);function i(t){return e*Fo(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Qo)},i.period=function(n){return t(e,n)},i}(1,.3),Zo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Qo);function i(t){return 1-e*Fo(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Qo)},i.period=function(n){return t(e,n)},i}(1,.3),Jo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Qo);function i(t){return((t=2*t-1)<0?e*Fo(-t)*Math.sin((r-t)/n):2-e*Fo(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Qo)},i.period=function(n){return t(e,n)},i}(1,.3);function ts(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var es=function(t,e){return fetch(t,e).then(ts)};function ns(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var rs=function(t,e){return fetch(t,e).then(ns)};function is(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var as=function(t,e){return fetch(t,e).then(is)};function os(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),as(e,n).then((function(e){return t(e,r)}))}}function ss(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=ao(t);return as(e,n).then((function(t){return i.parse(t,r)}))}var us=os(so),ls=os(vo),cs=function(t,e){return new Promise((function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function fs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}var ds=function(t,e){return fetch(t,e).then(fs)};function hs(t){return function(e,n){return as(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var ps=hs("application/xml"),gs=hs("text/html"),vs=hs("image/svg+xml"),ms=function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},ys=function(t){return function(){return t}},_s=function(){return 1e-6*(Math.random()-.5)};function bs(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,l,c,f,d,h=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((l=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o,i=h,!(h=h[f=c<<1|l]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o}while((f=c<<1|l)==(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}var Es=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Ts(t){return t[0]}function Ss(t){return t[1]}function ws(t,e,n){var r=new As(null==e?Ts:e,null==n?Ss:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function As(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function xs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Cs=ws.prototype=As.prototype;function Ds(t){return t.x+t.vx}function Is(t){return t.y+t.vy}Cs.copy=function(){var t,e,n=new As(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=xs(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=xs(e));return n},Cs.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return bs(this.cover(e,n),e,n,t)},Cs.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<a;++n)bs(this,o[n],s[n],t[n]);return this},Cs.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Cs.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Cs.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Cs.find=function(t,e,n){var r,i,a,o,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Es(g,c,f,d,h)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,h=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<c||(s=u.y1)<f))if(g.length){var v=(i+o)/2,m=(a+s)/2;p.push(new Es(g[3],v,m,o,s),new Es(g[2],i,m,v,s),new Es(g[1],v,a,o,m),new Es(g[0],i,a,v,m)),(l=(e>=m)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),b=y*y+_*_;if(b<n){var E=Math.sqrt(n=b);c=t-E,f=e-E,d=t+E,h=e+E,r=g.data}}return r},Cs.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,l,c,f,d,h=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(p+v)/2))?p=s:v=s,(c=o>=(u=(g+m)/2))?g=u:m=u,e=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},Cs.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Cs.root=function(){return this._root},Cs.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Cs.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new Es(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new Es(n,l,c,a,o)),(n=u[2])&&s.push(new Es(n,r,c,l,o)),(n=u[1])&&s.push(new Es(n,l,i,a,c)),(n=u[0])&&s.push(new Es(n,r,i,l,c))}return this},Cs.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Es(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,f=(s+l)/2;(a=i[0])&&n.push(new Es(a,o,s,c,f)),(a=i[1])&&n.push(new Es(a,c,s,u,f)),(a=i[2])&&n.push(new Es(a,o,f,c,l)),(a=i[3])&&n.push(new Es(a,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Cs.x=function(t){return arguments.length?(this._x=t,this):this._x},Cs.y=function(t){return arguments.length?(this._y=t,this):this._y};var Rs=function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,u,l,c,f,d=e.length,h=0;h<i;++h)for(a=ws(e,Ds,Is).visitAfter(o),t=0;t<d;++t)f=(c=n[(s=e[t]).index])*c,u=s.x+s.vx,l=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,d=t.r,h=c+d;if(!o)return e>u+h||i<u-h||n>l+h||a<l-h;if(o.index>s.index){var p=u-o.x-o.vx,g=l-o.y-o.vy,v=p*p+g*g;v<h*h&&(0===p&&(v+=(p=_s())*p),0===g&&(v+=(g=_s())*g),v=(h-(v=Math.sqrt(v)))/v*r,s.vx+=(p*=v)*(h=(d*=d)/(f+d)),s.vy+=(g*=v)*h,o.vx-=p*(h=1-h),o.vy-=g*h)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=ys(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),s(),a):t},a};function ks(t){return t.index}function Os(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Ps=function(t){var e,n,r,i,a,o=ks,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=ys(30),l=1;function c(r){for(var i=0,o=t.length;i<l;++i)for(var s,u,c,f,d,h,p,g=0;g<o;++g)f=(c=(s=t[g]).target).x+c.vx-(u=s.source).x-u.vx||_s(),d=c.y+c.vy-u.y-u.vy||_s(),d*=h=((h=Math.sqrt(f*f+d*d))-n[g])/h*r*e[g],c.vx-=(f*=h)*(p=a[g]),c.vy-=d*p,u.vx+=f*(p=1-p),u.vy+=d*p}function f(){if(r){var s,u,l=r.length,c=t.length,f=$i(r,o);for(s=0,i=new Array(l);s<c;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Os(f,u.source)),"object"!=typeof u.target&&(u.target=Os(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)a[s]=i[(u=t[s]).source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),h()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:ys(+t),d(),c):s},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:ys(+t),h(),c):u},c};function Ms(t){return t.x}function Ls(t){return t.y}var Ns=Math.PI*(3-Math.sqrt(5)),Fs=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=$i(),u=Yn(c),l=ft("tick","end");function c(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(r){var u,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.each((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),a=n*Ns;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.each(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,h(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},js=function(){var t,e,n,r,i=ys(-30),a=1,o=1/0,s=.81;function u(r){var i,a=t.length,o=ws(t,Ms,Ls).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],o.visit(f)}function l(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)r[(n=t[e]).index]=+i(n,e,t)}}function c(t){var e,n,i,a,o,s=0,u=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,a+=n*e.y);t.x=i/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,l){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,d=l-i,h=c*c+f*f;if(d*d/s<h)return h<o&&(0===c&&(h+=(c=_s())*c),0===f&&(h+=(f=_s())*f),h<a&&(h=Math.sqrt(a*h)),e.vx+=c*t.value*n/h,e.vy+=f*t.value*n/h),!0;if(!(t.length||h>=o)){(t.data!==e||t.next)&&(0===c&&(h+=(c=_s())*c),0===f&&(h+=(f=_s())*f),h<a&&(h=Math.sqrt(a*h)));do{t.data!==e&&(e.vx+=c*(d=r[t.data.index]*n/h),e.vy+=f*d)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:ys(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},Bs=function(t,e,n){var r,i,a,o=ys(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var u=r[o],l=u.x-e||1e-6,c=u.y-n||1e-6,f=Math.sqrt(l*l+c*c),d=(a[o]-f)*i[o]*t/f;u.vx+=l*d,u.vy+=c*d}}function u(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=ys(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:ys(+t),u(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},Us=function(t){var e,n,r,i=ys(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:ys(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),o(),a):t},a},Vs=function(t){var e,n,r,i=ys(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:ys(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),o(),a):t},a};function Gs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var Hs=function(t){return(t=Gs(Math.abs(t)))?t[1]:NaN},Ys=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zs(t){if(!(e=Ys.exec(t)))throw new Error("invalid format: "+t);var e;return new qs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}zs.prototype=qs.prototype,qs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xs,Ks,Ws,Qs,$s=function(t,e){var n=Gs(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Zs={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return $s(100*t,e)},r:$s,s:function(t,e){var n=Gs(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Xs=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Gs(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Js=function(t){return t},tu=Array.prototype.map,eu=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],nu=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Js:(e=tu.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Js:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(tu.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=zs(t)).fill,n=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Zs[y]||(void 0===v&&(v=12),m=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?a:/[%p]/.test(y)?u:"",E=Zs[y],T=/[defgprs%]/.test(y);function S(t){var i,a,u,d=_,S=b;if("c"===y)S=E(t)+S,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:E(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==f&&(w=!1),d=(w?"("===f?f:l:"-"===f||"("===f?"":f)+d,S=("s"===y?eu[8+Xs/3]:"")+S+(w&&"("===f?")":""),T)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){S=(46===u?o+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}g&&!h&&(t=r(t,1/0));var A=d.length+t.length+S.length,x=A<p?new Array(p-A+1).join(e):"";switch(g&&h&&(t=r(x+t,x.length?p-S.length:1/0),x=""),n){case"<":t=d+t+S+x;break;case"=":t=d+x+t+S;break;case"^":t=x.slice(0,A=x.length>>1)+d+t+S+x.slice(A);break;default:t=x+d+t+S}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return t+""},S}return{format:f,formatPrefix:function(t,e){var n=f(((t=zs(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3))),i=Math.pow(10,-r),a=eu[8+r/3];return function(t){return n(i*t)+a}}}};function ru(t){return Ks=nu(t),Ws=Ks.format,Qs=Ks.formatPrefix,Ks}ru({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var iu=function(t){return Math.max(0,-Hs(Math.abs(t)))},au=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3)))-Hs(Math.abs(t)))},ou=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hs(e)-Hs(t))+1},su=function(){return new uu};function uu(){this.reset()}uu.prototype={constructor:uu,reset:function(){this.s=this.t=0},add:function(t){cu(lu,t,this.t),cu(this,lu.s,this.s),this.s?this.t+=lu.t:this.s=lu.t},valueOf:function(){return this.s}};var lu=new uu;function cu(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var fu=Math.PI,du=fu/2,hu=fu/4,pu=2*fu,gu=180/fu,vu=fu/180,mu=Math.abs,yu=Math.atan,_u=Math.atan2,bu=Math.cos,Eu=Math.ceil,Tu=Math.exp,Su=(Math,Math.log),wu=Math.pow,Au=Math.sin,xu=Math.sign||function(t){return t>0?1:t<0?-1:0},Cu=Math.sqrt,Du=Math.tan;function Iu(t){return t>1?0:t<-1?fu:Math.acos(t)}function Ru(t){return t>1?du:t<-1?-du:Math.asin(t)}function ku(t){return(t=Au(t/2))*t}function Ou(){}function Pu(t,e){t&&Lu.hasOwnProperty(t.type)&&Lu[t.type](t,e)}var Mu={Feature:function(t,e){Pu(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Pu(n[r].geometry,e)}},Lu={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){Nu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nu(n[r],e,0)},Polygon:function(t,e){Fu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Fu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Pu(n[r],e)}};function Nu(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Fu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Nu(t[n],e,1);e.polygonEnd()}var ju,Bu,Uu,Vu,Gu,Hu=function(t,e){t&&Mu.hasOwnProperty(t.type)?Mu[t.type](t,e):Pu(t,e)},Yu=su(),zu=su(),qu={point:Ou,lineStart:Ou,lineEnd:Ou,polygonStart:function(){Yu.reset(),qu.lineStart=Xu,qu.lineEnd=Ku},polygonEnd:function(){var t=+Yu;zu.add(t<0?pu+t:t),this.lineStart=this.lineEnd=this.point=Ou},sphere:function(){zu.add(pu)}};function Xu(){qu.point=Wu}function Ku(){Qu(ju,Bu)}function Wu(t,e){qu.point=Qu,ju=t,Bu=e,Uu=t*=vu,Vu=bu(e=(e*=vu)/2+hu),Gu=Au(e)}function Qu(t,e){var n=(t*=vu)-Uu,r=n>=0?1:-1,i=r*n,a=bu(e=(e*=vu)/2+hu),o=Au(e),s=Gu*o,u=Vu*a+s*bu(i),l=s*r*Au(i);Yu.add(_u(l,u)),Uu=t,Vu=a,Gu=o}var $u=function(t){return zu.reset(),Hu(t,qu),2*zu};function Zu(t){return[_u(t[1],t[0]),Ru(t[2])]}function Ju(t){var e=t[0],n=t[1],r=bu(n);return[r*bu(e),r*Au(e),Au(n)]}function tl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function el(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function nl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function rl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function il(t){var e=Cu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var al,ol,sl,ul,ll,cl,fl,dl,hl,pl,gl=su(),vl={point:ml,lineStart:_l,lineEnd:bl,polygonStart:function(){vl.point=El,vl.lineStart=Tl,vl.lineEnd=Sl,gl.reset(),qu.polygonStart()},polygonEnd:function(){qu.polygonEnd(),vl.point=ml,vl.lineStart=_l,vl.lineEnd=bl,Yu<0?(al=-(sl=180),ol=-(ul=90)):gl>1e-6?ul=90:gl<-1e-6&&(ol=-90),pl[0]=al,pl[1]=sl},sphere:function(){al=-(sl=180),ol=-(ul=90)}};function ml(t,e){hl.push(pl=[al=t,sl=t]),e<ol&&(ol=e),e>ul&&(ul=e)}function yl(t,e){var n=Ju([t*vu,e*vu]);if(dl){var r=el(dl,n),i=el([r[1],-r[0],0],r);il(i),i=Zu(i);var a,o=t-ll,s=o>0?1:-1,u=i[0]*gu*s,l=mu(o)>180;l^(s*ll<u&&u<s*t)?(a=i[1]*gu)>ul&&(ul=a):l^(s*ll<(u=(u+360)%360-180)&&u<s*t)?(a=-i[1]*gu)<ol&&(ol=a):(e<ol&&(ol=e),e>ul&&(ul=e)),l?t<ll?wl(al,t)>wl(al,sl)&&(sl=t):wl(t,sl)>wl(al,sl)&&(al=t):sl>=al?(t<al&&(al=t),t>sl&&(sl=t)):t>ll?wl(al,t)>wl(al,sl)&&(sl=t):wl(t,sl)>wl(al,sl)&&(al=t)}else hl.push(pl=[al=t,sl=t]);e<ol&&(ol=e),e>ul&&(ul=e),dl=n,ll=t}function _l(){vl.point=yl}function bl(){pl[0]=al,pl[1]=sl,vl.point=ml,dl=null}function El(t,e){if(dl){var n=t-ll;gl.add(mu(n)>180?n+(n>0?360:-360):n)}else cl=t,fl=e;qu.point(t,e),yl(t,e)}function Tl(){qu.lineStart()}function Sl(){El(cl,fl),qu.lineEnd(),mu(gl)>1e-6&&(al=-(sl=180)),pl[0]=al,pl[1]=sl,dl=null}function wl(t,e){return(e-=t)<0?e+360:e}function Al(t,e){return t[0]-e[0]}function xl(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Cl,Dl,Il,Rl,kl,Ol,Pl,Ml,Ll,Nl,Fl,jl,Bl,Ul,Vl,Gl,Hl=function(t){var e,n,r,i,a,o,s;if(ul=sl=-(al=ol=1/0),hl=[],Hu(t,vl),n=hl.length){for(hl.sort(Al),e=1,a=[r=hl[0]];e<n;++e)xl(r,(i=hl[e])[0])||xl(r,i[1])?(wl(r[0],i[1])>wl(r[0],r[1])&&(r[1]=i[1]),wl(i[0],r[1])>wl(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)(s=wl(r[1],(i=a[e])[0]))>o&&(o=s,al=i[0],sl=r[1])}return hl=pl=null,al===1/0||ol===1/0?[[NaN,NaN],[NaN,NaN]]:[[al,ol],[sl,ul]]},Yl={sphere:Ou,point:zl,lineStart:Xl,lineEnd:Ql,polygonStart:function(){Yl.lineStart=$l,Yl.lineEnd=Zl},polygonEnd:function(){Yl.lineStart=Xl,Yl.lineEnd=Ql}};function zl(t,e){t*=vu;var n=bu(e*=vu);ql(n*bu(t),n*Au(t),Au(e))}function ql(t,e,n){++Cl,Il+=(t-Il)/Cl,Rl+=(e-Rl)/Cl,kl+=(n-kl)/Cl}function Xl(){Yl.point=Kl}function Kl(t,e){t*=vu;var n=bu(e*=vu);Ul=n*bu(t),Vl=n*Au(t),Gl=Au(e),Yl.point=Wl,ql(Ul,Vl,Gl)}function Wl(t,e){t*=vu;var n=bu(e*=vu),r=n*bu(t),i=n*Au(t),a=Au(e),o=_u(Cu((o=Vl*a-Gl*i)*o+(o=Gl*r-Ul*a)*o+(o=Ul*i-Vl*r)*o),Ul*r+Vl*i+Gl*a);Dl+=o,Ol+=o*(Ul+(Ul=r)),Pl+=o*(Vl+(Vl=i)),Ml+=o*(Gl+(Gl=a)),ql(Ul,Vl,Gl)}function Ql(){Yl.point=zl}function $l(){Yl.point=Jl}function Zl(){tc(jl,Bl),Yl.point=zl}function Jl(t,e){jl=t,Bl=e,t*=vu,e*=vu,Yl.point=tc;var n=bu(e);Ul=n*bu(t),Vl=n*Au(t),Gl=Au(e),ql(Ul,Vl,Gl)}function tc(t,e){t*=vu;var n=bu(e*=vu),r=n*bu(t),i=n*Au(t),a=Au(e),o=Vl*a-Gl*i,s=Gl*r-Ul*a,u=Ul*i-Vl*r,l=Cu(o*o+s*s+u*u),c=Ru(l),f=l&&-c/l;Ll+=f*o,Nl+=f*s,Fl+=f*u,Dl+=c,Ol+=c*(Ul+(Ul=r)),Pl+=c*(Vl+(Vl=i)),Ml+=c*(Gl+(Gl=a)),ql(Ul,Vl,Gl)}var ec=function(t){Cl=Dl=Il=Rl=kl=Ol=Pl=Ml=Ll=Nl=Fl=0,Hu(t,Yl);var e=Ll,n=Nl,r=Fl,i=e*e+n*n+r*r;return i<1e-12&&(e=Ol,n=Pl,r=Ml,Dl<1e-6&&(e=Il,n=Rl,r=kl),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[_u(n,e)*gu,Ru(r/Cu(i))*gu]},nc=function(t){return function(){return t}},rc=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function ic(t,e){return[mu(t)>fu?t+Math.round(-t/pu)*pu:t,e]}function ac(t,e,n){return(t%=pu)?e||n?rc(sc(t),uc(e,n)):sc(t):e||n?uc(e,n):ic}function oc(t){return function(e,n){return[(e+=t)>fu?e-pu:e<-fu?e+pu:e,n]}}function sc(t){var e=oc(t);return e.invert=oc(-t),e}function uc(t,e){var n=bu(t),r=Au(t),i=bu(e),a=Au(e);function o(t,e){var o=bu(e),s=bu(t)*o,u=Au(t)*o,l=Au(e),c=l*n+s*r;return[_u(u*i-c*a,s*n-l*r),Ru(c*i+u*a)]}return o.invert=function(t,e){var o=bu(e),s=bu(t)*o,u=Au(t)*o,l=Au(e),c=l*i-u*a;return[_u(u*i+l*a,s*n+c*r),Ru(c*n-s*r)]},o}ic.invert=ic;var lc=function(t){function e(e){return(e=t(e[0]*vu,e[1]*vu))[0]*=gu,e[1]*=gu,e}return t=ac(t[0]*vu,t[1]*vu,t.length>2?t[2]*vu:0),e.invert=function(e){return(e=t.invert(e[0]*vu,e[1]*vu))[0]*=gu,e[1]*=gu,e},e};function cc(t,e,n,r,i,a){if(n){var o=bu(e),s=Au(e),u=r*n;null==i?(i=e+r*pu,a=e-u/2):(i=fc(o,i),a=fc(o,a),(r>0?i<a:i>a)&&(i+=r*pu));for(var l,c=i;r>0?c>a:c<a;c-=u)l=Zu([o,-s*bu(c),-s*Au(c)]),t.point(l[0],l[1])}}function fc(t,e){(e=Ju(e))[0]-=t,il(e);var n=Iu(-e[1]);return((-e[2]<0?-n:n)+pu-1e-6)%pu}var dc=function(){var t,e,n=nc([0,0]),r=nc(90),i=nc(6),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=gu,n[1]*=gu}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*vu,u=i.apply(this,arguments)*vu;return t=[],e=ac(-o[0]*vu,-o[1]*vu,0).invert,cc(a,s,u,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:nc([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(r="function"==typeof t?t:nc(+t),o):r},o.precision=function(t){return arguments.length?(i="function"==typeof t?t:nc(+t),o):i},o},hc=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ou,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},pc=function(t,e){return mu(t[0]-e[0])<1e-6&&mu(t[1]-e[1])<1e-6};function gc(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var vc=function(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(pc(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2e-6}s.push(n=new gc(r,t,null,!0)),u.push(n.o=new gc(r,null,n,!1)),s.push(n=new gc(o,t,null,!1)),u.push(n.o=new gc(o,null,n,!0))}})),s.length){for(u.sort(e),mc(s),mc(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(a=(l=d.p.z).length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function mc(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var yc=su();function _c(t){return mu(t[0])<=fu?t[0]:xu(t[0])*((mu(t[0])+fu)%pu-fu)}var bc=function(t,e){var n=_c(e),r=e[1],i=Au(r),a=[Au(n),-bu(n),0],o=0,s=0;yc.reset(),1===i?r=du+1e-6:-1===i&&(r=-du-1e-6);for(var u=0,l=t.length;u<l;++u)if(f=(c=t[u]).length)for(var c,f,d=c[f-1],h=_c(d),p=d[1]/2+hu,g=Au(p),v=bu(p),m=0;m<f;++m,h=_,g=E,v=T,d=y){var y=c[m],_=_c(y),b=y[1]/2+hu,E=Au(b),T=bu(b),S=_-h,w=S>=0?1:-1,A=w*S,x=A>fu,C=g*E;if(yc.add(_u(C*w*Au(A),v*T+C*bu(A))),o+=x?S+w*pu:S,x^h>=n^_>=n){var D=el(Ju(d),Ju(y));il(D);var I=el(a,D);il(I);var R=(x^S>=0?-1:1)*Ru(I[2]);(r>R||r===R&&(D[0]||D[1]))&&(s+=x^S>=0?1:-1)}}return(o<-1e-6||o<1e-6&&yc<-1e-6)^1&s},Ec=function(t,e,n,r){return function(i){var a,o,s,u=e(i),l=hc(),c=e(l),f=!1,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=y,d.lineEnd=_,o=[],a=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,o=j(o);var t=bc(a,r);o.length?(f||(i.polygonStart(),f=!0),vc(o,Sc,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){d.point=p,u.lineStart()}function v(){d.point=h,u.lineEnd()}function m(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function _(){m(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&u){if((e=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(Tc))}return d}};function Tc(t){return t.length>1}function Sc(t,e){return((t=t.x)[0]<0?t[1]-du-1e-6:du-t[1])-((e=e.x)[0]<0?e[1]-du-1e-6:du-e[1])}var wc=Ec((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?fu:-fu,u=mu(a-n);mu(u-fu)<1e-6?(t.point(n,r=(r+o)/2>0?du:-du),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=fu&&(mu(n-i)<1e-6&&(n-=1e-6*i),mu(a-s)<1e-6&&(a-=1e-6*s),r=function(t,e,n,r){var i,a,o=Au(t-n);return mu(o)>1e-6?yu((Au(e)*(a=bu(r))*Au(n)-Au(r)*(i=bu(e))*Au(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)r.point(-fu,i=n*du),r.point(0,i),r.point(fu,i),r.point(fu,0),r.point(fu,-i),r.point(0,-i),r.point(-fu,-i),r.point(-fu,0),r.point(-fu,i);else if(mu(t[0]-e[0])>1e-6){var a=t[0]<e[0]?fu:-fu;r.point(-a,i=n*a/2),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-fu,-du]),Ac=function(t){var e=bu(t),n=6*vu,r=e>0,i=mu(e)>1e-6;function a(t,n){return bu(t)*bu(n)>e}function o(t,n,r){var i=[1,0,0],a=el(Ju(t),Ju(n)),o=tl(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var l=e*o/u,c=-e*s/u,f=el(i,a),d=rl(i,l);nl(d,rl(a,c));var h=f,p=tl(d,h),g=tl(h,h),v=p*p-g*(tl(d,d)-1);if(!(v<0)){var m=Cu(v),y=rl(h,(-p-m)/g);if(nl(y,d),y=Zu(y),!r)return y;var _,b=t[0],E=n[0],T=t[1],S=n[1];E<b&&(_=b,b=E,E=_);var w=E-b,A=mu(w-fu)<1e-6;if(!A&&S<T&&(_=T,T=S,S=_),A||w<1e-6?A?T+S>0^y[1]<(mu(y[0]-b)<1e-6?T:S):T<=y[1]&&y[1]<=S:w>fu^(b<=y[0]&&y[0]<=E)){var x=rl(h,(-p+m)/g);return nl(x,d),[y,Zu(x)]}}}function s(e,n){var i=r?t:fu-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Ec(a,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],g=a(f,d),v=r?g?0:s(f,d):g?s(f+(f<0?fu:-fu),d):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(h=o(e,p))||pc(e,h)||pc(p,h))&&(p[2]=1),g!==u)c=0,g?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^g){var m;v&n||!(m=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!g||e&&pc(e,p)||t.point(p[0],p[1]),e=p,u=g,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,a){cc(a,t,n,i,e,r)}),r?[0,-t]:[-fu,t-fu])};function xc(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,l){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(a[0],a[1])}function o(r,i){return mu(r[0]-t)<1e-6?i>0?0:3:mu(r[0]-n)<1e-6?i>0?2:1:mu(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,l,c,f,d,h,p,g,v,m,y,_=o,b=hc(),E={point:T,lineStart:function(){E.point=S,l&&l.push(c=[]),m=!0,v=!1,p=g=NaN},lineEnd:function(){u&&(S(f,d),h&&v&&b.rejoin(),u.push(b.result())),E.point=T,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,o,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)a=d,o=h,d=(f=s[u])[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(d-a)*(r-o)<(h-o)*(t-a)&&--e;return e}(),n=y&&e,i=(u=j(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&vc(u,s,e,a,o),o.polygonEnd()),_=o,u=l=c=null}};function T(t,e){i(t,e)&&_.point(t,e)}function S(a,o){var s=i(a,o);if(l&&c.push([a,o]),m)f=a,d=o,h=s,m=!1,s&&(_.lineStart(),_.point(a,o));else if(s&&v)_.point(a,o);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],b=[a=Math.max(-1e9,Math.min(1e9,a)),o=Math.max(-1e9,Math.min(1e9,o))];!function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,d=e[1]-u;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=s+l*f,t[1]=u+l*d),c<1&&(e[0]=s+c*f,e[1]=u+c*d),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(a,o),y=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),y=!1)}p=a,g=o,v=s}return E}}var Cc,Dc,Ic,Rc=function(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=xc(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}},kc=su(),Oc={sphere:Ou,point:Ou,lineStart:function(){Oc.point=Mc,Oc.lineEnd=Pc},lineEnd:Ou,polygonStart:Ou,polygonEnd:Ou};function Pc(){Oc.point=Oc.lineEnd=Ou}function Mc(t,e){Cc=t*=vu,Dc=Au(e*=vu),Ic=bu(e),Oc.point=Lc}function Lc(t,e){t*=vu;var n=Au(e*=vu),r=bu(e),i=mu(t-Cc),a=bu(i),o=r*Au(i),s=Ic*n-Dc*r*a,u=Dc*n+Ic*r*a;kc.add(_u(Cu(o*o+s*s),u)),Cc=t,Dc=n,Ic=r}var Nc=function(t){return kc.reset(),Hu(t,Oc),+kc},Fc=[null,null],jc={type:"LineString",coordinates:Fc},Bc=function(t,e){return Fc[0]=t,Fc[1]=e,Nc(jc)},Uc={Feature:function(t,e){return Gc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Gc(n[r].geometry,e))return!0;return!1}},Vc={Sphere:function(){return!0},Point:function(t,e){return Hc(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hc(n[r],e))return!0;return!1},LineString:function(t,e){return Yc(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Yc(n[r],e))return!0;return!1},Polygon:function(t,e){return zc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(zc(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Gc(n[r],e))return!0;return!1}};function Gc(t,e){return!(!t||!Vc.hasOwnProperty(t.type))&&Vc[t.type](t,e)}function Hc(t,e){return 0===Bc(t,e)}function Yc(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=Bc(t[a],e)))return!0;if(a>0&&(i=Bc(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function zc(t,e){return!!bc(t.map(qc),Xc(e))}function qc(t){return(t=t.map(Xc)).pop(),t}function Xc(t){return[t[0]*vu,t[1]*vu]}var Kc=function(t,e){return(t&&Uc.hasOwnProperty(t.type)?Uc[t.type]:Gc)(t,e)};function Wc(t,e,n){var r=S(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Qc(t,e,n){var r=S(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function $c(){var t,e,n,r,i,a,o,s,u,l,c,f,d=10,h=d,p=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return S(Eu(r/p)*p,n,p).map(c).concat(S(Eu(s/g)*g,o,g).map(f)).concat(S(Eu(e/d)*d,t,d).filter((function(t){return mu(t%p)>1e-6})).map(u)).concat(S(Eu(a/h)*h,i,h).filter((function(t){return mu(t%g)>1e-6})).map(l))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(s=+t[0][1],o=+t[1][1],(r=+t[0][0])>(n=+t[1][0])&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),m.precision(v)):[[r,s],[n,o]]},m.extentMinor=function(n){return arguments.length?(a=+n[0][1],i=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(v)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],m):[p,g]},m.stepMinor=function(t){return arguments.length?(d=+t[0],h=+t[1],m):[d,h]},m.precision=function(d){return arguments.length?(v=+d,u=Wc(a,i,90),l=Qc(e,t,v),c=Wc(s,o,90),f=Qc(r,n,v),m):v},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Zc(){return $c()()}var Jc,tf,ef,nf,rf=function(t,e){var n=t[0]*vu,r=t[1]*vu,i=e[0]*vu,a=e[1]*vu,o=bu(r),s=Au(r),u=bu(a),l=Au(a),c=o*bu(n),f=o*Au(n),d=u*bu(i),h=u*Au(i),p=2*Ru(Cu(ku(a-r)+o*u*ku(i-n))),g=Au(p),v=p?function(t){var e=Au(t*=p)/g,n=Au(p-t)/g,r=n*c+e*d,i=n*f+e*h,a=n*s+e*l;return[_u(i,r)*gu,_u(a,Cu(r*r+i*i))*gu]}:function(){return[n*gu,r*gu]};return v.distance=p,v},af=function(t){return t},of=su(),sf=su(),uf={point:Ou,lineStart:Ou,lineEnd:Ou,polygonStart:function(){uf.lineStart=lf,uf.lineEnd=df},polygonEnd:function(){uf.lineStart=uf.lineEnd=uf.point=Ou,of.add(mu(sf)),sf.reset()},result:function(){var t=of/2;return of.reset(),t}};function lf(){uf.point=cf}function cf(t,e){uf.point=ff,Jc=ef=t,tf=nf=e}function ff(t,e){sf.add(nf*t-ef*e),ef=t,nf=e}function df(){ff(Jc,tf)}var hf,pf,gf,vf,mf=uf,yf=1/0,_f=yf,bf=-yf,Ef=bf,Tf={point:function(t,e){t<yf&&(yf=t),t>bf&&(bf=t),e<_f&&(_f=e),e>Ef&&(Ef=e)},lineStart:Ou,lineEnd:Ou,polygonStart:Ou,polygonEnd:Ou,result:function(){var t=[[yf,_f],[bf,Ef]];return bf=Ef=-(_f=yf=1/0),t}},Sf=0,wf=0,Af=0,xf=0,Cf=0,Df=0,If=0,Rf=0,kf=0,Of={point:Pf,lineStart:Mf,lineEnd:Ff,polygonStart:function(){Of.lineStart=jf,Of.lineEnd=Bf},polygonEnd:function(){Of.point=Pf,Of.lineStart=Mf,Of.lineEnd=Ff},result:function(){var t=kf?[If/kf,Rf/kf]:Df?[xf/Df,Cf/Df]:Af?[Sf/Af,wf/Af]:[NaN,NaN];return Sf=wf=Af=xf=Cf=Df=If=Rf=kf=0,t}};function Pf(t,e){Sf+=t,wf+=e,++Af}function Mf(){Of.point=Lf}function Lf(t,e){Of.point=Nf,Pf(gf=t,vf=e)}function Nf(t,e){var n=t-gf,r=e-vf,i=Cu(n*n+r*r);xf+=i*(gf+t)/2,Cf+=i*(vf+e)/2,Df+=i,Pf(gf=t,vf=e)}function Ff(){Of.point=Pf}function jf(){Of.point=Uf}function Bf(){Vf(hf,pf)}function Uf(t,e){Of.point=Vf,Pf(hf=gf=t,pf=vf=e)}function Vf(t,e){var n=t-gf,r=e-vf,i=Cu(n*n+r*r);xf+=i*(gf+t)/2,Cf+=i*(vf+e)/2,Df+=i,If+=(i=vf*t-gf*e)*(gf+t),Rf+=i*(vf+e),kf+=3*i,Pf(gf=t,vf=e)}var Gf=Of;function Hf(t){this._context=t}Hf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,pu)}},result:Ou};var Yf,zf,qf,Xf,Kf,Wf=su(),Qf={point:Ou,lineStart:function(){Qf.point=$f},lineEnd:function(){Yf&&Zf(zf,qf),Qf.point=Ou},polygonStart:function(){Yf=!0},polygonEnd:function(){Yf=null},result:function(){var t=+Wf;return Wf.reset(),t}};function $f(t,e){Qf.point=Zf,zf=Xf=t,qf=Kf=e}function Zf(t,e){Wf.add(Cu((Xf-=t)*Xf+(Kf-=e)*Kf)),Xf=t,Kf=e}var Jf=Qf;function td(){this._string=[]}function ed(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}td.prototype={_radius:4.5,_circle:ed(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ed(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var nd=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Hu(t,n(r))),r.result()}return a.area=function(t){return Hu(t,n(mf)),mf.result()},a.measure=function(t){return Hu(t,n(Jf)),Jf.result()},a.bounds=function(t){return Hu(t,n(Tf)),Tf.result()},a.centroid=function(t){return Hu(t,n(Gf)),Gf.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,af):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new td):new Hf(e=t),"function"!=typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)},rd=function(t){return{stream:id(t)}};function id(t){return function(e){var n=new ad;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ad(){}function od(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Hu(n,t.stream(Tf)),e(Tf.result()),null!=r&&t.clipExtent(r),t}function sd(t,e,n){return od(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function ud(t,e,n){return sd(t,[[0,0],e],n)}function ld(t,e,n){return od(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function cd(t,e,n){return od(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}ad.prototype={constructor:ad,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var fd=bu(30*vu),dd=function(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,l,c,f,d,h,p,g,v){var m=l-r,y=c-i,_=m*m+y*y;if(_>4*e&&g--){var b=o+d,E=s+h,T=u+p,S=Cu(b*b+E*E+T*T),w=Ru(T/=S),A=mu(mu(T)-1)<1e-6||mu(a-f)<1e-6?(a+f)/2:_u(E,b),x=t(A,w),C=x[0],D=x[1],I=C-r,R=D-i,k=y*I-m*R;(k*k/_>e||mu((m*I+y*R)/_-.5)>.3||o*d+s*h+u*p<fd)&&(n(r,i,a,o,s,u,C,D,A,b/=S,E/=S,T,g,v),v.point(C,D),n(C,D,A,b,E,T,l,c,f,d,h,p,g,v))}}return function(e){var r,i,a,o,s,u,l,c,f,d,h,p,g={point:v,lineStart:m,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,g.point=y,e.lineStart()}function y(r,i){var a=Ju([r,i]),o=t(r,i);n(c,f,l,d,h,p,c=o[0],f=o[1],l=r,d=a[0],h=a[1],p=a[2],16,e),e.point(c,f)}function _(){g.point=v,e.lineEnd()}function b(){m(),g.point=E,g.lineEnd=T}function E(t,e){y(r=t,e),i=c,a=f,o=d,s=h,u=p,g.point=y}function T(){n(c,f,l,d,h,p,i,a,r,o,s,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return id({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},hd=id({point:function(t,e){this.stream.point(t*vu,e*vu)}});function pd(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}function gd(t,e,n,r,i,a){var o=bu(a),s=Au(a),u=o*t,l=s*t,c=o/t,f=s/t,d=(s*n-o*e)/t,h=(s*e+o*n)/t;function p(t,a){return[u*(t*=r)-l*(a*=i)+e,n-l*t-u*a]}return p.invert=function(t,e){return[r*(c*t-f*e+d),i*(h-f*t-c*e)]},p}function vd(t){return md((function(){return t}))()}function md(t){var e,n,r,i,a,o,s,u,l,c,f=150,d=480,h=250,p=0,g=0,v=0,m=0,y=0,_=0,b=1,E=1,T=null,S=wc,w=null,A=af,x=.5;function C(t){return u(t[0]*vu,t[1]*vu)}function D(t){return(t=u.invert(t[0],t[1]))&&[t[0]*gu,t[1]*gu]}function I(){var t=gd(f,0,0,b,E,_).apply(null,e(p,g)),r=(_?gd:pd)(f,d-t[0],h-t[1],b,E,_);return n=ac(v,m,y),s=rc(e,r),u=rc(n,s),o=dd(s,x),R()}function R(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=hd(function(t){return id({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(S(o(A(c=t)))))},C.preclip=function(t){return arguments.length?(S=t,T=void 0,R()):S},C.postclip=function(t){return arguments.length?(A=t,w=r=i=a=null,R()):A},C.clipAngle=function(t){return arguments.length?(S=+t?Ac(T=t*vu):(T=null,wc),R()):T*gu},C.clipExtent=function(t){return arguments.length?(A=null==t?(w=r=i=a=null,af):xc(w=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),R()):null==w?null:[[w,r],[i,a]]},C.scale=function(t){return arguments.length?(f=+t,I()):f},C.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],I()):[d,h]},C.center=function(t){return arguments.length?(p=t[0]%360*vu,g=t[1]%360*vu,I()):[p*gu,g*gu]},C.rotate=function(t){return arguments.length?(v=t[0]%360*vu,m=t[1]%360*vu,y=t.length>2?t[2]%360*vu:0,I()):[v*gu,m*gu,y*gu]},C.angle=function(t){return arguments.length?(_=t%360*vu,I()):_*gu},C.reflectX=function(t){return arguments.length?(b=t?-1:1,I()):b<0},C.reflectY=function(t){return arguments.length?(E=t?-1:1,I()):E<0},C.precision=function(t){return arguments.length?(o=dd(s,x=t*t),R()):Cu(x)},C.fitExtent=function(t,e){return sd(C,t,e)},C.fitSize=function(t,e){return ud(C,t,e)},C.fitWidth=function(t,e){return ld(C,t,e)},C.fitHeight=function(t,e){return cd(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&D,I()}}function yd(t){var e=0,n=fu/3,r=md(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*vu,n=t[1]*vu):[e*gu,n*gu]},i}function _d(t,e){var n=Au(t),r=(n+Au(e))/2;if(mu(r)<1e-6)return function(t){var e=bu(t);function n(t,n){return[t*e,Au(n)/e]}return n.invert=function(t,n){return[t/e,Ru(n*e)]},n}(t);var i=1+n*(2*r-n),a=Cu(i)/r;function o(t,e){var n=Cu(i-2*r*Au(e))/r;return[n*Au(t*=r),a-n*bu(t)]}return o.invert=function(t,e){var n=a-e,o=_u(t,mu(n))*xu(n);return n*r<0&&(o-=fu*xu(t)*xu(n)),[o/r,Ru((i-(t*t+n*n)*r*r)/(2*r))]},o}var bd=function(){return yd(_d).scale(155.424).center([0,33.6442])},Ed=function(){return bd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Td=function(){var t,e,n,r,i,a,o=Ed(),s=bd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=bd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+1e-6,c+.12*e+1e-6],[a-.214*e-1e-6,c+.234*e-1e-6]]).stream(l),i=u.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+1e-6,c+.166*e+1e-6],[a-.115*e-1e-6,c+.234*e-1e-6]]).stream(l),f()},c.fitExtent=function(t,e){return sd(c,t,e)},c.fitSize=function(t,e){return ud(c,t,e)},c.fitWidth=function(t,e){return ld(c,t,e)},c.fitHeight=function(t,e){return cd(c,t,e)},c.scale(1070)};function Sd(t){return function(e,n){var r=bu(e),i=bu(n),a=t(r*i);return[a*i*Au(e),a*Au(n)]}}function wd(t){return function(e,n){var r=Cu(e*e+n*n),i=t(r),a=Au(i),o=bu(i);return[_u(e*a,r*o),Ru(r&&n*a/r)]}}var Ad=Sd((function(t){return Cu(2/(1+t))}));Ad.invert=wd((function(t){return 2*Ru(t/2)}));var xd=function(){return vd(Ad).scale(124.75).clipAngle(179.999)},Cd=Sd((function(t){return(t=Iu(t))&&t/Au(t)}));Cd.invert=wd((function(t){return t}));var Dd=function(){return vd(Cd).scale(79.4188).clipAngle(179.999)};function Id(t,e){return[t,Su(Du((du+e)/2))]}Id.invert=function(t,e){return[t,2*yu(Tu(e))-du]};var Rd=function(){return kd(Id).scale(961/pu)};function kd(t){var e,n,r,i=vd(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var a=fu*o(),s=i(lc(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Id?[[Math.max(s[0]-a,l),e],[Math.min(s[0]+a,n),r]]:[[l,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Od(t){return Du((du+t)/2)}function Pd(t,e){var n=bu(t),r=t===e?Au(t):Su(n/bu(e))/Su(Od(e)/Od(t)),i=n*wu(Od(t),r)/r;if(!r)return Id;function a(t,e){i>0?e<1e-6-du&&(e=1e-6-du):e>du-1e-6&&(e=du-1e-6);var n=i/wu(Od(e),r);return[n*Au(r*t),i-n*bu(r*t)]}return a.invert=function(t,e){var n=i-e,a=xu(r)*Cu(t*t+n*n),o=_u(t,mu(n))*xu(n);return n*r<0&&(o-=fu*xu(t)*xu(n)),[o/r,2*yu(wu(i/a,1/r))-du]},a}var Md=function(){return yd(Pd).scale(109.5).parallels([30,30])};function Ld(t,e){return[t,e]}Ld.invert=Ld;var Nd=function(){return vd(Ld).scale(152.63)};function Fd(t,e){var n=bu(t),r=t===e?Au(t):(n-bu(e))/(e-t),i=n/r+t;if(mu(r)<1e-6)return Ld;function a(t,e){var n=i-e,a=r*t;return[n*Au(a),i-n*bu(a)]}return a.invert=function(t,e){var n=i-e,a=_u(t,mu(n))*xu(n);return n*r<0&&(a-=fu*xu(t)*xu(n)),[a/r,i-xu(r)*Cu(t*t+n*n)]},a}var jd=function(){return yd(Fd).scale(131.154).center([0,13.9389])},Bd=1.340264,Ud=-.081106,Vd=893e-6,Gd=.003796,Hd=Cu(3)/2;function Yd(t,e){var n=Ru(Hd*Au(e)),r=n*n,i=r*r*r;return[t*bu(n)/(Hd*(Bd+3*Ud*r+i*(7*Vd+9*Gd*r))),n*(Bd+Ud*r+i*(Vd+Gd*r))]}Yd.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(Bd+Ud*i+a*(Vd+Gd*i))-e)/(Bd+3*Ud*i+a*(7*Vd+9*Gd*i)))*r)*i*i,!(mu(n)<1e-12));++o);return[Hd*t*(Bd+3*Ud*i+a*(7*Vd+9*Gd*i))/bu(r),Ru(Au(r)/Hd)]};var zd=function(){return vd(Yd).scale(177.158)};function qd(t,e){var n=bu(e),r=bu(t)*n;return[n*Au(t)/r,Au(e)/r]}qd.invert=wd(yu);var Xd=function(){return vd(qd).scale(144.049).clipAngle(60)},Kd=function(){var t,e,n,r,i,a,o,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,g=1,v=id({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),m=af;function y(){return p=s*c,g=s*f,a=o=null,_}function _(n){var r=n[0]*p,i=n[1]*g;if(d){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+u,i+l]}return _.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/g]},_.stream=function(t){return a&&o===t?a:a=v(m(o=t))},_.postclip=function(t){return arguments.length?(m=t,h=n=r=i=null,y()):m},_.clipExtent=function(t){return arguments.length?(m=null==t?(h=n=r=i=null,af):xc(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==h?null:[[h,n],[r,i]]},_.scale=function(t){return arguments.length?(s=+t,y()):s},_.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],y()):[u,l]},_.angle=function(n){return arguments.length?(e=Au(d=n%360*vu),t=bu(d),y()):d*gu},_.reflectX=function(t){return arguments.length?(c=t?-1:1,y()):c<0},_.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},_.fitExtent=function(t,e){return sd(_,t,e)},_.fitSize=function(t,e){return ud(_,t,e)},_.fitWidth=function(t,e){return ld(_,t,e)},_.fitHeight=function(t,e){return cd(_,t,e)},_};function Wd(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Wd.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(mu(n)>1e-6&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};var Qd=function(){return vd(Wd).scale(175.295)};function $d(t,e){return[bu(e)*Au(t),Au(e)]}$d.invert=wd(Ru);var Zd=function(){return vd($d).scale(249.5).clipAngle(90.000001)};function Jd(t,e){var n=bu(e),r=1+bu(t)*n;return[n*Au(t)/r,Au(e)/r]}Jd.invert=wd((function(t){return 2*yu(t)}));var th=function(){return vd(Jd).scale(250).clipAngle(142)};function eh(t,e){return[Su(Du((du+e)/2)),-t]}eh.invert=function(t,e){return[-e,2*yu(Tu(t))-du]};var nh=function(){var t=kd(eh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function rh(t,e){return t.parent===e.parent?1:2}function ih(t,e){return t+e.x}function ah(t,e){return Math.max(t,e.y)}var oh=function(){var t=rh,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(ih,0)/t.length}(n),e.y=function(t){return 1+t.reduce(ah,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function sh(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function uh(t,e){var n,r,i,a,o,s=new dh(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=lh);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new dh(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(fh)}function lh(t){return t.children}function ch(t){t.data=t.data.data}function fh(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function dh(t){this.data=t,this.depth=this.height=0,this.parent=null}dh.prototype=uh.prototype={constructor:dh,count:function(){return this.eachAfter(sh)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return uh(this).eachBefore(ch)}};var hh=Array.prototype.slice,ph=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(hh.call(t))).length,a=[];r<i;)e=t[r],n&&mh(n,e)?++r:(n=_h(a=gh(a,e)),r=0);return n};function gh(t,e){var n,r;if(yh(e,t))return[e];for(n=0;n<t.length;++n)if(vh(e,t[n])&&yh(bh(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(vh(bh(t[n],t[r]),e)&&vh(bh(t[n],e),t[r])&&vh(bh(t[r],e),t[n])&&yh(Eh(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function vh(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function mh(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function yh(t,e){for(var n=0;n<e.length;++n)if(!mh(t,e[n]))return!1;return!0}function _h(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return bh(t[0],t[1]);case 3:return Eh(t[0],t[1],t[2])}}function bh(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+a+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+s)/2}}function Eh(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-s,g=i-c,v=u-a,m=f-a,y=r*r+i*i-a*a,_=y-o*o-s*s+u*u,b=y-l*l-c*c+f*f,E=h*p-d*g,T=(p*b-g*_)/(2*E)-r,S=(g*v-p*m)/E,w=(h*_-d*b)/(2*E)-i,A=(d*m-h*v)/E,x=S*S+A*A-1,C=2*(a+T*S+w*A),D=T*T+w*w-a*a,I=-(x?(C+Math.sqrt(C*C-4*x*D))/(2*x):D/C);return{x:r+T+S*I,y:i+w+A*I,r:I}}function Th(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,o=t.r+n.r,(i*=i)>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Sh(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function wh(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Ah(t){this._=t,this.next=null,this.previous=null}function xh(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,s,u,l,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Th(n,e,r=t[2]),e=new Ah(e),n=new Ah(n),r=new Ah(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Th(e._,n._,r=t[s]),r=new Ah(r),u=n.next,l=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(Sh(u._,r._)){e.next=n=u,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(Sh(l._,r._)){(e=l).next=n,n.previous=e,--s;continue t}f+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=wh(e);(r=r.next)!==n;)(o=wh(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=ph(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}var Ch=function(t){return xh(t),t};function Dh(t){return null==t?null:Ih(t)}function Ih(t){if("function"!=typeof t)throw new Error;return t}function Rh(){return 0}var kh=function(t){return function(){return t}};function Oh(t){return Math.sqrt(t.value)}var Ph=function(){var t=null,e=1,n=1,r=Rh;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Mh(t)).eachAfter(Lh(r,.5)).eachBefore(Nh(1)):i.eachBefore(Mh(Oh)).eachAfter(Lh(Rh,1)).eachAfter(Lh(r,i.r/Math.min(e,n))).eachBefore(Nh(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Dh(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:kh(+t),i):r},i};function Mh(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Lh(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=xh(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function Nh(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Fh=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},jh=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l},Bh=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&jh(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Fh),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},Uh={depth:-1},Vh={};function Gh(t){return t.id}function Hh(t){return t.parentId}var Yh=function(){var t=Gh,e=Hh;function n(n){var r,i,a,o,s,u,l,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)s=f[i]=new dh(r=n[i]),null!=(u=t(r,i,n))&&(u+="")&&(d[l="$"+(s.id=u)]=l in d?Vh:s);for(i=0;i<c;++i)if(s=f[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(o=d["$"+u]))throw new Error("missing: "+u);if(o===Vh)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Uh,a.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(fh),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=Ih(e),n):t},n.parentId=function(t){return arguments.length?(e=Ih(t),n):e},n};function zh(t,e){return t.parent===e.parent?1:2}function qh(t){var e=t.children;return e?e[0]:t.t}function Xh(t){var e=t.children;return e?e[e.length-1]:t.t}function Kh(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Wh(t,e,n){return t.a.parent===e.parent?t.a:n}function Qh(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Qh.prototype=Object.create(dh.prototype);var $h=function(){var t=zh,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new Qh(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new Qh(r[i],i)),n.parent=e;return(o.parent=new Qh(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)}));var d=l===c?1:t(l,c)/2,h=d-l.x,p=e/(c.x+d+h),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+h)*p,t.y=t.depth*g}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,d=u.m;s=Xh(s),a=qh(a),s&&a;)u=qh(u),(o=Xh(o)).a=e,(i=s.z+f-a.z-l+t(s._,a._))>0&&(Kh(Wh(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=a.m,d+=u.m,c+=o.m;s&&!Xh(o)&&(o.t=s,o.m+=f-c),a&&!qh(u)&&(u.t=a,u.m+=l-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},Zh=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l},Jh=(1+Math.sqrt(5))/2;function tp(t,e,n,r,i,a){for(var o,s,u,l,c,f,d,h,p,g,v,m=[],y=e.children,_=0,b=0,E=y.length,T=e.value;_<E;){u=i-n,l=a-r;do{c=y[b++].value}while(!c&&b<E);for(f=d=c,v=c*c*(g=Math.max(l/u,u/l)/(T*t)),p=Math.max(d/v,v/f);b<E;++b){if(c+=s=y[b].value,s<f&&(f=s),s>d&&(d=s),v=c*c*g,(h=Math.max(d/v,v/f))>p){c-=s;break}p=h}m.push(o={value:c,dice:u<l,children:y.slice(_,b)}),o.dice?jh(o,n,r,i,T?r+=l*c/T:a):Zh(o,n,r,T?n+=u*c/T:i,a),T-=c,_=b}return m}var ep=function t(e){function n(t,n,r,i,a){tp(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jh),np=function(){var t=ep,e=!1,n=1,r=1,i=[0],a=Rh,o=Rh,s=Rh,u=Rh,l=Rh;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(Fh),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(d-=u(e)-n)<c&&(c=d=(c+d)/2),t(e,r,c,f,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Ih(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:kh(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:kh(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:kh(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:kh(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:kh(+t),c):l},c},rp=function(t,e,n,r,i){var a,o,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=u)}for(var f=l[e],d=r/2+f,h=e+1,p=n-1;h<p;){var g=h+p>>>1;l[g]<d?h=g+1:p=g}d-l[h-1]<l[h]-d&&e+1<h&&--h;var v=l[h]-f,m=r-v;if(o-i>u-a){var y=(i*m+o*v)/r;t(e,h,v,i,a,y,u),t(h,n,m,y,a,o,u)}else{var _=(a*m+u*v)/r;t(e,h,v,i,a,o,_),t(h,n,m,i,_,o,u)}}(0,u,t.value,e,n,r,i)},ip=function(t,e,n,r,i){(1&t.depth?Zh:jh)(t,e,n,r,i)},ap=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,l,c,f=-1,d=o.length,h=t.value;++f<d;){for(u=(s=o[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?jh(s,n,r,i,r+=(a-r)*s.value/h):Zh(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else t._squarify=o=tp(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jh),op=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},sp=function(t,e){var n=cn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},up=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},lp=Math.SQRT2;function cp(t){return((t=Math.exp(t))+1/t)/2}var fp=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[2],u=e[0]-i,l=e[1]-a,c=u*u+l*l;if(c<1e-12)r=Math.log(s/o)/lp,n=function(t){return[i+t*u,a+t*l,o*Math.exp(lp*t*r)]};else{var f=Math.sqrt(c),d=(s*s-o*o+4*c)/(2*o*2*f),h=(s*s-o*o-4*c)/(2*s*2*f),p=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/lp,n=function(t){var e,n=t*r,s=cp(p),c=o/(2*f)*(s*(e=lp*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+c*u,a+c*l,o*s/cp(lp*n+p)]}}return n.duration=1e3*r,n};function dp(t){return function(e,n){var r=t((e=en(e)).h,(n=en(n)).h),i=fn(e.s,n.s),a=fn(e.l,n.l),o=fn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var hp=dp(cn),pp=dp(fn);function gp(t,e){var n=fn((t=pa(t)).l,(e=pa(e)).l),r=fn(t.a,e.a),i=fn(t.b,e.b),a=fn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function vp(t){return function(e,n){var r=t((e=Ta(e)).h,(n=Ta(n)).h),i=fn(e.c,n.c),a=fn(e.l,n.l),o=fn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var mp=vp(cn),yp=vp(fn);function _p(t){return function e(n){function r(e,r){var i=t((e=Ra(e)).h,(r=Ra(r)).h),a=fn(e.s,r.s),o=fn(e.l,r.l),s=fn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var bp=_p(cn),Ep=_p(fn);function Tp(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var Sp=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},wp=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)a+=(e=i)[1]*(i=t[n])[0]-e[0]*i[1];return a/2},Ap=function(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],u=0;++r<i;)u+=n=(e=s)[0]*(s=t[r])[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(u*=3),o/u]},xp=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function Cp(t,e){return t[0]-e[0]||t[1]-e[1]}function Dp(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&xp(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var Ip=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Cp),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=Dp(r),o=Dp(i),s=o[0]===a[0],u=o[o.length-1]===a[a.length-1],l=[];for(e=a.length-1;e>=0;--e)l.push(t[r[a[e]][2]]);for(e=+s;e<o.length-u;++e)l.push(t[r[o[e]][2]]);return l},Rp=function(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],u=a[0],l=a[1],c=!1,f=0;f<i;++f)n=(a=t[f])[0],(r=a[1])>s!=l>s&&o<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c},kp=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],u=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],u+=Math.sqrt(e*e+n*n);return u},Op=function(){return Math.random()},Pp=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Op),Mp=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Op),Lp=function t(e){function n(){var t=Mp.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Op),Np=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Op),Fp=function t(e){function n(t){var n=Np.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Op),jp=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Op);function Bp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Up(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Vp=Array.prototype,Gp=Vp.map,Hp=Vp.slice,Yp={name:"implicit"};function zp(){var t=$i(),e=[],n=[],r=Yp;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==Yp)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=$i();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=Hp.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return zp(e,n).unknown(r)},Bp.apply(i,arguments),i}function qp(){var t,e,n=zp().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,l=.5;function c(){var n=r().length,c=a[1]<a[0],f=a[c-0],d=a[1-c];t=(d-f)/Math.max(1,n-s+2*u),o&&(t=Math.floor(t)),f+=(d-f-t*(n-s))*l,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));var h=S(n).map((function(e){return f+t*e}));return i(c?h.reverse():h)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),c()):s},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.copy=function(){return qp(r(),a).round(o).paddingInner(s).paddingOuter(u).align(l)},Bp.apply(c(),arguments)}function Xp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Xp(e())},t}function Kp(){return Xp(qp.apply(null,arguments).paddingInner(1))}var Wp=function(t){return+t},Qp=[0,1];function $p(t){return t}function Zp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Jp(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function tg(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Zp(i,r),a=n(o,a)):(r=Zp(r,i),a=n(a,o)),function(t){return a(r(t))}}function eg(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Zp(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=l(t,e,1,r)-1;return a[n](i[n](e))}}function ng(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rg(){var t,e,n,r,i,a,o=Qp,s=Qp,u=Dn,l=$p;function c(){return r=Math.min(o.length,s.length)>2?eg:tg,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((a||(a=r(s,o.map(t),Sn)))(n)))},f.domain=function(t){return arguments.length?(o=Gp.call(t,Wp),l===$p||(l=Jp(o)),c()):o.slice()},f.range=function(t){return arguments.length?(s=Hp.call(t),c()):s.slice()},f.rangeRound=function(t){return s=Hp.call(t),u=up,c()},f.clamp=function(t){return arguments.length?(l=t?Jp(o):$p,f):l!==$p},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function ig(t,e){return rg()(t,e)}var ag=function(t,e,n,r){var i,a=I(t,e,n);switch((r=zs(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=au(a,o))||(r.precision=i),Qs(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ou(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=iu(a))||(r.precision=i-2*("%"===r.type))}return Ws(r)};function og(t){var e=t.domain;return t.ticks=function(t){var n=e();return C(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ag(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],u=i[o];return u<s&&(r=s,s=u,u=r,r=a,a=o,o=r),(r=D(s,u,n))>0?r=D(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=D(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function sg(){var t=ig($p,$p);return t.copy=function(){return ng(t,sg())},Bp.apply(t,arguments),og(t)}function ug(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Gp.call(e,Wp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ug(t).unknown(e)},t=arguments.length?Gp.call(t,Wp):[0,1],og(n)}var lg=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function cg(t){return Math.log(t)}function fg(t){return Math.exp(t)}function dg(t){return-Math.log(-t)}function hg(t){return-Math.exp(-t)}function pg(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gg(t){return function(e){return-t(-e)}}function vg(t){var e,n,r=t(cg,fg),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?pg:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=gg(e),n=gg(n),t(dg,hg)):t(cg,fg),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=e(s),h=e(u),p=null==t?10:+t,g=[];if(!(a%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,s>0){for(;d<h;++d)for(c=1,l=n(d);c<a;++c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}}else for(;d<h;++d)for(c=a-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}}else g=C(d,h,Math.min(h-d,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=Ws(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(lg(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function mg(){var t=vg(rg()).domain([1,10]);return t.copy=function(){return ng(t,mg()).base(t.base())},Bp.apply(t,arguments),t}function yg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _g(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bg(t){var e=1,n=t(yg(e),_g(e));return n.constant=function(n){return arguments.length?t(yg(e=+n),_g(e)):e},og(n)}function Eg(){var t=bg(rg());return t.copy=function(){return ng(t,Eg()).constant(t.constant())},Bp.apply(t,arguments)}function Tg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wg(t){return t<0?-t*t:t*t}function Ag(t){var e=t($p,$p),n=1;function r(){return 1===n?t($p,$p):.5===n?t(Sg,wg):t(Tg(n),Tg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},og(e)}function xg(){var t=Ag(rg());return t.copy=function(){return ng(t,xg()).exponent(t.exponent())},Bp.apply(t,arguments),t}function Cg(){return xg.apply(null,arguments).exponent(.5)}function Dg(){var t,e=[],n=[],r=[];function a(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=O(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[l(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),a()},o.range=function(t){return arguments.length?(n=Hp.call(t),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return Dg().domain(e).range(n).unknown(t)},Bp.apply(o,arguments)}function Ig(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[l(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Hp.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return Ig().domain([e,n]).range(a).unknown(t)},Bp.apply(og(o),arguments)}function Rg(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[l(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Hp.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Hp.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Rg().domain(e).range(n).unknown(t)},Bp.apply(i,arguments)}var kg=new Date,Og=new Date;function Pg(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return Pg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return kg.setTime(+e),Og.setTime(+r),t(kg),t(Og),Math.floor(n(kg,Og))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Mg=Pg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Mg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Pg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Lg=Mg,Ng=Mg.range,Fg=Pg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jg=Fg,Bg=Fg.range;function Ug(t){return Pg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Vg=Ug(0),Gg=Ug(1),Hg=Ug(2),Yg=Ug(3),zg=Ug(4),qg=Ug(5),Xg=Ug(6),Kg=Vg.range,Wg=Gg.range,Qg=Hg.range,$g=Yg.range,Zg=zg.range,Jg=qg.range,tv=Xg.range,ev=Pg((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),nv=ev,rv=ev.range,iv=Pg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),av=iv,ov=iv.range,sv=Pg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),uv=sv,lv=sv.range,cv=Pg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),fv=cv,dv=cv.range,hv=Pg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));hv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Pg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):hv:null};var pv=hv,gv=hv.range;function vv(t){return Pg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var mv=vv(0),yv=vv(1),_v=vv(2),bv=vv(3),Ev=vv(4),Tv=vv(5),Sv=vv(6),wv=mv.range,Av=yv.range,xv=_v.range,Cv=bv.range,Dv=Ev.range,Iv=Tv.range,Rv=Sv.range,kv=Pg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Ov=kv,Pv=kv.range,Mv=Pg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Mv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Pg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Lv=Mv,Nv=Mv.range;function Fv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Uv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=Zv(i),c=Jv(i),f=Zv(a),d=Jv(a),h=Zv(o),p=Jv(o),g=Zv(s),v=Jv(s),m=Zv(u),y=Jv(u),_={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:bm,e:bm,f:Am,g:Nm,G:jm,H:Em,I:Tm,j:Sm,L:wm,m:xm,M:Cm,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:sy,s:uy,S:Dm,u:Im,U:Rm,V:Om,w:Pm,W:Mm,x:null,X:null,y:Lm,Y:Fm,Z:Bm,"%":oy},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Um,e:Um,f:zm,g:ny,G:iy,H:Vm,I:Gm,j:Hm,L:Ym,m:qm,M:Xm,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:sy,s:uy,S:Km,u:Wm,U:Qm,V:Zm,w:Jm,W:ty,x:null,X:null,y:ey,Y:ry,Z:ay,"%":oy},E={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return w(t,e,n,r)},d:cm,e:cm,f:vm,g:om,G:am,H:dm,I:dm,j:fm,L:gm,m:lm,M:hm,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:um,Q:ym,s:_m,S:pm,u:em,U:nm,V:rm,w:tm,W:im,x:function(t,e,r){return w(t,n,e,r)},X:function(t,e,n){return w(t,r,e,n)},y:om,Y:am,Z:sm,"%":mm};function T(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=qv[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function S(t,e){return function(n){var r,i,a=Bv(1900,void 0,1);if(w(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=jv(Bv(a.y,0,1))).getUTCDay(),r=i>4||0===i?yv.ceil(r):yv(r),r=Ov.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Fv(Bv(a.y,0,1))).getDay(),r=i>4||0===i?Gg.ceil(r):Gg(r),r=nv.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?jv(Bv(a.y,0,1)).getUTCDay():Fv(Bv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,jv(a)):Fv(a)}}function w(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=E[i in qv?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=T(n,_),_.X=T(r,_),_.c=T(e,_),b.x=T(n,b),b.X=T(r,b),b.c=T(e,b),{format:function(t){var e=T(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=T(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}var Vv,Gv,Hv,Yv,zv,qv={"-":"",_:" ",0:"0"},Xv=/^\s*\d+/,Kv=/^%/,Wv=/[\\^$*+?|[\]().{}]/g;function Qv(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function $v(t){return t.replace(Wv,"\\$&")}function Zv(t){return new RegExp("^(?:"+t.map($v).join("|")+")","i")}function Jv(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function tm(t,e,n){var r=Xv.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function em(t,e,n){var r=Xv.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function nm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function rm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function im(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function am(t,e,n){var r=Xv.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function om(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sm(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function um(t,e,n){var r=Xv.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function lm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function cm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fm(t,e,n){var r=Xv.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function dm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function pm(t,e,n){var r=Xv.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gm(t,e,n){var r=Xv.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vm(t,e,n){var r=Xv.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mm(t,e,n){var r=Kv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ym(t,e,n){var r=Xv.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _m(t,e,n){var r=Xv.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bm(t,e){return Qv(t.getDate(),e,2)}function Em(t,e){return Qv(t.getHours(),e,2)}function Tm(t,e){return Qv(t.getHours()%12||12,e,2)}function Sm(t,e){return Qv(1+nv.count(Lg(t),t),e,3)}function wm(t,e){return Qv(t.getMilliseconds(),e,3)}function Am(t,e){return wm(t,e)+"000"}function xm(t,e){return Qv(t.getMonth()+1,e,2)}function Cm(t,e){return Qv(t.getMinutes(),e,2)}function Dm(t,e){return Qv(t.getSeconds(),e,2)}function Im(t){var e=t.getDay();return 0===e?7:e}function Rm(t,e){return Qv(Vg.count(Lg(t)-1,t),e,2)}function km(t){var e=t.getDay();return e>=4||0===e?zg(t):zg.ceil(t)}function Om(t,e){return t=km(t),Qv(zg.count(Lg(t),t)+(4===Lg(t).getDay()),e,2)}function Pm(t){return t.getDay()}function Mm(t,e){return Qv(Gg.count(Lg(t)-1,t),e,2)}function Lm(t,e){return Qv(t.getFullYear()%100,e,2)}function Nm(t,e){return Qv((t=km(t)).getFullYear()%100,e,2)}function Fm(t,e){return Qv(t.getFullYear()%1e4,e,4)}function jm(t,e){var n=t.getDay();return Qv((t=n>=4||0===n?zg(t):zg.ceil(t)).getFullYear()%1e4,e,4)}function Bm(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qv(e/60|0,"0",2)+Qv(e%60,"0",2)}function Um(t,e){return Qv(t.getUTCDate(),e,2)}function Vm(t,e){return Qv(t.getUTCHours(),e,2)}function Gm(t,e){return Qv(t.getUTCHours()%12||12,e,2)}function Hm(t,e){return Qv(1+Ov.count(Lv(t),t),e,3)}function Ym(t,e){return Qv(t.getUTCMilliseconds(),e,3)}function zm(t,e){return Ym(t,e)+"000"}function qm(t,e){return Qv(t.getUTCMonth()+1,e,2)}function Xm(t,e){return Qv(t.getUTCMinutes(),e,2)}function Km(t,e){return Qv(t.getUTCSeconds(),e,2)}function Wm(t){var e=t.getUTCDay();return 0===e?7:e}function Qm(t,e){return Qv(mv.count(Lv(t)-1,t),e,2)}function $m(t){var e=t.getUTCDay();return e>=4||0===e?Ev(t):Ev.ceil(t)}function Zm(t,e){return t=$m(t),Qv(Ev.count(Lv(t),t)+(4===Lv(t).getUTCDay()),e,2)}function Jm(t){return t.getUTCDay()}function ty(t,e){return Qv(yv.count(Lv(t)-1,t),e,2)}function ey(t,e){return Qv(t.getUTCFullYear()%100,e,2)}function ny(t,e){return Qv((t=$m(t)).getUTCFullYear()%100,e,2)}function ry(t,e){return Qv(t.getUTCFullYear()%1e4,e,4)}function iy(t,e){var n=t.getUTCDay();return Qv((t=n>=4||0===n?Ev(t):Ev.ceil(t)).getUTCFullYear()%1e4,e,4)}function ay(){return"+0000"}function oy(){return"%"}function sy(t){return+t}function uy(t){return Math.floor(+t/1e3)}function ly(t){return Vv=Uv(t),Gv=Vv.format,Hv=Vv.parse,Yv=Vv.utcFormat,zv=Vv.utcParse,Vv}function cy(t){return new Date(t)}function fy(t){return t instanceof Date?+t:+new Date(+t)}function dy(t,e,n,r,i,o,s,u,l){var c=ig($p,$p),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),v=l("%I %p"),m=l("%a %d"),y=l("%b %d"),_=l("%B"),b=l("%Y"),E=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function T(a){return(s(a)<a?h:o(a)<a?p:i(a)<a?g:r(a)<a?v:e(a)<a?n(a)<a?m:y:t(a)<a?_:b)(a)}function S(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,s=a((function(t){return t[2]})).right(E,o);s===E.length?(i=I(n/31536e6,r/31536e6,e),e=t):s?(i=(s=E[o/E[s-1][2]<E[s][2]/o?s-1:s])[1],e=s[0]):(i=Math.max(I(n,r,e),1),e=u)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?d(Gp.call(t,fy)):d().map(cy)},c.ticks=function(t,e){var n,r=d(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=S(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?T:l(e)},c.nice=function(t,e){var n=d();return(t=S(t,n[0],n[n.length-1],e))?d(lg(n,t)):c},c.copy=function(){return ng(c,dy(t,e,n,r,i,o,s,u,l))},c}ly({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var hy=function(){return Bp.apply(dy(Lg,jg,Vg,nv,av,uv,fv,pv,Gv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},py=Pg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),gy=py,vy=py.range,my=Pg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),yy=my,_y=my.range,by=Pg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),Ey=by,Ty=by.range,Sy=function(){return Bp.apply(dy(Lv,gy,mv,Ov,yy,Ey,fv,pv,Yv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function wy(){var t,e,n,r,i,a=0,o=1,s=$p,u=!1;function l(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return l.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(o=+i[1]),n=t===e?0:1/(e-t),l):[a,o]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),l}}function Ay(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xy(){var t=og(wy()($p));return t.copy=function(){return Ay(t,xy())},Up.apply(t,arguments)}function Cy(){var t=vg(wy()).domain([1,10]);return t.copy=function(){return Ay(t,Cy()).base(t.base())},Up.apply(t,arguments)}function Dy(){var t=bg(wy());return t.copy=function(){return Ay(t,Dy()).constant(t.constant())},Up.apply(t,arguments)}function Iy(){var t=Ag(wy());return t.copy=function(){return Ay(t,Iy()).exponent(t.exponent())},Up.apply(t,arguments)}function Ry(){return Iy.apply(null,arguments).exponent(.5)}function ky(){var t=[],e=$p;function n(n){if(!isNaN(n=+n))return e((l(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,a=0,o=e.length;a<o;++a)null==(r=e[a])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ky(e).domain(t)},Up.apply(n,arguments)}function Oy(){var t,e,n,r,i,a,o,s=0,u=.5,l=1,c=$p,f=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(f?Math.max(0,Math.min(1,t)):t))}return d.domain=function(o){return arguments.length?(t=a(s=+o[0]),e=a(u=+o[1]),n=a(l=+o[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),d):[s,u,l]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(c=t,d):c},d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(s),e=o(u),n=o(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),d}}function Py(){var t=og(Oy()($p));return t.copy=function(){return Ay(t,Py())},Up.apply(t,arguments)}function My(){var t=vg(Oy()).domain([.1,1,10]);return t.copy=function(){return Ay(t,My()).base(t.base())},Up.apply(t,arguments)}function Ly(){var t=bg(Oy());return t.copy=function(){return Ay(t,Ly()).constant(t.constant())},Up.apply(t,arguments)}function Ny(){var t=Ag(Oy());return t.copy=function(){return Ay(t,Ny()).exponent(t.exponent())},Up.apply(t,arguments)}function Fy(){return Ny.apply(null,arguments).exponent(.5)}var jy=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},By=jy("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uy=jy("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vy=jy("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gy=jy("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Hy=jy("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Yy=jy("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zy=jy("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qy=jy("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Xy=jy("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ky=jy("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Wy=function(t){return pn(t[t.length-1])},Qy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jy),$y=Wy(Qy),Zy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jy),Jy=Wy(Zy),t_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jy),e_=Wy(t_),n_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jy),r_=Wy(n_),i_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jy),a_=Wy(i_),o_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jy),s_=Wy(o_),u_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jy),l_=Wy(u_),c_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jy),f_=Wy(c_),d_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jy),h_=Wy(d_),p_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jy),g_=Wy(p_),v_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jy),m_=Wy(v_),y_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jy),__=Wy(y_),b_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jy),E_=Wy(b_),T_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jy),S_=Wy(T_),w_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jy),A_=Wy(w_),x_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jy),C_=Wy(x_),D_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jy),I_=Wy(D_),R_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jy),k_=Wy(R_),O_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jy),P_=Wy(O_),M_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jy),L_=Wy(M_),N_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jy),F_=Wy(N_),j_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jy),B_=Wy(j_),U_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jy),V_=Wy(U_),G_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jy),H_=Wy(G_),Y_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jy),z_=Wy(Y_),q_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jy),X_=Wy(q_),K_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jy),W_=Wy(K_),Q_=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},$_=Ep(Ra(300,.5,0),Ra(-240,.5,1)),Z_=Ep(Ra(-100,.75,.35),Ra(80,1.5,.8)),J_=Ep(Ra(260,.75,.35),Ra(80,1.5,.8)),tb=Ra(),eb=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return tb.h=360*t-100,tb.s=1.5-1.5*e,tb.l=.8-.9*e,tb+""},nb=Ke(),rb=Math.PI/3,ib=2*Math.PI/3,ab=function(t){var e;return t=(.5-t)*Math.PI,nb.r=255*(e=Math.sin(t))*e,nb.g=255*(e=Math.sin(t+rb))*e,nb.b=255*(e=Math.sin(t+ib))*e,nb+""},ob=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function sb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var ub=sb(jy("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),lb=sb(jy("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cb=sb(jy("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fb=sb(jy("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),db=function(t){return Se(re(t).call(document.documentElement))},hb=0;function pb(){return new gb}function gb(){this._="@"+(++hb).toString(36)}gb.prototype=pb.prototype={constructor:gb,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var vb=function(t){return"string"==typeof t?new be([document.querySelectorAll(t)],[document.documentElement]):new be([null==t?[]:t],_e)},mb=function(t,e){null==e&&(e=In().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Rn(t,e[n]);return i},yb=function(t){return function(){return t}},_b=Math.abs,bb=Math.atan2,Eb=Math.cos,Tb=Math.max,Sb=Math.min,wb=Math.sin,Ab=Math.sqrt,xb=Math.PI,Cb=xb/2,Db=2*xb;function Ib(t){return t>1?0:t<-1?xb:Math.acos(t)}function Rb(t){return t>=1?Cb:t<=-1?-Cb:Math.asin(t)}function kb(t){return t.innerRadius}function Ob(t){return t.outerRadius}function Pb(t){return t.startAngle}function Mb(t){return t.endAngle}function Lb(t){return t&&t.padAngle}function Nb(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,d=f*u-c*l;if(!(d*d<1e-12))return[t+(d=(c*(e-a)-f*(t-i))/d)*u,e+d*l]}function Fb(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/Ab(s*s+u*u),c=l*u,f=-l*s,d=t+c,h=e+f,p=n+c,g=r+f,v=(d+p)/2,m=(h+g)/2,y=p-d,_=g-h,b=y*y+_*_,E=i-a,T=d*g-p*h,S=(_<0?-1:1)*Ab(Tb(0,E*E*b-T*T)),w=(T*_-y*S)/b,A=(-T*y-_*S)/b,x=(T*_+y*S)/b,C=(-T*y+_*S)/b,D=w-v,I=A-m,R=x-v,k=C-m;return D*D+I*I>R*R+k*k&&(w=x,A=C),{cx:w,cy:A,x01:-c,y01:-f,x11:w*(i/E-1),y11:A*(i/E-1)}}var jb=function(){var t=kb,e=Ob,n=yb(0),r=null,i=Pb,a=Mb,o=Lb,s=null;function u(){var u,l,c=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-Cb,h=a.apply(this,arguments)-Cb,p=_b(h-d),g=h>d;if(s||(s=u=Gi()),f<c&&(l=f,f=c,c=l),f>1e-12)if(p>Db-1e-12)s.moveTo(f*Eb(d),f*wb(d)),s.arc(0,0,f,d,h,!g),c>1e-12&&(s.moveTo(c*Eb(h),c*wb(h)),s.arc(0,0,c,h,d,g));else{var v,m,y=d,_=h,b=d,E=h,T=p,S=p,w=o.apply(this,arguments)/2,A=w>1e-12&&(r?+r.apply(this,arguments):Ab(c*c+f*f)),x=Sb(_b(f-c)/2,+n.apply(this,arguments)),C=x,D=x;if(A>1e-12){var I=Rb(A/c*wb(w)),R=Rb(A/f*wb(w));(T-=2*I)>1e-12?(b+=I*=g?1:-1,E-=I):(T=0,b=E=(d+h)/2),(S-=2*R)>1e-12?(y+=R*=g?1:-1,_-=R):(S=0,y=_=(d+h)/2)}var k=f*Eb(y),O=f*wb(y),P=c*Eb(E),M=c*wb(E);if(x>1e-12){var L,N=f*Eb(_),F=f*wb(_),j=c*Eb(b),B=c*wb(b);if(p<xb&&(L=Nb(k,O,j,B,N,F,P,M))){var U=k-L[0],V=O-L[1],G=N-L[0],H=F-L[1],Y=1/wb(Ib((U*G+V*H)/(Ab(U*U+V*V)*Ab(G*G+H*H)))/2),z=Ab(L[0]*L[0]+L[1]*L[1]);C=Sb(x,(c-z)/(Y-1)),D=Sb(x,(f-z)/(Y+1))}}S>1e-12?D>1e-12?(v=Fb(j,B,k,O,f,D,g),m=Fb(N,F,P,M,f,D,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),D<x?s.arc(v.cx,v.cy,D,bb(v.y01,v.x01),bb(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,D,bb(v.y01,v.x01),bb(v.y11,v.x11),!g),s.arc(0,0,f,bb(v.cy+v.y11,v.cx+v.x11),bb(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,D,bb(m.y11,m.x11),bb(m.y01,m.x01),!g))):(s.moveTo(k,O),s.arc(0,0,f,y,_,!g)):s.moveTo(k,O),c>1e-12&&T>1e-12?C>1e-12?(v=Fb(P,M,N,F,c,-C,g),m=Fb(k,O,j,B,c,-C,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),C<x?s.arc(v.cx,v.cy,C,bb(v.y01,v.x01),bb(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,C,bb(v.y01,v.x01),bb(v.y11,v.x11),!g),s.arc(0,0,c,bb(v.cy+v.y11,v.cx+v.x11),bb(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,C,bb(m.y11,m.x11),bb(m.y01,m.x01),!g))):s.arc(0,0,c,E,b,g):s.lineTo(P,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-xb/2;return[Eb(r)*n,wb(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:yb(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:yb(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:yb(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:yb(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:yb(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:yb(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:yb(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Bb(t){this._context=t}Bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ub=function(t){return new Bb(t)};function Vb(t){return t[0]}function Gb(t){return t[1]}var Hb=function(){var t=Vb,e=Gb,n=yb(!0),r=null,i=Ub,a=null;function o(o){var s,u,l,c=o.length,f=!1;for(null==r&&(a=i(l=Gi())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(l)return a=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:yb(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:yb(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:yb(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Yb=function(){var t=Vb,e=null,n=yb(0),r=Gb,i=yb(!0),a=null,o=Ub,s=null;function u(u){var l,c,f,d,h,p=u.length,g=!1,v=new Array(p),m=new Array(p);for(null==a&&(s=o(h=Gi())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===g)if(g=!g)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(v[f],m[f]);s.lineEnd(),s.areaEnd()}g&&(v[l]=+t(d,l,u),m[l]=+n(d,l,u),s.point(e?+e(d,l,u):v[l],r?+r(d,l,u):m[l]))}if(h)return s=null,h+""||null}function l(){return Hb().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:yb(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:yb(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:yb(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:yb(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:yb(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:yb(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:yb(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u},zb=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},qb=function(t){return t},Xb=function(){var t=qb,e=zb,n=null,r=yb(0),i=yb(Db),a=yb(0);function o(o){var s,u,l,c,f,d=o.length,h=0,p=new Array(d),g=new Array(d),v=+r.apply(this,arguments),m=Math.min(Db,Math.max(-Db,i.apply(this,arguments)-v)),y=Math.min(Math.abs(m)/d,a.apply(this,arguments)),_=y*(m<0?-1:1);for(s=0;s<d;++s)(f=g[p[s]=s]=+t(o[s],s,o))>0&&(h+=f);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),s=0,l=h?(m-d*_)/h:0;s<d;++s,v=c)g[u=p[s]]={data:o[u],index:s,value:f=g[u],startAngle:v,endAngle:c=v+(f>0?f*l:0)+_,padAngle:y};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:yb(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:yb(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:yb(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:yb(+t),o):a},o},Kb=Qb(Ub);function Wb(t){this._curve=t}function Qb(t){function e(e){return new Wb(t(e))}return e._curve=t,e}function $b(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Qb(t)):e()._curve},t}Wb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Zb=function(){return $b(Hb().curve(Kb))},Jb=function(){var t=Yb().curve(Kb),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return $b(n())},delete t.lineX0,t.lineEndAngle=function(){return $b(r())},delete t.lineX1,t.lineInnerRadius=function(){return $b(i())},delete t.lineY0,t.lineOuterRadius=function(){return $b(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Qb(t)):e()._curve},t},tE=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},eE=Array.prototype.slice;function nE(t){return t.source}function rE(t){return t.target}function iE(t){var e=nE,n=rE,r=Vb,i=Gb,a=null;function o(){var o,s=eE.call(arguments),u=e.apply(this,s),l=n.apply(this,s);if(a||(a=o=Gi()),t(a,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=l,s)),+i.apply(this,s)),o)return a=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(r="function"==typeof t?t:yb(+t),o):r},o.y=function(t){return arguments.length?(i="function"==typeof t?t:yb(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function aE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function oE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function sE(t,e,n,r,i){var a=tE(e,n),o=tE(e,n=(n+i)/2),s=tE(r,n),u=tE(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],u[0],u[1])}function uE(){return iE(aE)}function lE(){return iE(oE)}function cE(){var t=iE(sE);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var fE={draw:function(t,e){var n=Math.sqrt(e/xb);t.moveTo(n,0),t.arc(0,0,n,0,Db)}},dE={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hE=Math.sqrt(1/3),pE=2*hE,gE={draw:function(t,e){var n=Math.sqrt(e/pE),r=n*hE;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},vE=Math.sin(xb/10)/Math.sin(7*xb/10),mE=Math.sin(Db/10)*vE,yE=-Math.cos(Db/10)*vE,_E={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=mE*n,i=yE*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Db*a/5,s=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},bE={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},EE=Math.sqrt(3),TE={draw:function(t,e){var n=-Math.sqrt(e/(3*EE));t.moveTo(0,2*n),t.lineTo(-EE*n,-n),t.lineTo(EE*n,-n),t.closePath()}},SE=Math.sqrt(3)/2,wE=1/Math.sqrt(12),AE=3*(wE/2+1),xE={draw:function(t,e){var n=Math.sqrt(e/AE),r=n/2,i=n*wE,a=r,o=n*wE+n,s=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,u),t.lineTo(-.5*r-SE*i,SE*r+-.5*i),t.lineTo(-.5*a-SE*o,SE*a+-.5*o),t.lineTo(-.5*s-SE*u,SE*s+-.5*u),t.lineTo(-.5*r+SE*i,-.5*i-SE*r),t.lineTo(-.5*a+SE*o,-.5*o-SE*a),t.lineTo(-.5*s+SE*u,-.5*u-SE*s),t.closePath()}},CE=[fE,dE,gE,bE,_E,TE,xE],DE=function(){var t=yb(fE),e=yb(64),n=null;function r(){var r;if(n||(n=r=Gi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:yb(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:yb(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},IE=function(){};function RE(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kE(t){this._context=t}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:RE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var OE=function(t){return new kE(t)};function PE(t){this._context=t}PE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ME=function(t){return new PE(t)};function LE(t){this._context=t}LE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var NE=function(t){return new LE(t)};function FE(t,e){this._basis=new kE(t),this._beta=e}FE.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(r=u/n)*o),this._beta*e[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var jE=function t(e){function n(t){return 1===e?new kE(t):new FE(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function BE(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function UE(t,e){this._context=t,this._k=(1-e)/6}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:BE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:BE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var VE=function t(e){function n(t){return new UE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function GE(t,e){this._context=t,this._k=(1-e)/6}GE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:BE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var HE=function t(e){function n(t){return new GE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function YE(t,e){this._context=t,this._k=(1-e)/6}YE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zE=function t(e){function n(t){return new YE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function qE(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function XE(t,e){this._context=t,this._alpha=e}XE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var KE=function t(e){function n(t){return e?new XE(t,e):new UE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function WE(t,e){this._context=t,this._alpha=e}WE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var QE=function t(e){function n(t){return e?new WE(t,e):new GE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function $E(t,e){this._context=t,this._alpha=e}$E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ZE=function t(e){function n(t){return e?new $E(t,e):new YE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function JE(t){this._context=t}JE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var tT=function(t){return new JE(t)};function eT(t){return t<0?-1:1}function nT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(eT(a)+eT(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function rT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function iT(t,e,n){var r=t._x0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,t._y0+o*e,i-o,a-o*n,i,a)}function aT(t){this._context=t}function oT(t){this._context=new sT(t)}function sT(t){this._context=t}function uT(t){return new aT(t)}function lT(t){return new oT(t)}function cT(t){this._context=t}function fT(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)a[e]-=n=i[e]/a[e-1],o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}aT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iT(this,this._t0,rT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iT(this,rT(this,n=nT(this,t,e)),n);break;default:iT(this,this._t0,n=nT(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(oT.prototype=Object.create(aT.prototype)).point=function(t,e){aT.prototype.point.call(this,e,t)},sT.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},cT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=fT(t),i=fT(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var dT=function(t){return new cT(t)};function hT(t,e){this._context=t,this._t=e}hT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var pT=function(t){return new hT(t,.5)};function gT(t){return new hT(t,0)}function vT(t){return new hT(t,1)}var mT=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},yT=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function _T(t,e){return t[e]}var bT=function(){var t=yb([]),e=yT,n=mT,r=_T;function i(i){var a,o,s=t.apply(this,arguments),u=i.length,l=s.length,c=new Array(l);for(a=0;a<l;++a){for(var f,d=s[a],h=c[a]=new Array(u),p=0;p<u;++p)h[p]=f=[0,+r(i[p],d,p,i)],f.data=i[p];h.key=d}for(a=0,o=e(c);a<l;++a)c[o[a]].index=a;return n(c,o),c}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:yb(eE.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:yb(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?yT:"function"==typeof t?t:yb(eE.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?mT:t,i):n},i},ET=function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}mT(t,e)}},TT=function(t,e){if((s=t.length)>0)for(var n,r,i,a,o,s,u=0,l=t[e[0]].length;u<l;++u)for(a=o=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},ST=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}mT(t,e)}},wT=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],f=c[o][1]||0,d=(f-(c[o-1][1]||0))/2,h=0;h<s;++h){var p=t[e[h]];d+=(p[o][1]||0)-(p[o-1][1]||0)}u+=f,l+=d*f}n[o-1][1]+=n[o-1][0]=a,u&&(a-=l/u)}n[o-1][1]+=n[o-1][0]=a,mT(t,e)}},AT=function(t){var e=t.map(xT);return yT(t).sort((function(t,n){return e[t]-e[n]}))};function xT(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}var CT=function(t){var e=t.map(DT);return yT(t).sort((function(t,n){return e[t]-e[n]}))};function DT(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var IT=function(t){return CT(t).reverse()},RT=function(t){var e,n,r=t.length,i=t.map(DT),a=AT(t),o=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},kT=function(t){return yT(t).reverse()},OT=Date.prototype.toISOString?function(t){return t.toISOString()}:Yv("%Y-%m-%dT%H:%M:%S.%LZ"),PT=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:zv("%Y-%m-%dT%H:%M:%S.%LZ"),MT=function(t,e,n){var r=new Hn,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Vn():+n,r.restart((function a(o){o+=i,r.restart(a,i+=e,n),t(o)}),e,n),r)},LT=function(t){return function(){return t}};function NT(t){return t[0]}function FT(t){return t[1]}function jT(){this._=null}function BT(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function UT(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function VT(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function GT(t){for(;t.L;)t=t.L;return t}jT.prototype={constructor:jT,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=GT(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(UT(this,n),n=(t=n).U),n.C=!1,r.C=!0,VT(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(VT(this,n),n=(t=n).U),n.C=!1,r.C=!0,UT(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?GT(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,UT(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,VT(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,UT(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,VT(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,UT(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,VT(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var HT=jT;function YT(t,e,n,r){var i=[null,null],a=pS.push(i)-1;return i.left=t,i.right=e,n&&qT(i,t,e,n),r&&qT(i,e,t,r),dS[t.index].halfedges.push(a),dS[e.index].halfedges.push(a),i}function zT(t,e,n){var r=[e,n];return r.left=t,r}function qT(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function XT(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=0,f=1,d=s[0]-u,h=s[1]-l;if(a=e-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=r-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}if(a=n-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=i-l,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}return!(c>0||f<1)||(c>0&&(t[0]=[u+c*d,l+c*h]),f<1&&(t[1]=[u+f*d,l+f*h]),!0)}}}}}function KT(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,f=l[0],d=l[1],h=c[0],p=c[1],g=(f+h)/2;if(p===d){if(g<e||g>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[g,n];a=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];a=[g,n]}}else if(s=(d+p)/2-(o=(f-h)/(p-d))*g,o<-1||o>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function WT(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function QT(t,e){return e[+(e.left!==t.site)]}function $T(t,e){return e[+(e.left===t.site)]}var ZT,JT=[];function tS(){BT(this),this.x=this.y=this.arc=this.site=this.cy=null}function eS(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],u=r[0]-o,l=r[1]-s,c=a[0]-o,f=a[1]-s,d=2*(u*f-l*c);if(!(d>=-vS)){var h=u*u+l*l,p=c*c+f*f,g=(f*h-l*p)/d,v=(u*p-c*h)/d,m=JT.pop()||new tS;m.arc=t,m.site=i,m.x=g+o,m.y=(m.cy=v+s)+Math.sqrt(g*g+v*v),t.circle=m;for(var y=null,_=hS._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}hS.insert(y,m),y||(ZT=m)}}}}function nS(t){var e=t.circle;e&&(e.P||(ZT=e.N),hS.remove(e),JT.push(e),BT(e),t.circle=null)}var rS=[];function iS(){BT(this),this.edge=this.site=this.circle=null}function aS(t){var e=rS.pop()||new iS;return e.site=t,e}function oS(t){nS(t),fS.remove(t),rS.push(t),BT(t)}function sS(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];oS(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<gS&&Math.abs(r-u.circle.cy)<gS;)a=u.P,s.unshift(u),oS(u),u=a;s.unshift(u),nS(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<gS&&Math.abs(r-l.circle.cy)<gS;)o=l.N,s.push(l),oS(l),l=o;s.push(l),nS(l);var c,f=s.length;for(c=1;c<f;++c)qT((l=s[c]).edge,(u=s[c-1]).site,l.site,i);(l=s[f-1]).edge=YT((u=s[0]).site,l.site,null,i),eS(u),eS(l)}function uS(t){for(var e,n,r,i,a=t[0],o=t[1],s=fS._;s;)if((r=lS(s,o)-a)>gS)s=s.L;else{if(!((i=a-cS(s,o))>gS)){r>-gS?(e=s.P,n=s):i>-gS?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){dS[t.index]={site:t,halfedges:[]}}(t);var u=aS(t);if(fS.insert(e,u),e||n){if(e===n)return nS(e),n=aS(e.site),fS.insert(u,n),u.edge=n.edge=YT(e.site,u.site),eS(e),void eS(n);if(n){nS(e),nS(n);var l=e.site,c=l[0],f=l[1],d=t[0]-c,h=t[1]-f,p=n.site,g=p[0]-c,v=p[1]-f,m=2*(d*v-h*g),y=d*d+h*h,_=g*g+v*v,b=[(v*y-h*_)/m+c,(d*_-g*y)/m+f];qT(n.edge,l,p,b),u.edge=YT(l,t,null,b),n.edge=YT(t,p,null,b),eS(e),eS(n)}else u.edge=YT(e.site,u.site)}}function lS(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function cS(t,e){var n=t.N;if(n)return lS(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var fS,dS,hS,pS,gS=1e-6,vS=1e-12;function mS(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function yS(t,e){return e[1]-t[1]||e[0]-t[0]}function _S(t,e){var n,r,i,a=t.sort(yS).pop();for(pS=[],dS=new Array(t.length),fS=new HT,hS=new HT;;)if(i=ZT,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(uS(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;sS(i.arc)}if(function(){for(var t,e,n,r,i=0,a=dS.length;i<a;++i)if((t=dS[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=WT(t,pS[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=pS.length;a--;)KT(i=pS[a],t,e,n,r)&&XT(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>gS||Math.abs(i[0][1]-i[1][1])>gS)||delete pS[a]}(o,s,u,l),function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h,p,g,v=dS.length,m=!0;for(i=0;i<v;++i)if(a=dS[i]){for(o=a.site,s=(u=a.halfedges).length;s--;)pS[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=(h=$T(a,pS[u[s]]))[0],g=h[1],f=(c=QT(a,pS[u[++s%l]]))[0],d=c[1],(Math.abs(p-f)>gS||Math.abs(g-d)>gS)&&(u.splice(s,0,pS.push(zT(o,h,Math.abs(p-t)<gS&&r-g>gS?[t,Math.abs(f-t)<gS?d:r]:Math.abs(g-r)<gS&&n-p>gS?[Math.abs(d-r)<gS?f:n,r]:Math.abs(p-n)<gS&&g-e>gS?[n,Math.abs(f-n)<gS?d:e]:Math.abs(g-e)<gS&&p-t>gS?[Math.abs(d-e)<gS?f:t,e]:null))-1),++l);l&&(m=!1)}if(m){var y,_,b,E=1/0;for(i=0,m=null;i<v;++i)(a=dS[i])&&(b=(y=(o=a.site)[0]-t)*y+(_=o[1]-e)*_)<E&&(E=b,m=a);if(m){var T=[t,e],S=[t,r],w=[n,r],A=[n,e];m.halfedges.push(pS.push(zT(o=m.site,T,S))-1,pS.push(zT(o,S,w))-1,pS.push(zT(o,w,A))-1,pS.push(zT(o,A,T))-1)}}for(i=0;i<v;++i)(a=dS[i])&&(a.halfedges.length||delete dS[i])}(o,s,u,l)}this.edges=pS,this.cells=dS,fS=hS=pS=dS=null}_S.prototype={constructor:_S,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return QT(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s=n.site,u=-1,l=e[i[a-1]],c=l.left===s?l.right:l.left;++u<a;)o=c,c=(l=e[i[u]]).left===s?l.right:l.left,o&&c&&r<o.index&&r<c.index&&mS(s,o,c)<0&&t.push([s.data,o.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],f=u*u+l*l;f<c&&(c=f,o=s.index)}}))}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var bS=function(){var t=NT,e=FT,n=null;function r(r){return new _S(r.map((function(n,i){var a=[Math.round(t(n,i,r)/gS)*gS,Math.round(e(n,i,r)/gS)*gS];return a.index=i,a.data=n,a})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:LT(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:LT(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},ES=function(t){return function(){return t}};function TS(t,e,n){this.target=t,this.type=e,this.transform=n}function SS(t,e,n){this.k=t,this.x=e,this.y=n}SS.prototype={constructor:SS,scale:function(t){return 1===t?this:new SS(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new SS(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wS=new SS(1,0,0);function AS(t){for(;!t.__zoom;)if(!(t=t.parentNode))return wS;return t.__zoom}function xS(){le.stopImmediatePropagation()}AS.prototype=SS.prototype;var CS=function(){le.preventDefault(),le.stopImmediatePropagation()};function DS(){return!le.ctrlKey&&!le.button}function IS(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function RS(){return this.__zoom||wS}function kS(){return-le.deltaY*(1===le.deltaMode?.05:le.deltaMode?1:.002)}function OS(){return navigator.maxTouchPoints||"ontouchstart"in this}function PS(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var MS=function(){var t,e,n=DS,r=IS,i=PS,a=kS,o=OS,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,c=fp,f=ft("start","zoom","end"),d=0;function h(t){t.property("__zoom",RS).on("wheel.zoom",b).on("mousedown.zoom",E).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",S).on("touchmove.zoom",w).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new SS(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new SS(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function m(t,e,n){t.on("start.zoom",(function(){y(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){y(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,a=y(t,i),o=r.apply(t,i),s=null==n?v(o):"function"==typeof n?n.apply(t,i):n,u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=t.__zoom,f="function"==typeof e?e.apply(t,i):e,d=c(l.invert(s).concat(u/l.k),f.invert(s).concat(u/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=u/e[2];t=new SS(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function y(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function b(){if(n.apply(this,arguments)){var t=y(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=On(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],or(this),t.start()}CS(),t.wheel=setTimeout(l,150),t.zoom("mouse",i(g(p(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}function l(){t.wheel=null,t.end()}}function E(){if(!e&&n.apply(this,arguments)){var t=y(this,arguments,!0),r=Se(le.view).on("mousemove.zoom",l,!0).on("mouseup.zoom",c,!0),a=On(this),o=le.clientX,s=le.clientY;xe(le.view),xS(),t.mouse=[a,this.__zoom.invert(a)],or(this),t.start()}function l(){if(CS(),!t.moved){var e=le.clientX-o,n=le.clientY-s;t.moved=e*e+n*n>d}t.zoom("mouse",i(g(t.that.__zoom,t.mouse[0]=On(t.that),t.mouse[1]),t.extent,u))}function c(){r.on("mousemove.zoom mouseup.zoom",null),Ce(le.view,t.moved),CS(),t.end()}}function T(){if(n.apply(this,arguments)){var t=this.__zoom,e=On(this),a=t.invert(e),o=t.k*(le.shiftKey?.5:2),s=i(g(p(t,o),e,a),r.apply(this,arguments),u);CS(),l>0?Se(this).transition().duration(l).call(m,s,e):Se(this).call(h.transform,s)}}function S(){if(n.apply(this,arguments)){var e,r,i,a,o=le.touches,s=o.length,u=y(this,arguments,le.changedTouches.length===s);for(xS(),r=0;r<s;++r)a=[a=kn(this,o,(i=o[r]).identifier),this.__zoom.invert(a),i.identifier],u.touch0?u.touch1||u.touch0[2]===a[2]||(u.touch1=a,u.taps=0):(u.touch0=a,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),500)),or(this),u.start())}}function w(){if(this.__zooming){var e,n,r,a,o=y(this,arguments),s=le.changedTouches,l=s.length;for(CS(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<l;++e)r=kn(this,s,(n=s[e]).identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var c=o.touch0[0],f=o.touch0[1],d=o.touch1[0],h=o.touch1[1],v=(v=d[0]-c[0])*v+(v=d[1]-c[1])*v,m=(m=h[0]-f[0])*m+(m=h[1]-f[1])*m;n=p(n,Math.sqrt(v/m)),r=[(c[0]+d[0])/2,(c[1]+d[1])/2],a=[(f[0]+h[0])/2,(f[1]+h[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",i(g(n,r,a),o.extent,u))}}function A(){if(this.__zooming){var t,n,r=y(this,arguments),i=le.changedTouches,a=i.length;for(xS(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<a;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=Se(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return h.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",RS),t!==r?m(t,e,n):r.interrupt().each((function(){y(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},h.scaleBy=function(t,e,n){h.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},h.scaleTo=function(t,e,n){h.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,o=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return i(g(p(a,l),o,s),t,u)}),n)},h.translateBy=function(t,e,n){h.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},h.translateTo=function(t,e,n,a){h.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,s=null==a?v(t):"function"==typeof a?a.apply(this,arguments):a;return i(wS.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),a)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){ge(new TS(h,t,this.that.__zoom),f.apply,f,[t,this.that,this.args])}},h.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:ES(+t),h):a},h.filter=function(t){return arguments.length?(n="function"==typeof t?t:ES(!!t),h):n},h.touchable=function(t){return arguments.length?(o="function"==typeof t?t:ES(!!t),h):o},h.extent=function(t){return arguments.length?(r="function"==typeof t?t:ES([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),h):r},h.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],h):[s[0],s[1]]},h.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],h):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},h.constrain=function(t){return arguments.length?(i=t,h):i},h.duration=function(t){return arguments.length?(l=+t,h):l},h.interpolate=function(t){return arguments.length?(c=t,h):c},h.on=function(){var t=f.on.apply(f,arguments);return t===f?h:t},h.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,h):Math.sqrt(d)},h}},XkjI:function(t,e,n){t.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),n=t((function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)})),r=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},a=function(t){try{return!!t()}catch(e){return!0}},o=!a((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),s=e.document,u=r(s)&&r(s.createElement),l=!o&&!a((function(){return 7!=Object.defineProperty(u?s.createElement("div"):{},"a",{get:function(){return 7}}).a})),c=Object.defineProperty,f={f:o?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if("function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e),i(n),l)try{return c(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},d=o?function(t,e,n){return f.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,n))}:function(t,e,n){return t[e]=n,t},h={}.hasOwnProperty,p=function(t,e){return h.call(t,e)},g=0,v=Math.random(),m=t((function(t){var r=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),y=t((function(t){var r="Symbol(".concat("src",")_",(++g+v).toString(36)),i=(""+m).split("toString");n.inspectSource=function(t){return m.call(t)},(t.exports=function(t,n,a,o){var s="function"==typeof a;s&&(p(a,"name")||d(a,"name",n)),t[n]!==a&&(s&&(p(a,r)||d(a,r,t[n]?""+t[n]:i.join(String(n)))),t===e?t[n]=a:o?t[n]?t[n]=a:d(t,n,a):(delete t[n],d(t,n,a)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||m.call(this)}))})),_=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},b=function t(r,i,a){var o,s,u,l,c=r&t.F,f=r&t.G,h=r&t.P,p=r&t.B,g=f?e:r&t.S?e[i]||(e[i]={}):(e[i]||{}).prototype,v=f?n:n[i]||(n[i]={}),m=v.prototype||(v.prototype={});for(o in f&&(a=i),a)u=((s=!c&&g&&void 0!==g[o])?g:a)[o],l=p&&s?_(u,e):h&&"function"==typeof u?_(Function.call,u):u,g&&y(g,o,u,r&t.U),v[o]!=u&&d(v,o,l),h&&m[o]!=u&&(m[o]=u)};e.core=n,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var E=b,T=Math.ceil,S=Math.floor,w=function(t){return isNaN(t=+t)?0:(t>0?S:T)(t)};E(E.P,"String",{codePointAt:function(t){return function(t,e){var n,r,i=String(function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}(t)),a=w(e),o=i.length;return a<0||a>=o?void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===o||(r=i.charCodeAt(a+1))<56320||r>57343?n:r-56320+(n-55296<<10)+65536}(this,t)}});var A=Math.max,x=Math.min,C=function(t,e){return(t=w(t))<0?A(t+e,0):x(t,e)},D=String.fromCharCode,I=String.fromCodePoint;E(E.S+E.F*(!!I&&1!=I.length),"String",{fromCodePoint:function(t){for(var e,n=arguments,r=[],i=arguments.length,a=0;i>a;){if(e=+n[a++],C(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?D(e):D(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}});var R,k,O,P,M,L,N,F,j,B,U,V,G,H,Y={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},z=function(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||"$"===t||"_"===t||Y.ID_Start.test(t))},q=function(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"$"===t||"_"===t||"\u200c"===t||"\u200d"===t||Y.ID_Continue.test(t))},X=function(t){return"string"==typeof t&&/[0-9]/.test(t)},K=function(t){return"string"==typeof t&&/[0-9A-Fa-f]/.test(t)};function W(){for(B="default",U="",V=!1,G=1;;){H=Q();var t=Z[B]();if(t)return t}}function Q(){if(R[P])return String.fromCodePoint(R.codePointAt(P))}function $(){var t=Q();return"\n"===t?(M++,L=0):t?L+=t.length:L++,t&&(P+=t.length),t}var Z={default:function(){switch(H){case"\t":case"\v":case"\f":case" ":case"\xa0":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void $();case"/":return $(),void(B="comment");case void 0:return $(),J("eof")}if(!function(t){return"string"==typeof t&&Y.Space_Separator.test(t)}(H))return Z[k]();$()},comment:function(){switch(H){case"*":return $(),void(B="multiLineComment");case"/":return $(),void(B="singleLineComment")}throw at($())},multiLineComment:function(){switch(H){case"*":return $(),void(B="multiLineCommentAsterisk");case void 0:throw at($())}$()},multiLineCommentAsterisk:function(){switch(H){case"*":return void $();case"/":return $(),void(B="default");case void 0:throw at($())}$(),B="multiLineComment"},singleLineComment:function(){switch(H){case"\n":case"\r":case"\u2028":case"\u2029":return $(),void(B="default");case void 0:return $(),J("eof")}$()},value:function(){switch(H){case"{":case"[":return J("punctuator",$());case"n":return $(),tt("ull"),J("null",null);case"t":return $(),tt("rue"),J("boolean",!0);case"f":return $(),tt("alse"),J("boolean",!1);case"-":case"+":return"-"===$()&&(G=-1),void(B="sign");case".":return U=$(),void(B="decimalPointLeading");case"0":return U=$(),void(B="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return U=$(),void(B="decimalInteger");case"I":return $(),tt("nfinity"),J("numeric",1/0);case"N":return $(),tt("aN"),J("numeric",NaN);case'"':case"'":return V='"'===$(),U="",void(B="string")}throw at($())},identifierNameStartEscape:function(){if("u"!==H)throw at($());$();var t=et();switch(t){case"$":case"_":break;default:if(!z(t))throw st()}U+=t,B="identifierName"},identifierName:function(){switch(H){case"$":case"_":case"\u200c":case"\u200d":return void(U+=$());case"\\":return $(),void(B="identifierNameEscape")}if(!q(H))return J("identifier",U);U+=$()},identifierNameEscape:function(){if("u"!==H)throw at($());$();var t=et();switch(t){case"$":case"_":case"\u200c":case"\u200d":break;default:if(!q(t))throw st()}U+=t,B="identifierName"},sign:function(){switch(H){case".":return U=$(),void(B="decimalPointLeading");case"0":return U=$(),void(B="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return U=$(),void(B="decimalInteger");case"I":return $(),tt("nfinity"),J("numeric",G*(1/0));case"N":return $(),tt("aN"),J("numeric",NaN)}throw at($())},zero:function(){switch(H){case".":return U+=$(),void(B="decimalPoint");case"e":case"E":return U+=$(),void(B="decimalExponent");case"x":case"X":return U+=$(),void(B="hexadecimal")}return J("numeric",0*G)},decimalInteger:function(){switch(H){case".":return U+=$(),void(B="decimalPoint");case"e":case"E":return U+=$(),void(B="decimalExponent")}if(!X(H))return J("numeric",G*Number(U));U+=$()},decimalPointLeading:function(){if(X(H))return U+=$(),void(B="decimalFraction");throw at($())},decimalPoint:function(){switch(H){case"e":case"E":return U+=$(),void(B="decimalExponent")}return X(H)?(U+=$(),void(B="decimalFraction")):J("numeric",G*Number(U))},decimalFraction:function(){switch(H){case"e":case"E":return U+=$(),void(B="decimalExponent")}if(!X(H))return J("numeric",G*Number(U));U+=$()},decimalExponent:function(){switch(H){case"+":case"-":return U+=$(),void(B="decimalExponentSign")}if(X(H))return U+=$(),void(B="decimalExponentInteger");throw at($())},decimalExponentSign:function(){if(X(H))return U+=$(),void(B="decimalExponentInteger");throw at($())},decimalExponentInteger:function(){if(!X(H))return J("numeric",G*Number(U));U+=$()},hexadecimal:function(){if(K(H))return U+=$(),void(B="hexadecimalInteger");throw at($())},hexadecimalInteger:function(){if(!K(H))return J("numeric",G*Number(U));U+=$()},string:function(){switch(H){case"\\":return $(),void(U+=function(){switch(Q()){case"b":return $(),"\b";case"f":return $(),"\f";case"n":return $(),"\n";case"r":return $(),"\r";case"t":return $(),"\t";case"v":return $(),"\v";case"0":if($(),X(Q()))throw at($());return"\0";case"x":return $(),function(){var t="",e=Q();if(!K(e))throw at($());if(t+=$(),e=Q(),!K(e))throw at($());return t+=$(),String.fromCodePoint(parseInt(t,16))}();case"u":return $(),et();case"\n":case"\u2028":case"\u2029":return $(),"";case"\r":return $(),"\n"===Q()&&$(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw at($())}return $()}());case'"':return V?($(),J("string",U)):void(U+=$());case"'":return V?void(U+=$()):($(),J("string",U));case"\n":case"\r":throw at($());case"\u2028":case"\u2029":!function(t){console.warn("JSON5: '"+ut(t)+"' in strings is not valid ECMAScript; consider escaping")}(H);break;case void 0:throw at($())}U+=$()},start:function(){switch(H){case"{":case"[":return J("punctuator",$())}B="value"},beforePropertyName:function(){switch(H){case"$":case"_":return U=$(),void(B="identifierName");case"\\":return $(),void(B="identifierNameStartEscape");case"}":return J("punctuator",$());case'"':case"'":return V='"'===$(),void(B="string")}if(z(H))return U+=$(),void(B="identifierName");throw at($())},afterPropertyName:function(){if(":"===H)return J("punctuator",$());throw at($())},beforePropertyValue:function(){B="value"},afterPropertyValue:function(){switch(H){case",":case"}":return J("punctuator",$())}throw at($())},beforeArrayValue:function(){if("]"===H)return J("punctuator",$());B="value"},afterArrayValue:function(){switch(H){case",":case"]":return J("punctuator",$())}throw at($())},end:function(){throw at($())}};function J(t,e){return{type:t,value:e,line:M,column:L}}function tt(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(Q()!==r)throw at($());$()}}function et(){for(var t="",e=4;e-- >0;){var n=Q();if(!K(n))throw at($());t+=$()}return String.fromCodePoint(parseInt(t,16))}var nt={start:function(){if("eof"===N.type)throw ot();rt()},beforePropertyName:function(){switch(N.type){case"identifier":case"string":return F=N.value,void(k="afterPropertyName");case"punctuator":return void it();case"eof":throw ot()}},afterPropertyName:function(){if("eof"===N.type)throw ot();k="beforePropertyValue"},beforePropertyValue:function(){if("eof"===N.type)throw ot();rt()},beforeArrayValue:function(){if("eof"===N.type)throw ot();"punctuator"!==N.type||"]"!==N.value?rt():it()},afterPropertyValue:function(){if("eof"===N.type)throw ot();switch(N.value){case",":return void(k="beforePropertyName");case"}":it()}},afterArrayValue:function(){if("eof"===N.type)throw ot();switch(N.value){case",":return void(k="beforeArrayValue");case"]":it()}},end:function(){}};function rt(){var t;switch(N.type){case"punctuator":switch(N.value){case"{":t={};break;case"[":t=[]}break;case"null":case"boolean":case"numeric":case"string":t=N.value}if(void 0===j)j=t;else{var e=O[O.length-1];Array.isArray(e)?e.push(t):e[F]=t}if(null!==t&&"object"==typeof t)O.push(t),k=Array.isArray(t)?"beforeArrayValue":"beforePropertyName";else{var n=O[O.length-1];k=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function it(){O.pop();var t=O[O.length-1];k=null==t?"end":Array.isArray(t)?"afterArrayValue":"afterPropertyValue"}function at(t){return lt(void 0===t?"JSON5: invalid end of input at "+M+":"+L:"JSON5: invalid character '"+ut(t)+"' at "+M+":"+L)}function ot(){return lt("JSON5: invalid end of input at "+M+":"+L)}function st(){return lt("JSON5: invalid identifier character at "+M+":"+(L-=5))}function ut(t){var e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){var n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function lt(t){var e=new SyntaxError(t);return e.lineNumber=M,e.columnNumber=L,e}return{parse:function(t,e){R=String(t),k="start",O=[],P=0,M=1,L=0,N=void 0,F=void 0,j=void 0;do{N=W(),nt[k]()}while("eof"!==N.type);return"function"==typeof e?function t(e,n,r){var i=e[n];if(null!=i&&"object"==typeof i)for(var a in i){var o=t(i,a,r);void 0===o?delete i[a]:i[a]=o}return r.call(e,n,i)}({"":j},"",e):j},stringify:function(t,e,n){var r,i,a,o=[],s="",u="";if(null==e||"object"!=typeof e||Array.isArray(e)||(n=e.space,a=e.quote,e=e.replacer),"function"==typeof e)i=e;else if(Array.isArray(e)){r=[];for(var l=0,c=e;l<c.length;l+=1){var f=c[l],d=void 0;"string"==typeof f?d=f:("number"==typeof f||f instanceof String||f instanceof Number)&&(d=String(f)),void 0!==d&&r.indexOf(d)<0&&r.push(d)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),u="          ".substr(0,n)):"string"==typeof n&&(u=n.substr(0,10)),function t(e,n){var a=n[e];switch(null!=a&&("function"==typeof a.toJSON5?a=a.toJSON5(e):"function"==typeof a.toJSON&&(a=a.toJSON(e))),i&&(a=i.call(n,e,a)),a instanceof Number?a=Number(a):a instanceof String?a=String(a):a instanceof Boolean&&(a=a.valueOf()),a){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof a?h(a):"number"==typeof a?String(a):"object"==typeof a?Array.isArray(a)?function(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var n=s;s+=u;for(var r,i=[],a=0;a<e.length;a++){var l=t(String(a),e);i.push(void 0!==l?l:"null")}if(0===i.length)r="[]";else if(""===u)r="["+i.join(",")+"]";else{var c=i.join(",\n"+s);r="[\n"+s+c+",\n"+n+"]"}return o.pop(),s=n,r}(a):function(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var n=s;s+=u;for(var i,a,l=[],c=0,f=r||Object.keys(e);c<f.length;c+=1){var d=f[c],h=t(d,e);if(void 0!==h){var g=p(d)+":";""!==u&&(g+=" "),l.push(g+=h)}}return 0===l.length?i="{}":""===u?i="{"+(a=l.join(","))+"}":(a=l.join(",\n"+s),i="{\n"+s+a+",\n"+n+"}"),o.pop(),s=n,i}(a):void 0}("",{"":t});function h(t){for(var e={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",i=0;i<t.length;i++){var o=t[i];switch(o){case"'":case'"':e[o]++,r+=o;continue;case"\0":if(X(t[i+1])){r+="\\x00";continue}}if(n[o])r+=n[o];else if(o<" "){var s=o.charCodeAt(0).toString(16);r+="\\x"+("00"+s).substring(s.length)}else r+=o}var u=a||Object.keys(e).reduce((function(t,n){return e[t]<e[n]?t:n}));return u+(r=r.replace(new RegExp(u,"g"),n[u]))+u}function p(t){if(0===t.length)return h(t);var e=String.fromCodePoint(t.codePointAt(0));if(!z(e))return h(t);for(var n=e.length;n<t.length;n++)if(!q(String.fromCodePoint(t.codePointAt(n))))return h(t);return t}}}}()},Y81X:function(t,e,n){"use strict";t.exports=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},Yvhy:function(t,e,n){var r;window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./index.js")}({"./externals/base64.js":function(t,e,n){var r,i,o,u,l,c={};r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){for(var e=0,n=[],i=0|t.length/3;0<i--;){var a=(t[e]<<16)+(t[e+1]<<8)+t[e+2];e+=3,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push(r.charAt(63&a))}return 2==t.length-e?(n.push(r.charAt(63&(a=(t[e]<<16)+(t[e+1]<<8))>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push("=")):1==t.length-e&&(n.push(r.charAt(63&(a=t[e]<<16)>>18)),n.push(r.charAt(63&a>>12)),n.push("==")),n.join("")},o=function(){for(var t=[],e=0;e<r.length;++e)t[r.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}(),u=function(t){for(var e=0,n=[],r=0|t.length/4;0<r--;){var i=(o[t.charCodeAt(e)]<<18)+(o[t.charCodeAt(e+1)]<<12)+(o[t.charCodeAt(e+2)]<<6)+o[t.charCodeAt(e+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),e+=4}return n&&("="==t.charAt(e-2)?(n.pop(),n.pop()):"="==t.charAt(e-1)&&n.pop()),n},l={encode:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},decode:function(t){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}},c.decodeArray=function(t){var e=u(t);return new Uint8Array(e)},c.encodeASCII=function(t){var e=l.encode(t);return i(e)},c.decodeASCII=function(t){var e=u(t);return l.decode(e)},c.encode=function(t){var e=function(t){for(var e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e}(t);return i(e)},c.decode=function(t){return function(t){for(var e=[],n=0;n<t.length;){var r=t[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&t[n++]):r<240?(r=(15&r)<<12,r|=(63&t[n++])<<6,r|=63&t[n++]):(r=(7&r)<<18,r|=(63&t[n++])<<12,r|=(63&t[n++])<<6,r|=63&t[n++])),e.push(String.fromCharCode(r))}return e.join("")}(u(t))},e.decode=c.decode,e.decodeArray=c.decodeArray,e.encode=c.encode,e.encodeASCII=c.encodeASCII},"./externals/cea608-parser.js":function(t,e,n){!function(t){"use strict";var e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(t){var n=t;return e.hasOwnProperty(t)&&(n=e[t]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseLevel>=this.verboseFilter[t]&&console.log(this.time+" ["+t+"] "+e)}},l=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},c=function(t,e,n,r,i){this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},copy:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var f=function(t,e,n,r,i,a){this.uchar=t||" ",this.penState=new c(e,n,r,i,a)};f.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(t,e){this.uchar=t,this.penState.copy(e)},setPenState:function(t){this.penState.copy(t)},equals:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},copy:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var d=function(){this.chars=[];for(var t=0;t<32;t++)this.chars.push(new f);this.pos=0,this.currPenState=new c};d.prototype={equals:function(t){for(var e=!0,n=0;n<32;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},copy:function(t){for(var e=0;e<32;e++)this.chars[e].copy(t.chars[e])},isEmpty:function(){for(var t=!0,e=0;e<32;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},setCursor:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(t){t>=144&&this.backSpace();var e=n(t);this.pos>=32?u.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},clearFromPos:function(t){var e;for(e=t;e<32;e++)this.chars[e].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var t=[],e=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},setPenStyles:function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}};var h=function(){this.rows=[];for(var t=0;t<15;t++)this.rows.push(new d);this.currRow=14,this.nrRollUpRows=null,this.reset()};h.prototype={reset:function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},equals:function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},copy:function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},isEmpty:function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(t){this.rows[this.currRow].insertChar(t)},setPen:function(t){this.rows[this.currRow].setPenStyles(t)},moveCursor:function(t){this.rows[this.currRow].moveCursor(t)},setCursor:function(t){u.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},setPAC:function(t){u.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.currRow=e;var n=this.rows[this.currRow];if(null!==t.indent){var r=Math.max(t.indent-1,0);n.setCursor(t.indent),t.color=n.chars[r].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},setBkgData:function(t){u.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},setRollUpRows:function(t){this.nrRollUpRows=t},rollUp:function(){if(null!==this.nrRollUpRows){u.log("TEXT",this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")}else u.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(t){t=t||!1;for(var e=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&e.push(t?"Row "+(r+1)+': "'+i+'"':i.trim())}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(t){this.outputFilter=t},setPAC:function(t){this.writeScreen.setPAC(t)},setBkgData:function(t){this.writeScreen.setBkgData(t)},setMode:function(t){t!==this.mode&&(this.mode=t,u.log("INFO","MODE="+t),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},insertChars:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);u.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(t){u.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(t){u.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},cc_MIDROW:function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}u.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},outputDataUpdate:function(){var t=u.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}};var g=function(t,e,n){this.field=t||1,this.outputs=[e,n],this.channels=[new p(1,e),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(t){return this.channels[t].getHandler()},setHandler:function(t,e){this.channels[t].setHandler(e)},addData:function(t,e){var n,r,i,a=!1;this.lastTime=t,u.setTime(t);for(var o=0;o<e.length;o+=2)i=127&e[o+1],(r=127&e[o])>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([r,i])+") is dropped")):0!==r||0!==i?(u.log("DATA","["+l([e[o],e[o+1]])+"] -> ("+l([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):u.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([e[o],e[o+1]])))):this.dataCounters.padding+=2},parseCmd:function(t,e){var n;if(!((20===t||21===t||28===t||29===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35))return!1;var r=this.channels[(n=20===t||21===t||23===t?1:2)-1];return 20===t||21===t||28===t||29===t?32===e?r.cc_RCL():33===e?r.cc_BS():34===e?r.cc_AOF():35===e?r.cc_AON():36===e?r.cc_DER():37===e?r.cc_RU(2):38===e?r.cc_RU(3):39===e?r.cc_RU(4):40===e?r.cc_FON():41===e?r.cc_RDC():42===e?r.cc_TR():43===e?r.cc_RTD():44===e?r.cc_EDM():45===e?r.cc_CR():46===e?r.cc_ENM():47===e&&r.cc_EOC():r.cc_TO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},parseMidrow:function(t,e){var n=null;if((17===t||25===t)&&32<=e&&e<=47){if((n=17===t?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(e),u.log("DEBUG","MIDROW ("+l([t,e])+")"),this.lastCmdA=t,this.lastCmdB=e,!0}return!1},parsePAC:function(t,e){var n;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95))return!1;n=t<=23?1:2;var s=this.interpretPAC(64<=e&&e<=95?1===n?r[t]:a[t]:1===n?i[t]:o[t],e);return this.channels[n-1].setPAC(s),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},interpretPAC:function(t,e){var n,r={color:null,italics:!1,indent:null,underline:!1,row:t};return r.underline=1==(1&(n=e>95?e-96:e-64)),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(t,e){var r,i=null,a=null,o=null;if(t>=25?(i=2,o=t-8):(i=1,o=t),17<=o&&o<=19?(u.log("INFO","Special char '"+n(r=17===o?e+80:18===o?e+112:e+144)+"' in channel "+i),a=[r],this.lastCmdA=t,this.lastCmdB=e):32<=t&&t<=127&&(a=0===e?[t]:[t,e],this.lastCmdA=null,this.lastCmdB=null),a){var s=l(a);u.log("DEBUG","Char codes =  "+s.join(","))}return a},parseBackgroundAttributes:function(t,e){var n,r;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(n={},16===t||24===t?(r=Math.floor((e-32)/2),n.background=s[r],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),this.channels[(t<24?1:2)-1].setBkgData(n),this.lastCmdA=t,this.lastCmdB=e,!0)},reset:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}},t.logger=u,t.PenState=c,t.CaptionScreen=h,t.Cea608Parser=g,t.findCea608Nalus=function(t,e,n){for(var r=0,i=e,a=[],o=function(t,e,n,r){if(4!==t||e<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s};i<e+n;){if(r=t.getUint32(i),6==(31&t.getUint8(i+4)))for(var s=i+5,u=-1;s<i+4+r-1;){u=0;for(var l=255;255===l;)u+=l=t.getUint8(s),s++;var c=0;for(l=255;255===l;)c+=l=t.getUint8(s),s++;o(u,c,t,s)&&a.push([s,c]),s+=c}i+=r+4}return a},t.extractCea608DataFromRange=function(t,e){var n=e[0],r=[[],[]],i=31&t.getUint8(n+=8);n+=2;for(var a=0;a<i;a++){var o=t.getUint8(n),s=4&o,u=3&o;n++;var l=t.getUint8(n);n++;var c=t.getUint8(n);n++,s&&(127&l)+(127&c)!=0&&(0===u?(r[0].push(l),r[0].push(c)):1===u&&(r[1].push(l),r[1].push(c)))}return r}}(e)},"./externals/xml2json.js":function(t,e,n){"use strict";n.r(e),e.default=function(t){function e(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function n(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function r(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(e,n,r))break}return i!=t.length}function i(e,n,i){switch(t.arrayAccessForm){case"property":e[n+"_asArray"]=e[n]instanceof Array?e[n]:[e[n]]}!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0&&r(t.arrayAccessFormPaths,e,n,i)&&(e[n]=[e[n]])}function a(t){var e=t.split(/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),r=e[5].split(".");if(n.setHours(e[3],e[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),e[6]&&e[7]){var i=60*e[6]+Number(e[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function o(e,n,i,a){return!(1==n&&t.xmlElementsFilter.length>0)||r(t.xmlElementsFilter,e,i,a)}function s(e,r,i,a){var o="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+r;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=e[u];t.escapeMode&&(l=n(l)),o+=" "+u.substr(t.attributePrefix.length)+"=",o+=t.useDoubleQuotes?'"'+l+'"':"'"+l+"'"}return o+(a?"/>":">")}function u(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function l(e,n){return"property"==t.arrayAccessForm&&-1!==(r=n.toString()).indexOf("_asArray",r.length-"_asArray".length)||0==n.toString().indexOf(t.attributePrefix)||0==n.toString().indexOf("__")||e[n]instanceof Function;var r}function c(t){var e=0;if(t instanceof Object)for(var n in t)l(t,n)||e++;return e}function f(e,n,i){return 0==t.jsonPropertiesFilter.length||""==i||r(t.jsonPropertiesFilter,e,n,i)}function d(e){var n=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(t.attributePrefix)&&n.push(r);return n}function h(e){var r="";return e instanceof Object?r+=function(e){var r="";return null!=e.__cdata&&(r+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(r+=t.escapeMode?n(e.__text):e.__text),r}(e):null!=e&&(r+=t.escapeMode?n(e):e),r}function p(t,e){return""===t?e:t+"."+e}function g(t,e,n,r){var i="";if(0==t.length)i+=s(t,e,n,!0);else for(var a=0;a<t.length;a++)i+=s(t[a],e,d(t[a]),!1),i+=v(t[a],p(r,e)),i+=u(t[a],e);return i}function v(t,e){var n="";if(c(t)>0)for(var r in t)if(!l(t,r)&&(""==e||f(t,r,p(e,r)))){var i=t[r],a=d(i);null==i||null==i?n+=s(i,r,a,!0):i instanceof Object?i instanceof Array?n+=g(i,r,a,e):i instanceof Date?(n+=s(i,r,a,!1),n+=i.toISOString(),n+=u(i,r)):c(i)>0||null!=i.__text||null!=i.__cdata?(n+=s(i,r,a,!1),n+=v(i,p(e,r)),n+=u(i,r)):n+=s(i,r,a,!0):(n+=s(i,r,a,!1),n+=h(i),n+=u(i,r))}return n+h(t)}void 0===(t=t||{}).escapeMode&&(t.escapeMode=!0),void 0===t.attributePrefix&&(t.attributePrefix="_"),t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1),t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1),void 0===t.ignoreRoot&&(t.ignoreRoot=!1),this.parseXmlString=function(t){var e;if(window.ActiveXObject||window,void 0===t)return null;if(window.DOMParser){var n=new window.DOMParser;try{(e=n.parseFromString(t,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(e=null)}catch(r){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?a(t):t},this.xml2json=function(n){return function n(s,u){if(9==s.nodeType){for(var l=new Object,c=s.childNodes,f=0;f<c.length;f++)1==(h=c[f]).nodeType&&(t.ignoreRoot?l=n(h):(l={})[p=e(h)]=n(h));return l}if(1==s.nodeType){(l=new Object).__cnt=0;var d=[];for(c=s.childNodes,f=0;f<c.length;f++){var h,p=e(h=c[f]);if(8!=h.nodeType){var g=u+"."+p;if(o(l,h.nodeType,p,g))if(l.__cnt++,null==l[p]){var v=n(h,g);("#text"!=p||/[^\s]/.test(v))&&((m={})[p]=v,d.push(m)),l[p]=v,i(l,p,g)}else{var m;null!=l[p]&&(l[p]instanceof Array||(l[p]=[l[p]],i(l,p,g))),v=n(h,g),("#text"!=p||/[^\s]/.test(v))&&((m={})[p]=v,d.push(m)),l[p][l[p].length]=v}}}l.__children=d;for(var y=e(s),_=0;_<s.attributes.length;_++){var b=s.attributes[_];l.__cnt++;for(var E=b.value,T=0,S=t.matchers.length;T<S;T++){var w=t.matchers[T];w.test(b,y)&&(E=w.converter(b.value))}l[t.attributePrefix+b.name]=E}var A=function(t){return t.prefix}(s);return null!=A&&""!=A&&(l.__cnt++,l.__prefix=A),null!=l["#text"]&&(l.__text=l["#text"],l.__text instanceof Array&&(l.__text=l.__text.join("\n")),t.stripWhitespaces&&(l.__text=l.__text.trim()),delete l["#text"],"property"==t.arrayAccessForm&&delete l["#text_asArray"],l.__text=function(e,n,i){if(t.datetimeAccessFormPaths.length>0){var o=i.split(".#")[0];return r(t.datetimeAccessFormPaths,e,n,o)?a(e):e}return e}(l.__text,p,u+"."+p)),null!=l["#cdata-section"]&&(l.__cdata=l["#cdata-section"],delete l["#cdata-section"],"property"==t.arrayAccessForm&&delete l["#cdata-section_asArray"]),0==l.__cnt&&"text"==t.emptyNodeForm?l="":1==l.__cnt&&null!=l.__text?l=l.__text:1!=l.__cnt||null==l.__cdata||t.keepCData?l.__cnt>1&&null!=l.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==l.__text||""==l.__text.trim())&&delete l.__text:l=l.__cdata,delete l.__cnt,!t.enableToStringFunc||null==l.__text&&null==l.__cdata||(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),l}if(3==s.nodeType||4==s.nodeType)return s.nodeValue}(n)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return v(t,"")},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(t,e,n){"use strict";n.r(e);var r=n("./index_mediaplayerOnly.js");n.d(e,"MediaPlayer",(function(){return r.MediaPlayer}));var i=n("./src/streaming/utils/Capabilities.js");n.d(e,"supportsMediaSource",(function(){return i.supportsMediaSource}));var a=n("./src/streaming/metrics/MetricsReporting.js");n.d(e,"MetricsReporting",(function(){return a.default}));var o=n("./src/streaming/protection/Protection.js");n.d(e,"Protection",(function(){return o.default}));var s=n("./src/streaming/MediaPlayerFactory.js");n.d(e,"MediaPlayerFactory",(function(){return s.default}));var u=n("./src/core/Debug.js");n.d(e,"Debug",(function(){return u.default})),dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=u.default,dashjs.supportsMediaSource=i.supportsMediaSource,e.default=dashjs},"./index_mediaplayerOnly.js":function(t,e,n){"use strict";n.r(e),(function(t){var r=n("./src/streaming/MediaPlayer.js");n.d(e,"MediaPlayer",(function(){return r.default}));var i=n("./src/core/FactoryMaker.js");n.d(e,"FactoryMaker",(function(){return i.default}));var a=n("./src/core/Debug.js");n.d(e,"Debug",(function(){return a.default}));var o=n("./src/core/Version.js"),s=(n("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||t),u=s.dashjs;u||(u=s.dashjs={}),u.MediaPlayer=r.default,u.FactoryMaker=i.default,u.Debug=a.default,u.Version=Object(o.getVersionString)(),e.default=u}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],o=n[1],s=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,o)),u=0,c=o>0?r-4:r,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===o&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,s[u++]=255&e),1===o&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));return 1===i?a.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&a.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a=[],o=e;o<n;o+=3)a.push(r[(i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(t,e,n){var r={parseBuffer:function(t){return new i(t).parse()},addBoxProcessor:function(t,e){"string"==typeof t&&"function"==typeof e&&(a.prototype._boxProcessors[t]=e)},createFile:function(){return new i},createBox:function(t,e,n){var r=a.create(t);return e&&e.append(r,n),r},createFullBox:function(t,e,n){var i=r.createBox(t,e,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(t,e){var n=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(t);var r=[],i=0;if("utf-8"===n)for(;i<t.byteLength;){var a=t.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&t.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&t.getUint8(i++))<<6,a|=63&t.getUint8(i++)):(a=(7&a)<<18,a|=(63&t.getUint8(i++))<<12,a|=(63&t.getUint8(i++))<<6,a|=63&t.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<t.byteLength;)r.push(String.fromCharCode(t.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(t){var e,n;if("undefined"!=typeof TextEncoder)e=(new TextEncoder).encode(t);else for(e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e},r.Utils.appendBox=function(t,e,n){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void t.boxes.push(e);r=n.type}for(var a=0;a<t.boxes.length;a++)if(r===t.boxes[a].type){i=a+1;break}}t.boxes.splice(i,0,e)}else t.boxes.push(e)},e.parseBuffer=r.parseBuffer,e.addBoxProcessor=r.addBoxProcessor,e.createFile=r.createFile,e.createBox=r.createBox,e.createFullBox=r.createFullBox,e.Utils=r.Utils,r.Cursor=function(t){this.offset=void 0===t?0:t};var i=function(t){this._cursor=new r.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};i.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},i.prototype.fetchAll=function(t,e){var n=[];return i._sweep.call(this,t,n,e),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=a.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},i._sweep=function(t,e,n){for(var r in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&n)return;i._sweep.call(this.boxes[r],t,e,n)}},i.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},i.prototype.append=function(t,e){r.Utils.appendBox(this,t,e)};var a=function(){this._cursor=new r.Cursor};a.parse=function(t){var e=new a;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},a.create=function(t){var e=new a;return e.type=t,e.boxes=[],e},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(t,e,n){this._parsing?this[t]=this._readField(e,n):this._writeField(e,n,this[t])},a.prototype._procFieldArray=function(t,e,n,r){var i;if(this._parsing)for(this[t]=[],i=0;i<e;i++)this[t][i]=this._readField(n,r);else for(i=0;i<this[t].length;i++)this._writeField(n,r,this[t][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(t,e,n){var r;if(this._parsing)for(this[t]=[],r=0;r<e;r++)this[t].push({}),n.call(this,this[t][r]);else for(r=0;r<e;r++)n.call(this,this[t][r])},a.prototype._procSubEntries=function(t,e,n,r){var i;if(this._parsing)for(t[e]=[],i=0;i<n;i++)t[e].push({}),r.call(this,t[e][i]);else for(i=0;i<n;i++)r.call(this,t[e][i])},a.prototype._procEntryField=function(t,e,n,r){this._parsing?t[e]=this._readField(n,r):this._writeField(n,r,t[e])},a.prototype._procSubBoxes=function(t,e){var n;if(this._parsing)for(this[t]=[],n=0;n<e;n++)this[t].push(a.parse(this));else for(n=0;n<e;n++)this._rawo?this[t][n].write():this.size+=this[t][n].getLength()},a.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return-1===e?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(t){var e=null,n=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(n);break;case 16:e=this._raw.getInt16(n);break;case 32:e=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);e=r*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,e},a.prototype._readUint=function(t){var e,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((e=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:e=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=e*Math.pow(2,32)+n}return this._cursor.offset+=t>>3,r},a.prototype._readString=function(t){for(var e="",n=0;n<t;n++){var r=this._readUint(8);e+=String.fromCharCode(r)}return e},a.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},a.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(0===e)break;t+=String.fromCharCode(e)}return t},a.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,n}return null},a.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e?r.Utils.dataViewToString(e):e},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(t,e){r.Utils.appendBox(this,t,e)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(t,e){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(n,e);break;case 16:this._rawo.setInt16(n,e);break;case 32:this._rawo.setInt32(n,e);break;case 64:var r=Math.floor(e/Math.pow(2,32)),i=e-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=t>>3}else this.size+=t>>3},a.prototype._writeUint=function(t,e){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(i,e);break;case 16:this._rawo.setUint16(i,e);break;case 24:r=255&e,this._rawo.setUint16(i,n=(16776960&e)>>8),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,e);break;case 64:r=e-(n=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=t>>3}else this.size+=t>>3},a.prototype._writeString=function(t,e){for(var n=0;n<t;n++)this._writeUint(8,e.charCodeAt(n))},a.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},a.prototype._writeTemplate=function(t,e){var n=Math.floor(e),r=(e-n)*Math.pow(2,t/2);this._writeUint(t/2,n),this._writeUint(t/2,r)},a.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,n=0;n<t.length;n++)this._rawo.setInt8(e+n,t[n]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},a.prototype._writeUTF8String=function(t){var e=r.Utils.utf8ToByteArray(t);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,e.length),i=0;i<e.length;i++)n.setUint8(i,e[i]);else this.size+=e.length},a.prototype._writeField=function(t,e,n){switch(t){case"uint":this._writeUint(e,n);break;case"int":this._writeInt(e,n);break;case"template":this._writeTemplate(e,n);break;case"string":-1==e?this._writeTerminatedString(n):this._writeString(e,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,(function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,(function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(t,e,n){"use strict";t.exports=n("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(t,e,n){(function(e,n){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=void 0,o=void 0,s=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(o?o(g):b())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<i;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;i=0}var v,m,y,_,b=void 0;function E(t,e){var n=this,r=new this.constructor(w);void 0===r[S]&&M(r);var i=n._state;if(i){var a=arguments[i-1];s((function(){return O(i,r,a,n._result)}))}else R(n,r,t,e);return r}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return x(e,t),e}f?b=function(){return e.nextTick(g)}:c?(m=0,y=new c(g),_=document.createTextNode(""),y.observe(_,{characterData:!0}),b=function(){_.data=m=++m%2}):d?((v=new MessageChannel).port1.onmessage=g,b=function(){return v.port2.postMessage(0)}):b=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(a=t.runOnLoop||t.runOnContext)?function(){a(g)}:h()}catch(e){return h()}}():h();var S=Math.random().toString(36).substring(2);function w(){}function A(e,n,r){n.constructor===e.constructor&&r===E&&n.constructor.resolve===T?function(t,e){1===e._state?D(t,e._result):2===e._state?I(t,e._result):R(e,void 0,(function(e){return x(t,e)}),(function(e){return I(t,e)}))}(e,n):void 0===r?D(e,n):t(r)?function(t,e,n){s((function(t){var r=!1,i=function(n,i,a,o){try{n.call(i,(function(n){r||(r=!0,e!==n?x(t,n):D(t,n))}),(function(e){r||(r=!0,I(t,e))}))}catch(s){return s}}(n,e);!r&&i&&(r=!0,I(t,i))}),t)}(e,n,r):D(e,n)}function x(t,e){if(t===e)I(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=e),null===r||"object"!==i&&"function"!==i)D(t,e);else{var n=void 0;try{n=e.then}catch(a){return void I(t,a)}A(t,e,n)}var r,i}function C(t){t._onerror&&t._onerror(t._result),k(t)}function D(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(k,t))}function I(t,e){void 0===t._state&&(t._state=2,t._result=e,s(C,t))}function R(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+1]=n,i[a+2]=r,0===a&&t._state&&s(k,t)}function k(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)i=e[o+n],(r=e[o])?O(n,r,i,a):i(a);t._subscribers.length=0}}function O(e,n,r,i){var a=t(r),o=void 0,s=void 0,u=!0;if(a){try{o=r(i)}catch(l){u=!1,s=l}if(n===o)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else o=i;void 0!==n._state||(a&&u?x(n,o):!1===u?I(n,s):1===e?D(n,o):2===e&&I(n,o))}var P=0;function M(t){t[S]=P++,t._state=void 0,t._result=void 0,t._subscribers=[]}var L=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[S]||M(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&D(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===T){var i=void 0,a=void 0,o=!1;try{i=t.then}catch(u){o=!0,a=u}if(i===E&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===N){var s=new n(w);o?I(s,a):A(s,t,i),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?I(r,n):this._result[e]=n),0===this._remaining&&D(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;R(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[S]=P++,this._result=this._state=void 0,this._subscribers=[],w!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){x(t,e)}),(function(e){I(t,e)}))}catch(n){I(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return N.prototype.then=E,N.all=function(t){return new L(this,t).promise},N.race=function(t){var e=this;return r(t)?new e((function(n,r){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=T,N.reject=function(t){var e=new this(w);return I(e,t),e},N._setScheduler=function(t){o=t},N._setAsap=function(t){s=t},N._asap=s,N.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(i){}if("[object Promise]"===r&&!e.cast)return}t.Promise=N},N.Promise=N,N}()}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var o,s,u,l=r(e),c=r(n);if(l&&c){if((s=e.length)!=n.length)return!1;for(o=s;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(l!=c)return!1;var f=e instanceof Date,d=n instanceof Date;if(f!=d)return!1;if(f&&d)return e.getTime()==n.getTime();var h=e instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return e.toString()==n.toString();var g=i(e);if((s=g.length)!==i(n).length)return!1;for(o=s;0!=o--;)if(!a.call(n,g[o]))return!1;for(o=s;0!=o--;)if(!t(e[u=g[o]],n[u]))return!1;return!0}return e!=e&&n!=n}},"./node_modules/ieee754/index.js":function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+t[e+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+h]=255&o,h+=p,o/=256,l-=8);t[n+h-p]|=128*g}},"./node_modules/imsc/src/main/js/doc.js":function(t,e,n){!function(t,e,n,r,i){function a(t,e,n,r){var i=r&&"seq"===r.timeContainer,o=0;r&&(o=i&&n?n.end:r.begin),e.begin=e.explicit_begin?e.explicit_begin+o:o;var s=e.begin,u=null;for(var l in e.sets)a(t,e.sets[l],u,e),s="seq"===e.timeContainer?e.sets[l].end:Math.max(s,e.sets[l].end),u=e.sets[l];if("contents"in e)for(var c in e.contents)a(t,e.contents[c],u,e),s="seq"===e.timeContainer?e.contents[c].end:Math.max(s,e.contents[c].end),u=e.contents[c];else s=i?e.begin:Number.POSITIVE_INFINITY;e.end=null!==e.explicit_end&&null!==e.explicit_dur?Math.min(e.begin+e.explicit_dur,o+e.explicit_end):null===e.explicit_end&&null!==e.explicit_dur?e.begin+e.explicit_dur:null!==e.explicit_end&&null===e.explicit_dur?o+e.explicit_end:s,delete e.explicit_begin,delete e.explicit_dur,delete e.explicit_end,t._registerEvent(e)}function o(t){this.node=t}function s(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function l(){this.styles={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function f(){this.regions={}}function d(t){this.kind=t}function h(t){this.id=t}function p(t){this.regionID=t}function g(t){this.styleAttrs=t}function v(t){this.sets=t}function m(t){this.contents=t}function y(t,e,n){this.explicit_begin=t,this.explicit_end=e,this.explicit_dur=n}function _(){d.call(this,"body")}function b(){d.call(this,"div")}function E(){d.call(this,"p")}function T(){d.call(this,"span")}function S(){d.call(this,"span")}function w(){d.call(this,"br")}function A(){}function x(){}function C(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function D(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function I(t,e){var n={};if(null!==t)for(var i in t.attributes){var a=t.attributes[i].uri+" "+t.attributes[i].local,o=r.byQName[a];if(void 0!==o){var s=o.parse(t.attributes[i].value);null!==s?(n[a]=s,o===r.byName.zIndex&&L(e,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):N(e,"Cannot parse styling attribute "+a+" --\x3e "+t.attributes[i].value)}}return n}function R(t,e,n){for(var r in t.attributes)if(t.attributes[r].uri===e&&t.attributes[r].local===n)return t.attributes[r].value;return null}function k(t,e,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==e&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/e)),i}function O(t,e,n){for(;e.styleRefs.length>0;){var r=e.styleRefs.pop();r in t.styles?(O(t,t.styles[r],n),M(t.styles[r].styleAttrs,e.styleAttrs)):N(n,"Non-existant style id referenced")}}function P(t,e,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a in t.styles?M(t.styles[a].styleAttrs,n):N(r,"Non-existant style id referenced")}}function M(t,e){for(var n in t)n in e||(e[n]=t[n])}function L(t,e){if(t&&t.warn&&t.warn(e))throw e}function N(t,e){if(t&&t.error&&t.error(e))throw e}function F(t,e){throw t&&t.fatal&&t.fatal(e),e}function j(t,e){for(var n,r=0,i=t.length-1;r<=i;){var a=t[n=Math.floor((r+i)/2)];if(a<e)r=n+1;else{if(!(a>e))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}t.fromXML=function(t,r,i){var d=e.parser(!0,{xmlns:!0}),h=[],p=[],g=[],v=0,m=null;d.onclosetag=function(t){if(h[0]instanceof l)for(var e in h[0].styles)O(h[0],h[0].styles[e],r);else if(h[0]instanceof E||h[0]instanceof T){if(h[0].contents.length>1){var a,s=[h[0].contents[0]];for(a=1;a<h[0].contents.length;a++)h[0].contents[a]instanceof S&&s[s.length-1]instanceof S?s[s.length-1].text+=h[0].contents[a].text:s.push(h[0].contents[a]);h[0].contents=s}h[0]instanceof T&&1===h[0].contents.length&&h[0].contents[0]instanceof S&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else h[0]instanceof o&&(h[0].node.uri===n.ns_tt&&"metadata"===h[0].node.local?v--:v>0&&i&&"onCloseTag"in i&&i.onCloseTag());g.shift(),p.shift(),h.shift()},d.ontext=function(t){if(void 0===h[0]);else if(h[0]instanceof T||h[0]instanceof E){var e=new S;e.initFromText(m,h[0],t,g[0],r),h[0].contents.push(e)}else h[0]instanceof o&&v>0&&i&&"onText"in i&&i.onText(t)},d.onopentag=function(t){var e=t.attributes["xml:space"];g.unshift(e?e.value:0===g.length?"default":g[0]);var a=t.attributes["xml:lang"];if(p.unshift(a?a.value:0===p.length?"":p[0]),t.uri===n.ns_tt)if("tt"===t.local)null!==m&&F(r,"Two <tt> elements at ("+this.line+","+this.column+")"),(m=new s).initFromNode(t,r),h.unshift(m);else if("head"===t.local)h[0]instanceof s||F(r,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==m.head&&F("Second <head> element at ("+this.line+","+this.column+")"),m.head=new u,h.unshift(m.head);else if("styling"===t.local)h[0]instanceof u||F(r,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==m.head.styling&&F("Second <styling> element at ("+this.line+","+this.column+")"),m.head.styling=new l,h.unshift(m.head.styling);else if("style"===t.local){var d;h[0]instanceof l?((d=new c).initFromNode(t,r),d.id?m.head.styling.styles[d.id]=d:N(r,"<style> element missing @id attribute"),h.unshift(d)):h[0]instanceof A?((d=new c).initFromNode(t,r),M(d.styleAttrs,h[0].styleAttrs),h.unshift(d)):F(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===t.local)h[0]instanceof u||F(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==m.head.layout&&F(r,"Second <layout> element at "+this.line+","+this.column+")"),m.head.layout=new f,h.unshift(m.head.layout);else if("region"===t.local){h[0]instanceof f||F(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var y=new A;y.initFromNode(m,t,r),!y.id||y.id in m.head.layout.regions?N(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):m.head.layout.regions[y.id]=y,h.unshift(y)}else if("body"===t.local){h[0]instanceof s||F(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==m.body&&F(r,"Second <body> element at "+this.line+","+this.column+")");var S=new _;S.initFromNode(m,t,r),m.body=S,h.unshift(S)}else if("div"===t.local){h[0]instanceof b||h[0]instanceof _||F(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var C=new b;C.initFromNode(m,h[0],t,r),h[0].contents.push(C),h.unshift(C)}else if("p"===t.local){h[0]instanceof b||F(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var D=new E;D.initFromNode(m,h[0],t,r),h[0].contents.push(D),h.unshift(D)}else if("span"===t.local){h[0]instanceof T||h[0]instanceof E||F(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var I=new T;I.initFromNode(m,h[0],t,g[0],r),h[0].contents.push(I),h.unshift(I)}else if("br"===t.local){h[0]instanceof T||h[0]instanceof E||F(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var R=new w;R.initFromNode(m,h[0],t,r),h[0].contents.push(R),h.unshift(R)}else if("set"===t.local){h[0]instanceof T||h[0]instanceof E||h[0]instanceof b||h[0]instanceof _||h[0]instanceof A||h[0]instanceof w||F(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var k=new x;k.initFromNode(m,h[0],t,r),h[0].sets.push(k),h.unshift(k)}else h.unshift(new o(t));else h.unshift(new o(t));if(h[0]instanceof o)if(t.uri===n.ns_tt&&"metadata"===t.local)v++;else if(v>0&&i&&"onOpenTag"in i){var O=[];for(var P in t.attributes)O[t.attributes[P].uri+" "+t.attributes[P].local]={uri:t.attributes[P].uri,local:t.attributes[P].local,value:t.attributes[P].value};i.onOpenTag(t.uri,t.local,O)}},d.write(t).close(),null!==m.head?delete m.head.styling:m.head=new u,null===m.head.layout&&(m.head.layout=new f);var y=!1;for(var C in m.head.layout.regions){y=!0;break}if(!y){var D=A.prototype.createDefaultRegion();m.head.layout.regions[D.id]=D}for(var I in m.head.layout.regions)a(m,m.head.layout.regions[I],null,null);return m.body&&a(m,m.body,null,null),m},s.prototype.initFromNode=function(t,e){this.cellResolution=function(t,e){var r=R(t,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var o=/(\d+) (\d+)/.exec(r);null!==o?(a=parseInt(o[1]),i=parseInt(o[2])):L(e,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(t,e);var r=function(t,e){var r,i=R(t,n.ns_ttp,"frameRate"),a=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):L(e,"Malformed frame rate attribute (using initial value instead)"));var o=R(t,n.ns_ttp,"frameRateMultiplier"),s=1;null!==o&&(null!==(r=/(\d+) (\d+)/.exec(o))?s=parseInt(r[1])/parseInt(r[2]):L(e,"Malformed frame rate multiplier attribute (using initial value instead)"));var u=s*a,l=1,c=R(t,n.ns_ttp,"tickRate");return null===c?null!==i&&(l=u):null!==(r=/(\d+)/.exec(c))?l=parseInt(r[1]):L(e,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:u,tickRate:l}}(t,e);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=function(t,e){var r=R(t,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var a=/(\d+) (\d+)/.exec(r);if(null!==a){var o=parseInt(a[1]),s=parseInt(a[2]);0!==o&&0!==s?i=o/s:N(e,"Illegal aspectRatio values (ignoring)")}else N(e,"Malformed aspectRatio attribute (ignoring)")}return i}(t,e);var a=R(t,n.ns_ttp,"timeBase");null!==a&&"media"!==a&&F(e,"Unsupported time base");var o=function(t,e){var r=R(t,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return L(e,"Malformed extent (ignoring)"),null;var o=i.parseLength(a[0]),s=i.parseLength(a[1]);return s&&o?{h:s,w:o}:(L(e,"Malformed extent values (ignoring)"),null)}(t,e);null===o?this.pxDimensions={h:480,w:640}:("px"===o.h.unit&&"px"===o.w.unit||F(e,"Extent on TT must be in px or absent"),this.pxDimensions={h:o.h.value,w:o.w.value})},s.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var e=j(this.events,t.begin);if(e.found||this.events.splice(e.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var n=j(this.events,t.end);n.found||this.events.splice(n.index,0,t.end)}}},s.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},s.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(t,e){this.id=C(t),this.styleAttrs=I(t,e),this.styleRefs=D(t)},h.prototype.initFromNode=function(t,e,n,r){this.id=C(n)},p.prototype.initFromNode=function(t,e,n,r){this.regionID=function(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(n)},g.prototype.initFromNode=function(t,e,n,r){this.styleAttrs=I(n,r),null!==t.head&&null!==t.head.styling&&P(t.head.styling,D(n),this.styleAttrs,r)},v.prototype.initFromNode=function(t,e,n,r){this.sets=[]},m.prototype.initFromNode=function(t,e,n,r){this.contents=[]},y.prototype.initFromNode=function(t,e,n,r){var i=function(t,e,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=k(t.tickRate,t.effectiveFrameRate,n.attributes.begin.value))&&L(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=k(t.tickRate,t.effectiveFrameRate,n.attributes.dur.value))&&L(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var o=null;return n&&"end"in n.attributes&&null===(o=k(t.tickRate,t.effectiveFrameRate,n.attributes.end.value))&&L(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:o,explicit_dur:a}}(t,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(t,e){var n=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(N(e,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},_.prototype.initFromNode=function(t,e,n){g.prototype.initFromNode.call(this,t,null,e,n),y.prototype.initFromNode.call(this,t,null,e,n),v.prototype.initFromNode.call(this,t,null,e,n),p.prototype.initFromNode.call(this,t,null,e,n),m.prototype.initFromNode.call(this,t,null,e,n)},b.prototype.initFromNode=function(t,e,n,r){g.prototype.initFromNode.call(this,t,e,n,r),y.prototype.initFromNode.call(this,t,e,n,r),v.prototype.initFromNode.call(this,t,e,n,r),p.prototype.initFromNode.call(this,t,e,n,r),m.prototype.initFromNode.call(this,t,e,n,r)},E.prototype.initFromNode=function(t,e,n,r){g.prototype.initFromNode.call(this,t,e,n,r),y.prototype.initFromNode.call(this,t,e,n,r),v.prototype.initFromNode.call(this,t,e,n,r),p.prototype.initFromNode.call(this,t,e,n,r),m.prototype.initFromNode.call(this,t,e,n,r)},T.prototype.initFromNode=function(t,e,n,r,i){g.prototype.initFromNode.call(this,t,e,n,i),y.prototype.initFromNode.call(this,t,e,n,i),v.prototype.initFromNode.call(this,t,e,n,i),p.prototype.initFromNode.call(this,t,e,n,i),m.prototype.initFromNode.call(this,t,e,n,i),this.space=r},S.prototype.initFromText=function(t,e,n,r,i){y.prototype.initFromNode.call(this,t,e,null,i),this.text=n,this.space=r},w.prototype.initFromNode=function(t,e,n,r){p.prototype.initFromNode.call(this,t,e,n,r),y.prototype.initFromNode.call(this,t,e,n,r)},A.prototype.createDefaultRegion=function(){var t=new A;return h.call(t,""),g.call(t,{}),v.call(t,[]),y.call(t,0,Number.POSITIVE_INFINITY,null),t},A.prototype.initFromNode=function(t,e,n){h.prototype.initFromNode.call(this,t,null,e,n),g.prototype.initFromNode.call(this,t,null,e,n),y.prototype.initFromNode.call(this,t,null,e,n),v.prototype.initFromNode.call(this,t,null,e,n),null!==t.head&&null!==t.head.styling&&P(t.head.styling,D(e),this.styleAttrs,n)},x.prototype.initFromNode=function(t,e,n,r){y.prototype.initFromNode.call(this,t,e,n,r);var i=I(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){N(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(e,"undefined"==typeof sax?n("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(t,e,n){!function(t,e,n){function r(t,e,s){var l;if("region"===s.kind?(l=document.createElement("div")).style.position="absolute":"body"===s.kind||"div"===s.kind?l=document.createElement("div"):"p"===s.kind?l=document.createElement("p"):"span"===s.kind?l=document.createElement("span"):"br"===s.kind&&(l=document.createElement("br")),l){for(var c in l.style.margin="0",u){var f=u[c],d=s.styleAttrs[f.qname];void 0!==d&&null!==f.map&&f.map(t,l,s,d)}var h=l;if("region"===s.kind){var p=s.styleAttrs[n.byName.writingMode.qname];"lrtb"===p||"lr"===p?(t.ipd="lr",t.bpd="tb"):"rltb"===p||"rl"===p?(t.ipd="rl",t.bpd="tb"):"tblr"===p?(t.ipd="tb",t.bpd="lr"):"tbrl"!==p&&"tb"!==p||(t.ipd="tb",t.bpd="rl")}var g=s.styleAttrs[n.byName.linePadding.qname];if(g&&g>0){var v=Math.ceil(g*t.h)+"px";"tb"===t.bpd?(h.style.paddingLeft=v,h.style.paddingRight=v):(h.style.paddingTop=v,h.style.paddingBottom=v),t.lp=g}var m=s.styleAttrs[n.byName.multiRowAlign.qname];if(m&&"auto"!==m){var y=document.createElement("span");y.style.display="inline-block",y.style.textAlign=m,l.appendChild(y),h=y,t.mra=m}if(s.styleAttrs[n.byName.fillLineGap.qname]&&(t.flg=!0),"span"===s.kind&&s.text)if(t.lp||t.mra||t.flg)for(var _="",b=0;b<s.text.length;b++){_+=s.text.charAt(b);var E=s.text.charCodeAt(b);if(E<55296||E>56319||b===s.text.length){var T=document.createElement("span");T.textContent=_,l.appendChild(T),_=""}}else l.textContent=s.text;for(var S in e.appendChild(l),s.contents)r(t,h,s.contents[S]);var w=[];if((t.lp||t.mra||t.flg)&&"p"===s.kind&&(o(t,h,w,null),t.mra&&(function(t){for(var e=0;e<t.length-1;e++){var n=t[e].elements.length;if(0!==n&&!1===t[e].br){var r=document.createElement("br"),i=t[e].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(w),t.mra=null),t.lp&&(function(t,e,n){for(var r in t){var i=t[r].elements.length,a=t[r].elements[t[r].start_elem],o=t[r].elements[t[r].end_elem],s=Math.ceil(e)+"px",u="-"+Math.ceil(e)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u))}}(w,t.lp*t.h,t),t.lp=null),t.flg)){var A=a(h.getBoundingClientRect(),t);!function(t,e,n,r){for(var i=Math.sign(n-e),a=0;a<=t.length;a++){var o,s,u;if(o=0===a?e:a===t.length?n:(t[a].before+t[a-1].after)/2,a>0)for(var l=0;l<t[a-1].elements.length;l++)null!==t[a-1].elements[l].bgcolor&&i*((u=t[a-1].elements[l]).after-o)<0&&(s=Math.ceil(Math.abs(o-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s));if(a<t.length)for(var c=0;c<t[a].elements.length;c++)null!==(u=t[a].elements[c]).bgcolor&&i*(u.before-o)>0&&(s=Math.ceil(Math.abs(u.before-o))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s))}}(w,A.before,A.after,t),t.flg=null}if("region"===s.kind&&(o(t,h,w),"tb"===t.bpd&&t.enableRollUp&&s.contents.length>0&&"after"===s.styleAttrs[n.byName.displayAlign.qname])){var x=new i(""===s.id?"_":s.id,w);if(t.currentISDState[x.id]=x,t.previousISDState&&x.id in t.previousISDState&&t.previousISDState[x.id].plist.length>0&&x.plist.length>1&&x.plist[x.plist.length-2].text===t.previousISDState[x.id].plist[t.previousISDState[x.id].plist.length-1].text){var C=l.firstElementChild,D=x.plist[x.plist.length-1].after-x.plist[x.plist.length-1].before;C.style.bottom="-"+D+"px",C.style.transition="transform 0.4s",C.style.position="relative",C.style.transform="translateY(-"+D+"px)"}}}else!function(t,e){if(t&&t.error&&t.error(e))throw e}(t.errorHandler,"Error processing ISD element kind: "+s.kind)}function i(t,e){this.id=t,this.plist=e}function a(t,e){var n={before:null,after:null,start:null,end:null};return"tb"===e.bpd?(n.before=t.top,n.after=t.bottom,"lr"===e.ipd?(n.start=t.left,n.end=t.right):(n.start=t.right,n.end=t.left)):"lr"===e.bpd?(n.before=t.left,n.after=t.right,n.start=t.top,n.end=t.bottom):"rl"===e.bpd&&(n.before=t.right,n.after=t.left,n.start=t.top,n.end=t.bottom),n}function o(t,e,n,r){var i,s,u,l,c=e.style.backgroundColor||r;if(0===e.childElementCount)if("span"===e.localName){var f=e.getBoundingClientRect();if(0===f.height||0===f.width)return;var d=a(f,t);if(0!==n.length&&(i=d.before,u=n[n.length-1].before,(s=d.after)<(l=n[n.length-1].after)&&i>u||l<=s&&u>=i)){var h=Math.sign(d.after-d.before),p=Math.sign(d.end-d.start);h*(d.before-n[n.length-1].before)<0&&(n[n.length-1].before=d.before),h*(d.after-n[n.length-1].after)>0&&(n[n.length-1].after=d.after),p*(d.start-n[n.length-1].start)<0&&(n[n.length-1].start=d.start,n[n.length-1].start_elem=n[n.length-1].elements.length),p*(d.end-n[n.length-1].end)>0&&(n[n.length-1].end=d.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:d.before,after:d.after,start:d.start,end:d.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});n[n.length-1].text+=e.textContent,n[n.length-1].elements.push({node:e,bgcolor:c,before:d.before,after:d.after})}else"br"===e.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var g=e.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&o(t,g,n,c),g=g.nextSibling}function s(t,e){this.qname=t,this.map=e}t.render=function(t,e,n,i,a,o,s,u,l){var c=i||e.clientHeight,f=a||e.clientWidth;if(null!==t.aspectRatio){var d=c*t.aspectRatio;d>f?c=Math.round(f/t.aspectRatio):f=d}var h=document.createElement("div");h.style.position="relative",h.style.width=f+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:f,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:t,errorHandler:s,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var g in e.appendChild(h),t.contents)r(p,h,t.contents[g]);return p.currentISDState};var u=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",(function(t,e,n,r){0!==r[3]&&(e.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new s("http://www.w3.org/ns/ttml#styling color",(function(t,e,n,r){e.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new s("http://www.w3.org/ns/ttml#styling direction",(function(t,e,n,r){e.style.direction=r})),new s("http://www.w3.org/ns/ttml#styling display",(function(t,e,n,r){})),new s("http://www.w3.org/ns/ttml#styling displayAlign",(function(t,e,n,r){e.style.display="flex",e.style.flexDirection="column","before"===r?e.style.justifyContent="flex-start":"center"===r?e.style.justifyContent="center":"after"===r&&(e.style.justifyContent="flex-end")})),new s("http://www.w3.org/ns/ttml#styling extent",(function(t,e,n,r){t.regionH=r.h*t.h,t.regionW=r.w*t.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*t.h,a=(o[1]+o[3])*t.w),e.style.height=t.regionH-i+"px",e.style.width=t.regionW-a+"px"})),new s("http://www.w3.org/ns/ttml#styling fontFamily",(function(t,e,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):i.push("proportionalSerif"===r[a]?"serif":r[a]);e.style.fontFamily=i.join(",")})),new s("http://www.w3.org/ns/ttml#styling fontSize",(function(t,e,n,r){e.style.fontSize=r*t.h+"px"})),new s("http://www.w3.org/ns/ttml#styling fontStyle",(function(t,e,n,r){e.style.fontStyle=r})),new s("http://www.w3.org/ns/ttml#styling fontWeight",(function(t,e,n,r){e.style.fontWeight=r})),new s("http://www.w3.org/ns/ttml#styling lineHeight",(function(t,e,n,r){e.style.lineHeight="normal"===r?"normal":r*t.h+"px"})),new s("http://www.w3.org/ns/ttml#styling opacity",(function(t,e,n,r){e.style.opacity=r})),new s("http://www.w3.org/ns/ttml#styling origin",(function(t,e,n,r){e.style.top=r.h*t.h+"px",e.style.left=r.w*t.w+"px"})),new s("http://www.w3.org/ns/ttml#styling overflow",(function(t,e,n,r){e.style.overflow=r})),new s("http://www.w3.org/ns/ttml#styling padding",(function(t,e,n,r){var i=[];i[0]=r[0]*t.h+"px",i[1]=r[3]*t.w+"px",i[2]=r[2]*t.h+"px",i[3]=r[1]*t.w+"px",e.style.padding=i.join(" ")})),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",(function(t,e,r,i){var a=r.styleAttrs[n.byName.direction.qname];e.style.textAlign="start"===i?"rtl"===a?"right":"left":"end"===i?"rtl"===a?"left":"right":i})),new s("http://www.w3.org/ns/ttml#styling textDecoration",(function(t,e,n,r){e.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new s("http://www.w3.org/ns/ttml#styling textOutline",(function(t,e,n,r){e.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*t.h+"px"})),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(t,e,n,r){e.style.unicodeBidi="bidiOverride"===r?"bidi-override":r})),new s("http://www.w3.org/ns/ttml#styling visibility",(function(t,e,n,r){e.style.visibility=r})),new s("http://www.w3.org/ns/ttml#styling wrapOption",(function(t,e,n,r){e.style.whiteSpace="wrap"===r?"preserve"===n.space?"pre-wrap":"normal":"preserve"===n.space?"pre":"noWrap"})),new s("http://www.w3.org/ns/ttml#styling writingMode",(function(t,e,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?e.style.writingMode="horizontal-tb":"tblr"===r?e.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(e.style.writingMode="vertical-rl")})),new s("http://www.w3.org/ns/ttml#styling zIndex",(function(t,e,n,r){e.style.zIndex=r})),new s("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(t,e,n,r){if(null!==t.imgResolver&&null!==r){var i=document.createElement("img"),a=t.imgResolver(r,i);a&&(i.src=a),i.height=t.regionH,i.width=t.regionW,e.appendChild(i)}})),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(t,e,n,r){t.displayForcedOnlyMode&&!1===r&&(e.style.visibility="hidden")}))],l={};for(var c in u)l[u[c].qname]=u[c]}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(t,e,n){!function(t,e,n){function r(t,e,i,s,u,l,c,f,d){if(e<c.begin||e>=c.end)return null;var h="regionID"in c&&""!==c.regionID?c.regionID:l;if(null!==u&&h!==i.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==h))return null;var p=new a(c);for(var g in c.sets)e<c.sets[g].begin||e>=c.sets[g].end||(p.styleAttrs[c.sets[g].qname]=c.sets[g].value);var v,m={};for(var y in p.styleAttrs)if(m[y]=!0,y===n.byName.writingMode.qname&&!(n.byName.direction.qname in p.styleAttrs)){var _=p.styleAttrs[y];"lrtb"===_||"lr"===_?p.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==_&&"rl"!==_||(p.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==u)for(var b in n.all){var E=n.all[b];if(E.qname===n.byName.textDecoration.qname){var T=u.styleAttrs[E.qname],S=p.styleAttrs[E.qname],w=[];void 0===S?w=T:-1===S.indexOf("none")?((-1===S.indexOf("noUnderline")&&-1!==T.indexOf("underline")||-1!==S.indexOf("underline"))&&w.push("underline"),(-1===S.indexOf("noLineThrough")&&-1!==T.indexOf("lineThrough")||-1!==S.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===S.indexOf("noOverline")&&-1!==T.indexOf("overline")||-1!==S.indexOf("overline"))&&w.push("overline")):w.push("none"),p.styleAttrs[E.qname]=w}else E.inherit&&E.qname in u.styleAttrs&&!(E.qname in p.styleAttrs)&&(p.styleAttrs[E.qname]=u.styleAttrs[E.qname])}for(var A in n.all){var x=n.all[A];x.qname in p.styleAttrs||("region"===p.kind||!1===x.inherit&&null!==x.initial)&&(p.styleAttrs[x.qname]=x.parse(x.initial),m[x.qname]=!0)}for(var C in n.all){var D=n.all[C];if(D.qname in m&&null!==D.compute){var I=D.compute(t,u,p,p.styleAttrs[D.qname],d);null!==I?p.styleAttrs[D.qname]=I:o(f,"Style '"+D.qname+"' on element '"+p.kind+"' cannot be computed")}}if("none"===p.styleAttrs[n.byName.display.qname])return null;for(var R in null===u?v=null===s?[]:[s]:"contents"in c&&(v=c.contents),v){var k=r(t,e,i,s,p,h,v[R],f,d);null!==k&&p.contents.push(k.element)}for(var O in p.styleAttrs)-1===n.byQName[O].applies.indexOf(p.kind)&&delete p.styleAttrs[O];if("span"===p.kind&&p.text&&"default"===p.space){var P=p.text.replace(/\s+/g," ");p.text=P}if("p"===p.kind){var M=[];!function t(e,n){if("contents"in e)for(var r in e.contents)t(e.contents[r],n);else n.push(e)}(p,M);for(var L=0,N="after_br",F=0;;)if("after_br"===N)L>=M.length||"br"===M[L].kind?(N="before_br",F=L,L--):("preserve"!==M[L].space&&(M[L].text=M[L].text.replace(/^\s+/g,"")),M[L].text.length>0?(N="looking_br",L++):M.splice(L,1));else if("before_br"===N)if(L<0||"br"===M[L].kind){if(N="after_br",(L=F+1)>=M.length)break}else if("preserve"!==M[L].space&&(M[L].text=M[L].text.replace(/\s+$/g,"")),M[L].text.length>0){if(N="after_br",(L=F+1)>=M.length)break}else M.splice(L,1),L--;else L>=M.length||"br"===M[L].kind?(N="before_br",F=L,L--):L++;!function t(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var n=e.contents.length;n--;)t(e.contents[n])&&e.contents.splice(n,1);return 0===e.contents.length}}(p)}return"div"===p.kind&&n.byName.backgroundImage.qname in p.styleAttrs||"br"===p.kind||"contents"in p&&p.contents.length>0||"span"===p.kind&&null!==p.text||"region"===p.kind&&"always"===p.styleAttrs[n.byName.showBackground.qname]?{region_id:h,element:p}:null}function i(t){this.contents=[],this.aspectRatio=t.aspectRatio}function a(t){for(var e in this.kind=t.kind||"region",t.id&&(this.id=t.id),this.styleAttrs={},t.styleAttrs)this.styleAttrs[e]=t.styleAttrs[e];"text"in t?this.text=t.text:"br"!==t.kind&&(this.contents=[]),"space"in t&&(this.space=t.space)}function o(t,e){if(t&&t.error&&t.error(e))throw e}t.generateISD=function(t,e,n){var a=new i(t),o={};for(var s in t.head.layout.regions){var u=r(t,e,t.head.layout.regions[s],t.body,null,"",t.head.layout.regions[s],n,o);null!==u&&a.contents.push(u.element)}return a}}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(t,e,n){e.generateISD=n("./node_modules/imsc/src/main/js/isd.js").generateISD,e.fromXML=n("./node_modules/imsc/src/main/js/doc.js").fromXML,e.renderHTML=n("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(t,e,n){!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}(e)},"./node_modules/imsc/src/main/js/styles.js":function(t,e,n){!function(t,e,n){function r(t,e,n,r,i,a,o,s){this.name=e,this.ns=t,this.qname=t+" "+e,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var i in t.all=[new r(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(e.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(e.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"displayAlign","before",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,n,r,i){var a,o;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/t.pxDimensions.h}if("auto"===r)o=1;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/t.pxDimensions.w}return{h:a,w:o}})),new r(e.ns_tts,"fontFamily","default",["span"],!0,!0,(function(t){var e=t.split(","),n=[];for(var r in e)"'"!==e[r].charAt(0)&&'"'!==e[r].charAt(0)?n.push("default"===e[r]?"monospaceSerif":e[r]):n.push(e[r]);return n}),null),new r(e.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(e,n,r,i,a){var o;if("%"===i.unit)o=null!==n?n.styleAttrs[t.byName.fontSize.qname]*i.value/100:i.value/100/e.cellResolution.h;else if("em"===i.unit)o=null!==n?n.styleAttrs[t.byName.fontSize.qname]*i.value:i.value/e.cellResolution.h;else if("c"===i.unit)o=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;o=i.value/e.pxDimensions.h}return o})),new r(e.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(t){return"normal"===t?t:n.parseLength(t)}),(function(e,n,r,i,a){var o;if("normal"===i)o=i;else if("%"===i.unit)o=r.styleAttrs[t.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)o=r.styleAttrs[t.byName.fontSize.qname]*i.value;else if("c"===i.unit)o=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;o=i.value/e.pxDimensions.h}return o})),new r(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(e.ns_tts,"origin","auto",["region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,n,r,i){var a,o;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/t.pxDimensions.h}if("auto"===r)o=0;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/t.pxDimensions.w}return{h:a,w:o}})),new r(e.ns_tts,"overflow","hidden",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"padding","0px",["region"],!1,!0,(function(t){var e=t.split(" ");if(e.length>4)return null;var r=[];for(var i in e){var a=n.parseLength(e[i]);if(!a)return null;r.push(a)}return r}),(function(e,n,r,i,a){var o;if(1===i.length)o=[i[0],i[0],i[0],i[0]];else if(2===i.length)o=[i[0],i[1],i[0],i[1]];else if(3===i.length)o=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;o=[i[0],i[1],i[2],i[3]]}var s=r.styleAttrs[t.byName.writingMode.qname];if("lrtb"===s||"lr"===s)o=[o[0],o[3],o[2],o[1]];else if("rltb"===s||"rl"===s)o=[o[0],o[1],o[2],o[3]];else if("tblr"===s)o=[o[3],o[0],o[1],o[2]];else{if("tbrl"!==s&&"tb"!==s)return null;o=[o[3],o[2],o[1],o[0]]}var u=[];for(var l in o)if(0===o[l].value)u[l]=0;else if("%"===o[l].unit)u[l]="0"===l||"2"===l?r.styleAttrs[t.byName.extent.qname].h*o[l].value/100:r.styleAttrs[t.byName.extent.qname].w*o[l].value/100;else if("em"===o[l].unit)u[l]=r.styleAttrs[t.byName.fontSize.qname]*o[l].value;else if("c"===o[l].unit)u[l]=o[l].value/e.cellResolution.h;else{if("px"!==o[l].unit)return null;u[l]="0"===l||"2"===l?o[l].value/e.pxDimensions.h:o[l].value/e.pxDimensions.w}return u})),new r(e.ns_tts,"showBackground","always",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"textAlign","start",["p"],!0,!0,(function(t){return t}),(function(t,e,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(e.ns_tts,"textDecoration","none",["span"],!0,!0,(function(t){return t.split(" ")}),null),new r(e.ns_tts,"textOutline","none",["span"],!0,!0,(function(t){if("none"===t)return t;var e={},r=t.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(e.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(e.thickness=a,e):null}),(function(e,n,r,i,a){if("none"===i)return i;var o={};if(o.color=null===i.color?r.styleAttrs[t.byName.color.qname]:i.color,"%"===i.thickness.unit)o.thickness=r.styleAttrs[t.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)o.thickness=r.styleAttrs[t.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)o.thickness=i.thickness.value/e.cellResolution.h;else{if("px"!==i.thickness.unit)return null;o.thickness=i.thickness.value/e.pxDimensions.h}return o})),new r(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"zIndex","auto",["region"],!1,!0,(function(t){var e;return"auto"===t?e=t:(e=parseInt(t),isNaN(e)&&(e=null)),e}),null),new r(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(t,e,n,r,i){return"c"===r.unit?r.value/t.cellResolution.h:null})),new r(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(t){return t}),null),new r(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(t){return t}),null),new r(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(t){return"true"===t}),null),new r(e.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(t){return"true"===t}),null)],t.byQName={},t.all)t.byQName[t.all[i].qname]=t.all[i];for(var a in t.byName={},t.all)t.byName[t.all[a].name]=t.all[a]}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(t,e,n){!function(t){var e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(t){var a,o=null,s=i[t.toLowerCase()];return void 0!==s?o=s:null!==(a=e.exec(t))?o=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(t))?o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(t))&&(o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),o};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;t.parseLength=function(t){var e,n=null;return null!==(e=a.exec(t))&&(n={value:parseFloat(e[1]),unit:e[2]}),n}}(e)},"./node_modules/inherits/inherits_browser.js":function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"./node_modules/isarray/index.js":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(t,e,n){"use strict";(function(t){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),a=n("./node_modules/isarray/index.js");function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&a(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(l(t,a+d)!==l(e,d)){f=!1;break}if(f)return a}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return V(B(e,t.length-n),t,n,r)}function E(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return V(U(e),t,n,r)}function w(t,e,n,r){return V(function(t,e){for(var n,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function A(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:o=t[i+2],128==(192&(a=t[i+1]))&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+2],s=t[i+3],128==(192&(a=t[i+1]))&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function D(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=e;o<n;++o)a+=(r=t[o])<16?"0"+r.toString(16):r.toString(16);return a}function R(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,a){return a||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,a){return a||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(null,e):void 0!==n?"string"==typeof r?s(null,e).fill(n,r):s(null,e).fill(n):s(null,e)}(0,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=t.slice(e,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:B(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,a,o;if(l(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"==typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)a(u,this,e);else{var l=u.length,c=v(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,h(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,r,i,a,o;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n("./node_modules/setimmediate/setImmediate.js"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var a=e.isAbsolute(t),o="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!a).join("/"))||a||(t="."),t&&o&&(t+="/"),(a?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(t,e,n){"use strict";(function(e){t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick((function(){t.apply(null,a)}))}}}:e}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(t,e,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var a=n("./node_modules/core-util-is/lib/util.js");a.inherits=n("./node_modules/inherits/inherits_browser.js");var o=n("./node_modules/readable-stream/lib/_stream_readable.js"),s=n("./node_modules/readable-stream/lib/_stream_writable.js");a.inherits(f,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(t){if(!(this instanceof f))return new f(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(t,e,n){"use strict";t.exports=a;var r=n("./node_modules/readable-stream/lib/_stream_transform.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(t){if(!(this instanceof a))return new a(t);r.call(this,t)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(a,r),a.prototype._transform=function(t,e,n){n(null,t)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(t,e,n){"use strict";(function(e,r){var i=n("./node_modules/process-nextick-args/index.js");t.exports=_;var a,o=n("./node_modules/isarray/index.js");_.ReadableState=y,n("./node_modules/node-libs-browser/node_modules/events/events.js");var s=function(t,e){return t.listeners(e).length},u=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),l=n("./node_modules/safe-buffer/index.js").Buffer,c=e.Uint8Array||function(){},f=n("./node_modules/core-util-is/lib/util.js");f.inherits=n("./node_modules/inherits/inherits_browser.js");var d=n(0),h=void 0;h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=n("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),v=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");f.inherits(_,u);var m=["error","close","destroy","pause","resume"];function y(t,e){var r=e instanceof(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof _))return new _(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var a,o=t._readableState;return null===e?(o.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,o)):(i||(a=function(t,e){var n,r;return l.isBuffer(r=e)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,e)),a?t.emit("error",a):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?E(t,o,e,!1):A(t,o)):E(t,o,e,!1))):r||(o.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),A(t,e)}function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(w,t):w(t))}function w(t){h("emit readable"),t.emit("readable"),I(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(x,t,e))}function x(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function C(t){h("readable nexttick read 0"),t.read(0)}function D(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(i+=o===a.length?a:a.slice(0,t),0==(t-=o)){o===a.length?(++r,e.head=n.next?n.next:e.tail=null):(e.head=n,n.data=a.slice(o));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(a.copy(n,n.length-t,0,o),0==(t-=o)){o===a.length?(++i,e.head=r.next?r.next:e.tail=null):(e.head=r,r.data=a.slice(o));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function k(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this},_.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?k(this):S(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&k(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(n,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&k(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?y:l;function l(){h("onend"),t.end()}a.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",(function e(r,i){h("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",g),t.removeListener("unpipe",e),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",p),f=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}));var c=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,I(t))}}(n);t.on("drain",c);var f=!1,d=!1;function p(e){h("ondata"),d=!1,!1!==t.write(e)||d||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==P(a.pipes,t))&&!f&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(e){h("onerror",e),y(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),y()}function m(){h("onfinish"),t.removeListener("close",v),y()}function y(){h("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener("error",n);t._events&&t._events.error?o(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on("error",n)}(t,0,g),t.once("close",v),t.once("finish",m),t.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=P(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},_.prototype.addListener=_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(C,this))}return n},_.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(D,t,e))}(this,t)),this},_.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<m.length;a++)t.on(m[a],this.emit.bind(this,m[a]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=R}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(t,e,n){"use strict";t.exports=o;var r=n("./node_modules/readable-stream/lib/_stream_duplex.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},"./node_modules/readable-stream/lib/_stream_writable.js":function(t,e,n){"use strict";(function(e,r,i){var a=n("./node_modules/process-nextick-args/index.js");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=m;var l=n("./node_modules/core-util-is/lib/util.js");l.inherits=n("./node_modules/inherits/inherits_browser.js");var c,f={deprecate:n("./node_modules/util-deprecate/browser.js")},d=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),h=n("./node_modules/safe-buffer/index.js").Buffer,p=i.Uint8Array||function(){},g=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");function v(){}function m(t,e){s=s||n("./node_modules/readable-stream/lib/_stream_duplex.js");var r=e instanceof s;this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(a.nextTick(i,r),a.nextTick(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),w(t,e))}(t,n,r,e,i);else{var o=T(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?u(b,t,n,o,i):b(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(t){if(s=s||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(c.call(y,this)||this instanceof s))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function _(t,e,n,r,i,a,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),w(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=new Array(e.bufferedRequestCount),i=e.corkedRequestsFree;i.entry=n;for(var a=0,s=!0;n;)r[a]=n,n.isBuf||(s=!1),n=n.next,a+=1;r.allBuffers=s,_(t,e,!0,e.length,r,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(_(t,e,!1,e.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),w(t,e)}))}function w(t,e){var n=T(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(y,d),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===y&&t&&t._writableState instanceof m}})):c=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(h.isBuffer(r=t)||r instanceof p);return s&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),a.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,a){if(!n){var o=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n)),e}(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,r,i,a);return u}(this,i,s,t,e,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?a.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(t,e,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=n(1);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(t,e,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js");function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(t,e,n){t.exports=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(t,e,n){(e=t.exports=n("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./node_modules/readable-stream/lib/_stream_writable.js"),e.Duplex=n("./node_modules/readable-stream/lib/_stream_duplex.js"),e.Transform=n("./node_modules/readable-stream/lib/_stream_transform.js"),e.PassThrough=n("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(t,e,n){var r=n("./node_modules/node-libs-browser/node_modules/buffer/index.js"),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),a(i,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"./node_modules/sax/lib/sax.js":function(t,e,n){(function(t){!function(e){e.parser=function(t,e){return new a(t,e)},e.SAXParser=a,e.SAXStream=s,e.createStream=function(t,e){return new s(t,e)},e.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,n){if(!(this instanceof a))return new a(t,n);!function(t){for(var e=0,n=i.length;e<n;e++)t[i[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=A.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=Object.create(this.strictEntities?e.XML_ENTITIES:e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(p)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),C(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),a.prototype={end:function(){O(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return k(this,"Cannot write after close. Assign an onready handler.");if(null===t)return O(this);"object"==typeof t&&(t=t.toString());for(var n=0,r="";r=U(t,n++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case A.BEGIN:if(this.state=A.BEGIN_WHITESPACE,"\ufeff"===r)continue;B(this,r);continue;case A.BEGIN_WHITESPACE:B(this,r);continue;case A.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=n-1;r&&"<"!==r&&"&"!==r;)(r=U(t,n++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(a,n-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(!E(u,r)||this.sawRoot&&!this.closedRoot||P(this,"Text data outside of root node."),"&"===r?this.state=A.TEXT_ENTITY:this.textNode+=r):(this.state=A.OPEN_WAKA,this.startTagPosition=this.position);continue;case A.SCRIPT:"<"===r?this.state=A.SCRIPT_ENDING:this.script+=r;continue;case A.SCRIPT_ENDING:"/"===r?this.state=A.CLOSE_TAG:(this.script+="<"+r,this.state=A.SCRIPT);continue;case A.OPEN_WAKA:"!"===r?(this.state=A.SGML_DECL,this.sgmlDecl=""):b(u,r)||(b(g,r)?(this.state=A.OPEN_TAG,this.tagName=r):"/"===r?(this.state=A.CLOSE_TAG,this.tagName=""):"?"===r?(this.state=A.PROC_INST,this.procInstName=this.procInstBody=""):(P(this,"Unencoded <"),this.startTagPosition+1<this.position&&(r=new Array(this.position-this.startTagPosition).join(" ")+r),this.textNode+="<"+r,this.state=A.TEXT));continue;case A.SGML_DECL:"[CDATA["===(this.sgmlDecl+r).toUpperCase()?(D(this,"onopencdata"),this.state=A.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=A.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+r).toUpperCase()?(this.state=A.DOCTYPE,(this.doctype||this.sawRoot)&&P(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(D(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=A.TEXT):b(f,r)?(this.state=A.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case A.SGML_DECL_QUOTED:r===this.q&&(this.state=A.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case A.DOCTYPE:">"===r?(this.state=A.TEXT,D(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=A.DOCTYPE_DTD:b(f,r)&&(this.state=A.DOCTYPE_QUOTED,this.q=r));continue;case A.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=A.DOCTYPE:b(f,r)&&(this.state=A.DOCTYPE_DTD_QUOTED,this.q=r);continue;case A.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=A.DOCTYPE_DTD,this.q="");continue;case A.COMMENT:"-"===r?this.state=A.COMMENT_ENDING:this.comment+=r;continue;case A.COMMENT_ENDING:"-"===r?(this.state=A.COMMENT_ENDED,this.comment=R(this.opt,this.comment),this.comment&&D(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==r?(P(this,"Malformed comment"),this.comment+="--"+r,this.state=A.COMMENT):this.state=A.TEXT;continue;case A.CDATA:"]"===r?this.state=A.CDATA_ENDING:this.cdata+=r;continue;case A.CDATA_ENDING:"]"===r?this.state=A.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===r?(this.cdata&&D(this,"oncdata",this.cdata),D(this,"onclosecdata"),this.cdata="",this.state=A.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=A.CDATA);continue;case A.PROC_INST:"?"===r?this.state=A.PROC_INST_ENDING:b(u,r)?this.state=A.PROC_INST_BODY:this.procInstName+=r;continue;case A.PROC_INST_BODY:if(!this.procInstBody&&b(u,r))continue;"?"===r?this.state=A.PROC_INST_ENDING:this.procInstBody+=r;continue;case A.PROC_INST_ENDING:">"===r?(D(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=A.TEXT):(this.procInstBody+="?"+r,this.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:b(v,r)?this.tagName+=r:(M(this),">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:(E(u,r)&&P(this,"Invalid character in tag name"),this.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===r?(F(this,!0),j(this)):(P(this,"Forward-slash in opening tag not followed by >"),this.state=A.ATTRIB);continue;case A.ATTRIB:if(b(u,r))continue;">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:b(g,r)?(this.attribName=r,this.attribValue="",this.state=A.ATTRIB_NAME):P(this,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===r?this.state=A.ATTRIB_VALUE:">"===r?(P(this,"Attribute without value"),this.attribValue=this.attribName,N(this),F(this)):b(u,r)?this.state=A.ATTRIB_NAME_SAW_WHITE:b(v,r)?this.attribName+=r:P(this,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=A.ATTRIB_VALUE;else{if(b(u,r))continue;P(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",D(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?F(this):b(g,r)?(this.attribName=r,this.state=A.ATTRIB_NAME):(P(this,"Invalid attribute name"),this.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(b(u,r))continue;b(f,r)?(this.q=r,this.state=A.ATTRIB_VALUE_QUOTED):(P(this,"Unquoted attribute value"),this.state=A.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case A.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=A.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}N(this),this.q="",this.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:b(u,r)?this.state=A.ATTRIB:">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:b(g,r)?(P(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=A.ATTRIB_NAME):P(this,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(E(d,r)){"&"===r?this.state=A.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}N(this),">"===r?F(this):this.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(this.tagName)">"===r?j(this):b(v,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=A.SCRIPT):(E(u,r)&&P(this,"Invalid tagname in closing tag"),this.state=A.CLOSE_TAG_SAW_WHITE);else{if(b(u,r))continue;E(g,r)?this.script?(this.script+="</"+r,this.state=A.SCRIPT):P(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case A.CLOSE_TAG_SAW_WHITE:if(b(u,r))continue;">"===r?j(this):P(this,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var o,s;switch(this.state){case A.TEXT_ENTITY:o=A.TEXT,s="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:o=A.ATTRIB_VALUE_QUOTED,s="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:o=A.ATTRIB_VALUE_UNQUOTED,s="attribValue"}";"===r?(this[s]+=(l=void 0,c=void 0,p=void 0,h=(c=this.entity).toLowerCase(),p="",this.ENTITIES[c]?this.ENTITIES[c]:this.ENTITIES[h]?this.ENTITIES[h]:("#"===(c=h).charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),p=(l=parseInt(c,16)).toString(16)):(c=c.slice(1),p=(l=parseInt(c,10)).toString(10))),c=c.replace(/^0+/,""),p.toLowerCase()!==c?(P(this,"Invalid character entity"),"&"+this.entity+";"):String.fromCodePoint(l))),this.entity="",this.state=o):b(this.entity.length?y:m,r)?this.entity+=r:(P(this,"Invalid character in entity name"),this[s]+="&"+this.entity+r,this.entity="",this.state=o);continue;default:throw new Error(this,"Unknown state: "+this.state)}var l,c,h,p;return this.position>=this.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,a=0,o=i.length;a<o;a++){var s=t[i[a]].length;if(s>n)switch(i[a]){case"textNode":I(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:k(t,"Max buffer length exceeded: "+i[a])}r=Math.max(r,s)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-r+t.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){I(this),""!==this.cdata&&(D(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(D(this,"onscript",this.script),this.script="")}};try{r=n("./node_modules/stream-browserify/index.js").Stream}catch(V){r=function(){}}var o=e.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function s(t,e){if(!(this instanceof s))return new s(t,e);r.apply(this),this._parser=new a(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,o.forEach((function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e,e;n.on(t,e)},enumerable:!0,configurable:!1})}))}(s.prototype=Object.create(r.prototype,{constructor:{value:s}})).write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var r=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new r("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===o.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var u="\r\n\t ",l="0124356789",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",f="'\"",d=u+">",h="http://www.w3.org/XML/1998/namespace",p={xml:h,xmlns:"http://www.w3.org/2000/xmlns/"};u=_(u),l=_(l),c=_(c);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function _(t){return t.split("").reduce((function(t,e){return t[e]=!0,t}),{})}function b(t,e){return function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!e.match(t):t[e]}function E(t,e){return!b(t,e)}f=_(f),d=_(d);var T,S,w,A=0;for(var x in e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[x]]=x;function C(t,e,n){t[e]&&t[e](n)}function D(t,e,n){t.textNode&&I(t),C(t,e,n)}function I(t){t.textNode=R(t.opt,t.textNode),t.textNode&&C(t,"ontext",t.textNode),t.textNode=""}function R(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function k(t,e){return I(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,C(t,"onerror",e),t}function O(t){return t.sawRoot&&!t.closedRoot&&P(t,"Unclosed root tag"),t.state!==A.BEGIN&&t.state!==A.BEGIN_WHITESPACE&&t.state!==A.TEXT&&k(t,"Unexpected end"),I(t),t.c="",t.closed=!0,C(t,"onend"),a.call(t,t.strict,t.opt),t}function P(t,e){if("object"!=typeof t||!(t instanceof a))throw new Error("bad call to strictFail");t.strict&&k(t,e)}function M(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,D(t,"onopentagstart",n)}function L(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function N(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=L(t.attribName,!0),n=e.local;if("xmlns"===e.prefix)if("xml"===n&&t.attribValue!==h)P(t,"xml: prefix must be bound to "+h+"\nActual: "+t.attribValue);else if("xmlns"===n&&"http://www.w3.org/2000/xmlns/"!==t.attribValue)P(t,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+t.attribValue);else{var r=t.tag,i=t.tags[t.tags.length-1]||t;r.ns===i.ns&&(r.ns=Object.create(i.ns)),r.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,D(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function F(t,e){if(t.opt.xmlns){var n=t.tag,r=L(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix),n.ns&&(t.tags[t.tags.length-1]||t).ns!==n.ns&&Object.keys(n.ns).forEach((function(e){D(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var i=0,a=t.attribList.length;i<a;i++){var o=t.attribList[i],s=o[0],u=o[1],l=L(s,!0),c=l.prefix,f=""===c?"":n.ns[c]||"",d={name:s,value:u,prefix:c,local:l.local,uri:f};c&&"xmlns"!==c&&!f&&(P(t,"Unbound namespace prefix: "+JSON.stringify(c)),d.uri=c),t.tag.attributes[s]=d,D(t,"onattribute",d)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),D(t,"onopentag",t.tag),e||(t.state=t.noscript||"script"!==t.tagName.toLowerCase()?A.TEXT:A.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function j(t){if(!t.tagName)return P(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=A.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=A.SCRIPT);D(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--&&t.tags[e].name!==r;)P(t,"Unexpected close tag");if(e<0)return P(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=A.TEXT);t.tagName=n;for(var i=t.tags.length;i-- >e;){var a=t.tag=t.tags.pop();t.tagName=t.tag.name,D(t,"onclosetag",t.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];t.opt.xmlns&&a.ns!==(t.tags[t.tags.length-1]||t).ns&&Object.keys(a.ns).forEach((function(e){D(t,"onclosenamespace",{prefix:e,uri:a.ns[e]})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=A.TEXT}function B(t,e){"<"===e?(t.state=A.OPEN_WAKA,t.startTagPosition=t.position):E(u,e)&&(P(t,"Non-whitespace before first tag."),t.textNode=e,t.state=A.TEXT)}function U(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}A=e.STATE,String.fromCodePoint||(T=String.fromCharCode,S=Math.floor,w=function(){var t=16384,e=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||S(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?e.push(a):e.push(55296+((a-=65536)>>10),a%1024+56320),(n+1===r||e.length>t)&&(i+=T.apply(null,e),e.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(e)}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,a,o,s,u=1,l={},c=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){a.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},d.clearImmediate=h}function h(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(t,e,n){t.exports=i;var r=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function i(){r.call(this)}n("./node_modules/inherits/inherits_browser.js")(i,r),i.Readable=n("./node_modules/readable-stream/readable-browser.js"),i.Writable=n("./node_modules/readable-stream/writable-browser.js"),i.Duplex=n("./node_modules/readable-stream/duplex-browser.js"),i.Transform=n("./node_modules/readable-stream/transform.js"),i.PassThrough=n("./node_modules/readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,t.end())}function u(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},"./node_modules/string_decoder/lib/string_decoder.js":function(t,e,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=f,e=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=o(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"./node_modules/util-deprecate/browser.js":function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},"./src/core/Debug.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=1,s=2,u=3,l=4,c=5;function f(t){t=t||{};var e,n,a,f,d=this.context,h=Object(r.default)(d).getInstance(),p=t.settings,g=[];function v(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[o,this].concat(e))}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[s,this].concat(e))}function _(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[u,this].concat(e))}function b(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[l,this].concat(e))}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[c,this].concat(e))}function T(t,e){var r="",o=null;n&&(o=(new Date).getTime(),r+="["+(o-f)+"]"),a&&e&&e.getClassName&&(r+="["+e.getClassName()+"]",e.getType&&(r+="["+e.getType()+"]")),r.length>0&&(r+=" ");for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];Array.apply(null,u).forEach((function(t){r+=t+" "})),g[t]&&p.get().debug.logLevel>=t&&g[t](r),p&&p.get().debug.dispatchEvent&&h.trigger(i.default.LOG,{message:r,level:t})}return e={getLogger:function(t){return{fatal:m.bind(t),error:y.bind(t),warn:_.bind(t),info:b.bind(t),debug:E.bind(t)}},setLogTimestampVisible:function(t){n=t},setCalleeNameVisible:function(t){a=t}},n=!0,a=!0,f=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(g[o]=v(window.console.error),g[s]=v(window.console.error),g[u]=v(window.console.warn),g[l]=v(window.console.info),g[c]=v(window.console.debug)),e}f.__dashjs_factory_name="Debug";var d=a.default.getSingletonFactory(f);d.LOG_LEVEL_NONE=0,d.LOG_LEVEL_FATAL=o,d.LOG_LEVEL_ERROR=s,d.LOG_LEVEL_WARNING=u,d.LOG_LEVEL_INFO=l,d.LOG_LEVEL_DEBUG=c,a.default.updateSingletonFactory(f.__dashjs_factory_name,d),e.default=d},"./src/core/EventBus.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/MediaPlayerEvents.js");function a(){var t={};function e(e,n,r){var i=-1;return t[e]?(t[e].some((function(t,e){if(t&&t.callback===n&&(!r||r===t.scope))return i=e,!0})),i):i}return{on:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var o=a.priority||0;if(!(e(n,r,i)>=0)){t[n]=t[n]||[];var s={callback:r,scope:i,priority:o};i&&i.getStreamId&&(s.streamId=i.getStreamId()),i&&i.getType&&(s.mediaType=i.getType()),a&&a.mode&&(s.mode=a.mode);var u=t[n].some((function(e,r){if(e&&o>e.priority)return t[n].splice(r,0,s),!0}));u||t[n].push(s)}},off:function(n,r,i){if(n&&r&&t[n]){var a=e(n,r,i);a<0||(t[n][a]=null)}},trigger:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t[e]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=e,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),t[e].filter((function(t){return!(!t||r.streamId&&t.streamId&&t.streamId!==r.streamId||r.mediaType&&t.mediaType&&t.mediaType!==r.mediaType||r.mode&&t.mode&&t.mode!==r.mode||!t.mode&&r.mode&&r.mode===i.default.EVENT_MODE_ON_RECEIVE)})).forEach((function(t){return t&&t.callback.call(t.scope,n)}))}},reset:function(){t={}}}}a.__dashjs_factory_name="EventBus";var o=r.default.getSingletonFactory(a);o.EVENT_PRIORITY_LOW=0,o.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(a.__dashjs_factory_name,o),e.default=o},"./src/core/FactoryMaker.js":function(t,e,n){"use strict";n.r(e);var r=function(){var t,e=[],n={},r={};function i(t,n){for(var r in e){var i=e[r];if(i.context===t&&i.name===n)return i.instance}return null}function a(t,e){return e[t]}function o(t,e,n){t in n&&(n[t]=e)}function s(e,n,r){var i,a=e.__dashjs_factory_name,o=n[a];if(o){var s=o.instance;if(!o.override)return s.apply({context:n,factory:t},r);for(var u in i=e.apply({context:n},r),s=s.apply({context:n,factory:t,parent:i},r))i.hasOwnProperty(u)&&(i[u]=s[u])}else i=e.apply({context:n},r);return i.getClassName=function(){return a},i}return t={extend:function(t,e,n,r){!r[t]&&e&&(r[t]={instance:e,override:n})},getSingletonInstance:i,setSingletonInstance:function(t,n,r){for(var i in e){var a=e[i];if(a.context===t&&a.name===n)return void(e[i].instance=r)}e.push({name:n,context:t,instance:r})},deleteSingletonInstances:function(t){e=e.filter((function(e){return e.context!==t}))},getSingletonFactory:function(t){var r=a(t.__dashjs_factory_name,n);return r||(n[t.__dashjs_factory_name]=r=function(n){var r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,t.__dashjs_factory_name)),r||(r=s(t,n,arguments),e.push({name:t.__dashjs_factory_name,context:n,instance:r})),r}}}),r},getSingletonFactoryByName:function(t){return a(t,n)},updateSingletonFactory:function(t,e){o(t,e,n)},getClassFactory:function(t){var e=a(t.__dashjs_factory_name,r);return e||(r[t.__dashjs_factory_name]=e=function(e){return void 0===e&&(e={}),{create:function(){return s(t,e,arguments)}}}),e},getClassFactoryByName:function(t){return a(t,r)},updateClassFactory:function(t,e){o(t,e,r)}}}();e.default=r},"./src/core/Settings.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Utils.js"),a=n("./src/core/Debug.js"),o=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(){var t,e,n={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,lowLatencyEnabled:!1,lowLatencyEnabledByManifest:!0,manifestUpdateRetryInterval:100,cacheInitSegments:!1,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0,applyServiceDescription:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{minDrift:.02,maxDrift:12,playbackRate:.5,latencyThreshold:60,playbackBufferMin:.5,enabled:!1,mode:o.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:o.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:o.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:o.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:0,retryIntervals:(t={},l(t,s.HTTPRequest.MPD_TYPE,500),l(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,500),l(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),l(t,s.HTTPRequest.INIT_SEGMENT_TYPE,1e3),l(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),l(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),l(t,s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),l(t,s.HTTPRequest.LICENSE,1e3),l(t,s.HTTPRequest.OTHER_TYPE,1e3),l(t,"lowLatencyReductionFactor",10),t),retryAttempts:(e={},l(e,s.HTTPRequest.MPD_TYPE,3),l(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,1),l(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,3),l(e,s.HTTPRequest.INIT_SEGMENT_TYPE,3),l(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),l(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,3),l(e,s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),l(e,s.HTTPRequest.LICENSE,3),l(e,s.HTTPRequest.OTHER_TYPE,3),l(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:o.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:o.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:o.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:o.default.CMCD_MODE_QUERY}},errors:{recoverAttempts:{mediaErrorDecode:5}}},r=i.default.clone(n);return{get:function(){return r},update:function(t){"object"===u(t)&&function t(e,n,r){for(var a in e)e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&("object"===u(e[a])&&null!==e[a]?t(e[a],n[a],r.slice()+a+"."):n[a]=i.default.clone(e[a]))}(t,r,"")},reset:function(){r=i.default.clone(n)}}}c.__dashjs_factory_name="Settings";var f=r.default.getSingletonFactory(c);e.default=f},"./src/core/Utils.js":function(t,e,n){"use strict";n.r(e);var r=n("./node_modules/path-browserify/index.js"),i=n.n(r);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"mixin",value:function(e,n,r){var i,o={};if(e)for(var s in n)n.hasOwnProperty(s)&&(i=n[s],s in e&&(e[s]===i||s in o&&o[s]===i)||(e[s]="object"===a(e[s])&&null!==e[s]?t.mixin(e[s],i,r):r(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!==a(e))return e;var n;if(e instanceof Array){n=[];for(var r=0,i=e.length;r<i;++r)r in e&&n.push(t.clone(e[r]))}else n={};return t.mixin(n,e,t.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(t,e){try{if(!e||0===e.length)return t;var n=new URL(t);return e.forEach((function(t){t.key&&t.value&&n.searchParams.set(t.key,t.value)})),n.href}catch(r){return t}}},{key:"parseHttpHeaders",value:function(t){var e={};if(!t)return e;for(var n=t.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(e[a.substring(0,o)]=a.substring(o+2))}return e}},{key:"generateUuid",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}},{key:"getRelativeUrl",value:function(t,e){try{var n=new URL(t),r=new URL(e);if(n.protocol=r.protocol,n.origin!==r.origin)return e;var a=i.a.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),r.pathname.substr(0,r.pathname.lastIndexOf("/"))),o=0===a.length?1:0;return a+=r.pathname.substr(r.pathname.lastIndexOf("/")+o,r.pathname.length-1),r.pathname.length<a.length?r.pathname:a}catch(s){return e}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}()},"./src/core/Version.js":function(t,e,n){"use strict";function r(){return"4.2.1"}n.r(e),n.d(e,"getVersionString",(function(){return r}))},"./src/core/errors/Errors.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var s=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,t.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,t.SEGMENT_BASE_LOADER_ERROR_CODE=15,t.TIME_SYNC_FAILED_ERROR_CODE=16,t.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,t.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,t.APPEND_ERROR_CODE=20,t.REMOVE_ERROR_CODE=21,t.DATA_UPDATE_FAILED_ERROR_CODE=22,t.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,t.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,t.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,t.DOWNLOAD_ERROR_ID_SIDX_CODE=26,t.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,t.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,t.DOWNLOAD_ERROR_ID_XLINK_CODE=29,t.MANIFEST_ERROR_ID_PARSE_CODE=31,t.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,t.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,t.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,t.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,t.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",t.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",t.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",t.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",t.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",t.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",t.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",t.APPEND_ERROR_MESSAGE="chunk is not defined",t.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",t.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",t.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",t.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",t.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",t.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",t}return s}(n("./src/core/errors/ErrorsBase.js").default));e.default=s},"./src/core/errors/ErrorsBase.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"extend",value:function(t,e){if(t){var n=!!e&&e.override,r=!!e&&e.publicOnly;for(var i in t)!t.hasOwnProperty(i)||this[i]&&!n||r&&-1===t[i].indexOf("public_")||(this[i]=t[i])}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/core/events/CoreEvents.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/events/EventsBase.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",t.BUFFERING_COMPLETED="bufferingCompleted",t.BUFFER_CLEARED="bufferCleared",t.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",t.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",t.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",t.CURRENT_TRACK_CHANGED="currentTrackChanged",t.DATA_UPDATE_COMPLETED="dataUpdateCompleted",t.INBAND_EVENTS="inbandEvents",t.INITIAL_STREAM_SWITCH="initialStreamSwitch",t.INIT_FRAGMENT_LOADED="initFragmentLoaded",t.INIT_FRAGMENT_NEEDED="initFragmentNeeded",t.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",t.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",t.LOADING_COMPLETED="loadingCompleted",t.LOADING_PROGRESS="loadingProgress",t.LOADING_DATA_PROGRESS="loadingDataProgress",t.LOADING_ABANDONED="loadingAborted",t.MANIFEST_UPDATED="manifestUpdated",t.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",t.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",t.QUOTA_EXCEEDED="quotaExceeded",t.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",t.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",t.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",t.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",t.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",t.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",t.SOURCE_BUFFER_ERROR="sourceBufferError",t.STREAMS_COMPOSED="streamsComposed",t.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",t.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",t.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",t.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",t.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",t.URL_RESOLUTION_FAILED="urlResolutionFailed",t.VIDEO_CHUNK_RECEIVED="videoChunkReceived",t.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",t.XLINK_ELEMENT_LOADED="xlinkElementLoaded",t.XLINK_READY="xlinkReady",t.SEEK_TARGET="seekTarget",t}return i}(r.default)},"./src/core/events/Events.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var u=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function u(){return i(this,u),r.apply(this,arguments)}return u}(n("./src/core/events/CoreEvents.js").default));e.default=u},"./src/core/events/EventsBase.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"extend",value:function(t,e){if(t){var n=!!e&&e.override,r=!!e&&e.publicOnly;for(var i in t)!t.hasOwnProperty(i)||this[i]&&!n||r&&-1===t[i].indexOf("public_")||(this[i]=t[i])}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/DashAdapter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/dash/vo/RepresentationInfo.js"),a=n("./src/dash/vo/MediaInfo.js"),o=n("./src/dash/vo/StreamInfo.js"),s=n("./src/dash/vo/ManifestInfo.js"),u=n("./src/dash/vo/Event.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/dash/models/DashManifestModel.js"),f=n("./src/dash/models/PatchManifestModel.js");function d(){var t,e,n,l,d,h,p,g=this.context;function v(t,n,i){var a=e.getAdaptationsForType(l[0].mpd.manifest,t,n);if(!a||0===a.length)return null;if(a.length>1&&i){var o=_(i,n);if(d[i.id]&&d[i.id][n])for(var s=0,u=a.length;s<u;s++)if(m(d[i.id][n],o[s]))return a[s];for(var c=0,f=a.length;c<f;c++)if(e.getRolesForAdaptation(a[c]).filter((function(t){return t.value===r.default.MAIN}))[0])return a[c]}return a[0]}function m(t,e){if(!t||!e)return!1;var n=t.id===e.id,r=t.codec===e.codec,i=t.viewpoint===e.viewpoint,a=t.lang===e.lang,o=t.roles.toString()===e.roles.toString(),s=t.accessibility.toString()===e.accessibility.toString(),u=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s&&u}function y(t,n,r,i,a,o){var s,u,l,c,f,d=[];if(!i||0===i.length)return[];var p=e.getAdaptationsForPeriod(n);for(l=0,f=i.length;l<f;l++)if(s=x(p[u=e.getIndexForAdaptation(i[l],t,r.index)]),o){var g=s.accessibility.length;for(c=0;c<g;c++)if(s){var v=s.accessibility[c];if(0===v.indexOf("cea-608:")){var m=v.substring(8).split(";");if("CC"===m[0].substring(0,2))for(c=0;c<m.length;c++)s||(s=x.call(this,p[u])),C(s,m[c].substring(0,3),m[c].substring(4)),d.push(s),s=null;else for(c=0;c<m.length;c++)s||(s=x.call(this,p[u])),C(s,"CC"+(c+1),m[c]),d.push(s),s=null}else 0===v.indexOf("cea-608")&&(C(s,h.CC1,"eng"),d.push(s),s=null)}}else a===h.IMAGE?(s.type=h.IMAGE,d.push(s),s=null):s&&d.push(s);return d}function _(t,n,r){var i=l,a=r,o=[];if(a)I(),i=b(a);else{if(!(l.length>0))return o;a=l[0].mpd.manifest}var s=A(t,i),u=e.getAdaptationsForType(a,t?t.index:null,n);return o=y(a,s,t,u,n),n===h.TEXT&&(u=e.getAdaptationsForType(a,t?t.index:null,h.VIDEO),o=o.concat(y(a,s,t,u,n,!0))),o}function b(t){var n=E(t);return e.getRegularPeriods(n)}function E(t){var n=S(t);return e.getMpd(n)}function T(){l=[],d={}}function S(t){return t||(l.length>0?l[0].mpd.manifest:null)}function w(t){try{var n=A(t.streamInfo,l),r=e.getAdaptationsForPeriod(n);return t&&t.streamInfo&&void 0!==t.streamInfo.id&&r?r[t.index]:null}catch(i){return null}}function A(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];if(t&&t.id===i.id)return i}return null}function x(t){if(!t)return null;var n,r=new a.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];if(r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=D(t.period),r.representationCount=e.getRepresentationCount(i),r.labels=e.getLabelsForAdaptation(i),r.lang=e.getLanguageForAdaptation(i),n=e.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=e.getAccessibilityForAdaptation(i).map((function(t){var e=t.value,n=e;return t.schemeIdUri&&t.schemeIdUri.search("cea-608")>=0&&void 0!==p&&(n=e?"cea-608:"+e:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=e.getAudioChannelConfigurationForAdaptation(i).map((function(t){return t.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(r.audioChannelConfiguration=e.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(t){return t.value}))),r.roles=e.getRolesForAdaptation(i).map((function(t){return t.value})),r.codec=e.getCodec(i),r.mimeType=e.getMimeType(i),r.contentProtection=e.getContentProtectionData(i),r.bitrateList=e.getBitrateListForAdaptation(i),r.selectionPriority=e.getSelectionPriority(i),r.contentProtection){var o=r.contentProtection.map((function(t){return e.getKID(t)})).filter((function(t){return null!==t}));if(o.length){var s=o[0];r.contentProtection.forEach((function(t){t.keyId=s}))}}return r.isText=e.getIsText(i),r.supplementalProperties=e.getSupplementalProperties(i),r.isFragmented=e.getIsFragmented(i),r.isEmbedded=!1,r}function C(t,e,n){t.id=e,t.index=100+parseInt(e.substring(2,3)),t.type=h.TEXT,t.codec="cea-608-in-SEI",t.isEmbedded=!0,t.isFragmented=!1,t.lang=n,t.roles=["caption"]}function D(t){var n,r,i=new o.default;return i.id=t.id,i.index=t.index,i.start=t.start,i.duration=t.duration,i.manifestInfo=(n=t.mpd,(r=new s.default).dvrWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=e.getDuration(n.manifest),r.isDynamic=e.getIsDynamic(n.manifest),r.serviceDescriptions=e.getServiceDescriptions(n.manifest),r.protocol=n.manifest.protocol,r),i.isLast=1===t.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function I(){if(!h)throw new Error("setConfig function has to be called previously")}function R(t){return l.length>0?l[0].mpd.manifest.Period_asArray[t]:null}function k(t,e,n){var r,i,a,o,s;if(t)for(r=t.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(e===(i=a[s]).id)return n?s:i;return null}return t={getBandwidthForRepresentation:function(t,e){var n;return(n=k(R(e),t))?n.bandwidth:null},getIndexForRepresentation:function(t,e){return function(t,e){var n=k(t,e,!0);return null!==n?n:-1}(R(e),t)},getMaxIndexForBufferType:function(t,n){return function(t,n){var r,i,a,o;if(!t||!n)return-1;for(i=t.AdaptationSet_asArray,o=0;o<i.length;o+=1)if(a=(r=i[o]).Representation_asArray,e.getIsTypeOf(r,n))return a.length;return-1}(R(n),t)},convertRepresentationToRepresentationInfo:function(t){if(t){var n=new i.default,r=e.getRepresentationFor(t.index,t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index]);return n.id=t.id,n.quality=t.index,n.bandwidth=e.getBandwidth(r),n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.mediaInfo=x(t.adaptation),n}return null},getStreamsInfo:function(t,e){var n=[],r=l;if(t&&(I(),r=b(t)),r.length>0){(!e||e>r.length)&&(e=r.length);for(var i=0;i<e;i++)n.push(D(r[i]))}return n},getMediaInfoForType:function(t,n){if(0===l.length||!t)return null;var r=A(t,l);if(!r)return null;var i=e.getAdaptationsForPeriod(r),a=v(t.index,n,t);return a?x(i[e.getIndexForAdaptation(a,l[0].mpd.manifest,t.index)]):null},getAllMediaInfoForType:_,getAdaptationForType:v,getRealAdaptation:function(t,n){var r,i,a=A(t,l);return r=n?n.id:null,l.length>0&&a&&(i=r?e.getAdaptationForId(r,l[0].mpd.manifest,a.index):e.getAdaptationForIndex(n?n.index:null,l[0].mpd.manifest,a.index)),i},getRealPeriodByIndex:function(t){return e.getRealPeriodForIndex(t,l[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(t){try{return e.getEssentialPropertiesForRepresentation(t)}catch(n){return[]}},getVoRepresentations:function(t){var n=w(t);return e.getRepresentationsForAdaptation(n)},getEventsFor:function(t,n){var r=[];if(l.length>0){var s=l[0].mpd.manifest;t instanceof o.default?r=e.getEventsForPeriod(A(t,l)):t instanceof a.default?r=e.getEventStreamForAdaptationSet(s,w(t)):t instanceof i.default&&(r=e.getEventStreamForRepresentation(s,n))}return r},getEvent:function(t,e,n,r){try{if(!t||!e||isNaN(n)||!r)return null;var i=t.scheme_id_uri,a=t.value;if(!e[i+"/"+a])return null;var o,s=new u.default,l=t.timescale||1,c=r.adaptation.period.start,f=e[i+"/"+a],d=isNaN(r.presentationTimeOffset)?isNaN(f.presentationTimeOffset)?0:f.presentationTimeOffset:r.presentationTimeOffset,h=t.presentation_time_delta/l;o=0===t.version?c+n-d+h:c-d+h;var p=t.event_duration,g=t.id,v=t.message_data;return s.eventStream=f,s.eventStream.value=a,s.eventStream.timescale=l,s.duration=p,s.id=g,s.calculatedPresentationTime=o,s.messageData=v,s.presentationTimeDelta=h,s}catch(m){return null}},getMpd:E,setConfig:function(t){t&&(t.constants&&(h=t.constants),t.cea608parser&&(p=t.cea608parser),t.errHandler&&e.setConfig({errHandler:t.errHandler}),t.BASE64&&e.setConfig({BASE64:t.BASE64}))},updatePeriods:function(t){if(!t)return null;I(),l=b(t)},getIsTextTrack:function(t){return e.getIsText(t)},getUTCTimingSources:function(){var t=S();return e.getUTCTimingSources(t)},getSuggestedPresentationDelay:function(){return e.getSuggestedPresentationDelay(l.length>0?l[0].mpd:null)},getAvailabilityStartTime:function(t){var n=E(t);return e.getAvailabilityStartTime(n)},getIsTypeOf:function(t,n){return e.getIsTypeOf(t,n)},getIsDynamic:function(t){var n=S(t);return e.getIsDynamic(n)},getDuration:function(t){var n=S(t);return e.getDuration(n)},getRegularPeriods:b,getLocation:function(t){return e.getLocation(t)},getPatchLocation:function(t){var n=e.getPatchLocation(t),r=e.getPublishTime(t);if(!n||!r)return null;if(n.hasOwnProperty("ttl")&&r){var i=1e3*parseFloat(n.ttl);if(r.getTime()+i<=(new Date).getTime())return null}return n.__text},getManifestUpdatePeriod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getManifestUpdatePeriod(t,n)},getPublishTime:function(t){return e.getPublishTime(t)},getIsDVB:function(t){return e.hasProfile(t,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(t){return n.getIsPatch(t)},getBaseURLsFromElement:function(t){return e.getBaseURLsFromElement(t)},getRepresentationSortFunction:function(){return e.getRepresentationSortFunction()},getCodec:function(t,n,r){return e.getCodec(t,n,r)},getPeriodById:function(t){if(!t||0===l.length)return null;var e=l.filter((function(e){return e.id===t}));return e&&e.length>0?e[0]:null},setCurrentMediaInfo:function(t,e,n){d[t]=d[t]||{},d[t][e]=d[t][e]||{},d[t][e]=n},isPatchValid:function(t,r){var i=e.getId(t),a=n.getMpdId(r),o=e.getPublishTime(t),s=n.getPublishTime(r),u=n.getOriginalPublishTime(r);return!!(i&&a&&i==a&&o&&u&&o.getTime()==u.getTime()&&s&&o.getTime()<s.getTime())},applyPatchToManifest:function(t,e){n.getPatchOperations(e).forEach((function(e){var n=e.getMpdTarget(t);if(null!==n){var r=n.name,i=n.target,a=n.leaf;if(e.xpath.findsAttribute())switch(e.action){case"add":case"replace":i[r]=e.value;break;case"remove":delete i[r]}else{var o=(i[r+"_asArray"]||[]).indexOf(a),s="prepend"===e.position||"before"===e.position;if(("remove"===e.action||"replace"===e.action)&&(delete i[r],-1!=o)){var u=i[r+"_asArray"];u.splice(o,1),u.length>1?i[r]=u:1==u.length?i[r]=u[0]:delete i[r+"_asArray"]}"add"!==e.action&&"replace"!==e.action||Object.keys(e.value).forEach((function(t){var n=e.value[t],a=i[t+"_asArray"]||[];0===a.length&&i[t]&&a.push(i[t]),0===a.length?a=n:a.splice.apply(a,[t==r&&-1!=o?o+(s?0:1)+("replace"==e.action?-1:0):s?0:a.length,0].concat(n)),i[t+"_asArray"]=a,i[t]=1==a.length?a[0]:a}))}}}))},areMediaInfosEqual:m,reset:T},e=Object(c.default)(g).getInstance(),n=Object(f.default)(g).getInstance(),T(),t}d.__dashjs_factory_name="DashAdapter",e.default=l.default.getSingletonFactory(d)},"./src/dash/DashHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/FragmentRequest.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/dash/utils/SegmentsUtils.js"),u=n("./src/dash/constants/DashConstants.js");function l(t){var e,n,a,l,c,f=(t=t||{}).eventBus,d=t.urlUtils,h=t.type,p=t.streamInfo,g=t.segmentsController,v=t.timelineConverter,m=t.baseURLController;function y(){return h}function _(){a=null}function b(t,e,n){var r,i,a=m.resolve(n.path);return a&&e!==a.url&&d.isRelative(e)?(r=a.url,i=a.serviceLocation,e&&(r=d.resolve(e,r))):r=e,!d.isRelative(r)&&(t.url=r,t.serviceLocation=i,!0)}function E(t,e){if(null==e)return null;var n=new r.default,a=e.representation,o=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].bandwidth,u=e.media;return u=Object(s.replaceTokenForTemplate)(u,"Number",e.replacementNumber),u=Object(s.replaceTokenForTemplate)(u,"Time",e.replacementTime),u=Object(s.replaceTokenForTemplate)(u,"Bandwidth",o),u=Object(s.replaceIDForTemplate)(u,a.id),u=Object(s.unescapeDollarsInTemplate)(u),n.mediaType=y(),n.type=i.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=e.mediaRange,n.startTime=e.presentationStartTime,n.mediaStartTime=e.mediaStartTime,n.duration=e.duration,n.timescale=a.timescale,n.availabilityStartTime=e.availabilityStartTime,n.availabilityEndTime=e.availabilityEndTime,n.wallStartTime=e.wallStartTime,n.quality=a.index,n.index=e.index,n.mediaInfo=t,n.adaptationIndex=a.adaptation.index,n.representationId=a.id,b(n,u,a)?n:void 0}function T(t,e,r){var i=null;if(!e||!e.segmentInfoType)return i;var o=g.getSegmentByTime(e,r);return o&&(a=o,n.debug("Index for time "+r+" is "+o.index),i=E(t,o)),i}function S(){n.debug("Dynamic stream complete"),c=!0}return e={initialize:function(t){l=t,c=!1,g.initialize(t)},getStreamId:function(){return p.id},getType:y,getStreamInfo:function(){return p},getInitRequest:function(t,e){return e?function(t,e,n){var a=new r.default,o=e.adaptation.period,u=o.start;if(a.mediaType=n,a.type=i.HTTPRequest.INIT_SEGMENT_TYPE,a.range=e.range,a.availabilityStartTime=v.calcAvailabilityStartTimeFromPresentationTime(u,e,l),a.availabilityEndTime=v.calcAvailabilityEndTimeFromPresentationTime(u+o.duration,e,l),a.quality=e.index,a.mediaInfo=t,a.representationId=e.id,b(a,e.initialization,e))return a.url=Object(s.replaceTokenForTemplate)(a.url,"Bandwidth",e.bandwidth),a}(t,e,y()):null},getSegmentRequestForTime:T,getCurrentIndex:function(){return a?a.index:-1},getNextSegmentRequest:function(t,e){var r=null;if(!e||!e.segmentInfoType)return null;var i=a?a.index+1:0,o=g.getSegmentByIndex(e,i,a?a.mediaStartTime:-1);if(o)r=E(t,o),a=o;else{if(l&&!c)return n.debug(y()+" No segment found at index: "+i+". Wait for next loop"),null;c=!0}return r},isLastSegmentRequested:function(t,e){if(!t||!a)return!1;if(c)return!0;if(!isFinite(t.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>e)return!1;if(t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=t.mediaFinishedInformation.numberOfSegments-1){if(!l||t.segmentInfoType===u.default.SEGMENT_TEMPLATE)return!0;if(l&&t.segmentInfoType===u.default.SEGMENT_LIST&&t.adaptation.period.nextPeriodId)return!0}return!!(l&&t.adaptation.period.nextPeriodId&&t.segmentInfoType===u.default.SEGMENT_TIMELINE&&t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){_(),f.off(o.default.DYNAMIC_TO_STATIC,S,e)},getNextSegmentRequestIdempotent:function(t,e){var n=g.getSegmentByIndex(e,a?a.index+1:0,a?a.mediaStartTime:-1);return n?E(t,n):null},getValidSeekTimeCloseToTargetTime:function(t,e,n,r){try{if(isNaN(t)||!e||!n)return NaN;if(t<0&&(t=0),isNaN(r)&&(r=.5),T(e,n,t))return t;for(var i=n.adaptation.period.start,a=n.adaptation.period.start+n.adaptation.period.duration,o=Math.min(t+r,a),s=Math.max(t-r,i),u=NaN,l=null;o<=a||s>=i;){var c=null,f=null;if(o<=a&&(c=T(e,n,o)),s>=i&&(f=T(e,n,s)),f){u=s,l=f;break}if(c){u=o,l=c;break}o+=r,s-=r}if(l){var d=l.startTime+l.duration;return t>=l.startTime&&d-t>r?t:t<l.startTime?l.startTime:Math.min(d-r,u)}return u}catch(h){return NaN}}},n=t.debug.getLogger(e),_(),f.on(o.default.DYNAMIC_TO_STATIC,S,e),e}l.__dashjs_factory_name="DashHandler",e.default=a.default.getClassFactory(l)},"./src/dash/DashMetrics.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/dash/utils/Round10.js"),u=n("./src/streaming/models/MetricsModel.js"),l=n("./src/core/Utils.js"),c=n("./src/streaming/vo/metrics/PlayList.js");function f(t){var e,n,a,f,d=this.context,h=(t=t||{}).metricsModel;function p(t){var e=h.getMetricsFor(t,!0);if(!e)return null;var n,r=e.HttpList,i=null;if(!r||r.length<=0)return null;for(n=r.length-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function g(t){var e=h.getMetricsFor(t,!0);return e&&e.HttpList?e.HttpList:[]}function v(t,e){if(!t)return null;var n=t[e];return n&&0!==n.length?n[n.length-1]:null}return e={getCurrentRepresentationSwitch:function(t){return v(h.getMetricsFor(t,!0),o.default.TRACK_SWITCH)},getCurrentBufferState:function(t){return v(h.getMetricsFor(t,!0),o.default.BUFFER_STATE)},getCurrentBufferLevel:function(t){var e=v(h.getMetricsFor(t,!0),o.default.BUFFER_LEVEL);return e?s.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:g,getCurrentDroppedFrames:function(){return v(h.getMetricsFor(r.default.VIDEO,!0),o.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(t){return v(h.getMetricsFor(t,!0),o.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(t){return v(t?h.getMetricsFor(t,!0):h.getMetricsFor(r.default.VIDEO,!0)||h.getMetricsFor(r.default.AUDIO,!0),o.default.DVR_INFO)},getCurrentManifestUpdate:function(){return v(h.getMetricsFor(r.default.STREAM),o.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(t,e){if(!e)return null;var n={},r=p(t);r&&(n=l.default.parseHttpHeaders(r._responseHeaders));var i=n[e.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(t){if(!t)return null;var e,n,a,o={};for(a=(e=g(r.default.STREAM)).length-1;a>=0;a--)if((n=e[a]).type===i.HTTPRequest.MPD_TYPE){o=l.default.parseHttpHeaders(n._responseHeaders);break}var s=o[t.toLowerCase()];return void 0===s?null:s},addRepresentationSwitch:function(t,e,n,r,i){h.addRepresentationSwitch(t,e,n,r,i)},addDVRInfo:function(t,e,n,r){h.addDVRInfo(t,e,n,r)},updateManifestUpdateInfo:function(t){var e=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(e,t)},addManifestUpdateStreamInfo:function(t){if(t){var e=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(e,t.id,t.index,t.start,t.duration)}},addManifestUpdateRepresentationInfo:function(t,e){if(t){var n=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(n,t.id,t.index,t.streamIndex,e,t.presentationTimeOffset,t.startNumber,t.fragmentInfoType)}},addManifestUpdate:function(t){h.addManifestUpdate(r.default.STREAM,t.type,t.requestStartDate,t.requestEndDate)},addHttpRequest:function(t,e,n,r,i){h.addHttpRequest(t.mediaType,null,t.type,t.url,t.quality,e,t.serviceLocation||null,t.range||null,t.requestStartDate,t.firstByteDate,t.requestEndDate,n,t.duration,r,i)},addSchedulingInfo:function(t,e){h.addSchedulingInfo(t.mediaType,new Date,t.type,t.startTime,t.availabilityStartTime,t.duration,t.quality,t.range,e)},addRequestsQueue:function(t,e,n){h.addRequestsQueue(t,e,n)},addBufferLevel:function(t,e,n){h.addBufferLevel(t,e,n)},addBufferState:function(t,e,n){h.addBufferState(t,e,n)},addDroppedFrames:function(t){h.addDroppedFrames(r.default.VIDEO,t)},addPlayList:function(){f&&(h.addPlayList(f),f=null)},addDVBErrors:function(t){h.addDVBErrors(t)},createPlaylistMetrics:function(t,e){(f=new c.PlayList).start=new Date,f.mstart=t,f.starttype=e},createPlaylistTraceMetrics:function(t,e,r){!0===n&&(n=!1,(a=new c.PlayListTrace).representationid=t,a.start=new Date,a.mstart=e,a.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(t){if(a)for(var e in a)a[e]=t[e]},pushPlayListTraceMetrics:function(t,e){if(!1===n&&f&&a&&a.start){var r=a.start,i=t.getTime()-r.getTime();a.duration=i,a.stopreason=e,f.trace.push(a),n=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||Object(u.default)(d).getInstance({settings:t.settings}),n=!0,a=null,f=null,e}f.__dashjs_factory_name="DashMetrics",e.default=a.default.getSingletonFactory(f)},"./src/dash/SegmentBaseLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/Segment.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/FragmentRequest.js"),s=n("./src/streaming/net/URLLoader.js");function u(){var t,e,n,a,u,l,c,f,d,h,p,g,v,m=this.context;function y(t,e,n){n({segments:t,representation:e,error:t?void 0:new i.default(d.SEGMENT_BASE_LOADER_ERROR_CODE,d.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function _(t){if(t.url){var e=new o.default;return e.setInfo(t),e}}return t={setConfig:function(r){r.baseURLController&&(v=r.baseURLController),r.dashMetrics&&(l=r.dashMetrics),r.mediaPlayerModel&&(c=r.mediaPlayerModel),r.errHandler&&(n=r.errHandler),r.boxParser&&(a=r.boxParser),r.debug&&(e=r.debug.getLogger(t)),r.requestModifier&&(u=r.requestModifier),r.errors&&(d=r.errors),r.urlUtils&&(g=r.urlUtils),r.constants&&(h=r.constants),r.dashConstants&&(p=r.dashConstants)},initialize:function(){f=Object(s.default)(m).create({errHandler:n,dashMetrics:l,mediaPlayerModel:c,requestModifier:u,boxParser:a,errors:d,urlUtils:g,constants:h,dashConstants:p})},loadInitialization:function(t,n){return new Promise((function(r){!function t(n,r,i,o){var s=null,u=n?v.resolve(n.path):null,l=o||{init:!0,url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};e.debug("Start searching for initialization.");var c=_(l);f.load({request:c,success:function(e){if(l.bytesLoaded=l.range.end,!(s=a.findInitRange(e)))return l.range.end=l.bytesLoaded+l.bytesToLoad,t(n,r,i,l);n.range=s,i(n)},error:function(){i(n)}}),e.debug("Perform init search: "+l.url)}(t,n,r)}))},loadSegments:function(t,n,i){return new Promise((function(o){!function t(n,i,o,s,u,l){if(o&&(void 0===o.start||void 0===o.end)){var c=o?o.toString().split("-"):null;o=c?{start:parseFloat(c[0]),end:parseFloat(c[1])}:null}u=u||y;var d=null,h=null,p=!!o,g=n?v.resolve(n.path):null,m={init:!1,url:g?g.url:void 0,range:p?o:{start:0,end:1500},searching:!p,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:i},b=_(m);f.load({request:b,success:function(o){var l=m.bytesToLoad,c=o.byteLength;if(m.bytesLoaded=m.range.end-m.range.start,d=a.parse(o),(h=d.getBox("sidx"))&&h.isComplete){var f,p,g=h.references;if(null!=g&&g.length>0&&(f=1===g[0].reference_type),f){var v,y,_,b;e.debug("Initiate multiple SIDX load."),m.range.end=m.range.start+h.size;var E=[],T=0,S=(h.offset||m.range.start)+h.size,w=function(t){t?(E=E.concat(t),++T>=y&&(E.sort((function(t,e){return t.startTime-e.startTime<0?-1:0})),u(E,n,s))):u(null,n,s)};for(v=0,y=g.length;v<y;v++)_=S,b=S+g[v].referenced_size-1,S+=g[v].referenced_size,t(n,i,{start:_,end:b},s,w,m)}else e.debug("Parsing segments from SIDX. representation "+i+" - id: "+n.id+" for range : "+m.range.start+" - "+m.range.end),p=function(t,e){for(var n,i,a,o=t.references,s=o.length,u=t.timescale,l=t.earliest_presentation_time,c=e.range.start+t.offset+t.first_offset+t.size,f=[],d=0;d<s;d++)i=o[d].subsegment_duration,a=o[d].referenced_size,(n=new r.default).duration=i,n.startTime=l,n.timescale=u,n.mediaRange=c+"-"+(c+a-1),f.push(n),l+=i,c+=a;return f}(h,m),u(p,n,s)}else{if(h)m.range.start=h.offset||m.range.start,m.range.end=m.range.start+(h.size||l);else{if(c<m.bytesLoaded)return void u(null,n,s);var A=d.getLastBox();A&&A.size?(m.range.start=A.offset+A.size,m.range.end=m.range.start+l):m.range.end+=l}t(n,i,m.range,s,null,m)}},error:function(){u(null,n,s)}}),e.debug("Perform SIDX load for type ".concat(i," : ").concat(m.url," with range ").concat(m.range.start," - ").concat(m.range.end))}(t,n,i,o)}))},reset:function(){f&&(f.abort(),f=null)}}}u.__dashjs_factory_name="SegmentBaseLoader",e.default=a.default.getSingletonFactory(u)},"./src/dash/WebmSegmentBaseLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/EBMLParser.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/dash/vo/Segment.js"),s=n("./src/streaming/vo/FragmentRequest.js"),u=n("./src/streaming/net/URLLoader.js"),l=n("./src/streaming/vo/DashJSError.js");function c(){var t,e,n,a,c,f,d,h,p,g,v=this.context;function m(t){var e=new s.default;return e.setInfo(t),e}return t={setConfig:function(n){if(!(n.baseURLController&&n.dashMetrics&&n.mediaPlayerModel&&n.errHandler))throw new Error(i.default.MISSING_CONFIG_ERROR);g=n.baseURLController,f=n.dashMetrics,d=n.mediaPlayerModel,a=n.errHandler,p=n.errors,e=n.debug.getLogger(t),c=n.requestModifier},initialize:function(){h=Object(u.default)(v).create({errHandler:a,dashMetrics:f,mediaPlayerModel:d,requestModifier:c,errors:p})},loadInitialization:function(t,n){return new Promise((function(r){var i=null,a=t?g.resolve(t.path):null,o=t?t.range.split("-"):null,s={range:{start:o?parseFloat(o[0]):null,end:o?parseFloat(o[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:n};e.info("Start loading initialization."),i=m(s),h.load({request:i,success:function(){r(t)},error:function(){r(t)}}),e.debug("Perform init load: "+s.url)}))},loadSegments:function(t,i,a){return new Promise((function(s){var u=null,c=t?g.resolve(t.path):null,f=c?c.url:void 0;u=m({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:u,url:f,init:!1,mediaType:i}),e.debug("Parsing ebml header"),h.load({request:u,success:function(i){!function(t,i,a,s){if(t&&0!==t.byteLength){var u,l,c,f,d=Object(r.default)(v).create({data:t}),p=a?a.split("-"):null,g=null,y={url:i,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:g};for(e.debug("Parse EBML header: "+y.url),d.skipOverElement(n.EBML),d.consumeTag(n.Segment),c=d.getMatroskaCodedNum(),c+=d.getPos(),f=d.getPos();d.moreData()&&!d.consumeTagAndSize(n.Segment.Info,!0);)if(!(d.skipOverElement(n.Segment.SeekHead,!0)||d.skipOverElement(n.Segment.Tracks,!0)||d.skipOverElement(n.Segment.Cues,!0)||d.skipOverElement(n.Void,!0)))throw new Error("no valid top level element found");for(;void 0===u;){var _=d.getMatroskaCodedNum(!0),b=d.getMatroskaCodedNum();switch(_){case n.Segment.Info.Duration.tag:u=d[n.Segment.Info.Duration.parse](b);break;default:d.setPos(d.getPos()+b)}}g=m(y),h.load({request:g,success:function(t){l=function(t,i,a,s){var u,l,c,f,d;for(l=[],f=0,d=(u=function(t){var e,i,a=[],o=Object(r.default)(v).create({data:t});for(o.consumeTagAndSize(n.Segment.Cues);o.moreData()&&o.consumeTagAndSize(n.Segment.Cues.CuePoint,!0);){for((e={}).CueTime=o.parseTag(n.Segment.Cues.CuePoint.CueTime),e.CueTracks=[];o.moreData()&&o.consumeTag(n.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=o.getMatroskaCodedNum(),u=o.getPos();if((i={}).Track=o.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=o.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),e.CueTracks.push(i),o.setPos(u+s)}if(0===e.CueTracks.length)throw new Error("Mandatory cuetrack not found");a.push(e)}if(0===a.length)throw new Error("mandatory cuepoint not found");return a}(t)).length;f<d;f+=1)(c=new o.default).duration=f<u.length-1?u[f+1].CueTime-u[f].CueTime:s-u[f].CueTime,c.startTime=u[f].CueTime,c.timescale=1e3,c.mediaRange=u[f].CueTracks[0].ClusterPosition+i+"-"+(f<u.length-1?u[f+1].CueTracks[0].ClusterPosition+i-1:a-1),l.push(c);return e.debug("Parsed cues: "+l.length+" cues."),l}(t,f,c,u),s(l)},error:function(){e.error("Download Error: Cues "+y.url),s(null)}}),e.debug("Perform cues load: "+y.url+" bytes="+y.range.start+"-"+y.range.end)}else s(null)}(i,f,a,(function(e){s({segments:e,representation:t,error:e?void 0:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){s({representation:t,error:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){h&&(h.abort(),h=null)}},n={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}c.__dashjs_factory_name="WebmSegmentBaseLoader",e.default=a.default.getSingletonFactory(c)},"./src/dash/constants/DashConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/dash/controllers/RepresentationController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/dash/utils/SegmentsUtils.js");function s(t){var e,n,i,s,u,l=(t=t||{}).eventBus,c=t.events,f=t.abrController,d=t.dashMetrics,h=t.playbackController,p=t.timelineConverter,g=t.type,v=t.streamInfo,m=t.dashConstants,y=t.segmentsController,_=t.isDynamic;function b(){return g}function E(){if(!(f&&d&&h&&p))throw new Error(r.default.MISSING_CONFIG_ERROR)}function T(){return i}function S(){return u}function w(){n=null,i=!0,s=[]}function A(t){return new Promise((function(e,n){var r=t.hasInitialization(),i=t.hasSegments(),a=[];a.push(y.updateInitData(t,r)),a.push(y.updateSegmentData(t,i)),Promise.all(a).then((function(n){var r;n[0]&&!n[0].error&&(t=function(t,e){return e&&!e.error&&e.representation?e.representation:t}(t,n[0])),n[1]&&!n[1].error&&(t=function(t,e){if(e&&!e.error){var n,r,i,a,s=e.segments,u=[],l=0;for(n=0,r=s?s.length:0;n<r;n++)i=s[n],(a=Object(o.getTimeBasedSegment)(p,_,t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(u.push(a),a=null,l++);return u.length>0&&(t.segments=u),t}}(t,n[1])),(r=t).mediaFinishedInformation=y.getMediaFinishedInformation(r),function(t){if(T()){var e,n=d.getCurrentManifestUpdate(),r=!1;if(n){for(var i=0;i<n.representationInfo.length;i++)if((e=n.representationInfo[i]).index===t.index&&e.mediaType===b()){r=!0;break}r||d.addManifestUpdateRepresentationInfo(t,b())}if(function(){for(var t=0,e=s.length;t<e;t++){var n=s[t].segmentInfoType;if(!s[t].hasInitialization()||(n===m.SEGMENT_BASE||n===m.BASE_URL)&&!s[t].segments)return!1}return!0}()){f.setPlaybackQuality(g,v,s.indexOf(u));var a=d.getCurrentDVRInfo(g);a&&d.updateManifestUpdateInfo({latency:a.range.end-h.getTime()}),d.getCurrentRepresentationSwitch(S().adaptation.type)||x(),D()}}}(t),e()})).catch((function(t){n(t)}))}))}function x(){E();var t=new Date,e=S(),n=1e3*h.getTime();e&&d.addRepresentationSwitch(e.adaptation.type,t,n,e.id),l.trigger(a.default.REPRESENTATION_SWITCH,{mediaType:g,streamId:v.id,currentRepresentation:e,numberOfRepresentations:s.length},{streamId:v.id,mediaType:g})}function C(t){return null==t||t>=s.length?null:s[t]}function D(t){i=!1,l.trigger(c.DATA_UPDATE_COMPLETED,{data:n,currentRepresentation:u,error:t},{streamId:v.id,mediaType:g})}function I(t){u=t}function R(t){if(t.newDuration){var e=S();e&&e.adaptation.period&&(e.adaptation.period.duration=t.newDuration)}}return e={getStreamId:function(){return v.id},getType:b,getData:function(){return n},isUpdating:T,updateData:function(t,e,a,o,u){if(E(),i=!0,s=e,I(C(u)),n=t,a!==r.default.VIDEO&&a!==r.default.AUDIO&&(a!==r.default.TEXT||!o))return D(),Promise.resolve();for(var l=[],c=0,f=s.length;c<f;c++)l.push(A(s[c]));return Promise.all(l)},getCurrentRepresentation:S,getRepresentationForQuality:C,prepareQualityChange:function(t){I(C(t)),x()},reset:function(){l.off(a.default.MANIFEST_VALIDITY_CHANGED,R,e),w()}},w(),l.on(a.default.MANIFEST_VALIDITY_CHANGED,R,e),e}s.__dashjs_factory_name="RepresentationController",e.default=i.default.getClassFactory(s)},"./src/dash/controllers/SegmentBaseController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/SegmentBaseLoader.js"),a=n("./src/dash/WebmSegmentBaseLoader.js");function o(t){var e,n,r,o=this.context,s=(t=t||{}).eventBus,u=t.events,l=t.dashMetrics,c=t.mediaPlayerModel,f=t.errHandler,d=t.baseURLController,h=t.debug,p=t.boxParser,g=t.requestModifier,v=t.errors;function m(t){return"webm"===(t?t.split("/")[1]:"").toLowerCase()}return e={initialize:function(){n.initialize(),r.initialize()},getSegmentBaseInitSegment:function(t){return m(t.representation.mimeType)?r.loadInitialization(t.representation,t.mediaType):n.loadInitialization(t.representation,t.mediaType)},getSegmentList:function(t){return m(t.mimeType)?r.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null):n.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null)},reset:function(){n.reset(),r.reset()}},n=Object(i.default)(o).getInstance(),r=Object(a.default)(o).getInstance(),n.setConfig({baseURLController:d,dashMetrics:l,mediaPlayerModel:c,errHandler:f,eventBus:s,events:u,errors:v,debug:h,boxParser:p,requestModifier:g}),r.setConfig({baseURLController:d,dashMetrics:l,mediaPlayerModel:c,errHandler:f,eventBus:s,events:u,errors:v,debug:h,requestModifier:g}),e}o.__dashjs_factory_name="SegmentBaseController";var s=r.default.getSingletonFactory(o);e.default=s},"./src/dash/controllers/SegmentsController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/utils/TimelineSegmentsGetter.js"),a=n("./src/dash/utils/TemplateSegmentsGetter.js"),o=n("./src/dash/utils/ListSegmentsGetter.js"),s=n("./src/dash/utils/SegmentBaseGetter.js");function u(t){var e,n,r=this.context,u=(t=t||{}).dashConstants,l=t.type,c=t.segmentBaseController;function f(t){return t?t.segments?n[u.SEGMENT_BASE]:n[t.segmentInfoType]:null}return e={initialize:function(e){n[u.SEGMENT_TIMELINE]=Object(i.default)(r).create(t,e),n[u.SEGMENT_TEMPLATE]=Object(a.default)(r).create(t,e),n[u.SEGMENT_LIST]=Object(o.default)(r).create(t,e),n[u.SEGMENT_BASE]=Object(s.default)(r).create(t,e)},updateInitData:function(t,e){return e?Promise.resolve():c.getSegmentBaseInitSegment({representation:t,mediaType:l})},updateSegmentData:function(t,e){return e?Promise.resolve():c.getSegmentList({mimeType:t.mimeType,representation:t,mediaType:l})},getSegmentByIndex:function(t,e,n){var r=f(t);return r?r.getSegmentByIndex(t,e,n):null},getSegmentByTime:function(t,e){var n=f(t);return n?n.getSegmentByTime(t,e):null},getMediaFinishedInformation:function(t){var e=f(t);return e?e.getMediaFinishedInformation(t):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},e}u.__dashjs_factory_name="SegmentsController";var l=r.default.getClassFactory(u);e.default=l},"./src/dash/models/DashManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/dash/vo/Representation.js"),o=n("./src/dash/vo/AdaptationSet.js"),s=n("./src/dash/vo/Period.js"),u=n("./src/dash/vo/Mpd.js"),l=n("./src/dash/vo/UTCTiming.js"),c=n("./src/dash/vo/Event.js"),f=n("./src/dash/vo/BaseURL.js"),d=n("./src/dash/vo/EventStream.js"),h=n("./src/streaming/utils/ObjectUtils.js"),p=n("./src/streaming/utils/URLUtils.js"),g=n("./src/core/FactoryMaker.js"),v=n("./src/core/Debug.js"),m=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/errors/Errors.js"),_=n("./src/streaming/thumbnail/ThumbnailTracks.js");function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return E(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(){var t,e,n,g,E=this.context,T=Object(p.default)(E).getInstance(),S=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function w(t,e){if(!t)throw new Error("adaptation is not defined");if(!e)throw new Error("type is not defined");if(t.Representation_asArray&&t.Representation_asArray.length){var n=O(t.Representation_asArray[0]);if(n&&n.length>0&&_.THUMBNAILS_SCHEME_ID_URIS.indexOf(n[0].schemeIdUri)>=0)return e===r.default.IMAGE}if(t.ContentComponent_asArray&&t.ContentComponent_asArray.length>0){if(t.ContentComponent_asArray.length>1)return e===r.default.MUXED;if(t.ContentComponent_asArray[0].contentType===e)return!0}var a=e===r.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(e);if(t.Representation_asArray&&t.Representation_asArray.length&&a.test(t.Representation_asArray[0].codecs))return!0;if(t.hasOwnProperty(i.default.MIME_TYPE))return a.test(t.mimeType);if(t.Representation_asArray)for(var o,s=0;s<t.Representation_asArray.length;s++)if((o=t.Representation_asArray[s]).hasOwnProperty(i.default.MIME_TYPE))return a.test(o.mimeType);return!1}function A(t){if(!t)throw new Error("adaptation is not defined");if(t.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(i.default.SEGMENT_TIMELINE)||t.hasOwnProperty(i.default.SEGMENT_LIST)||t.hasOwnProperty(i.default.SEGMENT_BASE))return!0;if(t.Representation_asArray&&t.Representation_asArray.length>0){var e=t.Representation_asArray[0];if(e.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(i.default.SEGMENT_TIMELINE)||e.hasOwnProperty(i.default.SEGMENT_LIST)||e.hasOwnProperty(i.default.SEGMENT_BASE))return!0}return!1}function x(t){return w(t,r.default.TEXT)}function C(t){return w(t,r.default.IMAGE)}function D(t){return t&&Array.isArray(t.Representation_asArray)&&t.Representation_asArray.sort((function(t,e){return t.bandwidth-e.bandwidth})),t}function I(t,e){return t&&t.Period_asArray&&S(e)&&t.Period_asArray[e]?t.Period_asArray[e].AdaptationSet_asArray:[]}function R(t){return t&&t.Period_asArray?t.Period_asArray:[]}function k(t){var e=!1;return t&&t.hasOwnProperty("type")&&(e=t.type===i.default.DYNAMIC),e}function O(t){return t&&t.EssentialProperty_asArray&&t.EssentialProperty_asArray.length?t.EssentialProperty_asArray.map((function(t){return{schemeIdUri:t.schemeIdUri,value:t.value}})):null}function P(t){if(!t||!t.S_asArray)return NaN;var e=t.S_asArray[0],n=t.S_asArray[1];return e.hasOwnProperty("d")?e.d:n.t-e.t}function M(t,e){if(!t)throw new Error("Period cannot be null or undefined");var n=s.default.DEFAULT_ID+"_"+e;return t.hasOwnProperty(i.default.ID)&&t.id.length>0&&"__proto__"!==t.id&&(n=t.id),n}function L(t,e){var n,a=[];if(!t)return a;for(n=0;n<t.length;n++){var o=new d.default;if(o.timescale=1,o.representation=e,!t[n].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=t[n].schemeIdUri,t[n].hasOwnProperty(i.default.TIMESCALE)&&(o.timescale=t[n].timescale),t[n].hasOwnProperty(i.default.VALUE)&&(o.value=t[n].value),a.push(o)}return a}function N(t){var e=[],n=!1;return(t.BaseURL_asArray||[t.baseUri]).some((function(r){if(r){var a=new f.default,o=r.__text||r;return T.isRelative(o)&&(n=!0,t.baseUri&&(o=T.resolve(o,t.baseUri))),a.url=o,a.serviceLocation=r.hasOwnProperty(i.default.SERVICE_LOCATION)&&r.serviceLocation.length?r.serviceLocation:o,r.hasOwnProperty(i.default.DVB_PRIORITY)&&(a.dvb_priority=r[i.default.DVB_PRIORITY]),r.hasOwnProperty(i.default.DVB_WEIGHT)&&(a.dvb_weight=r[i.default.DVB_WEIGHT]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=r[i.default.AVAILABILITY_TIME_OFFSET]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==r[i.default.AVAILABILITY_TIME_COMPLETE]),e.push(a),n}})),e}return t={getIsTypeOf:w,getIsText:x,getIsFragmented:A,getLanguageForAdaptation:function(t){var e="";return t&&t.hasOwnProperty(i.default.LANG)&&(e=t.lang.replace(/[^A-Za-z0-9-]/g,"")),e},getViewpointForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.VIEWPOINT)?t.Viewpoint:null},getRolesForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.ROLE_ASARRAY)?t.Role_asArray:[]},getAccessibilityForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?t.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(t){return t&&t.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(t,e,n){var r=I(e,n);return r.length>0&&S(t)?r[t]:null},getIndexForAdaptation:function(t,e,n){if(!t)return-1;for(var r=I(e,n),i=0;i<r.length;i++)if(Object(h.default)(E).getInstance().areEqual(r[i],t))return i;return-1},getAdaptationForId:function(t,e,n){var r,a,o=I(e,n);for(r=0,a=o.length;r<a;r++)if(o[r].hasOwnProperty(i.default.ID)&&o[r].id===t)return o[r];return null},getAdaptationsForType:function(t,e,n){var r,i,a=I(t,e),o=[];for(r=0,i=a.length;r<i;r++)w(a[r],n)&&o.push(D(a[r]));return o},getRealPeriods:R,getRealPeriodForIndex:function(t,e){var n=R(e);return n.length>0&&S(t)?n[t]:null},getCodec:function(t,e,n){var r=null;if(t&&t.Representation_asArray&&t.Representation_asArray.length>0){var i=S(e)&&e>=0&&e<t.Representation_asArray.length?t.Representation_asArray[e]:t.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getSelectionPriority:function(t){try{var e=t&&void 0!==t.selectionPriority?parseInt(t.selectionPriority):1;return isNaN(e)?1:e}catch(n){return 1}},getMimeType:function(t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0?t.Representation_asArray[0].mimeType:null},getKID:function(t){return t&&t.hasOwnProperty(i.default.CENC_DEFAULT_KID)?t[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(t){if(!t||!Array.isArray(t.Label_asArray))return[];for(var e=[],n=0;n<t.Label_asArray.length;n++)e.push({lang:t.Label_asArray[n].lang,text:t.Label_asArray[n].__text||t.Label_asArray[n]});return e},getContentProtectionData:function(t){return t&&t.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==t.ContentProtection_asArray.length?t.ContentProtection_asArray:null},getIsDynamic:k,getId:function(t){return t&&t[i.default.ID]||null},hasProfile:function(t,e){var n=!1;return t&&t.profiles&&t.profiles.length>0&&(n=-1!==t.profiles.indexOf(e)),n},getDuration:function(t){return t&&t.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?t.mediaPresentationDuration:t&&"dynamic"==t.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(t){return t&&t.bandwidth?t.bandwidth:NaN},getManifestUpdatePeriod:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return t&&t.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(n=t.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-e,1)},getPublishTime:function(t){return t&&t.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(t[i.default.PUBLISH_TIME]):null},getRepresentationCount:function(t){return t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray.length:0},getBitrateListForAdaptation:function(t){var e=D(t);return(e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map((function(t){return{bandwidth:t.bandwidth,width:t.width||0,height:t.height||0,scanType:t.scanType||null,id:t.id||null}}))},getRepresentationFor:function(t,e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0&&S(t)?e.Representation_asArray[t]:null},getRepresentationsForAdaptation:function(t){var e,n,r,o=[],s=function(t){if(t&&t.period&&S(t.period.index)){var e=t.period.mpd.manifest.Period_asArray[t.period.index];if(e&&e.AdaptationSet_asArray&&S(t.index))return D(e.AdaptationSet_asArray[t.index])}}(t);if(s&&s.Representation_asArray){if(t&&t.period&&S(t.period.index)){var u=N(t.period.mpd.manifest);u&&(n=u[0])}for(var l=0,c=s.Representation_asArray.length;l<c;++l){var f=s.Representation_asArray[l],d=new a.default;if(d.index=l,d.adaptation=t,f.hasOwnProperty(i.default.ID)&&(d.id=f.id),f.hasOwnProperty(i.default.CODECS)&&(d.codecs=f.codecs),f.hasOwnProperty(i.default.MIME_TYPE)&&(d.mimeType=f[i.default.MIME_TYPE]),f.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(d.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(i.default.BANDWITH)&&(d.bandwidth=f.bandwidth),f.hasOwnProperty(i.default.WIDTH)&&(d.width=f.width),f.hasOwnProperty(i.default.HEIGHT)&&(d.height=f.height),f.hasOwnProperty(i.default.SCAN_TYPE)&&(d.scanType=f.scanType),f.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(d.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(i.default.SEGMENT_BASE)?(e=f.SegmentBase,d.segmentInfoType=i.default.SEGMENT_BASE):f.hasOwnProperty(i.default.SEGMENT_LIST)?d.segmentInfoType=(e=f.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?i.default.SEGMENT_TIMELINE:i.default.SEGMENT_LIST:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?(d.segmentInfoType=(e=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?i.default.SEGMENT_TIMELINE:i.default.SEGMENT_TEMPLATE,e.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(d.initialization=e.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):d.segmentInfoType=i.default.BASE_URL,d.essentialProperties=O(f),e){if(e.hasOwnProperty(i.default.INITIALIZATION)){var h=e.Initialization;h.hasOwnProperty(i.default.SOURCE_URL)&&(d.initialization=h.sourceURL),h.hasOwnProperty(i.default.RANGE)&&(d.range=h.range)}else x(s)&&A(s)&&s.mimeType&&-1===s.mimeType.indexOf("application/mp4")&&(d.range=0);e.hasOwnProperty(i.default.TIMESCALE)&&(d.timescale=e.timescale),e.hasOwnProperty(i.default.DURATION)?d.segmentDuration=e.duration/d.timescale:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(e=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)&&(d.segmentDuration=P(e.SegmentTimeline)/d.timescale),e.hasOwnProperty(i.default.MEDIA)&&(d.media=e.media),e.hasOwnProperty(i.default.START_NUMBER)&&(d.startNumber=e.startNumber),e.hasOwnProperty(i.default.INDEX_RANGE)&&(d.indexRange=e.indexRange),e.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(d.presentationTimeOffset=e.presentationTimeOffset/d.timescale),e.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?d.availabilityTimeOffset=e.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(d.availabilityTimeOffset=n.availabilityTimeOffset),e.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?d.availabilityTimeComplete="false"!==e.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(d.availabilityTimeComplete=n.availabilityTimeComplete)}d.MSETimeOffset=(r=d).adaptation.period.start-r.presentationTimeOffset,d.path=[t.period.index,t.index,l],o.push(d)}}return o},getAdaptationsForPeriod:function(t){var n,a,s,u=t&&S(t.index)?t.mpd.manifest.Period_asArray[t.index]:null,l=[];if(u&&u.AdaptationSet_asArray)for(s=0;s<u.AdaptationSet_asArray.length;s++)a=u.AdaptationSet_asArray[s],n=new o.default,a.hasOwnProperty(i.default.ID)&&(n.id=a.id),n.index=s,n.period=t,w(a,r.default.MUXED)?n.type=r.default.MUXED:w(a,r.default.AUDIO)?n.type=r.default.AUDIO:w(a,r.default.VIDEO)?n.type=r.default.VIDEO:x(a)?n.type=r.default.TEXT:C(a)?n.type=r.default.IMAGE:e.warn("Unknown Adaptation stream type"),l.push(n);return l},getRegularPeriods:function(t){var a,o,u=!!t&&k(t.manifest),l=[],c=null,f=null,d=null,h=null;for(o=0,a=t&&t.manifest&&t.manifest.Period_asArray?t.manifest.Period_asArray.length:0;o<a;o++)(f=t.manifest.Period_asArray[o]).hasOwnProperty(i.default.START)?(h=new s.default).start=f.start:null!==c&&c.hasOwnProperty(i.default.DURATION)&&null!==d?(h=new s.default).start=parseFloat((d.start+d.duration).toFixed(5)):0!==o||u||((h=new s.default).start=0),null!==d&&isNaN(d.duration)&&(null!==h?d.duration=parseFloat((h.start-d.start).toFixed(5)):e.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==h&&(h.id=M(f,o),h.index=o,h.mpd=t,f.hasOwnProperty(i.default.DURATION)&&(h.duration=f.duration),d&&(d.nextPeriodId=h.id),l.push(h),c=f,d=h),f=null,h=null;return 0===l.length||null!==d&&isNaN(d.duration)&&(d.duration=parseFloat((function(t){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var e,i=k(t.mpd.manifest);return t.mpd.manifest.mediaPresentationDuration?e=t.mpd.manifest.mediaPresentationDuration:t.duration?e=t.duration:i?e=Number.POSITIVE_INFINITY:n.error(new m.default(y.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",t)),e}(d)-d.start).toFixed(5))),l},getMpd:function(t){var e=new u.default;return t&&(e.manifest=t,t.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?e.availabilityStartTime=new Date(t.availabilityStartTime.getTime()):t.loadedTime&&(e.availabilityStartTime=new Date(t.loadedTime.getTime())),t.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(e.availabilityEndTime=new Date(t.availabilityEndTime.getTime())),t.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(e.minimumUpdatePeriod=t.minimumUpdatePeriod),t.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(e.mediaPresentationDuration=t.mediaPresentationDuration),t.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)&&(e.suggestedPresentationDelay=t.suggestedPresentationDelay),t.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(e.timeShiftBufferDepth=t.timeShiftBufferDepth),t.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(e.maxSegmentDuration=t.maxSegmentDuration),t.hasOwnProperty(i.default.PUBLISH_TIME)&&(e.publishTime=new Date(t.publishTime))),e},getEventsForPeriod:function(t){var e,n,a=t&&t.mpd&&t.mpd.manifest?t.mpd.manifest:null,o=a?a.Period_asArray:null,s=o&&t&&S(t.index)?o[t.index].EventStream_asArray:null,u=[];if(s)for(e=0;e<s.length;e++){var l=new d.default;if(l.period=t,l.timescale=1,!s[e].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=s[e][r.default.SCHEME_ID_URI],s[e].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=s[e][i.default.TIMESCALE]),s[e].hasOwnProperty(i.default.VALUE)&&(l.value=s[e][i.default.VALUE]),s[e].hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=s[e][i.default.PRESENTATION_TIME_OFFSET]),n=0;s[e].Event_asArray&&n<s[e].Event_asArray.length;n++){var f=s[e].Event_asArray[n],h=new c.default;h.presentationTime=0,h.eventStream=l,f.hasOwnProperty(i.default.PRESENTATION_TIME)&&(h.presentationTime=f.presentationTime,h.calculatedPresentationTime=h.presentationTime/l.timescale+t.start-(l.presentationTimeOffset?l.presentationTimeOffset/l.timescale:0)),f.hasOwnProperty(i.default.DURATION)&&(h.duration=f.duration/l.timescale),f.hasOwnProperty(i.default.ID)&&(h.id=f.id),h.messageData=f.Signal&&f.Signal.Binary?g.decodeArray(f.Signal.Binary.toString()):f.messageData||f.__cdata||f.__text,u.push(h)}}return u},getEssentialPropertiesForRepresentation:O,getEventStreamForAdaptationSet:function(t,e){var n,r,i;return t&&t.Period_asArray&&e&&e.period&&S(e.period.index)&&(r=t.Period_asArray[e.period.index])&&r.AdaptationSet_asArray&&S(e.index)&&(i=r.AdaptationSet_asArray[e.index])&&(n=i.InbandEventStream_asArray),L(n,null)},getEventStreamForRepresentation:function(t,e){var n,r,i,a;return t&&t.Period_asArray&&e&&e.adaptation&&e.adaptation.period&&S(e.adaptation.period.index)&&(r=t.Period_asArray[e.adaptation.period.index])&&r.AdaptationSet_asArray&&S(e.adaptation.index)&&(i=r.AdaptationSet_asArray[e.adaptation.index])&&i.Representation_asArray&&S(e.index)&&(a=i.Representation_asArray[e.index])&&(n=a.InbandEventStream_asArray),L(n,e)},getUTCTimingSources:function(t){var e=k(t),n=!!t&&t.hasOwnProperty(i.default.AVAILABILITY_START_TIME),a=t?t.UTCTiming_asArray:null,o=[];return(e||n)&&a&&a.forEach((function(t){var e=new l.default;t.hasOwnProperty(r.default.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty(i.default.VALUE)&&(e.value=t.value.toString(),o.push(e)))})),o},getBaseURLsFromElement:N,getRepresentationSortFunction:function(){return function(t,e){return t.bandwidth-e.bandwidth}},getLocation:function(t){if(t&&t.hasOwnProperty(r.default.LOCATION))return t.Location=t.Location_asArray[0],t.Location},getPatchLocation:function(t){if(t&&t.hasOwnProperty(i.default.PATCH_LOCATION))return t.PatchLocation=t.PatchLocation_asArray[0],t.PatchLocation},getSuggestedPresentationDelay:function(t){return t&&t.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?t.suggestedPresentationDelay:null},getAvailabilityStartTime:function(t){return t&&t.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==t.availabilityStartTime?t.availabilityStartTime.getTime():null},getServiceDescriptions:function(t){var e=[];if(t&&t.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var n,a=b(t.ServiceDescription_asArray);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=void 0,u=void 0,l=void 0,c=void 0;for(var f in o)o.hasOwnProperty(f)&&(f===i.default.ID?s=o[f]:f===i.default.SERVICE_DESCRIPTION_SCOPE?u=o[f].schemeIdUri:f===i.default.SERVICE_DESCRIPTION_LATENCY?l={target:o[f].target,max:o[f].max,min:o[f].min}:f===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(c={max:o[f].max,min:o[f].min}));u===r.default.SERVICE_DESCRIPTION_LL_SCHEME&&(l||c)&&e.push({id:s,schemeIdUri:u,latency:l,playbackRate:c})}}catch(d){a.e(d)}finally{a.f()}}return e},getSupplementalProperties:function(t){var e={};if(t&&t.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var n,a=b(t.SupplementalProperty_asArray);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.hasOwnProperty(r.default.SCHEME_ID_URI)&&o.hasOwnProperty(i.default.VALUE)&&(e[o[r.default.SCHEME_ID_URI]]=o[i.default.VALUE])}}catch(s){a.e(s)}finally{a.f()}}return e},setConfig:function(t){t&&(t.errHandler&&(n=t.errHandler),t.BASE64&&(g=t.BASE64))}},e=Object(v.default)(E).getInstance().getLogger(t),t}T.__dashjs_factory_name="DashManifestModel",e.default=g.default.getSingletonFactory(T)},"./src/dash/models/PatchManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js"),o=n("./src/dash/vo/SimpleXPath.js"),s=n("./src/dash/vo/PatchOperation.js");function u(){var t,e,n=this.context;return t={getIsPatch:function(t){return t&&t.hasOwnProperty(r.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(t){return t&&t.hasOwnProperty(r.default.PUBLISH_TIME)?new Date(t[r.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(t){return t&&t.hasOwnProperty(r.default.ORIGINAL_PUBLISH_TIME)?new Date(t[r.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(t){return t&&t[r.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(t){return t?(t.__children||[]).map((function(t){var n=Object.keys(t)[0];if("add"!==n&&"remove"!==n&&"replace"!==n)return e.warn("Ignoring node of invalid action: ".concat(n)),null;var r=t[n],i=r.sel;if("add"===n&&r.type){if(!r.type.startsWith("@"))return e.warn("Ignoring add action for prefixed namespace declaration: ".concat(r.type,"=").concat(r.__text)),null;i="".concat(i,"/").concat(r.type)}var a=new o.default(i);if(!a.isValid())return e.warn("Ignoring action with invalid selector: ".concat(n," - ").concat(i)),null;var u=null;a.findsAttribute()?u=r.__text||"":"remove"!==n&&(u=r.__children.reduce((function(t,e){var n=Object.keys(e)[0];return"#text"!==n&&(t[n]=t[n]||[],t[n].push(e[n])),t}),{}));var l=new s.default(n,a,u);return"add"===n&&(l.position=r.pos),l})).filter((function(t){return!!t})):[]}},e=Object(a.default)(n).getInstance().getLogger(t),t}u.__dashjs_factory_name="PatchManifestModel",e.default=i.default.getSingletonFactory(u)},"./src/dash/parser/DashParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/parser/objectiron.js"),a=n("./externals/xml2json.js"),o=n("./src/dash/parser/matchers/StringMatcher.js"),s=n("./src/dash/parser/matchers/DurationMatcher.js"),u=n("./src/dash/parser/matchers/DateTimeMatcher.js"),l=n("./src/dash/parser/matchers/NumericMatcher.js"),c=n("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),f=n("./src/dash/parser/maps/SegmentValuesMap.js");function d(t){var e,n,r,d,h,p=this.context;return e={parse:function(t){var e,r=window.performance.now();if(!(e=d.xml_str2json(t)))throw new Error("parsing the manifest failed");var i=window.performance.now();e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach((function(t){return h.run(t)})),e.replace_asArray&&e.replace_asArray.forEach((function(t){return h.run(t)}))):h.run(e=e.MPD);var a=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e},getMatchers:function(){return r},getIron:function(){return h}},n=(t=t||{}).debug.getLogger(e),r=[new s.default,new u.default,new l.default,new o.default],d=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),h=Object(i.default)(p).create({adaptationset:new c.default,period:new f.default}),e}d.__dashjs_factory_name="DashParser",e.default=r.default.getClassFactory(d)},"./src/dash/parser/maps/CommonProperty.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._merge=(n=e)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}var e;return(e=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/maps/MapNode.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/CommonProperty.js");e.default=function(){function t(e,n,i){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e||"",this._properties=[],this._children=i||[],Array.isArray(n)&&n.forEach((function(t){a._properties.push(new r.default(t))}))}var e;return(e=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,a=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return a.call(this,i.default.ADAPTATION_SET,t,[new r.default(i.default.REPRESENTATION,t,[new r.default(i.default.SUB_REPRESENTATION,t)])])}return l}(r.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,a=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return a.call(this,i.default.PERIOD,t,[new r.default(i.default.ADAPTATION_SET,t,[new r.default(i.default.REPRESENTATION,t)])])}return l}(r.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._test=e,this._converter=n}var e;return(e=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(t){return u.test(t.value)}),(function(t){var e,n=u.exec(t);if(e=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]){var r=60*parseInt(n[9],10)+parseInt(n[10],10);e+=("+"===n[8]?-1:1)*r*60*1e3}return new Date(e)}))}return i}(r.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/constants/DashConstants.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,(function(t){for(var e=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],n=e.length,r=0;r<n;r++)if(t.nodeName===e[r])return c.test(t.value);return!1}),(function(t){var e=c.exec(t),n=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return void 0!==e[1]&&(n=-n),n}))}return o}(r.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(t){return u.test(t.value)}),(function(t){return parseFloat(t)}))}return i}(r.default)},"./src/dash/parser/matchers/StringMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(a,t);var e,n,r=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r.call(this,(function(t,e){var n,r=(o(n={},i.default.MPD,[i.default.ID,i.default.PROFILES]),o(n,i.default.PERIOD,[i.default.ID]),o(n,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),o(n,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),o(n,i.default.INITIALIZATION,[i.default.RANGE]),o(n,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),o(n,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),o(n,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),o(n,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),o(n,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),o(n,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),o(n,i.default.EVENT_STREAM,[i.default.VALUE]),o(n,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),o(n,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),o(n,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),o(n,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),o(n,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),o(n,i.default.ROLE,[i.default.VALUE,i.default.ID]),o(n,i.default.RATING,[i.default.VALUE,i.default.ID]),o(n,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),o(n,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),o(n,i.default.SUBSET,[i.default.ID]),o(n,i.default.METRICS,[i.default.METRICS_MINUS]),o(n,i.default.REPORTING,[i.default.VALUE,i.default.ID]),n);if(r.hasOwnProperty(e)){var a=r[e];return void 0!==a&&a.indexOf(t.name)>=0}return!1}),(function(t){return String(t)}))}return a}(r.default)},"./src/dash/parser/objectiron.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){function e(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function n(t,n,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(n[s.name])if(r[s.name]){if(s.merge){var u=n[s.name],l=r[s.name];"object"===i(u)&&"object"===i(l)?e(u,l):r[s.name]=u+l}}else r[s.name]=n[s.name]}}function r(t,e){for(var i=0,a=t.children.length;i<a;++i){var o=t.children[i],s=e[o.name+"_asArray"];if(s)for(var u=0,l=s.length;u<l;++u){var c=s[u];n(t.properties,e,c),r(o,c)}}}return{run:function(e){if(null===e||"object"!==i(e))return e;if(e.Period_asArray&&"period"in t)for(var n=t.period,a=e.Period_asArray,o=0,s=a.length;o<s;++o){var u=a[o];if(r(n,u),"adaptationset"in t){var l=u.AdaptationSet_asArray;if(l)for(var c=t.adaptationset,f=0,d=l.length;f<d;++f)r(c,l[f])}}return e}}}a.__dashjs_factory_name="ObjectIron";var o=r.default.getClassFactory(a);e.default=o},"./src/dash/utils/ListSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(t,e){var n=(t=t||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(t,i){if(r(),!t)return null;var o=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,s=o.SegmentURL_asArray.length,u=t&&!isNaN(t.startNumber)?t.startNumber:1,l=Math.max(u-1,0),c=Math.max(i-l,0),f=null;if(c<s){var d=o.SegmentURL_asArray[c];(f=Object(a.getIndexBasedSegment)(n,e,t,i))&&(f.replacementTime=(u+i-1)*t.segmentDuration,f.media=d.media?d.media:"",f.mediaRange=d.mediaRange,f.indexRange=d.indexRange)}return f}return{getSegmentByIndex:o,getSegmentByTime:function(t,e){if(r(),!t)return null;var i=t.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return o(t,Math.floor(a/i))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;var n=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,r=t&&!isNaN(t.startNumber)?t.startNumber:1,i=Math.max(r-1,0);return e.numberOfSegments=i+n.SegmentURL_asArray.length,e}}}o.__dashjs_factory_name="ListSegmentsGetter";var s=r.default.getClassFactory(o);e.default=s},"./src/dash/utils/Round10.js":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"round10",value:function(t,e){return function(t,e,n){return void 0===n||0==+n?Math.round(e):(n=+n,null===(e=+e)||isNaN(e)||"number"!=typeof n||n%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+n:n))))}(0,t,e)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}()},"./src/dash/utils/SegmentBaseGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js");function a(t){var e=(t=t||{}).timelineConverter;function n(){if(!e||!e.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(t,e){if(n(),!t)return null;var r,i=t.segments?t.segments.length:-1;if(e<i&&(r=t.segments[e])&&r.index===e)return r;for(var a=0;a<i;a++)if((r=t.segments[a])&&r.index===e)return r;return null}return{getSegmentByIndex:r,getSegmentByTime:function(t,e){return n(),r(t,function(t,e){if(!t)return-1;var n,r,i,a,o,s=t.segments,u=s?s.length:null,l=-1;if(s&&u>0)for(o=0;o<u;o++)if(e+(n=(a=(r=s[o]).duration)/2)>=(i=r.presentationStartTime)&&e-n<i+a){l=r.index;break}return l}(t,e))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return t&&t.segments?(e.numberOfSegments=t.segments.length,e):e}}}a.__dashjs_factory_name="SegmentBaseGetter";var o=r.default.getClassFactory(a);e.default=o},"./src/dash/utils/SegmentsUtils.js":function(t,e,n){"use strict";n.r(e),n.d(e,"unescapeDollarsInTemplate",(function(){return a})),n.d(e,"replaceIDForTemplate",(function(){return o})),n.d(e,"replaceTokenForTemplate",(function(){return s})),n.d(e,"getIndexBasedSegment",(function(){return c})),n.d(e,"getTimeBasedSegment",(function(){return f}));var r=n("./src/dash/vo/Segment.js");function i(t,e){for(;t.length<e;)t="0"+t;return t}function a(t){return t?t.split("$$").join("$"):t}function o(t,e){if(!e||!t||-1===t.indexOf("$RepresentationID$"))return t;var n=e.toString();return t.split("$RepresentationID$").join(n)}function s(t,e,n){var r,a,o,s,u,l,c=e.length,f="%0".length;if(!t)return t;for(;;){if((r=t.indexOf("$"+e))<0)return t;if((a=t.indexOf("$",r+c))<0)return t;if((o=t.indexOf("%0",r+c))>r&&o<a)switch(s=t.charAt(a-1),u=parseInt(t.substring(o+f,a-1),10),s){case"d":case"i":case"u":l=i(n.toString(),u);break;case"x":l=i(n.toString(16),u);break;case"X":l=i(n.toString(16),u).toUpperCase();break;case"o":l=i(n.toString(8),u);break;default:return t}else l=n;t=t.substring(0,r)+l+t.substring(a+1)}}function u(t,e,n,i,a,o,s,u){var l=new r.default;return l.representation=t,l.duration=e,l.presentationStartTime=n,l.mediaStartTime=i,l.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(o,t,s),l.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o+e,t,s),l.wallStartTime=a.calcWallTimeForSegment(l,s),l.replacementNumber=l.representation.startNumber+u,l.index=u,l}function l(t,e,n,r){var i=e.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===e.availabilityTimeOffset)return!0;var a=t.getClientReferenceTime();return n.availabilityStartTime.getTime()<=a&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=a)}return!0}function c(t,e,n,r){var i,a,o;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),o=parseFloat((a+i).toFixed(5));var s=u(n,i,a,t.calcMediaTimeFromPresentationTime(a,n),t,o,e,r);return l(t,n,s,e)?s:null}function f(t,e,n,r,i,a,o,c,f,d){var h,p,g=r/a,v=i/a;return h=t.calcPresentationTimeFromMediaTime(g,n),l(t,n,p=u(n,v,h,g,t,h+v,e,f),e)?(p.replacementTime=d||r,o=s(o,"Number",p.replacementNumber),o=s(o,"Time",p.replacementTime),p.media=o,p.mediaRange=c,p):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(t,e){var n=(t=t||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(t,i){if(r(),!t)return null;var o=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate;i=Math.max(i,0);var s=Object(a.getIndexBasedSegment)(n,e,t,i);if(s){s.replacementTime=Math.round((i-1)*t.segmentDuration*t.timescale,10);var u=o.media;u=Object(a.replaceTokenForTemplate)(u,"Number",s.replacementNumber),u=Object(a.replaceTokenForTemplate)(u,"Time",s.replacementTime),s.media=u}return s}return{getSegmentByIndex:o,getSegmentByTime:function(t,e){if(r(),!t)return null;var i=t.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return o(t,Math.floor(a/i))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;var n=t.segmentDuration;return e.numberOfSegments=isNaN(n)?1:Math.ceil(t.adaptation.period.duration/n),e}}}o.__dashjs_factory_name="TemplateSegmentsGetter";var s=r.default.getClassFactory(o);e.default=s},"./src/dash/utils/TimelineConverter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/dash/constants/DashConstants.js"),s=n("./src/dash/models/DashManifestModel.js"),u=n("./src/core/Settings.js"),l=n("./src/streaming/constants/Constants.js"),c=n("./src/streaming/MediaPlayerEvents.js"),f=n("./src/streaming/constants/ConformanceViolationConstants.js");function d(){var t,e,n,a,d=this.context,h=Object(r.default)(d).getInstance(),p=Object(u.default)(d).getInstance();function g(t){a=t}function v(t,e,n,r){var i,a=e.adaptation.period.mpd,o=a.availabilityStartTime;if(r)i=n&&a.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(o.getTime()+1e3*(t+a.timeShiftBufferDepth)):a.availabilityEndTime;else if(n){var s=e.availabilityTimeOffset;i=new Date(o.getTime()+1e3*(t-s))}else i=o;return i}function m(t,e){return(t.getTime()-e.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function y(t,e){return t+(e.adaptation.period.start-e.presentationTimeOffset)}function _(t){var n={start:NaN,end:NaN},r=t[0].getAdapter().getRegularPeriods()[0],i=m(new Date,r);if(!t||0===t.length)return{range:n,now:i};t.forEach((function(t){var r=t.getAdapter(),a=r.getMediaInfoForType(t.getStreamInfo(),l.default.VIDEO)||r.getMediaInfoForType(t.getStreamInfo(),l.default.AUDIO),s=r.getVoRepresentations(a)[0],u={start:NaN,end:NaN};if(s)if(s.segmentInfoType===o.default.SEGMENT_TIMELINE)u=function(t){var n,r,i,a,o=e.getRepresentationFor(t.index,t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index]),s=o.SegmentTemplate.timescale,u=o.SegmentTemplate.SegmentTimeline.S_asArray,l={start:0,end:0},c=0;for(l.start=y(u[0].t/s,t),i=0,a=u.length;i<a;i++)r=0,(n=u[i]).hasOwnProperty("r")&&(r=n.r),c+=n.d/s*(1+r);return l.end=l.start+c,l}(s);else{var c=s.adaptation.period;u.start=c.start,u.end=Math.max(i,c.start+c.duration)}!isNaN(u.start)&&(isNaN(n.start)||n.start>u.start)&&(n.start=u.start),!isNaN(u.end)&&(isNaN(n.end)||n.end<u.end)&&(n.end=u.end)})),n.end=Math.min(i,n.end);var a=E(t,n.end,!0);return n.end=isNaN(a)?n.end:a,n.start=r&&r.mpd&&r.mpd.timeShiftBufferDepth&&!isNaN(r.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-r.mpd.timeShiftBufferDepth,n.start):n.start,n.start=E(t,n.start),{range:n,now:i}}function b(t,e){n=t-e.end}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var r=0,i=!1,a=NaN;!i&&r<t.length;){var o=t[r].getStreamInfo();o.start<=e&&(!isFinite(o.duration)||o.start+o.duration>=e)?(a=e,i=!0):!n&&o.start>e&&(isNaN(a)||o.start<a)?a=o.start:n&&o.start+o.duration<e&&(isNaN(a)||o.start+o.duration>a)&&(a=o.start+o.duration),r+=1}return a}catch(s){return e}}function T(t){void 0===t.offset||isNaN(t.offset)||g(t.offset/1e3)}function S(){a=0,n=0}function w(){h.off(i.default.UPDATE_TIME_SYNC_OFFSET,T,this),S()}return t={initialize:function(){S(),h.on(i.default.UPDATE_TIME_SYNC_OFFSET,T,this)},getClientTimeOffset:function(){return a},setClientTimeOffset:g,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*a},calcAvailabilityStartTimeFromPresentationTime:function(t,e,n){return v(t,e,n)},calcAvailabilityEndTimeFromPresentationTime:function(t,e,n){return v(t,e,n,!0)},calcPresentationTimeFromWallTime:m,calcPresentationTimeFromMediaTime:y,calcPeriodRelativeTimeFromMpdRelativeTime:function(t,e){return e-t.adaptation.period.start},calcMediaTimeFromPresentationTime:function(t,e){return t-e.adaptation.period.start+e.presentationTimeOffset},calcWallTimeForSegment:function(t,e){var n,r;return e&&(n=t.presentationStartTime+t.representation.adaptation.period.mpd.suggestedPresentationDelay,r=new Date(t.availabilityStartTime.getTime()+1e3*n)),r},calcTimeShiftBufferWindow:function(t,e){if(!e)return function(t){var e={start:NaN,end:NaN},n=0,r=NaN;return t.forEach((function(t){var e=t.getStreamInfo();n+=e.duration,(isNaN(r)||e.start<r)&&(r=e.start)})),e.start=r,e.end=r+n,e}(t);if(p.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var n=_(t);return b(n.now,n.range),n.range}return function(t){var e={start:NaN,end:NaN};if(!t||0===t.length)return e;var n=t[0].getAdapter().getRegularPeriods()[0],r=m(new Date,n),i=n.mpd.timeShiftBufferDepth,a=isNaN(i)?0:r-i;if(e.start=E(t,a),e.end=!isNaN(e.start)&&r<e.start?r:E(t,r,!0),!isNaN(i)&&e.end<r-i&&(e.end=NaN),p.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var o=_(t);if(o.range.end<e.start)return h.trigger(c.default.CONFORMANCE_VIOLATION,{level:f.default.LEVELS.WARNING,event:f.default.EVENTS.INVALID_DVR_WINDOW}),b(o.now,o.range),o.range}return e}(t)},reset:w},e=Object(s.default)(d).getInstance(),w(),t}d.__dashjs_factory_name="TimelineConverter",e.default=a.default.getSingletonFactory(d)},"./src/dash/utils/TimelineSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(t,e){var n=(t=t||{}).timelineConverter,r=t.dashMetrics;function o(){if(!n)throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(t,e){var n,r,i,a,o,s,l,c=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,f=c.SegmentURL_asArray,d=0,h=0,p=-1;l=t.timescale;var g=!1;for(i=0,a=(n=c.SegmentTimeline.S_asArray).length;i<a&&!g;i++)for(s=0,(r=n[i]).hasOwnProperty("r")&&(s=r.r),r.hasOwnProperty("t")&&(h=(d=r.t)/l),s<0&&(s=u(t,n[i+1],r,l,h)),o=0;o<=s&&!g;o++)(g=e(d,h,c,f,r,l,++p,i))&&(t.segmentDuration=r.d/l),h=(d+=r.d)/l}function u(t,e,i,a,o){var s;if(e&&e.hasOwnProperty("t"))s=e.t/a;else try{var u=0;if(isNaN(t.adaptation.period.start)||isNaN(t.adaptation.period.duration)||!isFinite(t.adaptation.period.duration)){var l=r.getCurrentDVRInfo();u=isNaN(l.end)?0:l.end}else u=t.adaptation.period.start+t.adaptation.period.duration;s=n.calcMediaTimeFromPresentationTime(u,t),t.segmentDuration=i.d/a}catch(c){s=0}return Math.max(Math.ceil((s-o)/(i.d/a))-1,0)}return{getSegmentByIndex:function(t,r,i){if(o(),!t)return null;var u=null,l=!1;return s(t,(function(r,o,s,c,f,d,h,p){if(l||i<0){var g=s.media,v=f.mediaRange;return c&&(g=c[p].media||"",v=c[p].mediaRange),u=Object(a.getTimeBasedSegment)(n,e,t,r,f.d,d,g,v,h,f.tManifest),!0}return o>=i-.5*f.d/d&&(l=!0),!1})),u},getSegmentByTime:function(t,r){if(o(),!t)return null;void 0===r&&(r=null);var i=null,u=n.calcMediaTimeFromPresentationTime(r,t);return s(t,(function(r,o,s,l,c,f,d,h){if(u<o+c.d/f&&u>=o){var p=s.media,g=c.mediaRange;return l&&(p=l[h].media||"",g=l[h].mediaRange),i=Object(a.getTimeBasedSegment)(n,e,t,r,c.d,f,p,g,d,c.tManifest),!0}return!1})),i},getMediaFinishedInformation:function(t){if(!t)return 0;var e,n,r,i,a,o,s,l=0,c=0,f=0;for(s=t.timescale,i=(e=(t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList).SegmentTimeline.S_asArray).length,r=0;r<i;r++)for(o=0,(n=e[r]).hasOwnProperty("r")&&(o=n.r),n.hasOwnProperty("t")&&(c=(l=n.t)/s),o<0&&(o=u(t,e[r+1],n,s,c)),a=0;a<=o;a++)f++,c=(l+=n.d)/s;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:c}}}}o.__dashjs_factory_name="TimelineSegmentsGetter";var s=r.default.getClassFactory(o);e.default=s},"./src/dash/vo/AdaptationSet.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(t,e,n){"use strict";n.r(e);var r=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.serviceLocation=n||e||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,e.default=r},"./src/dash/vo/Event.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,this.xpath=n,this.value=r,this.position=null}var e;return(e=[{key:"getMpdTarget",value:function(t){return this.xpath.getMpdTarget(t,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/Period.js":function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};r.DEFAULT_ID="defaultId",e.default=r},"./src/dash/vo/Representation.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js");e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}var e;return(e=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==r.default.BASE_URL&&this.segmentInfoType!==r.default.SEGMENT_BASE&&!this.indexRange}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/RepresentationInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.valid="/"==e[0],this.path=e.split("/").filter((function(t){return 0!==t.length})).map((function(t){var e={name:t},r=t.indexOf("[");if(-1!=r){e.name=t.substring(0,r);var i=t.substring(r+1,t.length-1);n.valid=n.valid&&-1==i.indexOf("[");var a=i.indexOf("=");-1!=a?(e.attribute={name:i.substring(1,a),value:i.substring(a+1)},-1!=["'",'"'].indexOf(e.attribute.value[0])&&(e.attribute.value=e.attribute.value.substring(1,e.attribute.value.length-1))):e.position=parseInt(i,10)-1}return e}))}var e;return(e=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(t,e){for(var n=null,r=t,i=1,a="MPD";i<this.path.length&&null!==r;){n=r;var o=this.path[i];if(a=o.name,i!==this.path.length-1||!a.startsWith("@")){var s=n[a+"_asArray"]||[];0===s.length&&n[a]&&s.push(n[a]),o.position?r=s[o.position]||null:o.attribute?function(){var t=o.attribute;r=s.filter((function(e){return e[t.name]==t.value}))[0]||null}():r=s[0]||null}i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:{name:a,leaf:r,target:e?n:r}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/StreamInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/HeadRequest.js"),o=n("./src/streaming/vo/DashJSError.js"),s=n("./src/core/FactoryMaker.js");function u(t){var e,n,s=this.context,u=(t=t||{}).eventBus,l=t.events,c=t.urlUtils,f=t.errors,d=t.streamId;return e={checkForExistence:function(t){var e=function(e){u.trigger(l.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var r=new a.default(t.url);n.load({request:r,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(t){var r=function(n,r){u.trigger(l.LOADING_COMPLETED,{request:t,response:n||null,error:r||null,sender:e})};t?n.load({request:t,progress:function(n){u.trigger(l.LOADING_PROGRESS,{request:t,stream:n.stream,streamId:d}),n.data&&u.trigger(l.LOADING_DATA_PROGRESS,{request:t,response:n.data||null,error:null,sender:e})},success:function(t){r(t)},error:function(t,e,n){r(void 0,new o.default(f.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,e))},abort:function(t){t&&u.trigger(l.LOADING_ABANDONED,{mediaType:t.mediaType,request:t,sender:e})}}):r(void 0,new o.default(f.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,f.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){n&&n.abort()},reset:function(){n&&(n.abort(),n=null)}},n=Object(i.default)(s).create({errHandler:t.errHandler,errors:f,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:c,constants:r.default,boxParser:t.boxParser,dashConstants:t.dashConstants,requestTimeout:t.settings.get().streaming.fragmentRequestTimeout}),e}u.__dashjs_factory_name="FragmentLoader",e.default=s.default.getClassFactory(u)},"./src/streaming/ManifestLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/controllers/XlinkController.js"),o=n("./src/streaming/net/URLLoader.js"),s=n("./src/streaming/utils/URLUtils.js"),u=n("./src/streaming/vo/TextRequest.js"),l=n("./src/streaming/vo/DashJSError.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),f=n("./src/core/EventBus.js"),d=n("./src/core/events/Events.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/core/FactoryMaker.js"),g=n("./src/dash/parser/DashParser.js");function v(t){var e,n,p,v,m,y=this.context,_=(t=t||{}).debug,b=Object(f.default)(y).getInstance(),E=Object(s.default)(y).getInstance(),T=t.mssHandler,S=t.errHandler;function w(t){b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:t.manifest})}return e={load:function(t){var e=new u.default(t,c.HTTPRequest.MPD_TYPE);p.load({request:e,success:function(e,i,a){var o,s,u;if(v)if(a&&a!==t?(s=E.parseBaseUrl(a),o=a):(E.isRelative(t)&&(t=E.resolve(t,window.location.href)),s=E.parseBaseUrl(t)),"No Content"!=i)if(null===m&&(m=function(t){var e=null;return t.indexOf("SmoothStreamingMedia")>-1?(T&&(e=T.createMssParser(),T.registerEvents()),e):t.indexOf("MPD")>-1||t.indexOf("Patch")>-1?Object(g.default)(y).create({debug:_}):e}(e)),null!==m){v.setMatchers(m.getMatchers()),v.setIron(m.getIron());try{u=m.parse(e)}catch(c){return void b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}u?(u.url=o||t,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(r.default.LOCATION)&&(s=E.parseBaseUrl(u.Location_asArray[0]),n.debug("BaseURI set by Location to: "+s)),u.baseUri=s,u.loadedTime=new Date,v.resolveManifestOnLoad(u),b.trigger(d.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}else b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))});else b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(e,n,r){b.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(t,", ").concat(r))})}})},reset:function(){b.off(d.default.XLINK_READY,w,e),T&&T.reset(),v&&(v.reset(),v=null),p&&(p.abort(),p=null)}},n=_.getLogger(e),b.on(d.default.XLINK_READY,w,e),p=Object(o.default)(y).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:E,constants:r.default,dashConstants:i.default,errors:h.default}),v=Object(a.default)(y).create({errHandler:S,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings}),m=null,e}v.__dashjs_factory_name="ManifestLoader";var m=p.default.getClassFactory(v);e.default=m},"./src/streaming/ManifestUpdater.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js"),u=n("./src/core/errors/Errors.js"),l=n("./src/dash/constants/DashConstants.js"),c=n("./src/streaming/utils/URLUtils.js");function f(){var t,e,n,o,f,d,h,p,g,v,m,y,_=this.context,b=Object(r.default)(_).getInstance(),E=Object(c.default)(_).getInstance();function T(){n=NaN,h=!1,f=!0,d=!1,S()}function S(){null!==o&&(clearTimeout(o),o=null)}function w(t){S(),d||(isNaN(t)&&!isNaN(n)&&(t=1e3*n),isNaN(t)||(e.debug("Refresh manifest in "+t+" milliseconds."),o=setTimeout(C,t)))}function A(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h=!0;var e=g.getValue(),n=e.url,r=v.getPatchLocation(e),i=v.getLocation(e);r&&!t?n=r:i&&(n=i),E.isRelative(n)&&(n=E.resolve(n,e.url)),p.load(n)}function x(t){if(t){if(v.getIsPatch(t)){var r=t;t=g.getValue();var a=v.isPatchValid(t,r),o=a;if(a){var s=v.getPublishTime(t);o=v.applyPatchToManifest(t,r);var u=v.getPublishTime(t);o=s.getTime()!=u.getTime()}if(!o)return e.debug("Patch provided is invalid, performing full manifest refresh"),void A(!0);t.loadedTime=new Date}}else(t=g.getValue()).loadedTime=new Date;if(g.getValue()&&g.getValue().type===l.default.DYNAMIC&&t.type===l.default.STATIC)return b.trigger(i.default.DYNAMIC_TO_STATIC),h=!1,void(d=!0);g.setValue(t);var c=new Date,p=(c.getTime()-t.loadedTime.getTime())/1e3;1e3*(n=v.getManifestUpdatePeriod(t,p))>2147483647&&(n=2147483.647),b.trigger(i.default.MANIFEST_UPDATED,{manifest:t}),e.info("Manifest has been refreshed at "+c+"["+c.getTime()/1e3+"] "),f||w()}function C(){f||(h?w(y.get().streaming.manifestUpdateRetryInterval):A())}function D(t){t.error?t.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&m.error(t.error):x(t.manifest)}function I(){f=!1,w()}function R(){(f=!y.get().streaming.scheduling.scheduleWhilePaused)&&S()}function k(){h=!1}return t={initialize:function(){T(),b.on(i.default.STREAMS_COMPOSED,k,this),b.on(a.default.PLAYBACK_STARTED,I,this),b.on(a.default.PLAYBACK_PAUSED,R,this),b.on(i.default.INTERNAL_MANIFEST_LOADED,D,this)},setManifest:function(t){x(t)},refreshManifest:A,getIsUpdating:function(){return h},setConfig:function(t){t&&(t.manifestModel&&(g=t.manifestModel),t.adapter&&(v=t.adapter),t.manifestLoader&&(p=t.manifestLoader),t.errHandler&&(m=t.errHandler),t.settings&&(y=t.settings))},reset:function(){b.off(a.default.PLAYBACK_STARTED,I,this),b.off(a.default.PLAYBACK_PAUSED,R,this),b.off(i.default.STREAMS_COMPOSED,k,this),b.off(i.default.INTERNAL_MANIFEST_LOADED,D,this),T()}},e=Object(s.default)(_).getInstance().getLogger(t),t}f.__dashjs_factory_name="ManifestUpdater",e.default=o.default.getClassFactory(f)},"./src/streaming/MediaPlayer.js":function(t,e,n){"use strict";n.r(e);var r=n("./externals/cea608-parser.js"),i=n.n(r),a=n("./src/streaming/constants/Constants.js"),o=n("./src/dash/constants/DashConstants.js"),s=n("./src/streaming/constants/MetricsConstants.js"),u=n("./src/streaming/controllers/PlaybackController.js"),l=n("./src/streaming/controllers/StreamController.js"),c=n("./src/streaming/controllers/GapController.js"),f=n("./src/streaming/controllers/MediaController.js"),d=n("./src/streaming/controllers/BaseURLController.js"),h=n("./src/streaming/ManifestLoader.js"),p=n("./src/streaming/utils/ErrorHandler.js"),g=n("./src/streaming/utils/Capabilities.js"),v=n("./src/streaming/utils/CapabilitiesFilter.js"),m=n("./src/streaming/utils/RequestModifier.js"),y=n("./src/streaming/models/URIFragmentModel.js"),_=n("./src/streaming/models/ManifestModel.js"),b=n("./src/streaming/models/MediaPlayerModel.js"),E=n("./src/streaming/controllers/AbrController.js"),T=n("./src/streaming/net/SchemeLoaderFactory.js"),S=n("./src/streaming/models/VideoModel.js"),w=n("./src/streaming/models/CmcdModel.js"),A=n("./src/streaming/utils/DOMStorage.js"),x=n("./src/core/Debug.js"),C=n("./src/core/errors/Errors.js"),D=n("./src/core/EventBus.js"),I=n("./src/core/events/Events.js"),R=n("./src/streaming/MediaPlayerEvents.js"),k=n("./src/core/FactoryMaker.js"),O=n("./src/core/Settings.js"),P=n("./src/core/Version.js"),M=n("./src/dash/controllers/SegmentBaseController.js"),L=n("./src/dash/DashAdapter.js"),N=n("./src/dash/DashMetrics.js"),F=n("./src/dash/utils/TimelineConverter.js"),j=n("./src/streaming/vo/metrics/HTTPRequest.js"),B=n("./externals/base64.js"),U=n.n(B),V=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),G=n.n(V),H=n("./src/streaming/vo/DashJSError.js"),Y=n("./src/streaming/utils/SupervisorTools.js"),z=n("./src/streaming/ManifestUpdater.js"),q=n("./src/streaming/utils/URLUtils.js"),X=n("./src/streaming/utils/BoxParser.js"),K=n("./src/streaming/text/TextController.js");function W(){var t,e,n,r,B,V,W,Q,$,Z,J,tt,et,nt,rt,it,at,ot,st,ut,lt,ct,ft,dt,ht,pt,gt,vt,mt,yt,_t,bt,Et,Tt,St,wt,At="You must first call initialize() and set a source before calling this method",xt="You must first call initialize() and set a valid source and view before calling this method",Ct="You must first call attachView() to set the video element before calling this method",Dt=this.context,It=Object(D.default)(Dt).getInstance(),Rt=Object(O.default)(Dt).getInstance(),kt=Object(x.default)(Dt).getInstance({settings:Rt});function Ot(){qt(null),Ht(null),r=null,et&&(et.reset(),et=null),nt&&(nt.reset(),nt=null),Rt.reset(),it&&(it.reset(),it=null)}function Pt(){return!!n&&!!yt.getElement()}function Mt(){return Object(P.getVersionString)()}function Lt(){if(!W)throw xt;return pt.isPaused()}function Nt(t){var e=ft&&ft.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);if(!n)return 0;var r=pt.getLiveDelay(),i=n.range.start+t;return i>n.range.end-r&&(i=n.range.end-r),i}function Ft(t){if(!W)throw xt;var e=Gt().currentTime;if(void 0!==t)e=ft.getTimeRelativeToStreamId(e,t);else if(pt.getIsDynamic()){var n=ft&&ft.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,r=gt.getCurrentDVRInfo(n);e=null===r||0===e?0:Math.max(0,e-r.range.start)}return e}function jt(){if(!W)throw xt;var t=Gt().duration;if(pt.getIsDynamic()){var e=ft&&ft.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);t=n?n.range.end-n.range.start:0}return t}function Bt(t){Object(Y.checkParameterType)(t,"boolean"),Q=t}function Ut(){ot.restoreDefaultUTCTimingSources()}function Vt(){return gt}function Gt(){if(!yt.getElement())throw Ct;return yt.getElement()}function Ht(t){if(!B)throw"MediaPlayer not initialized!";yt.setElement(t),t&&(Qt(),function(){if(!nt){var t=dashjs.MetricsReporting;if("function"==typeof t){var e=t(Dt).create();nt=e.createMetricsReporting({debug:kt,eventBus:It,mediaElement:Gt(),adapter:at,dashMetrics:gt,events:I.default,constants:a.default,metricsConstants:s.default})}}}(),function(){if(!rt){var t=dashjs.MssHandler;"function"==typeof t&&(C.default.extend(t.errors),rt=t(Dt).create({eventBus:It,mediaPlayerModel:ot,dashMetrics:gt,manifestModel:vt,playbackController:pt,streamController:ft,protectionController:et,baseURLController:ut,errHandler:st,events:I.default,constants:a.default,debug:kt,initSegmentType:j.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:U.a,ISOBoxer:G.a,settings:Rt}))}}(),ft&&ft.switchToVideoElement()),W&&Kt(),Jt()}function Yt(t){if(!V)throw At;var e=ft.getActiveStreamInfo();return e?tt.getTracksFor(t,e.id):[]}function zt(t,e){var n=-1;t.some((function(t,r){if(t===e)return n=r,!0})),n<0||t.splice(n,1)}function qt(t){if(!B)throw"MediaPlayer not initialized!";"string"==typeof t&&_t.initialize(t),n=t,(V||W)&&Kt(),Pt()&&Jt()}function Xt(){if(!V)throw At;var t=ft.getActiveStreamInfo();return t?ft.getStreamById(t.id):null}function Kt(){W=!1,V=!1,at.reset(),ft.reset(),ht.reset(),pt.reset(),$.reset(),tt.reset(),Et.reset(),et&&(Rt.get().streaming.protection.keepProtectionMediaKeys?et.stop():(et.reset(),et=null,Qt())),dt.reset(),mt.reset()}function Wt(){return Object(h.default)(Dt).create({debug:kt,errHandler:st,dashMetrics:gt,mediaPlayerModel:ot,requestModifier:Object(m.default)(Dt).getInstance(),mssHandler:rt,settings:Rt})}function Qt(){if(et)return et;var t=dashjs.Protection;if("function"==typeof t){var e=t(Dt).create();return I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),C.default.extend(t.errors),lt||(lt=Object(g.default)(Dt).getInstance()),(et=e.createProtectionSystem({debug:kt,errHandler:st,videoModel:yt,capabilities:lt,eventBus:It,events:I.default,BASE64:U.a,constants:a.default,cmcdModel:mt,settings:Rt}))&&(et.setLicenseRequestFilters(Tt),et.setLicenseResponseFilters(St)),et}return null}function $t(){if(!B)throw"MediaPlayer not initialized!";if(it)return it;var t=dashjs.OfflineController;if("function"==typeof t){I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),C.default.extend(t.errors);var e=Wt(),n=Object(z.default)(Dt).create();return n.setConfig({manifestModel:vt,adapter:at,manifestLoader:e,errHandler:st}),it=t(Dt).create({debug:kt,manifestUpdater:n,baseURLController:ut,manifestLoader:e,manifestModel:vt,mediaPlayerModel:ot,abrController:$,playbackController:pt,adapter:at,errHandler:st,dashMetrics:gt,timelineConverter:J,segmentBaseController:Et,schemeLoaderFactory:Z,eventBus:It,events:I.default,errors:C.default,constants:a.default,settings:Rt,dashConstants:o.default,urlUtils:Object(q.default)(Dt).getInstance()})}return null}function Zt(t){var e=ft&&ft.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);return n?t+(n.manifestInfo.availableFrom.getTime()/1e3+n.range.start):0}function Jt(){var t;it&&it.resetRecords(),!V&&n&&(V=!0,e.info("Streaming Initialized"),t=Wt(),ft||(ft=Object(l.default)(Dt).getInstance()),dt||(dt=Object(K.default)(Dt).create({errHandler:st,manifestModel:vt,adapter:at,mediaController:tt,videoModel:yt,settings:Rt})),ct.setConfig({capabilities:lt,adapter:at,settings:Rt,manifestModel:vt,errHandler:st}),ct.setCustomCapabilitiesFilters(wt),ft.setConfig({capabilities:lt,capabilitiesFilter:ct,manifestLoader:t,manifestModel:vt,mediaPlayerModel:ot,protectionController:et,textController:dt,adapter:at,dashMetrics:gt,errHandler:st,timelineConverter:J,videoModel:yt,playbackController:pt,abrController:$,mediaController:tt,settings:Rt,baseURLController:ut,uriFragmentModel:_t,segmentBaseController:Et}),ht.setConfig({settings:Rt,playbackController:pt,streamController:ft,videoModel:yt,timelineConverter:J,adapter:at}),pt.setConfig({streamController:ft,dashMetrics:gt,mediaPlayerModel:ot,adapter:at,videoModel:yt,timelineConverter:J,settings:Rt}),$.setConfig({streamController:ft,domStorage:bt,mediaPlayerModel:ot,dashMetrics:gt,adapter:at,videoModel:yt,settings:Rt}),mt.setConfig({abrController:$,dashMetrics:gt,playbackController:pt}),$.initialize(),ft.initialize(Q,r),dt.initialize(),ht.initialize(),mt.initialize(),Et.initialize(),"string"==typeof n?ft.load(n):ft.loadWithManifest(n)),!W&&Pt()&&(W=!0,e.info("Playback Initialized"))}return t={initialize:function(t,n,r){lt||(lt=Object(g.default)(Dt).getInstance()).setConfig({settings:Rt}),st||(st=Object(p.default)(Dt).getInstance()),lt.supportsMediaSource()?(B||(B=!0,J=Object(F.default)(Dt).getInstance(),$||($=Object(E.default)(Dt).getInstance()).setConfig({settings:Rt}),Z||(Z=Object(T.default)(Dt).getInstance()),pt||(pt=Object(u.default)(Dt).getInstance()),tt||(tt=Object(f.default)(Dt).getInstance()),ft||(ft=Object(l.default)(Dt).getInstance()),ht||(ht=Object(c.default)(Dt).getInstance()),ct||(ct=Object(v.default)(Dt).getInstance()),at=Object(L.default)(Dt).getInstance(),vt=Object(_.default)(Dt).getInstance(),mt=Object(w.default)(Dt).getInstance(),gt=Object(N.default)(Dt).getInstance({settings:Rt}),bt=Object(A.default)(Dt).getInstance({settings:Rt}),at.setConfig({constants:a.default,cea608parser:i.a,errHandler:st,BASE64:U.a}),ut||(ut=Object(d.default)(Dt).create()),ut.setConfig({adapter:at}),Et||(Et=Object(M.default)(Dt).getInstance({dashMetrics:gt,mediaPlayerModel:ot,errHandler:st,baseURLController:ut,events:I.default,eventBus:It,debug:kt,boxParser:Object(X.default)(Dt).getInstance(),requestModifier:Object(m.default)(Dt).getInstance(),errors:C.default})),tt.setConfig({domStorage:bt,settings:Rt}),Ut(),Bt(void 0===r||r),$t()),t&&Ht(t),n&&qt(n),e.info("[dash.js "+Mt()+"] MediaPlayer has been initialized")):st.error(new H.default(C.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,C.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(t){t&&(t.capabilities&&(lt=t.capabilities),t.capabilitiesFilter&&(ct=t.capabilitiesFilter),t.streamController&&(ft=t.streamController),t.textController&&(dt=t.textController),t.gapController&&(ht=t.gapController),t.playbackController&&(pt=t.playbackController),t.mediaPlayerModel&&(ot=t.mediaPlayerModel),t.abrController&&($=t.abrController),t.schemeLoaderFactory&&(Z=t.schemeLoaderFactory),t.mediaController&&(tt=t.mediaController),t.settings&&(Rt=t.settings))},on:function(t,e,n,r){It.on(t,e,n,r)},off:function(t,e,n){It.off(t,e,n)},extend:function(t,e,n){k.default.extend(t,e,n,Dt)},attachView:Ht,attachSource:qt,isReady:Pt,play:function(){if(!W)throw xt;(!Q||Lt()&&W)&&pt.play()},isPaused:Lt,pause:function(){if(!W)throw xt;pt.pause()},isSeeking:function(){if(!W)throw xt;return pt.isSeeking()},isDynamic:function(){if(!W)throw xt;return pt.getIsDynamic()},seek:function(t){if(!W)throw xt;if(Object(Y.checkParameterType)(t,"number"),isNaN(t))throw a.default.BAD_ARGUMENT_ERROR;var e=pt.getIsDynamic()?Nt(t):t;pt.seek(e)},setPlaybackRate:function(t){Gt().playbackRate=t},getPlaybackRate:function(){return Gt().playbackRate},setMute:function(t){Object(Y.checkParameterType)(t,"boolean"),Gt().muted=t},isMuted:function(){return Gt().muted},setVolume:function(t){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw a.default.BAD_ARGUMENT_ERROR;Gt().volume=t},getVolume:function(){return Gt().volume},time:Ft,duration:jt,timeAsUTC:function(){if(!W)throw xt;return Ft()<0?NaN:Zt(Ft())},durationAsUTC:function(){if(!W)throw xt;return Zt(jt())},getActiveStream:Xt,getDVRWindowSize:function(){var t=ft&&ft.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,e=gt.getCurrentDVRInfo(t);return e?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Nt,convertToTimeCode:function(t){t=Math.max(t,0);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return(0===e?"":e<10?"0"+e.toString()+":":e.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*t),a=i.toLocaleDateString(e),o=i.toLocaleTimeString(e,{hour12:n});return r?o+" "+a:o},getVersion:Mt,getDebug:function(){return kt},getBufferLength:function(t){var n=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT];if(t)return-1!==n.indexOf(t)?Vt().getCurrentBufferLevel(t)||NaN:(e.warn("getBufferLength requested for invalid type"),NaN);var r=n.map((function(t){return Yt(t).length>0?Vt().getCurrentBufferLevel(t):Number.MAX_VALUE})).reduce((function(t,e){return Math.min(t,e)}));return r===Number.MAX_VALUE?NaN:r},getTTMLRenderingDiv:function(){return yt?yt.getTTMLRenderingDiv():null},getVideoElement:Gt,getSource:function(){if(!n)throw"You must first call attachSource() with a valid source before calling this method";return n},getCurrentLiveLatency:function(){if(!B)throw"MediaPlayer not initialized!";return W?pt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(t){if(!V)throw At;return $.getTopBitrateInfoFor(t)},setAutoPlay:Bt,getAutoPlay:function(){return Q},getDashMetrics:Vt,getQualityFor:function(t){if(!V)throw At;if(t===a.default.IMAGE){var e=Xt();if(!e)return-1;var n=e.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return $.getQualityFor(t)},setQualityFor:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!V)throw At;if(t===a.default.IMAGE){var r=Xt();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(e)}$.setPlaybackQuality(t,ft.getActiveStreamInfo(),e,{forceReplace:n})},updatePortalSize:function(){$.setElementSize(),$.setWindowResizeEventCalled(!0)},enableText:function(t){var e=ft.getActiveStreamInfo();return!(!e||!dt)&&dt.enableText(e.id,t)},enableForcedTextStreaming:function(t){return!(!ft.getActiveStreamInfo()||!dt)&&dt.enableForcedTextStreaming(t)},isTextEnabled:function(){var t=ft.getActiveStreamInfo();return!(!t||!dt)&&dt.isTextEnabled(t)},setTextTrack:function(t){if(!W)throw xt;var e=ft.getActiveStreamInfo();e&&dt&&dt.setTextTrack(e.id,t)},getBitrateInfoListFor:function(t){if(!V)throw At;var e=Xt();return e?e.getBitrateListFor(t):[]},getStreamsFromManifest:function(t){if(!V)throw At;return at.getStreamsInfo(t)},getTracksFor:Yt,getTracksForTypeFromManifest:function(t,e,n){if(!V)throw At;return(n=n||at.getStreamsInfo(e,1)[0])?at.getAllMediaInfoForType(n,t,e):[]},getCurrentTrackFor:function(t){if(!V)throw At;var e=ft.getActiveStreamInfo();return tt.getCurrentTrackFor(t,e.id)},setInitialMediaSettingsFor:function(t,e){if(!B)throw"MediaPlayer not initialized!";tt.setInitialSettings(t,e)},getInitialMediaSettingsFor:function(t){if(!B)throw"MediaPlayer not initialized!";return tt.getInitialSettings(t)},setCurrentTrack:function(t){if(!V)throw At;tt.setTrack(t)},addABRCustomRule:function(t,e,n){ot.addABRCustomRule(t,e,n)},removeABRCustomRule:function(t){ot.removeABRCustomRule(t)},removeAllABRCustomRule:function(){ot.removeABRCustomRule()},getAverageThroughput:function(t){var e=$.getThroughputHistory(),n=pt.getIsDynamic();return e?e.getAverageThroughput(t,n):0},retrieveManifest:function(t,e){var n=Wt(),r=this;It.on(I.default.INTERNAL_MANIFEST_LOADED,(function t(i){i.error?e(null,i.error):e(i.manifest),It.off(I.default.INTERNAL_MANIFEST_LOADED,t,r),n.reset()}),r),_t.initialize(t),n.load(t)},addUTCTimingSource:function(t,e){ot.addUTCTimingSource(t,e)},removeUTCTimingSource:function(t,e){ot.removeUTCTimingSource(t,e)},clearDefaultUTCTimingSources:function(){ot.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ut,setXHRWithCredentialsForType:function(t,e){ot.setXHRWithCredentialsForType(t,e)},getXHRWithCredentialsForType:function(t){return ot.getXHRWithCredentialsForType(t)},getProtectionController:function(){return Qt()},attachProtectionController:function(t){et=t},setProtectionData:function(t){r=t,ft&&ft.setProtectionData(r)},registerLicenseRequestFilter:function(t){Tt.push(t),et&&et.setLicenseRequestFilters(Tt)},registerLicenseResponseFilter:function(t){St.push(t),et&&et.setLicenseResponseFilters(St)},unregisterLicenseRequestFilter:function(t){zt(Tt,t),et&&et.setLicenseRequestFilters(Tt)},unregisterLicenseResponseFilter:function(t){zt(St,t),et&&et.setLicenseResponseFilters(St)},registerCustomCapabilitiesFilter:function(t){wt.push(t),ct&&ct.setCustomCapabilitiesFilters(wt)},unregisterCustomCapabilitiesFilter:function(t){zt(wt,t),ct&&ct.setCustomCapabilitiesFilters(wt)},setCustomInitialTrackSelectionFunction:function(t){tt&&tt.setCustomInitialTrackSelectionFunction(t)},resetCustomInitialTrackSelectionFunction:function(){tt&&tt.setCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(t){if(!yt.getElement())throw Ct;yt.setTTMLRenderingDiv(t)},getCurrentTextTrackIndex:function(){var t=ft.getActiveStreamInfo();if(t&&dt)return dt.getCurrentTrackIdx(t.id)},provideThumbnail:function(t,e){if("function"==typeof e)if(t<0)e(null);else{var n=pt.getIsDynamic()?Nt(t):t,r=ft.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i){var a=ft.getTimeRelativeToStreamId(n,r.getId());return i.provide(a,e)}e(null)}else e(null)}},getDashAdapter:function(){return at},getOfflineController:function(){return $t()},getSettings:function(){return Rt.get()},updateSettings:function(t){Rt.update(t)},resetSettings:function(){Rt.reset()},reset:Ot,destroy:function(){Ot(),Tt=[],St=[],wt=[],k.default.deleteSingletonInstances(Dt)}},e=kt.getLogger(t),B=!1,W=!1,V=!1,Q=!0,et=null,it=null,r=null,at=null,Et=null,I.default.extend(R.default),ot=Object(b.default)(Dt).getInstance(),yt=Object(S.default)(Dt).getInstance(),_t=Object(y.default)(Dt).getInstance(),Tt=[],St=[],wt=[],t}W.__dashjs_factory_name="MediaPlayer";var Q=k.default.getClassFactory(W);Q.events=R.default,Q.errors=C.default,k.default.updateClassFactory(W.__dashjs_factory_name,Q),e.default=Q},"./src/streaming/MediaPlayerEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var s=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).AST_IN_FUTURE="astInFuture",t.BUFFER_EMPTY="bufferStalled",t.BUFFER_LOADED="bufferLoaded",t.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",t.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",t.DYNAMIC_TO_STATIC="dynamicToStatic",t.ERROR="error",t.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",t.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",t.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",t.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",t.LOG="log",t.MANIFEST_LOADED="manifestLoaded",t.METRICS_CHANGED="metricsChanged",t.METRIC_CHANGED="metricChanged",t.METRIC_ADDED="metricAdded",t.METRIC_UPDATED="metricUpdated",t.PERIOD_SWITCH_STARTED="periodSwitchStarted",t.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",t.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",t.QUALITY_CHANGE_RENDERED="qualityChangeRendered",t.TRACK_CHANGE_RENDERED="trackChangeRendered",t.STREAM_INITIALIZING="streamInitializing",t.STREAM_UPDATED="streamUpdated",t.STREAM_ACTIVATED="streamActivated",t.STREAM_DEACTIVATED="streamDeactivated",t.STREAM_INITIALIZED="streamInitialized",t.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",t.TEXT_TRACKS_ADDED="allTextTracksAdded",t.TEXT_TRACK_ADDED="textTrackAdded",t.TTML_PARSED="ttmlParsed",t.TTML_TO_PARSE="ttmlToParse",t.CAPTION_RENDERED="captionRendered",t.CAPTION_CONTAINER_RESIZE="captionContainerResize",t.CAN_PLAY="canPlay",t.CAN_PLAY_THROUGH="canPlayThrough",t.PLAYBACK_ENDED="playbackEnded",t.PLAYBACK_ERROR="playbackError",t.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",t.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",t.PLAYBACK_LOADED_DATA="playbackLoadedData",t.PLAYBACK_PAUSED="playbackPaused",t.PLAYBACK_PLAYING="playbackPlaying",t.PLAYBACK_PROGRESS="playbackProgress",t.PLAYBACK_RATE_CHANGED="playbackRateChanged",t.PLAYBACK_SEEKED="playbackSeeked",t.PLAYBACK_SEEKING="playbackSeeking",t.PLAYBACK_SEEK_ASKED="playbackSeekAsked",t.PLAYBACK_STALLED="playbackStalled",t.PLAYBACK_STARTED="playbackStarted",t.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",t.PLAYBACK_WAITING="playbackWaiting",t.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",t.EVENT_MODE_ON_START="eventModeOnStart",t.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",t.CONFORMANCE_VIOLATION="conformanceViolation",t.REPRESENTATION_SWITCH="representationSwitch",t}return s}(n("./src/core/events/EventsBase.js").default));e.default=s},"./src/streaming/MediaPlayerFactory.js":function(t,e,n){"use strict";n.r(e);var r,i=n("./src/streaming/MediaPlayer.js"),a=function(){var t;function e(e,n,r){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var a,o=e.id||e.name||"video element";if(!(n=n||[].slice.call(e.querySelectorAll("source")).filter((function(t){return"application/dash+xml"==t.type}))[0])&&e.src)(n=document.createElement("source")).src=e.src;else if(!n&&!e.src)return null;return r=r||{},(a=Object(i.default)(r).create()).initialize(e,n.src,e.autoplay),t||(t=a.getDebug().getLogger()),t.debug("Converted "+o+" to dash.js player and added content: "+n.src),e._dashjs_player=a,a}function n(t){return/^VIDEO$/i.test(t.nodeName)?t:n(t.parentNode)}return{create:e,createAll:function(t,r){var i=[];t=t||"[data-dashjs-player]";for(var a=(r=r||document).querySelectorAll(t),o=0;o<a.length;o++){var s=e(a[o],null);i.push(s)}for(var u=r.querySelectorAll('source[type="application/dash+xml"]'),l=0;l<u.length;l++){var c=e(n(u[l]),null);i.push(c)}return i}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():r=window.setInterval((function(){window.dashjs&&(window.clearInterval(r),a.createAll())}),500):window.addEventListener("load",(function t(){window.removeEventListener("load",t),a.createAll()}))),e.default=a},"./src/streaming/SourceBufferSink.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/core/errors/Errors.js"),s=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/core/events/Events.js");function f(t){var e,n,a,f,d,h,p=this.context,g=Object(s.default)(p).getInstance(),v=t.textController,m=t.eventBus,y=[],_=[],b=!1,E=t.mediaSource,T=null;function S(t){return new Promise((function(e){P((function(){f.changeType&&f.changeType(t),e()}))}))}function w(t){return f=v.getTextSourceBuffer(t),Promise.resolve()}function A(){if("function"==typeof f.addEventListener)try{f.addEventListener("updateend",k,!1),f.addEventListener("error",O,!1),f.addEventListener("abort",O,!1)}catch(t){h=setInterval(k,50)}else h=setInterval(k,50)}function x(t){return new Promise((function(e){f&&g.get().streaming.buffer.useAppendWindow?P((function(){try{if(!f)return void e();var n=E.duration,r=0;t&&!isNaN(t.start)&&!isNaN(t.duration)&&isFinite(t.duration)&&(n=t.start+t.duration),t&&!isNaN(t.start)&&(r=t.start),f.appendWindowEnd===n&&f.appendWindowStart===r||(f.appendWindowStart=0,f.appendWindowEnd=n+.01,f.appendWindowStart=Math.max(r-.1,0),a.debug("Updated append window for ".concat(d.type,". Set start to ").concat(f.appendWindowStart," and end to ").concat(f.appendWindowEnd))),e()}catch(i){a.warn("Failed to set append window"),e()}})):e()}))}function C(t){return new Promise((function(e){f?P((function(){try{f.timestampOffset===t||isNaN(t)||(f.timestampOffset=t,a.debug("Set MSE timestamp offset to ".concat(t))),e()}catch(n){e()}})):e()}))}function D(){return new Promise((function(t){P((function(){var e=f.appendWindowStart,n=f.appendWindowEnd;f&&(f.abort(),f.appendWindowStart=e,f.appendWindowEnd=n),t()}))}))}function I(){if(!b&&_.length>0){b=!0;var t=_[0];_.splice(0,1);var e=function(){b=!1,_.length>0&&I.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==l.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})};try{T=t.request,0===t.data.bytes.byteLength?e.call(this):(f.appendBuffer?f.appendBuffer(t.data.bytes):f.append(t.data.bytes,t.data),P(e.bind(this)))}catch(n){a.fatal('SourceBuffer append failed "'+n+'"'),_.length>0?I():b=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new i.default(n.code,n.message)})}}}function R(){y.length>0&&(f.updating||(y.shift()(),R()))}function k(){f.updating||R()}function O(t){m.trigger(c.default.SOURCE_BUFFER_ERROR,{error:t.target||{},lastRequestAppended:T}||{},{streamId:d.streamInfo.id,mediaType:n})}function P(t){y.push(t),f.updating||R()}return e={getType:function(){return n},getAllBufferRanges:function(){try{return f.buffered}catch(t){return a.error("getAllBufferRanges exception: "+t.message),null}},getBuffer:function(){return f},append:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,a){t?(_.push({data:t,promise:{resolve:r,reject:a},request:n}),P(I.bind(e))):a({chunk:t,error:new i.default(o.default.APPEND_ERROR_CODE,o.default.APPEND_ERROR_MESSAGE)})}))},remove:function(t){return new Promise((function(e,n){var r=t.start,a=t.end;r>=0&&a>r?P((function(){try{f.remove(r,a),P((function(){e({from:r,to:a,unintended:!1}),t.resolve&&t.resolve()}))}catch(s){n({from:r,to:a,unintended:!1,error:new i.default(o.default.REMOVE_ERROR_CODE,o.default.REMOVE_ERROR_MESSAGE)}),t.reject&&t.reject(s)}})):e()}))},abort:function(){return new Promise((function(t){try{_=[],"open"===E.readyState?P((function(){try{f&&f.abort(),t()}catch(e){t()}})):f&&f.setTextTrack&&"ended"===E.readyState?(f.abort(),t()):t()}catch(e){t()}}))},reset:function(){if(f){try{y=[],function(){try{"function"==typeof f.removeEventListener&&(f.removeEventListener("updateend",k,!1),f.removeEventListener("error",O,!1),f.removeEventListener("abort",O,!1)),clearInterval(h)}catch(t){a.error(t)}}(),b=!1,_=[],f.getClassName&&"TextSourceBuffer"===f.getClassName()||(a.debug("Removing sourcebuffer from media source"),E.removeSourceBuffer(f))}catch(t){}f=null}T=null},updateTimestampOffset:C,initializeForStreamSwitch:function(t,e,r){n=(d=t).type;var i=d.codec;!function(t){f=t.getBuffer()}(r),A();var a=[];return a.push(D),a.push(x(d.streamInfo)),a.push(S(i)),e&&void 0!==e.MSETimeOffset&&a.push(C(e.MSETimeOffset)),Promise.all(a)},initializeForFirstUse:function(t,e,r){n=(d=e).type;var i=d.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return w(t);f=E.addSourceBuffer(i),A();var a=[];return a.push(x(d.streamInfo)),r&&void 0!==r.MSETimeOffset&&a.push(C(r.MSETimeOffset)),Promise.all(a)}catch(o){return d.type==u.default.TEXT&&!d.isFragmented||-1!==i.indexOf('codecs="stpp')||-1!==i.indexOf('codecs="vtt')?w(t):Promise.reject(o)}},updateAppendWindow:x,changeType:S},a=Object(r.default)(p).getInstance().getLogger(e),e}f.__dashjs_factory_name="SourceBufferSink";var d=a.default.getClassFactory(f);e.default=d},"./src/streaming/Stream.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/StreamProcessor.js"),o=n("./src/streaming/controllers/FragmentController.js"),s=n("./src/streaming/thumbnail/ThumbnailController.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/Debug.js"),f=n("./src/core/errors/Errors.js"),d=n("./src/core/FactoryMaker.js"),h=n("./src/streaming/vo/DashJSError.js"),p=n("./src/streaming/utils/BoxParser.js"),g=n("./src/streaming/utils/URLUtils.js"),v=n("./src/streaming/controllers/BlacklistController.js"),m=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT,r.default.MUXED,r.default.IMAGE];function y(t){t=t||{};var e,n,d,y,_,b,E,T,S,w,A,x,C,D,I,R,k,O,P=this.context,M=Object(u.default)(P).getInstance(),L=Object(g.default)(P).getInstance(),N=t.manifestModel,F=t.mediaPlayerModel,j=t.dashMetrics,B=t.manifestUpdater,U=t.adapter,V=t.timelineConverter,G=t.capabilities,H=t.errHandler,Y=t.abrController,z=t.playbackController,q=t.eventController,X=t.mediaController,K=t.protectionController,W=t.textController,Q=t.videoModel,$=t.streamInfo,Z=t.settings;function J(e,o){return new Promise((function(u,c){st(),w=!0,lt();var p,g=Q.getElement();m.forEach((function(o){(o!==r.default.VIDEO||!g||g&&/^VIDEO$/i.test(g.nodeName))&&function(e,o){var u,c=U.getAllMediaInfoForType($,e),f=[],h=null;if(c&&0!==c.length){e===r.default.VIDEO&&(E=!0),e===r.default.AUDIO&&(T=!0);for(var p=0,g=c.length;p<g;p++)h=c[p],e===r.default.TEXT&&h.isEmbedded&&(W.addEmbeddedTrack($,h),f.push(h)),tt(h)&&X.addTrack(h);if(f.length>0&&(X.setInitialMediaSettingsForType(e,$),W.setInitialSettings(X.getInitialSettings(e)),W.addMediaInfosToBuffer($,e,f)),0!==(c=c.filter((function(t){return!t.isEmbedded}))).length)if(e!==r.default.IMAGE){M.trigger(l.default.STREAM_INITIALIZING,{streamInfo:$,mediaInfo:h}),X.setInitialMediaSettingsForType(e,$);var v=function(e,n){var i=e&&e.length>0?e[0]:null,o=A.getModel(i?i.type:null),s=i?i.type:null,u=i?i.mimeType:null,l=i?i.isFragmented:null,c=Object(a.default)(P).create({streamInfo:$,type:s,mimeType:u,timelineConverter:V,adapter:U,manifestModel:N,mediaPlayerModel:F,fragmentModel:o,dashMetrics:t.dashMetrics,baseURLController:t.baseURLController,segmentBaseController:t.segmentBaseController,abrController:Y,playbackController:z,mediaController:X,textController:W,errHandler:H,settings:Z,boxParser:I,segmentBlacklistController:C});c.initialize(n,E,l),d.push(c);for(var f=0;f<e.length;f++)c.addMediaInfo(e[f]);return s===r.default.TEXT&&W.addMediaInfosToBuffer($,s,e,o),c}(c,o);(u=X.getCurrentTrackFor(e,$.id))&&(Y.updateTopQualityIndex(u),v.selectMediaInfo(e===r.default.TEXT&&u.isEmbedded?c[0]:u))}else(x=Object(s.default)(P).create({streamInfo:$,adapter:U,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:R,eventBus:M,events:l.default,dashConstants:i.default,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController})).initialize()}else n.info("No "+e+" data.")}(o,e)})),(p=o,new Promise((function(t){var e={},n=d.map((function(t){return t.createBufferSinks(p)}));Promise.all(n).then((function(n){n.forEach((function(t){t&&(e[t.getType()]=t)})),t(e)})).catch((function(){t(e)}))}))).then((function(t){if(w=!1,0===d.length){var e="No streams to play.";H.error(new h.default(f.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,N.getValue())),n.fatal(e)}else ct();W.createTracks($),u(t)})).catch((function(t){c(t)}))}))}function tt(t){var e=t?t.type:null;return e===r.default.MUXED?(n.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),H.error(new h.default(f.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",N.getValue())),!1):!(e!==r.default.TEXT&&e!==r.default.IMAGE&&t.contentProtection&&!G.supportsEncryptedMedia()&&(H.error(new h.default(f.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,f.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function et(t){for(var e=d?d.length:0,n=0;n<e;n++){var r=d[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),d[n].reset(!1,t)}W&&W.deactivateStream($),d=[],_=!1,b=!1,bt(!1),rt(!1),M.trigger(l.default.STREAM_DEACTIVATED,{streamInfo:$})}function nt(t){et(t),y=!1,E=!1,T=!1,S={},w=!1,k=!1,O=[]}function rt(t){k=t}function it(){return $?$.start:NaN}function at(){return $?$.id:null}function ot(){return $}function st(){if(!Q||!Y)throw new Error(r.default.MISSING_CONFIG_ERROR)}function ut(t){t.error&&(H.error(t.error),n.fatal(t.error.message))}function lt(){if(q){var t=U.getEventsFor($);q.addInlineEvents(t)}}function ct(){for(var t=d.length,e=S.audio||S.video?new h.default(f.default.DATA_UPDATE_FAILED_ERROR_CODE,f.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<t;n++)if(d[n].isUpdating()||w)return;if(K){K.clearMediaInfoArray();for(var i=0;i<t&&d[i];i++){var a=d[i].getType(),o=d[i].getMediaInfo();if(a===r.default.AUDIO||a===r.default.VIDEO||a===r.default.TEXT&&o.isFragmented){var s=d[i].getMediaInfo();s&&K.initializeForMedia(s)}}}e?H.error(e):y||(y=!0,Q.waitForReadyState(r.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){M.trigger(l.default.STREAM_INITIALIZED,{streamInfo:$})})))}function ft(){var t=vt(),e=t.length;if(0!==e){for(var i=0;i<e;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===r.default.AUDIO||t[i].getType()===r.default.VIDEO))return void n.debug("onBufferingCompleted - One streamProcessor has finished but",t[i].getType(),"one is not buffering completed");n.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),b=!0,M.trigger(l.default.STREAM_BUFFERING_COMPLETED,{streamInfo:$},{streamInfo:$})}else n.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function dt(t){S[t.mediaType]=t.error,ct()}function ht(t){q&&q.addInbandEvents(t.events)}function pt(t){return t&&t.type?gt(t.type):null}function gt(t){return t?vt().filter((function(e){return e.getType()===t}))[0]:null}function vt(){for(var t,e,n=[],i=0;i<d.length;i++)(t=(e=d[i]).getType())!==r.default.AUDIO&&t!==r.default.VIDEO&&t!==r.default.TEXT||n.push(e);return n}function mt(t,e){var n=ot(),r=e.getStreamInfo();if(!r||!n)return!0;var i=U.getAdaptationForType(r.index,t,r),a=U.getAdaptationForType(n.index,t,n);return i&&a?!(!yt(a)&&yt(i)):!i&&!a}function yt(t){return!!t&&!!(t.ContentProtection||t.Representation&&t.Representation.length>0&&t.Representation[0].ContentProtection)}function _t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t||!t.hasOwnProperty("getStreamInfo"))return!1;var r=t.getStreamInfo(),i=n?n.getStreamInfo():ot();if(!r||!i)return!1;var a=U.getAdaptationForType(r.index,e,r),o=U.getAdaptationForType(i.index,e,i);if(!a||!o)return!a&&!o;var s=a&&o&&a.mimeType===o.mimeType,u=o.Representation_asArray.map((function(t){return t.codecs})),l=a.Representation_asArray.map((function(t){return t.codecs})),c=l.some((function(t){return u.indexOf(t)>-1})),f=l.some((function(t){return u.some((function(e){return G.codecRootCompatibleWithCodec(e,t)}))}));return c||f&&s}function bt(t){D=t}function Et(){return D}return e={initialize:function(){M.on(l.default.BUFFERING_COMPLETED,ft,e),M.on(l.default.DATA_UPDATE_COMPLETED,dt,e),M.on(l.default.INBAND_EVENTS,ht,e),K&&(M.on(l.default.KEY_ERROR,ut,e),M.on(l.default.SERVER_CERTIFICATE_UPDATED,ut,e),M.on(l.default.LICENSE_REQUEST_COMPLETE,ut,e),M.on(l.default.KEY_SYSTEM_SELECTED,ut,e),M.on(l.default.KEY_SESSION_CREATED,ut,e),M.on(l.default.KEY_STATUSES_CHANGED,ut,e)),W.initializeForStream($),M.trigger(l.default.STREAM_UPDATED,{streamInfo:$})},getStreamId:function(){return $?$.id:null},activate:function(t,e){return new Promise((function(n,r){if(!_)return Et()?(_=!0,M.trigger(l.default.STREAM_ACTIVATED,{streamInfo:$}),void n(e)):void function(t,e){return J(t,e)}(t,e).then((function(t){_=!0,M.trigger(l.default.STREAM_ACTIVATED,{streamInfo:$}),n(t)})).catch((function(t){r(t)}));n(e)}))},deactivate:et,getIsActive:function(){return _},getDuration:function(){return $?$.duration:NaN},getStartTime:it,getId:at,getStreamInfo:ot,getHasAudioTrack:function(){return T},getHasVideoTrack:function(){return E},startPreloading:function(t,e){return new Promise((function(r,i){Et()?i():(n.info("[startPreloading] Preloading next stream with id ".concat(at())),bt(!0),J(t,e).then((function(){for(var t=0;t<d.length&&d[t];t++)d[t].setExplicitBufferingTime(it()),d[t].getScheduleController().startScheduleTimer();r()})).catch((function(){bt(!1),i()})))}))},getThumbnailController:function(){return x},getBitrateListFor:function(t){if(st(),t===r.default.IMAGE)return x?x.getBitrateList():[];var e=function(t){for(var e=null,n=0;n<d.length;n++)if((e=d[n]).getType()===t)return e.getMediaInfo();return null}(t);return Y.getBitrateList(e)},updateData:function(t){return new Promise((function(e){w=!0,$=t,q&&lt();for(var n=[],r=0,i=d.length;r<i;r++){var a=d[r],o=a.getMediaInfo();n.push(a.updateStreamInfo($));var s=U.getAllMediaInfoForType($,a.getType());if(s){a.clearMediaInfoArray();for(var u=0;u<s.length;u++){var c=s[u];a.addMediaInfo(s[u]),U.areMediaInfosEqual(o,c)&&(Y.updateTopQualityIndex(c),n.push(a.selectMediaInfo(c)))}}}Promise.all(n).then((function(){for(n=[];O.length>0;){var t=O.pop(),e=t.newMediaInfo,r=pt(t.oldMediaInfo);if(!r)return;n.push(r.prepareTrackSwitch()),r.selectMediaInfo(e)}return Promise.all(n)})).then((function(){w=!1,ct(),M.trigger(l.default.STREAM_UPDATED,{streamInfo:$}),e()}))}))},reset:function(t){A&&(A.reset(),A=null),Y&&$&&Y.clearDataForStream($.id),C&&(C.reset(),C=null),nt(t),$=null,M.off(l.default.DATA_UPDATE_COMPLETED,dt,e),M.off(l.default.BUFFERING_COMPLETED,ft,e),M.off(l.default.INBAND_EVENTS,ht,e),K&&(M.off(l.default.KEY_ERROR,ut,e),M.off(l.default.SERVER_CERTIFICATE_UPDATED,ut,e),M.off(l.default.LICENSE_REQUEST_COMPLETE,ut,e),M.off(l.default.KEY_SYSTEM_SELECTED,ut,e),M.off(l.default.KEY_SESSION_CREATED,ut,e),M.off(l.default.KEY_STATUSES_CHANGED,ut,e))},getProcessors:vt,setMediaSource:function(t){for(var e=0;e<d.length;)tt(d[e].getMediaInfo())?(d[e].setMediaSource(t),e++):(d[e].reset(),d.splice(e,1));if(0===d.length){var r="No streams to play.";H.error(new h.default(f.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",N.getValue())),n.fatal(r)}},isMediaCodecCompatible:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _t(t,r.default.VIDEO,e)&&_t(t,r.default.AUDIO,e)},isProtectionCompatible:function(t){return!t||mt(r.default.VIDEO,t)&&mt(r.default.AUDIO,t)},getPreloaded:Et,getIsEndedEventSignaled:function(){return k},setIsEndedEventSignaled:rt,getAdapter:function(){return U},getHasFinishedBuffering:function(){return b},setPreloaded:bt,startScheduleControllers:function(){for(var t=d.length,e=0;e<t&&d[e];e++)d[e].getScheduleController().startScheduleTimer()},prepareTrackChange:function(t){if(_&&$){b=!1;var e=t.newMediaInfo,i=N.getValue();U.setCurrentMediaInfo($.id,e.type,e);var a=pt(e);if(a){var o=z.getTime();n.info("Stream -  Process track changed at current time "+o),i.refreshManifestOnSwitchTrack?(O.push(t),B.getIsUpdating()||(n.debug("Stream -  Refreshing manifest for switch track"),B.refreshManifest())):a.selectMediaInfo(e).then((function(){e.type!==r.default.VIDEO&&e.type!==r.default.AUDIO||Y.updateTopQualityIndex(e),a.prepareTrackSwitch()}))}}},prepareQualityChange:function(t){var e=gt(t.mediaType);e&&e.prepareQualityChange(t)}},function(){try{R=Object(c.default)(P).getInstance(),n=R.getLogger(e),nt(),I=Object(p.default)(P).getInstance(),C=Object(v.default)(P).create({updateEventName:l.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SEGMENT_LOCATION_BLACKLIST_ADD}),A=Object(o.default)(P).create({streamInfo:$,mediaPlayerModel:F,dashMetrics:j,errHandler:H,settings:Z,boxParser:I,dashConstants:i.default,urlUtils:L})}catch(t){throw t}}(),e}y.__dashjs_factory_name="Stream",e.default=d.default.getClassFactory(y)},"./src/streaming/StreamProcessor.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/controllers/BufferController.js"),u=n("./src/streaming/text/NotFragmentedTextBufferController.js"),l=n("./src/streaming/controllers/ScheduleController.js"),c=n("./src/dash/controllers/RepresentationController.js"),f=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/utils/SupervisorTools.js"),h=n("./src/core/EventBus.js"),p=n("./src/core/events/Events.js"),g=n("./src/dash/DashHandler.js"),v=n("./src/core/errors/Errors.js"),m=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/Debug.js"),_=n("./src/streaming/utils/RequestModifier.js"),b=n("./src/streaming/utils/URLUtils.js"),E=n("./src/streaming/utils/BoxParser.js"),T=n("./src/streaming/vo/metrics/PlayList.js"),S=n("./src/dash/controllers/SegmentsController.js"),w=n("./src/streaming/vo/metrics/HTTPRequest.js");function A(t){t=t||{};var e,n,f,A,x,C,D,I,R,k,O,P,M,L=this.context,N=Object(h.default)(L).getInstance(),F=t.streamInfo,j=t.type,B=t.errHandler,U=t.mimeType,V=t.timelineConverter,G=t.adapter,H=t.manifestModel,Y=t.mediaPlayerModel,z=t.fragmentModel,q=t.abrController,X=t.playbackController,K=t.mediaController,W=t.textController,Q=t.dashMetrics,$=t.settings,Z=t.boxParser,J=t.segmentBlacklistController;function tt(){return F.id}function et(){return j}function nt(){return G.getIsTextTrack(I.getData())}function rt(){x=[],A=null,M=0,R=!1,k=!1}function it(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.sender)if(X.getIsManifestUpdateInProgress())lt();else if((!nt()||W.isTextEnabled())&&C&&t.representationId&&!C.appendInitSegmentFromCache(t.representationId)){var n=I.getCurrentRepresentation();if(0===n.range)return void at();var r=O?O.getInitRequest(A,n):null;r?z.executeRequest(r):e&&(D.setInitSegmentRequired(!0),lt())}}function at(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(X.getIsManifestUpdateInProgress()||C.getIsPruningInProgress())lt();else{var n=ut();n?(R=!1,ot(n)):st(e)}}function ot(t){isNaN(t.startTime+t.duration)||(M=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+D.getTimeToLoadDelay(),D.setTimeToLoadDelay(0),function(t){var e=t.url;return t.range&&(e=e.concat("_",t.range)),J.contains(e)}(t)?(n.warn("Fragment request url ".concat(t.url," for stream id ").concat(F.id," and media type ").concat(j," is on the ignore list and will be skipped")),lt()):(n.debug("Next fragment request url for stream id ".concat(F.id," and media type ").concat(j," is ").concat(t.url)),z.executeRequest(t))}function st(t){var e=I.getCurrentRepresentation();if($.get().streaming.gaps.enableSeekFix&&!f&&R&&(X.isSeeking()||0===X.getTime())){var r=O.getValidSeekTimeCloseToTargetTime(M,A,e,$.get().streaming.gaps.threshold);if(!isNaN(r))return void X.seek(r,!1,!1)}if(O.isLastSegmentRequested(e,M)){var i=O.getCurrentIndex();return n.debug("Segment requesting for stream ".concat(F.id," has finished")),N.trigger(p.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:i},{streamId:F.id,mediaType:j}),C.segmentRequestingCompleted(i),void D.clearScheduleTimer()}t&&lt()}function ut(){var t,e=St();if(isNaN(M)||et()===r.default.TEXT&&!W.isTextEnabled())return null;var n=R;if(O){var i=I&&e?I.getRepresentationForQuality(e.quality):null;t=n?O.getSegmentRequestForTime(A,i,M):O.getNextSegmentRequest(A,i)}return t}function lt(){D.startScheduleTimer($.get().streaming.lowLatencyEnabled?$.get().streaming.scheduling.lowLatencyTimeout:$.get().streaming.scheduling.defaultTimeout)}function ct(t){t.error||(D.setCurrentRepresentation(G.convertRepresentationToRepresentationInfo(t.currentRepresentation)),C.getIsBufferingCompleted()||C.updateBufferTimestampOffset(t.currentRepresentation))}function ft(t){Q.addBufferState(j,t.state,D.getBufferTarget()),t.state!==a.default.BUFFER_EMPTY||X.isSeeking()||(n.info("Buffer is empty! Stalling!"),Q.pushPlayListTraceMetrics(new Date,T.PlayListTrace.REBUFFERING_REASON))}function dt(t){z.syncExecutedRequestsWithBufferedRange(C.getBuffer().getAllBufferRanges(),F.duration),t.quotaExceeded&&t.from>X.getTime()&&It(t.from),t.hasEnoughSpaceToAppend&&t.quotaExceeded&&D.startScheduleTimer()}function ht(t){if(t&&t.lastRequestAppended&&t.lastRequestAppended.url){var e=t.lastRequestAppended.url;t.lastRequestAppended.range&&(e=e.concat("_",t.lastRequestAppended.range)),n.warn("Blacklisting segment with url ".concat(e)),J.add(e)}}function pt(){Ct(),k=!1}function gt(t){n.info("onFragmentLoadingAbandoned request: "+t.request.url+" has been aborted"),X.isSeeking()||D.getSwitchStrack()||k||(n.info("onFragmentLoadingAbandoned request: "+t.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),t.request&&t.request.isInitializationRequest()?D.setInitSegmentRequired(!0):It(t.request.startTime+t.request.duration/2),D.startScheduleTimer(0))}function vt(t){n.info("OnFragmentLoadingCompleted for stream id "+F.id+" and media type "+j+" - Url:",t.request?t.request.url:"undefined",t.request.range?", Range:"+t.request.range:""),nt()&&D.startScheduleTimer(0),t.error&&t.request.serviceLocation&&function(t){n.info("Fragment loading completed with an error"),t&&t.request&&t.request.type&&(t.request.type===w.HTTPRequest.INIT_SEGMENT_TYPE?it({representationId:t.request.representationId,sender:{}},!1):t.request.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE&&(It(t.request.startTime+t.request.duration/2),at({},!1)))}(t)}function mt(){It(X.getTime()),Tt().startScheduleTimer()}function yt(t){var e=t.currentTrackInfo;if(e){var n=x.find((function(t){return t.index===e.index&&t.lang===e.lang}));n&&Et(n).then((function(){C.setIsBufferingCompleted(!1),It(X.getTime()),D.setInitSegmentRequired(!0),D.startScheduleTimer()}))}}function _t(t){It(t.quotaExceededTime),D.clearScheduleTimer()}function bt(){return C?C.getBuffer():null}function Et(t){t===A||t&&A&&t.type!==A.type||(A=t);var e=G.getRealAdaptation(F,A),n=G.getVoRepresentations(A);if(I){var i,a=I.getData(),o=q.getMaxAllowedIndexFor(j,F.id),s=q.getMinAllowedIndexFor(j,F.id),u=null;return null!==a&&a.id===e.id||j===r.default.TEXT?i=q.getQualityFor(j,F.id):(u=q.getThroughputHistory().getAverageThroughput(j,f)||q.getInitialBitrateFor(j,F.id),i=q.getQualityForBitrate(A,u,F.id)),void 0!==s&&i<s&&(i=s),i>o&&(i=o),I.updateData(e,n,j,A.isFragmented,i)}return Promise.resolve()}function Tt(){return D}function St(t){var e;return void 0!==t?(Object(d.checkInteger)(t),e=I?I.getRepresentationForQuality(t):null):e=I?I.getCurrentRepresentation():null,G.convertRepresentationToRepresentationInfo(e)}function wt(){return!!C&&C.getIsBufferingCompleted()}function At(t){var e=t.chunk,n=e.bytes,r=e.quality,i=St(r),a=I&&i?I.getRepresentationForQuality(i.quality):null;if(i&&a){var s=G.getEventsFor(i.mediaInfo),u=G.getEventsFor(i,a);if(s&&s.length>0||u&&u.length>0){var l=function(e,n,r,i){try{for(var a={},o=[],s=r.concat(i),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri+"/"+s[u].value]=s[u];var c=Object(E.default)(L).getInstance().parse(e),f=c.getBoxes("emsg");if(!f||0===f.length)return o;for(var d=c.getBox("sidx"),h=!d||isNaN(d.earliest_presentation_time)||isNaN(d.timescale)?n&&!isNaN(n.mediaStartTime)?n.mediaStartTime:0:d.earliest_presentation_time/d.timescale,p=Math.max(h,0),g=I.getCurrentRepresentation(),v=0,m=f.length;v<m;v++){var y=G.getEvent(f[v],a,p,g);y&&o.push(y)}return o}catch(t){return[]}}(n,z.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:e.index})[0],s,u);N.trigger(p.default.INBAND_EVENTS,{events:l},{streamId:F.id})}}}function xt(){var t=X.getTime();$.get().streaming.buffer.flushBufferAtTrackSwitch&&X.seek(t+.001,!1,!0),It(t),C.setSeekTarget(t),D.startScheduleTimer()}function Ct(){var t=X.getTime();It(C.getContinuousBufferTimeForTargetTime(t)),D.startScheduleTimer()}function Dt(t){t&&!isNaN(t.time)&&(It(t.time),C.setSeekTarget(t.time))}function It(t){M=t,R=!0}return e={initialize:function(n,a,o){P=Object(S.default)(L).create({events:p.default,eventBus:N,streamInfo:F,timelineConverter:V,dashConstants:i.default,segmentBaseController:t.segmentBaseController,type:j}),(O=Object(g.default)(L).create({streamInfo:F,type:j,timelineConverter:V,dashMetrics:Q,mediaPlayerModel:Y,baseURLController:t.baseURLController,errHandler:B,segmentsController:P,settings:$,boxParser:Z,events:p.default,eventBus:N,errors:v.default,debug:Object(y.default)(L).getInstance(),requestModifier:Object(_.default)(L).getInstance(),dashConstants:i.default,constants:r.default,urlUtils:Object(b.default)(L).getInstance()})).initialize(f=F.manifestInfo.isDynamic),q.registerStreamType(j,e),I=Object(c.default)(L).create({streamInfo:F,type:j,abrController:q,dashMetrics:Q,playbackController:X,timelineConverter:V,dashConstants:i.default,events:p.default,eventBus:N,errors:v.default,isDynamic:f,segmentsController:P}),(C=function(t,e){return t?t!==r.default.TEXT||e?Object(s.default)(L).create({streamInfo:F,type:t,mediaPlayerModel:Y,manifestModel:H,fragmentModel:z,errHandler:B,mediaController:K,representationController:I,adapter:G,textController:W,abrController:q,playbackController:X,settings:$}):Object(u.default)(L).create({streamInfo:F,type:t,mimeType:U,fragmentModel:z,textController:W,errHandler:B,settings:$}):(B.error(new m.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(j,o))&&C.initialize(n),(D=Object(l.default)(L).create({streamInfo:F,type:j,mimeType:U,adapter:G,dashMetrics:Q,mediaPlayerModel:Y,fragmentModel:z,abrController:q,playbackController:X,textController:W,mediaController:K,bufferController:C,settings:$})).initialize(a),M=0,R=!1},getStreamId:tt,getType:et,isUpdating:function(){return!!I&&I.isUpdating()},getBufferController:function(){return C},getFragmentModel:function(){return z},getScheduleController:Tt,getRepresentationController:function(){return I},getRepresentationInfo:St,getBufferLevel:function(){return C?C.getBufferLevel():0},isBufferingCompleted:wt,createBufferSinks:function(t){var e=bt();return e?Promise.resolve(e):C?C.createBufferSink(A,t):Promise.resolve(null)},updateStreamInfo:function(t){return F=t,wt()?Promise.resolve():C.updateAppendWindow()},getStreamInfo:function(){return F},selectMediaInfo:Et,clearMediaInfoArray:function(){x=[]},addMediaInfo:function(t){-1===x.indexOf(t)&&x.push(t)},prepareTrackSwitch:function(){return new Promise((function(t){n.debug("Preparing track switch for type ".concat(j));var e=j===r.default.TEXT||$.get().streaming.trackSwitchMode[j]===r.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&X.getTimeToStreamEnd(F)>$.get().streaming.buffer.stallThreshold;if(C.getIsBufferingCompleted()&&!e)return C.prepareForNonReplacementTrackSwitch(A.codec).then((function(){N.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:j})})).catch((function(){N.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:j})})),void t();D.clearScheduleTimer(),D.setSwitchTrack(!0),e?(N.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:j,streamId:F.id},{mediaType:j,streamId:F.id}),z.abortRequests(),C.prepareForReplacementTrackSwitch(A.codec).then((function(){var t=St();return C.updateBufferTimestampOffset(t)})).then((function(){xt(),t()})).catch((function(){xt(),t()}))):C.prepareForNonReplacementTrackSwitch(A.codec).then((function(){Ct(),t()})).catch((function(){Ct(),t()}))}))},prepareQualityChange:function(t){n.debug("Preparing quality switch for type ".concat(j));var e=t.newQuality;k=!0,D.clearScheduleTimer();var r=St(e);D.setCurrentRepresentation(r),I.prepareQualityChange(e),z.abortRequests(),C.updateBufferTimestampOffset(r).then((function(){t.reason&&t.reason.forceReplace?(N.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:j,streamId:F.id},{mediaType:j,streamId:F.id}),C.prepareForReplacementQualitySwitch().then((function(){xt(),k=!1})).catch((function(){xt(),k=!1}))):$.get().streaming.buffer.fastSwitchEnabled?function(t){var e=X.getTime(),n=z.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:e+1.5,threshold:0})[0];if(n&&!nt()){var r=C.getBufferLevel(),i=q.getAbandonmentStateFor(F.id,j);n.quality<t.quality&&r>=1.5&&i!==a.default.ABANDON_LOAD?(It(e+1.5),D.setCheckPlaybackQuality(!1),D.startScheduleTimer()):pt()}else D.startScheduleTimer();k=!1}(r):pt(),Q.pushPlayListTraceMetrics(new Date,T.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Q.createPlaylistTraceMetrics(r.id,1e3*X.getTime(),X.getPlaybackRate())}))},getMediaInfo:function(){return A},getMediaSource:function(){return C.getMediaSource()},setMediaSource:function(t){C.setMediaSource(t)},getBuffer:bt,setExplicitBufferingTime:It,finalisePlayList:function(t,e){Q.pushPlayListTraceMetrics(t,e)},probeNextRequest:function(){var t=St(),e=I&&t?I.getRepresentationForQuality(t.quality):null;return O.getNextSegmentRequestIdempotent(A,e)},prepareInnerPeriodPlaybackSeeking:function(t){return new Promise((function(e){D.clearScheduleTimer(),z.abortRequests(),C.prepareForPlaybackSeek().then((function(){var e=C.getAllRangesWithSafetyFactor(t.seekTime);return C.clearBuffers(e)})).then((function(){var n=C.getContinuousBufferTimeForTargetTime(t.seekTime);if(!isNaN(F.duration)&&isFinite(F.duration)&&n>=F.start+F.duration)C.setIsBufferingCompleted(!0),e();else{It(n),C.setSeekTarget(n);var r=[];r.push(C.updateAppendWindow());var i=St();r.push(C.updateBufferTimestampOffset(i)),Promise.all(r).then((function(){D.setInitSegmentRequired(!0),D.setCheckPlaybackQuality(!1),D.startScheduleTimer(),e()}))}})).catch((function(t){n.error(t)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(t,e){try{D.clearScheduleTimer(),z.abortRequests(),C.prepareForPlaybackSeek().then((function(){return C.pruneAllSafely()})).then((function(){t()}))}catch(n){e(n)}}))},reset:function(t,n){O&&O.reset(),C&&(C.reset(t,n),C=null),D&&(D.reset(),D=null),I&&(I.reset(),I=null),P&&(P=null),q&&q.unRegisterStreamType(tt(),j),N.off(p.default.DATA_UPDATE_COMPLETED,ct,e),N.off(p.default.INIT_FRAGMENT_NEEDED,it,e),N.off(p.default.MEDIA_FRAGMENT_NEEDED,at,e),N.off(p.default.MEDIA_FRAGMENT_LOADED,At,e),N.off(p.default.BUFFER_LEVEL_STATE_CHANGED,ft,e),N.off(p.default.BUFFER_CLEARED,dt,e),N.off(p.default.SEEK_TARGET,Dt,e),N.off(p.default.FRAGMENT_LOADING_ABANDONED,gt,e),N.off(p.default.FRAGMENT_LOADING_COMPLETED,vt,e),N.off(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,mt,e),N.off(p.default.SET_NON_FRAGMENTED_TEXT,yt,e),N.off(p.default.QUOTA_EXCEEDED,_t,e),N.off(p.default.SOURCE_BUFFER_ERROR,ht,e),rt(),j=null,F=null}},n=Object(y.default)(L).getInstance().getLogger(e),rt(),N.on(p.default.DATA_UPDATE_COMPLETED,ct,e,{priority:h.default.EVENT_PRIORITY_HIGH}),N.on(p.default.INIT_FRAGMENT_NEEDED,it,e),N.on(p.default.MEDIA_FRAGMENT_NEEDED,at,e),N.on(p.default.MEDIA_FRAGMENT_LOADED,At,e),N.on(p.default.BUFFER_LEVEL_STATE_CHANGED,ft,e),N.on(p.default.BUFFER_CLEARED,dt,e),N.on(p.default.SEEK_TARGET,Dt,e),N.on(p.default.FRAGMENT_LOADING_ABANDONED,gt,e),N.on(p.default.FRAGMENT_LOADING_COMPLETED,vt,e),N.on(p.default.QUOTA_EXCEEDED,_t,e),N.on(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,mt,e),N.on(p.default.SET_NON_FRAGMENTED_TEXT,yt,e),N.on(p.default.SOURCE_BUFFER_ERROR,ht,e),e}A.__dashjs_factory_name="StreamProcessor",e.default=f.default.getClassFactory(A)},"./src/streaming/XlinkLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/streaming/vo/TextRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/errors/Errors.js");function f(t){t=t||{};var e=this.context,n=Object(s.default)(e).getInstance(),l=Object(i.default)(e).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,errors:c.default});return{load:function(t,e,i){var s=function(a,o){e.resolved=!0,e.resolvedContent=a||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:e,resolveObject:i,error:a||o?null:new r.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+t)})};if("urn:mpeg:dash:resolve-to-zero:2013"===t)s(null,!0);else{var f=new o.default(t,a.HTTPRequest.XLINK_EXPANSION_TYPE);l.load({request:f,success:function(t){s(t)},error:function(){s(null)}})}},reset:function(){l&&(l.abort(),l=null)}}}f.__dashjs_factory_name="XlinkLoader",e.default=l.default.getClassFactory(f)},"./src/streaming/constants/ConformanceViolationConstants.js":function(t,e,n){"use strict";n.r(e),e.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/constants/MetricsConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/constants/ProtectionConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/controllers/AbrController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/abr/ABRRulesCollection.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/streaming/vo/BitrateInfo.js"),s=n("./src/streaming/models/FragmentModel.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/rules/RulesContext.js"),d=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/rules/SwitchRequestHistory.js"),p=n("./src/streaming/rules/DroppedFramesHistory.js"),g=n("./src/streaming/rules/ThroughputHistory.js"),v=n("./src/core/Debug.js"),m=n("./src/streaming/vo/metrics/HTTPRequest.js"),y=n("./src/streaming/utils/SupervisorTools.js"),_=n("./src/streaming/MediaPlayerEvents.js");function b(){var t,e,n,c,b,E,T,S,w,A,x,C,D,I,R,k,O,P,M,L,N,F,j,B,U,V=this.context,G=Object(v.default)(V).getInstance(),H=Object(u.default)(V).getInstance();function Y(){b={},E={},S={},T={},P={},N={},F={},j={},void 0===A&&(A=!1),M&&M.reset(),O=void 0,M=void 0,L=void 0,clearTimeout(w),w=null}function z(e){var r=e.request.mediaType,i=e.streamId;if(r&&i&&T[i]&&U.get().streaming.abr.autoSwitchBitrate[r]){var o=T[i][r];if(o){var u=Object(f.default)(V).create({abrController:t,streamProcessor:o,currentRequest:e.request,useBufferOccupancyABR:N[r],useL2AABR:F[r],useLoLPABR:j[r],videoModel:I}),l=n.shouldAbandonFragment(u,i);if(l.quality>d.default.NO_CHANGE){var h=o.getFragmentModel();h.getRequests({state:s.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(h.abortRequests(),S[i][r].state=a.default.ABANDON_LOAD,P[i][r].reset(),P[i][r].push({oldValue:Q(r,i),newValue:l.quality,confidence:1,reason:l.reason}),$(r,c.getActiveStreamInfo(),l.quality,l.reason),clearTimeout(w),w=setTimeout((function(){S[i][r].state=a.default.ALLOW_LOAD,w=null}),U.get().streaming.abandonLoadTimeout))}}}}function q(t){t.mediaType===i.default.VIDEO&&(void 0!==O&&M.push(t.streamId,O,I.getPlaybackQuality()),O=t.newQuality)}function X(t){var n,r;t.metric!==a.default.HTTP_REQUEST||!t.value||t.value.type!==m.HTTPRequest.MEDIA_SEGMENT_TYPE||t.mediaType!==i.default.AUDIO&&t.mediaType!==i.default.VIDEO||L.push(t.mediaType,t.value,U.get().streaming.abr.useDeadTimeLatency),t.metric!==a.default.BUFFER_LEVEL||t.mediaType!==i.default.AUDIO&&t.mediaType!==i.default.VIDEO||(n=t.mediaType,r=.001*t.value.level,U.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_DYNAMIC&&function(t,n){var r=R.getStableBufferTime(),i=N[t],a=n>(i?.5*r:r);N[t]=a,a!==i&&e.info(a?"["+t+"] switching from throughput to buffer occupancy ABR rule (buffer: "+n.toFixed(3)+").":"["+t+"] switching from buffer occupancy to throughput ABR rule (buffer: "+n.toFixed(3)+").")}(n,r))}function K(t,e){try{return b[e]=b[e]||{},b[e].hasOwnProperty(t)||(b[e][t]=0),function(t,e,n){if(e!==i.default.VIDEO||!U.get().streaming.abr.limitBitrateByPortal||!T[n]||!T[n][e])return t;A||et();var r=T[n][e].getStreamInfo(),a=D.getAdaptationForType(r.index,e,r).Representation,o=t;if(x>0&&C>0){for(;o>0&&a[o]&&x<a[o].width&&x-a[o-1].width<a[o].width-x;)o-=1;for(;o<a.length-1&&a[o].width===a[o+1].width;)o+=1}return o}(function(t,e,n){var r=b[n][e],i=U.get().streaming.abr.maxRepresentationRatio[e];return isNaN(i)||i>=1||i<0?t:Math.min(t,Math.round(r*i))}(function(t,e){var n=b[e][t],r=n;if(!T[e]||!T[e][t])return r;var i=W(t,e);void 0!==i&&(r=Math.max(n,i));var a=function(t,e){try{var n=U.get().streaming.abr.maxBitrate[t];return n>-1?J(T[e][t].getMediaInfo(),n,e):void 0}catch(r){return}}(t,e);return void 0!==a&&(r=Math.min(r,a)),r}(t,e),t,e),t,e)}catch(n){return}}function W(t,e){try{return function(t,e){try{var n=U.get().streaming.abr.minBitrate[t];if(n>-1){var r=T[e][t].getMediaInfo(),i=tt(r),a=J(r,n,e);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}return}catch(o){return}}(t,e)}catch(n){return}}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return e||(e=c.getActiveStreamInfo().id),t&&T[e]&&T[e][t]&&e?(E[e]=E[e]||{},E[e].hasOwnProperty(t)||(E[e][t]=0),E[e][t]):0}catch(n){return 0}}function $(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e&&e.id&&t){var i=e.id,a=Q(t,i);Object(y.checkInteger)(n);var o=K(t,i);n!==a&&n>=0&&n<=o&&Z(t,a,n,o,r,i)}}function Z(t,n,r,i,a,o){if(t&&T[o]&&T[o][t]){var s=T[o][t].getStreamInfo(),u=s&&s.manifestInfo&&s.manifestInfo.isDynamic,c=B.getCurrentBufferLevel(t);e.info("Stream ID: "+o+" ["+t+"] switch from "+n+" to "+r+"/"+i+" (buffer: "+c+") "+(a?JSON.stringify(a):".")),E[o]=E[o]||{},E[o][t]=r;var f=function(t,e,n){if(e&&T&&T[t]&&T[t][e]){var r=tt(T[t][e].getMediaInfo());return r[n]?r[n]:null}return null}(o,t,r);H.trigger(l.default.QUALITY_CHANGE_REQUESTED,{oldQuality:n,newQuality:r,reason:a,streamInfo:s,bitrateInfo:f,maxIdx:i,mediaType:t},{streamId:s.id,mediaType:t});var d=L.getAverageThroughput(t,u);isNaN(d)||k.setSavedBitrateSettings(t,d)}}function J(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t&&t.type?T[n][t.type].getRepresentationInfo():null;if(U.get().streaming.abr.useDeadTimeLatency&&r&&i&&i.fragmentDuration){var a=i.fragmentDuration;if((r/=1e3)>a)return 0;var o=r/a;e*=1-o}for(var s=tt(t),u=s.length-1;u>=0;u--){var l=s[u];if(1e3*e>=l.bitrate)return u}return 0}function tt(t){var e=[];if(!t||!t.bitrateList)return e;for(var n,r=t.bitrateList,i=t.type,a=0,s=r.length;a<s;a++)(n=new o.default).mediaType=i,n.qualityIndex=a,n.bitrate=r[a].bandwidth,n.width=r[a].width,n.height=r[a].height,n.scanType=r[a].scanType,e.push(n);return e}function et(){if(I){var t=U.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;x=I.getClientWidth()*t,C=I.getClientHeight()*t}}return e=G.getLogger(t={initialize:function(){M=Object(p.default)(V).create(),L=Object(g.default)(V).create({settings:U}),(n=Object(r.default)(V).create({dashMetrics:B,mediaPlayerModel:R,settings:U})).initialize(),H.on(_.default.QUALITY_CHANGE_RENDERED,q,t),H.on(_.default.METRIC_ADDED,X,t),H.on(l.default.LOADING_PROGRESS,z,t)},isPlayingAtTopQuality:function(t){var e=t?t.id:null,n=Q(i.default.AUDIO,e),r=Q(i.default.VIDEO,e);return n===K(i.default.AUDIO,e)&&r===K(i.default.VIDEO,e)},updateTopQualityIndex:function(t){var e=t.type,n=t.streamInfo.id,r=t.representationCount-1;return b[n]=b[n]||{},b[n][e]=r,r},clearDataForStream:function(t){M&&M.clearForStream(t),T[t]&&delete T[t],P[t]&&delete P[t],S[t]&&delete S[t]},getThroughputHistory:function(){return L},getBitrateList:tt,getQualityForBitrate:J,getTopBitrateInfoFor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e||(e=c.getActiveStreamInfo().id),t&&T&&T[e]&&T[e][t]){var n=K(t,e),r=tt(T[e][t].getMediaInfo());return r[n]?r[n]:null}return null},getMinAllowedIndexFor:W,getMaxAllowedIndexFor:K,getInitialBitrateFor:function(t,e){if(function(){if(!k||!k.hasOwnProperty("getSavedBitrateSettings"))throw new Error(i.default.MISSING_CONFIG_ERROR)}(),t===i.default.TEXT)return NaN;var n=k.getSavedBitrateSettings(t),r=U.get().streaming.abr.initialBitrate[t],a=U.get().streaming.abr.initialRepresentationRatio[t];if(-1===r)if(a>-1){var o=T[e][t].getStreamInfo(),s=D.getAdaptationForType(o.index,t,o).Representation;r=Array.isArray(s)?s[Math.max(Math.round(s.length*a)-1,0)].bandwidth/1e3:0}else r=isNaN(n)?t===i.default.VIDEO?1e3:100:n;return r},getQualityFor:Q,getAbandonmentStateFor:function(t,e){return S[t]&&S[t][e]?S[t][e].state:null},setPlaybackQuality:$,checkPlaybackQuality:function(e,r){try{if(!(e&&T&&T[r]&&T[r][e]))return!1;if(M){var i=I.getPlaybackQuality();i&&M.push(r,O,i)}if(!U.get().streaming.abr.autoSwitchBitrate[e])return!1;var o=Q(e,r),s=Object(f.default)(V).create({abrController:t,switchHistory:P[r][e],droppedFramesHistory:M,streamProcessor:T[r][e],currentValue:o,useBufferOccupancyABR:N[e],useL2AABR:F[e],useLoLPABR:j[e],videoModel:I}),u=W(e,r),l=K(e,r),c=n.getMaxQuality(s),h=c.quality;return void 0!==u&&(h>d.default.NO_CHANGE?h:o)<u&&(h=u),h>l&&(h=l),P[r][e].push({oldValue:o,newValue:h}),h>d.default.NO_CHANGE&&h!==o&&(S[r][e].state===a.default.ALLOW_LOAD||h>o)&&(Z(e,o,h,l,c.reason,r),!0)}catch(p){return!1}},setElementSize:et,setWindowResizeEventCalled:function(t){A=t},registerStreamType:function(t,e){var n=e.getStreamInfo().id;T[n]||(T[n]={}),P[n]||(P[n]={}),S[n]||(S[n]={}),P[n][t]=Object(h.default)(V).create(),T[n][t]=e,S[n][t]={},S[n][t].state=a.default.ALLOW_LOAD,function(t){var e=U.get().streaming.abr.ABRStrategy;e===i.default.ABR_STRATEGY_L2A?(N[t]=!1,j[t]=!1,F[t]=!0):e===i.default.ABR_STRATEGY_LoLP?(N[t]=!1,j[t]=!0,F[t]=!1):e===i.default.ABR_STRATEGY_BOLA?(N[t]=!0,j[t]=!1,F[t]=!1):e===i.default.ABR_STRATEGY_THROUGHPUT?(N[t]=!1,j[t]=!1,F[t]=!1):e===i.default.ABR_STRATEGY_DYNAMIC&&(N[t]=!(!N||!N[t])&&N[t],j[t]=!1,F[t]=!1)}(t),t===i.default.VIDEO&&et()},unRegisterStreamType:function(t,e){try{T[t]&&T[t][e]&&delete T[t][e],P[t]&&P[t][e]&&delete P[t][e],S[t]&&S[t][e]&&delete S[t][e]}catch(n){}},setConfig:function(t){t&&(t.streamController&&(c=t.streamController),t.domStorage&&(k=t.domStorage),t.mediaPlayerModel&&(R=t.mediaPlayerModel),t.dashMetrics&&(B=t.dashMetrics),t.adapter&&(D=t.adapter),t.videoModel&&(I=t.videoModel),t.settings&&(U=t.settings))},reset:function(){Y(),H.off(l.default.LOADING_PROGRESS,z,t),H.off(_.default.QUALITY_CHANGE_RENDERED,q,t),H.off(_.default.METRIC_ADDED,X,t),n&&n.reset()}}),Y(),t}b.__dashjs_factory_name="AbrController";var E=c.default.getSingletonFactory(b);E.QUALITY_DEFAULT=0,c.default.updateSingletonFactory(b.__dashjs_factory_name,E),e.default=E},"./src/streaming/controllers/BaseURLController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/models/BaseURLTreeModel.js"),i=n("./src/streaming/utils/BaseURLSelector.js"),a=n("./src/streaming/utils/URLUtils.js"),o=n("./src/dash/vo/BaseURL.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js");function c(){var t,e,n,s,c=this.context,f=Object(u.default)(c).getInstance(),d=Object(a.default)(c).getInstance();return t={reset:function(){n.reset(),s.reset()},initialize:function(t){var r;n.setConfig({adapter:e}),n.update(r=t),s.chooseSelector(e.getIsDVB(r))},resolve:function(t){var e=n.getForPath(t).reduce((function(t,e){var n=s.select(e);return n?(d.isRelative(n.url)?t.url=d.resolve(n.url,t.url):(t.url=n.url,t.serviceLocation=n.serviceLocation),t.availabilityTimeOffset=n.availabilityTimeOffset,t.availabilityTimeComplete=n.availabilityTimeComplete,t):new o.default}),new o.default);if(!d.isRelative(e.url))return e},setConfig:function(t){t.baseURLTreeModel&&(n=t.baseURLTreeModel),t.baseURLSelector&&(s=t.baseURLSelector),t.adapter&&(e=t.adapter)}},n=Object(r.default)(c).create(),s=Object(i.default)(c).create(),f.on(l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(t){n.invalidateSelectedIndexes(t.entry)}),t),t}c.__dashjs_factory_name="BaseURLController",e.default=s.default.getClassFactory(c)},"./src/streaming/controllers/BlacklistController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js");function a(t){var e;t=t||{};var n=[],r=Object(i.default)(this.context).getInstance(),a=t.updateEventName,o=t.addBlacklistEventName;function s(t){-1===n.indexOf(t)&&(n.push(t),r.trigger(a,{entry:t}))}return e={add:s,contains:function(t){return!!(n.length&&t&&t.length)&&-1!==n.indexOf(t)},reset:function(){n=[]}},o&&r.on(o,(function(t){s(t.entry)}),e),e}a.__dashjs_factory_name="BlackListController",e.default=r.default.getClassFactory(a)},"./src/streaming/controllers/BufferController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/SourceBufferSink.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/Debug.js"),f=n("./src/streaming/utils/InitCache.js"),d=n("./src/streaming/vo/DashJSError.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/streaming/vo/metrics/HTTPRequest.js"),g=n("./src/streaming/MediaPlayerEvents.js");function v(t){t=t||{};var e,n,l,v,m,y,_,b,E,T,S,w,A,x,C,D,I,R,k=this.context,O=Object(s.default)(k).getInstance(),P=t.errHandler,M=t.fragmentModel,L=t.representationController,N=t.adapter,F=t.textController,j=t.abrController,B=t.playbackController,U=t.streamInfo,V=t.type,G=t.settings;function H(t){y=t}function Y(t){return N.convertRepresentationToRepresentationInfo(L.getRepresentationForQuality(t))}function z(t,e,n){var i=Y(n);return e&&e[V]&&(V===r.default.VIDEO||V===r.default.AUDIO)?E.initializeForStreamSwitch(t,i,e[V]):E.initializeForFirstUse(U,t,i)}function q(t){G.get().streaming.cacheInitSegments&&(n.info("Init fragment finished loading saving to",V+"'s init cache"),C.save(t.chunk)),n.debug("Append Init fragment",V," with representationId:",t.chunk.representationId," and quality:",t.chunk.quality,", data size:",t.chunk.bytes.byteLength),K(t.chunk)}function X(t){K(t.chunk,t.request)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E.append(t,e).then((function(t){Q(t)})).catch((function(t){Q(t)})),t.mediaInfo.type===r.default.VIDEO&&yt(u.default.VIDEO_CHUNK_RECEIVED,{chunk:t})}function W(t){if(t&&t.length>0)for(var e=0,r=t.length;e<r;e++)n.debug("Buffered range: "+t.start(e)+" - "+t.end(e)+", currentTime = ",B.getTime())}function Q(t){if(t.error)return 22===t.error.code&&function(){if(x=!0,m=.8*vt(),n.warn("Quota exceeded, Critical Buffer: "+m),m>0){var t=Math.max(.2*m,1),e=m-t,r=Math.min(G.get().streaming.buffer.bufferTimeAtTopQuality,.9*e),i=Math.min(G.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*e),a={streaming:{buffer:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(r.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};G.update(a)}}(),void(22!==t.error.code&&mt()||(n.warn("Clearing playback buffer to overcome quota exceed situation"),yt(u.default.QUOTA_EXCEEDED,{criticalBufferLevel:m,quotaExceededTime:t.chunk.start}),ut(st())));if(E&&(rt(),x=!1,(S=t.chunk)&&S.endFragment)){S&&!isNaN(S.index)&&(_=Math.max(S.index,_),it());var e=E.getAllBufferRanges();S.segmentType===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&(W(e),J(),function(){if(!isNaN(R))if(V===r.default.AUDIO||V===r.default.VIDEO){var t=B.getTime(),e=nt(R,0);if(t===R&&e)R=NaN;else{var n=L.getCurrentRepresentation().segmentDuration;(e=nt(R,n))&&(G.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(t-R)>n?R<=e.end&&(B.seek(Math.max(R,e.start),!1,!0),R=NaN):t<e.start&&(B.seek(e.start,!1,!0),R=NaN))}}else R=NaN}()),S&&yt(u.default.BYTES_APPENDED_END_FRAGMENT,{quality:S.quality,startTime:S.start,index:S.index,bufferedRanges:e,segmentType:S.segmentType,mediaType:V})}}function $(){return new Promise((function(t,e){var n=Z();if(!n||0===n.length)return J(),void t();ut(n).then((function(){t()})).catch((function(t){e(t)}))}))}function Z(t){var e=[],n=E.getAllBufferRanges();if(!n||0===n.length)return e;if(!t&&0!==t||isNaN(t))e.push({start:n.start(0),end:n.end(n.length-1)+.5});else{var r=function(t,e){var n=G.get().streaming.buffer.bufferToKeep,r=e.start(0);if(t-r>n){var i=Math.max(0,t-n),o=M.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(o&&(i=Math.min(o.startTime,i)),i>0)return{start:r,end:i}}return null}(t,n),i=function(t,e){var n=e.end(e.length-1)+.5,r=U.manifestInfo.duration>=G.get().streaming.buffer.longFormContentDurationThreshold?G.get().streaming.buffer.bufferTimeAtTopQualityLongForm:G.get().streaming.buffer.bufferTimeAtTopQuality;if(n-t>r){var i=t+r,o=M.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(o&&(i=Math.max(o.startTime+o.duration,i)),i<n)return{start:i,end:n}}return null}(t,n);r&&e.push(r),i&&e.push(i)}return e}function J(){(!I||V===r.default.TEXT&&F.isTextEnabled())&&rt()}function tt(){at()}function et(){at(),R=NaN}function nt(t,e){var n,r,i=E.getAllBufferRanges(),a=0,o=0,s=null,u=null,l=0,c=isNaN(e)?.15:e;if(null!=i){for(r=0,n=i.length;r<n;r++)if(a=i.start(r),o=i.end(r),null===s)l=Math.abs(a-t),(t>=a&&t<o||l<=c)&&(s=a,u=o);else{if(!((l=a-u)<=c))break;u=o}if(null!==s)return{start:s,end:u}}return null}function rt(){if(B){var t=G.get().streaming.gaps.jumpGaps&&!isNaN(G.get().streaming.gaps.smallGapLimit)?G.get().streaming.gaps.smallGapLimit:NaN;v=Math.max(function(t,e){var n;return G.get().streaming.gaps.jumpGaps&&(e=G.get().streaming.gaps.smallGapLimit),null===(n=nt(t,e))?0:n.end-t}(B.getTime()||0,t),0),yt(u.default.BUFFER_LEVEL_UPDATED,{mediaType:V,bufferLevel:v}),at()}}function it(){var t=_>=b-1,e=B.getTimeToStreamEnd(U)-v<=0;!t&&!e||l||(gt(!0),n.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(U.id," and type ").concat(V)))}function at(){V!==r.default.AUDIO&&V!==r.default.VIDEO||((!G.get().streaming.lowLatencyEnabled&&v<G.get().streaming.buffer.stallThreshold||0===v)&&!l?ot(i.default.BUFFER_EMPTY):(l||v>=G.get().streaming.buffer.stallThreshold||G.get().streaming.lowLatencyEnabled&&v>0)&&ot(i.default.BUFFER_LOADED))}function ot(t){T===t||t===i.default.BUFFER_EMPTY&&0===B.getTime()||V===r.default.TEXT&&!F.isTextEnabled()||(T=t,yt(u.default.BUFFER_LEVEL_STATE_CHANGED,{state:t}),yt(t===i.default.BUFFER_LOADED?u.default.BUFFER_LOADED:u.default.BUFFER_EMPTY),n.debug(t===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function st(){var t=[],e=E.getAllBufferRanges();if(!e||0===e.length)return t;var n=B.getTime(),r=Math.max(0,n-G.get().streaming.buffer.bufferToKeep),i=M.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&B.getIsDynamic())return[];if(e.start(0)<=r){for(var o={start:0,end:r},s=0;s<e.length&&e.end(s)<=r;s++)o.end=e.end(s);o.start<o.end&&t.push(o)}return t}function ut(t){return new Promise((function(e,n){if(t&&E&&0!==t.length){var r=[];t.forEach((function(t){r.push(function(t){return new Promise((function(e,n){t.resolve=e,t.reject=n,D.push(t)}))}(t))})),A||lt(),Promise.all(r).then((function(){e()})).catch((function(t){n(t)}))}else e()}))}function lt(){try{if(0===D.length||!E)return n.debug("Nothing to prune, halt pruning"),D=[],void(A=!1);var t=E.getBuffer();if(!t||!t.buffered||0===t.buffered.length)return n.debug("SourceBuffer is empty (or does not exist), halt pruning"),D=[],void(A=!1);var e=D.shift();n.debug("".concat(V,": Removing buffer from: ").concat(e.start," to ").concat(e.end)),A=!0,B.getTime()<e.end&&gt(!1),E.remove(e).then((function(t){ct(t)})).catch((function(t){ct(t)}))}catch(r){A=!1}}function ct(t){n.debug("onRemoved buffer from:",t.from,"to",t.to),W(E.getAllBufferRanges()),0===D.length&&(A=!1,rt()),t.unintended&&(n.warn("Detected unintended removal from:",t.from,"to",t.to,"setting streamprocessor time to",t.from),yt(u.default.SEEK_TARGET,{time:t.from})),A?lt():(I?I=!1:rt(),yt(u.default.BUFFER_CLEARED,{from:t.from,to:t.to,unintended:t.unintended,hasEnoughSpaceToAppend:mt(),quotaExceeded:x}))}function ft(t){return new Promise((function(e){t&&void 0!==t.MSETimeOffset&&E&&E.updateTimestampOffset?E.updateTimestampOffset(t.MSETimeOffset).then((function(){e()})).catch((function(){e()})):e()}))}function dt(){return E&&!l?E.updateAppendWindow(U):Promise.resolve()}function ht(){++w*(G.get().streaming.wallclockTimeUpdateInterval/1e3)>=G.get().streaming.buffer.bufferPruningInterval&&(w=0,E&&V!==r.default.TEXT&&(l||ut(st())))}function pt(){at()}function gt(t){l!==t&&((l=t)?yt(u.default.BUFFERING_COMPLETED):b=Number.POSITIVE_INFINITY)}function vt(){try{var t,e,n=E.getAllBufferRanges(),r=0;if(!n)return r;for(e=0,t=n.length;e<t;e++)r+=n.end(e)-n.start(e);return r}catch(i){return 0}}function mt(){var t=vt();return isNaN(t)||t<m}function yt(t,e){O.trigger(t,e||{},{streamId:U.id,mediaType:V})}function _t(t,e){m=Number.POSITIVE_INFINITY,T=void 0,b=Number.POSITIVE_INFINITY,_=0,S=null,l=!1,A=!1,x=!1,v=0,w=0,D=[],R=NaN,E&&(t||e?E=null:E.abort().then((function(){E.reset(e),E=null}))),I=!1}return e={initialize:function(t){H(t),O.on(u.default.INIT_FRAGMENT_LOADED,q,e),O.on(u.default.MEDIA_FRAGMENT_LOADED,X,e),O.on(u.default.WALLCLOCK_TIME_UPDATED,ht,e),O.on(g.default.PLAYBACK_PLAYING,et,e),O.on(g.default.PLAYBACK_PROGRESS,J,e),O.on(g.default.PLAYBACK_TIME_UPDATED,J,e),O.on(g.default.PLAYBACK_RATE_CHANGED,pt,e),O.on(g.default.PLAYBACK_STALLED,tt,e)},getStreamId:function(){return U.id},getType:function(){return V},getBufferControllerType:function(){return"BufferController"},createBufferSink:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r,i){if(C&&t&&y){var a=j.getQualityFor(V,U.id);E=Object(o.default)(k).create({mediaSource:y,textController:F,eventBus:O}),z(t,e,a).then((function(){return ft(Y(a))})).then((function(){r(E)})).catch((function(t){n.fatal("Caught error on create SourceBuffer: "+t),P.error(new d.default(h.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,h.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+V)),i(t)}))}else r(null)}))},getBuffer:function(){return E},getBufferLevel:function(){return v},getRangeAt:nt,setMediaSource:H,getMediaSource:function(){return y},appendInitSegmentFromCache:function(t){var e=C.extract(U.id,t);return!!e&&(n.info("Append Init fragment",V," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),K(e),!0)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:gt,getIsPruningInProgress:function(){return A},reset:function(t,e){O.off(u.default.INIT_FRAGMENT_LOADED,q,this),O.off(u.default.MEDIA_FRAGMENT_LOADED,X,this),O.off(u.default.WALLCLOCK_TIME_UPDATED,ht,this),O.off(g.default.PLAYBACK_PLAYING,et,this),O.off(g.default.PLAYBACK_PROGRESS,J,this),O.off(g.default.PLAYBACK_TIME_UPDATED,J,this),O.off(g.default.PLAYBACK_RATE_CHANGED,pt,this),O.off(g.default.PLAYBACK_STALLED,tt,this),_t(t,e)},prepareForPlaybackSeek:function(){return l&&gt(!1),E.abort()},prepareForReplacementTrackSwitch:function(t){return new Promise((function(e,n){E.abort().then((function(){return dt()})).then((function(){return E.changeType(t)})).then((function(){return $()})).then((function(){gt(!1),e()})).catch((function(t){n(t)}))}))},prepareForNonReplacementTrackSwitch:function(t){return new Promise((function(e,n){dt().then((function(){return E.changeType(t)})).then((function(){e()})).catch((function(t){n(t)}))}))},prepareForReplacementQualitySwitch:function(){return new Promise((function(t,e){E.abort().then((function(){return dt()})).then((function(){return $()})).then((function(){gt(!1),t()})).catch((function(t){e(t)}))}))},updateAppendWindow:dt,getAllRangesWithSafetyFactor:Z,getContinuousBufferTimeForTargetTime:function(t){try{var e=t,n=E.getAllBufferRanges();if(!n||0===n.length)return t;for(var r=0;e===t&&r<n.length;){var i=n.start(r),a=n.end(r);e>=i&&e<=a&&(e=a),r+=1}return e}catch(o){}},clearBuffers:ut,pruneAllSafely:$,updateBufferTimestampOffset:ft,setSeekTarget:function(t){R=t},segmentRequestingCompleted:function(t){isNaN(t)||(b=t,it())}},n=Object(c.default)(k).getInstance().getLogger(e),C=Object(f.default)(k).getInstance(),_t(),e}v.__dashjs_factory_name="BufferController",e.default=l.default.getClassFactory(v)},"./src/streaming/controllers/EventController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/streaming/net/XHRLoader.js");function u(){var t,e,n,r,u,l,c,f,d,h,p,g=this.context,v=Object(a.default)(g).getInstance();function m(){if(!c||!f)throw new Error("setConfig function has to be called previously")}function y(){p=!1,n={},r={},u=null,h=!1,l=Date.now()/1e3}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.eventStream.schemeIdUri,i=t.eventStream.value,a=t.id,o="discarded";e[r]||(e[r]=[]);var s=e[r].findIndex((function(t){return(!i||t.eventStream.value&&t.eventStream.value===i)&&t.id===a}));return-1===s?(e[r].push(t),o="added"):n&&(e[r][s]=t,o="updated"),o}function b(t){try{1==t.eventStream.value&&v.trigger(o.default.MANIFEST_VALIDITY_CHANGED,{id:t.id,validUntil:t.calculatedPresentationTime,newDuration:4294967295==t.calculatedPresentationTime?NaN:t.calculatedPresentationTime+t.duration,newManifestValidAfter:NaN},{mode:o.default.EVENT_MODE_ON_START})}catch(e){}}function E(){try{if(!h){h=!0;var t=f.getTime(),e=t-l;e=l>0?Math.max(0,e):0,T(r,e,t),T(n,e,t),l=t,h=!1}}catch(i){h=!1}}function T(t,n,r){try{w(t,(function(i){if(void 0!==i){var a=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=r&&i.calculatedPresentationTime+n+a>=r?A(i,t,o.default.EVENT_MODE_ON_START):(function(t,e,n){try{return t-e>n}catch(r){return!1}}(r,a+n,i.calculatedPresentationTime)||function(t){try{return t.calculatedPresentationTime>t.eventStream.period.start+t.eventStream.period.duration}catch(e){return!1}}(i))&&(e.debug("Deleting event ".concat(i.id," as it is expired or invalid")),x(t,i))}}))}catch(i){}}function S(t){try{var e=f.getTime();w(t,(function(n){var r=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.duration)?n.eventStream.period.duration:NaN,i=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.start)?n.eventStream.period.start:NaN;isNaN(r)||isNaN(i)||Math.abs(n.calculatedPresentationTime-e)<300&&A(n,t,o.default.EVENT_MODE_ON_START)}))}catch(n){}}function w(t,e){try{if(t)for(var n=Object.keys(t),r=0;r<n.length;r++)t[n[r]].forEach((function(t){void 0!==t&&e(t)}))}catch(i){}}function A(t,n,r){try{var i=f.getTime(),a=t.id;if(r===o.default.EVENT_MODE_ON_RECEIVE)return e.debug("Received event ".concat(a)),void v.trigger(t.eventStream.schemeIdUri,{event:t},{mode:r});"urn:mpeg:dash:event:2012"===t.eventStream.schemeIdUri&&1==t.eventStream.value?0===t.duration&&0===t.presentationTimeDelta||(e.debug("Starting manifest refresh event ".concat(a," at ").concat(i)),x(n,t),function(){try{m(),c.refreshManifest()}catch(t){}}()):"urn:mpeg:dash:event:callback:2015"===t.eventStream.schemeIdUri&&1==t.eventStream.value?(e.debug("Starting callback event ".concat(a," at ").concat(i)),x(n,t),function(t){try{Object(s.default)(g).create({}).load({method:"get",url:t,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(t.messageData)):(e.debug("Starting event ".concat(a," at ").concat(i)),x(n,t),v.trigger(t.eventStream.schemeIdUri,{event:t},{mode:r}))}catch(u){}}function x(t,e){var n=e.eventStream.schemeIdUri,r=e.eventStream.value,i=e.id;t[n]=t[n].filter((function(t){return r&&t.eventStream.value&&t.eventStream.value!==r||t.id!==i})),0===t[n].length&&delete t[n]}return t={addInlineEvents:function(t){try{if(m(),t)for(var r=0;r<t.length;r++){var i=t[r],a=_(i,n,!0);"added"===a?(e.debug("Added inline event with id ".concat(i.id)),A(i,t,o.default.EVENT_MODE_ON_RECEIVE)):"updated"===a&&e.debug("Updated inline event with id ".concat(i.id))}}catch(s){throw s}},addInbandEvents:function(t){try{m();for(var n=0;n<t.length;n++){var i=t[n];"added"===_(i,r,!1)?("urn:mpeg:dash:event:2012"===i.eventStream.schemeIdUri&&void 0===r[i.id]&&b(i),e.debug("Added inband event with id "+i.id),A(i,t,o.default.EVENT_MODE_ON_RECEIVE)):e.debug("Inband event with scheme_id_uri ".concat(i.eventStream.schemeIdUri,", value ").concat(i.eventStream.value," and id ").concat(i.id," was ignored because it has been added before."))}E()}catch(a){throw a}},getInbandEvents:function(){return r},getInlineEvents:function(){return n},start:function(){try{m(),e.debug("Start Event Controller");var t=d.get().streaming.eventControllerRefreshDelay;p||isNaN(t)||(p=!0,u=setInterval(E,t))}catch(n){throw n}},setConfig:function(t){try{if(!t)return;t.manifestUpdater&&(c=t.manifestUpdater),t.playbackController&&(f=t.playbackController),t.settings&&(d=t.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==u&&p&&(clearInterval(u),u=null,p=!1,function(){try{S(r),S(n)}catch(t){}}())}catch(t){throw t}})(),y()}},e=Object(i.default)(g).getInstance().getLogger(t),y(),t}u.__dashjs_factory_name="EventController",e.default=r.default.getSingletonFactory(u)},"./src/streaming/controllers/FragmentController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/DataChunk.js"),a=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/FragmentLoader.js"),s=n("./src/streaming/utils/RequestModifier.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/streaming/MediaPlayerEvents.js"),f=n("./src/core/errors/Errors.js"),d=n("./src/core/FactoryMaker.js"),h=n("./src/core/Debug.js");function p(t){t=t||{};var e,n,d,p=this.context,g=Object(u.default)(p).getInstance(),v=t.errHandler,m=t.mediaPlayerModel,y=t.dashMetrics,_=Object(h.default)(p).getInstance(),b=t.streamInfo;function E(){return b.id}function T(){for(var t in d)d[t].reset();d={}}function S(t){if(t.sender){var e=t.request,a=t.response,o=e.isInitializationRequest(),s=e.mediaInfo.streamInfo;if(t.error&&(e.mediaType===r.default.AUDIO||e.mediaType===r.default.VIDEO||e.mediaType===r.default.TEXT&&e.mediaInfo.isFragmented)&&g.trigger(l.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:t.request.serviceLocation}),a&&s){var u=function(t,e,n,r){var a=new i.default;return a.streamId=n,a.mediaInfo=e.mediaInfo,a.segmentType=e.type,a.start=e.startTime,a.duration=e.duration,a.end=a.start+a.duration,a.bytes=t,a.index=e.index,a.quality=e.quality,a.representationId=e.representationId,a.endFragment=r,a}(a,e,b.id,t.type!==l.default.FRAGMENT_LOADING_PROGRESS);g.trigger(o?l.default.INIT_FRAGMENT_LOADED:l.default.MEDIA_FRAGMENT_LOADED,{chunk:u,request:e},{streamId:s.id,mediaType:e.mediaType})}else n.warn("No "+e.mediaType+" bytes to push or stream is inactive.")}}return n=_.getLogger(e={getStreamId:E,getModel:function(e){var n=d[e];return n||(n=Object(a.default)(p).create({streamInfo:b,type:e,dashMetrics:y,fragmentLoader:Object(o.default)(p).create({dashMetrics:y,mediaPlayerModel:m,errHandler:v,requestModifier:Object(s.default)(p).getInstance(),settings:t.settings,boxParser:t.boxParser,eventBus:g,events:l.default,errors:f.default,dashConstants:t.dashConstants,urlUtils:t.urlUtils,streamId:E()}),debug:_,eventBus:g,events:l.default}),d[e]=n),n},reset:function(){g.off(c.default.FRAGMENT_LOADING_COMPLETED,S,this),g.off(c.default.FRAGMENT_LOADING_PROGRESS,S,this),T()}}),T(),g.on(c.default.FRAGMENT_LOADING_COMPLETED,S,e),g.on(c.default.FRAGMENT_LOADING_PROGRESS,S,e),e}p.__dashjs_factory_name="FragmentController",e.default=d.default.getClassFactory(p)},"./src/streaming/controllers/GapController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/EventBus.js");function s(){var t,e,n,r,s,u,l,c,f,d,h,p,g=this.context,v=Object(o.default)(g).getInstance();function m(){p.debug("Stopping the gap controller"),s&&(clearInterval(s),s=null),function(){v.off(a.default.WALLCLOCK_TIME_UPDATED,T,this),v.off(a.default.INITIAL_STREAM_SWITCH,E,this),v.off(a.default.PLAYBACK_SEEKING,y,this),v.off(a.default.BUFFER_REPLACEMENT_STARTED,_,t),v.off(a.default.TRACK_CHANGE_RENDERED,b,t)}(),s=null,u=NaN,r=0,d=null,h={}}function y(){d&&(clearTimeout(d),d=null)}function _(t){try{if(t.streamId!==c.getActiveStreamInfo().id||!t.mediaType)return;t.streamId===c.getActiveStreamInfo().id&&(h[t.mediaType]=!0)}catch(t){p.error(t)}}function b(t){t&&t.mediaType&&(h[t.mediaType]=!1)}function E(){s||function(){try{s||(p.debug("Starting the gap controller"),s=setInterval((function(){S()&&x(l.getTime())}),100))}catch(t){}}()}function T(){if(S(n.get().streaming.gaps.enableSeekFix)&&++r>=10){var t=l.getTime();e===t?x(t,!0):(e=t,u=NaN),r=0}}function S(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Object.keys(h).some((function(t){return h[t]})),r=!!t&&w();return!e&&n.get().streaming.gaps.jumpGaps&&c.getActiveStreamProcessors().length>0&&(!l.isSeeking()||r)&&!l.isPaused()&&!c.getIsStreamSwitchInProgress()&&!c.getHasMediaOrInitialisationError()}function w(){var t=c.getActiveStream(),e=parseFloat((t.getStartTime()+t.getDuration()).toFixed(5));return l.getTime()+n.get().streaming.gaps.threshold>=e}function A(t,e){try{if(!t||t.length<=1&&e>0)return NaN;for(var r=NaN,i=0;isNaN(r)&&i<t.length;){var a=i>0?t.end(i-1):0;e<t.start(i)&&a-e<n.get().streaming.gaps.threshold&&(r=i),i+=1}return r}catch(o){return null}}function x(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.get().streaming.gaps.smallGapLimit,a=n.get().streaming.gaps.jumpLargeGaps,o=f.getBufferRange(),s=NaN,h=!1;if(e=A(o,t),!isNaN(e)){var g=o.start(e),v=g-t;v>0&&(v<=i||a)&&(s=g)}var m=l.getTimeToStreamEnd();if(isNaN(s)&&r&&isFinite(m)&&!isNaN(m)&&m<i&&(s=parseFloat(l.getStreamEndTime().toFixed(5)),h=!0),s>0&&u!==s&&s>t&&!d){var y=s-t;if(h){var _=c.getStreamForTime(s),b=_&&!!_.getPreloaded();p.warn("Jumping to end of stream because of gap from ".concat(t," to ").concat(s,". Gap duration: ").concat(y)),l.seek(s,!0,b)}else{var E=l.getIsDynamic(),T=e>0?o.end(e-1):t,S=E?1e3*Math.max(0,y-.1):0;d=window.setTimeout((function(){l.seek(s,!0,!0),p.warn("Jumping gap occuring in period ".concat(c.getActiveStream().getStreamId()," starting at ").concat(T," and ending at ").concat(s,". Jumping by: ").concat(y-S/1e3)),d=null}),S)}u=s}}return t={reset:m,setConfig:function(t){t&&(t.settings&&(n=t.settings),t.playbackController&&(l=t.playbackController),t.streamController&&(c=t.streamController),t.videoModel&&(f=t.videoModel))},initialize:function(){!function(){v.on(a.default.WALLCLOCK_TIME_UPDATED,T,this),v.on(a.default.INITIAL_STREAM_SWITCH,E,this),v.on(a.default.PLAYBACK_SEEKING,y,this),v.on(a.default.BUFFER_REPLACEMENT_STARTED,_,t),v.on(a.default.TRACK_CHANGE_RENDERED,b,t)}()}},p=Object(i.default)(g).getInstance().getLogger(t),m(),t}s.__dashjs_factory_name="GapController",e.default=r.default.getSingletonFactory(s)},"./src/streaming/controllers/MediaController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js");function u(){var t,e,n,o,u,l,c,f,d=this.context,h=Object(a.default)(d).getInstance();function p(t,e){return t&&n[e]&&n[e][t]?n[e][t].list:[]}function g(t,e){return t&&n[e]&&n[e][t]?n[e][t].current:null}function v(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&t.streamInfo){var a=t.type,s=t.streamInfo,u=s.id,f=g(a,u);if(n[u]&&n[u][a]&&!_(t,f)&&(n[u][a].current=t,n[u][a].current&&(a!==r.default.TEXT||a===r.default.TEXT&&t.isFragmented)&&h.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:f,newMediaInfo:t,switchMode:o.get().streaming.trackSwitchMode[a]},{streamId:u}),!e)){var d=E(t);if(!d||!n[u][a].storeLastSettings)return;d.roles&&(d.role=d.roles[0],delete d.roles),d.accessibility&&(d.accessibility=d.accessibility[0]),d.audioChannelConfiguration&&(d.audioChannelConfiguration=d.audioChannelConfiguration[0]),l[a]=d,c.setSavedMediaSettings(a,d)}}}function m(t,e){t&&e&&(u[t]=e)}function y(t){return t?u[t]:null}function _(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var n=t.id===e.id,r=t.viewpoint===e.viewpoint,i=t.lang===e.lang,a=t.codec===e.codec,o=t.roles.toString()===e.roles.toString(),s=t.accessibility.toString()===e.accessibility.toString(),u=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return n&&a&&r&&i&&o&&s&&u}function b(){n={},l={},f=null,u={audio:null,video:null,text:null}}function E(t){var e={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration};return e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0?e:null}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!t.lang||e.lang.match(t.lang),a=null==t.index||e.index===t.index,o=!t.viewpoint||t.viewpoint===e.viewpoint,s=!t.role||!!e.roles.filter((function(e){return e===t.role}))[0],u=!t.accessibility||!!e.accessibility.filter((function(e){return e===t.accessibility}))[0],l=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter((function(e){return e===t.audioChannelConfiguration}))[0];return i&&a&&o&&(s||e.type===r.default.AUDIO&&n)&&u&&l}function S(t){var e,n=0,r=[];return t.forEach((function(t){(e=Math.max.apply(Math,t.bitrateList.map((function(t){return t.bandwidth}))))>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function w(t){var e,n=1/0,r=[];return t.forEach((function(t){var i=t.bitrateList.reduce((function(t,e){var n=Math.max(1,e.width*e.height);return t+e.bandwidth/n}),0);(e=i/t.bitrateList.length)<n?(n=e,r=[t]):e===n&&r.push(t)})),r}function A(t){var e,n=0,r=[];return t.forEach((function(t){(e=t.representationCount)>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function x(t,n){if(t===r.default.TEXT)return n[0];var i,a=o.get().streaming.selectionModeForInitialTrack;if(f&&"function"==typeof f)i=f(n);else switch(a){case r.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=function(t){var e,n,r=(e=0,n=[],t.forEach((function(t){isNaN(t.selectionPriority)||(t.selectionPriority>e?(e=t.selectionPriority,n=[t]):t.selectionPriority===e&&n.push(t))})),n);return r.length>1&&(r=S(r)),r.length>1&&(r=A(r)),r}(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:i=function(t){var e=S(t);return e.length>1&&(e=A(e)),e}(n);break;case r.default.TRACK_SELECTION_MODE_FIRST_TRACK:i=C(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:i=function(t){var e=w(t);return e.length>1&&(e=S(e)),e}(n);break;case r.default.TRACK_SELECTION_MODE_WIDEST_RANGE:i=function(t){var e=A(t);return e.length>1&&(e=S(t)),e}(n);break;default:e.warn("Track selection mode ".concat(a," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),i=C(n)}return i.length>0?i[0]:n[0]}function C(t){return t[0]}return t={setInitialMediaSettingsForType:function(t,e){var n=l[t]||y(t),r=p(t,e.id),i=[];n||(n=c.getSavedMediaSettings(t),m(t,n)),r&&0!==r.length&&(n&&r.forEach((function(e){T(n,e,!!l[t])&&i.push(e)})),0===i.length?v(x(t,r),!0):v(i.length>1?x(t,i):i[0]))},addTrack:function(t){if(t){var e=t.type;if((i=e)===r.default.AUDIO||i===r.default.VIDEO||i===r.default.TEXT||i===r.default.IMAGE){var i,a=t.streamInfo.id;n[a]||(n[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var o=n[a][e].list,s=0,u=o.length;s<u;++s)if(_(o[s],t))return;o.push(t)}}},getTracksFor:p,getCurrentTrackFor:g,isCurrentTrack:function(t){if(!t)return!1;var e=t.type,r=t.streamInfo.id;return n[r]&&n[r][e]&&_(n[r][e].current,t)},setTrack:v,selectInitialTrack:x,setCustomInitialTrackSelectionFunction:function(t){f=t},setInitialSettings:m,getInitialSettings:y,getTracksWithHighestBitrate:S,getTracksWithHighestEfficiency:w,getTracksWithWidestRange:A,isTracksEqual:_,matchSettings:T,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(r.default.TEXT,null)},setConfig:function(t){t&&(t.domStorage&&(c=t.domStorage),t.settings&&(o=t.settings))},reset:b},e=Object(s.default)(d).getInstance().getLogger(t),b(),t}u.__dashjs_factory_name="MediaController";var l=o.default.getSingletonFactory(u);o.default.updateSingletonFactory(u.__dashjs_factory_name,l),e.default=l},"./src/streaming/controllers/MediaSourceController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r=this.context;return t={createMediaSource:function(){var t="WebKitMediaSource"in window;return"MediaSource"in window?e=new MediaSource:t&&(e=new WebKitMediaSource),e},attachMediaSource:function(t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(t){t.setSource(null)},setDuration:function t(r){e&&"open"===e.readyState&&(null===r&&isNaN(r)||e.duration!==r&&(function(t){for(var e=t.sourceBuffers,n=0;n<e.length;n++)if(e[n].updating)return!0;return!1}(e)?setTimeout(t.bind(null,r),50):(n.info("Set MediaSource duration:"+r),e.duration=r)))},setSeekable:function(t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(t){if(t&&"open"===t.readyState){for(var e=t.sourceBuffers,r=0;r<e.length;r++){if(e[r].updating)return;if(0===e[r].buffered.length)return}n.info("call to mediaSource endOfStream"),t.endOfStream()}}},n=Object(i.default)(r).getInstance().getLogger(t),t}a.__dashjs_factory_name="MediaSourceController",e.default=r.default.getSingletonFactory(a)},"./src/streaming/controllers/PlaybackController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/MediaPlayerEvents.js");function c(){var t,e,n,s,c,f,d,h,p,g,v,m,y,_,b,E,T,S,w,A,x,C,D=this.context,I=Object(a.default)(D).getInstance();function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((k(t)-j()).toFixed(5))}function k(t){var e=t||g;return e.start+e.duration}function O(){g&&f&&f.getElement()?f.play():y=!0}function P(){return g&&f?f.isPaused():null}function M(){g&&f&&f.pause()}function L(){return g&&f?f.isSeeking():null}function N(){return g&&f?f.isStalled():null}function F(t,n,r){g&&f&&t!==(isNaN(E)?f.getTime():E)&&((T=!0===r)||(E=t,I.trigger(o.default.PLAYBACK_SEEK_ASKED)),e.info("Requesting seek to time: "+t+(T?" (internal)":"")),f.setCurrentTime(t,n))}function j(){return g&&f?f.getTime():null}function B(){var t=j();if(v&&!isNaN(b)){var e=b/1e3;t>e&&(t-=e)}return t}function U(){return g&&f?f.getPlaybackRate():null}function V(){return g&&f?f.getEnded():null}function G(){return v}function H(){if(!v||isNaN(b))return NaN;var t=B();if(isNaN(t)||0===t)return 0;var e=(new Date).getTime()+1e3*d.getClientTimeOffset();return Math.max(((e-b-1e3*t)/1e3).toFixed(3),0)}function Y(){M(),y=!1,p=0,b=0,x=!1,E=NaN,f&&(I.off(o.default.DATA_UPDATE_COMPLETED,W,t),I.off(o.default.LOADING_PROGRESS,mt,t),I.off(o.default.MANIFEST_UPDATED,Tt,t),I.off(o.default.STREAMS_COMPOSED,St,t),I.off(l.default.BUFFER_LEVEL_STATE_CHANGED,yt,t),I.off(l.default.PLAYBACK_PROGRESS,dt,t),I.off(l.default.PLAYBACK_TIME_UPDATED,dt,t),I.off(l.default.PLAYBACK_ENDED,ct,t),I.off(l.default.STREAM_INITIALIZING,bt,t),I.off(l.default.REPRESENTATION_SWITCH,Et,t),f.setPlaybackRate(1,!0),X(),f.removeEventListener("canplay",Q),f.removeEventListener("canplaythrough",$),f.removeEventListener("play",Z),f.removeEventListener("waiting",J),f.removeEventListener("playing",tt),f.removeEventListener("pause",et),f.removeEventListener("error",ft),f.removeEventListener("seeking",nt),f.removeEventListener("seeked",rt),f.removeEventListener("timeupdate",it),f.removeEventListener("progress",at),f.removeEventListener("ratechange",ot),f.removeEventListener("loadedmetadata",st),f.removeEventListener("loadeddata",ut),f.removeEventListener("stalled",_t),f.removeEventListener("ended",lt)),h=null,f=null,g=null,v=null}function z(t,e){var n=s.getCurrentDVRInfo(e),r=n?n.range:null;return r?t>r.end?Math.max(r.end-p,r.start):t>0&&t+.25<r.start&&Math.abs(t-r.start)<31536e4?C.get().streaming.lowLatencyEnabled?Math.max(r.end-p,r.start):r.start:t:NaN}function q(){null===h&&(h=setInterval((function(){var t;I.trigger(o.default.WALLCLOCK_TIME_UPDATED,{isDynamic:v,time:new Date}),G()&&(n.addDVRMetric(),P()?(t=Date.now(),(!_||t>_+500)&&(_=t,it())):K())}),C.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(h),h=null}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!P()&&v&&0!==f.getReadyState()&&!L()&&!x){t||(t=n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO);var i=B(),a=z(i,t),o=!isNaN(a)&&a!==i;o&&!L()&&(N()||w||1===f.getReadyState())&&(e.debug("UpdateCurrentTime: Seek to actual time: ".concat(a," from currentTime: ").concat(i)),F(a))}}function W(t){var e=c.convertRepresentationToRepresentationInfo(t.currentRepresentation),n=e?e.mediaInfo.streamInfo:null;null!==n&&g.id===n.id&&(g=n)}function Q(){I.trigger(o.default.CAN_PLAY)}function $(){I.trigger(o.default.CAN_PLAY_THROUGH)}function Z(){e.info("Native video element event: play"),K(),q(),I.trigger(o.default.PLAYBACK_STARTED,{startTime:j()})}function J(){e.info("Native video element event: waiting"),I.trigger(o.default.PLAYBACK_WAITING,{playingTime:j()})}function tt(){e.info("Native video element event: playing"),I.trigger(o.default.PLAYBACK_PLAYING,{playingTime:j()})}function et(){e.info("Native video element event: pause"),I.trigger(o.default.PLAYBACK_PAUSED,{ended:V()})}function nt(){if(T)T=!1;else{var t=j();isNaN(E)||E===t||(t=E),E=NaN,e.info("Seeking to: "+t),q(),I.trigger(o.default.PLAYBACK_SEEKING,{seekTime:t,streamId:g.id})}}function rt(){e.info("Native video element event: seeked"),I.trigger(o.default.PLAYBACK_SEEKED)}function it(){g&&I.trigger(o.default.PLAYBACK_TIME_UPDATED,{timeToEnd:R(),time:j(),streamId:g.id})}function at(){I.trigger(o.default.PLAYBACK_PROGRESS,{streamId:g.id})}function ot(){var t=U();e.info("Native video element event: ratechange: ",t),I.trigger(o.default.PLAYBACK_RATE_CHANGED,{playbackRate:t})}function st(){e.info("Native video element event: loadedmetadata"),I.trigger(o.default.PLAYBACK_METADATA_LOADED),q()}function ut(){e.info("Native video element event: loadeddata"),I.trigger(o.default.PLAYBACK_LOADED_DATA)}function lt(){e.info("Native video element event: ended"),M(),X();var t=n?n.getActiveStreamInfo():null;t&&I.trigger(o.default.PLAYBACK_ENDED,{isLast:t.isLast})}function ct(t){if(h&&t.isLast){e.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var n=t.seekTime?t.seekTime:k();f.setCurrentTime(n),M(),X()}}function ft(t){I.trigger(o.default.PLAYBACK_ERROR,{error:(t.target||t.srcElement).error})}function dt(){v&&ht()&&C.get().streaming.liveCatchup.playbackRate>0&&!P()&&!L()&&(function(){try{if(ht()&&C.get().streaming.liveCatchup.playbackRate>0&&j()>0){var t=gt(),e=H(),n=m.getLiveDelay(),i=m.getLiveCatchupLatencyThreshold(),a=C.get().streaming.liveCatchup.minDrift;return t===r.default.LIVE_CATCHUP_MODE_LOLP?function(t,e,n,r,i,a){try{var o=Math.abs(t-e);return(isNaN(a)||t<=a)&&(o>n||r<i)}catch(s){return!1}}(e,n,a,pt(),C.get().streaming.liveCatchup.playbackBufferMin,i):function(t,e,n,r){try{return Math.abs(t-e)>r&&(isNaN(n)||t<=n)}catch(i){return!1}}(e,n,i,a)}}catch(o){return!1}}()?function(){if(f){var t,i=f.getPlaybackRate(),a=C.get().streaming.liveCatchup.playbackRate,o=H(),u=m.getLiveDelay(),l=pt();gt()===r.default.LIVE_CATCHUP_MODE_LOLP?(C.get(),t=function(t,n,r,i,a,o,s){var u,l=t;if(o<a){var c=2*l/(1+Math.pow(Math.E,-5*(o-a)));e.debug("[LoL+ playback control_buffer-based] bufferLevel: "+o+", newRate: "+(u=1-l+c))}else u=Math.abs(n-r)<=.02*r?1:1-l+2*l/(1+Math.pow(Math.E,-5*(n-r))),e.debug("[LoL+ playback control_latency-based] latency: "+n+", newRate: "+u);return w&&o>r/2&&(w=!1),Math.abs(s-u)<=A&&(u=null),{newRate:u}}(a,o,u,0,C.get().streaming.liveCatchup.playbackBufferMin,l,i)):t=function(t,e,n,r,i){var a=e-n,o=1-t+2*t/(1+Math.pow(Math.E,-5*a));return w&&(r>n/2?w=!1:a>0&&(o=1)),Math.abs(i-o)<=A&&(o=null),{newRate:o}}(a,o,u,l,i);var c=t.newRate;c&&f.setPlaybackRate(c);var d=o-u;C.get().streaming.liveCatchup.maxDrift>0&&!S&&d>C.get().streaming.liveCatchup.maxDrift?(e.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,h=n&&n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO,(g=(p=s.getCurrentDVRInfo(h))?p.range:null)&&!isNaN(g.end)&&F(g.end-m.getLiveDelay(),!0,!1)):S=!1}var h,p,g}():vt())}function ht(){return C.get().streaming.liveCatchup.enabled||C.get().streaming.lowLatencyEnabled}function pt(){var t=null;return n.getActiveStreamProcessors().forEach((function(e){var n=e.getBufferLevel();t=null===t?n:Math.min(t,n)})),t}function gt(){var t=C.get().streaming.liveCatchup.playbackBufferMin;return C.get().streaming.liveCatchup.mode!==r.default.LIVE_CATCHUP_MODE_LOLP||null===t||isNaN(t)?r.default.LIVE_CATCHUP_MODE_DEFAULT:r.default.LIVE_CATCHUP_MODE_LOLP}function vt(){f&&f.setPlaybackRate(1)}function mt(t){if(!1===t.stream&&C.get().streaming.lowLatencyEnabled&&!isNaN(t.request.duration)){var n=1.2*t.request.duration;n>m.getLiveDelay()&&(e.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",n.toFixed(2)),C.update({streaming:{delay:{liveDelay:n}}}))}}function yt(t){t.streamId===g.id&&(ht()?t.state!==i.default.BUFFER_EMPTY||L()||w||(w=!0,vt()):C.get().streaming.buffer.setStallState&&f.setStallState(t.mediaType,t.state===i.default.BUFFER_EMPTY))}function _t(t){I.trigger(o.default.PLAYBACK_STALLED,{e:t})}function bt(t){var n;(n=t.mediaInfo)&&n.supplementalProperties&&"true"===n.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(e.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),C.update({streaming:{lowLatencyEnabled:!0}}))}function Et(t){var e=n.getActiveStreamInfo();if(C.get().streaming.lowLatencyEnabledByManifest&&t&&e&&t.currentRepresentation&&t.streamId&&t.streamId===e.id&&t.mediaType&&(t.mediaType===r.default.VIDEO||t.mediaType===r.default.AUDIO)){var i=!t.currentRepresentation.availabilityTimeComplete;i&&C.update({streaming:{lowLatencyEnabled:i}})}}function Tt(){x=!0}function St(){x=!1}return t={initialize:function(e,n){g=e,!0!==n&&function(){f.addEventListener("canplay",Q),f.addEventListener("canplaythrough",$),f.addEventListener("play",Z),f.addEventListener("waiting",J),f.addEventListener("playing",tt),f.addEventListener("pause",et),f.addEventListener("error",ft),f.addEventListener("seeking",nt),f.addEventListener("seeked",rt),f.addEventListener("timeupdate",it),f.addEventListener("progress",at),f.addEventListener("ratechange",ot),f.addEventListener("loadedmetadata",st),f.addEventListener("loadeddata",ut),f.addEventListener("stalled",_t),f.addEventListener("ended",lt),v=g.manifestInfo.isDynamic,S=!1,w=!1,T=!1;var e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",n=/safari/.test(e)&&!/chrome/.test(e);A=n?.25:.02,I.on(o.default.DATA_UPDATE_COMPLETED,W,t),I.on(o.default.LOADING_PROGRESS,mt,t),I.on(o.default.MANIFEST_UPDATED,Tt,t),I.on(o.default.STREAMS_COMPOSED,St,t),I.on(l.default.BUFFER_LEVEL_STATE_CHANGED,yt,t),I.on(l.default.PLAYBACK_PROGRESS,dt,t),I.on(l.default.PLAYBACK_TIME_UPDATED,dt,t),I.on(l.default.PLAYBACK_ENDED,ct,t,{priority:a.default.EVENT_PRIORITY_HIGH}),I.on(l.default.STREAM_INITIALIZING,bt,t),I.on(l.default.REPRESENTATION_SWITCH,Et,t),y&&(y=!1,O())}()},setConfig:function(t){t&&(t.streamController&&(n=t.streamController),t.dashMetrics&&(s=t.dashMetrics),t.mediaPlayerModel&&(m=t.mediaPlayerModel),t.adapter&&(c=t.adapter),t.videoModel&&(f=t.videoModel),t.timelineConverter&&(d=t.timelineConverter),t.settings&&(C=t.settings))},getTimeToStreamEnd:R,getBufferLevel:pt,getTime:j,getNormalizedTime:B,getIsManifestUpdateInProgress:function(){return x},getPlaybackRate:U,getPlayedRanges:function(){return g&&f?f.getPlayedRanges():null},getEnded:V,getIsDynamic:G,getStreamController:function(){return n},computeAndSetLiveDelay:function(t,n){var i,a,o,s=!isNaN(t)&&isFinite(t)?t:NaN,u=c.getSuggestedPresentationDelay();if(C.get().streaming.delay.applyServiceDescription&&isNaN(C.get().streaming.delay.liveDelay)&&isNaN(C.get().streaming.delay.liveDelayFragmentCount)&&function(t){if(t&&t.serviceDescriptions){for(var n=null,i=0;i<t.serviceDescriptions.length;i++){var a=t.serviceDescriptions[i];if(a.schemeIdUri===r.default.SERVICE_DESCRIPTION_LL_SCHEME){n=a;break}}n&&(n.latency&&n.latency.target>0&&(e.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),C.update({streaming:{delay:{liveDelay:n.latency.target/1e3},liveCatchup:{minDrift:(n.latency.target+500)/1e3,maxDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target+500)/1e3:void 0}}})),n.playbackRate&&n.playbackRate.max>1&&(e.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),C.update({streaming:{liveCatchup:{playbackRate:n.playbackRate.max-1}}})))}}(n),i=m.getLiveDelay()?m.getLiveDelay():null===C.get().streaming.delay.liveDelayFragmentCount||isNaN(C.get().streaming.delay.liveDelayFragmentCount)||isNaN(s)?!0===C.get().streaming.delay.useSuggestedPresentationDelay&&null!==u&&!isNaN(u)&&u>0?u:isNaN(s)?n&&!isNaN(n.minBufferTime)?4*n.minBufferTime:4*g.manifestInfo.minBufferTime:4*s:s*C.get().streaming.delay.liveDelayFragmentCount,null!==(o=c.getAvailabilityStartTime())&&(b=o),n&&n.dvrWindowSize>0){var l=Math.max(n.dvrWindowSize-10,n.dvrWindowSize/2);a=Math.min(i,l)}else a=i;return p=a,a},getLiveDelay:function(){return p},getCurrentLiveLatency:H,play:O,isPaused:P,pause:M,isSeeking:L,getStreamEndTime:k,seek:F,reset:Y,updateCurrentTime:K,getAvailabilityStartTime:function(){return b}},e=Object(u.default)(D).getInstance().getLogger(t),Y(),t}c.__dashjs_factory_name="PlaybackController",e.default=s.default.getSingletonFactory(c)},"./src/streaming/controllers/ScheduleController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/models/FragmentModel.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function f(t){t=t||{};var e,n,s,f,d,h,p,g,v,m,y,_,b,E=this.context,T=Object(a.default)(E).getInstance(),S=t.dashMetrics,w=t.mediaPlayerModel,A=t.fragmentModel,x=t.abrController,C=t.playbackController,D=t.textController,I=t.type,R=t.bufferController,k=t.settings;function O(t){if(!R.getIsBufferingCompleted()){P();var e=isNaN(t)?0:t;h=setTimeout(M,e)}}function P(){h&&(clearTimeout(h),h=null)}function M(){try{if(function(){try{return I===r.default.TEXT&&!D.isTextEnabled()||C.isPaused()&&(!C.getStreamController().getInitialPlayback()||!C.getStreamController().getAutoPlay())&&!k.get().streaming.scheduling.scheduleWhilePaused}catch(t){return!1}}())return void P();if(function(){try{return f&&(isNaN(m)||y||(t=x.getMaxAllowedIndexFor(I,n.id),!(!isNaN(v)&&v==t||(s.info("Top quality "+I+" index has changed from "+v+" to "+t),v=t,0)))||!I||!f||S.getCurrentBufferLevel(I)<L())}catch(e){return!1}var t}()){var t=!1;b&&(t=x.checkPlaybackQuality(I,n.id)),t||(_||f.quality!==m||y?(y?(s.debug("Switch track for "+I+", representation id = "+f.id),y=!1):s.debug("Quality has changed, get init request for representationid = "+f.id),T.trigger(o.default.INIT_FRAGMENT_NEEDED,{representationId:f.id,sender:e},{streamId:n.id,mediaType:I}),b=!1,_=!1):(s.debug("Media segment needed for ".concat(I," and stream id ").concat(n.id)),T.trigger(o.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:I}),b=!0))}else O(k.get().streaming.lowLatencyEnabled?k.get().streaming.scheduling.lowLatencyTimeout:k.get().streaming.scheduling.defaultTimeout)}catch(i){O(k.get().streaming.lowLatencyEnabled?k.get().streaming.scheduling.lowLatencyTimeout:k.get().streaming.scheduling.defaultTimeout)}}function L(){var t=NaN;return I&&f?t=I===r.default.TEXT?function(){try{if(D.isTextEnabled()){if(isNaN(f.fragmentDuration)){var t=S.getCurrentSchedulingInfo(l.default.SCHEDULING_INFO);return t?t.duration:0}return f.fragmentDuration}return 0}catch(e){return 0}}():I===r.default.AUDIO&&p?function(){try{var t=S.getCurrentBufferLevel(r.default.VIDEO);return isNaN(f.fragmentDuration)?t+1:Math.max(t+1,f.fragmentDuration)}catch(e){return 0}}():function(){try{var t=f.mediaInfo.streamInfo;return x.isPlayingAtTopQuality(t)?t.manifestInfo.duration>=k.get().streaming.buffer.longFormContentDurationThreshold?k.get().streaming.buffer.bufferTimeAtTopQualityLongForm:k.get().streaming.buffer.bufferTimeAtTopQuality:w.getStableBufferTime()}catch(e){return w.getStableBufferTime()}}():t}function N(){F(!0)}function F(t){if(C&&A){var e=A.getRequests({state:i.default.FRAGMENT_MODEL_EXECUTED,time:C.getTime(),threshold:0})[0];e&&C.getTime()>=e.startTime&&((!g.mediaInfo||e.mediaInfo.type===g.mediaInfo.type&&e.mediaInfo.id!==g.mediaInfo.id)&&t&&T.trigger(o.default.TRACK_CHANGE_RENDERED,{mediaType:I,oldMediaInfo:g.mediaInfo,newMediaInfo:e.mediaInfo,streamId:n.id}),e.quality===g.quality&&e.adaptationIndex===g.adaptationIndex||!t||(s.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(I)),T.trigger(o.default.QUALITY_CHANGE_RENDERED,{mediaType:I,oldQuality:g.quality,newQuality:e.quality,streamId:n.id})),g={mediaInfo:e.mediaInfo,quality:e.quality,adaptationIndex:e.adaptationIndex})}}function j(t){s.debug("Appended bytes for ".concat(t.mediaType," and stream id ").concat(n.id)),(isNaN(t.index)||isNaN(m))&&(m=t.quality,s.info("["+I+"] lastInitializedRepresentationInfo changed to "+t.quality)),O(0)}function B(){A.abortRequests(),P()}function U(){k.get().streaming.scheduling.scheduleWhilePaused||O()}function V(t){S.updatePlayListTraceMetrics({playbackspeed:t.playbackRate.toString()})}function G(){b=!0,d=0,m=NaN,g={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},v=NaN,y=!1,_=!1}return e={initialize:function(t){p=t,T.on(o.default.BYTES_APPENDED_END_FRAGMENT,j,e),T.on(o.default.URL_RESOLUTION_FAILED,B,e),T.on(c.default.PLAYBACK_STARTED,U,e),T.on(c.default.PLAYBACK_RATE_CHANGED,V,e),T.on(c.default.PLAYBACK_TIME_UPDATED,N,e)},getType:function(){return I},getStreamId:function(){return n.id},setCurrentRepresentation:function(t){f=t},setTimeToLoadDelay:function(t){d=t},getTimeToLoadDelay:function(){return d},setSwitchTrack:function(t){y=t},getSwitchStrack:function(){return y},startScheduleTimer:O,clearScheduleTimer:P,reset:function(){T.off(o.default.BYTES_APPENDED_END_FRAGMENT,j,e),T.off(o.default.URL_RESOLUTION_FAILED,B,e),T.off(c.default.PLAYBACK_STARTED,U,e),T.off(c.default.PLAYBACK_RATE_CHANGED,V,e),T.off(c.default.PLAYBACK_TIME_UPDATED,N,e),P(),F(!1),G(),n=null},getBufferTarget:L,getPlaybackController:function(){return C},setCheckPlaybackQuality:function(t){b=t},setInitSegmentRequired:function(t){_=t}},s=Object(u.default)(E).getInstance().getLogger(e),G(),n=t.streamInfo,e}f.__dashjs_factory_name="ScheduleController",e.default=s.default.getClassFactory(f)},"./src/streaming/controllers/StreamController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/Stream.js"),o=n("./src/streaming/ManifestUpdater.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/metrics/PlayList.js"),f=n("./src/core/Debug.js"),d=n("./src/streaming/utils/InitCache.js"),h=n("./src/streaming/utils/URLUtils.js"),p=n("./src/streaming/MediaPlayerEvents.js"),g=n("./src/streaming/controllers/TimeSyncController.js"),v=n("./src/streaming/controllers/MediaSourceController.js"),m=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/errors/Errors.js"),_=n("./src/streaming/controllers/EventController.js"),b=n("./src/streaming/constants/ConformanceViolationConstants.js");function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(){var t,e,n,l,T,S,w,A,x,C,D,I,R,k,O,P,M,L,N,F,j,B,U,V,G,H,Y,z,q,X,K,W,Q,$,Z,J,tt,et,nt,rt,it,at,ot,st,ut=this.context,lt=Object(s.default)(ut).getInstance();function ct(){!function(){try{var t=A.getStreamsInfo();if(!U&&0===t.length)throw new Error("There are no streams");U&&x.updateManifestUpdateInfo({currentTime:Q.getTime(),buffered:W.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:j.getClientTimeOffset()}),B.length>0&&function(t){B=B.filter((function(n){var r=t.filter((function(t){return t.id===n.getId()})).length>0||n.getId()===U.getId();return r||(e.debug("Removing stream ".concat(n.getId())),n.reset(!0)),r}))}(t);for(var n=[],i=0,a=t.length;i<a;i++){var o=t[i];n.push(dt(o)),x.addManifestUpdateStreamInfo(o)}Promise.all(n).then((function(){U||function t(n){St();var i=x.getCurrentDVRInfo().range;if(i.end<i.start){ot&&clearTimeout(ot);var a=Math.min(1e3*(-1*(i.end-i.start)+2),2147483647);return e.debug("Waiting for ".concat(a," ms before playback can start")),lt.trigger(u.default.AST_IN_FUTURE,{delay:a}),void(ot=setTimeout((function(){t(n)}),a))}if(A.getIsDynamic()&&B.length){var o=n[0].manifestInfo,s=function(t,e){try{var n=NaN;if(e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration))return e.maxFragmentDuration;if(t&&1===t.length){var i=t[0],a=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT].reduce((function(t,e){var n=A.getMediaInfoForType(i,e);return n&&!1!==n.isFragmented&&t.push(n),t}),[]).reduce((function(t,e){var n=A.getVoRepresentations(e);return n&&n.length>0&&n.forEach((function(e){e&&t.push(e)})),t}),[]).reduce((function(t,e){var n=A.convertRepresentationToRepresentationInfo(e);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&t.push(n.fragmentDuration),t}),[]);n=Math.max.apply(Math,function(t){if(Array.isArray(t))return E(t)}(o=a)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return E(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,void 0):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(n)?n:NaN}catch(s){return NaN}var o}(n,o);Q.computeAndSetLiveDelay(s,o)}var l=function(){var t;if(A.getIsDynamic()){var n=x.getCurrentDVRInfo();t=(n&&n.range?n.range.end:0)-Q.getLiveDelay();var r=n?n.range:null;if(r){var i=Lt(!0);if(!isNaN(i)){e.info("Start time from URI parameters: "+i);var a=it.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;t=Math.max(Math.min(t,i),r.start+a)}}}else{t=Wt()[0].getStreamInfo().start;var o=Lt(!1);isNaN(o)||(e.info("Start time from URI parameters: "+o),t=Math.max(t,o))}return t}(),c=Tt(l),f=null!==c?c:B[0];lt.trigger(u.default.INITIAL_STREAM_SWITCH,{startTime:l}),ht(f,null,l),tt||(tt=setInterval((function(){!z&&Q.getTimeToStreamEnd()<=0&&!Q.isSeeking()&&lt.trigger(u.default.PLAYBACK_ENDED,{isLast:Gt().isLast})}),200))}(t),lt.trigger(u.default.STREAMS_COMPOSED),Rt()})).catch((function(t){throw t}))}catch(s){F.error(new m.default(y.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,s.message+"nostreamscomposed",w.getValue())),X=!0,Xt()}}()}function ft(){at=!0}function dt(t){var e=Ht(t.id);return e?e.updateData(t):(e=Object(a.default)(ut).create({manifestModel:w,mediaPlayerModel:$,dashMetrics:x,manifestUpdater:T,adapter:A,timelineConverter:j,capabilities:n,capabilitiesFilter:l,errHandler:F,baseURLController:I,segmentBaseController:R,textController:G,abrController:O,playbackController:Q,eventController:M,mediaController:P,protectionController:V,videoModel:W,streamInfo:t,settings:it}),B.push(e),e.initialize(),Promise.resolve())}function ht(t,n,r){try{if(z||!t||n===t&&t.getIsActive())return;z=!0,lt.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:t.getStreamInfo()});var i=!1;U=t,n&&(i=bt(t,n),n.deactivate(i)),r=isNaN(r)?!i&&n?t.getStreamInfo().start:NaN:r,e.info("Switch to stream ".concat(t.getId(),". Seektime is ").concat(r,", current playback time is ").concat(Q.getTime(),". Seamless period switch is set to ").concat(i)),nt=nt.filter((function(t){return t.getId()!==U.getId()})),Q.initialize(Gt(),!!n),W.getElement()&&pt(r,i)}catch(a){z=!1}}function pt(t,n){var r;function i(){if(K&&"open"===K.readyState){e.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),K.removeEventListener("sourceopen",i),K.removeEventListener("webkitsourceopen",i),Mt();var a=x.getCurrentDVRInfo();C.setSeekable(a.range.start,a.range.end),gt(t,n)}}function a(){K.addEventListener("sourceopen",i,!1),K.addEventListener("webkitsourceopen",i,!1),r=C.attachMediaSource(W),e.debug("MediaSource attached to element.  Waiting on open...")}K?n?gt(t,n):(C.detachMediaSource(W),a()):(K=C.createMediaSource(),a())}function gt(t,e){U.activate(K,e?et:void 0,t).then((function(e){if(e){var n=Object.keys(e);n.length>0&&e[n[0]].getBuffer().changeType&&(rt=!0),et=e}isNaN(t)||(lt.trigger(u.default.SEEK_TARGET,{time:t},{streamId:U.getId()}),Q.seek(t,!1,!0),U.startScheduleControllers()),z=!1,lt.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Gt()})}))}function vt(t){Q.getTime();var e=Tt(t.seekTime);e&&e!==U?e&&e!==U&&(mt(),function(t,e){var n=t&&!isNaN(t.seekTime)?t.seekTime:NaN,r=U.getProcessors().map((function(e){return e.prepareOuterPeriodPlaybackSeeking(t)}));Promise.all(r).then((function(){ht(e,U,n)})).catch((function(t){F.error(t)}))}(t,e)):(mt(),function(t){U.getProcessors().forEach((function(e){return e.prepareInnerPeriodPlaybackSeeking(t)})),Bt(c.PlayListTrace.USER_REQUEST_STOP_REASON)}(t)),Ut(c.PlayList.SEEK_START_REASON)}function mt(t,e){yt()}function yt(){nt&&nt.length>0&&(nt.forEach((function(t){t.deactivate(!0)})),nt=[])}function _t(t){t.newMediaInfo.streamInfo.id===U.getId()&&(yt(),U.prepareTrackChange(t))}function bt(t,e){try{return it.get().streaming.buffer.reuseExistingSourceBuffers&&(e.isProtectionCompatible(t)||at)&&(rt||e.isMediaCodecCompatible(t,e))}catch(n){return!1}}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(K&&!t.getPreloaded()){var n=bt(t,e);n&&t.startPreloading(K,et).then((function(){nt.push(t)}))}}function Tt(t){if(isNaN(t))return null;for(var e=B.length,n=0;n<e;n++){var r=B[n];if(t<parseFloat((r.getStartTime()+r.getDuration()).toFixed(5)))return r}return null}function St(){try{var t=A.getIsDynamic(),e=A.getStreamsInfo()[0].manifestInfo,n=Q.getTime(),i=j.calcTimeShiftBufferWindow(B,t),a=Ot();if(void 0===i.start||void 0===i.end)return;a&&0!==a.length?a.forEach((function(t){x.addDVRInfo(t.getType(),n,e,i)})):x.addDVRInfo(r.default.VIDEO,n,e,i)}catch(o){}}function wt(t){if(J&&Y){var e=$.getInitialBufferLevel();(isNaN(e)||e<=Q.getBufferLevel()||A.getIsDynamic()&&e>Q.getLiveDelay())&&(J=!1,Ut(c.PlayList.INITIAL_PLAYOUT_START_REASON),Q.play())}t&&t.mediaType&&x.addBufferLevel(t.mediaType,new Date,1e3*t.bufferLevel)}function At(t){t.streamInfo.id===U.getId()&&t.reason&&t.reason.forceReplace&&yt(),Ht(t.streamInfo.id).prepareQualityChange(t)}function xt(){if(Ft()){var t=W.getPlaybackQuality();t&&x.addDroppedFrames(t)}}function Ct(){e.debug("[onPlaybackStarted]"),!J&&Z&&Ut(c.PlayList.RESUME_FROM_PAUSE_START_REASON),J&&(J=!1),Z=!1}function Dt(t){e.debug("[onPlaybackPaused]"),t.ended||(Z=!0,Bt(c.PlayListTrace.USER_REQUEST_STOP_REASON))}function It(t){e.debug("Stream with id ".concat(t.streamInfo.id," finished buffering")),K&&t.streamInfo.isLast?(e.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),C.signalEndOfStream(K)):Rt()}function Rt(){if(U&&U.getHasFinishedBuffering())for(var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var e=t||U||null;if(e){var n=e.getStreamInfo();return B.filter((function(t){var e=t.getStreamInfo();return e.start>n.start&&n.id!==e.id}))}}catch(r){return[]}}(U),e=0;e<t.length;){var n=t[e],r=0===e?U:t[e-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&K&&Et(n,r),e+=1}}function kt(){tt&&(clearInterval(tt),tt=null)}function Ot(){return U?U.getProcessors():[]}function Pt(t){if(U&&!U.getIsEndedEventSignaled()){U.setIsEndedEventSignaled(!0);var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||U||null;if(!e)return null;for(var n=e.getStreamInfo(),r=n.start,i=0,a=-1,o=NaN;i<B.length;){var s=B[i],u=s.getStreamInfo(),l=u.start-r;l>0&&(isNaN(o)||l<o)&&n.id!==u.id&&(o=l,a=i),i+=1}return a>=0?B[a]:null}();n?(e.debug("StreamController onEnded, found next stream with id ".concat(n.getStreamInfo().id,". Switching from ").concat(U.getStreamInfo().id," to ").concat(n.getStreamInfo().id)),ht(n,U,NaN)):(e.debug("StreamController no next stream found"),U.setIsEndedEventSignaled(!1)),Bt(n?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON)}t&&t.isLast&&kt()}function Mt(t){var e=t||Gt().manifestInfo.duration;C.setDuration(e)}function Lt(t){var e=k.getURIFragmentData();if(!e||!e.t)return NaN;var n=Wt()[0].getStreamInfo().start;e.t=e.t.split(",")[0];var r=-1!==e.t.indexOf("posix:")?"now"===e.t.substring(6)?Date.now()/1e3:parseInt(e.t.substring(6)):NaN;return t&&!isNaN(r)?r-Q.getAvailabilityStartTime()/1e3:parseInt(e.t)+n}function Nt(t){if(t.error)X=!0,Xt();else{e.info("Manifest updated... updating data system wide.");var n=t.manifest;A.updatePeriods(n);var r=A.getUTCTimingSources();!A.getIsDynamic()||r&&0!==r.length||lt.trigger(p.default.CONFORMANCE_VIOLATION,{level:b.default.LEVELS.WARNING,event:b.default.EVENTS.NO_UTC_TIMING_ELEMENT});var i=A.getIsDynamic()?r.concat($.getUTCTimingSources()):r,a=N.isHTTPS(t.manifest.url);i.forEach((function(t){t.value.replace(/.*?:\/\//g,"")===$.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(t.value=t.value.replace(a?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),a?"https://":"http://"),e.debug("Matching default timing source protocol to manifest protocol: ",t.value))})),l.filterUnsupportedFeatures(n).then((function(){I.initialize(n),D.attemptSync(i,A.getIsDynamic())}))}}function Ft(){return!!U&&U.getHasVideoTrack()}function jt(){return!!U&&U.getHasAudioTrack()}function Bt(t,e){e=e||new Date,Ot().forEach((function(n){n.finalisePlayList(e,t)})),x.addPlayList()}function Ut(t){x.createPlaylistMetrics(1e3*Q.getTime(),t)}function Vt(t){if(t.error){var n="";switch(t.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",st.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&it.get().errors.recoverAttempts.mediaErrorDecode>=st.counts.mediaErrorDecode?function(){e.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var t=Q.getTime();U.deactivate(!1),e.warn("MediaSource has been resetted. Resuming playback from time ".concat(t)),pt(t,!1)}():(q=!0,t.error.message&&(n+=" ("+t.error.message+")"),t.error.msExtendedCode&&(n+=" (0x"+(t.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),e.fatal("Video Element Error: "+n),t.error&&e.fatal(t.error),F.error(new m.default(t.error.code,n)),Xt())}}function Gt(){return U?U.getStreamInfo():null}function Ht(t){for(var e=0,n=B.length;e<n;e++)if(B[e].getId()===t)return B[e];return null}function Yt(){if(!(S&&S.hasOwnProperty("load")&&j&&j.hasOwnProperty("initialize")&&j.hasOwnProperty("reset")&&j.hasOwnProperty("getClientTimeOffset")&&w&&F&&x&&Q))throw new Error(r.default.MISSING_CONFIG_ERROR)}function zt(t){isNaN(t.newDuration)||Mt(t.newDuration)}function qt(){B=[],V=null,z=!1,U=null,q=!1,X=!1,J=!0,Z=!1,Y=!0,tt=null,at=!1,rt=!1,nt=[],ot=null,st={counts:{mediaErrorDecode:0}}}function Xt(){Yt(),D.reset(),Bt(q||X?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,n=B?B.length:0;e<n;e++)B[e].reset(q);lt.off(p.default.PLAYBACK_TIME_UPDATED,xt,t),lt.off(p.default.PLAYBACK_SEEKING,vt,t),lt.off(p.default.PLAYBACK_ERROR,Vt,t),lt.off(p.default.PLAYBACK_STARTED,Ct,t),lt.off(p.default.PLAYBACK_PAUSED,Dt,t),lt.off(p.default.PLAYBACK_ENDED,Pt,t),lt.off(p.default.METRIC_ADDED,Kt,t),lt.off(p.default.MANIFEST_VALIDITY_CHANGED,zt,t),lt.off(p.default.BUFFER_LEVEL_UPDATED,wt,t),lt.off(p.default.QUALITY_CHANGE_REQUESTED,At,t),u.default.KEY_SESSION_UPDATED&&lt.off(u.default.KEY_SESSION_UPDATED,ft,t),lt.off(u.default.MANIFEST_UPDATED,Nt,t),lt.off(u.default.STREAM_BUFFERING_COMPLETED,It,t),lt.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,ct,t),lt.off(u.default.CURRENT_TRACK_CHANGED,_t,t),I.reset(),T.reset(),M.reset(),x.clearAllCurrentMetrics(),w.setValue(null),S.reset(),j.reset(),L.reset(),K&&(C.detachMediaSource(W),K=null),W=null,V&&(V=null,H=null,w.getValue()&&lt.trigger(u.default.PROTECTION_DESTROYED,{data:w.getValue().url})),kt(),lt.trigger(u.default.STREAM_TEARDOWN_COMPLETE),qt()}function Kt(t){if(t.metric===i.default.DVR_INFO){var e=jt()?r.default.AUDIO:r.default.VIDEO;t.mediaType===e&&C.setSeekable(t.value.range.start,t.value.range.end)}}function Wt(){return B}return t={initialize:function(e,n){Yt(),Y=e,H=n,j.initialize(),(T=Object(o.default)(ut).create()).setConfig({manifestModel:w,adapter:A,manifestLoader:S,errHandler:F,settings:it}),T.initialize(),(M=Object(_.default)(ut).getInstance()).setConfig({manifestUpdater:T,playbackController:Q,settings:it}),M.start(),D.setConfig({dashMetrics:x,baseURLController:I,errHandler:F,settings:it}),D.initialize(),V&&(lt.trigger(u.default.PROTECTION_CREATED,{controller:V}),V.setMediaElement(W.getElement()),H&&V.setProtectionData(H)),lt.on(p.default.PLAYBACK_TIME_UPDATED,xt,t),lt.on(p.default.PLAYBACK_SEEKING,vt,t),lt.on(p.default.PLAYBACK_ERROR,Vt,t),lt.on(p.default.PLAYBACK_STARTED,Ct,t),lt.on(p.default.PLAYBACK_PAUSED,Dt,t),lt.on(p.default.PLAYBACK_ENDED,Pt,t),lt.on(p.default.METRIC_ADDED,Kt,t),lt.on(p.default.MANIFEST_VALIDITY_CHANGED,zt,t),lt.on(p.default.BUFFER_LEVEL_UPDATED,wt,t),lt.on(p.default.QUALITY_CHANGE_REQUESTED,At,t),u.default.KEY_SESSION_UPDATED&&lt.on(u.default.KEY_SESSION_UPDATED,ft,t),lt.on(u.default.MANIFEST_UPDATED,Nt,t),lt.on(u.default.STREAM_BUFFERING_COMPLETED,It,t),lt.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,ct,t),lt.on(u.default.CURRENT_TRACK_CHANGED,_t,t)},getActiveStreamInfo:Gt,addDVRMetric:St,hasVideoTrack:Ft,hasAudioTrack:jt,getStreamById:Ht,getStreamForTime:Tt,getTimeRelativeToStreamId:function(t,e){for(var n=null,r=0,i=0,a=null,o=0;o<B.length;o++){if(i=(n=B[o]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===e)return t-r;Number.isFinite(a)&&(r+=a)}return null},load:function(t){Yt(),S.load(t)},loadWithManifest:function(t){!function(){if(!T||!T.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),T.setManifest(t)},getActiveStreamProcessors:Ot,setConfig:function(t){t&&(t.capabilities&&(n=t.capabilities),t.capabilitiesFilter&&(l=t.capabilitiesFilter),t.manifestLoader&&(S=t.manifestLoader),t.manifestModel&&(w=t.manifestModel),t.mediaPlayerModel&&($=t.mediaPlayerModel),t.protectionController&&(V=t.protectionController),t.adapter&&(A=t.adapter),t.dashMetrics&&(x=t.dashMetrics),t.errHandler&&(F=t.errHandler),t.timelineConverter&&(j=t.timelineConverter),t.videoModel&&(W=t.videoModel),t.playbackController&&(Q=t.playbackController),t.textController&&(G=t.textController),t.abrController&&(O=t.abrController),t.mediaController&&(P=t.mediaController),t.settings&&(it=t.settings),t.baseURLController&&(I=t.baseURLController),t.uriFragmentModel&&(k=t.uriFragmentModel),t.segmentBaseController&&(R=t.segmentBaseController))},setProtectionData:function(t){H=t,V&&V.setProtectionData(H)},getIsStreamSwitchInProgress:function(){return z},switchToVideoElement:function(t){U&&(Q.initialize(Gt()),pt(t,!1))},getHasMediaOrInitialisationError:function(){return q||X},getStreams:Wt,getActiveStream:function(){return U},getInitialPlayback:function(){return J},getAutoPlay:function(){return Y},reset:Xt},e=Object(f.default)(ut).getInstance().getLogger(t),D=Object(g.default)(ut).getInstance(),C=Object(v.default)(ut).getInstance(),L=Object(d.default)(ut).getInstance(),N=Object(h.default)(ut).getInstance(),qt(),t}T.__dashjs_factory_name="StreamController",e.default=l.default.getSingletonFactory(T)},"./src/streaming/controllers/TimeSyncController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./src/core/errors/Errors.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/utils/URLUtils.js");function f(){var t,e,n,u,f,d,h,p,g,v,m,y,_,b,E,T,S=this.context,w=Object(a.default)(S).getInstance(),A=Object(c.default)(S).getInstance();function x(){p=[],g=[],v=null,m=null,_=null,y=NaN,n=!1,u=!1,b=f.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function C(){f.get().streaming.utcSynchronization.enabled&&!n&&!u&&_&&_.value&&_.schemeIdUri&&!isNaN(y)&&!isNaN(f.get().streaming.utcSynchronization.backgroundAttempts)&&(m&&(Date.now()-m)/1e3<30||(p=[],u=!0,function t(e){try{if(e<=0)return void B();var n=Date.now();d[_.schemeIdUri](_.value,(function(r){var i=Date.now(),a=D(n,i,r);p.push(a),t(e-1)}),(function(){B()}))}catch(r){B()}}(isNaN(f.get().streaming.utcSynchronization.backgroundAttempts)?2:f.get().streaming.utcSynchronization.backgroundAttempts)))}function D(t,e,n){return n-(e-(e-t)/2)}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=isNaN(t);e&&f.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?F():j(e,t)}function R(t){var e=Date.parse(t);return isNaN(e)&&(e=function(t){var e,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t);return e=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),e+=("+"===r[8]?-1:1)*n*60*1e3),new Date(e).getTime()}(t)),e}function k(t){return Date.parse(t)}function O(t){return Date.parse(t)}function P(t,e,n){n()}function M(t,e,n){var r=R(t);isNaN(r)?n():e(r)}function L(t,e,n,r,a){var o,s,u=!1,l=new XMLHttpRequest,c=a?i.HTTPRequest.HEAD:i.HTTPRequest.GET,f=e.match(/\S+/g);if(e=f.shift(),o=function(){u||(u=!0,f.length?L(t,f.join(" "),n,r,a):r())},s=function(){var e,r;200===l.status&&(e=a?l.getResponseHeader("Date"):l.response,r=t(e),isNaN(r)||(n(r),u=!0))},A.isRelative(e)){var d=T.resolve();d&&(e=A.resolve(e,d.url))}l.open(c,e),l.timeout=5e3,l.onload=s,l.onloadend=o,l.send()}function N(t,e,n){L(O,t,e,n,!0)}function F(){var t=h.getLatestMPDRequestHeaderValueByID("Date"),e=null!==t?new Date(t).getTime():Number.NaN;isNaN(e)?j(!0):j(!1,e-Date.now())}function j(t,i){if(isNaN(y)||isNaN(i)||t||function(t){try{var n,r=U(t),i=isNaN(b)?30:b,a=isNaN(f.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:f.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,o=isNaN(f.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:f.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,s=isNaN(f.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:f.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;r?(n=Math.min(i*a,o),e.debug("Increasing timeBetweenSyncAttempts to ".concat(n))):(n=Math.max(i/a,s),e.debug("Decreasing timeBetweenSyncAttempts to ".concat(n))),b=n}catch(u){}}(i),!t&&!isNaN(i)){v=Date.now(),n=!1;var a=isNaN(y);y=i,a&&C(),e.debug("Completed UTC sync. Setting client - server offset to ".concat(i))}t&&(_=null,n=!1,E.error(new r.default(s.default.TIME_SYNC_FAILED_ERROR_CODE,s.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),w.trigger(o.default.UPDATE_TIME_SYNC_OFFSET,{offset:i}),w.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED)}function B(){if(p&&0!==p.length){var t=p.reduce((function(t,e){return t+e}),0)/p.length;U(t)?e.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(e.debug("Completed background UTC sync. Setting client - server offset to ".concat(t)),w.trigger(o.default.UPDATE_TIME_SYNC_OFFSET,{offset:y=t})),u=!1,m=Date.now()}}function U(t){try{if(isNaN(y))return!0;var e=f.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(f.get().streaming.utcSynchronization.maximumAllowedDrift)?f.get().streaming.utcSynchronization.maximumAllowedDrift:100;return t>=y-e&&t<=y+e}catch(n){return!0}}return t={initialize:function(){x(),d={"urn:mpeg:dash:utc:http-head:2014":N,"urn:mpeg:dash:utc:http-xsdate:2014":L.bind(null,R),"urn:mpeg:dash:utc:http-iso:2014":L.bind(null,k),"urn:mpeg:dash:utc:direct:2014":M,"urn:mpeg:dash:utc:http-head:2012":N,"urn:mpeg:dash:utc:http-xsdate:2012":L.bind(null,R),"urn:mpeg:dash:utc:http-iso:2012":L.bind(null,k),"urn:mpeg:dash:utc:direct:2012":M,"urn:mpeg:dash:utc:http-ntp:2014":P,"urn:mpeg:dash:utc:ntp:2014":P,"urn:mpeg:dash:utc:sntp:2014":P}},attemptSync:function(t,e){g=t,n||(function(t){try{if(!t||!f.get().streaming.utcSynchronization.enabled)return!1;var e=isNaN(b)?30:b;return!(v&&e&&!isNaN(e))||(Date.now()-v)/1e3>=e}catch(n){return!0}}(e)?(n=!0,function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e||0;if(!g||0===g.length||n>=g.length)I();else{var r=g[n];if(r)if(d.hasOwnProperty(r.schemeIdUri)){var i=(new Date).getTime();d[r.schemeIdUri](r.value,(function(t){var e=(new Date).getTime(),n=D(i,e,t);_=r,I(n)}),(function(){t(n+1)}))}else t(n+1);else I()}}()):w.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(t){t&&(t.dashMetrics&&(h=t.dashMetrics),t.baseURLController&&(T=t.baseURLController),t.errHandler&&(E=t.errHandler),t.settings&&(f=t.settings))},reset:function(){x(),w.off(o.default.ATTEMPT_BACKGROUND_SYNC,C,t)}},e=Object(l.default)(S).getInstance().getLogger(t),w.on(o.default.ATTEMPT_BACKGROUND_SYNC,C,t),t}f.__dashjs_factory_name="TimeSyncController";var d=u.default.getSingletonFactory(f);d.HTTP_TIMEOUT_MS=5e3,u.default.updateSingletonFactory(f.__dashjs_factory_name,d),e.default=d},"./src/streaming/controllers/XlinkController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/XlinkLoader.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),s=n("./externals/xml2json.js"),u=n("./src/streaming/utils/URLUtils.js"),l=n("./src/dash/constants/DashConstants.js");function c(t){t=t||{};var e,n,o,c,f,d,h=this.context,p=Object(i.default)(h).getInstance(),g=Object(u.default)(h).getInstance();function v(t,e,n){var r,i,a={};a.elements=t,a.type=e,a.resolveType=n,0===a.elements.length&&y(a);for(var o=0;o<a.elements.length;o++)i=g.isHTTPURL((r=a.elements[o]).url)?r.url:r.originalContent.BaseURL+r.url,d.load(i,r,a)}function m(t){var e,n,r="";if(n=t.resolveObject,(e=t.element).resolvedContent){var i=0;0===e.resolvedContent.indexOf("<?xml")&&(i=e.resolvedContent.indexOf("?>")+2),r=e.resolvedContent.substr(0,i)+"<response>"+e.resolvedContent.substr(i)+"</response>",e.resolvedContent=f.xml_str2json(r)}(function(t){var e;for(e=0;e<t.elements.length;e++)if(!1===t.elements[e].resolved)return!1;return!0})(n)&&y(n)}function y(t){var e,n,r=[];if(function(t){var e,n,r,i,a,s=[];for(r=t.elements.length-1;r>=0;r--){if(n=(e=t.elements[r]).type+"_asArray",e.resolvedContent){if(e.resolvedContent)for(i=0;i<e.resolvedContent[n].length;i++)s.push(e.resolvedContent[n][i])}else delete e.originalContent["xlink:actuate"],delete e.originalContent["xlink:href"],s.push(e.originalContent);for(e.parentElement[n].splice(e.index,1),a=0;a<s.length;a++)e.parentElement[n].splice(e.index+a,0,s[a]);s=[]}t.elements.length>0&&o.run(c)}(t),"onActuate"===t.resolveType&&p.trigger(a.default.XLINK_READY,{manifest:c}),"onLoad"===t.resolveType)switch(t.type){case l.default.PERIOD:for(e=0;e<c[l.default.PERIOD+"_asArray"].length;e++)(n=c[l.default.PERIOD+"_asArray"][e]).hasOwnProperty(l.default.ADAPTATION_SET+"_asArray")&&(r=r.concat(_(n[l.default.ADAPTATION_SET+"_asArray"],n,l.default.ADAPTATION_SET,"onLoad"))),n.hasOwnProperty(l.default.EVENT_STREAM+"_asArray")&&(r=r.concat(_(n[l.default.EVENT_STREAM+"_asArray"],n,l.default.EVENT_STREAM,"onLoad")));v(r,l.default.ADAPTATION_SET,"onLoad");break;case l.default.ADAPTATION_SET:p.trigger(a.default.XLINK_READY,{manifest:c})}}function _(t,e,n,r){var i,a,o,s=[];for(a=t.length-1;a>=0;a--)(i=t[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&t.splice(a,1);for(a=0;a<t.length;a++)(i=t[a]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=b(i["xlink:href"],e,n,a,r,i),s.push(o));return s}function b(t,e,n,r,i,a){return{url:t,parentElement:e,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return e={resolveManifestOnLoad:function(t){f=new s.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(c=t).Period_asArray?v(_(c.Period_asArray,c,l.default.PERIOD,"onLoad"),l.default.PERIOD,"onLoad"):p.trigger(a.default.XLINK_READY,{manifest:c})},setMatchers:function(t){t&&(n=t)},setIron:function(t){t&&(o=t)},reset:function(){p.off(a.default.XLINK_ELEMENT_LOADED,m,e),d&&(d.reset(),d=null)}},p.on(a.default.XLINK_ELEMENT_LOADED,m,e),d=Object(r.default)(h).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings}),e}c.__dashjs_factory_name="XlinkController",e.default=o.default.getClassFactory(c)},"./src/streaming/metrics/MetricsReporting.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js"),a=n("./src/streaming/metrics/controllers/MetricsCollectionController.js"),o=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),s=n("./src/streaming/metrics/reporting/ReportingFactory.js");function u(){var t=this.context;return{createMetricsReporting:function(e){return Object(r.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialise(),Object(a.default)(t).create(e)},getReportingFactory:function(){return Object(s.default)(t).getInstance()},getMetricsHandlerFactory:function(){return Object(o.default)(t).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var l=dashjs.FactoryMaker.getClassFactory(u);l.events=i.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,l),e.default=l},"./src/streaming/metrics/MetricsReportingEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var s=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",t.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",t.CMCD_DATA_GENERATED="cmcdDataGenerated",t}return s}(n("./src/core/events/EventsBase.js").default));e.default=s},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/controllers/MetricsController.js"),i=n("./src/streaming/metrics/utils/ManifestParsing.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js");function o(t){var e,n={},o=this.context,s=(t=t||{}).eventBus,u=t.events;function l(e){if(!e.error){var u=Object.keys(n);Object(i.default)(o).getInstance({adapter:t.adapter,constants:t.constants}).getMetrics(e.manifest).forEach((function(i){var a=JSON.stringify(i);if(n.hasOwnProperty(a))u.splice(a,1);else try{var s=Object(r.default)(o).create(t);s.initialize(i),n[a]=s}catch(e){}})),u.forEach((function(t){n[t].reset(),delete n[t]})),s.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function c(){Object.keys(n).forEach((function(t){n[t].reset()})),n={}}return e={reset:function(){s.off(u.MANIFEST_UPDATED,l,e),s.off(u.STREAM_TEARDOWN_COMPLETE,c,e)}},s.on(u.MANIFEST_UPDATED,l,e),s.on(u.STREAM_TEARDOWN_COMPLETE,c,e),e}o.__dashjs_factory_name="MetricsCollectionController",e.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/controllers/MetricsController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/controllers/RangeController.js"),i=n("./src/streaming/metrics/controllers/ReportingController.js"),a=n("./src/streaming/metrics/controllers/MetricsHandlersController.js");function o(t){var e,n,o;t=t||{};var s=this.context;function u(){e&&e.reset(),n&&n.reset(),o&&o.reset()}return{initialize:function(l){try{(o=Object(r.default)(s).create({mediaElement:t.mediaElement})).initialize(l.Range),(n=Object(i.default)(s).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(l.Reporting,o),(e=Object(a.default)(s).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(l.metrics,n)}catch(c){throw u(),c}},reset:u}}o.__dashjs_factory_name="MetricsController",e.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function i(t){var e,n=[],i=this.context,a=(t=t||{}).eventBus,o=t.events,s=Object(r.default)(i).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function u(t){n.forEach((function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)}))}return e={initialize:function(t,r){t.split(",").forEach((function(t,e,i){var a;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){var o=i[e+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(t+=","+o,delete i[e+1])}(a=s.create(t,r))&&n.push(a)})),a.on(o.METRIC_ADDED,u,e),a.on(o.METRIC_UPDATED,u,e)},reset:function(){a.off(o.METRIC_ADDED,u,e),a.off(o.METRIC_UPDATED,u,e),n.forEach((function(t){return t.reset()})),n=[]}}}i.__dashjs_factory_name="MetricsHandlersController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/RangeController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/CustomTimeRanges.js");function i(t){var e,n,i=!1,a=this.context,o=(t=t||{}).mediaElement;return e={initialize:function(t){t&&t.length&&(t.forEach((function(t){var e=t.starttime;n.add(e,e+t.duration)})),i=!!t[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){var t,e=n.length;if(!e)return!0;t=i?(new Date).getTime()/1e3:o.currentTime;for(var r=0;r<e;r+=1){var a=n.start(r),s=n.end(r);if(a<=t&&t<s)return!0}return!1}},n=Object(r.default)(a).create(),e}i.__dashjs_factory_name="RangeController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/reporting/ReportingFactory.js");function i(t){var e=[],n=Object(r.default)(this.context).getInstance(t);return{initialize:function(t,r){t.some((function(t){var i=n.create(t,r);if(i)return e.push(i),!0}))},reset:function(){e.forEach((function(t){return t.reset()})),e=[]},report:function(t,n){e.forEach((function(e){return e.report(t,n)}))}}}i.__dashjs_factory_name="ReportingController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),i=n("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),a=n("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),o=n("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function s(t){var e=(t=t||{}).debug?t.debug.getLogger(void 0):{},n=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,u={BufferLevel:r.default,DVBErrors:i.default,HttpList:a.default,PlayList:o.default,RepSwitchList:o.default,TcpList:o.default};return{create:function(r,i){var a,o=r.match(n);if(o){try{(a=u[o[1]](s).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(o[1],i,o[3],o[5])}catch(l){a=null,e.error("MetricsHandlerFactory: Could not create handler for type ".concat(o[1]," with args ").concat(o[3],", ").concat(o[5]," (").concat(l.message,")"))}return a}},register:function(t,e){u[t]=e},unregister:function(t){delete u[t]}}}s.__dashjs_factory_name="MetricsHandlerFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(t){var e,n,i,a,o;t=t||{};var s=this.context,u=Object(r.default)(s).getInstance(),l=[],c=t.metricsConstants;function f(){var t=function(){try{return Object.keys(l).map((function(t){return l[t]})).reduce((function(t,e){return t.level<e.level?t:e}))}catch(t){return}}();t&&o!==t.t&&(o=t.t,e.report(i,t))}return{initialize:function(t,r,o){r&&(n=u.validateN(o),e=r,i=u.reconstructFullMetricName(t,o),a=setInterval(f,n))},reset:function(){clearInterval(a),a=null,n=0,e=null,o=null},handleNewMetric:function(t,e,n){t===c.BUFFER_LEVEL&&(l[n]=e)}}}i.__dashjs_factory_name="BufferLevelHandler",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/MetricsReportingEvents.js");e.default=dashjs.FactoryMaker.getClassFactory((function(t){var e,n=(t=t||{}).eventBus,i=t.metricsConstants;function a(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(t,i){i&&(e=i,n.on(r.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){e=null},handleNewMetric:function(t,n){t===i.DVB_ERRORS&&e&&e.report(t,n)}}}))},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(t,e,n){"use strict";function r(){var t,e;return{initialize:function(n,r){t=n,e=r},reset:function(){e=null,t=void 0},handleNewMetric:function(n,r){n===t&&e&&e.report(t,r)}}}n.r(e),r.__dashjs_factory_name="GenericMetricHandler",e.default=dashjs.FactoryMaker.getClassFactory(r)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(t){var e,n,i,a,o;t=t||{};var s=[],u=Object(r.default)(this.context).getInstance(),l=t.metricsConstants;function c(){s.length&&e&&e.report(a,s),s=[]}return{initialize:function(t,r,s,l){r&&(n=u.validateN(s),e=r,l&&l.length&&(i=l),a=u.reconstructFullMetricName(t,s,l),o=setInterval(c,n))},reset:function(){clearInterval(o),o=null,n=null,i=null,s=[],e=null},handleNewMetric:function(t,e){t===l.HTTP_REQUEST&&(i&&i!==e.type||s.push(e))}}}i.__dashjs_factory_name="HttpListHandler",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function i(t){var e={"urn:dvb:dash:reporting:2014":r.default},n=this.context,i=(t=t||{}).debug?t.debug.getLogger(void 0):{},a=t.metricsConstants;return{create:function(t,r){var o;try{(o=e[t.schemeIdUri](n).create({metricsConstants:a})).initialize(t,r)}catch(s){o=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(t.schemeIdUri," (").concat(s.message,")"))}return o},register:function(t,n){e[t]=n},unregister:function(t){delete e[t]}}}i.__dashjs_factory_name="ReportingFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/MetricSerialiser.js"),i=n("./src/streaming/metrics/utils/RNG.js");function a(t){var e,n,a,o,s,u,l,c=this.context,f=[],d=(t=t||{}).metricsConstants;function h(){o=!1,s=!1,u=null,l=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),s&&l.isEnabled()&&e.forEach((function(e){var r=n.serialise(e);t!==d.DVB_ERRORS&&(r="metricname=".concat(t,"&").concat(r)),function(t,e,n){var r=new XMLHttpRequest,i=function(){var t=f.indexOf(r);-1!==t&&(f.splice(t,1),!(r.status>=200&&r.status<300)&&n&&n())};f.push(r);try{r.open("GET",t),r.onloadend=i,r.onerror=i,r.send()}catch(a){r.onerror()}}(r="".concat(u,"?").concat(r),0,(function(){s=!1}))}))},initialize:function(t,e){var n;if(l=e,!(u=t.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");o||((n=t.dvb_probability)&&(1e3===n||n/1e3>=a.random())&&(s=!0),o=!0)},reset:function(){h()}},n=Object(r.default)(c).getInstance(),a=Object(i.default)(c).getInstance(),h(),e}a.__dashjs_factory_name="DVBReporting",e.default=dashjs.FactoryMaker.getClassFactory(a)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/vo/DVBErrors.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js");function a(t){var e,n,a=(t=t||{}).eventBus,o=t.dashMetrics,s=t.metricsConstants,u=t.events;function l(t){var e=new r.default;if(n){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.mpdurl||(e.mpdurl=n.originalUrl||n.url),e.terror||(e.terror=new Date),o.addDVBErrors(e)}}function c(t){t.error||(n=t.manifest)}function f(t){l({errorcode:r.default.BASE_URL_CHANGED,servicelocation:t.entry})}function d(){l({errorcode:r.default.BECAME_REPORTER})}function h(t){switch(t.metric){case s.HTTP_REQUEST:(0===(e=t.value).responsecode||null==e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&l({errorcode:e.responsecode||r.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}var e}function p(t){var e;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:e=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:e=r.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:e})}return e={initialise:function(){a.on(u.MANIFEST_UPDATED,c,e),a.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),a.on(u.METRIC_ADDED,h,e),a.on(u.METRIC_UPDATED,h,e),a.on(u.PLAYBACK_ERROR,p,e),a.on(i.default.BECAME_REPORTING_PLAYER,d,e)},reset:function(){a.off(u.MANIFEST_UPDATED,c,e),a.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),a.off(u.METRIC_ADDED,h,e),a.off(u.METRIC_UPDATED,h,e),a.off(u.PLAYBACK_ERROR,p,e),a.off(i.default.BECAME_REPORTING_PLAYER,d,e)}}}a.__dashjs_factory_name="DVBErrorsTranslator",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(t,e,n){"use strict";function r(){return{reconstructFullMetricName:function(t,e,n){var r=t;return e&&(r+="("+e,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}n.r(e),r.__dashjs_factory_name="HandlerHelpers",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/ManifestParsing.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/vo/Metrics.js"),i=n("./src/streaming/metrics/vo/Range.js"),a=n("./src/streaming/metrics/vo/Reporting.js");function o(t){var e=(t=t||{}).adapter,n=t.constants;return{getMetrics:function(t){var o=[];return t&&t.Metrics_asArray&&t.Metrics_asArray.forEach((function(s){var u=new r.default,l=e.getIsDynamic(t);s.hasOwnProperty("metrics")&&(u.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach((function(r){var a=new i.default;a.starttime=function(t,r,i){var a,o,s=0;return r?s=e.getAvailabilityStartTime(t)/1e3:(a=e.getRegularPeriods(t)).length&&(s=a[0].start),o=s,i&&i.hasOwnProperty(n.START_TIME)&&(o+=i.starttime),o}(t,l,r),a.duration=r.hasOwnProperty("duration")?r.duration:e.getDuration(t),a._useWallClockTime=l,u.Range.push(a)})),s.Reporting_asArray&&(s.Reporting_asArray.forEach((function(t){var e=new a.default;t.hasOwnProperty(n.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty("value")&&(e.value=t.value),t.hasOwnProperty(n.DVB_REPORTING_URL)&&(e.dvb_reportingUrl=t[n.DVB_REPORTING_URL]),t.hasOwnProperty(n.DVB_PROBABILITY)&&(e.dvb_probability=t[n.DVB_PROBABILITY]),u.Reporting.push(e))})),o.push(u)))})),o}}}o.__dashjs_factory_name="ManifestParsing",e.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(t,e,n){"use strict";function r(){return{serialise:function t(e){var n,r,i=[],a=[];for(n in e)if(e.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(r=e[n])&&(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach((function(e){var n="Object"!==Object.prototype.toString.call(e).slice(8,-1);a.push(n?e:t(e))})),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}n.r(e),r.__dashjs_factory_name="MetricSerialiser",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/RNG.js":function(t,e,n){"use strict";function r(){var t,e,n,r=window.crypto||window.msCrypto,i=Uint32Array,a=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function o(){r&&(t||(t=new i(10)),r.getRandomValues(t),e=0)}return n={random:function(n,i){var s;return n||(n=0),i||(i=1),r?(e===t.length&&o(),s=t[e]/a,e+=1):s=Math.random(),s*(i-n)+n}},o(),n}n.r(e),r.__dashjs_factory_name="RNG",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/vo/DVBErrors.js":function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",e.default=r},"./src/streaming/metrics/vo/Metrics.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/ObjectUtils.js"),i=n("./src/core/FactoryMaker.js"),a=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={baseUrls:e||null,selectedIdx:n||NaN},this.children=[]};function o(){var t,e,n,i=this.context,o=Object(r.default)(i).getInstance();function s(t,e,r){var i=n.getBaseURLsFromElement(r);t[e]?o.areEqual(i,t[e].data.baseUrls)||(t[e].data.baseUrls=i,t[e].data.selectedIdx=NaN):t[e]=new a(i)}function u(){e=new a}return t={reset:u,update:function(t){!function(t){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(t);o.areEqual(r,e.data.baseUrls)||(e.data.baseUrls=r,e.data.selectedIdx=NaN),t&&t.Period_asArray&&t.Period_asArray.forEach((function(t,r){s(e.children,r,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach((function(t,i){s(e.children[r].children,i,t),t.Representation_asArray&&t.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(t,n){s(e.children[r].children[i].children,n,t)}))}))}))}(t)},getForPath:function(t){var n=e,r=[n.data];return t&&t.forEach((function(t){(n=n.children[t])&&r.push(n.data)})),r.filter((function(t){return t.baseUrls.length}))},invalidateSelectedIndexes:function(t){!function t(n,r){var i=r||e;n(i.data),i.children&&i.children.forEach((function(e){return t(n,e)}))}((function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)}))},setConfig:function(t){t.adapter&&(n=t.adapter)}},u(),t}o.__dashjs_factory_name="BaseURLTreeModel",e.default=i.default.getClassFactory(o)},"./src/streaming/models/CmcdModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/streaming/MediaPlayerEvents.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/dash/models/DashManifestModel.js"),f=n("./src/core/Utils.js");function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(){var t,e,n,o,h,p,g,v,m,y,_=this.context,b=Object(r.default)(_).getInstance(),E=Object(s.default)(_).getInstance();function T(){n={pr:1,nor:null,st:null,sf:null,sid:"".concat(f.default.generateUuid()),cid:null},m={},v={},y={},w()}function S(){w()}function w(){if(p){var t=p.getStreamController();if(t&&"function"==typeof t.getActiveStream){var e=t.getActiveStream();e&&(g=e.getProcessors())}}}function A(t,e){var n,r={},i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t[a]&&(r[a]=t[a])}}catch(o){i.e(o)}finally{i.f()}return r}function x(t){try{return t.type===l.HTTPRequest.MPD_TYPE?((r=C()).ot="m",r):t.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(y.hasOwnProperty(e=t.mediaType)||(y[e]=!1),v.hasOwnProperty(e)||(v[e]=!1),m.hasOwnProperty(e)||(m[e]=!1),function(t){var e,r=C(),i=function(t){try{return parseInt(t.mediaInfo.bitrateList[t.quality].bandwidth/1e3)}catch(e){return null}}(t),a=function(t){try{return isNaN(t.duration)?null:Math.round(1e3*t.duration)}catch(e){return null}}(t),s=function(t){try{return 100*parseInt(o.getThroughputHistory().getSafeAverageThroughput(t)/100)}catch(e){return null}}(t.mediaType),l=function(t){try{var e=n.pr,r=h.getCurrentBufferLevel(t);return isNaN(e)||isNaN(r)?null:100*parseInt(r/e*10)}catch(i){return null}}(t.mediaType),c=D(t.mediaType),_=function(t){try{var e=o.getTopBitrateInfoFor(t);return Math.round(e.bitrate/1e3)}catch(n){return null}}(t.mediaType),b=n.pr,T=function(t){if(g&&0!==g.length){var e,n=d(g);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.getType()===t)return r.probeNextRequest()}}catch(i){n.e(i)}finally{n.f()}}}(t.mediaType);t.mediaType===u.default.VIDEO&&(e="v"),t.mediaType===u.default.AUDIO&&(e="a"),t.mediaType===u.default.TEXT&&(e="application/mp4"===t.mediaInfo.mimeType?"tt":"c");var S=E.get().streaming.cmcd.rtp;return S||(S=function(t){var e=p.getPlaybackRate();e||(e=1);var n=t.quality,r=t.mediaInfo,i=t.duration,a=D(t.mediaType);0===a&&(a=500);var o=r.bitrateList[n].bandwidth*i/1e3/(a/e/1e3),s=E.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(E.get().streaming.cmcd.rtpSafetyFactor)?E.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(o*s/100)+1)}(t)),r.rtp=S,T&&(t.url!==T.url?r.nor=encodeURIComponent(f.default.getRelativeUrl(t.url,T.url)):T.range&&(r.nrr=T.range)),i&&(r.br=i),e&&(r.ot=e),isNaN(a)||(r.d=a),isNaN(s)||(r.mtp=s),isNaN(l)||(r.dl=l),isNaN(c)||(r.bl=c),isNaN(_)||(r.tb=_),isNaN(b)||1===b||(r.pr=b),m[t.mediaType]&&(r.bs=!0,m[t.mediaType]=!1),!v[t.mediaType]&&y[t.mediaType]||(r.su=!0,v[t.mediaType]=!1,y[t.mediaType]=!0),r}(t)):t.type===l.HTTPRequest.INIT_SEGMENT_TYPE?function(){var t=C();return t.ot="i",t.su=!0,t}():t.type===l.HTTPRequest.OTHER_TYPE||t.type===l.HTTPRequest.XLINK_EXPANSION_TYPE?function(){var t=C();return t.ot="o",t}():t.type===l.HTTPRequest.LICENSE?function(t){var e=C();return e.ot="k",e}():null}catch(i){return null}var e,r}function C(){var t={},e=E.get().streaming.cmcd.cid?E.get().streaming.cmcd.cid:n.cid;return t.v=1,t.sid=E.get().streaming.cmcd.sid?E.get().streaming.cmcd.sid:n.sid,t.sid="".concat(t.sid),e&&(t.cid="".concat(e)),isNaN(n.pr)||1===n.pr||null===n.pr||(t.pr=n.pr),n.st&&(t.st=n.st),n.sf&&(t.sf=n.sf),t}function D(t){try{var e=h.getCurrentBufferLevel(t);return isNaN(e)?null:100*parseInt(10*e)}catch(n){return null}}function I(t){try{n.pr=t.playbackRate}catch(e){}}function R(e){try{var r=t.getIsDynamic(e.data),i=e.protocol&&"MSS"===e.protocol?"s":"d";n.st="".concat(r?"l":"v"),n.sf="".concat(i)}catch(a){}}function k(t){try{t.state&&t.mediaType&&t.state===i.default.BUFFER_EMPTY&&(m[t.mediaType]||(m[t.mediaType]=!0),v[t.mediaType]||(v[t.mediaType]=!0))}catch(e){}}function O(){for(var t in m)m.hasOwnProperty(t)&&(m[t]=!0);for(var e in v)v.hasOwnProperty(e)&&(v[e]=!0)}function P(t){try{if(!t)return null;var e=Object.keys(t).sort((function(t,e){return t.localeCompare(e)})),n=e.length,r=e.reduce((function(e,r,i){if("v"===r&&1===t[r])return e;if("string"==typeof t[r]&&"ot"!==r&&"sf"!==r&&"st"!==r){var a=t[r].replace(/"/g,'"');e+="".concat(r,'="').concat(a,'"')}else e+="".concat(r,"=").concat(t[r]);return i<n-1&&(e+=","),e}),"");return(r=r.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(i){return null}}return e={getQueryParameter:function(t){try{if(E.get().streaming.cmcd&&E.get().streaming.cmcd.enabled){var e=x(t),n=P(e);return b.trigger(a.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(r){return null}},getHeaderParameters:function(t){try{if(E.get().streaming.cmcd&&E.get().streaming.cmcd.enabled){var e=x(t),n=A(e,["br","d","ot","tb"]),r=A(e,["bl","dl","mtp","nor","nrr","su"]),i=A(e,["bs","rtp"]),o=A(e,["cid","pr","sf","sid","st","v"]),s={"CMCD-Object":P(n),"CMCD-Request":P(r),"CMCD-Status":P(i),"CMCD-Session":P(o)};return b.trigger(a.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,headers:s}),s}return null}catch(u){return null}},setConfig:function(t){t&&(t.abrController&&(o=t.abrController),t.dashMetrics&&(h=t.dashMetrics),t.playbackController&&(p=t.playbackController))},reset:function(){b.off(i.default.PLAYBACK_RATE_CHANGED,I,this),b.off(i.default.MANIFEST_LOADED,R,this),b.off(i.default.BUFFER_LEVEL_STATE_CHANGED,k,e),b.off(i.default.PLAYBACK_SEEKED,O,e),T()},initialize:function(){b.on(i.default.PLAYBACK_RATE_CHANGED,I,e),b.on(i.default.MANIFEST_LOADED,R,e),b.on(i.default.BUFFER_LEVEL_STATE_CHANGED,k,e),b.on(i.default.PLAYBACK_SEEKED,O,e),b.on(i.default.PERIOD_SWITCH_COMPLETED,S,e)}},t=Object(c.default)(_).getInstance(),T(),e}p.__dashjs_factory_name="CmcdModel",e.default=o.default.getSingletonFactory(p)},"./src/streaming/models/FragmentModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/vo/FragmentRequest.js");function a(t){var e,n,r,a,o=(t=t||{}).eventBus,s=t.events,u=t.dashMetrics,l=t.fragmentLoader,c=t.streamInfo,f=t.type;function d(t){var e;return!!t&&(e=!1,r.some((function(n){if(r=t,a=n,!isNaN(r.index)&&r.startTime===a.startTime&&r.adaptationIndex===a.adaptationIndex&&r.type===a.type||function(t,e){return isNaN(t.index)&&isNaN(e.index)&&t.quality===e.quality}(t,n)||function(t,e){return t.action===i.default.ACTION_COMPLETE&&t.action===e.action}(t,n))return e=!0;var r,a})),e)}function h(t){return isNaN(t.duration)?.25:Math.min(t.duration/8,.5)}function p(t){r=r.filter((function(e){var n=h(e);return isNaN(e.startTime)||void 0!==t&&e.startTime>=t-n}))}function g(t,e){e<=t+.5||(r=r.filter((function(n){var r=h(n);return isNaN(n.startTime)||n.startTime>=e-r||isNaN(n.duration)||n.startTime+n.duration<=t+r})))}function v(t,e,n){for(var r=t.length-1;r>=0;r--){var i=t[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?h(i):n,!isNaN(a)&&!isNaN(o)&&e+n>=a&&e-n<o||isNaN(a)&&isNaN(e))return i}return null}function m(t,e){u.addSchedulingInfo(t,e),u.addRequestsQueue(t.mediaType,a,r)}function y(t){t.sender===l&&(a.splice(a.indexOf(t.request),1),t.response&&!t.error&&r.push(t.request),m(t.request,t.error?"failed":"executed"),o.trigger(s.FRAGMENT_LOADING_COMPLETED,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:c.id,mediaType:f}))}function _(t){t.sender===l&&o.trigger(s.FRAGMENT_LOADING_PROGRESS,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:c.id,mediaType:f})}function b(t){t.sender===l&&o.trigger(s.FRAGMENT_LOADING_ABANDONED,{request:t.request},{streamId:c.id,mediaType:f})}function E(){r=[],a=[]}return e={getStreamId:function(){return c.id},getType:function(){return f},getRequests:function(t){var e=[];return(t?t.state instanceof Array?t.state:[t.state]:[]).forEach((function(n){var i=function(t){var e;switch(t){case"loading":e=a;break;case"executed":e=r;break;default:e=[]}return e}(n);e=e.concat(function(t,e){return e.hasOwnProperty("time")?[v(t,e.time,e.threshold)]:t.filter((function(t){for(var n in e)if("state"!==n&&e.hasOwnProperty(n)&&t[n]!=e[n])return!1;return!0}))}(i,t))})),e},isFragmentLoaded:d,isFragmentLoadedOrPending:function(t){var e,n=!1,r=0;if(!(n=d(t)))for(r=0;r<a.length;r++)t.url===(e=a[r]).url&&t.startTime===e.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:p,removeExecutedRequestsAfterTime:function(t){r=r.filter((function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t}))},syncExecutedRequestsWithBufferedRange:function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=t.length;r<i;r++)g(n,t.start(r)),n=t.end(r);e>0&&g(n,e)}else p()},abortRequests:function(){n.debug("abort requests"),l.abort(),a=[]},executeRequest:function(t){switch(t.action){case i.default.ACTION_DOWNLOAD:m(t,"loading"),a.push(t),function(t){o.trigger(s.FRAGMENT_LOADING_STARTED,{request:t},{streamId:c.id,mediaType:f}),l.load(t)}(t);break;default:n.warn("Unknown request action.")}},reset:function(){o.off(s.LOADING_COMPLETED,y,this),o.off(s.LOADING_DATA_PROGRESS,_,this),o.off(s.LOADING_ABANDONED,b,this),l&&l.reset(),E()},resetInitialSettings:E,addExecutedRequest:function(t){r.push(t)}},n=t.debug.getLogger(e),E(),o.on(s.LOADING_COMPLETED,y,e),o.on(s.LOADING_DATA_PROGRESS,_,e),o.on(s.LOADING_ABANDONED,b,e),e}a.__dashjs_factory_name="FragmentModel";var o=r.default.getClassFactory(a);o.FRAGMENT_MODEL_LOADING="loading",o.FRAGMENT_MODEL_EXECUTED="executed",o.FRAGMENT_MODEL_CANCELED="canceled",o.FRAGMENT_MODEL_FAILED="failed",r.default.updateClassFactory(a.__dashjs_factory_name,o),e.default=o},"./src/streaming/models/LowLatencyThroughputModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js");function a(){var t,e,n=this.context,i={};function a(){e=Object(r.default)(n).getInstance().getLogger(t)}function o(t){for(var e={},n=0,r=0,i=0,a=0,o=t.length,s=0;s<o;++s)n+=t[s].chunkDownloadTimeRelativeMS,r+=t[s].bufferLevel,i+=t[s].chunkDownloadTimeRelativeMS*t[s].bufferLevel,a+=t[s].chunkDownloadTimeRelativeMS*t[s].chunkDownloadTimeRelativeMS;return e.m=(i-n*r/o)/(a-n*n/o),e.b=r/o-e.m*n/o,function(t){return e.m*t+e.b}}function s(t){var e,n=!0,r=t.reduce((function(t,e){return t+e.bufferLevelAtSegmentEnd}),0)/t.length;return t.forEach((function(t){Math.abs(t.bufferLevelAtSegmentEnd/t.bufferLevelAtSegmentStart)<.95&&(n=!1),t.bufferLevelAtSegmentEnd/r<.8&&(n=!1),e?e>t.bitrate&&(n=!1):e=t.bitrate})),n}return t={setup:a,addMeasurement:function(t,e,n,r,a){t&&t.mediaType&&!i[t.mediaType]&&(i[t.mediaType]=[]);var s=t.mediaInfo.bitrateList.find((function(e){return e.id===t.representationId}));i[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:r,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:n.reduce((function(t,e){return t+e.chunkDownloadDurationMS}),0),segmentBytes:n.reduce((function(t,e){return t+e.chunkBytes}),0),bitrate:s&&s.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:e,throughputCapacityDelayMS:a,getEstimatedBufferLevel:o(n.slice(1))}),i[t.mediaType].length>10&&i[t.mediaType].shift()},getThroughputCapacityDelayMS:function(t,e){var n=i[t.mediaType]&&i[t.mediaType].slice(-3);return!n||n.length<3?0:s(n)?e/4>250?250:e/4:0},getEstimatedDownloadDurationMS:function(t){var n=i[t.mediaType].slice(-1).pop(),r=i[t.mediaType].slice(-3),a=n.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;n.bufferLevelAtSegmentStart=n.getEstimatedBufferLevel(a/2),n.bufferLevelAtSegmentEnd=n.getEstimatedBufferLevel(a);var o=s(r),u=o?.6:.8;if(n.isBufferStable&&1.05*n.segDurationMS<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS;if(!o||n.segDurationMS<n.fetchDownloadDurationMS)return.8*n.fetchDownloadDurationMS;if(n.adjustedAvailabilityStartTimeMS<=n.requestTimeMS+n.throughputCapacityDelayMS-n.segDurationMS)return.8*n.fetchDownloadDurationMS;for(var l=n.requestTimeMS+n.throughputCapacityDelayMS-n.adjustedAvailabilityStartTimeMS,c=0,f=0,d=0,h=0;h<n.chunkMeasurements.length;h++){var p=n.chunkMeasurements[h];if(l<f+p.chunkDownloadDurationMS)break;f+=p.chunkDownloadDurationMS,c+=p.chunkBytes,d++}if(l<0&&e.warn("request time was before adjusted availibitly start time"),c&&f&&d>.2*n.chunkMeasurements.length){var g=n.segmentBytes/(c/f);return n.fetchDownloadDurationMS<g?n.fetchDownloadDurationMS*u:g*u}var v=n.bitrate;return n.bitrateList.some((function(t){if(t.bandwidth>n.bitrate)return v=t.bandwidth,!0})),v===n.bitrate?n.fetchDownloadDurationMS*u:u*n.segmentBytes*8*1e3/v}},a(),t}a.__dashjs_factory_name="LowLatencyThroughputModel",e.default=i.default.getSingletonFactory(a)},"./src/streaming/models/ManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function o(){var t,e=this.context,n=Object(r.default)(e).getInstance();return{getValue:function(){return t},setValue:function(e){t=e,e&&n.trigger(i.default.MANIFEST_LOADED,{data:e})}}}o.__dashjs_factory_name="ManifestModel",e.default=a.default.getSingletonFactory(o)},"./src/streaming/models/MediaPlayerModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/UTCTiming.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/constants/Constants.js"),o=n("./src/streaming/rules/abr/ABRRulesCollection.js"),s=n("./src/core/Settings.js"),u=n("./src/streaming/utils/SupervisorTools.js");function l(){var t,e,n,i,l=this.context,c=Object(s.default)(l).getInstance();function f(t){var e;for(e=0;e<i.length;e++)if(i[e].rulename===t)return e;return-1}function d(){if(c.get().streaming.lowLatencyEnabled)return h();var t=c.get().streaming.buffer.stableBufferTime;return t>0?t:c.get().streaming.buffer.fastSwitchEnabled?20:12}function h(){return c.get().streaming.lowLatencyEnabled?c.get().streaming.delay.liveDelay||3:c.get().streaming.delay.liveDelay}function p(t,n){g(t,n);var i=new r.default;i.schemeIdUri=t,i.value=n,e.push(i)}function g(t,n){Object(u.checkParameterType)(t,"string"),Object(u.checkParameterType)(n,"string"),e.forEach((function(r,i){r.schemeIdUri===t&&r.value===n&&e.splice(i,1)}))}return t={getABRCustomRules:function(){return i},addABRCustomRule:function(t,e,n){if("string"!=typeof t||t!==o.default.ABANDON_FRAGMENT_RULES&&t!==o.default.QUALITY_SWITCH_RULES||"string"!=typeof e)throw a.default.BAD_ARGUMENT_ERROR;var r=f(e);-1===r?i.push({type:t,rulename:e,rule:n}):(i[r].type=t,i[r].rule=n)},removeABRCustomRule:function(t){if(t){var e=f(t);-1!==e&&i.splice(e,1)}else i=[]},getStableBufferTime:d,getInitialBufferLevel:function(){var t=c.get().streaming.buffer.initialBufferLevel;return isNaN(t)||t<0?0:Math.min(d(),t)},getRetryAttemptsForType:function(t){var e=isNaN(c.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:c.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryAttempts[t]*e:c.get().streaming.retryAttempts[t]},getRetryIntervalsForType:function(t){var e=isNaN(c.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:c.get().streaming.retryIntervals.lowLatencyReductionFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryIntervals[t]/e:c.get().streaming.retryIntervals[t]},getLiveDelay:h,getLiveCatchupLatencyThreshold:function(){try{var t=c.get().streaming.liveCatchup.latencyThreshold,e=h();if(null!==t&&!isNaN(t))return Math.max(t,e);var n=c.get().streaming.liveCatchup.minDrift,r=!isNaN(e)&&e?isNaN(n)?h():c.get().streaming.liveCatchup.minDrift+h():NaN;return r&&!isNaN(r)?Math.max(4*r,5):NaN}catch(i){return NaN}},addUTCTimingSource:p,removeUTCTimingSource:g,getUTCTimingSources:function(){return e},clearDefaultUTCTimingSources:function(){e=[]},restoreDefaultUTCTimingSources:function(){var t=c.get().streaming.utcSynchronization.defaultTimingSource;p(t.scheme,t.value)},setXHRWithCredentialsForType:function t(e,r){e?n[e]=!!r:Object.keys(n).forEach((function(e){t(e,r)}))},getXHRWithCredentialsForType:function(t){var e=n[t];return void 0===e?n.default:e},getDefaultUtcTimingSource:function(){return c.get().streaming.utcSynchronization.defaultTimingSource},reset:function(){}},e=[],n={default:!1},i=[],t}l.__dashjs_factory_name="MediaPlayerModel",e.default=i.default.getSingletonFactory(l)},"./src/streaming/models/MetricsModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/vo/MetricsList.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/streaming/vo/metrics/RepresentationSwitch.js"),u=n("./src/streaming/vo/metrics/BufferLevel.js"),l=n("./src/streaming/vo/metrics/BufferState.js"),c=n("./src/streaming/vo/metrics/DVRInfo.js"),f=n("./src/streaming/vo/metrics/DroppedFrames.js"),d=n("./src/streaming/vo/metrics/ManifestUpdate.js"),h=n("./src/streaming/vo/metrics/SchedulingInfo.js"),p=n("./src/core/EventBus.js"),g=n("./src/streaming/vo/metrics/RequestsQueue.js"),v=n("./src/core/events/Events.js"),m=n("./src/core/FactoryMaker.js");function y(t){var e,n,m=(t=t||{}).settings,y=this.context,_=Object(p.default)(y).getInstance();function b(){_.trigger(v.default.METRICS_CHANGED)}function E(t){_.trigger(v.default.METRIC_CHANGED,{mediaType:t}),b()}function T(t,e,n){_.trigger(v.default.METRIC_UPDATED,{mediaType:t,metric:e,value:n}),E(t)}function S(t,e,n){_.trigger(v.default.METRIC_ADDED,{mediaType:t,metric:e,value:n}),E(t)}function w(t,e){var r=null;return t?(n.hasOwnProperty(t)?r=n[t]:e||(r=new a.default,n[t]=r),r):r}function A(t,e,n){var r=w(t);null!==r&&(r[e].push(n),r[e].length>m.get().streaming.metrics.maxListDepth&&r[e].shift())}function x(t,e,n){A(t,e,n),S(t,e,n)}return e={clearCurrentMetricsForType:function(t){delete n[t],E(t)},clearAllCurrentMetrics:function(){n={},b()},getMetricsFor:w,addHttpRequest:function t(e,n,r,a,s,u,l,c,f,d,h,p,g,v,m){var y=new o.HTTPRequest;u&&u!==a&&(t(e,null,r,a,s,null,null,c,f,null,null,null,g,null,null),y.actualurl=u),y.tcpid=n,y.type=r,y.url=a,y.range=c,y.trequest=f,y.tresponse=d,y.responsecode=p,y._tfinish=h,y._stream=e,y._mediaduration=g,y._quality=s,y._responseHeaders=v,y._serviceLocation=l,m?m.forEach((function(t){!function(t,e,n,r,i){var a=new o.HTTPRequestTrace;a.s=e,a.d=n,a.b=r,a.t=i,t.trace.push(a),t.interval||(t.interval=0),t.interval+=n}(y,t.s,t.d,t.b,t.t)})):(delete y.interval,delete y.trace),x(e,i.default.HTTP_REQUEST,y)},addRepresentationSwitch:function(t,e,n,r,a){var o=new s.default;o.t=e,o.mt=n,o.to=r,a?o.lto=a:delete o.lto,x(t,i.default.TRACK_SWITCH,o)},addBufferLevel:function(t,e,n){var r=new u.default;r.t=e,r.level=n,x(t,i.default.BUFFER_LEVEL,r)},addBufferState:function(t,e,n){var r=new l.default;r.target=n,r.state=e,x(t,i.default.BUFFER_STATE,r)},addDVRInfo:function(t,e,n,r){var a=new c.default;a.time=e,a.range=r,a.manifestInfo=n,x(t,i.default.DVR_INFO,a)},addDroppedFrames:function(t,e){var n=new f.default,r=w(t).DroppedFrames;e&&(n.time=e.creationTime,n.droppedFrames=e.droppedVideoFrames,r.length>0&&r[r.length-1]==n||x(t,i.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(t,e,n,r,a,o,s,u,l){var c=new h.default;c.mediaType=t,c.t=e,c.type=n,c.startTime=r,c.availabilityStartTime=a,c.duration=o,c.quality=s,c.range=u,c.state=l,x(t,i.default.SCHEDULING_INFO,c)},addRequestsQueue:function(t,e,n){var r=new g.default;r.loadingRequests=e,r.executedRequests=n,w(t).RequestsQueue=r,S(t,i.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(t,e,n,a,o,s,u,l,c,f){var h=new d.ManifestUpdate;h.mediaType=t,h.type=e,h.requestTime=n,h.fetchTime=a,h.availabilityStartTime=o,h.presentationStartTime=s,h.clientTimeOffset=u,h.currentTime=l,h.buffered=c,h.latency=f,A(r.default.STREAM,i.default.MANIFEST_UPDATE,h),S(t,i.default.MANIFEST_UPDATE,h)},updateManifestUpdateInfo:function(t,e){if(t){for(var n in e)t[n]=e[n];T(t.mediaType,i.default.MANIFEST_UPDATE,t)}},addManifestUpdateStreamInfo:function(t,e,n,r,a){if(t){var o=new d.ManifestUpdateStreamInfo;o.id=e,o.index=n,o.start=r,o.duration=a,t.streamInfo.push(o),T(t.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,t)}},addManifestUpdateRepresentationInfo:function(t,e,n,r,a,o,s,u){if(t&&t.representationInfo){var l=new d.ManifestUpdateRepresentationInfo;l.id=e,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,t.representationInfo.push(l),T(t.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,t)}},addPlayList:function(t){t.trace&&Array.isArray(t.trace)?t.trace.forEach((function(t){t.hasOwnProperty("subreplevel")&&!t.subreplevel&&delete t.subreplevel})):delete t.trace,x(r.default.STREAM,i.default.PLAY_LIST,t)},addDVBErrors:function(t){x(r.default.STREAM,i.default.DVB_ERRORS,t)}},n={},e}y.__dashjs_factory_name="MetricsModel",e.default=m.default.getSingletonFactory(y)},"./src/streaming/models/URIFragmentModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/URIFragmentData.js"),i=n("./src/core/FactoryMaker.js");function a(){var t;return{initialize:function(e){if(t=new r.default,!e)return null;var n=e.indexOf("#");if(-1!==n)for(var i=e.substr(n+1).split("&"),a=0,o=i.length;a<o;++a){var s=i[a],u=s.indexOf("=");if(-1!==u){var l=s.substring(0,u);t.hasOwnProperty(l)&&(t[l]=s.substr(u+1))}}},getURIFragmentData:function(){return t}}}a.__dashjs_factory_name="URIFragmentModel",e.default=i.default.getSingletonFactory(a)},"./src/streaming/models/VideoModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/Debug.js"),s=n("./src/streaming/constants/Constants.js"),u=new Map([[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function l(){var t,e,n,r,l=this.context,c=Object(i.default)(l).getInstance(),f=[];function d(){n&&(n.playbackRate=1,n.removeEventListener("canplay",d))}function h(){return f.length>0}function p(){if(n&&h()&&0===n.playbackRate){var t=document.createEvent("Event");t.initEvent("waiting",!0,!1),n.dispatchEvent(t)}}function g(t,e){n&&n.addEventListener(t,e)}function v(t,e){n&&n.removeEventListener(t,e)}function m(){return n?n.readyState:NaN}function y(){return n?n.buffered:null}function _(t,e,r,i,a){if(n)for(var o=0;o<n.textTracks.length;o++)if(n.textTracks[o].kind===t&&(!e||n.textTracks[o].label==e)&&n.textTracks[o].language===r&&n.textTracks[o].isTTML===i&&n.textTracks[o].isEmbedded===a)return n.textTracks[o];return null}function b(t,e){t===s.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||m()>=t?e():function(t,e){g(t,(function n(){v(t,n),e(t)}))}(u.get(t),e)}return t={initialize:function(){c.on(a.default.PLAYBACK_PLAYING,p,this)},setCurrentTime:function(t,e){b(s.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(n){if(n.currentTime===t)return;try{t=e?function(t){var e=y(),n=t,r=9999999999;if(e)for(var i=0;i<e.length;i++){var a=e.start(i),o=e.end(i),s=Math.abs(a-t),u=Math.abs(o-t);if(t>=a&&t<=o)return t;s<r&&(r=s,n=a),u<r&&(r=u,n=o)}return n}(t):t,n.currentTime=t}catch(r){0===n.readyState&&r.code===r.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=t}),400)}}}))},play:function(){if(n){n.autoplay=!0;var t=n.play();t&&t.catch&&"undefined"!=typeof Promise&&t.catch((function(t){"NotAllowedError"===t.name&&c.trigger(a.default.PLAYBACK_NOT_ALLOWED),e.warn("Caught pending play exception - continuing (".concat(t,")"))}))}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:h,isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(!e&&n.readyState<=2&&t>0?n.addEventListener("canplay",d):n.playbackRate=t)},getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(t,e){!function(t,e){e?function(t){null!==t&&n&&!n.seeking&&-1===f.indexOf(t)&&f.push(t)}(t):function(t){var e=f.indexOf(t);null!==t&&-1!==e&&f.splice(e,1)}(t)}(t,e)},getElement:function(){return n},setElement:function(t){if(!(null==t||t&&/^(VIDEO|AUDIO)$/i.test(t.nodeName)))throw"element is not video or audio DOM type!";(n=t)&&(n.preload="auto")},setSource:function(t){n&&(t?n.src=t:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return r},setTTMLRenderingDiv:function(t){(r=t).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},getPlaybackQuality:function(){if(!n)return null;var t="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,e=null;return"getVideoPlaybackQuality"in n?e=n.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),e},addEventListener:g,removeEventListener:v,getReadyState:m,getBufferRange:y,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:_,addTextTrack:function(t,e,r,i,a){if(!n)return null;var o=_(t,e,r,i,a);return o||((o=n.addTextTrack(t,e,r)).isEmbedded=a,o.isTTML=i),o},appendChild:function(t){n&&(n.appendChild(t),void 0!==t.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=t.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function(t){n&&n.removeChild(t)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var t=n.parentNode.host||n.parentNode;return t?n.getBoundingClientRect().top-t.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var t=n.parentNode.host||n.parentNode;return t?n.getBoundingClientRect().left-t.getBoundingClientRect().left:NaN},waitForReadyState:b,reset:function(){c.off(a.default.PLAYBACK_PLAYING,p,this)}},e=Object(o.default)(l).getInstance().getLogger(t),t}l.__dashjs_factory_name="VideoModel",e.default=r.default.getSingletonFactory(l)},"./src/streaming/net/FetchLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Settings.js"),a=n("./src/streaming/constants/Constants.js");function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e,n=this.context,r=(t=t||{}).requestModifier,s=t.lowLatencyThroughputModel,u=t.boxParser,l=Object(i.default)(n).getInstance();function c(t,e){t.reader.read().then(e).catch((function(e){t.onerror&&200===t.response.status&&t.onerror(e)}))}function f(t,e){try{if((t=t.filter((function(n){return n.bytes>e/4/t.length}))).length>1){var n=0,r=(t[t.length-1].ts-t[0].ts)/t.length;return t.forEach((function(e,i){var a=t[i+1];if(a){var o=a.ts-e.ts;n+=o<r?o:0}})),n}return null}catch(i){return null}}return{load:function(t){var n,i=new Date,d=t.request,h=new Headers;if(d.range&&h.append("Range","bytes="+d.range),t.headers)for(var p in t.headers){var g=t.headers[p];g&&h.append(p,g)}d.requestStartDate||(d.requestStartDate=i),r&&r.modifyRequestHeader({setRequestHeader:function(t,e){h.append(t,e)}}),"function"==typeof window.AbortController&&(n=new AbortController,t.abortController=n,n.signal.onabort=t.onabort);var v={method:t.method,headers:h,credentials:t.withCredentials?"include":void 0,signal:n?n.signal:void 0},m=l.get().streaming.abr.fetchThroughputCalculationMode,y=Date.now(),_=0;new Promise((function(t){if(m===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&s&&(_=s.getThroughputCapacityDelayMS(d,1e3*e.getCurrentBufferLevel(d.mediaType))))return setTimeout(t,_);t()})).then((function(){var n=Date.now();fetch(t.url,v).then((function(r){t.response||(t.response={}),t.response.status=r.status,t.response.statusText=r.statusText,t.response.responseURL=r.url,r.ok||t.onerror();var i,l="",h=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(r.headers.keys());try{for(h.s();!(i=h.n()).done;){var p=i.value;l+=p+": "+r.headers.get(p)+"\r\n"}}catch(M){h.e(M)}finally{h.f()}if(t.response.responseHeaders=l,!r.body)return r.arrayBuffer().then((function(e){t.response.response=e,t.progress({loaded:e.byteLength,total:e.byteLength,stream:!1}),t.onload(),t.onend()}));var g,v,b,E=parseInt(r.headers.get("Content-Length"),10),T=0,S=!1,w=new Uint8Array,A=0;if(m===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&s){var x=n,C=0,D=function(t){if(Array.isArray(t))return t}(b=r.body.tee())||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),2!==n.length);r=!0);}catch(M){i=!0,a=M}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(b)||o(b,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=D[1];g=D[0].getReader(),v=[],g.read().then((function r(i){var a=i.value,o=i.done;if(C=Date.now(),a&&a.length){var u=C-x,c=a.length;v.push({chunkDownloadTimeRelativeMS:C-n,chunkDownloadDurationMS:u,chunkBytes:c,kbps:Math.round(8*c/(u/1e3)),bufferLevel:e.getCurrentBufferLevel(d.mediaType)})}if(o){var f=C-n,h=v.reduce((function(t,e){return t+e.chunkBytes}),0);return s.addMeasurement(d,f,v,y,_,l),void t.progress({loaded:h,total:h,lengthComputable:!0,time:s.getEstimatedDownloadDurationMS(d),stream:!0})}return x=Date.now(),g.read().then(r)})),t.reader=I.getReader()}else t.reader=r.body.getReader();var R=[],k=[],O=[],P=!0;c(t,(function e(n){var r=n.value;if(n.done){if(w){if(m!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null;m===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(i=function(t,e){try{var n,r;n=t.filter((function(e,n){return n<t.length-1})),r=e.filter((function(t,n){return n<e.length-1}));var i=[];if(n.length>1){for(var a=0,o=0,s=0;s<n.length;s++)if(n[s]&&r[s]){var u=r[s].ts-n[s].ts;if(u>1)i.push(8*r[s].bytes/u);else{0===o&&(o=n[s].ts);var l=r[s].ts-o;l>1?(i.push(8*a/l),a=0,o=0):a+=r[s].bytes}}if(i.length>0)return i.reduce((function(t,e){return t+e}),0)/i.length}return null}catch(c){return null}}(k,O)),t.progress({loaded:T,total:isNaN(E)?T:E,lengthComputable:!0,time:f(R,T),throughput:i,stream:!0})}t.response.response=w.buffer}return t.onload(),void t.onend()}if(r&&r.length>0){w=function(t,e){if(0===t.length)return e;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}(w,r),T+=r.length,R.push({ts:Date.now(),bytes:r.length}),m===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&P&&u.findLastTopIsoBoxCompleted(["moof"],w,A).found&&(P=!1,k.push({ts:performance.now(),bytes:r.length}));var o=u.findLastTopIsoBoxCompleted(["moov","mdat"],w,A);if(o.found){var s,l=o.lastCompletedOffset+o.size;m!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||P||(P=!0,O.push({ts:performance.now(),bytes:w.length})),l===w.length?(s=w,w=new Uint8Array):(s=new Uint8Array(w.subarray(0,l)),w=w.subarray(l)),t.progress({data:s.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=o.lastCompletedOffset,S||(t.progress({lengthComputable:!1,noTrace:!0}),S=!0)}c(t,e)}))})).catch((function(e){t.onerror&&t.onerror(e)}))}))},abort:function(t){if(t.abortController)t.abortController.abort();else if(t.reader)try{t.reader.cancel(),t.onabort()}catch(e){}},calculateDownloadedTime:f,setup:function(t){e=t.dashMetrics}}}u.__dashjs_factory_name="FetchLoader";var l=r.default.getClassFactory(u);e.default=l},"./src/streaming/net/HTTPLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/net/XHRLoader.js"),i=n("./src/streaming/net/FetchLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/models/CmcdModel.js"),l=n("./src/core/Utils.js"),c=n("./src/core/Debug.js"),f=n("./src/core/EventBus.js"),d=n("./src/core/events/Events.js"),h=n("./src/core/Settings.js"),p=n("./src/streaming/constants/Constants.js"),g=n("./src/streaming/models/LowLatencyThroughputModel.js");function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e,n,o,m,y,_,b,E,T,S=this.context,w=(t=t||{}).errHandler,A=t.dashMetrics,x=t.mediaPlayerModel,C=t.requestModifier,D=t.boxParser,I=t.errors,R=t.requestTimeout||0,k=Object(f.default)(S).getInstance(),O=Object(h.default)(S).getInstance();return e={load:function(t){t.request?function t(e,u){var c,f=e.request,h=[],g=!0,v=!0,T=new Date,I=T,P=0;if(!C||!A||!w)throw new Error("config object is not correct or missing");var M,L=function(t){if(v=!1,f.requestStartDate=T,f.requestEndDate=new Date,f.firstByteDate=f.firstByteDate||T,!f.checkExistenceOnly){var e=c.response?c.response.responseURL:null,n=c.response?c.response.status:null,r=c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:[];A.addHttpRequest(f,e,n,r,t?h:null),f.type===a.HTTPRequest.MPD_TYPE&&A.addManifestUpdate(f)}},N=function(){if(-1!==n.indexOf(c)&&(n.splice(n.indexOf(c),1),v))if(L(!1),u>0){try{O.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&f.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&x.getRetryAttemptsForType(a.HTTPRequest.MEDIA_SEGMENT_TYPE)===u&&k.trigger(d.default.ATTEMPT_BACKGROUND_SYNC)}catch(i){}u--;var r={config:e};m.push(r),r.timeout=setTimeout((function(){-1!==m.indexOf(r)&&(m.splice(m.indexOf(r),1),t(e,u))}),x.getRetryIntervalsForType(f.type))}else{if(f.type===a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;w.error(new s.default(y[f.type],f.url+" is not available",{request:f,response:c.response})),e.error&&e.error(f,"error",c.response.statusText),e.complete&&e.complete(f,c.response.statusText)}};O.get().streaming.lowLatencyEnabled&&window.fetch&&"arraybuffer"===f.responseType&&f.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?(M=Object(i.default)(S).create({requestModifier:C,lowLatencyThroughputModel:b,boxParser:D})).setup({dashMetrics:A}):M=Object(r.default)(S).create({requestModifier:C});var F=null,j=C.modifyRequestURL(f.url);if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled){var B=O.get().streaming.cmcd.mode;if(B===p.default.CMCD_MODE_QUERY){var U=function(t){try{var e=[],n=_.getQueryParameter(t);return n&&e.push(n),e}catch(r){return[]}}(f);j=l.default.addAditionalQueryParameterToUrl(j,U)}else B===p.default.CMCD_MODE_HEADER&&(F=_.getHeaderParameters(f))}f.url=j;var V=f.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,G=x.getXHRWithCredentialsForType(f.type);c={url:j,method:V,withCredentials:G,request:f,onload:function(){c.response.status>=200&&c.response.status<=299&&(L(!0),e.success&&e.success(c.response.response,c.response.statusText,c.response.responseURL),e.complete&&e.complete(f,c.response.statusText))},onend:N,onerror:N,progress:function(t){var n=new Date;g&&(g=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(f.firstByteDate=n)),t.lengthComputable&&(f.bytesLoaded=t.loaded,f.bytesTotal=t.total),t.noTrace||(h.push({s:I,d:t.time?t.time:n.getTime()-I.getTime(),b:[t.loaded?t.loaded-P:0],t:t.throughput}),I=n,P=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(f)},ontimeout:function(t){var e;e=t.lengthComputable?"Request timeout: loaded: "+t.loaded+", out of: "+t.total+" : "+(t.loaded/t.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",E.warn(e)},loader:M,timeout:R,headers:F};var H=(new Date).getTime();if(isNaN(f.delayLoadingTime)||H>=f.delayLoadingTime)n.push(c),M.load(c);else{var Y={httpRequest:c};o.push(Y),Y.delayTimeout=setTimeout((function(){if(-1!==o.indexOf(Y)){o.splice(o.indexOf(Y),1);try{T=new Date,I=T,n.push(Y.httpRequest),M.load(Y.httpRequest)}catch(t){Y.httpRequest.onerror()}}}),f.delayLoadingTime-H)}}(t,x.getRetryAttemptsForType(t.request.type)):t.error&&t.error(t.request,"error")},abort:function(){m.forEach((function(t){clearTimeout(t.timeout),t.config.request&&t.config.abort&&t.config.abort(t.config.request)})),m=[],o.forEach((function(t){return clearTimeout(t.delayTimeout)})),o=[],n.forEach((function(t){t.request.type!==a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(t.onloadend=t.onerror=t.onprogress=void 0,t.loader.abort(t))})),n=[]}},E=Object(c.default)(S).getInstance().getLogger(e),n=[],o=[],m=[],_=Object(u.default)(S).getInstance(),b=Object(g.default)(S).getInstance(),v(T={},a.HTTPRequest.MPD_TYPE,I.DOWNLOAD_ERROR_ID_MANIFEST_CODE),v(T,a.HTTPRequest.XLINK_EXPANSION_TYPE,I.DOWNLOAD_ERROR_ID_XLINK_CODE),v(T,a.HTTPRequest.INIT_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),v(T,a.HTTPRequest.MEDIA_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(T,a.HTTPRequest.INDEX_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(T,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(T,a.HTTPRequest.OTHER_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),y=T,e}m.__dashjs_factory_name="HTTPLoader";var y=o.default.getClassFactory(m);e.default=y},"./src/streaming/net/SchemeLoaderFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/HTTPLoader.js");function a(){var t;function e(){t={}}function n(){e()}return n(),{getLoader:function(e){for(var n in t)if(t.hasOwnProperty(n)&&e.startsWith(n))return t[n];return i.default},registerLoader:function(e,n){t[e]=n},unregisterLoader:function(e){t[e]&&delete t[e]},unregisterAllLoader:e,reset:n}}a.__dashjs_factory_name="SchemeLoaderFactory";var o=r.default.getSingletonFactory(a);e.default=o},"./src/streaming/net/URLLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/SchemeLoaderFactory.js");function a(t){t=t||{};var e,n,r=this.context;return e=Object(i.default)(r).getInstance(),{load:function(i){if(!n){var a=e.getLoader(i&&i.request?i.request.url:null);n=a(r).create({errHandler:t.errHandler,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,dashMetrics:t.dashMetrics,boxParser:t.boxParser?t.boxParser:null,constants:t.constants?t.constants:null,dashConstants:t.dashConstants?t.dashConstants:null,urlUtils:t.urlUtils?t.urlUtils:null,requestTimeout:isNaN(t.requestTimeout)?0:t.requestTimeout,errors:t.errors})}n.load(i)},abort:function(){n&&n.abort()}}}a.__dashjs_factory_name="URLLoader";var o=r.default.getClassFactory(a);e.default=o},"./src/streaming/net/XHRLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).requestModifier;return{load:function(t){var n=new Date,r=t.request,i=new XMLHttpRequest;if(i.open(t.method,t.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),e&&(i=e.modifyRequestHeader(i)),t.headers)for(var a in t.headers){var o=t.headers[a];o&&i.setRequestHeader(a,o)}i.withCredentials=t.withCredentials,i.onload=t.onload,i.onloadend=t.onend,i.onerror=t.onerror,i.onprogress=t.progress,i.onabort=t.onabort,i.ontimeout=t.ontimeout,i.timeout=t.timeout,i.send(),t.response=i},abort:function(t){var e=t.response;e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}i.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(i);e.default=a},"./src/streaming/protection/CommonEncryption.js":function(t,e,n){"use strict";n.r(e);var r={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"findCencContentProtection",value:function(t){for(var e=null,n=0;n<t.length;++n){var r=t[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(e=r)}return e}},{key:"getPSSHData",value:function(t){var e=8,n=new DataView(t),r=n.getUint8(e);return e+=20,r>0&&(e+=4+16*n.getUint32(e)),t.slice(e+=4)}},{key:"getPSSHForKeySystem",value:function(e,n){var r=t.parsePSSHList(n);return e&&r.hasOwnProperty(e.uuid.toLowerCase())?r[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(t,e){return"pssh"in t?(t.pssh.__text=t.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),e.decodeArray(t.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(t){if(null==t)return[];for(var e=new DataView(t.buffer||t),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=e.buffer.byteLength)break;if(i=r+e.getUint32(r),1886614376===e.getUint32(r+=4))if(0===(a=e.getUint8(r+=4))||1===a){r++,r+=3,o="";var u=void 0,l=void 0;for(u=0;u<4;u++)o+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,r+=4,n[o=o.toLowerCase()]=e.buffer.slice(s,i),r=i}else r=i;else r=i}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(t,e){try{if(!t||0===t.length)return null;for(var n=0,i=null;n<t.length&&!i;){var a=t[n];if(a&&a.contentProtection&&a.contentProtection.length>0){var o=a.contentProtection.filter((function(t){return t.schemeIdUri&&t.schemeIdUri===e}));if(o&&o.length>0)for(var s=0;s<o.length&&!i;){for(var u=o[s],l=0;l<r.attributes.length&&!i;){for(var c=0,f=r.attributes[l];c<r.prefixes.length&&!i;)u[f]&&u[f].__prefix&&u[f].__prefix===r.prefixes[c]&&u[f].__text&&(i=u[f].__text),c+=1;l+=1}s+=1}}n+=1}return i}catch(d){return null}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}()},"./src/streaming/protection/Protection.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionController.js"),i=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),a=n("./src/streaming/protection/ProtectionEvents.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),u=n("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),l=n("./src/streaming/protection/models/ProtectionModel_01b.js"),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],f=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function d(){var t,e=this.context;function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];if("function"==typeof t[r[Object.keys(r)[0]]])return r}return null}return t={createProtectionSystem:function(a){var o=null,d=Object(i.default)(e).getInstance();d.setConfig({debug:a.debug,BASE64:a.BASE64}),d.initialize();var h=function(r){var i=r.debug,a=i.getLogger(t),o=r.eventBus,d=r.errHandler,h=r.videoModel?r.videoModel.getElement():null;return h&&void 0===h.onencrypted||h&&void 0===h.mediaKeys?n(h,f)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(u.default)(e).create({debug:i,eventBus:o,events:r.events,api:n(h,f)})):n(h,c)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(l.default)(e).create({debug:i,eventBus:o,errHandler:d,events:r.events,api:n(h,c)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(s.default)(e).create({debug:i,eventBus:o,events:r.events}))}(a);return!o&&h&&(o=Object(r.default)(e).create({protectionModel:h,protectionKeyController:d,eventBus:a.eventBus,debug:a.debug,events:a.events,BASE64:a.BASE64,constants:a.constants,cmcdModel:a.cmcdModel,settings:a.settings}),a.capabilities.setEncryptedMediaSupported(!0)),o}}}d.__dashjs_factory_name="Protection";var h=dashjs.FactoryMaker.getClassFactory(d);h.events=a.default,h.errors=o.default,dashjs.FactoryMaker.updateClassFactory(d.__dashjs_factory_name,h),e.default=h},"./src/streaming/protection/ProtectionEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var s=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",t.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",t.KEY_ADDED="public_keyAdded",t.KEY_ERROR="public_keyError",t.KEY_MESSAGE="public_keyMessage",t.KEY_SESSION_CLOSED="public_keySessionClosed",t.KEY_SESSION_CREATED="public_keySessionCreated",t.KEY_SESSION_REMOVED="public_keySessionRemoved",t.KEY_STATUSES_CHANGED="public_keyStatusesChanged",t.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",t.KEY_SYSTEM_SELECTED="public_keySystemSelected",t.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",t.LICENSE_REQUEST_SENDING="public_licenseRequestSending",t.NEED_KEY="needkey",t.PROTECTION_CREATED="public_protectioncreated",t.PROTECTION_DESTROYED="public_protectiondestroyed",t.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",t.TEARDOWN_COMPLETE="protectionTeardownComplete",t.VIDEO_ELEMENT_SELECTED="videoElementSelected",t.KEY_SESSION_UPDATED="public_keySessionUpdated",t}return s}(n("./src/core/events/EventsBase.js").default));e.default=s},"./src/streaming/protection/controllers/ProtectionController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/vo/MediaCapability.js"),a=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/protection/vo/LicenseRequest.js"),l=n("./src/streaming/protection/vo/LicenseResponse.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),f=n("./src/core/Utils.js"),d=n("./src/streaming/constants/Constants.js"),h=n("./src/core/FactoryMaker.js");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){var e,n,h,g,v,m,y,_,b,E,T,S=(t=t||{}).protectionKeyController,w=t.protectionModel,A=t.eventBus,x=t.events,C=t.BASE64,D=t.constants,I=[],R=t.cmcdModel,k=t.settings;function O(){if(!(A&&A.hasOwnProperty("on")&&S&&S.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function P(t,e){b?h.push(t):_?_&&function(t){var e=t.findIndex((function(t){return t.ks===_})),n=t[e];-1!==e&&n.initData&&M(n)}(t):function(t,e){b=!0;var r,i=[];h.push(t);for(var a=0;a<t.length;a++){var u=U(t[a]);i.push({ks:t[a].ks,configs:[u]})}w.requestKeySystemAccess(i).then((function(t){return n.info("DRM: KeySystem Access Granted ("+(r=t.data).keySystem.systemString+")!  Selecting key system..."),w.selectKeySystem(r)})).then((function(t){if(_=t,b=!1,w){A.trigger(x.KEY_SYSTEM_SELECTED,{data:r});var e,n=F(_);n&&n.serverCertificate&&n.serverCertificate.length>0&&w.setServerCertificate(C.decodeArray(n.serverCertificate).buffer);for(var i=0;i<h.length;i++)for(e=0;e<h[i].length;e++)if(_===h[i][e].ks){M(h[i][e]);break}}})).catch((function(t){_=null,b=!1,e||A.trigger(x.KEY_SYSTEM_SELECTED,{data:null,error:new s.default(o.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,o.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)})}))}(t,e)}function M(t){if(S.isClearKey(_)&&t.protData&&t.protData.hasOwnProperty("clearkeys")){var e={kids:Object.keys(t.protData.clearkeys)};t.initData=(new TextEncoder).encode(JSON.stringify(e))}t.sessionId?L(t):null!==t.initData&&N(t)}function L(t){O(),w.loadKeySession(t)}function N(t){var e=r.default.getPSSHForKeySystem(_,t?t.initData:null);if(e){if(function(t){if(!t)return!1;try{for(var e=w.getSessions(),n=0;n<e.length;n++)if(e[n].getKeyId()===t)return!0;return!1}catch(r){return!1}}(t.keyId))return;if(j(e))return;try{t.initData=e,w.createKeySession(t)}catch(n){A.trigger(x.KEY_SESSION_CREATED,{data:null,error:new s.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+n.message)})}}else t&&t.initData?w.createKeySession(t):A.trigger(x.KEY_SESSION_CREATED,{data:null,error:new s.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(_?_.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function F(t){if(t){var e=t.systemString;if(v)return e in v?v[e]:null}return null}function j(t){if(!t)return!1;try{for(var e=w.getAllInitData(),r=0;r<e.length;r++)if(S.initDataEquals(t,e[r]))return n.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(i){return!1}}function B(t){O(),t?(w.setMediaElement(t),A.on(x.NEED_KEY,X,e)):null===t&&(w.setMediaElement(t),A.off(x.NEED_KEY,X,e))}function U(t){var e=t.protData,n=[],r=[],o=e&&e.audioRobustness&&e.audioRobustness.length>0?e.audioRobustness:y,s=e&&e.videoRobustness&&e.videoRobustness.length>0?e.videoRobustness:y,u=t.sessionType,l=e&&e.distinctiveIdentifier?e.distinctiveIdentifier:"optional",c=e&&e.persistentState?e.persistentState:"temporary"===u?"optional":"required";return g.forEach((function(t){t.type===D.AUDIO?n.push(new i.default(t.codec,o)):t.type===D.VIDEO&&r.push(new i.default(t.codec,s))})),new a.default(n,r,l,c,[u])}function V(t){t.error?A.trigger(x.KEY_STATUSES_CHANGED,{data:null,error:t.error}):n.debug("DRM: key status = "+t.status)}function G(t){n.debug("DRM: onKeyMessage");var e=t.data;A.trigger(x.KEY_MESSAGE,{data:e});var i=e.messageType?e.messageType:"license-request",a=e.message,h=e.sessionToken,v=F(_),m=S.getLicenseServerModelInstance(_,v,i),y={sessionToken:h,messageType:i};if(a&&0!==a.byteLength){if(!m)return n.debug("DRM: License server request not required for this message (type = "+t.data.messageType+").  Session ID = "+h.getSessionId()),void H(y);if(S.isClearKey(_)){var b=S.processClearKeyLicenseRequest(_,v,a);if(b)return n.debug("DRM: ClearKey license request handled by application!"),H(y),void w.updateKeySession(h,b)}!function(t,e,i){var a=t.sessionToken,h=t.messageType?t.messageType:"license-request",v={sessionToken:a,messageType:h},m=_?_.systemString:null,y=function(t,e,n,i,a){var o=null,s=i.message;if(t&&t.serverURL){var u=t.serverURL;"string"==typeof u&&""!==u?o=u:"object"===p(u)&&u.hasOwnProperty(e)&&(o=u[e])}else if(t&&t.laURL&&""!==t.laURL)o=t.laURL;else if(!(o=r.default.getLicenseServerUrlFromMediaInfo(g,_.schemeIdURI))&&!S.isClearKey(_)){var l=r.default.getPSSHData(n.initData);(o=_.getLicenseServerURLFromInitData(l))||(o=i.laURL)}return a.getServerURLFromMessage(o,s,e)}(i,h,a,t,e);if(y){var b={},C=!1;i&&Y(b,i.httpRequestHeaders);var D=t.message;Y(b,_.getRequestHeadersFromMessage(D)),Object.keys(b).forEach((function(t){"authorization"===t.toLowerCase()&&(C=!0)})),i&&"boolean"==typeof i.withCredentials&&(C=i.withCredentials);var I=function(t){if(w)if(t.status>=200&&t.status<=299){var n=f.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),r=new l.default(t.responseURL,n,t.response);q(T,r).then((function(){var n=e.getLicenseMessage(r.data,m,h);null!==n?(H(v),w.updateKeySession(a,n)):z(t,v,m,h,e)}))}else z(t,v,m,h,e)},O=function(t){H(v,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+m+' update, XHR aborted. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},P=function(t){H(v,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+m+' update, XHR error. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},M=_.getLicenseRequestFromMessage(D),L=e.getHTTPMethod(h),N=e.getResponseType(m,h),F=i&&!isNaN(i.httpTimeout)?i.httpTimeout:8e3,j=a.getSessionId()||null,B=new u.default(y,L,N,b,C,h,j,M),U=isNaN(k.get().streaming.retryAttempts[c.HTTPRequest.LICENSE])?3:k.get().streaming.retryAttempts[c.HTTPRequest.LICENSE];q(E,B).then((function(){!function t(e,r,i,a,o,s){var u=new XMLHttpRequest;if(k.get().streaming.cmcd&&k.get().streaming.cmcd.enabled&&k.get().streaming.cmcd.mode===d.default.CMCD_MODE_QUERY){var l=R.getQueryParameter({url:e.url,type:c.HTTPRequest.LICENSE});l&&(e.url=f.default.addAditionalQueryParameterToUrl(e.url,[l]))}for(var h in u.open(e.method,e.url,!0),u.responseType=e.responseType,u.withCredentials=e.withCredentials,i>0&&(u.timeout=i),e.headers)u.setRequestHeader(h,e.headers[h]);if(k.get().streaming.cmcd&&k.get().streaming.cmcd.enabled&&k.get().streaming.cmcd.mode===d.default.CMCD_MODE_HEADER){var p=R.getHeaderParameters({url:e.url,type:c.HTTPRequest.LICENSE});if(p)for(var g in p){var v=p[g];v&&u.setRequestHeader(g,v)}}var m=function(){r--;var n=isNaN(k.get().streaming.retryIntervals[c.HTTPRequest.LICENSE])?1e3:k.get().streaming.retryIntervals[c.HTTPRequest.LICENSE];setTimeout((function(){t(e,r,i,a,o,s)}),n)};u.onload=function(){this.status>=200&&this.status<=299||r<=0?a(this):(n.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+r),m())},u.ontimeout=u.onerror=function(){r<=0?s(this):(n.warn("License request network request failed . Retrying it... Pending retries: "+r),m())},u.onabort=function(){o(this)},A.trigger(x.LICENSE_REQUEST_SENDING,{url:e.url,headers:e.headers,payload:e.data,sessionId:e.sessionId}),u.send(e.data)}(B,U,F,I,O,P)}))}else H(v,new s.default(o.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(e,m,v)}else H(y,new s.default(o.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function H(t,e){A.trigger(x.LICENSE_REQUEST_COMPLETE,{data:t,error:e})}function Y(t,e){if(e)for(var n in e)t[n]=e[n]}function z(t,e,n,r,i){var a=t.response?i.getErrorResponse(t.response,n,r):"NONE";H(e,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState+".  Response is "+a))}function q(t,e){return t?t.reduce((function(t,n){return t.then((function(){return n(e)}))}),Promise.resolve()):Promise.resolve()}function X(t,e){if(!k.get().streaming.protection.ignoreEmeEncryptedEvent){if(n.debug("DRM: onNeedKey"),"cenc"!==t.key.initDataType)return void n.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+t.key.initDataType);if(0===g.length&&(n.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(e=void 0===e?1:e+1)<5))return void I.push(setTimeout((function(){X(t,e)}),500));var i=t.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),_){var a=r.default.getPSSHForKeySystem(_,i);if(a&&j(a))return}n.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var o=S.getSupportedKeySystemsFromSegmentPssh(i,v,m);if(0===o.length)return void n.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");P(o,!1)}}return n=t.debug.getLogger(e={initializeForMedia:function(t){if(!t)throw new Error("mediaInfo can not be null or undefined");O(),g.push(t);var e=S.getSupportedKeySystemsFromContentProtection(t.contentProtection,v,m);(e=e.sort((function(t,n){return(v&&v[t.ks.systemString]&&v[t.ks.systemString].priority>=0?v[t.ks.systemString].priority:e.length)-(v&&v[n.ks.systemString]&&v[n.ks.systemString].priority>=0?v[n.ks.systemString].priority:e.length)})))&&e.length>0&&P(e,!0)},clearMediaInfoArray:function(){g=[]},createKeySession:N,loadKeySession:L,removeKeySession:function(t){O(),w.removeKeySession(t)},closeKeySession:function(t){O(),w.closeKeySession(t)},setServerCertificate:function(t){O(),w.setServerCertificate(t)},setMediaElement:B,setSessionType:function(t){m=t},setRobustnessLevel:function(t){y=t},setProtectionData:function(t){v=t,S.setProtectionData(t)},getSupportedKeySystemsFromContentProtection:function(t){return O(),S.getSupportedKeySystemsFromContentProtection(t,v,m)},getKeySystems:function(){return S?S.getKeySystems():[]},setKeySystems:function(t){S&&S.setKeySystems(t)},setLicenseRequestFilters:function(t){E=t},setLicenseResponseFilters:function(t){T=t},stop:function(){w&&w.stop()},reset:function(){A.off(x.INTERNAL_KEY_MESSAGE,G,e),A.off(x.INTERNAL_KEY_STATUS_CHANGED,V,e),O(),E=[],T=[],B(null),_=null,b=!1,w&&(w.reset(),w=null),I.forEach((function(t){return clearTimeout(t)})),I=[],g=[],h=[]}}),h=[],g=[],m="temporary",y="",E=[],T=[],A.on(x.INTERNAL_KEY_MESSAGE,G,e),A.on(x.INTERNAL_KEY_STATUS_CHANGED,V,e),e}g.__dashjs_factory_name="ProtectionController",e.default=h.default.getClassFactory(g)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/drm/KeySystemClearKey.js"),a=n("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),o=n("./src/streaming/protection/drm/KeySystemWidevine.js"),s=n("./src/streaming/protection/drm/KeySystemPlayReady.js"),u=n("./src/streaming/protection/servers/DRMToday.js"),l=n("./src/streaming/protection/servers/PlayReady.js"),c=n("./src/streaming/protection/servers/Widevine.js"),f=n("./src/streaming/protection/servers/ClearKey.js"),d=n("./src/streaming/constants/ProtectionConstants.js");function h(){var t,e,n,h,p,g,v,m=this.context;function y(t,e){return e&&t in e?e[t]:null}function _(t,e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}function b(t,e){return t&&t.sessionType?t.sessionType:e}return t={initialize:function(){var t;h=[],t=Object(s.default)(m).getInstance({BASE64:p}),h.push(t),t=Object(o.default)(m).getInstance({BASE64:p}),h.push(t),t=Object(i.default)(m).getInstance({BASE64:p}),h.push(t),g=t,t=Object(a.default)(m).getInstance({BASE64:p,debug:e}),h.push(t),v=t},setProtectionData:function(t){for(var e,n,r=0;r<h.length;r++){var i=h[r];i.hasOwnProperty("init")&&i.init((e=i.systemString,n=void 0,n=null,t&&(n=e in t?t[e]:null),n))}},isClearKey:function(t){return t===g||t===v},initDataEquals:function(t,e){if(t.byteLength===e.byteLength){for(var n=new Uint8Array(t),r=new Uint8Array(e),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getKeySystems:function(){return h},setKeySystems:function(t){h=t},getKeySystemBySystemString:function(t){for(var e=0;e<h.length;e++)if(h[e].systemString===t)return h[e];return null},getSupportedKeySystemsFromContentProtection:function(t,e,n){var i,a,o,s,u=[];if(t){var l=r.default.findCencContentProtection(t);for(o=0;o<h.length;++o){var c=y((a=h[o]).systemString,e);for(s=0;s<t.length;++s)if((i=t[s]).schemeIdUri.toLowerCase()===a.schemeIdURI){var f=a.getInitData(i,l);u.push({ks:h[o],keyId:i.keyId,initData:f,protData:c,cdmData:a.getCDMData(c?c.cdmData:null),sessionId:_(c,i),sessionType:b(c,n)})}}}return u},getSupportedKeySystemsFromSegmentPssh:function(t,e,n){for(var i,a=[],o=r.default.parsePSSHList(t),s=0;s<h.length;++s){var u=y((i=h[s]).systemString,e);i.uuid in o&&a.push({ks:i,initData:o[i.uuid],protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:_(u),sessionType:b(u,n)})}return a},getLicenseServerModelInstance:function(t,e,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return e&&e.hasOwnProperty("drmtoday")?r=Object(u.default)(m).getInstance({BASE64:p}):t.systemString===d.default.WIDEVINE_KEYSTEM_STRING?r=Object(c.default)(m).getInstance():t.systemString===d.default.PLAYREADY_KEYSTEM_STRING?r=Object(l.default)(m).getInstance():t.systemString===d.default.CLEARKEY_KEYSTEM_STRING&&(r=Object(f.default)(m).getInstance()),r},processClearKeyLicenseRequest:function(t,e,r){try{return t.getClearKeysFromProtectionData(e,r)}catch(i){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(n=(e=r.debug).getLogger(t)),r.BASE64&&(p=r.BASE64))}}}h.__dashjs_factory_name="ProtectionKeyController",e.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),o=n("./src/streaming/constants/ProtectionConstants.js").default.CLEARKEY_KEYSTEM_STRING;function s(t){var e=(t=t||{}).BASE64;return{uuid:"e2719d58-a985-b3c9-781a-b030af78d30e",schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:o,getInitData:function(t,n){try{var r=a.default.parseInitDataFromContentProtection(t,e);if(!r&&n){var i={kids:[function(t){try{var e=t.replace(/-/g,"");return(e=btoa(e.match(/\w{2}/g).map((function(t){return String.fromCharCode(parseInt(t,16))})).join(""))).replace(/=/g,"")}catch(n){return null}}(n["cenc:default_KID"])]};r=(new TextEncoder).encode(JSON.stringify(i))}return r}catch(o){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(t){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){var n=null;if(t){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),o=[],s=0;s<a.kids.length;s++){var u=a.kids[s],l=t.clearkeys&&t.clearkeys.hasOwnProperty(u)?t.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");o.push(new r.default(u,l))}n=new i.default(o)}return n}}}s.__dashjs_factory_name="KeySystemClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js").default.PLAYREADY_KEYSTEM_STRING;function a(t){var e="utf-16",n=(t=t||{}).BASE64;function a(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:i,getInitData:function(t){var e,i,o,s,u,l=new Uint8Array([112,115,115,104,0,0,0,0]),c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),f=0,d=null;if(a(),!t)return null;if("pssh"in t)return r.default.parseInitDataFromContentProtection(t,n);if("pro"in t)d=n.decodeArray(t.pro.__text);else{if(!("prheader"in t))return null;d=n.decodeArray(t.prheader.__text)}return i=4+l.length+c.length+4+(e=d.length),o=new ArrayBuffer(i),s=new Uint8Array(o),(u=new DataView(o)).setUint32(f,i),s.set(l,f+=4),s.set(c,f+=l.length),u.setUint32(f+=c.length,e),s.set(d,f+=4),f+=e,s.buffer},getRequestHeadersFromMessage:function(t){var n,r,i={},a=new DOMParser,o="utf-16"===e?new Uint16Array(t):new Uint8Array(t);n=String.fromCharCode.apply(null,o);for(var s=(r=a.parseFromString(n,"application/xml")).getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset=utf-8"),i},getLicenseRequestFromMessage:function(t){var r=null,i=new DOMParser,o="utf-16"===e?new Uint16Array(t):new Uint8Array(t);a();var s=String.fromCharCode.apply(null,o),u=i.parseFromString(s,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return t;var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return l&&(r=n.decode(l)),r},getLicenseServerURLFromInitData:function(t){if(t)for(var e=new DataView(t),n=e.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=e.getUint16(r,!0),s=e.getUint16(r+=2,!0);if(r+=2,1===o){var u=t.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var f=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(c.getElementsByTagName("LUI_URL")[0]){var d=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(d)return d}}else r+=s}return null},getCDMData:function(t){var e,r,i,o;if(a(),!t)return null;for(e=[],o=0;o<t.length;++o)e.push(t.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),i=[],o=0;o<r.length;++o)i.push(r.charCodeAt(o)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(t){if("utf-8"!==t&&"utf-16"!==t)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');e=t}}}a.__dashjs_factory_name="KeySystemPlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),o=n("./src/streaming/constants/ProtectionConstants.js").default.CLEARKEY_KEYSTEM_STRING;function s(t){var e=t.BASE64,n=t.debug.getLogger(void 0);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:o,getInitData:function(t){return a.default.parseInitDataFromContentProtection(t,e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){var a=null;if(t){for(var o=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),s=[],u=0;u<o.kids.length;u++){var l=o.kids[u],c=t.clearkeys&&t.clearkeys.hasOwnProperty(l)?t.clearkeys[l]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");s.push(new r.default(l,c))}a=new i.default(s),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return a}}}s.__dashjs_factory_name="KeySystemW3CClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js").default.WIDEVINE_KEYSTEM_STRING;function a(t){var e=(t=t||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:i,getInitData:function(t){return r.default.parseInitDataFromContentProtection(t,e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}a.__dashjs_factory_name="KeySystemWidevine",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/errors/ProtectionErrors.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var s=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).MEDIA_KEYERR_CODE=100,t.MEDIA_KEYERR_UNKNOWN_CODE=101,t.MEDIA_KEYERR_CLIENT_CODE=102,t.MEDIA_KEYERR_SERVICE_CODE=103,t.MEDIA_KEYERR_OUTPUT_CODE=104,t.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,t.MEDIA_KEYERR_DOMAIN_CODE=106,t.MEDIA_KEY_MESSAGE_ERROR_CODE=107,t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,t.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,t.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,t.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,t.KEY_SESSION_CREATED_ERROR_CODE=113,t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,t.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",t.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",t.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",t.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",t.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",t.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",t.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",t.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",t.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",t.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",t.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",t}return s}(n("./src/core/errors/ErrorsBase.js").default));e.default=s},"./src/streaming/protection/models/ProtectionModel_01b.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),s=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/protection/errors/ProtectionErrors.js");function c(t){var e,n,c,f,d,h,p,g,v,m=this.context,y=(t=t||{}).eventBus,_=t.events,b=t.api,E=t.errHandler;function T(){c&&A();for(var t=0;t<p.length;t++)S(p[t]);y.trigger(_.TEARDOWN_COMPLETE)}function S(t){try{c[b.cancelKeyRequest](f.systemString,t.sessionId)}catch(e){y.trigger(_.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function w(t,e){if(e&&t){for(var n=t.length,r=0;r<n;r++)if(t[r].sessionId==e)return t[r];return null}return null}function A(){c.removeEventListener(b.keyerror,v),c.removeEventListener(b.needkey,v),c.removeEventListener(b.keymessage,v),c.removeEventListener(b.keyadded,v)}return n=t.debug.getLogger(e={getAllInitData:function(){for(var t=[],e=0;e<h.length;e++)t.push(h[e].initData);for(var n=0;n<p.length;n++)t.push(p[n].initData);return t},getSessions:function(){return p.concat(h)},requestKeySystemAccess:function(t){return new Promise((function(e,n){var r=c;r||(r=document.createElement("video"));for(var i=!1,a=0;a<t.length;a++)for(var o=t[a].ks.systemString,l=t[a].configs,f=null,h=0;h<l.length;h++){var p=l[h].videoCapabilities;if(p&&0!==p.length){f=[];for(var g=0;g<p.length;g++)""!==r.canPlayType(p[g].contentType,o)&&f.push(p[g])}if(f&&(!f||0!==f.length)){i=!0;var v=new s.default(null,f),m=d.getKeySystemBySystemString(o),b=new u.default(m,v);y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:b}),e({data:b});break}}if(!i){var E="Key system access denied! -- No valid audio/video content configurations detected!";y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:E}),n({error:E})}}))},selectKeySystem:function(t){return f=t.keySystem,Promise.resolve(f)},setMediaElement:function(t){if(c!==t){if(c){A();for(var e=0;e<p.length;e++)S(p[e]);p=[]}(c=t)&&(c.addEventListener(b.keyerror,v),c.addEventListener(b.needkey,v),c.addEventListener(b.keymessage,v),c.addEventListener(b.keyadded,v),y.trigger(_.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(t){if(!f)throw new Error("Can not create sessions until you have selected a key system");if(g||0===p.length){var e={sessionId:null,keyId:t.keyId,initData:t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return h.push(e),c[b.generateKeyRequest](f.systemString,new Uint8Array(t.initData)),e}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(t,e){var n=t.sessionId;if(d.isClearKey(f))for(var r=0;r<e.keyPairs.length;r++)c[b.addKey](f.systemString,e.keyPairs[r].key,e.keyPairs[r].keyID,n);else c[b.addKey](f.systemString,new Uint8Array(e),new Uint8Array(t.initData),n);y.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:T,reset:T}),c=null,f=null,h=[],p=[],d=Object(r.default)(m).getInstance(),v={handleEvent:function(t){var e=null;switch(t.type){case b.needkey:var r=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;y.trigger(_.NEED_KEY,{key:new i.default(r,"cenc")});break;case b.keyerror:if((e=w(p,t.sessionId))||(e=w(h,t.sessionId)),e){var s=l.default.MEDIA_KEYERR_CODE,u="";switch(t.errorCode.code){case 1:s=l.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+l.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:s=l.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+l.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:s=l.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+l.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:s=l.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+l.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:s=l.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+l.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:s=l.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+l.default.MEDIA_KEYERR_DOMAIN_MESSAGE}y.trigger(_.KEY_ERROR,{error:new a.default(s,u+="  System Code = "+t.systemCode,e)})}else n.error("No session token found for key error");break;case b.keyadded:(e=w(p,t.sessionId))||(e=w(h,t.sessionId)),e?(n.debug("DRM: Key added."),y.trigger(_.KEY_ADDED,{data:e})):n.debug("No session token found for key added");break;case b.keymessage:if((g=null!=t.sessionId)?!(e=w(p,t.sessionId))&&h.length>0&&(e=h.shift(),p.push(e),e.sessionId=t.sessionId,y.trigger(_.KEY_SESSION_CREATED,{data:e})):h.length>0&&(e=h.shift(),p.push(e),0!==h.length&&E.error(new a.default(l.default.MEDIA_KEY_MESSAGE_ERROR_CODE,l.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),e){var c=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;e.keyMessage=c,y.trigger(_.INTERNAL_KEY_MESSAGE,{data:new o.default(e,c,t.defaultURL)})}else n.warn("No session token found for key message")}}},e}c.__dashjs_factory_name="ProtectionModel_01b",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/constants/ProtectionConstants.js");function c(t){var e,n,c,f,d,h,p,g,v=this.context,m=(t=t||{}).eventBus,y=t.events;function _(t){var e=t.session;return e.removeEventListener("keystatuseschange",t),e.removeEventListener("message",t),e.close()}function b(t){for(var e=0;e<h.length;e++)if(h[e]===t){h.splice(e,1);break}}function E(t){var e,n;return t&&t.length>0&&(t[0]&&("string"==typeof t[0]?e=t[0]:n=t[0]),t[1]&&("string"==typeof t[1]?e=t[1]:n=t[1])),{status:e,keyId:n}}function T(t,e){var r={session:t,keyId:e.keyId,initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,handleEvent:function(t){switch(t.type){case"keystatuseschange":m.trigger(y.KEY_STATUSES_CHANGED,{data:this}),t.target.keyStatuses.forEach((function(){var t=E(arguments);switch(t.status){case"expired":m.trigger(y.INTERNAL_KEY_STATUS_CHANGED,{error:new o.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:m.trigger(y.INTERNAL_KEY_STATUS_CHANGED,t)}}));break;case"message":var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;m.trigger(y.INTERNAL_KEY_MESSAGE,{data:new s.default(this,e,void 0,t.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach((function(){var t=E(arguments);"usable"===t.status&&(e=!0)})),e}};return t.addEventListener("keystatuseschange",r),t.addEventListener("message",r),t.closed.then((function(){b(r),n.debug("DRM: Session closed.  SessionID = "+r.getSessionId()),m.trigger(y.KEY_SESSION_CLOSED,{data:r.getSessionId()})})),h.push(r),r}return e={getAllInitData:function(){for(var t=[],e=0;e<h.length;e++)h[e].initData&&t.push(h[e].initData);return t},getSessions:function(){return h},requestKeySystemAccess:function(t){return new Promise((function(e,n){!function t(e,n,r,i){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var a="Insecure origins are not allowed";return m.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{error:a}),void i({error:a})}var o=e[n].ks,s=e[n].configs,c=o.systemString;c===l.default.PLAYREADY_KEYSTEM_STRING&&"required"===s[0].persistentState&&(c+=".recommendation"),navigator.requestMediaKeySystemAccess(c,s).then((function(t){var e="function"==typeof t.getConfiguration?t.getConfiguration():null,n=new u.default(o,e);n.mksa=t,m.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{data:n}),r({data:n})})).catch((function(a){n+1<e.length?t(e,n+1,r,i):(m.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+a.message}),i({error:"Key system access denied! "+a.message}))}))}(t,0,e,n)}))},selectKeySystem:function(t){return new Promise((function(e,n){t.mksa.createMediaKeys().then((function(e){return c=t.keySystem,d=e,f?f.setMediaKeys(d):Promise.resolve()})).then((function(){e(c)})).catch((function(){n({error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(t){f!==t&&(f&&(f.removeEventListener("encrypted",p),f.setMediaKeys&&f.setMediaKeys(null)),(f=t)&&(f.addEventListener("encrypted",p),f.setMediaKeys&&d&&f.setMediaKeys(d)))},setServerCertificate:function(t){if(!c||!d)throw new Error("Can not set server certificate until you have selected a key system");d.setServerCertificate(t).then((function(){n.info("DRM: License server certificate successfully updated."),m.trigger(y.SERVER_CERTIFICATE_UPDATED)})).catch((function(t){m.trigger(y.SERVER_CERTIFICATE_UPDATED,{error:new o.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+t.name)})}))},createKeySession:function(t){if(!c||!d)throw new Error("Can not create sessions until you have selected a key system");var e=d.createSession(t.sessionType),r=T(e,t);e.generateRequest(c.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(t.initData||t.protData&&t.protData.clearkeys)?l.default.INITIALIZATION_DATA_TYPE_KEYIDS:l.default.INITIALIZATION_DATA_TYPE_CENC,t.initData).then((function(){n.debug("DRM: Session created.  SessionID = "+r.getSessionId()),m.trigger(y.KEY_SESSION_CREATED,{data:r})})).catch((function(t){b(r),m.trigger(y.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+t.name)})}))},updateKeySession:function(t,e){var n=t.session;g.isClearKey(c)&&(e=e.toJWK()),n.update(e).then((function(){m.trigger(y.KEY_SESSION_UPDATED)})).catch((function(e){m.trigger(y.KEY_ERROR,{error:new o.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})}))},loadKeySession:function(t){if(!c||!d)throw new Error("Can not load sessions until you have selected a key system");for(var e=t.sessionId,r=0;r<h.length;r++)if(e===h[r].sessionId)return void n.warn("DRM: Ignoring session ID because we have already seen it!");var i=d.createSession(t.sessionType),s=T(i,t);i.load(e).then((function(t){t?(n.debug("DRM: Session loaded.  SessionID = "+s.getSessionId()),m.trigger(y.KEY_SESSION_CREATED,{data:s})):(b(s),m.trigger(y.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){b(s),m.trigger(y.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(t){t.session.remove().then((function(){n.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),m.trigger(y.KEY_SESSION_REMOVED,{data:t.getSessionId()})}),(function(e){m.trigger(y.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})}))},closeKeySession:function(t){_(t).catch((function(e){b(t),m.trigger(y.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})}))},stop:function(){for(var t,e=0;e<h.length;e++)(t=h[e]).getUsable()||_(t).catch((function(){b(t)}))},reset:function(){var t,e=h.length;0!==e?function(){for(var n=function(t){b(t),0===h.length&&(f?(f.removeEventListener("encrypted",p),f.setMediaKeys(null).then((function(){m.trigger(y.TEARDOWN_COMPLETE)}))):m.trigger(y.TEARDOWN_COMPLETE))},r=0;r<e;r++)!function(e){t.session.closed.then((function(){n(e)})),_(t).catch((function(){n(e)}))}(t=h[r])}():m.trigger(y.TEARDOWN_COMPLETE)}},n=t.debug.getLogger(e),c=null,f=null,d=null,h=[],g=Object(r.default)(v).getInstance(),p={handleEvent:function(t){switch(t.type){case"encrypted":if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;m.trigger(y.NEED_KEY,{key:new i.default(e,t.initDataType)})}}}},e}c.__dashjs_factory_name="ProtectionModel_21Jan2015",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),l=n("./src/streaming/protection/vo/KeySystemAccess.js");function c(t){var e,n,c,f,d,h,p,g,v,m=this.context,y=(t=t||{}).eventBus,_=t.events,b=t.api;function E(){try{for(var t=0;t<p.length;t++)T(p[t]);c&&c.removeEventListener(b.needkey,g),y.trigger(_.TEARDOWN_COMPLETE)}catch(e){y.trigger(_.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function T(t){var e=t.session;e.removeEventListener(b.error,t),e.removeEventListener(b.message,t),e.removeEventListener(b.ready,t),e.removeEventListener(b.close,t);for(var n=0;n<p.length;n++)if(p[n]===t){p.splice(n,1);break}e[b.release]()}function S(){var t=null,e=function(){c.removeEventListener("loadedmetadata",t),c[b.setMediaKeys](d),y.trigger(_.VIDEO_ELEMENT_SELECTED)};c.readyState>=1?e():(t=e.bind(this),c.addEventListener("loadedmetadata",t))}return e={getAllInitData:function(){for(var t=[],e=0;e<p.length;e++)t.push(p[e].initData);return t},getSessions:function(){return p},requestKeySystemAccess:function(t){return new Promise((function(e,n){for(var r=!1,i=0;i<t.length;i++)for(var a=t[i].ks.systemString,o=t[i].configs,s=null,c=null,f=0;f<o.length;f++){var d=o[f].audioCapabilities,h=o[f].videoCapabilities;if(d&&0!==d.length){s=[];for(var p=0;p<d.length;p++)window[b.MediaKeys].isTypeSupported(a,d[p].contentType)&&s.push(d[p])}if(h&&0!==h.length){c=[];for(var g=0;g<h.length;g++)window[b.MediaKeys].isTypeSupported(a,h[g].contentType)&&c.push(h[g])}if(!(!s&&!c||s&&0===s.length||c&&0===c.length)){r=!0;var m=new u.default(s,c),E=v.getKeySystemBySystemString(a),T=new l.default(E,m);y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:T}),e({data:T});break}}if(!r){var S="Key system access denied! -- No valid audio/video content configurations detected!";y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:S}),n({error:S})}}))},selectKeySystem:function(t){return new Promise((function(e,n){try{d=t.mediaKeys=new window[b.MediaKeys](t.keySystem.systemString),f=t.keySystem,h=t,c&&S(),e(f)}catch(r){n({error:"Error selecting keys system ("+f.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(t){c!==t&&(c&&c.removeEventListener(b.needkey,g),(c=t)&&(c.addEventListener(b.needkey,g),d&&S()))},createKeySession:function(t){if(!f||!d||!h)throw new Error("Can not create sessions until you have selected a key system");var e=null;if(h.ksConfiguration.videoCapabilities&&h.ksConfiguration.videoCapabilities.length>0&&(e=h.ksConfiguration.videoCapabilities[0]),null===e&&h.ksConfiguration.audioCapabilities&&h.ksConfiguration.audioCapabilities.length>0&&(e=h.ksConfiguration.audioCapabilities[0]),null===e)throw new Error("Can not create sessions for unknown content types.");var r=d.createSession(e.contentType,new Uint8Array(t.initData),t.cdmData?new Uint8Array(t.cdmData):null),i=function(t,e){return{session:t,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(t){switch(t.type){case b.error:y.trigger(_.KEY_ERROR,{error:new a.default(o.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case b.message:var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;y.trigger(_.INTERNAL_KEY_MESSAGE,{data:new s.default(this,e,t.destinationURL)});break;case b.ready:n.debug("DRM: Key added."),y.trigger(_.KEY_ADDED);break;case b.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),y.trigger(_.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(r,t);r.addEventListener(b.error,i),r.addEventListener(b.message,i),r.addEventListener(b.ready,i),r.addEventListener(b.close,i),p.push(i),n.debug("DRM: Session created.  SessionID = "+i.getSessionId()),y.trigger(_.KEY_SESSION_CREATED,{data:i})},updateKeySession:function(t,e){var n=t.session;v.isClearKey(f)?n.update(new Uint8Array(e.toJWK())):n.update(new Uint8Array(e)),y.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:T,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:E,reset:E},n=t.debug.getLogger(e),c=null,f=null,d=null,h=null,p=[],v=Object(r.default)(m).getInstance(),g={handleEvent:function(t){switch(t.type){case b.needkey:if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;y.trigger(_.NEED_KEY,{key:new i.default(e,"cenc")})}}}},e}c.__dashjs_factory_name="ProtectionModel_3Feb2014",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/servers/ClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js");function a(){return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(t){if(!t.hasOwnProperty("keys"))return null;for(var e=[],n=0;n<t.keys.length;n++){var a=t.keys[n],o=a.kid.replace(/=/g,""),s=a.k.replace(/=/g,"");e.push(new r.default(o,s))}return new i.default(e)},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}a.__dashjs_factory_name="ClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/servers/DRMToday.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/ProtectionConstants.js");function i(t){var e=(t=t||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(t){return e.decodeArray(t.license)},getErrorResponse:function(t){return t}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return n[t].responseType},getLicenseMessage:function(t,r){return function(){if(!e||!e.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(t)},getErrorResponse:function(t,e){return n[e].getErrorResponse(t)}}}i.__dashjs_factory_name="DRMToday",e.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/servers/PlayReady.js":function(t,e,n){"use strict";function r(){var t="http://schemas.xmlsoap.org/soap/envelope/";function e(t){var e=String.fromCharCode.apply(null,new Uint8Array(t));return decodeURIComponent(escape(e))}function n(n){if(window.DOMParser){var r=e(n),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(t,"Envelope")[0]:null,o=a?a.getElementsByTagNameNS(t,"Body")[0]:null;if(o&&o.getElementsByTagNameNS(t,"Fault")[0])return null}return n}function r(n){var r="",i="",a="",o=-1,s=-1;if(window.DOMParser){var u=e(n),l=(new window.DOMParser).parseFromString(u,"text/xml"),c=l?l.getElementsByTagNameNS(t,"Envelope")[0]:null,f=c?c.getElementsByTagNameNS(t,"Body")[0]:null,d=f?f.getElementsByTagNameNS(t,"Fault")[0]:null,h=d?d.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,g=null;if(null===d)return u;r=(g=d.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(i=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,o=(a=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}var v="code: ".concat(i,", name: ").concat(r);return a&&(v+=", message: ".concat(a)),v}return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return n.call(this,t)},getErrorResponse:function(t){return r.call(this,t)}}}n.r(e),r.__dashjs_factory_name="PlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/servers/Widevine.js":function(t,e,n){"use strict";function r(){return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}n.r(e),r.__dashjs_factory_name="Widevine",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=n}var e;return(e=[{key:"toJWK",value:function(){var t,e=this.keyPairs.length,n={keys:[]};for(t=0;t<e;t++)n.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[t].keyID,k:this.keyPairs[t].key});this.type&&(n.type=this.type);var r=JSON.stringify(n),i=r.length,a=new ArrayBuffer(i),o=new Uint8Array(a);for(t=0;t<i;t++)o[t]=r.charCodeAt(t);return a}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/streaming/protection/vo/KeyMessage.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionToken=e,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyID=e,this.key=n}},"./src/streaming/protection/vo/KeySystemAccess.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keySystem=e,this.ksConfiguration=n}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a}},"./src/streaming/protection/vo/LicenseRequest.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i,a,o,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.method=n,this.responseType=r,this.headers=i,this.withCredentials=a,this.messageType=o,this.sessionId=s,this.data=u}},"./src/streaming/protection/vo/LicenseResponse.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.headers=n,this.data=r}},"./src/streaming/protection/vo/MediaCapability.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentType=e,this.robustness=n}},"./src/streaming/protection/vo/NeedKey.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initData=e,this.initDataType=n}},"./src/streaming/rules/DroppedFramesHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t={},e={},n={};return{push:function(r,i,a){if(i){t[r]||(t[r]=[],e[r]=0,n[r]=0);var o=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,s=a&&a.totalVideoFrames?a.totalVideoFrames:0,u=o-e;e[r]=o;var l=s-n;n[r]=s;var c=t[r];isNaN(i)||(c[i]?(c[i].droppedVideoFrames+=u,c[i].totalVideoFrames+=l):c[i]={droppedVideoFrames:u,totalVideoFrames:l})}},getFrameHistory:function(e){return t[e]},clearForStream:function(r){try{delete t[r],delete e[r],delete n[r]}catch(i){}},reset:function(){t={},e={},n={}}}}i.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(i);e.default=a},"./src/streaming/rules/RulesContext.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).abrController,n=t.switchHistory,r=t.droppedFramesHistory,i=t.currentRequest,a=t.useBufferOccupancyABR,o=t.useL2AABR,s=t.useLoLPABR,u=t.streamProcessor?t.streamProcessor.getScheduleController():null,l=t.streamProcessor?t.streamProcessor.getRepresentationInfo():null,c=t.videoModel?t.videoModel:null;function f(){return l?l.mediaInfo:null}return{getMediaType:function(){var t=f();return t?t.type:null},getMediaInfo:f,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var t=f();return t?t.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return e},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}i.__dashjs_factory_name="RulesContext",e.default=r.default.getClassFactory(i)},"./src/streaming/rules/SwitchRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i={DEFAULT:.5,STRONG:1,WEAK:0};function a(t,e,n){return{quality:void 0===t?-1:t,reason:void 0===e?null:e,priority:function(t){var e=i.DEFAULT;return t!==i.DEFAULT&&t!==i.STRONG&&t!==i.WEAK||(e=t),e}(n)}}a.__dashjs_factory_name="SwitchRequest";var o=r.default.getClassFactory(a);o.NO_CHANGE=-1,o.PRIORITY=i,r.default.updateClassFactory(a.__dashjs_factory_name,o),e.default=o},"./src/streaming/rules/SwitchRequestHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js");function a(){var t=[],e=[];return{push:function(n){n.newValue===i.default.NO_CHANGE&&(n.newValue=n.oldValue),t[n.oldValue]||(t[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,a=r<0?1:0,o=a?-r:0,s=a?0:1;if(t[n.oldValue].drops+=a,t[n.oldValue].dropSize+=o,t[n.oldValue].noDrops+=s,e.push({idx:n.oldValue,noDrop:s,drop:a,dropSize:o}),e.length>8){var u=e.shift();t[u.idx].drops-=u.drop,t[u.idx].dropSize-=u.dropSize,t[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return t},reset:function(){t=[],e=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";var o=r.default.getClassFactory(a);e.default=o},"./src/streaming/rules/ThroughputHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js");function a(t){var e,n,i,a,o,s=(t=t||{}).settings;function u(t,e,n,r){var i=Math.pow(.5,n/r.fast);t.fastEstimate=(1-i)*e+i*t.fastEstimate;var a=Math.pow(.5,n/r.slow);t.slowEstimate=(1-a)*e+a*t.slowEstimate,t.totalWeight+=n}function l(t,u,l){return s.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(t,e){var n=t?o.throughputHalfLife:o.latencyHalfLife,r=t?i[e]:a[e];if(!r||r.totalWeight<=0)return NaN;var s=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),u=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return t?Math.min(s,u):Math.max(s,u)}(t,u):function(t,r,i){var a=function(t,r,i){var a,o;if(t?(a=e[r],o=i?3:4):(a=n[r],o=4),a){if(o>=a.length)o=a.length;else if(t)for(var s=1;s<o;++s){var u=a[a.length-s]/a[a.length-s-1];if((u>=1.3||u<=1/1.3)&&(o+=1)===a.length)break}}else o=0;return o}(t,r,i),o=(t?e:n)[r];return 0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce((function(t,e){return t+e}))/o.length:NaN}(t,u,l)}function c(t,e){return l(!0,t,e)}function f(t){e[t]=e[t]||[],n[t]=n[t]||[],i[t]=i[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[t]=a[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function d(){e={},n={},i={},a={}}var h={push:function(t,l,c){if(l.trace&&l.trace.length){var d=l.tresponse.getTime()-l.trequest.getTime()||1,h=l._tfinish.getTime()-l.tresponse.getTime()||1,p=l.trace.reduce((function(t,e){return t+e.b[0]}),0),g=0,v=0;if(s.get().streaming.lowLatencyEnabled){if(s.get().streaming.abr.fetchThroughputCalculationMode===r.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var m=l.trace.reduce((function(t,e){return t+e.t}),0);v=Math.round(m/l.trace.length)}0===v&&(g=l.trace.reduce((function(t,e){return t+e.d}),0))}else g=c?h:d+h;if(0!==g&&(v=Math.round(8*p/g)),f(t),function(t,e,n){return t===r.default.VIDEO?n<s.get().streaming.cacheLoadThresholds[r.default.VIDEO]:t===r.default.AUDIO?n<s.get().streaming.cacheLoadThresholds[r.default.AUDIO]:void 0}(t,0,h)){if(e[t].length>0&&!e[t].hasCachedEntries)return;e[t].hasCachedEntries=!0}else e[t]&&e[t].hasCachedEntries&&function(t){delete e[t],delete n[t],delete i[t],delete a[t],f(t)}(t);e[t].push(v),e[t].length>20&&e[t].shift(),n[t].push(d),n[t].length>20&&n[t].shift(),u(i[t],v,.001*h,o.throughputHalfLife),u(a[t],d,1,o.latencyHalfLife)}},getAverageThroughput:c,getSafeAverageThroughput:function(t,e){var n=c(t,e);return isNaN(n)||(n*=s.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(t){return l(!1,t)},reset:d};return o={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},d(),h}a.__dashjs_factory_name="ThroughputHistory",e.default=i.default.getClassFactory(a)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/abr/ThroughputRule.js"),i=n("./src/streaming/rules/abr/InsufficientBufferRule.js"),a=n("./src/streaming/rules/abr/AbandonRequestsRule.js"),o=n("./src/streaming/rules/abr/DroppedFramesRule.js"),s=n("./src/streaming/rules/abr/SwitchHistoryRule.js"),u=n("./src/streaming/rules/abr/BolaRule.js"),l=n("./src/streaming/rules/abr/L2ARule.js"),c=n("./src/streaming/rules/abr/lolp/LoLpRule.js"),f=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/constants/Constants.js");function p(t){var e,n,f=this.context,p=(t=t||{}).mediaPlayerModel,g=t.dashMetrics,v=t.settings;function m(t){return t.filter((function(t){return t.quality>d.default.NO_CHANGE}))}function y(t){var e,n,r,i,a,o={},s=null;if(0!==t.length){for(o[d.default.PRIORITY.STRONG]={quality:d.default.NO_CHANGE,reason:null},o[d.default.PRIORITY.WEAK]={quality:d.default.NO_CHANGE,reason:null},o[d.default.PRIORITY.DEFAULT]={quality:d.default.NO_CHANGE,reason:null},e=0,n=t.length;e<n;e+=1)(r=t[e]).quality!==d.default.NO_CHANGE&&(o[r.priority].quality===d.default.NO_CHANGE||o[r.priority].quality>r.quality)&&(o[r.priority].quality=r.quality,o[r.priority].reason=r.reason||null);return o[d.default.PRIORITY.WEAK].quality!==d.default.NO_CHANGE&&(s=o[d.default.PRIORITY.WEAK]),o[d.default.PRIORITY.DEFAULT].quality!==d.default.NO_CHANGE&&(s=o[d.default.PRIORITY.DEFAULT]),o[d.default.PRIORITY.STRONG].quality!==d.default.NO_CHANGE&&(s=o[d.default.PRIORITY.STRONG]),s&&(i=s.quality,a=s.reason),Object(d.default)(f).create(i,a)}}return{initialize:function(){e=[],n=[],v.get().streaming.abr.useDefaultABRRules&&(v.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_L2A?e.push(Object(l.default)(f).create({dashMetrics:g,mediaPlayerModel:p,settings:v})):v.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_LoLP?e.push(Object(c.default)(f).create({dashMetrics:g})):(e.push(Object(u.default)(f).create({dashMetrics:g,mediaPlayerModel:p,settings:v})),e.push(Object(r.default)(f).create({dashMetrics:g})),v.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&e.push(Object(i.default)(f).create({dashMetrics:g,settings:v})),v.get().streaming.abr.additionalAbrRules.switchHistoryRule&&e.push(Object(s.default)(f).create()),v.get().streaming.abr.additionalAbrRules.droppedFramesRule&&e.push(Object(o.default)(f).create()),v.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push(Object(a.default)(f).create({dashMetrics:g,mediaPlayerModel:p,settings:v})))),p.getABRCustomRules().forEach((function(t){"qualitySwitchRules"===t.type&&e.push(t.rule(f).create()),"abandonFragmentRules"===t.type&&n.push(t.rule(f).create())}))},reset:function(){[e,n].forEach((function(t){t&&t.length&&t.forEach((function(t){return t.reset&&t.reset()}))})),e=[],n=[]},getMaxQuality:function(t){return y(m(e.map((function(e){return e.getMaxIndex(t)}))))||Object(d.default)(f).create()},getMinSwitchRequest:y,shouldAbandonFragment:function(t,e){return y(m(n.map((function(n){return n.shouldAbandon(t,e)}))))||Object(d.default)(f).create()},getQualitySwitchRules:function(){return e}}}p.__dashjs_factory_name="ABRRulesCollection";var g=f.default.getClassFactory(p);g.QUALITY_SWITCH_RULES="qualitySwitchRules",g.ABANDON_FRAGMENT_RULES="abandonFragmentRules",f.default.updateSingletonFactory(p.__dashjs_factory_name,g),e.default=g},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/SwitchRequest.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js");function o(t){var e,n,i,s,u,l=this.context,c=(t=t||{}).mediaPlayerModel,f=t.dashMetrics,d=t.settings;function h(){i={},s={},u=[]}return e={shouldAbandon:function(t){var e=Object(r.default)(l).create(r.default.NO_CHANGE,{name:o.__dashjs_factory_name});if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getCurrentRequest")&&t.hasOwnProperty("getRepresentationInfo")&&t.hasOwnProperty("getAbrController")))return e;var a,h,p=t.getMediaInfo(),g=t.getMediaType(),v=t.getStreamInfo(),m=v?v.id:null,y=t.getCurrentRequest();if(!isNaN(y.index)){h=y.index,i[a=g]=i[a]||{},i[a][h]=i[a][h]||{};var _=c.getStableBufferTime();if(f.getCurrentBufferLevel(g)>_)return e;var b=i[g][y.index];if(null===b||null===y.firstByteDate||s.hasOwnProperty(b.id))return e;if(void 0===b.firstByteTime&&(u[g]=[],b.firstByteTime=y.firstByteDate.getTime(),b.segmentDuration=y.duration,b.bytesTotal=y.bytesTotal,b.id=y.index),b.bytesLoaded=y.bytesLoaded,b.elapsedTime=(new Date).getTime()-b.firstByteTime,b.bytesLoaded>0&&b.elapsedTime>0&&function(t,e){u[t]=u[t]||[],u[t].push(e)}(g,Math.round(8*b.bytesLoaded/b.elapsedTime)),u[g].length>=5&&b.elapsedTime>500&&b.bytesLoaded<b.bytesTotal){var E=u[g].reduce((function(t,e){return t+e}),0);if(b.measuredBandwidthInKbps=Math.round(E/u[g].length),b.estimatedTimeOfDownload=+(8*b.bytesTotal/b.measuredBandwidthInKbps/1e3).toFixed(2),b.estimatedTimeOfDownload<1.8*b.segmentDuration||0===t.getRepresentationInfo().quality)return e;if(!s.hasOwnProperty(b.id)){var T=t.getAbrController(),S=b.bytesTotal-b.bytesLoaded,w=T.getBitrateList(p),A=T.getQualityForBitrate(p,b.measuredBandwidthInKbps*d.get().streaming.abr.bandwidthSafetyFactor,m),x=T.getMinAllowedIndexFor(g,m),C=void 0!==x?Math.max(x,A):A;S>b.bytesTotal*w[C].bitrate/w[T.getQualityFor(g,m)].bitrate&&(e.quality=C,e.reason.throughput=b.measuredBandwidthInKbps,e.reason.fragmentID=b.id,s[b.id]=b,n.debug("["+g+"] frag id",b.id," is asking to abandon and switch to quality to ",C," measured bandwidth was",b.measuredBandwidthInKbps),delete i[g][b.id])}}else b.bytesLoaded===b.bytesTotal&&delete i[g][b.id]}return e},reset:h},n=Object(a.default)(l).getInstance().getLogger(e),h(),e}o.__dashjs_factory_name="AbandonRequestsRule",e.default=i.default.getClassFactory(o)},"./src/streaming/rules/abr/BolaRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/MediaPlayerEvents.js");function f(t){var e,n,a,f=this.context,d=(t=t||{}).dashMetrics,h=t.mediaPlayerModel,p=Object(s.default)(f).getInstance();function g(t,e,n){var r=n.reduce((function(t,e,r){return e>n[t]?r:t}),0);if(0===r)return null;var i=Math.max(t,10+2*e.length),a=(n[r]-1)/(i/10-1);return{gp:a,Vp:10/a}}function v(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function m(t,e){var n=h.getStableBufferTime();if(t.stableBufferTime!==n){var r=g(n,t.bitrates,t.utilities);if(r.Vp!==t.Vp||r.gp!==t.gp){var i=d.getCurrentBufferLevel(e),a=i+t.placeholderBuffer;a-=10,a*=r.Vp/t.Vp,a+=10,t.stableBufferTime=n,t.Vp=r.Vp,t.gp=r.gp,t.placeholderBuffer=Math.max(0,a-i)}}}function y(t,e){return t.Vp*(t.utilities[e]+t.gp)}function _(t,e){for(var n=t.bitrates[e],r=t.utilities[e],i=0,a=e-1;a>=0;--a)if(t.utilities[a]<t.utilities[e]){var o=t.bitrates[a];i=Math.max(i,t.Vp*(t.gp+(n*t.utilities[a]-o*r)/(n-o)))}return i}function b(){for(var t in a)a.hasOwnProperty(t)&&2===a[t].state&&(a[t].placeholderBuffer=0)}function E(){for(var t in a)if(a.hasOwnProperty(t)){var e=a[t];0!==e.state&&(e.state=1,v(e))}}function T(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=a[t.chunk.mediaInfo.type];if(e&&0!==e.state){var n=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||n>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=n,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=n,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,w(e,t.chunk.mediaInfo.type)}}}function S(t){if(t&&t.metric===r.default.HTTP_REQUEST&&t.value&&t.value.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=a[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),w(e,t.mediaType))}}function w(t,e){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=.99,!isNaN(t.lastSegmentFinishTimeMs)){var n=d.getCurrentBufferLevel(e)+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),r=y(t,t.lastQuality),i=Math.max(0,r-n);t.placeholderBuffer=Math.min(i,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function A(t){if(t){var e=a[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function x(t){if(t){var e=a[t.mediaType];if(e&&0!==e.state){var n,r=d.getCurrentBufferLevel(t.mediaType);n=e.abrQuality>0?_(e,e.abrQuality):10;var i=Math.max(0,n-r);e.placeholderBuffer=Math.min(e.placeholderBuffer,i)}}}function C(){a={}}return e={getMaxIndex:function(t){var e=Object(i.default)(f).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useBufferOccupancyABR")))return e;var r=t.getMediaInfo(),o=t.getMediaType(),s=t.getScheduleController(),u=t.getStreamInfo(),l=t.getAbrController(),c=l.getThroughputHistory(),p=u?u.id:null,b=u&&u.manifestInfo&&u.manifestInfo.isDynamic,E=t.useBufferOccupancyABR();if(e.reason=e.reason||{},!E)return e;s.setTimeToLoadDelay(0);var T=function(t){var e=t.getMediaType(),n=a[e];return n?0!==n.state&&m(n,e):(n=function(t){var e={},n=t.getMediaInfo().bitrateList.map((function(t){return t.bandwidth})),r=function(t){return t.map((function(t){return Math.log(t)}))}(n);r=r.map((function(t){return t-r[0]+1}));var i=h.getStableBufferTime(),a=g(i,n,r);return a?(e.state=1,e.bitrates=n,e.utilities=r,e.stableBufferTime=i,e.Vp=a.Vp,e.gp=a.gp,e.lastQuality=0,v(e)):e.state=0,e}(t),a[e]=n),n}(t);if(0===T.state)return e;var S,w=d.getCurrentBufferLevel(o),A=c.getAverageThroughput(o,b),x=c.getSafeAverageThroughput(o,b),C=c.getAverageLatency(o);if(e.reason.state=T.state,e.reason.throughput=A,e.reason.latency=C,isNaN(A))return e;switch(T.state){case 1:S=l.getQualityForBitrate(r,x,p,C),e.quality=S,e.reason.throughput=x,T.placeholderBuffer=Math.max(0,_(T,S)-w),T.lastQuality=S,!isNaN(T.lastSegmentDurationS)&&w>=T.lastSegmentDurationS&&(T.state=2);break;case 2:!function(t,e){var n=Date.now();isNaN(t.lastSegmentFinishTimeMs)?isNaN(t.lastCallTimeMs)||(t.placeholderBuffer+=Math.max(0,.001*(n-t.lastCallTimeMs))):t.placeholderBuffer+=Math.max(0,.001*(n-t.lastSegmentFinishTimeMs)),t.lastCallTimeMs=n,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,m(t,e)}(T,o),S=function(t,e){for(var n=t.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(t.Vp*(t.utilities[a]+t.gp)-e)/t.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}(T,w+T.placeholderBuffer);var D=l.getQualityForBitrate(r,x,p,C);S>T.lastQuality&&S>D&&(S=Math.max(D,T.lastQuality));var I=Math.max(0,w+T.placeholderBuffer-y(T,S));I<=T.placeholderBuffer?(T.placeholderBuffer-=I,I=0):(I-=T.placeholderBuffer,T.placeholderBuffer=0,S<l.getMaxAllowedIndexFor(o,p)?s.setTimeToLoadDelay(1e3*I):I=0),e.quality=S,e.reason.throughput=A,e.reason.latency=C,e.reason.bufferLevel=w,e.reason.placeholderBuffer=T.placeholderBuffer,e.reason.delay=I,T.lastQuality=S;break;default:n.debug("BOLA ABR rule invoked in bad state."),e.quality=l.getQualityForBitrate(r,x,p,C),e.reason.state=T.state,e.reason.throughput=x,e.reason.latency=C,T.state=1,v(T)}return e},reset:function(){C(),p.off(c.default.BUFFER_EMPTY,b,e),p.off(c.default.PLAYBACK_SEEKING,E,e),p.off(c.default.METRIC_ADDED,S,e),p.off(c.default.QUALITY_CHANGE_REQUESTED,A,e),p.off(c.default.FRAGMENT_LOADING_ABANDONED,x,e),p.off(u.default.MEDIA_FRAGMENT_LOADED,T,e)}},n=Object(l.default)(f).getInstance().getLogger(e),C(),p.on(c.default.BUFFER_EMPTY,b,e),p.on(c.default.PLAYBACK_SEEKING,E,e),p.on(c.default.METRIC_ADDED,S,e),p.on(c.default.QUALITY_CHANGE_REQUESTED,A,e),p.on(c.default.FRAGMENT_LOADING_ABANDONED,x,e),p.on(u.default.MEDIA_FRAGMENT_LOADED,T,e),e}f.__dashjs_factory_name="BolaRule",e.default=a.default.getClassFactory(f)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/Debug.js");function o(){var t,e,n=this.context;return t={getMaxIndex:function(t){var r=Object(i.default)(n).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return r;var a=t.getDroppedFramesHistory(),o=t.getStreamInfo().id;if(a){var s=a.getFrameHistory(o);if(!s||0===s.length)return r;for(var u=0,l=0,c=i.default.NO_CHANGE,f=1;f<s.length;f++)if(s[f]&&(u=s[f].droppedVideoFrames,(l=s[f].totalVideoFrames)>375&&u/l>.15)){e.debug("index: "+(c=f-1)+" Dropped Frames: "+u+" Total Frames: "+l);break}return Object(i.default)(n).create(c,{droppedFrames:u})}return r}},e=Object(a.default)(n).getInstance().getLogger(t),t}o.__dashjs_factory_name="DroppedFramesRule",e.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js"),s=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function f(t){t=t||{};var e,n,a,f=this.context,d=Object(r.default)(f).getInstance(),h=t.dashMetrics,p=t.settings;function g(){(a={})[u.default.VIDEO]={ignoreCount:2},a[u.default.AUDIO]={ignoreCount:2}}function v(){g()}function m(t){isNaN(t.startTime)||t.mediaType!==u.default.AUDIO&&t.mediaType!==u.default.VIDEO||a[t.mediaType].ignoreCount>0&&a[t.mediaType].ignoreCount--}return e={getMaxIndex:function(t){var e=Object(s.default)(f).create();if(!t||!t.hasOwnProperty("getMediaType"))return e;!function(){if(!h||!h.hasOwnProperty("getCurrentBufferLevel")||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r=t.getMediaType(),i=h.getCurrentBufferState(r),o=t.getRepresentationInfo().fragmentDuration,c=t.getStreamInfo(),d=c?c.id:null,g=c&&c.manifestInfo&&c.manifestInfo.isDynamic;if(function(t){return!p.get().streaming.lowLatencyEnabled&&a[t].ignoreCount>0}(r)||!o)return e;if(i&&i.state===l.default.BUFFER_EMPTY)n.debug("["+r+"] Switch to index 0; buffer is empty."),e.quality=0,e.reason="InsufficientBufferRule: Buffer is empty";else{var v=t.getMediaInfo(),m=t.getAbrController(),y=m.getThroughputHistory(),_=h.getCurrentBufferLevel(r),b=y.getAverageThroughput(r,g),E=y.getAverageLatency(r);e.quality=m.getQualityForBitrate(v,b*(_/o)*.5,d,E),e.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return e},reset:function(){g(),d.off(c.default.PLAYBACK_SEEKING,v,e),d.off(i.default.BYTES_APPENDED_END_FRAGMENT,m,e)}},n=Object(o.default)(f).getInstance().getLogger(e),g(),d.on(c.default.PLAYBACK_SEEKING,v,e),d.on(i.default.BYTES_APPENDED_END_FRAGMENT,m,e),e}f.__dashjs_factory_name="InsufficientBufferRule",e.default=a.default.getClassFactory(f)},"./src/streaming/rules/abr/L2ARule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/constants/Constants.js");function f(t){var e,n,a,f,d=this.context,h=(t=t||{}).dashMetrics,p=Object(s.default)(d).getInstance();function g(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function v(){for(var t in n)if(n.hasOwnProperty(t)){var e=n[t];0!==e.state&&(e.state=1,g(e))}}function m(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=n[t.chunk.mediaInfo.type],r=a[t.chunk.mediaInfo.type];if(e&&0!==e.state){var i=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||i>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=i,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=i,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,_(e,r)}}}function y(t){if(t&&t.metric===r.default.HTTP_REQUEST&&t.value&&t.value.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=n[t.mediaType],i=a[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),_(e,i))}}function _(t,e){isNaN(t.lastSegmentStart)||isNaN(t.lastSegmentRequestTimeMs)||(e.segment_request_start_s=.001*t.lastSegmentRequestTimeMs,e.segment_download_finish_s=.001*t.lastSegmentFinishTimeMs,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN)}function b(t){if(t&&t.mediaType){var e=n[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function E(t,e){if(t.length!==e.length)return-1;for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function T(){n={},a={}}return e={getMaxIndex:function(t){var e,r=Object(i.default)(d).create(),o=Math.pow(4,.99),s=Math.max(Math.pow(4,1),o*Math.sqrt(4)),u=t.getMediaInfo(),l=t.getMediaType(),p=u.bitrateList.map((function(t){return t.bandwidth})),v=p.length,m=t.getScheduleController(),y=t.getStreamInfo(),_=t.getAbrController(),b=_.getThroughputHistory(),T=y&&y.manifestInfo&&y.manifestInfo.isDynamic,S=t.useL2AABR(),w=h.getCurrentBufferLevel(l,!0),A=b.getSafeAverageThroughput(l,T),x=b.getAverageThroughput(l,T),C=b.getAverageLatency(l),D=t.getVideoModel().getPlaybackRate();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!S||l===c.default.AUDIO)return r;m.setTimeToLoadDelay(0);var I=function(t){var e=t.getMediaType(),r=n[e];return r||(r=function(t){var e={},n=t.getMediaInfo(),r=n.bitrateList.map((function(t){return t.bandwidth/1e3}));return e.state=1,e.bitrates=r,e.lastQuality=0,function(t){t&&t.type&&(a[t.type]={},a[t.type].w=[],a[t.type].prev_w=[],a[t.type].Q=0,a[t.type].segment_request_start_s=0,a[t.type].segment_download_finish_s=0,a[t.type].B_target=1.5)}(n),g(e),e}(t),n[e]=r),r}(t);if(0===I.state)return r;var R=a[l];if(!R)return r;if(r.reason.state=I.state,r.reason.throughput=x,r.reason.latency=C,isNaN(x))return r;switch(I.state){case 1:if(e=_.getQualityForBitrate(u,A,y.id,C),r.quality=e,r.reason.throughput=A,I.lastQuality=e,!isNaN(I.lastSegmentDurationS)&&w>=R.B_target){I.state=2,R.Q=o;for(var k=0;k<v;++k)R.prev_w[k]=k===I.lastQuality?1:0}break;case 2:var O=[],P=h.getCurrentHttpRequest(l).trace.reduce((function(t,e){return t+e.d}),0),M=h.getCurrentHttpRequest(l).trace.reduce((function(t,e){return t+e.b[0]}),0),L=Math.round(8*M/P);L<1&&(L=1);for(var N=I.lastSegmentDurationS,F=1,j=0;j<v;++j)p[j]=p[j]/1e3,D*p[j]>L&&(F=-1),R.w[j]=R.prev_w[j]+F*(N/(2*s))*((R.Q+o)*(D*p[j]/L));R.w=function(t){for(var e=t.length,n=!1,r=[],i=0;i<e;++i)r[i]=t[i];for(var a=t.sort((function(t,e){return e-t})),o=0,s=0,u=[],l=0;l<e-1;++l)if((s=((o+=a[l])-1)/(l+1))>=a[l+1]){n=!0;break}n||(s=(o+a[e-1]-1)/e);for(var c=0;c<e;++c)u[c]=Math.max(r[c]-s,0);return u}(R.w);for(var B=0;B<v;++B)O[B]=R.w[B]-R.prev_w[B],R.prev_w[B]=R.w[B];R.Q=Math.max(0,R.Q-N+N*D*((E(p,R.prev_w)+E(p,O))/L));for(var U=[],V=0;V<v;++V)U[V]=Math.abs(p[V]-E(R.w,p));(e=U.indexOf(Math.min.apply(Math,U)))>I.lastQuality&&p[I.lastQuality+1]<=L&&(e=I.lastQuality+1),p[e]>=L&&(R.Q=2*Math.max(o,R.Q)),r.quality=e,r.reason.throughput=x,r.reason.latency=C,r.reason.bufferLevel=w,I.lastQuality=r.quality;break;default:f.debug("L2A ABR rule invoked in bad state."),r.quality=_.getQualityForBitrate(u,A,y.id,C),r.reason.state=I.state,r.reason.throughput=A,r.reason.latency=C,I.state=1,g(I)}return r},reset:function(){T(),p.off(u.default.PLAYBACK_SEEKING,v,e),p.off(u.default.MEDIA_FRAGMENT_LOADED,m,e),p.off(u.default.METRIC_ADDED,y,e),p.off(u.default.QUALITY_CHANGE_REQUESTED,b,e)}},f=Object(l.default)(d).getInstance().getLogger(e),T(),p.on(u.default.PLAYBACK_SEEKING,v,e),p.on(u.default.MEDIA_FRAGMENT_LOADED,m,e),p.on(u.default.METRIC_ADDED,y,e),p.on(u.default.QUALITY_CHANGE_REQUESTED,b,e),e}f.__dashjs_factory_name="L2ARule",e.default=a.default.getClassFactory(f)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/rules/SwitchRequest.js");function o(){var t,e,n=this.context;return t={getMaxIndex:function(t){for(var r=t?t.getSwitchHistory():null,i=r?r.getSwitchRequests():[],o=0,s=0,u=0,l=Object(a.default)(n).create(),c=0;c<i.length;c++)if(void 0!==i[c]&&(u+=i[c].dropSize,(o+=i[c].drops)+(s+=i[c].noDrops)>=6&&o/s>.075)){l.quality=c>0&&i[c].drops>0?c-1:c,l.reason={index:l.quality,drops:o,noDrops:s,dropSize:u},e.debug("Switch history rule index: "+l.quality+" samples: "+(o+s)+" drops: "+o);break}return l}},e=Object(i.default)(n).getInstance().getLogger(t),t}o.__dashjs_factory_name="SwitchHistoryRule",e.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/ThroughputRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/streaming/constants/Constants.js"),o=n("./src/streaming/constants/MetricsConstants.js");function s(t){var e=this.context,n=(t=t||{}).dashMetrics;return{getMaxIndex:function(t){var r=Object(i.default)(e).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("useBufferOccupancyABR")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var s=t.getMediaInfo(),u=t.getMediaType(),l=n.getCurrentBufferState(u),c=t.getScheduleController(),f=t.getAbrController(),d=t.getStreamInfo(),h=d?d.id:null,p=d&&d.manifestInfo?d.manifestInfo.isDynamic:null,g=f.getThroughputHistory(),v=g.getSafeAverageThroughput(u,p),m=g.getAverageLatency(u),y=t.useBufferOccupancyABR();return isNaN(v)||!l||y||f.getAbandonmentStateFor(h,u)!==o.default.ABANDON_LOAD&&(l.state===o.default.BUFFER_LOADED||p)&&(r.quality=f.getQualityForBitrate(s,v,h,m),c.setTimeToLoadDelay(0),r.reason={throughput:v,latency:m}),r},reset:function(){}}}s.__dashjs_factory_name="ThroughputRule",e.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r,a,o,s,u,l,c=this.context;function f(){n=null,r=1,a=100,o=0,s=null,u=null,l="dynamic_weight_selection"}function d(){var t=0;if(n)for(var e=0;e<n.length;e++){var r=n[e];r.state.throughput>t&&(t=r.state.throughput)}return t}function h(t,e,n){var r=t.map((function(t,r){return n[r]*Math.pow(t-e[r],2)})).reduce((function(t,e){return t+e}));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function p(t,e){return h([t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1])}function g(t,e,n){for(var r=0;r<e.length;r++){var i=e[r],a=p(i,t);v(i,n,Math.exp(-1*Math.pow(a,2)/(2*Math.pow(.1,2))))}}function v(t,e,n){var r=t.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(e[0]-r.throughput)*i[0]*n,r.latency=r.latency+(e[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(e[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(e[3]-r.switch)*i[3]*n}function m(t,e,n,r,i,a,o){s||(s=u[u.length-1]);var l=t.findWeightVector(e,n,r,i,a,o);null!==l&&-1!==l&&(s=l)}return t={getNextQuality:function(t,i,c,f,p,v,y){var _=c,b=f,E=i,T=function(t){if(!n){n=[];var e=t.bitrateList,i=[];o=e[0].bandwidth,e.forEach((function(t){i.push(t.bandwidth),t.bandwidth<o&&(o=t.bandwidth)})),s=i.map((function(t){return Math.pow(t,2)})).reduce((function(t,e){return t+e})),r=Math.sqrt(s);for(var a=0;a<e.length;a++)n.push({qualityIndex:a,bitrate:e[a].bandwidth,state:{throughput:e[a].bandwidth/r,latency:0,rebuffer:0,switch:0}});u=function(t){var e=[],n=function(t){for(var e=[],n=0;n<t;n++){var r=[Math.random()*d(),Math.random(),Math.random(),Math.random()];e.push(r)}return e}(Math.pow(t.length,2));e.push(n[0]);for(var r=[1,1,1,1],i=1;i<t.length;i++){for(var a=null,o=null,s=0;s<n.length;s++){for(var u=n[s],l=null,c=0;c<e.length;c++){var f=h(u,e[c],r);(null===l||f<l)&&(l=f)}(null===o||l>o)&&(a=u,o=l)}e.push(a)}for(var p=null,g=null,v=0;v<e.length;v++){for(var m=0,y=0;y<e.length;y++)v!==y&&(m+=h(e[v],e[y],r));(null===p||m>p)&&(p=m,g=v)}var _=[];for(_.push(e[g]),e.splice(g,1);e.length>0;){for(var b=null,E=null,T=0;T<e.length;T++){var S=h(_[0],e[T],r);(null===b||S<b)&&(b=S,E=T)}_.push(e[E]),e.splice(E,1)}return _}(n)}var s;return n}(t),S=i/r;S>1&&(S=d()),c/=a,e.debug("getNextQuality called throughput:".concat(S," latency:").concat(c," bufferSize:").concat(f," currentQualityIndex:").concat(v," playbackRate:").concat(p));var w=T[v],A=w.bitrate*y.getSegmentDuration()/E,x=Math.max(0,A-b);if(b-A<y.getMinBuffer())return e.debug("Buffer is low for bitrate= ".concat(w.bitrate," downloadTime=").concat(A," currentBuffer=").concat(b," rebuffer=").concat(x)),function(t,e){var r=0,i=t;if(n)for(var a=0;a<n.length;a++){var o=n[a];o.bitrate<t.bitrate&&o.bitrate>r&&e>o.bitrate&&(r=o.bitrate,i=o)}return i}(w,E).qualityIndex;switch(l){case"manual_weight_selection":s=[.4,.4,.4,.4];break;case"random_weight_selection":!function(t){s=function(t,e){for(var n=[],r=Math.sqrt(2/t),i=0;i<4;i++)n.push(Math.random()*r);return s=n}(t.length)}(T);break;case"dynamic_weight_selection":m(y,T,_,b,x,E,p);break;default:m(y,T,_,b,x,E,p)}for(var C=null,D=null,I=null,R=0;R<T.length;R++){var k=T[R],O=k.state,P=[O.throughput,O.latency,O.rebuffer,O.switch],M=s.slice(),L=y.getNextBufferWithBitrate(k.bitrate,b,E),N=L<y.getMinBuffer();N&&e.debug("Buffer is low for bitrate=".concat(k.bitrate," downloadTime=").concat(A," currentBuffer=").concat(b," nextBuffer=").concat(L)),(k.bitrate>i-1e4||N)&&k.bitrate!==o&&(M[0]=100);var F=h(P,[S,0,0,0],M);(null===C||F<C)&&(C=F,D=k.qualityIndex,I=k)}var j=Math.abs(w.bitrate-I.bitrate)/r;return g(w,T,[S,c,x,j]),g(I,T,[S,0,0,j]),D},reset:function(){f()}},e=Object(i.default)(c).getInstance().getLogger(t),f(),t}a.__dashjs_factory_name="LearningAbrController",e.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/abr/lolp/QoeInfo.js");function a(){var t,e,n,r,a;function o(){e=null,n=null,r=null,a=null}function s(t,e,n,r){var a=new i.default;return a.type=t,a.weights.bitrateReward=e||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=r||200,a}function u(t,e,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*t,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(t-i.lastBitrate)),i.lastBitrate=t,i.rebufferWSum+=i.weights.rebufferPenalty*e;for(var a=0;a<i.weights.latencyPenalty.length;a++){var o=i.weights.latencyPenalty[a];if(n<=o.threshold){i.latencyWSum+=o.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return t={setupPerSegmentQoe:function(t,i,o){e=s("segment",t,i,o),n=t,r=i,a=o},logSegmentMetrics:function(t,n,r,i){e&&u(t,n,r,i,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(t,e,i,o){var l=null;return n&&r&&a&&(l=s("segment",n,r,a)),l?(u(t,e,i,o,l),l.totalQoe):0},reset:function(){o()}},o(),t}a.__dashjs_factory_name="LoLpQoeEvaluator",e.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/rules/abr/lolp/LearningAbrController.js"),o=n("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),s=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/MetricsConstants.js"),l=n("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),c=n("./src/streaming/constants/Constants.js");function f(t){var e,n,i,f,d=(t=t||{}).dashMetrics,h=this.context;return n={getMaxIndex:function(t){try{var n=Object(s.default)(h).create(),r=t.getMediaInfo().type,a=t.getAbrController(),o=t.getStreamInfo(),p=a.getQualityFor(r,o.id),g=t.getMediaInfo(),v=d.getCurrentBufferState(r),m=t.getScheduleController(),y=d.getCurrentBufferLevel(r,!0),_=o&&o.manifestInfo?o.manifestInfo.isDynamic:null,b=m.getPlaybackController(),E=b.getCurrentLiveLatency();if(!t.useLoLPABR()||r===c.default.AUDIO)return n;E||(E=0);var T=b.getPlaybackRate(),S=a.getThroughputHistory().getSafeAverageThroughput(r,_);if(e.debug("Throughput ".concat(Math.round(S)," kbps")),isNaN(S)||!v)return n;if(a.getAbandonmentStateFor(o.id,r)===u.default.ABANDON_LOAD)return n;for(var w=g.bitrateList,A=t.getRepresentationInfo().fragmentDuration,x=w[0].bandwidth/1e3,C=w[w.length-1].bandwidth/1e3,D=0;D<w.length;D++){var I=w[D].bandwidth/1e3;I>C?C=I:I<x&&(x=I)}var R=w[p].bandwidth/1e3,k=d.getCurrentHttpRequest(r,!0),O=(k.tresponse.getTime()-k.trequest.getTime())/1e3,P=O>A?O-A:0;f.setupPerSegmentQoe(A,C,x),f.logSegmentMetrics(R,P,E,T);var M=Object(l.default)(h).create({targetLatency:1.5,bufferMin:.3,segmentDuration:A,qoeEvaluator:f});return n.quality=i.getNextQuality(g,1e3*S,E,y,T,p,M),n.reason={throughput:S,latency:E},n.priority=s.default.PRIORITY.STRONG,m.setTimeToLoadDelay(0),n.quality!==p&&console.log("[TgcLearningRule]["+r+"] requesting switch to index: ",n.quality,"Average throughput",Math.round(S),"kbps"),n}catch(L){throw L}},reset:function(){i.reset(),f.reset()}},e=Object(r.default)(h).getInstance().getLogger(n),i=Object(a.default)(h).create(),f=Object(o.default)(h).create(),n}f.__dashjs_factory_name="LoLPRule",e.default=i.default.getClassFactory(f)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e,n,r,i,a=t.targetLatency,o=t.bufferMin,s=t.segmentDuration,u=t.qoeEvaluator;function l(){return s}function c(t,e){var n=l();return e>n?t-n:t+n-e}return e={getMinBuffer:function(){return o},getSegmentDuration:l,getNextBufferWithBitrate:function(t,e,n){return c(e,t*s/n)},getNextBuffer:c,findWeightVector:function(t,e,i,l,f,d){var h=null,p=null,g=null,v=Math.abs(e-r);return t.forEach((function(t){n.forEach((function(n){var r=n[1],l=n[2],m=t.bitrate*s/f,y=c(i,m),_=Math.max(1e-5,m-y),b=u.calculateSingleUseQoe(t.bitrate,(0===l?10:1/l)*_,(0===r?10:1/r)*t.state.latency,d);(null===h||b>h)&&function(t,e,n){return!(t>a+n)&&e>=o}(e,y,v)&&(h=b,p=n,g=t.bitrate)}))})),null===p&&null===g&&(p=-1),r=e,p}},n=function t(e,n,r){if(r===n)return e;for(var a=e.length,o=0;o<a;o++)for(var s=e.shift(),u=0;u<i.length;u++)e.push(s.concat(i[u]));return t(e,n,r+1)}((i=[.2,.4,.6,.8,1]).map((function(t){return[t]})),4,1),r=0,e}i.__dashjs_factory_name="LoLpWeightSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t=0;function e(t){for(var e="",n=0;n<t.length;++n)e+=t[n].uchar;return e.length-e.replace(/^\s+/,"").length}function n(t){return"left: "+3.125*t.x+"%; top: "+6.66*t.y1+"%; width: "+(100-3.125*t.x)+"%; height: "+6.66*Math.max(t.y2-1-t.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(t){return"red"===t?"rgb(255, 0, 0)":"green"===t?"rgb(0, 255, 0)":"blue"===t?"rgb(0, 0, 255)":"cyan"===t?"rgb(0, 255, 255)":"magenta"===t?"rgb(255, 0, 255)":"yellow"===t?"rgb(255, 255, 0)":"white"===t?"rgb(255, 255, 255)":"black"===t?"rgb(0, 0, 0)":t}function i(t,e){var n=t.videoHeight/15;return e?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(e.foreground?r(e.foreground):"rgb(255, 255, 255)")+"; font-style: "+(e.italics?"italic":"normal")+"; text-decoration: "+(e.underline?"underline":"none")+"; white-space: pre; background-color: "+(e.background?r(e.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(t){return t.replace(/^\s+/g,"")}function o(t){return t.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,s,u,l){var c,f,d=null,h=!1,p=-1,g={start:s,end:u,spans:[]},v="style_cea608_white_black",m={},y={},_=[];for(c=0;c<15;++c){var b=l.rows[c],E="",T=null;if(!1===b.isEmpty()){var S=e(b.chars);null===d&&(d={x:S,y1:c,y2:c+1,p:[]}),S!==p&&h&&(d.p.push(g),g={start:s,end:u,spans:[]},d.y2=c,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(_.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d={x:S,y1:c,y2:c+1,p:[]});for(var w=0;w<b.chars.length;++w){var A=b.chars[w],x=A.penState;if(null===T||!x.equals(T)){E.trim().length>0&&(g.spans.push({name:v,line:E,row:c}),E="");var C="style_cea608_"+x.foreground+"_"+x.background;x.underline&&(C+="_underline"),x.italics&&(C+="_italics"),y.hasOwnProperty(C)||(y[C]=JSON.parse(JSON.stringify(x))),T=x,v=C}E+=A.uchar}E.trim().length>0&&g.spans.push({name:v,line:E,row:c}),h=!0,p=S}else h=!1,p=-1,d&&(d.p.push(g),g={start:s,end:u,spans:[]},d.y2=c,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(_.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d=null)}d&&(d.p.push(g),d.y2=c+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(_.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d=null);var D=[];for(c=0;c<_.length;++c){var I=_[c],R="sub_cea608_"+t++,k=document.createElement("div");k.id=R;var O=n(I);k.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+O;var P=document.createElement("div");P.className="paragraph bodyStyle",P.style.cssText=i(r);var M=document.createElement("div");M.className="cueUniWrapper",M.style.cssText="unicode-bidi: normal; direction: ltr;";for(var L=0;L<I.p.length;++L){var N=I.p[L],F=0;for(f=0;f<N.spans.length;++f){var j=N.spans[f];if(j.line.length>0){if(0!==f&&F!=j.row){var B=document.createElement("br");B.className="lineBreak",M.appendChild(B)}var U=!1;F===j.row&&(U=!0),F=j.row;var V=y[j.name],G=document.createElement("span");G.className="spanPadding "+j.name+" customSpanColor",G.style.cssText=i(r,V),G.textContent=0!==f&&U?f===N.spans.length-1?o(j.line):j.line:N.spans.length>1&&f<N.spans.length-1&&j.row===N.spans[f+1].row?a(j.line):j.line.trim(),M.appendChild(G)}}}P.appendChild(M),k.appendChild(P);var H={bodyStyle:["%",90]};for(var Y in y)y.hasOwnProperty(Y)&&(H[Y]=["%",90]);D.push({type:"html",start:s,end:u,cueHTMLElement:k,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:H,lineHeight:{},linePadding:{}})}return D}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",e.default=r.default.getSingletonFactory(i)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/utils/InitCache.js"),s=n("./src/streaming/SourceBufferSink.js"),u=n("./src/streaming/vo/DashJSError.js"),l=n("./src/core/errors/Errors.js");function c(t){t=t||{};var e,n,a,c,f,d,h=this.context,p=Object(r.default)(h).getInstance(),g=t.textController,v=t.errHandler,m=t.streamInfo,y=t.type;function _(t){c=t}function b(t){n!==t&&(n=t)&&p.trigger(i.default.BUFFERING_COMPLETED,{},{streamId:m.id,mediaType:y})}function E(t){t.chunk.bytes&&!n&&(d.save(t.chunk),f.append(t.chunk),b(!0))}return e={initialize:function(t){_(t)},getStreamId:function(){return m.id},getType:function(){return y},getBufferControllerType:function(){return"NotFragmentedTextBufferController"},createBufferSink:function(t){return new Promise((function(e,n){try{(f=Object(s.default)(h).create({mediaSource:c,textController:g,eventBus:p})).initializeForFirstUse(m,t),a||(f.getBuffer()&&"function"==typeof f.getBuffer().initialize&&f.getBuffer().initialize(),a=!0),e(f)}catch(r){v.error(new u.default(l.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,l.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+y)),n(r)}}))},getBuffer:function(){return f},getBufferLevel:function(){return 0},getRangeAt:function(){return null},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:_,getMediaSource:function(){return c},appendInitSegmentFromCache:function(t){return null!==d.extract(m.id,t)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:b,getIsPruningInProgress:function(){return!1},reset:function(t){p.off(i.default.INIT_FRAGMENT_LOADED,E,e),!t&&f&&(f.abort(),f.reset(),f=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},a=!1,c=null,n=!1,d=Object(o.default)(h).getInstance(),p.on(i.default.INIT_FRAGMENT_LOADED,E,e),e}c.__dashjs_factory_name="NotFragmentedTextBufferController",e.default=a.default.getClassFactory(c)},"./src/streaming/text/TextController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/text/TextSourceBuffer.js"),o=n("./src/streaming/text/TextTracks.js"),s=n("./src/streaming/utils/VTTParser.js"),u=n("./src/streaming/utils/TTMLParser.js"),l=n("./src/core/EventBus.js"),c=n("./src/core/events/Events.js"),f=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/streaming/utils/SupervisorTools.js");function h(t){var e,n,i,h,p,g,v,m,y,_,b,E,T,S=this.context,w=t.adapter,A=t.errHandler,x=t.manifestModel,C=t.mediaController,D=t.videoModel,I=t.settings;function R(t){var e=t.tracks,r=t.index,i=t.streamId;!1===I.get().streaming.text.defaultEnabled&&!O()||T?P(i,-1):(m&&e.some((function(t,e){if(C.matchSettings(m,t))return P(i,e),r=e,!0})),_=!1),n[i].lastEnabledIndex=r,v.trigger(f.default.TEXT_TRACKS_ADDED,{enabled:O(),index:r,tracks:e,streamId:i}),E=!0}function k(t){if(!y&&t&&t.newMediaInfo){var e=t.newMediaInfo;e.type===r.default.TEXT&&(m={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]})}}function O(){var t=!0;return _&&!b&&(t=!1),t}function P(t,e){(_=-1===e)&&C&&C.saveTextSettingsDisabled();var n=M(t);if(n!==e&&h[t]){h[t].setModeForTrackIdx(n,r.default.TEXT_HIDDEN),h[t].setCurrentTrackIdx(e),h[t].setModeForTrackIdx(e,r.default.TEXT_SHOWING);var a=h[t].getCurrentTrackInfo();a&&a.isFragmented&&!a.isEmbedded?function(t,e,n){if(i[t])for(var a=i[t].getConfig().fragmentedTracks,o=0;o<a.length;o++){var s=a[o];if(e.lang===s.lang&&(s.id?e.id===s.id:e.index===s.index)){var u=C.getCurrentTrackFor(r.default.TEXT,t);(s.id?u.id!==s.id:u.index!==s.index)?(h[t].deleteCuesFromTrackIdx(n),i[t].setCurrentFragmentedTrackIdx(o)):-1===n&&v.trigger(c.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:t,mediaType:r.default.TEXT})}}}(t,a,n):a&&!a.isFragmented&&function(t,e){v.trigger(c.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:e},{streamId:t,mediaType:r.default.TEXT})}(t,a),C.setTrack(a)}}function M(t){return h[t].getCurrentTrackIdx()}function L(){i={},h={},n={},_=!0,E=!1,T=!1}return e={deactivateStream:function(t){if(t){var e=t.id;i[e]&&i[e].resetMediaInfos(),h[e]&&h[e].deleteAllTextTracks()}},initialize:function(){v.on(c.default.CURRENT_TRACK_CHANGED,k,e),v.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,e)},initializeForStream:function(t){var e=t.id,r=Object(o.default)(S).create({videoModel:D,streamInfo:t});r.initialize(),h[e]=r;var s=Object(a.default)(S).create({errHandler:A,adapter:w,manifestModel:x,mediaController:C,videoModel:D,textTracks:r,vttParser:p,ttmlParser:g,streamInfo:t});s.initialize(),i[e]=s,n[e]={},n[e].lastEnabledIndex=-1},createTracks:function(t){var e=t.id;h[e]&&h[e].createTracks()},getTextSourceBuffer:function(t){var e=t.id;if(i&&i[e])return i[e]},getAllTracksAreDisabled:function(){return _},addEmbeddedTrack:function(t,e){var n=t.id;i[n]&&i[n].addEmbeddedTrack(e)},setInitialSettings:function(t){m=t,y=!0},enableText:function(t,e){Object(d.checkParameterType)(e,"boolean"),O()!==e&&(e&&P(t,n[t].lastEnabledIndex),e||(n[t].lastEnabledIndex=M(t),E?P(t,-1):T=!0))},isTextEnabled:O,setTextTrack:P,getCurrentTrackIdx:M,enableForcedTextStreaming:function(t){Object(d.checkParameterType)(t,"boolean"),b=t},addMediaInfosToBuffer:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.id;i[a]&&i[a].addMediaInfos(e,n,r)},reset:function(){L(),v.off(c.default.CURRENT_TRACK_CHANGED,k,e),v.off(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,e),Object.keys(i).forEach((function(t){i[t].resetEmbedded(),i[t].reset()}))}},m=null,b=!1,E=!1,y=!1,T=!1,p=Object(s.default)(S).getInstance(),g=Object(u.default)(S).getInstance(),v=Object(l.default)(S).getInstance(),L(),e}h.__dashjs_factory_name="TextController",e.default=i.default.getClassFactory(h)},"./src/streaming/text/TextSourceBuffer.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/streaming/vo/TextTrackInfo.js"),o=n("./src/streaming/utils/BoxParser.js"),s=n("./src/streaming/utils/CustomTimeRanges.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/text/EmbeddedTextHtmlRender.js"),f=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),d=n.n(f),h=n("./externals/cea608-parser.js"),p=n.n(h),g=n("./src/core/EventBus.js"),v=n("./src/core/events/Events.js"),m=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/errors/Errors.js");function _(t){var e,n,u,f,h,_,b,E,T,S,w,A,x,C,D,I,R=t.errHandler,k=t.manifestModel,O=t.mediaController,P=t.videoModel,M=t.textTracks,L=t.vttParser,N=t.ttmlParser,F=t.streamInfo,j=this.context,B=Object(g.default)(j).getInstance(),U=!1;function V(){_=null,E=NaN,T=[],S=null,b=!1,h=[],f=null}function G(t){var e=new a.default;for(var n in t)e[n]=t[n];e.labels=t.labels,e.defaultTrack=function(t){var e=!1;return A.length>1&&t.isEmbedded?e=t.id&&t.id===r.default.CC1:1===A.length?t.id&&"string"==typeof t.id&&"CC"===t.id.substring(0,2)&&(e=!0):0===A.length&&(e=t.index===h[0].index),e}(t),e.isFragmented=t.isFragmented,e.isEmbedded=!!t.isEmbedded,e.isTTML=function(t){return t.codec&&t.codec.search(r.default.STPP)>=0||t.mimeType&&t.mimeType.search(r.default.TTML)>=0}(t),e.kind=function(t,e){var n=t.roles&&t.roles.length>0?e[t.roles[0]]:e.caption;return n===e.caption||n===e.subtitle?n:e.caption}(t,{subtitle:"subtitles",caption:"captions"}),M.addTextTrack(e)}function H(t){var e=t.chunk;e.mediaInfo.embeddedCaptions&&z(e.bytes,e)}function Y(t){w=t}function z(t,a){var o=a.mediaInfo,s=o.type,l=o.codec||o.mimeType;l?-1!==o.codec.indexOf("application/mp4")?function(t,i,a){var o;if("InitializationSegment"===i.segmentType)b=!0,E=u.getMediaTimescaleFromMoov(t);else{if(!b)return;(o=u.getSamplesInfo(t).sampleList).length>0&&(S=o[0].cts-i.start*E),a.search(r.default.STPP)>=0?function(t,i,a){var o,s;for(f=null!==f?f:K(a),o=0;o<i.length;o++){var u=i[o],l=u.cts,c=X(),h=c+l/E;e.buffered.add(h,h+u.duration/E);var p=new DataView(t,u.offset,u.subSizes[0]),g=d.a.Utils.dataViewToString(p,r.default.UTF8),v=[],m=u.offset+u.subSizes[0];for(s=1;s<u.subSizes.length;s++){var y=new Uint8Array(t,m,u.subSizes[s]),b=String.fromCharCode.apply(null,y);v.push(b),m+=u.subSizes[s]}try{var T=k.getValue(),S=f.parse(g,T.ttmlTimeIsRelative?l/E:0,l/E,(l+u.duration)/E,v);M.addCaptions(w,c,S)}catch(A){_.removeExecutedRequestsBeforeTime(),this.remove(),n.error("TTML parser error: "+A.message)}}}(t,o,a):function(t,r){var i,a,o,s=[];for(i=0;i<r.length;i++){var u=r[i];u.cts-=S;var l=X()+u.cts/E;e.buffered.add(l,l+u.duration/E);var c=t.slice(u.offset,u.offset+u.size),f=d.a.parseBuffer(c);for(a=0;a<f.boxes.length;a++){var h=f.boxes[a];if(n.debug("VTT box1: "+h.type),"vtte"!==h.type&&"vttc"===h.type)for(n.debug("VTT vttc boxes.length = "+h.boxes.length),o=0;o<h.boxes.length;o++){var p=h.boxes[o];if(n.debug("VTT box2: "+p.type),"payl"===p.type){var g=p.cue_text;n.debug("VTT cue_text = "+g);var v=u.cts/E,m=(u.cts+u.duration)/E;s.push({start:v,end:m,data:g,styles:{}}),n.debug("VTT "+v+"-"+m+" : "+g)}}}}s.length>0&&M.addCaptions(w,0,s)}(t,o)}}(t,a,l):s===r.default.VIDEO?function(t,e){var r,a;if(e.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE)0===x&&(x=u.getMediaTimescaleFromMoov(t));else if(e.segmentType===i.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===x)return void n.warn("CEA-608: No timescale for embeddedTextTrack yet");var o=(a=u.getSamplesInfo(t)).lastSequenceNumber;if(D[0]||D[1]||function(){for(var t,e=0;e<A.length;e++){if(-1===(t=M.getTrackIdxForId(A[e].id)))return void n.warn("CEA-608: data before track is ready.");var r=q(t);D[e]=new p.a.Cea608Parser(e+1,{newCue:r},null)}}(),x){if(null!==C&&o!==C+a.numSequences)for(r=0;r<D.length;r++)D[r]&&D[r].reset();for(var s=function(t,e){if(0===e.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(t),i=0;i<e.length;i++)for(var a=e[i],o=p.a.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var c=p.a.extractCea608DataFromRange(r,o[l]),f=0;f<2;f++)if(c[f].length>0){a.cts!==s?u=0:u+=1;var d=X();n.fields[f].push([a.cts+d*x,c[f],u]),s=a.cts}return n.fields.forEach((function(t){t.sort((function(t,e){return t[0]===e[0]?t[2]-e[2]:t[0]-e[0]}))})),n}(t,a.sampleList),l=0;l<D.length;l++){var c=s.fields[l],f=D[l];if(f)for(r=0;r<c.length;r++)f.addData(c[r][0]/x,c[r][1])}C=o}}}(t,a):function(t,n,i){var a,o,s=new DataView(t,0,t.byteLength);o=d.a.Utils.dataViewToString(s,r.default.UTF8);try{a=K(i).parse(o,0),M.addCaptions(M.getCurrentTrackIdx(),0,a),e.buffered&&e.buffered.add(n.start,n.end)}catch(u){R.error(new m.default(y.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,y.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+u.message,o))}}(t,a,l):n.error("No text type defined")}function q(t){return function(e,n,r){var i;(i=P.getTTMLRenderingDiv()?I.createHTMLCaptionsFromScreen(P.getElement(),e,n,r):[{start:e,end:n,data:r.getDisplayText(),styles:{}}])&&M.addCaptions(t,0,i)}}function X(){return isNaN(e.timestampOffset)?0:e.timestampOffset}function K(t){var e;return t.search(r.default.VTT)>=0?e=L:(t.search(r.default.TTML)>=0||t.search(r.default.STPP)>=0)&&(e=N),e}function W(t){A.forEach((function(e){var n=M.getTrackIdxForId(e.id);n>=0&&M.deleteCuesFromTrackIdx(n,t.from,t.to)}))}return e={initialize:function(){U||(A=[],w=null,x=0,D=[],C=null,U=!0,I=Object(c.default)(j).getInstance(),B.on(v.default.VIDEO_CHUNK_RECEIVED,H,e),B.on(v.default.BUFFER_CLEARED,W,e))},addMediaInfos:function(t,n,i){if(h=h.concat(n),t===r.default.TEXT&&n[0].isFragmented&&!n[0].isEmbedded){_=i,e.buffered=Object(s.default)(j).create(),T=O.getTracksFor(r.default.TEXT,F.id).filter((function(t){return t.isFragmented}));for(var a=O.getCurrentTrackFor(r.default.TEXT,F.id),o=0;o<T.length;o++)if(T[o]===a){Y(o);break}}for(var u=0;u<n.length;u++)G(n[u])},resetMediaInfos:function(){h=[]},getStreamId:function(){return F.id},append:z,abort:function(){},addEmbeddedTrack:function(t){if(U&&t)if(t.id===r.default.CC1||t.id===r.default.CC3){for(var e=0;e<A.length;e++)if(A[e].id===t.id)return;A.push(t)}else n.warn("Embedded track "+t.id+" not supported!")},resetEmbedded:function(){B.off(v.default.VIDEO_CHUNK_RECEIVED,H,e),B.off(v.default.BUFFER_CLEARED,W,e),M&&M.deleteAllTextTracks(),U=!1,A=[],D=[null,null],C=null},getConfig:function(){return{fragmentModel:_,fragmentedTracks:T,videoModel:P}},setCurrentFragmentedTrackIdx:Y,remove:function(t,n){void 0===t&&t===n&&(t=e.buffered.start(0),n=e.buffered.end(e.buffered.length-1)),e.buffered.remove(t,n),M.deleteCuesFromTrackIdx(w,t,n)},reset:function(){V(),h=[],u=null}},n=Object(l.default)(j).getInstance().getLogger(e),u=Object(o.default)(j).getInstance(),V(),e}_.__dashjs_factory_name="TextSourceBuffer",e.default=u.default.getClassFactory(_)},"./src/streaming/text/TextTracks.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./node_modules/imsc/src/main/js/main.js");function c(t){var e,n,s,c,f,d,h,p,g,v,m,y,_,b,E,T,S,w=this.context,A=Object(i.default)(w).getInstance(),x=t.videoModel,C=t.streamInfo;function D(t,e,n,r,i,a){var o=0,s=0;t/e>n/r?o=(s=e)/r*n:s=(o=t)/n*r;var u,l,c=0,f=0;return o/s>i?(f=s,c=s*i):(c=o,f=o/i),u=(t-c)/2,l=(e-f)/2,a?{x:u+.1*c,y:l+.1*f,w:.8*c,h:.8*f}:{x:u,y:l,w:c,h:f}}function I(t,e){var n=x.getClientWidth(),r=x.getClientHeight(),i=x.getVideoWidth(),a=x.getVideoHeight(),s=x.getVideoRelativeOffsetTop(),u=x.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var l=i/a,c=!1;t.isFromCEA608&&(l=3.5/3,c=!0);var f=D.call(this,n,r,i,a,l,c),d=f.w,y=f.h,E=f.x,S=f.y;if(d!=g||y!=v||E!=h||S!=p||e){if(h=E+u,p=S+s,g=d,v=y,m){var w=m.style;w&&(w.left=h+"px",w.top=p+"px",w.width=g+"px",w.height=v+"px",w.zIndex=_&&document[_]||b?T:null,A.trigger(o.default.CAPTION_CONTAINER_RESIZE))}var C=t.activeCues;if(C)for(var I=C.length,R=0;R<I;++R){var k=C[R];k.scaleCue(k)}}}}function R(t){var e,n,r,i,a;if(t.cellResolution){var o=[g/t.cellResolution[0],v/t.cellResolution[1]];if(t.linePadding)for(e in t.linePadding)if(t.linePadding.hasOwnProperty(e)){n=(t.linePadding[e]*o[0]).toString();for(var s=document.getElementsByClassName("spanPadding"),u=0;u<s.length;u++)s[u].style.cssText=s[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),s[u].style.cssText=s[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(t.fontSize){for(e in t.fontSize)if(t.fontSize.hasOwnProperty(e)){"%"===t.fontSize[e][0]?r=t.fontSize[e][1]/100:"c"===t.fontSize[e][0]&&(r=t.fontSize[e][1]),n=(r*o[1]).toString(),a="defaultFontSize"!==e?document.getElementsByClassName(e):document.getElementsByClassName("paragraph");for(var l=0;l<a.length;l++)a[l].style.cssText=a[l].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(t.lineHeight)for(e in t.lineHeight)if(t.lineHeight.hasOwnProperty(e)){"%"===t.lineHeight[e][0]?i=t.lineHeight[e][1]/100:"c"===t.fontSize[e][0]&&(i=t.lineHeight[e][1]),n=(i*o[1]).toString(),a=document.getElementsByClassName(e);for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}}if(t.isd){var f=document.getElementById(t.cueID);f&&m.removeChild(f),k(t)}}function k(t){if(m){var e=document.createElement("div");m.appendChild(e),E=Object(l.renderHTML)(t.isd,e,(function(e){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(e)){var i=n.exec(e),a=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(t.images[a])}if(r.test(e)){var o=r.exec(e);return"data:image/png;base64,"+t.embeddedImages[o[1]]}return null}),m.clientHeight,m.clientWidth,!1,(function(t){n.info("renderCaption :",t)}),E,!0),e.id=t.cueID,A.trigger(o.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:d})}}function O(t,e,i){var a=P(t),u=this;if(a&&Array.isArray(i)&&0!==i.length)for(var l=0;l<i.length;l++){var c=void 0,f=i[l];a.cellResolution=f.cellResolution,a.isFromCEA608=f.isFromCEA608,"html"!==f.type||!m||isNaN(f.start)||isNaN(f.end)?!f.data||isNaN(f.start)||isNaN(f.end)||(c=new s(f.start-e,f.end-e,f.data),f.styles&&(void 0!==f.styles.align&&"align"in c&&(c.align=f.styles.align),void 0!==f.styles.line&&"line"in c&&(c.line=f.styles.line),void 0!==f.styles.position&&"position"in c&&(c.position=f.styles.position),void 0!==f.styles.size&&"size"in c&&(c.size=f.styles.size)),c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&A.trigger(o.default.CAPTION_RENDERED,{currentTrackIdx:d})}):((c=new s(f.start+e,f.end+e,"")).cueHTMLElement=f.cueHTMLElement,c.isd=f.isd,c.images=f.images,c.embeddedImages=f.embeddedImages,c.cueID=f.cueID,c.scaleCue=R.bind(u),c.cellResolution=f.cellResolution,c.lineHeight=f.lineHeight,c.linePadding=f.linePadding,c.fontSize=f.fontSize,m.style.left=h+"px",m.style.top=p+"px",m.style.width=g+"px",m.style.height=v+"px",c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&(this.isd?(k(this),n.debug("Cue enter id:"+this.cueID)):(m.appendChild(this.cueHTMLElement),R.call(u,this),A.trigger(o.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})))},c.onexit=function(){if(m)for(var t=m.childNodes,e=0;e<t.length;++e)t[e].id===this.cueID&&(n.debug("Cue exit id:"+t[e].id),m.removeChild(t[e]),--e)});try{c?N(a,c)||a.addCue(c):n.error("impossible to display subtitles.")}catch(y){throw j(a),a.addCue(c),y}}}function P(t){return t>=0&&c[t]?x.getTextTrack(c[t].kind,c[t].id,c[t].lang,c[t].isTTML,c[t].isEmbedded):null}function M(t){var e=this;if(t!==d){var n=P(d=t);L.call(this,n),y&&(clearInterval(y),y=null),n&&"html"===n.renderingType&&(I.call(this,n,!0),window.ResizeObserver?(S=new window.ResizeObserver((function(){I.call(e,n,!0)}))).observe(x.getElement()):y=setInterval(I.bind(this,n),500))}}function L(t){V.call(this),t&&"html"===t.renderingType?B.call(this):U.call(this)}function N(t,e){if(!t.cues)return!1;for(var n=0;n<t.cues.length;n++)if(t.cues[n].startTime===e.startTime&&t.cues[n].endTime===e.endTime)return!0;return!1}function F(t,e,n){return(isNaN(e)||t.startTime>=e)&&(isNaN(n)||t.endTime<=n)}function j(t,e,n){if(t.cues)for(var r=t.cues,i=r.length-1;i>=0;i--)F(r[i],e,n)&&(r[i].onexit&&r[i].onexit(),t.removeCue(r[i]))}function B(){var t=document.getElementById("native-cue-style");if(!t){(t=document.createElement("style")).id="native-cue-style",document.head.appendChild(t);var e=t.sheet,r=x.getElement();try{r&&e.insertRule(r.id?"#"+r.id+"::cue {background: transparent}":0!==r.classList.length?"."+r.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(i){n.info(""+i.message)}}}function U(){var t=document.getElementById("native-cue-style");t&&document.head.removeChild(t)}function V(){if(m)for(;m.firstChild;)m.removeChild(m.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(s=window.VTTCue||window.TextTrackCue,c=[],f=[],d=-1,h=0,p=0,g=0,v=0,m=null,y=null,b=!1,T=2147483647,E=null,void 0!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(t){c.push(t)},addCaptions:O,createTracks:function(){c.sort((function(t,e){return t.index-e.index})),m=x.getTTMLRenderingDiv();for(var t,e=-1,n=0;n<c.length;n++){var i=x.addTextTrack((t=c[n]).kind,void 0!==t.id?t.id:t.lang,t.lang,t.isTTML,t.isEmbedded);f.push(i),c[n].defaultTrack&&(i.default=!0,e=n);var s=P(n);s&&(s.mode=r.default.TEXT_SHOWING,s.renderingType=m&&(c[n].isTTML||c[n].isEmbedded)?"html":"default"),O(n,0,c[n].captionData),A.trigger(o.default.TEXT_TRACK_ADDED)}if(M.call(this,e),e>=0){A.on(o.default.PLAYBACK_METADATA_LOADED,(function t(){var n=P(e);n&&"html"===n.renderingType&&I.call(this,n,!0),A.off(o.default.PLAYBACK_METADATA_LOADED,t,this)}),this);for(var u=0;u<c.length;u++){var l=P(u);l&&(l.mode=u===e?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}A.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:c,streamId:C.id})},getCurrentTrackIdx:function(){return d},setCurrentTrackIdx:M,getTrackIdxForId:function(t){for(var e=-1,n=0;n<c.length;n++)if(c[n].id===t){e=n;break}return e},getCurrentTrackInfo:function(){return c[d]},setModeForTrackIdx:function(t,e){var n=P(t);n&&n.mode!==e&&(n.mode=e)},deleteCuesFromTrackIdx:function(t,e,n){var r=P(t);r&&j(r,e,n)},deleteAllTextTracks:function(){for(var t=f?f.length:0,e=0;e<t;e++){var n=P(e);n&&j.call(this,n,C.start,C.start+C.duration)}f=[],c=[],y&&(clearInterval(y),y=null),S&&x&&(S.unobserve(x.getElement()),S=null),d=-1,V.call(this)},deleteTextTrack:function(t){x.removeChild(f[t]),f.splice(t,1)}},n=Object(u.default)(w).getInstance().getLogger(e),e}c.__dashjs_factory_name="TextTracks",e.default=s.default.getClassFactory(c)},"./src/streaming/thumbnail/ThumbnailController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/vo/Thumbnail.js"),o=n("./src/streaming/thumbnail/ThumbnailTracks.js"),s=n("./src/streaming/vo/BitrateInfo.js"),u=n("./src/dash/utils/SegmentsUtils.js");function l(t){var e,n,r=this.context,l=t.streamInfo;function c(t){n.setTrackByIndex(t)}function f(){n&&n.reset()}return e={getStreamId:function(){return l.id},initialize:function(){n.addTracks();var t=n.getTracks();t&&t.length>0&&c(0)},provide:function(t,e){if("function"==typeof e){var r,i=n.getCurrentTrack();if(!i||i.segmentDuration<=0||null==t)e(null);else{(r=n.getThumbnailRequestForTime(t))&&(i.segmentDuration=r.duration);var o=Math.floor(t%i.segmentDuration*i.tilesHor*i.tilesVert/i.segmentDuration),s=new a.default;if(s.width=Math.floor(i.widthPerTile),s.height=Math.floor(i.heightPerTile),s.x=Math.floor(o%i.tilesHor)*i.widthPerTile,s.y=Math.floor(o/i.tilesHor)*i.heightPerTile,"readThumbnail"in i)return i.readThumbnail(t,(function(t){s.url=t,e(s)}));if(r)s.url=r.url,i.segmentDuration=NaN;else{var l=Math.floor(t/i.segmentDuration);s.url=function(t,e){var n=e+t.startNumber,r=Object(u.replaceTokenForTemplate)(t.templateUrl,"Number",n);return r=Object(u.replaceTokenForTemplate)(r,"Time",(n-1)*t.segmentDuration*t.timescale),r=Object(u.replaceTokenForTemplate)(r,"Bandwidth",t.bandwidth),Object(u.unescapeDollarsInTemplate)(r)}(i,l)}e(s)}}},setTrackByIndex:c,getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var t=n.getTracks(),e=0;return t.map((function(t){var n=new s.default;return n.mediaType=i.default.IMAGE,n.qualityIndex=e++,n.bitrate=t.bitrate,n.width=t.width,n.height=t.height,n}))},reset:f},f(),n=Object(o.default)(r).create({streamInfo:l,adapter:t.adapter,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:t.debug,eventBus:t.eventBus,events:t.events,dashConstants:t.dashConstants,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController}),e}l.__dashjs_factory_name="ThumbnailController",e.default=r.default.getClassFactory(l)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(t,e,n){"use strict";n.r(e),n.d(e,"THUMBNAILS_SCHEME_ID_URIS",(function(){return h}));var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/ThumbnailTrackInfo.js"),s=n("./src/streaming/utils/URLUtils.js"),u=n("./src/dash/utils/SegmentsUtils.js"),l=n("./src/streaming/utils/BoxParser.js"),c=n("./src/streaming/net/XHRLoader.js"),f=n("./src/dash/DashHandler.js"),d=n("./src/dash/controllers/SegmentsController.js"),h=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(t){var e,n,a,p,g,v,m,y,_=this.context,b=t.adapter,E=t.baseURLController,T=t.streamInfo,S=t.timelineConverter,w=t.debug,A=t.eventBus,x=t.events,C=t.dashConstants,D=Object(s.default)(_).getInstance();function I(t,e){var r=new o.default;r.id=t.id,r.bitrate=t.bandwidth,r.width=t.width,r.height=t.height,r.tilesHor=1,r.tilesVert=1,t.essentialProperties&&t.essentialProperties.forEach((function(t){if(h.indexOf(t.schemeIdUri)>=0&&t.value){var e=t.value.split("x");2!==e.length||isNaN(e[0])||isNaN(e[1])||(r.tilesHor=parseInt(e[0],10),r.tilesVert=parseInt(e[1],10))}})),e?v.updateSegmentData(t).then((function(e){!function(t,e,n){var r=[],i=function(t,e){var n,r,i,a,o=[],s=0;for(n=0,r=t.segments.length;n<r;n++)i=t.segments[n],(a=Object(u.getTimeBasedSegment)(S,b.getIsDynamic(),e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,s))&&(o.push(a),a=null,s++);return o}(n,e);e.segments=i,t.segmentDuration=e.segments[0].duration,t.readThumbnail=function(t,n){var i=null;r.some((function(e){if(e.start<=t&&e.end>t)return i=e.url,!0})),i?n(i):e.segments.some((function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var a=E.resolve(e.path);return m.load({method:"get",url:a.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(t){var e=y.getSamplesInfo(t.target.response),a=new Blob([t.target.response.slice(e.sampleList[0].offset,e.sampleList[0].offset+e.sampleList[0].size)],{type:"image/jpeg"}),o=window.URL.createObjectURL(a);r.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:o}),n&&n(o)}}),!0}}))}}(r,t,e)})):(r.startNumber=t.startNumber,r.segmentDuration=t.segmentDuration,r.timescale=t.timescale,r.templateUrl=function(t){var e=D.isRelative(t.media)?D.resolve(t.media,E.resolve(t.path).url):t.media;return e?Object(u.replaceIDForTemplate)(e,t.id):""}(t)),r.tilesHor>0&&r.tilesVert>0&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,n.push(r))}function R(){n=[],p=-1,g=null}return e={getTracks:function(){return n},addTracks:function(){if(T&&b&&(g=b.getMediaInfoForType(T,r.default.IMAGE))){var t=b.getVoRepresentations(g);t&&t.length>0&&t.forEach((function(t){(t.segmentInfoType===i.default.SEGMENT_TEMPLATE&&t.segmentDuration>0&&t.media||t.segmentInfoType===i.default.SEGMENT_TIMELINE)&&I(t),t.segmentInfoType===i.default.SEGMENT_BASE&&I(t,!0)})),n.length>0&&n.sort((function(t,e){return t.bitrate-e.bitrate}))}},reset:R,setTrackByIndex:function(t){n&&0!==n.length&&(t>=n.length&&(t=n.length-1),p=t)},getCurrentTrack:function(){return p<0?null:n[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(t){for(var e,r=b.getVoRepresentations(g),i=0;i<r.length;i++)if(n[p].id===r[i].id){e=r[i];break}return a.getSegmentRequestForTime(g,e,t)}},R(),m=Object(c.default)(_).create({}),y=Object(l.default)(_).getInstance(),v=Object(d.default)(_).create({events:x,eventBus:A,streamInfo:T,timelineConverter:S,dashConstants:C,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController,type:r.default.IMAGE}),(a=Object(f.default)(_).create({streamInfo:T,type:r.default.IMAGE,timelineConverter:S,segmentsController:v,baseURLController:E,debug:w,eventBus:A,events:x,dashConstants:C,urlUtils:D})).initialize(!!b&&b.getIsDynamic()),e}p.__dashjs_factory_name="ThumbnailTracks",e.default=a.default.getClassFactory(p)},"./src/streaming/utils/BaseURLSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/errors/Errors.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/streaming/controllers/BlacklistController.js"),s=n("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),u=n("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/DashJSError.js"),f=n("./src/streaming/utils/SupervisorTools.js");function d(){var t,e,n,l,d,h=this.context,p=Object(i.default)(h).getInstance();function g(){e.reset()}return t={chooseSelector:function(t){Object(f.checkParameterType)(t,"boolean"),d=t?l:n},select:function(t){if(t){var e=t.baseUrls,i=t.selectedIdx;if(!isNaN(i))return e[i];var o=d.select(e);return o?(t.selectedIdx=e.indexOf(o),o):(p.trigger(a.default.URL_RESOLUTION_FAILED,{error:new c.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(d===n&&g()))}},reset:g,setConfig:function(t){t.selector&&(d=t.selector)}},e=Object(o.default)(h).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),n=Object(u.default)(h).create({blacklistController:e}),l=Object(s.default)(h).create({blacklistController:e}),d=n,t}d.__dashjs_factory_name="BaseURLSelector",e.default=l.default.getClassFactory(d)},"./src/streaming/utils/BoxParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/streaming/utils/IsoFile.js"),a=n("./src/core/FactoryMaker.js"),o=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),s=n.n(o),u=n("./src/streaming/vo/IsoBoxSearchInfo.js");function l(){var t,e,n=this.context;function a(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);var e=s.a.parseBuffer(t),r=Object(i.default)(n).create();return r.setData(e),r}function o(t,e){return t[e+3]>>>0|t[e+2]<<8>>>0|t[e+1]<<16>>>0|t[e]<<24>>>0}function l(t,e){return String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e])}return e={parse:a,findLastTopIsoBoxCompleted:function(t,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new u.default(0,!1);for(var r,i=e instanceof ArrayBuffer?new Uint8Array(e):e,a=0;n<i.byteLength;){var s=o(i,n),c=l(i,n+4);if(0===s)break;n+s<=i.byteLength&&(t.indexOf(c)>=0?r=new u.default(n,!0,s):a=n+s),n+=s}return r||new u.default(a,!1)},getMediaTimescaleFromMoov:function(t){var e=a(t),n=e?e.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var e,n,r,i,o,s,u,l,c,f,d,h,p,g,v,m,y=a(t),_=y.getBoxes("moof"),b=y.getBoxes("mfhd");v=y.getBoxes("moof").length,g=b[b.length-1].sequence_number,n=0,o=[];var E=-1,T=-1;for(f=0;f<_.length;f++){var S=_[f],w=S.getChildBoxes("traf");for(l=0;l<w.length;l++){var A=w[l],x=A.getChildBox("tfhd"),C=A.getChildBox("tfdt");i=C.baseMediaDecodeTime;var D=A.getChildBoxes("trun"),I=A.getChildBoxes("subs");for(c=0;c<D.length;c++){var R=D[c];for(n=R.sample_count,p=(x.base_data_offset||0)+(R.data_offset||0),u=0;u<n;u++){var k={dts:i,cts:i+(void 0!==(s=R.samples[u]).sample_composition_time_offset?s.sample_composition_time_offset:0),duration:e=void 0!==s.sample_duration?s.sample_duration:x.default_sample_duration,offset:S.offset+p,size:r=void 0!==s.sample_size?s.sample_size:x.default_sample_size,subSizes:[r]};if(I)for(d=0;d<I.length;d++){var O=I[d];if(E<O.entry_count-1&&u>T&&(E++,T+=O.entries[E].sample_delta),u==T){k.subSizes=[];var P=O.entries[E];for(h=0;h<P.subsample_count;h++)k.subSizes.push(P.subsamples[h].subsample_size)}}o.push(k),p+=r,i+=e}}m=i-C.baseMediaDecodeTime}}return{sampleList:o,lastSequenceNumber:g,totalDuration:m,numSequences:v}},findInitRange:function(e){var n=null,r=a(e);if(!r)return n;var i=r.getBox("ftyp"),o=r.getBox("moov");return t.debug("Searching for initialization."),o&&o.isComplete&&t.debug("Found the initialization.  Range: "+(n=(i?i.offset:o.offset)+"-"+(o.offset+o.size-1))),n},parsePayload:function(t,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new u.default(0,!1);for(var r,i=e instanceof ArrayBuffer?new Uint8Array(e):e,a=0;n<i.byteLength;){var s=o(i,n),c=l(i,n+4);if(0===s)break;n+s<=i.byteLength&&(t.indexOf(c)>=0?r=new u.default(n,!0,s,c):a=n+s),n+=s}return r||new u.default(a,!1)}},t=Object(r.default)(n).getInstance().getLogger(e),e}l.__dashjs_factory_name="BoxParser",e.default=a.default.getSingletonFactory(l)},"./src/streaming/utils/Capabilities.js":function(t,e,n){"use strict";n.r(e),n.d(e,"supportsMediaSource",(function(){return s}));var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/thumbnail/ThumbnailTracks.js"),a=n("./src/streaming/constants/Constants.js"),o=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function s(){var t="WebKitMediaSource"in window,e="MediaSource"in window;return t||e}function u(){var t,e,n;return t={setConfig:function(t){t&&t.settings&&(e=t.settings)},supportsMediaSource:s,supportsEncryptedMedia:function(){return n},supportsCodec:function(t,n){return n!==a.default.AUDIO&&n!==a.default.VIDEO?Promise.resolve(!0):function(t,n){return e.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(t.codec&&n===a.default.AUDIO||n===a.default.VIDEO&&t.codec&&t.width&&t.height&&t.bitrate&&t.framerate)}(t,n)?function(t,e){return new Promise((function(n){if(t&&t.codec){var r={type:"media-source"};r[e]={},r[e].contentType=t.codec,r[e].width=t.width,r[e].height=t.height,r[e].bitrate=parseInt(t.bitrate),r[e].framerate=parseFloat(t.framerate),navigator.mediaCapabilities.decodingInfo(r).then((function(t){n(t.supported)})).catch((function(){n(!1)}))}else n(!1)}))}(t,n):function(t){return new Promise((function(e){if(t&&t.codec){var n=t.codec;t.width&&t.height&&(n+=';width="'+t.width+'";height="'+t.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(n)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(n)?e(!0):e(!1)}else e(!1)}))}(t)},setEncryptedMediaSupported:function(t){n=t},supportsEssentialProperty:function(t){try{return-1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(t.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(t,e){for(var n,r=t.split(".")[0],i=0===e.indexOf(r),a=0;a<o.length;a++)if(o[a].codec===r){n=o[a];break}return n?i||n.compatibleCodecs.some((function(t){return 0===e.indexOf(t)})):i}},n=!1,t}u.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(u)},"./src/streaming/utils/CapabilitiesFilter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js");function o(){var t,e,n,r,o,s,u=this.context;function l(t,r){if(!r||!r.Period_asArray||0===r.Period_asArray.length)return Promise.resolve();var i=[];return r.Period_asArray.forEach((function(r){i.push(function(t,r){return new Promise((function(i){if(t&&t.AdaptationSet_asArray&&0!==t.AdaptationSet_asArray.length){var s=[];t.AdaptationSet_asArray.forEach((function(t){e.getIsTypeOf(t,r)&&s.push(function(t,r){return new Promise((function(i){if(t.Representation_asArray&&0!==t.Representation_asArray.length){var s=[],u=[];t.Representation_asArray.forEach((function(i,o){var l=e.getCodec(t,o,!1),c=function(t,e,n){switch(t){case a.default.VIDEO:return function(t,e){return{codec:e,width:t.width||null,height:t.height||null,framerate:t.frameRate||null,bitrate:t.bandwidth||null}}(e,n);case a.default.AUDIO:return function(t,e){return{codec:e,bitrate:t.bandwidth||null,samplerate:t.audioSamplingRate||null}}(e,n);default:return null}}(r,i,l);u.push(c),s.push(n.supportsCodec(c,r))})),Promise.all(s).then((function(e){t.Representation_asArray=t.Representation_asArray.filter((function(t,n){return e[n]||o.debug("[Stream] Codec ".concat(u[n].codec," not supported ")),e[n]})),i()})).catch((function(){i()}))}else i()}))}(t,r))})),Promise.all(s).then((function(){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){var e=t.Representation_asArray&&t.Representation_asArray.length>0;return e||o.warn("AdaptationSet has been removed because of no supported Representation"),e})),i()})).catch((function(){i()}))}else i()}))}(r,t))})),Promise.all(i)}return t={setConfig:function(t){t&&(t.adapter&&(e=t.adapter),t.capabilities&&(n=t.capabilities),t.settings&&(r=t.settings))},filterUnsupportedFeatures:function(t){return new Promise((function(i){var u=[];u.push(l(a.default.VIDEO,t)),u.push(l(a.default.AUDIO,t)),Promise.all(u).then((function(){r.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(t){t&&t.Period_asArray&&0!==t.Period_asArray.length&&t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){var r=e.getEssentialPropertiesForRepresentation(t);if(r&&r.length>0)for(var i=0;i<r.length;){if(!n.supportsEssentialProperty(r[i]))return o.debug("[Stream] EssentialProperty not supported: "+r[i].schemeIdUri),!1;i+=1}return!0})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),function(t){s&&0!==s.length&&t&&t.Period_asArray&&0!==t.Period_asArray.length&&t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){return!s.some((function(e){return!e(t)}))})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),i()})).catch((function(){i()}))}))},setCustomCapabilitiesFilters:function(t){s=t}},o=Object(i.default)(u).getInstance().getLogger(t),t}o.__dashjs_factory_name="CapabilitiesFilter",e.default=r.default.getSingletonFactory(o)},"./src/streaming/utils/CustomTimeRanges.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/SupervisorTools.js");function a(){return{customTimeRangeArray:[],length:0,add:function(t,e){var n=0;for(n=0;n<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:t,end:e}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(t,e){for(var n=0;n<this.customTimeRangeArray.length;n++)if(t<=this.customTimeRangeArray[n].start&&e>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(t>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:e,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=t;break}t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=t:e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=e)}this.length=this.customTimeRangeArray.length},mergeRanges:function(t,e){var n=this.customTimeRangeArray[t],r=this.customTimeRangeArray[e];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(e,1),!0)},start:function(t){return Object(i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return Object(i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}a.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(a)},"./src/streaming/utils/DOMStorage.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),o=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}];function s(t){var e,n,r,s=this.context,u=(t=t||{}).settings;function l(t){if(void 0!==r)return r;var e;r=!1;try{"undefined"!=typeof window&&(e=window[t])}catch(i){return n.warn("DOMStorage access denied: "+i.message),r}if(!e||"localStorage"!==t&&"sessionStorage"!==t)return r;try{e.setItem("1","1"),e.removeItem("1"),r=!0}catch(i){n.warn("DOMStorage is supported, but cannot be used: "+i.message)}return r}function c(){return 6e5*Math.round((new Date).getTime()/6e5)}function f(t,e){return l(t)&&u.get().streaming[e+"CachingInfo"].enabled}function d(){if(!u)throw new Error(a.default.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(t){var e=NaN;if(d(),f("localStorage","lastBitrate")){var r="dashjs_?_bitrate".replace(/\?/,t);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=u.get().streaming.lastBitrateCachingInfo.ttl||!1,o=parseFloat(i.bitrate);isNaN(o)||a?a&&localStorage.removeItem(r):(e=o,n.debug("Last saved bitrate for "+t+" was "+o))}catch(s){return null}}return e},setSavedBitrateSettings:function(t,e){if(f("localStorage","lastBitrate")&&e){var r="dashjs_?_bitrate".replace(/\?/,t);try{localStorage.setItem(r,JSON.stringify({bitrate:e.toFixed(3),timestamp:c()}))}catch(i){n.error(i.message)}}},getSavedMediaSettings:function(t){var e=null;if(d(),f("localStorage","lastMediaSettings")){var n="dashjs_?_settings".replace(/\?/,t);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=u.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;e=r.settings,i&&(localStorage.removeItem(n),e=null)}catch(a){return null}}return e},setSavedMediaSettings:function(t,e){if(f("localStorage","lastMediaSettings")){var r="dashjs_?_settings".replace(/\?/,t);try{localStorage.setItem(r,JSON.stringify({settings:e,timestamp:c()}))}catch(i){n.error(i.message)}}}},n=Object(i.default)(s).getInstance().getLogger(e),l("localStorage")&&o.forEach((function(t){var e=localStorage.getItem(t.oldKey);if(e){localStorage.removeItem(t.oldKey);try{localStorage.setItem(t.newKey,e)}catch(r){n.error(r.message)}}})),e}s.__dashjs_factory_name="DOMStorage";var u=r.default.getSingletonFactory(s);e.default=u},"./src/streaming/utils/DefaultURLUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t,e=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,a=function(t,e){try{return new window.URL(t,e).toString()}catch(n){return t}},o=function(t,e){var n=s;if(!e)return t;if(!c(t))return t;f(t)&&(n=u),d(t)&&(n=l);var r=n(e),i="/"!==r.charAt(r.length-1)&&"/"!==t.charAt(0)?"/":"";return[r,t].join(i)};function s(t){var e=t.indexOf("/"),n=t.lastIndexOf("/");return-1!==e?n===e+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,n+1)):""}function u(t){var e=t.match(i);return e?e[1]:""}function l(t){var n=t.match(e);return n?n[0]:""}function c(t){return!e.test(t)}function f(t){return c(t)&&"/"===t.charAt(0)}function d(t){return 0===t.indexOf("//")}return function(){try{new window.URL("x","http://y"),t=a}catch(e){}finally{t=t||o}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:c,isPathAbsolute:f,isSchemeRelative:d,isHTTPURL:function(t){return n.test(t)},isHTTPS:function(t){return r.test(t)},removeHostname:function(t){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t)[2].substring(1)},resolve:function(e,n){return t(e,n)}}}i.__dashjs_factory_name="DefaultURLUtils",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/EBMLParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e;t=t||{};var n=new DataView(t.data),r=0;function i(t,e){var i=!0,a=0;if(void 0===e&&(e=!1),t.tag>16777215?(n.getUint32(r)!==t.tag&&(i=!1),a=4):t.tag>65535?(256*n.getUint16(r)+n.getUint8(r+2)!==t.tag&&(i=!1),a=3):t.tag>255?(n.getUint16(r)!==t.tag&&(i=!1),a=2):(n.getUint8(r)!==t.tag&&(i=!1),a=1),!i&&t.required&&!e)throw new Error("required tag not found");return i&&(r+=a),i}function a(t){var e=1,i=128,a=-1,o=0,s=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((s&i)===i){o=void 0===t?s&~i:s,a=u;break}i>>=1}for(u=0;u<a;u+=1,e+=1)o=o<<8|255&n.getUint8(r+e);return r+=e,o}return e={getPos:function(){return r},setPos:function(t){r=t},consumeTag:i,consumeTagAndSize:function(t,e){var n=i(t,e);return n&&a(),n},parseTag:function(t){var n;return i(t),n=a(),e[t.parse](n)},skipOverElement:function(t,e){var n,o=i(t,e);return o&&(n=a(),r+=n),o},getMatroskaCodedNum:a,getMatroskaFloat:function(t){var e;switch(t){case 4:e=n.getFloat32(r),r+=4;break;case 8:e=n.getFloat64(r),r+=8}return e},getMatroskaUint:function(t){for(var e=0,i=0;i<t;i+=1)e<<=8,e|=255&n.getUint8(r+i);return r+=t,e},moreData:function(){return r<n.byteLength}}}i.__dashjs_factory_name="EBMLParser",e.default=r.default.getClassFactory(i)},"./src/streaming/utils/ErrorHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function o(){var t=this.context,e=Object(r.default)(t).getInstance();return{error:function(t){e.trigger(i.default.ERROR,{error:t})}}}o.__dashjs_factory_name="ErrorHandler",e.default=a.default.getSingletonFactory(o)},"./src/streaming/utils/InitCache.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t={};return{save:function(e){var n=e.streamId,r=e.representationId;t[n]=t[n]||{},t[n][r]=e},extract:function(e,n){return t&&t[e]&&t[e][n]?t[e][n]:null},reset:function(){t={}}}}i.__dashjs_factory_name="InitCache",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/IsoFile.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/IsoBox.js"),i=n("./src/core/FactoryMaker.js");function a(){var t;function e(e){var r=[];if(!e||!t||"function"!=typeof t.fetchAll)return r;for(var i,a=t.fetchAll(e),o=0,s=a.length;o<s;o++)(i=n(a[o]))&&r.push(i);return r}function n(t){if(!t)return null;var e=new r.default(t);return t.hasOwnProperty("_incomplete")&&(e.isComplete=!t._incomplete),e}return{getBox:function(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"==typeof t.fetch?n(t.fetch(e)):null},getBoxes:e,setData:function(e){t=e},getLastBox:function(){if(!t||!t.boxes||!t.boxes.length)return null;var n=e(t.boxes[t.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}a.__dashjs_factory_name="IsoFile",e.default=i.default.getClassFactory(a)},"./src/streaming/utils/ObjectUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./node_modules/fast-deep-equal/index.js"),a=n.n(i);function o(){return{areEqual:function(t,e){return a()(t,e)}}}o.__dashjs_factory_name="ObjectUtils",e.default=r.default.getSingletonFactory(o)},"./src/streaming/utils/RequestModifier.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){return{modifyRequestURL:function(t){return t},modifyRequestHeader:function(t){return t}}}i.__dashjs_factory_name="RequestModifier",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/SupervisorTools.js":function(t,e,n){"use strict";n.r(e),n.d(e,"checkParameterType",(function(){return a})),n.d(e,"checkInteger",(function(){return o})),n.d(e,"checkRange",(function(){return s})),n.d(e,"checkIsVideoOrAudioType",(function(){return u}));var r=n("./src/streaming/constants/Constants.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(i(t)!==e)throw r.default.BAD_ARGUMENT_ERROR}function o(t){if(null===t||isNaN(t)||t%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function s(t,e,n){if(t<e||t>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(t){if("string"!=typeof t||t!==r.default.AUDIO&&t!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./node_modules/imsc/src/main/js/main.js"),u=n("./src/streaming/MediaPlayerEvents.js"),l=n("./src/streaming/constants/ConformanceViolationConstants.js");function c(){var t,e,n=this.context,r=Object(a.default)(n).getInstance(),c=0;return t={parse:function(t,n,i,a,f){var d,h,p,g="",v=[],m={},y={},_="",b="",E={onOpenTag:function(t,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(r.trigger(u.default.CONFORMANCE_VIOLATION,{level:l.default.LEVELS.ERROR,event:l.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===t||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===t)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void e.warn("smpte-tt imageType != PNG. Discarded");_=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){_&&(y[_]=b.trim()),b="",_=""},onText:function(t){_&&(b+=t)}};if(!t)throw g="no ttml data to parse",new Error(g);m.data=t,r.trigger(o.default.TTML_TO_PARSE,m);var T=Object(s.fromXML)(m.data,(function(t){g=t}),E);r.trigger(o.default.TTML_PARSED,{ttmlString:m.data,ttmlDoc:T});var S,w=T.getMediaTimeEvents();for(p=0;p<w.length;p++){var A=Object(s.generateISD)(T,w[p],(function(t){g=t}));A.contents.some((function(t){return t.contents.length}))&&(d=w[p]+n<i?i:w[p]+n)<(h=w[p+1]+n>a?a:w[p+1]+n)&&v.push({start:d,end:h,type:"html",cueID:(S="cue_TTML_"+c,c++,S),isd:A,images:f,embeddedImages:y})}if(""!==g)throw e.error(g),new Error(g);return v}},e=Object(i.default)(n).getInstance().getLogger(t),t}c.__dashjs_factory_name="TTMLParser",e.default=r.default.getSingletonFactory(c)},"./src/streaming/utils/URLUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/DefaultURLUtils.js");function a(){var t,e=[],n=this.context;function r(n,r,i){var a=function(n){var r;for(r=0;r<e.length;r++)if(e[r].regex.test(n))return e[r].utils;return t}(i||r);return a&&"function"==typeof a[n]?a[n](r,i):t[n](r,i)}return t=Object(i.default)(n).getInstance(),{registerUrlRegex:function(t,n){e.push({regex:t,utils:n})},parseBaseUrl:function(t){return r("parseBaseUrl",t)},parseOrigin:function(t){return r("parseOrigin",t)},parseScheme:function(t){return r("parseScheme",t)},isRelative:function(t){return r("isRelative",t)},isPathAbsolute:function(t){return r("isPathAbsolute",t)},isSchemeRelative:function(t){return r("isSchemeRelative",t)},isHTTPURL:function(t){return r("isHTTPURL",t)},isHTTPS:function(t){return r("isHTTPS",t)},removeHostname:function(t){return r("removeHostname",t)},resolve:function(t,e){return r("resolve",t,e)}}}a.__dashjs_factory_name="URLUtils";var o=r.default.getSingletonFactory(a);e.default=o},"./src/streaming/utils/VTTParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r,a,o,s=this.context;function u(t){var e=t.split(":"),n=e.length-1;return t=60*parseInt(e[n-1],10)+parseFloat(e[n]),2===n&&(t+=3600*parseInt(e[0],10)),t}function l(t){var e=t.split(r),n=e[1].split(o);return n.shift(),e[1]=n[0],n.shift(),{cuePoints:e,styles:c(n)}}function c(t){var e={};return t.forEach((function(t){if(t.split(/:/).length>1){var n=t.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(t.match(/align/)||t.match(/A/))&&(e.align=n),(t.match(/line/)||t.match(/L/))&&(e.line=n),(t.match(/position/)||t.match(/P/))&&(e.position=n),(t.match(/size/)||t.match(/S/))&&(e.size=n)}})),e}function f(t,e){for(var n,i=e,a="",o="";""!==t[i]&&i<t.length;)i++;if((n=i-e)>1)for(var s=0;s<n;s++){if((o=t[e+s]).match(r)){a="";break}a+=o,s!==n-1&&(a+="\n")}else(o=t[e]).match(r)||(a=o);return a}return t={parse:function(t){var i,o,s=[];if(!t)return s;i=(t=t.split(n)).length,o=-1;for(var c=0;c<i;c++){var d=t[c];if(d.length>0&&"WEBVTT"!==d&&d.match(r)){var h=l(d),p=h.cuePoints,g=h.styles,v=f(t,c+1),m=u(p[0].replace(a,"")),y=u(p[1].replace(a,""));!isNaN(m)&&!isNaN(y)&&m>=o&&y>m?""!==v?(o=m,s.push({start:m,end:y,data:v,styles:g})):e.error("Skipping cue due to empty/malformed cue text"):e.error("Skipping cue due to incorrect cue timing")}}return s}},e=Object(i.default)(s).getInstance().getLogger(t),n=/(?:\r\n|\r|\n)/gm,r=/-->/,a=/(^[\s]+|[\s]+$)/g,o=/\s\b/g,t}a.__dashjs_factory_name="VTTParser",e.default=r.default.getSingletonFactory(a)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).blacklistController;return{select:function(t){var n,r=0;return t&&t.some((function(t,n){return r=n,!e.contains(t.serviceLocation)}))&&(n=t[r]),n}}}i.__dashjs_factory_name="BasicSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).blacklistController;return{select:function(t){return t&&function(t){var e,n,r=0,i=[],a=0;if((n=t.sort((function(t,e){var n=t.dvb_priority-e.dvb_priority;return isNaN(n)?0:n})).filter((function(t,e,n){return!e||n[0].dvb_priority&&t.dvb_priority&&n[0].dvb_priority===t.dvb_priority}))).length)return n.length>1&&(n.forEach((function(t){i.push(r+=t.dvb_weight)})),e=Math.floor(Math.random()*(r-1)),i.every((function(t,n){return a=n,!(e<t)}))),n[a]}((n=[],t.filter((function(t){return!e.contains(t.serviceLocation)||(t.dvb_priority&&n.push(t.dvb_priority),!1)})).filter((function(t){return!n.length||!t.dvb_priority||-1===n.indexOf(t.dvb_priority)}))));var n}}}i.__dashjs_factory_name="DVBSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/vo/BitrateInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=e||null,this.message=n||null,this.data=r||null}},"./src/streaming/vo/DataChunk.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/metrics/HTTPRequest.js"),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=t.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var e;return(e=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(t){this.type=t&&t.init?r.HTTPRequest.INIT_SEGMENT_TYPE:r.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=t&&t.url?t.url:null,this.range=t&&t.range?t.range.start+"-"+t.range.end:null,this.mediaType=t&&t.mediaType?t.mediaType:null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",e.default=i},"./src/streaming/vo/HeadRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/FragmentRequest.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).checkForExistenceOnly=!0,e}return i}(r.default)},"./src/streaming/vo/IsoBox.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var n=0;n<e.boxes.length;n++)this.boxes.push(new t(e.boxes[n]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var r=0;r<e.references.length;r++)this.references.push({reference_type:e.references[r].reference_type,referenced_size:e.references[r].referenced_size,subsegment_duration:e.references[r].subsegment_duration})}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var i=0,a=e.samples.length;i<a;i++)this.samples.push({sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset})}}}var e;return(e=[{key:"getChildBox",value:function(t){for(var e=0;e<this.boxes.length;e++)if(this.boxes[e].type===t)return this.boxes[e]}},{key:"getChildBoxes",value:function(t){for(var e=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===t&&e.push(this.boxes[n]);return e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastCompletedOffset=e,this.found=n,this.size=r}},"./src/streaming/vo/MetricsList.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/FragmentRequest.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,i=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).url=t||null,n.type=e||null,n.mediaType=r.default.STREAM,n.responseType="",n}return a}(i.default)},"./src/streaming/vo/TextTrackInfo.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/MediaInfo.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).captionData=null,t.label=null,t.defaultTrack=!1,t.kind=null,t.isFragmented=!1,t.isEmbedded=!1,t.isTTML=null,t}return i}(r.default)},"./src/streaming/vo/Thumbnail.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js");e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=null,this.state=r.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"HTTPRequest",(function(){return i})),n.d(e,"HTTPRequestTrace",(function(){return a}));var i=function t(){r(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null},a=function t(){r(this,t),this.s=null,this.d=null,this.b=[],this.t=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.LICENSE="license",i.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"ManifestUpdate",(function(){return i})),n.d(e,"ManifestUpdateStreamInfo",(function(){return a})),n.d(e,"ManifestUpdateRepresentationInfo",(function(){return o}));var i=function t(){r(this,t),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},a=function t(){r(this,t),this.id=null,this.index=null,this.start=null,this.duration=null},o=function t(){r(this,t),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"PlayList",(function(){return i})),n.d(e,"PlayListTrace",(function(){return a}));var i=function t(){r(this,t),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function t(){r(this,t),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(t,e){},1:function(t,e){}}).default},t.exports=r()},"c4+4":function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var r=n(5),i=n(1),a=i.toHex,o=i.ceilHeapSize,s=n(6),u=function(t){for(t+=9;t%64>0;t+=1);return t},l=function(t,e){var n=new Int32Array(t,e+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=e,this._padMaxChunkLen=u(e),this._heap=new ArrayBuffer(o(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new r({Int32Array:Int32Array},{},this._heap)}return t.prototype._initState=function(t,e){this._offset=0;var n=new Int32Array(t,e+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},t.prototype._padChunk=function(t,e){var n=u(t),r=new Int32Array(this._heap,0,n>>2);return function(t,e){var n=new Uint8Array(t.buffer),r=e%4,i=e-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var a=1+(e>>2);a<t.length;a++)t[a]=0}(r,t),function(t,e,n){t[e>>2]|=128<<24-(e%4<<3),t[14+(2+(e>>2)&-16)]=n/(1<<29)|0,t[15+(2+(e>>2)&-16)]=n<<3}(r,t,e),n},t.prototype._write=function(t,e,n,r){s(t,this._h8,this._h32,e,n,r||0)},t.prototype._coreCall=function(t,e,n,r,i){var a=n;this._write(t,e,n),i&&(a=this._padChunk(n,r)),this._core.hash(a,this._padMaxChunkLen)},t.prototype.rawDigest=function(t){var e=t.byteLength||t.length||t.size||0;this._initState(this._heap,this._padMaxChunkLen);var n=0,r=this._maxChunkLen;for(n=0;e>n+r;n+=r)this._coreCall(t,n,r,e,!1);return this._coreCall(t,n,e-n,e,!0),l(this._heap,this._padMaxChunkLen)},t.prototype.digest=function(t){return a(this.rawDigest(t).buffer)},t.prototype.digestFromString=function(t){return this.digest(t)},t.prototype.digestFromBuffer=function(t){return this.digest(t)},t.prototype.digestFromArrayBuffer=function(t){return this.digest(t)},t.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},t.prototype.append=function(t){var e=0,n=t.byteLength||t.length||t.size||0,r=this._offset%this._maxChunkLen,i=void 0;for(this._offset+=n;e<n;)i=Math.min(n-e,this._maxChunkLen-r),this._write(t,e,i,r),e+=i,(r+=i)===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),r=0);return this},t.prototype.getState=function(){var t=void 0;if(this._offset%this._maxChunkLen)t=this._heap.slice(0);else{var e=new Int32Array(this._heap,this._padMaxChunkLen+320,5);t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}return{offset:this._offset,heap:t}},t.prototype.setState=function(t){return this._offset=t.offset,20===t.heap.byteLength?new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(t.heap)):this._h32.set(new Int32Array(t.heap)),this},t.prototype.rawEnd=function(){var t=this._offset,e=this._padChunk(t%this._maxChunkLen,t);this._core.hash(e,this._padMaxChunkLen);var n=l(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),n},t.prototype.end=function(){return a(this.rawEnd().buffer)},t}();t.exports=c,t.exports._core=r},function(t,e){for(var n=new Array(256),r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);t.exports.toHex=function(t){for(var e=new Uint8Array(t),r=new Array(t.byteLength),i=0;i<r.length;i++)r[i]=n[e[i]];return r.join("")},t.exports.ceilHeapSize=function(t){var e=0;if(t<=65536)return 65536;if(t<16777216)for(e=1;e<t;e<<=1);else for(e=16777216;e<t;e+=16777216);return e},t.exports.isDedicatedWorkerScope=function(t){return"WorkerGlobalScope"in t&&t instanceof t.WorkerGlobalScope&&!("SharedWorkerGlobalScope"in t&&t instanceof t.SharedWorkerGlobalScope)&&!("ServiceWorkerGlobalScope"in t&&t instanceof t.ServiceWorkerGlobalScope)}},function(t,e,n){t.exports=function(){var t=n(0),e=!0;return self.onmessage=function(n){if(e){var r=n.data.data,i=n.data.file,a=n.data.id;if(void 0!==a&&(i||r)){var o=n.data.blockSize||4194304,s=new t(o);s.resetState();var u=function(t,e){t?self.postMessage({id:a,error:t.name}):self.postMessage({id:a,hash:e})};r&&function(t,e,n){try{n(null,t.digest(e))}catch(r){return n(r)}}(s,r,u),i&&function t(e,n,r,i,a){var o=new self.FileReader;o.onloadend=function(){if(o.error)return a(o.error);var s=o.result;n+=o.result.byteLength;try{e.append(s)}catch(u){return void a(u)}n<i.size?t(e,n,r,i,a):a(null,e.end())},o.readAsArrayBuffer(i.slice(n,n+r))}(s,0,o,i,u)}}},function(){e=!1}}},function(t,e,n){var r=n(4),i=n(0),a=n(7),o=n(2),s=n(1),u="undefined"!=typeof self&&(0,s.isDedicatedWorkerScope)(self);i.disableWorkerBehaviour=u?o():function(){},i.createWorker=function(){var t=r(2),e=t.terminate;return t.terminate=function(){URL.revokeObjectURL(t.objectURL),e.call(t)},t},i.createHash=a,t.exports=i},function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,r){var a={};a[r]=[];var o=e.toString(),s=o.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return a;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(o);)"dll-reference"!==u[3]&&a[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(o);)t[u[2]]||(a[r].push(u[1]),t[u[2]]=n(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);return a}function o(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){var i={main:n.m},s=(e=e||{}).all?{main:Object.keys(i)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};o(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var l=s[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var f=a(t,t[l][c],l),d=Object.keys(f),h=0;h<d.length;h++)n[d[h]]=n[d[h]]||[],n[d[h]]=n[d[h]].concat(f[d[h]])}}return r}(i,t),u="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"})(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},function(t,e){t.exports=function(t,e,n){"use asm";var r=new t.Int32Array(n);function i(t,e){t=t|0;e=e|0;var n=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0,f=0,d=0,h=0,p=0,g=0,v=0;a=r[e+320>>2]|0;s=r[e+324>>2]|0;l=r[e+328>>2]|0;f=r[e+332>>2]|0;h=r[e+336>>2]|0;for(n=0;(n|0)<(t|0);n=n+64|0){o=a;u=s;c=l;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){v=r[n+i>>2]|0;g=((a<<5|a>>>27)+(s&l|~s&f)|0)+((v+h|0)+1518500249|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;r[t+i>>2]=v}for(i=t+64|0;(i|0)<(t+80|0);i=i+4|0){v=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s&l|~s&f)|0)+((v+h|0)+1518500249|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;r[i>>2]=v}for(i=t+80|0;(i|0)<(t+160|0);i=i+4|0){v=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s^l^f)|0)+((v+h|0)+1859775393|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;r[i>>2]=v}for(i=t+160|0;(i|0)<(t+240|0);i=i+4|0){v=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s&l|s&f|l&f)|0)+((v+h|0)-1894007588|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;r[i>>2]=v}for(i=t+240|0;(i|0)<(t+320|0);i=i+4|0){v=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s^l^f)|0)+((v+h|0)-899497514|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;r[i>>2]=v}a=a+o|0;s=s+u|0;l=l+c|0;f=f+d|0;h=h+p|0}r[e+320>>2]=a;r[e+324>>2]=s;r[e+328>>2]=l;r[e+332>>2]=f;r[e+336>>2]=h}return{hash:i}}},function(t,e){var n=this,r=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(r=new self.FileReaderSync);var i=function(t,e,n,r,i,a){var o=void 0,s=a%4,u=(i+s)%4,l=i-u;switch(s){case 0:e[a]=t[r+3];case 1:e[a+1-(s<<1)|0]=t[r+2];case 2:e[a+2-(s<<1)|0]=t[r+1];case 3:e[a+3-(s<<1)|0]=t[r]}if(!(i<u+(4-s))){for(o=4-s;o<l;o=o+4|0)n[a+o>>2|0]=t[r+o]<<24|t[r+o+1]<<16|t[r+o+2]<<8|t[r+o+3];switch(u){case 3:e[a+l+1|0]=t[r+l+2];case 2:e[a+l+2|0]=t[r+l+1];case 1:e[a+l+3|0]=t[r+l]}}};t.exports=function(t,e,a,o,s,u){if("string"==typeof t)return function(t,e,n,r,i,a){var o=void 0,s=a%4,u=(i+s)%4,l=i-u;switch(s){case 0:e[a]=t.charCodeAt(r+3);case 1:e[a+1-(s<<1)|0]=t.charCodeAt(r+2);case 2:e[a+2-(s<<1)|0]=t.charCodeAt(r+1);case 3:e[a+3-(s<<1)|0]=t.charCodeAt(r)}if(!(i<u+(4-s))){for(o=4-s;o<l;o=o+4|0)n[a+o>>2]=t.charCodeAt(r+o)<<24|t.charCodeAt(r+o+1)<<16|t.charCodeAt(r+o+2)<<8|t.charCodeAt(r+o+3);switch(u){case 3:e[a+l+1|0]=t.charCodeAt(r+l+2);case 2:e[a+l+2|0]=t.charCodeAt(r+l+1);case 1:e[a+l+3|0]=t.charCodeAt(r+l)}}}(t,e,a,o,s,u);if(t instanceof Array)return i(t,e,a,o,s,u);if(n&&n.Buffer&&n.Buffer.isBuffer(t))return i(t,e,a,o,s,u);if(t instanceof ArrayBuffer)return i(new Uint8Array(t),e,a,o,s,u);if(t.buffer instanceof ArrayBuffer)return i(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e,a,o,s,u);if(t instanceof Blob)return function(t,e,n,i,a,o){var s=void 0,u=o%4,l=(a+u)%4,c=a-l,f=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(a<l+(4-u))){for(s=4-u;s<c;s=s+4|0)n[o+s>>2|0]=f[s]<<24|f[s+1]<<16|f[s+2]<<8|f[s+3];switch(l){case 3:e[o+c+1|0]=f[c+2];case 2:e[o+c+2|0]=f[c+1];case 1:e[o+c+3|0]=f[c]}}}(t,e,a,o,s,u);throw new Error("Unsupported data type.")}},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=n(1).toHex,o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rusha=new i,this._rusha.resetState()}return t.prototype.update=function(t){return this._rusha.append(t),this},t.prototype.digest=function(t){var e=this._rusha.rawEnd().buffer;if(!t)return e;if("hex"===t)return a(e);throw new Error("unsupported digest encoding")},r(t,[{key:"state",get:function(){return this._rusha.getState()},set:function(t){this._rusha.setState(t)}}]),t}();t.exports=function(){return new o}}])},t.exports=r()},cIfH:function(t,e,n){"use strict";var r=n("4abu"),i={allowBooleanAttributes:!1},a=["allowBooleanAttributes"];function o(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var r=t.substr(n,e-n);if(e>5&&"xml"===r)return d("InvalidXml","XML declaration allowed only at the start of the document.",p(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&0===--n)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function u(t,e){for(var n="",r="",i=!1;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===r)r=t[e];else{if(r!==t[e])continue;r=""}else if(">"===t[e]&&""===r){i=!0;break}n+=t[e]}return""===r&&{value:n,index:e,tagClosed:i}}e.validate=function(t,e){e=r.buildOptions(e,i,a);var n=[],l=!1,h=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var g=0;g<t.length;g++){if("<"!==t[g]){if(" "===t[g]||"\t"===t[g]||"\n"===t[g]||"\r"===t[g])continue;return d("InvalidChar","char '"+t[g]+"' is not expected.",p(t,g))}if("?"===t[++g]){if((g=o(t,++g)).err)return g}else{if("!"===t[g]){g=s(t,g);continue}var v=!1;"/"===t[g]&&(v=!0,g++);for(var m="";g<t.length&&">"!==t[g]&&" "!==t[g]&&"\t"!==t[g]&&"\n"!==t[g]&&"\r"!==t[g];g++)m+=t[g];if("/"===(m=m.trim())[m.length-1]&&(m=m.substring(0,m.length-1),g--),!r.isName(m)){return d("InvalidTag",0===m.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+m+"' is an invalid name.",p(t,g))}var y=u(t,g);if(!1===y)return d("InvalidAttr","Attributes for '"+m+"' have open quote.",p(t,g));var _=y.value;if(g=y.index,"/"===_[_.length-1]){var b=c(_=_.substring(0,_.length-1),e);if(!0!==b)return d(b.err.code,b.err.msg,p(t,g-_.length+b.err.line));l=!0}else if(v){if(!y.tagClosed)return d("InvalidTag","Closing tag '"+m+"' doesn't have proper closing.",p(t,g));if(_.trim().length>0)return d("InvalidTag","Closing tag '"+m+"' can't have attributes or invalid starting.",p(t,g));var E=n.pop();if(m!==E)return d("InvalidTag","Closing tag '"+E+"' is expected inplace of '"+m+"'.",p(t,g));0==n.length&&(h=!0)}else{var T=c(_,e);if(!0!==T)return d(T.err.code,T.err.msg,p(t,g-_.length+T.err.line));if(!0===h)return d("InvalidXml","Multiple possible root nodes found.",p(t,g));n.push(m),l=!0}for(g++;g<t.length;g++){if("<"===t[g]){if("!"===t[g+1]){g=s(t,++g);continue}break}if("&"===t[g]){var S=f(t,g);if(-1==S)return d("InvalidChar","char '&' is not expected.",p(t,g));g=S}}"<"===t[g]&&g--}}return l?!(n.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):d("InvalidXml","Start tag expected.",1)};var l=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function c(t,e){for(var n=r.getAllMatches(t,l),i={},a=0;a<n.length;a++){if(0===n[a][1].length)return d("InvalidAttr","Attribute '"+n[a][2]+"' has no space in starting.",g(t,n[a][0]));if(void 0===n[a][3]&&!e.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+n[a][2]+"' is not allowed.",g(t,n[a][0]));var o=n[a][2];if(!h(o))return d("InvalidAttr","Attribute '"+o+"' is an invalid name.",g(t,n[a][0]));if(i.hasOwnProperty(o))return d("InvalidAttr","Attribute '"+o+"' is repeated.",g(t,n[a][0]));i[o]=1}return!0}function f(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);for(var n=0;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function d(t,e,n){return{err:{code:t,msg:e,line:n}}}function h(t){return r.isName(t)}function p(t,e){return t.substring(0,e).split(/\r?\n/).length}function g(t,e){return t.indexOf(e)+e.length}},elGS:function(t,e,n){"use strict";var r=n("j/LU"),i=n("E1E9"),a=n("E1E9"),o=n("4abu").buildOptions,s=n("cIfH");e.parse=function(t,e,n){if(n){!0===n&&(n={});var u=s.validate(t,n);if(!0!==u)throw Error(u.err.msg)}e=o(e,a.defaultOptions,a.props);var l=i.getTraversalObj(t,e);return r.convertToJson(l,e)},e.convertTonimn=n("vtNb").convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=r.convertToJson,e.convertToJsonString=n("t6xR").convertToJsonString,e.validate=s.validate,e.j2xParser=n("p1mf"),e.parseToNimn=function(t,n,r){return e.convertTonimn(e.getTraversalObj(t,r),n,r)}},"j/LU":function(t,e,n){"use strict";var r=n("4abu");e.convertToJson=function t(e,n){var i={};if(!(e.child&&!r.isEmptyObject(e.child)||e.attrsMap&&!r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==n.cdataPositionChar)&&(i[n.textNodeName]="strict"===n.arrayMode?[e.val]:e.val),r.merge(i,e.attrsMap,n.arrayMode);for(var a=Object.keys(e.child),o=0;o<a.length;o++){var s=a[o];if(e.child[s]&&e.child[s].length>1)for(var u in i[s]=[],e.child[s])i[s].push(t(e.child[s][u],n));else if(!0===n.arrayMode){var l=t(e.child[s][0],n);i[s]="object"==typeof l?[l]:l}else i[s]="strict"===n.arrayMode?[t(e.child[s][0],n)]:t(e.child[s][0],n)}return i}},kiQV:function(t){t.exports=JSON.parse('{"a":"0.1.1"}')},kyqF:function(t,e,n){!function(){"use strict";var t;function e(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0}function r(t,n,r){for(var i=!1,a=0;a<t.length;a++)t[a].updateOptions({drawCallback:function(a,o){if(!i&&!o){i=!0;var s={dateWindow:a.xAxisRange()};n.range&&(s.valueRange=a.yAxisRange());for(var u=0;u<t.length;u++)t[u]!=a?e(s.dateWindow,t[u].getOption("dateWindow"))&&e(s.valueRange,t[u].getOption("valueRange"))||t[u].updateOptions(s):r[u]&&r[u].drawCallback&&r[u].drawCallback.apply(this,arguments);i=!1}}},!0)}function i(t,e){for(var n=!1,r=0;r<t.length;r++)t[r].updateOptions({highlightCallback:function(r,i,a,o,s){if(!n){n=!0;for(var u=this,l=0;l<t.length;l++)if(u!=t[l]){var c=t[l].getRowForX(i);null!==c&&t[l].setSelection(c,s)}else e[l]&&e[l].highlightCallback&&e[l].highlightCallback.apply(this,arguments);n=!1}},unhighlightCallback:function(r){if(!n){n=!0;for(var i=this,a=0;a<t.length;a++)i!=t[a]?t[a].clearSelection():e[a]&&e[a].unhighlightCallback&&e[a].unhighlightCallback.apply(this,arguments);n=!1}}},!0)}(t=window.Dygraph?window.Dygraph:n("Cnnb")).synchronize=function(){if(0===arguments.length)throw"Invalid invocation of Dygraph.synchronize(). Need >= 1 argument.";var e=["selection","zoom","range"],n={selection:!0,zoom:!0,range:!0},a=[],o=[],s=function(t){if(!(t instanceof Object))throw"Last argument must be either Dygraph or Object.";for(var r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}};if(arguments[0]instanceof t){for(var u=0;u<arguments.length&&arguments[u]instanceof t;u++)a.push(arguments[u]);if(u<arguments.length-1)throw"Invalid invocation of Dygraph.synchronize(). All but the last argument must be Dygraph objects.";u==arguments.length-1&&s(arguments[arguments.length-1])}else{if(!arguments[0].length)throw"Invalid invocation of Dygraph.synchronize(). First parameter must be either Dygraph or list of Dygraphs.";for(u=0;u<arguments[0].length;u++)a.push(arguments[0][u]);if(2==arguments.length)s(arguments[1]);else if(arguments.length>2)throw"Invalid invocation of Dygraph.synchronize(). Expected two arguments: array and optional options argument."}if(a.length<2)throw"Invalid invocation of Dygraph.synchronize(). Need two or more dygraphs to synchronize.";var l=a.length;for(u=0;u<a.length;u++){var c=a[u];c.ready((function(){if(0==--l){for(var t=["drawCallback","highlightCallback","unhighlightCallback"],e=0;e<a.length;e++){o[e]||(o[e]={});for(var s=t.length-1;s>=0;s--)o[e][t[s]]=a[e].getFunctionOption(t[s])}n.zoom&&r(a,n,o),n.selection&&i(a,o)}}))}return{detach:function(){for(var t=0;t<a.length;t++){var e=a[t];n.zoom&&e.updateOptions({drawCallback:o[t].drawCallback}),n.selection&&e.updateOptions({highlightCallback:o[t].highlightCallback,unhighlightCallback:o[t].unhighlightCallback})}a=null,n=null,o=null}}}}()},p1mf:function(t,e,n){"use strict";var r=n("4abu").buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},a=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function o(t){this.options=r(t,i,a),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.isCDATA=this.options.cdataTagName?g:function(){return!1},this.replaceCDATAstr=s,this.replaceCDATAarr=u,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=d,this.buildObjNode=c):(this.buildTextNode=f,this.buildObjNode=l),this.buildTextValNode=f,this.buildObjectNode=l}function s(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function u(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var n in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[n]+"]]>");return t+this.newLine}function l(t,e,n,r){return n&&!t.includes("<")?this.indentate(r)+"<"+e+n+">"+t+"</"+e+this.tagEndChar:this.indentate(r)+"<"+e+n+this.tagEndChar+t+this.indentate(r)+"</"+e+this.tagEndChar}function c(t,e,n,r){return""!==t?this.buildObjectNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function f(t,e,n,r){return this.indentate(r)+"<"+e+n+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function d(t,e,n,r){return""!==t?this.buildTextValNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function h(t){return this.options.indentBy.repeat(t)}function p(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function g(t){return t===this.options.cdataTagName}o.prototype.parse=function(t){return this.j2x(t,0).val},o.prototype.j2x=function(t,e){for(var n="",r="",i=Object.keys(t),a=i.length,o=0;o<a;o++){var s=i[o];if(void 0===t[s]);else if(null===t[s])r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)r+=this.buildTextNode(t[s],s,"",e);else if("object"!=typeof t[s]){var u=this.isAttribute(s);u?n+=" "+u+'="'+this.options.attrValueProcessor(""+t[s])+'"':this.isCDATA(s)?r+=this.replaceCDATAstr(t[this.options.textNodeName]?t[this.options.textNodeName]:"",t[s]):s===this.options.textNodeName?t[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+t[s])):r+=this.buildTextNode(t[s],s,"",e)}else if(Array.isArray(t[s]))if(this.isCDATA(s))r+=this.indentate(e),r+=this.replaceCDATAarr(t[this.options.textNodeName]?t[this.options.textNodeName]:"",t[s]);else for(var l=t[s].length,c=0;c<l;c++){var f=t[s][c];if(void 0===f);else if(null===f)r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if("object"==typeof f){var d=this.j2x(f,e+1);r+=this.buildObjNode(d.val,s,d.attrStr,e)}else r+=this.buildTextNode(f,s,"",e)}else if(this.options.attrNodeName&&s===this.options.attrNodeName)for(var h=Object.keys(t[s]),p=h.length,g=0;g<p;g++)n+=" "+h[g]+'="'+this.options.attrValueProcessor(""+t[s][h[g]])+'"';else{var v=this.j2x(t[s],e+1);r+=this.buildObjNode(v.val,s,v.attrStr,e)}}return{attrStr:n,val:r}},t.exports=o},t6xR:function(t,e,n){"use strict";var r=n("4abu"),i=n("4abu").buildOptions,a=n("E1E9");e.convertToJsonString=function(t,e){return(e=i(e,a.defaultOptions,a.props)).indentBy=e.indentBy||"",function t(e,n,i){for(var a,o="{",s=Object.keys(e.child),u=0;u<s.length;u++){var l=s[u];if(e.child[l]&&e.child[l].length>1){for(var c in o+='"'+l+'" : [ ',e.child[l])o+=t(e.child[l][c],n)+" , ";o=o.substr(0,o.length-1)+" ] "}else o+='"'+l+'" : '+t(e.child[l][0],n)+" ,"}return r.merge(o,e.attrsMap),r.isEmptyObject(o)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==n.cdataPositionChar)&&(o+='"'+n.textNodeName+'" : '+(!0!==(a=e.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===o[o.length-1]&&(o=o.substr(0,o.length-2)),o+"}")}(t,e)}},tcQk:function(t){t.exports=JSON.parse('{"hls":{"VOD":[{"name":"Big Buck Bunny","url":"https://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8"},{"name":"HD World","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"CCTV","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/cctv/cctv_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Sintel","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/sintel/sintel-hd_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"}],"LIVE":[{"name":"Eight","url":"https://moctobpltc-i.akamaihd.net/hls/live/571329/eight/playlist.m3u8"},{"name":"MSL HLS test stream","url":"https://cph-msl.akamaized.net/hls/live/2000341/test/master.m3u8"}]},"dash":{"VOD":[{"name":"Segment Base, ondemand profile","url":"https://dash.akamaized.net/dash264/TestCases/1a/sony/SNE_DASH_SD_CASE1A_REVISED.mpd"},{"name":"SegmentTimeline/Time","url":"https://demo.unified-streaming.com/video/ateam/ateam.ism/ateam.mpd"},{"name":"SegmentTemplate, live profile","url":"https://dash.akamaized.net/envivio/EnvivioDash3/manifest.mpd"},{"name":"SegmentTemplate/Number, live profile, 250kbps up to 15Mbps@4k","url":"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd"}],"LIVE":[{"name":"MSL DASH test stream / SegmentTemplate","url":"https://cph-msl.akamaized.net/dash/live/2003285/test/manifest.mpd"},{"name":"MSL DASH test stream / SegmentTemplate with Token Authentication","url":"https://cph-msl-ta.akamaized.net/dash/live/2003285/test/manifest.mpd?hdnts=st=1576841519~exp=1892201519~acl=/*~hmac=2cd04fd6efa7c852ac45aa0866366879e485319f68cca2cf7ecfcc1463d8db0d"}]}}')},uHMj:function(t){t.exports=JSON.parse('{"streams":[{"name":"Big Buck Bunny (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8"},{"name":"HD World (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"CCTV (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/cctv/cctv_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Sintel (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/sintel/sintel-hd_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Parkour (VOD)","url":"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8"},{"name":"Encrypted stream (VOD)","url":"https://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes.m3u8"},{"name":"Eight (Live)","url":"https://moctobpltc-i.akamaihd.net/hls/live/571329/eight/playlist.m3u8"},{"name":"Tears of Steel (Live)","url":"https://cph-msl.akamaized.net/hls/live/2000341/test/master.m3u8"},{"name":"Tears of Steel (Live, token authentication)","url":"https://cph-msl-ta.akamaized.net/hls/live/2000341/test/master.m3u8?hdnts=st=1576841519~exp=1892201519~acl=/*~hmac=2cd04fd6efa7c852ac45aa0866366879e485319f68cca2cf7ecfcc1463d8db0d"},{"name":"Akamai (Live)","url":"https://l2voddemo.akamaized.net/hls/live/644624/l2vc/master.m3u8"}]}')},ulZh:function(t,e,n){var r;"undefined"!=typeof window&&(r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=this._events[i?i+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,a=new Array(r);n<r;n++)a[n]=e[n].fn;return a},l.prototype.listenerCount=function(t){var e=this._events[i?i+t:t];return e?e.fn?1:e.length:0},l.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,o),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(t){var e;return t?this._events[e=i?i+t:t]&&u(this,e):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t.exports=s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=i.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,f=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(f)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}}},"./node_modules/webworkify-webpack/index.js":function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,r){var a={};a[r]=[];var o=e.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return a;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(o);)"dll-reference"!==u[3]&&a[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(o);)t[u[2]]||(a[r].push(u[1]),t[u[2]]=n(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);for(var f=Object.keys(a),d=0;d<f.length;d++)for(var h=0;h<a[f[d]].length;h++)isNaN(1*a[f[d]][h])||(a[f[d]][h]=1*a[f[d]][h]);return a}function o(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){var i={main:n.m},s=(e=e||{}).all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};o(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var l=s[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var f=a(t,t[l][c],l),d=Object.keys(f),h=0;h<d.length;h++)n[d[h]]=n[d[h]]||[],n[d[h]]=n[d[h]].concat(f[d[h]])}}return r}(i,t),u="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},"./src/config.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"hlsDefaultConfig",(function(){return S})),n.d(e,"mergeConfig",(function(){return w})),n.d(e,"enableStreamingMode",(function(){return A}));var r=n("./src/controller/abr-controller.ts"),i=n("./src/controller/audio-stream-controller.ts"),a=n("./src/controller/audio-track-controller.ts"),o=n("./src/controller/subtitle-stream-controller.ts"),s=n("./src/controller/subtitle-track-controller.ts"),u=n("./src/controller/buffer-controller.ts"),l=n("./src/controller/timeline-controller.ts"),c=n("./src/controller/cap-level-controller.ts"),f=n("./src/controller/fps-controller.ts"),d=n("./src/controller/eme-controller.ts"),h=n("./src/controller/cmcd-controller.ts"),p=n("./src/utils/xhr-loader.ts"),g=n("./src/utils/fetch-loader.ts"),v=n("./src/utils/cues.ts"),m=n("./src/utils/mediakeys-helper.ts"),y=n("./src/utils/logger.ts");function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=E(E({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:p.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r.default,bufferController:u.default,capLevelController:c.default,fpsController:f.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:v.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:o.SubtitleStreamController,subtitleTrackController:s.default,timelineController:l.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:d.default,cmcdController:h.default});function w(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return _({},t,e)}function A(t){var e=t.loader;e!==g.default&&e!==p.default?(y.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Object(g.fetchSupported)()&&(t.loader=g.default,t.progressive=!0,t.enableSoftwareAES=!0,y.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/ewma-bandwidth-estimator.ts"),a=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/errors.ts"),u=n("./src/types/loader.ts"),l=n("./src/utils/logger.ts");e.default=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new i.default(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,n=t.prototype;return n.registerListeners=function(){var t=this.hls;t.on(a.Events.FRAG_LOADING,this.onFragLoading,this),t.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){var t=this.hls;t.off(a.Events.FRAG_LOADING,this.onFragLoading,this),t.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.ERROR,this.onError,this)},n.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},n.onFragLoading=function(t,e){var n,r=e.frag;r.type===u.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=r,this.partCurrent=null!=(n=e.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},n.onLevelLoaded=function(t,e){var n=this.hls.config;e.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},n._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,s=n.config,u=n.media;if(t&&u){var c=e?e.stats:t.stats,f=e?e.duration:t.duration;if(c.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!u.paused&&u.playbackRate&&u.readyState){var d=performance.now()-c.loading.start,h=Math.abs(u.playbackRate);if(!(d<=500*f/h)){var p=n.levels,g=n.minAutoLevel,v=c.total||Math.max(c.loaded,Math.round(f*p[t.level].maxBitrate/8)),m=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/d),y=(v-c.loaded)/m,_=u.currentTime,b=(o.BufferHelper.bufferInfo(u,_,s.maxBufferHole).end-_)/h;if(!(b>=2*f/h||y<=b)){var E,T=Number.POSITIVE_INFINITY;for(E=t.level-1;E>g&&!((T=f*p[E].maxBitrate/(6.4*m))<b);E--);if(!(T>=y)){var S=this.bwEstimator.getEstimate();l.logger.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+E+"\n      Current BW estimate: "+(Object(r.isFiniteNumber)(S)?(S/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+y.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+b.toFixed(3)+" s"),n.nextLoadLevel=E,this.bwEstimator.sample(d,c.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:c})}}}}}},n.onFragLoaded=function(t,e){var n=e.frag,i=e.part;if(n.type===u.PlaylistLevelType.MAIN&&Object(r.isFiniteNumber)(n.sn)){var o=i?i.stats:n.stats,s=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[n.level],c=(l.loaded?l.loaded.bytes:0)+o.loaded,f=(l.loaded?l.loaded.duration:0)+s;l.loaded={bytes:c,duration:f},l.realBitrate=Math.round(8*c/f)}n.bitrateTest&&(this.onFragBuffered(a.Events.FRAG_BUFFERED,{stats:o,frag:n,part:i,id:n.type}),n.bitrateTest=!1)}},n.onFragBuffered=function(t,e){var n=e.frag,r=e.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===u.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=n.bitrateTest?a/1e3:0}},n.onError=function(t,e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},n.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,s=n.media,u=e?e.duration:t?t.duration:0,c=s?s.currentTime:0,f=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(o.BufferHelper.bufferInfo(s,c,i.maxBufferHole).end-c)/f,p=this.findBestLevel(d,a,r,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var g=u?Math.min(u,i.maxStarvationDelay):i.maxStarvationDelay,v=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(!h){var y=this.bitrateTestDelay;y&&(g=(u?Math.min(u,i.maxLoadingDelay):i.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=m=1)}return p=this.findBestLevel(d,a,r,h+g,v,m),Math.max(p,0)},n.findBestLevel=function(t,e,n,r,i,a){for(var o,s=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,f=this.hls.levels,d=f[c],h=!(null==d||null===(o=d.details)||void 0===o||!o.live),p=null==d?void 0:d.codecSet,g=u?u.duration:s?s.duration:0,v=n;v>=e;v--){var m=f[v];if(m&&(!p||m.codecSet===p)){var y,_=m.details,b=(u?null==_?void 0:_.partTarget:null==_?void 0:_.averagetargetduration)||g,E=f[v].maxBitrate,T=E*b/(y=v<=c?i*t:a*t);if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(y)+"/"+E+"/"+b+"/"+r+"/"+T),y>E&&(!T||h&&!this.bitrateTestDelay||T<r))return v}}return-1},(e=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this.getNextABRAutoLevel();return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/audio-stream-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/controller/fragment-tracker.ts"),u=n("./src/types/level.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),f=n("./src/demux/chunk-cache.ts"),d=n("./src/demux/transmuxer-interface.ts"),h=n("./src/types/transmuxer.ts"),p=n("./src/controller/fragment-finders.ts"),g=n("./src/utils/discontinuities.ts"),v=n("./src/errors.ts"),m=n("./src/utils/logger.ts");function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.default=function(t){var e,n;function b(e,n){var r;return(r=t.call(this,e,n,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r._registerListeners(),r}n=t,(e=b).prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n);var E=b.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(a.Events.ERROR,this.onError,this),t.on(a.Events.BUFFER_RESET,this.onBufferReset,this),t.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(a.Events.ERROR,this.onError,this),t.off(a.Events.BUFFER_RESET,this.onBufferReset,this),t.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(t,e){var n=e.frag,r=e.initPTS;if("main"===e.id){var a=n.cc;this.initPTS[n.cc]=r,this.log("InitPTS for cc: "+a+" found from main: "+r),this.videoTrackCC=a,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=i.State.STOPPED);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},E.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var e,n=this.levels,r=null==n||null===(e=n[this.trackId])||void 0===e?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,s=performance.now(),u=this.retryDate;(!u||s>=u||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var l=this.waitingData;if(l){var c=l.frag,f=l.part,d=l.cache,h=l.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var g={frag:c,part:f,payload:d.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),h&&t.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)m.logger.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var v=this.getLoadPosition(),y=o.BufferHelper.bufferInfo(this.mediaBuffer,v,this.config.maxBufferHole);Object(p.fragmentWithinToleranceTest)(y.end,this.config.maxFragLookUpTolerance,c)<0&&(m.logger.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},E.onTickEnd=function(){var t=this.media;t&&t.readyState&&(!this.loadedmetadata&&(this.mediaBuffer?this.mediaBuffer:t).buffered.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime)},E.doTickIdle=function(){var t,e,n=this.hls,r=this.levels,o=this.media,s=this.trackId;if(r&&r[s]&&(o||!this.startFragRequested&&n.config.startFragPrefetch)){var u=r[s].details;if(!u||u.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(u))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,l.PlaylistLevelType.AUDIO));var f=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,l.PlaylistLevelType.AUDIO);if(null!==f){var d=f.len,h=this.getMaxBufferLength(),p=this.audioSwitch;if(!(d>=h)||p){if(!p&&this._streamEnded(f,u))return n.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var g=u.fragments[0].start,v=f.end;if(p){var m=this.getLoadPosition();v=m,u.PTSKnown&&m<g&&(f.end>g||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=g+.05)}var y=this.getNextFragment(v,u);y?"identity"!==(null===(t=y.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=y.decryptdata)&&void 0!==e&&e.key?this.loadFragment(y,u,v):this.loadKey(y,u):this.bufferFlushed=!0}}}}},E.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,l.PlaylistLevelType.MAIN);return null===n?e:Math.max(e,n.len)},E.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(t,e){var n=e.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(t){return new u.Level(t)}))},E.onAudioTrackSwitching=function(t,e){var n=!!e.url;this.trackId=e.id;var r=this.fragCurrent;null!=r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(t,e){this.mainDetails=e.details},E.onAudioTrackLoaded=function(t,e){var n,r=this.levels,a=e.details,o=e.id;if(r){this.log("Track "+o+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=r[o],u=0;if(a.live||null!==(n=s.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!l)return;!s.details&&a.hasProgramDateTime&&l.hasProgramDateTime?(Object(g.alignMediaPlaylistByPDT)(a,l),u=a.fragments[0].start):u=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,u),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)},E._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,a=t.payload,o=this.config,s=this.trackId,u=this.levels;if(u){var c=u[s];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var g=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",v=this.transmuxer;v||(v=this.transmuxer=new d.default(this.hls,l.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[n.cc],_=null===(e=n.initSegment)||void 0===e?void 0:e.data;if(void 0!==y){var b=r?r.index:-1,E=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,-1!==b);v.push(a,_,g,"",n,r,p.totalduration,!1,E,y)}else m.logger.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:n,part:r,cache:new f.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(t,e){var n=e.tracks.audio;n&&(this.mediaBuffer=n.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},E.onFragBuffered=function(t,e){var n=e.frag,r=e.part;n.type===l.PlaylistLevelType.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,r)))},E.onError=function(e,n){switch(n.details){case v.ErrorDetails.FRAG_LOAD_ERROR:case v.ErrorDetails.FRAG_LOAD_TIMEOUT:case v.ErrorDetails.KEY_LOAD_ERROR:case v.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.AUDIO,n);break;case v.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case v.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=n.fatal?i.State.ERROR:i.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case v.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,a=this.getFwdBufferInfo(this.mediaBuffer,l.PlaylistLevelType.AUDIO);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},E.onBufferFlushed=function(t,e){e.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},E._handleTransmuxComplete=function(t){var e,n="audio",r=this.hls,o=t.remuxResult,s=t.chunkMeta,u=this.getCurrentContext(s);if(!u)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=u.frag,f=u.part,d=o.audio,h=o.text,p=o.id3,g=o.initSegment;if(!this.fragContextChanged(l)){if(this.state=i.State.PARSING,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=g&&g.tracks&&(this._bufferInitSegment(g.tracks,l,s),r.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:n,tracks:g.tracks})),d){var v=d.startPTS,m=d.endPTS,_=d.startDTS,b=d.endDTS;f&&(f.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:v,endPTS:m,startDTS:_,endDTS:b}),l.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,v,m,_,b),this.bufferFragmentData(d,l,f,s)}if(null!=p&&null!==(e=p.samples)&&void 0!==e&&e.length){var E=y({frag:l,id:n},p);r.trigger(a.Events.FRAG_PARSING_METADATA,E)}if(h){var T=y({frag:l,id:n},h);r.trigger(a.Events.FRAG_PARSING_USERDATA,T)}}},E._bufferInitSegment=function(t,e,n){if(this.state===i.State.PARSING){t.video&&delete t.video;var r=t.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,t);var o=r.initSegment;null!=o&&o.byteLength&&this.hls.trigger(a.Events.BUFFER_APPENDING,{type:"audio",frag:e,part:null,chunkMeta:n,parent:e.type,data:o}),this.tick()}}},E.loadFragment=function(e,n,a){var o=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||o===s.FragmentState.NOT_LOADED||o===s.FragmentState.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):n.live&&!Object(r.isFiniteNumber)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,a)))},E.completeAudioSwitch=function(){var e=this.hls,n=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:n})},b}(i.default)},"./src/controller/audio-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/controller/base-playlist-controller.ts"),o=n("./src/types/loader.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.default=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var u,l=a.prototype;return l.registerListeners=function(){var t=this.hls;t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},l.onAudioTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.tracksInGroup[n];if(i){var a=i.details;i.details=e.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,a))}else this.warn("Invalid audio track id "+n)},l.onLevelLoading=function(t,e){this.switchLevel(e.level)},l.onLevelSwitching=function(t,e){this.switchLevel(e.level)},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(t){return!n||t.groupId===n}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},l.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},l.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=e[this.trackId];this.log("Now switching to audio-track index "+t);var i=e[t],a=i.id,o=i.groupId,s=void 0===o?"":o,u=i.name,l=i.type,c=i.url;if(this.trackId=t,this.trackName=u,this.selectDefaultTrack=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:s,name:u,type:l,url:c}),!i.details||i.details.live){var f=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(f)}}},l.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var t=this.findTrackId(this.trackName)||this.findTrackId();-1!==t?this.setAudioTrack(t):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.Events.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},(u=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,u),a}(a.default)},"./src/controller/base-playlist-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var r=n("./src/polyfills/number.ts"),i=n("./src/types/level.ts"),a=n("./src/controller/level-helper.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),u=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.logger.log.bind(o.logger,e+":"),this.warn=o.logger.warn.bind(o.logger,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var n=null==e?void 0:e.renditionReports;if(n)for(var a=0;a<n.length;a++){var o=n[a],s=""+o.URI;if(s===t.substr(-s.length)){var u=parseInt(o["LAST-MSN"]),l=parseInt(o["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&c>e.partTarget&&(l+=1)}if(Object(r.isFiniteNumber)(u))return new i.HlsUrlParameters(u,Object(r.isFiniteNumber)(l)?l:void 0,i.HlsSkip.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,n){var r=this,i=e.details,o=e.stats,s=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(i.advancedDateTime=Date.now()-s,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+t+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&Object(a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var u,l=void 0,c=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var f=this.hls.config.lowLatencyMode,d=i.lastPartSn,h=i.endSN,p=i.lastPartIndex,g=d===h;-1!==p?(l=g?h+1:d,c=g?f?0:p:p+1):l=h+1;var v=i.age,m=Math.min(v+i.ageHeader-i.partTarget,1.5*i.targetduration);if(m>0){if(n&&m>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+m+" with playlist age: "+i.age),m=0;else{var y=Math.floor(m/i.targetduration);l+=y,void 0!==c&&(c+=Math.round(m%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+m+" skip sn "+y+" to part "+c)}i.tuneInGoal=m}if(u=this.getDeliveryDirectives(i,e.deliveryDirectives,l,c),f||!g)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(i,e.deliveryDirectives,l,c);var _=Object(a.computeReloadInterval)(i,o);void 0!==l&&i.canBlockReload&&(_-=i.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(_)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(u)}),_)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,n,r){var a=Object(i.getSkipValue)(t,n);return null!=e&&e.skip&&t.deltaUpdateFailed&&(n=e.msn,r=e.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},e.retryLoadingOrFail=function(t){var e,n=this,r=this.hls.config,i=this.retryCount<r.levelLoadingMaxRetry;if(i)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return i},t}()},"./src/controller/base-stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"State",(function(){return b})),n.d(e,"default",(function(){return E}));var r=n("./src/polyfills/number.ts"),i=n("./src/task-loop.ts"),a=n("./src/controller/fragment-tracker.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/utils/logger.ts"),u=n("./src/events.ts"),l=n("./src/errors.ts"),c=n("./src/types/transmuxer.ts"),f=n("./src/utils/mp4-tools.ts"),d=n("./src/utils/discontinuities.ts"),h=n("./src/controller/fragment-finders.ts"),p=n("./src/controller/level-helper.ts"),g=n("./src/loader/fragment-loader.ts"),v=n("./src/crypt/decrypter.ts"),m=n("./src/utils/time-ranges.ts"),y=n("./src/types/loader.ts");function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},E=function(t){var e,n;function i(e,n,r){var i;return(i=t.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=b.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=s.logger.log.bind(s.logger,r+":"),i.warn=s.logger.warn.bind(s.logger,r+":"),i.hls=e,i.fragmentLoader=new g.default(e.config),i.fragmentTracker=n,i.config=e.config,i.decrypter=new v.default(e,e.config),e.on(u.Events.KEY_LOADED,i.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n);var E,T=i.prototype;return T.doTick=function(){this.onTickEnd()},T.onTickEnd=function(){},T.startLoad=function(t){},T.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=b.STOPPED},T._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&n&&n.sn>=e.endSN&&!t.nextStart){var i=e.partList;if(null!=i&&i.length){var s=i[i.length-1];return o.BufferHelper.isBuffered(this.media,s.start+s.duration/2)}var u=r.getState(n);return u===a.FragmentState.PARTIAL||u===a.FragmentState.OK}return!1},T.onMediaAttached=function(t,e){var n=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===b.STOPPED&&this.startLoad(r.startPosition)},T.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},T.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,n=this.media,i=this.state,a=n?n.currentTime:0,s=o.BufferHelper.bufferInfo(this.mediaBuffer||n,a,t.maxBufferHole);if(this.log("media seeking to "+(Object(r.isFiniteNumber)(a)?a.toFixed(3):a)+", state: "+i),i===b.ENDED)this.resetLoadingState();else if(e&&!s.len){var u=t.maxFragLookUpTolerance,l=a>e.start+e.duration+u;(a<e.start-u||l)&&(l&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=a),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},T.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},T.onKeyLoaded=function(t,e){if(this.state===b.KEY_LOADING&&e.frag===this.fragCurrent&&this.levels){this.state=b.IDLE;var n=this.levels[e.frag.level].details;n&&this.loadFragment(e.frag,n,e.frag.start)}},T.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},T.onHandlerDestroyed=function(){this.state=b.STOPPED,this.hls.off(u.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},T.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=b.KEY_LOADING,this.fragCurrent=t,this.hls.trigger(u.Events.KEY_LOADING,{frag:t})},T.loadFragment=function(t,e,n){this._loadFragForPlayback(t,e,n)},T._loadFragForPlayback=function(t,e,n){var r=this;this._doFragLoad(t,e,n,(function(e){if(r.fragContextChanged(t))return r.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void r.fragmentTracker.removeFragment(t);t.stats.chunkCount++,r._handleFragmentLoadProgress(e)})).then((function(e){if(e){r.fragLoadError=0;var n=r.state;if(!r.fragContextChanged(t))return"payload"in e&&(r.log("Loaded fragment "+t.sn+" of level "+t.level),r.hls.trigger(u.Events.FRAG_LOADED,e),r.state===b.BACKTRACKING)?(r.fragmentTracker.backtrack(t,e),void r.resetFragmentLoading(t)):void r._handleFragmentLoadComplete(e);(n===b.FRAG_LOADING||n===b.BACKTRACKING||!r.fragCurrent&&n===b.PARSING)&&(r.fragmentTracker.removeFragment(t),r.state=b.IDLE)}})).catch((function(e){r.warn(e),r.resetFragmentLoading(t)}))},T.flushMainBuffer=function(t,e,n){if(void 0===n&&(n=null),t-e){var r={startOffset:t,endOffset:e,type:n};this.fragLoadError=0,this.hls.trigger(u.Events.BUFFER_FLUSHING,r)}},T._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(n){if(!n||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return n})).then((function(n){var r=e.hls,i=n.payload,a=t.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(e){var i=self.performance.now();return r.trigger(u.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:i}}),n.payload=e,n}))}return n})).then((function(n){var r=e.fragCurrent,i=e.hls,a=e.levels;if(!a)throw new Error("init load aborted, missing levels");console.assert(a[t.level].details,"Level details are defined when init segment is loaded");var o=t.stats;e.state=b.IDLE,e.fragLoadError=0,t.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===r&&i.trigger(u.Events.FRAG_BUFFERED,{stats:o,frag:r,part:null,id:t.type}),e.tick()})).catch((function(n){e.warn(n),e.resetFragmentLoading(t)}))},T.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},T.fragBufferedComplete=function(t,e){this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+m.default.toString(o.BufferHelper.getBuffered(this.mediaBuffer?this.mediaBuffer:this.media))),this.state=b.IDLE,this.tick()},T._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var n=t.frag,r=t.part,i=t.partsLoaded,a=!i||0===i.length||i.some((function(t){return!t})),o=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);e.flush(o)}},T._handleFragmentLoadProgress=function(t){},T._doFragLoad=function(t,e,n,i){var a=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(t.start,n||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&i){n>t.end&&e.fragmentHint&&(t=e.fragmentHint);var s=this.getNextPart(o,t,n);if(s>-1){var l=o[s];return this.log("Loading part sn: "+t.sn+" p: "+l.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+s+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=b.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:t,part:o[s],targetBufferTime:n}),this.doFragPartsLoad(t,o,s,i).catch((function(t){return a.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,n))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),Object(r.isFiniteNumber)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=b.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:t,targetBufferTime:n}),this.fragmentLoader.load(t,i).catch((function(t){return a.handleFragLoadError(t)}))},T.doFragPartsLoad=function(t,e,n,r){var i=this;return new Promise((function(a,o){var s=[];!function n(l){var c=e[l];i.fragmentLoader.loadPart(t,c,r).then((function(r){s[c.index]=r;var o=r.part;i.hls.trigger(u.Events.FRAG_LOADED,r);var f=e[l+1];if(!f||f.fragment!==t)return a({frag:t,part:o,partsLoaded:s});n(l+1)})).catch(o)}(n)}))},T.handleFragLoadError=function(t){var e=t.data;return e&&e.details===l.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(u.Events.ERROR,e),null},T._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===b.PARSING){var n=e.frag,r=e.part,i=e.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,t.partial)}else this.fragCurrent||(this.state=b.IDLE)},T.getCurrentContext=function(t){var e=this.levels,n=t.level,r=t.sn,i=t.part;if(!e||!e[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=e[n],o=i>-1?Object(p.getPartWith)(a,r,i):null,s=o?o.fragment:Object(p.getFragmentWithSN)(a,r,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},T.bufferFragmentData=function(t,e,n,r){if(t&&this.state===b.PARSING){var i=t.data1,a=t.data2,o=i;i&&a&&(o=Object(f.appendUint8Array)(i,a)),o&&o.length&&(this.hls.trigger(u.Events.BUFFER_APPENDING,{type:t.type,frag:e,part:n,chunkMeta:r,parent:e.type,data:o}),t.dropped&&t.independent&&!n&&this.flushBufferGap(e))}},T.flushBufferGap=function(t){var e=this.media;if(e)if(o.BufferHelper.isBuffered(e,e.currentTime)){var n=e.currentTime,r=o.BufferHelper.bufferInfo(e,n,0),i=Math.min(2*this.config.maxFragLookUpTolerance,.25*t.duration),a=Math.max(Math.min(t.start-i,r.end-i),n+i);t.start-a>i&&this.flushMainBuffer(a,t.start)}else this.flushMainBuffer(0,t.start)},T.getFwdBufferInfo=function(t,e){var n=this.config,i=this.getLoadPosition();if(!Object(r.isFiniteNumber)(i))return null;var a=o.BufferHelper.bufferInfo(t,i,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,e);if(s&&a.nextStart<s.end)return o.BufferHelper.bufferInfo(t,i,Math.max(a.nextStart,n.maxBufferHole))}return a},T.getMaxBufferLength=function(t){var e,n=this.config;return e=t?Math.max(8*n.maxBufferSize/t,n.maxBufferLength):n.maxBufferLength,Math.min(e,n.maxMaxBufferLength)},T.reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=(t||e.maxBufferLength)&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},T.getNextFragment=function(t,e){var n,r,i=e.fragments,a=i.length;if(!a)return null;var o,s=this.config,u=i[0].start;if(e.live){var l=s.initialLiveManifestSize;if(a<l)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+l+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(e,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:t)}else t<=u&&(o=i[0]);return o||(o=this.getFragmentAtPosition(t,s.lowLatencyMode?e.partEnd:e.fragmentEnd,e)),null===(n=o)||void 0===n||!n.initSegment||null!==(r=o)&&void 0!==r&&r.initSegment.data||this.bitrateTest||(o=o.initSegment),o},T.getNextPart=function(t,e,n){for(var r=-1,i=!1,a=!0,o=0,s=t.length;o<s;o++){var u=t[o];if(a=a&&!u.independent,r>-1&&n<u.start)break;var l=u.loaded;!l&&(i||u.independent||a)&&u.fragment===e&&(r=o),i=l}return r},T.loadedEndOfParts=function(t,e){var n=t[t.length-1];return n&&e>n.start&&n.loaded},T.getInitialLiveFragment=function(t,e){var n=this.fragPrevious,r=null;if(n){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=Object(h.findFragmentByPDT)(e,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=t.startSN&&i<=t.endSN){var a=e[i-t.startSN];n.cc===a.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(r=a).sn)}r||(r=Object(h.findFragWithCC)(e,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(r=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return r},T.getFragmentAtPosition=function(t,e,n){var r,i=this.config,o=this.fragPrevious,s=n.fragments,u=n.endSN,l=n.fragmentHint,c=i.maxFragLookUpTolerance,f=!!(i.lowLatencyMode&&n.partList&&l);if(f&&l&&!this.bitrateTest&&(s=s.concat(l),u=l.sn),t<e){var d=t>e-c?0:c;r=Object(h.findFragmentByPTS)(o,s,t,d)}else r=s[s.length-1];if(r){var p=r.sn-n.startSN,g=o&&r.level===o.level,v=s[p+1];if(this.fragmentTracker.getState(r)===a.FragmentState.BACKTRACKED){r=null;for(var m=p;s[m]&&this.fragmentTracker.getState(s[m])===a.FragmentState.BACKTRACKED;)r=o?s[m--]:s[--m];r||(r=v)}else o&&r.sn===o.sn&&!f&&g&&(r.sn<u&&this.fragmentTracker.getState(v)!==a.FragmentState.OK?(this.log("SN "+r.sn+" just loaded, load next one: "+v.sn),r=v):r=null)}return r},T.synchronizeToLiveEdge=function(t){var e=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=t.edge,o=i>=t.fragments[0].start-e.maxFragLookUpTolerance&&i<=a;null!==r&&n.duration>r&&(i<r||!o)&&(!o&&n.readyState<4||i<a-(void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+a+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}},T.alignPlaylists=function(t,e){var n=this.levelLastLoaded,i=this.fragPrevious,a=null!==n?this.levels[n]:null,o=t.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var s=t.fragments[0].start,u=!e,l=t.alignedSliding&&Object(r.isFiniteNumber)(s);if(u||!l&&!s){Object(d.alignStream)(i,a,t);var c=t.fragments[0].start;return this.log("Live playlist sliding: "+c.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+o),c}return s},T.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},T.setStartPosition=function(t,e){var n=this.startPosition;if(n<e&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=t.startTimeOffset;Object(r.isFiniteNumber)(i)?(n=e+i,i<0&&(n+=t.totalduration),n=Math.min(Math.max(e,n),e+t.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):t.live?n=this.hls.liveSyncPosition||e:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},T.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},T.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},T.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=b.IDLE)},T.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var n=e.frag;if(n&&n.type===t){var r=this.fragCurrent;console.assert(r&&n.sn===r.sn&&n.level===r.level&&n.urlId===r.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+t+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=b.FRAG_LOADING_WAITING_RETRY}else e.levelRetry?(t===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=b.IDLE):(s.logger.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=b.ERROR)}}},T.afterBufferFlushed=function(t,e,n){if(t){var r=o.BufferHelper.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,r,n),this.state===b.ENDED&&this.resetLoadingState()}},T.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=b.IDLE},T.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},T.updateLevelTiming=function(t,e,n,r){var i=this,a=n.details;console.assert(!!a,"level.details must be defined"),Object.keys(t.elementaryStreams).reduce((function(e,o){var s=t.elementaryStreams[o];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return i.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+l+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),e||!1;var c=r?0:Object(p.updateFragPTSDTS)(a,t,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return i.hls.trigger(u.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:o,frag:t,start:s.startPTS,end:s.endPTS}),!0}return e}),!1)?(this.state=b.PARSED,this.hls.trigger(u.Events.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},T.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},(E=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,E),i}(i.default)},"./src/controller/buffer-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),s=n("./src/utils/buffer-helper.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./src/loader/fragment.ts"),c=n("./src/controller/buffer-operation-queue.ts"),f=Object(u.getMediaSource)(),d=/([ha]vc.)(?:\.[^.,]+)+/,h=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,n=e.media,r=e.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(e.updateMediaElementDuration(),t.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.Events.BUFFER_RESET,this.onBufferReset,this),t.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.Events.BUFFER_EOS,this.onBufferEos,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.Events.FRAG_PARSED,this.onFragParsed,this),t.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.Events.BUFFER_RESET,this.onBufferReset,this),t.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.Events.BUFFER_EOS,this.onBufferEos,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.Events.FRAG_PARSED,this.onFragParsed,this),t.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var n=2;(e.audio&&!e.video||!e.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var n=this.media=e.media;if(n&&f){var r=this.mediaSource=new f;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,n=this._objectUrl;if(e){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(r){a.logger.warn("[buffer-controller]: onMediaDetaching: "+r.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(n&&self.URL.revokeObjectURL(n),t.src===n?(t.removeAttribute("src"),t.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var n=t.sourceBuffer[e];try{n&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(n),t.sourceBuffer[e]=void 0)}catch(r){a.logger.warn("[buffer-controller]: Failed to reset the "+e+" buffer",r)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var n=this,r=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(r){var i=n.tracks[t];if(i&&"function"==typeof i.buffer.changeType){var a=e[t],o=a.codec,s=a.levelCodec,u=a.container;(i.levelCodec||i.codec).replace(d,"$1")!==(s||o).replace(d,"$1")&&n.appendChangeType(t,u+";codecs="+(s||o))}}else n.pendingTracks[t]=e[t]})),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[t];i&&(a.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),i.changeType(e)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){a.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};r.append(i,t)},e.onBufferAppending=function(t,e){var n=this,r=this.hls,u=this.operationQueue,l=this.tracks,c=e.data,f=e.type,d=e.frag,h=e.part,p=e.chunkMeta,g=p.buffering[f],v=self.performance.now();g.start=v;var m=d.stats.buffering,y=h?h.stats.buffering:null;0===m.start&&(m.start=v),y&&0===y.start&&(y.start=v);var _=l.audio,b="audio"===f&&1===p.id&&"audio/mpeg"===(null==_?void 0:_.container);u.append({execute:function(){if(g.executeStart=self.performance.now(),b){var t=n.sourceBuffer[f];if(t){var e=d.start-t.timestampOffset;Math.abs(e)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+e+") sn: "+d.sn+")"),t.timestampOffset=d.start)}}n.appendExecutor(c,f)},onStart:function(){},onComplete:function(){var t=self.performance.now();g.executeEnd=g.end=t,0===m.first&&(m.first=t),y&&0===y.first&&(y.first=t);var e=n.sourceBuffer,r={};for(var a in e)r[a]=s.BufferHelper.getBuffered(e[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:f,frag:d,part:h,chunkMeta:p,parent:d.type,timeRanges:r})},onError:function(t){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+f+" SourceBuffer",t);var e={type:o.ErrorTypes.MEDIA_ERROR,parent:d.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=o.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,e.details=o.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),r.trigger(i.Events.ERROR,e)}},f)},e.onBufferFlushing=function(t,e){var n=this,r=this.operationQueue,o=function(t){return{execute:n.removeExecutor.bind(n,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:t})},onError:function(e){a.logger.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?r.append(o(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){r.append(o(t),t)}))},e.onFragParsed=function(t,e){var n=this,r=e.frag,o=e.part,s=[],u=o?o.elementaryStreams:r.elementaryStreams;u[l.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(u[l.ElementaryStreamTypes.AUDIO]&&s.push("audio"),u[l.ElementaryStreamTypes.VIDEO]&&s.push("video")),0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers((function(){var t=self.performance.now();r.stats.buffering.end=t,o&&(o.stats.buffering.end=t),n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:o,stats:o?o.stats:r.stats,id:r.type})}),s)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var n=this;this.getSourceBufferTypes().reduce((function(t,r){var i=n.sourceBuffer[r];return e.type&&e.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),t&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var t=n.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var n=e.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==e){var o=this.getSourceBufferTypes();if(o.length){var u=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(r.isFiniteNumber)(u)&&!(u<0)){var l=n.currentTime,c=e.levelTargetDuration,f=Math.max(u,c),d=Math.floor(l/c)*c-f;o.forEach((function(n){var r=a[n];if(r){var o=s.BufferHelper.getBuffered(r);o.length>0&&d>o.start(0)&&(t.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:d}),e.live&&t.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),t.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:n}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,n=this.mediaSource,i=t.fragments[0].start+t.totalduration,o=this.media.duration,s=Object(r.isFiniteNumber)(n.duration)?n.duration:0;t.live&&e.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(t)):(i>s&&i>o||!Object(r.isFiniteNumber)(o))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),n.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,n=t.fragments;if(n.length&&t.live&&null!=e&&e.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+t.totalduration);e.setLiveSeekableRange(r,i)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!t||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var s in t)if(!e[s]){var u=t[s];if(!u)throw Error("source buffer exists for track "+s+", however track does not");var l=u.levelCodec||u.codec,c=u.container+";codecs="+l;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var f=e[s]=n.addSourceBuffer(c),d=s;this.addBufferListener(d,"updatestart",this._onSBUpdateStart),this.addBufferListener(d,"updateend",this._onSBUpdateEnd),this.addBufferListener(d,"error",this._onSBUpdateError),this.tracks[s]={buffer:f,codec:l,container:u.container,levelCodec:u.levelCodec,id:u.id},r++}catch(h){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+h.message),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,mimeType:c})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){a.logger.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(t);n&&n.onError(e)},e.removeExecutor=function(t,e,n){var i=this.media,o=this.mediaSource,s=this.operationQueue,u=this.sourceBuffer[t];if(!i||!o||!u)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var l=Object(r.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(r.isFiniteNumber)(o.duration)?o.duration:1/0,f=Math.max(0,e),d=Math.min(n,l,c);d>f?(a.logger.log("[buffer-controller]: Removing ["+f+","+d+"] from the "+t+" SourceBuffer"),console.assert(!u.updating,t+" sourceBuffer must not be updating"),u.remove(f,d)):s.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var n=this.operationQueue,r=this.sourceBuffer[e];if(!r)return a.logger.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(e);r.ended=!1,console.assert(!r.updating,e+" sourceBuffer must not be updating"),r.appendBuffer(t)},e.blockBuffers=function(t,e){var n=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var r=this.operationQueue,i=e.map((function(t){return r.appendBlocker(t)}));Promise.all(i).then((function(){t(),e.forEach((function(t){var e=n.sourceBuffer[t];e&&e.updating||r.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,n){var r=this.sourceBuffer[t];if(r){var i=n.bind(this,t);this.listeners[t].push({event:e,listener:i}),r.addEventListener(e,i)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}()},"./src/controller/buffer-operation-queue.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));var r=n("./src/utils/logger.ts"),i=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var n=this.queues[e];n.push(t),1===n.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,n=new Promise((function(t){e=t}));return this.append({execute:e,onStart:function(){},onComplete:function(){},onError:function(){}},t),n},e.executeNext=function(t){var e=this.buffers[t],n=this.queues[t];if(n.length){var i=n[0];try{i.execute()}catch(a){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(a),e&&e.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}()},"./src/controller/cap-level-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.default=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,n,a,o=t.prototype;return o.setStreamController=function(t){this.streamController=t},o.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},o.registerListeners=function(){var t=this.hls;t.on(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.unregisterListener=function(){var t=this.hls;t.off(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.onFpsDropLevelCapping=function(e,n){t.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},o.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},o.onManifestParsed=function(t,e){var n=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,n.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},o.getMaxLevel=function(e){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter((function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,n){if(!t||!t.length)return-1;for(var r,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=n)&&(r=s,!(i=t[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(e){}return t}}],(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&i(e.prototype,n),a&&i(e,a),t}()},"./src/controller/cmcd-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var r=n("./src/events.ts"),i=n("./src/types/cmcd.ts"),a=n("./src/utils/buffer-helper.ts"),o=n("./src/utils/logger.ts");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var d=function(){function t(e){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(t){try{n.apply(t,{ot:i.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(e){o.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(t){try{var e=t.frag,r=n.hls.levels[e.level],a=n.getObjectType(e),s={d:1e3*e.duration,ot:a};a!==i.CMCDObjectType.VIDEO&&a!==i.CMCDObjectType.AUDIO&&a!=i.CMCDObjectType.MUXED||(s.br=r.bitrate/1e3,s.tb=n.getTopBandwidth(a)/1e3,s.bl=n.getBufferLength(a)),n.apply(t,s)}catch(u){o.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=e;var r=this.config=e.config,a=r.cmcd;null!=a&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||t.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.on(r.Events.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.off(r.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},e.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var n,r;this.audioBuffer=null===(n=e.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(r=e.tracks.video)||void 0===r?void 0:r.buffer},e.createData=function(){var t;return{v:i.CMCDVersion,sf:i.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,n){if(void 0===n&&(n={}),f(n,this.createData()),this.starved&&(n.ot===i.CMCDObjectType.INIT||n.ot===i.CMCDObjectType.VIDEO||n.ot===i.CMCDObjectType.MUXED)&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var r=t.toHeaders(n);if(!Object.keys(r).length)return;e.headers||(e.headers={}),f(e.headers,r)}else{var a=t.toQuery(n);if(!a)return;e.url=t.appendQueryToUri(e.url,a)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?i.CMCDObjectType.TIMED_TEXT:"initSegment"===t.sn?i.CMCDObjectType.INIT:"audio"===e?i.CMCDObjectType.AUDIO:"main"===e?this.hls.audioTracks.length?i.CMCDObjectType.VIDEO:i.CMCDObjectType.MUXED:void 0},e.getTopBandwidth=function(t){var e,n=0,r=this.hls;if(t===i.CMCDObjectType.AUDIO)e=r.audioTracks;else{var a=r.maxAutoLevel;e=r.levels.slice(0,a>-1?a+1:r.levels.length)}for(var o,s=l(e);!(o=s()).done;){var u=o.value;u.bitrate>n&&(n=u.bitrate)}return n>0?n:NaN},e.getBufferLength=function(t){var e=this.hls.media,n=t===i.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&e?1e3*a.BufferHelper.bufferInfo(n,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.applyPlaylistData,e=this.config.pLoader||this.config.loader;return function(){function n(t){this.loader=void 0,this.loader=new e(t)}var r=n.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},u(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n}()},e.createFragmentLoader=function(){var t=this.applyFragmentData,e=this.config.fLoader||this.config.loader;return function(){function n(t){this.loader=void 0,this.loader=new e(t)}var r=n.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},u(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,n=[],r=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},i=function(t){return Math.round(t)},a=function(t){return 100*i(t/100)},o={br:i,d:i,bl:a,dl:a,mtp:a,nor:function(t){return encodeURIComponent(t)},rtp:a,tb:i},s=l(Object.keys(t||{}).sort());!(e=s()).done;){var u=e.value,c=t[u];if(r(c)&&!("v"===u&&1===c||"pr"==u&&1===c)){var f=o[u];f&&(c=f(c));var d,h=typeof c;d="ot"===u||"sf"===u||"st"===u?u+"="+c:"boolean"===h?u:"number"===h?u+"="+c:u+"="+JSON.stringify(c),n.push(d)}}return n.join(",")},t.toHeaders=function(e){for(var n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(e);o<s.length;o++){var u=s[o];i[null!=a[u]?a[u]:1][u]=e[u]}for(var l=0;l<i.length;l++){var c=t.serialize(i[l]);c&&(n["CMCD-"+r[l]]=c)}return n},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var n=t.includes("?")?"&":"?";return""+t+n+e},t}()},"./src/controller/eme-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),o=n("./src/utils/mediakeys-helper.ts");e.default=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,n=t.prototype;return n.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},n._registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},n._unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},n.getLicenseServerUrl=function(t){switch(t){case o.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},n._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n,r){switch(t){case o.KeySystems.WIDEVINE:return function(t,e,n){var r={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[r]}(e,n,r);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=s.then((function(e){return r._onMediaKeySystemAccessObtained(t,e)})),s.catch((function(e){a.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},n._onMediaKeySystemAccessObtained=function(t,e){var n=this;a.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return r.mediaKeys=e,a.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return i.catch((function(t){a.logger.error("Failed to create media-keys:",t)})),i},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},n._onNewMediaKeySession=function(t){var e=this;a.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},n._onKeySessionMessage=function(t,e){a.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){a.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},n.onMediaEncrypted=function(t){var e=this;if(a.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){e._media&&(e._attemptSetMediaKeys(n),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(n).catch(n)},n._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(t,e){var n=this,o=this._mediaKeysList[0];if(!o)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(o.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var s=o.mediaKeysSession;if(!s)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+t+'" init data type'),o.mediaKeysSessionInitialized=!0,s.generateRequest(t,e).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(t){a.logger.error("Error generating key-session request:",t),n.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},n._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,t),i=void 0}catch(o){a.logger.error(o)}try{r.readyState||r.open("POST",t,!0),i&&i.call(this.hls,r,t)}catch(o){throw new Error("issue setting up KeySystem license XHR "+o)}return r},n._onLicenseRequestReadyStageChange=function(t,e,n,o){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var s=t.response,u=this._licenseResponseCallback;if(u)try{s=u.call(this.hls,t,e)}catch(l){a.logger.error(l)}o(s)}else{if(a.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});a.logger.warn("Retrying license request, "+(3-this._requestLicenseFailureCount+1)+" attempts left"),this._requestLicense(n,o)}}},n._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case o.KeySystems.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},n._requestLicense=function(t,e){a.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var o=this.getLicenseServerUrl(n.mediaKeySystemDomain),s=this._createLicenseXhr(o,t,e);a.logger.log("Sending license request to URL: "+o);var u=this._generateLicenseRequestChallenge(n,t);s.send(u)}catch(l){a.logger.error("Failure requesting DRM license: "+l),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(t,e){if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},n.onManifestParsed=function(t,e){if(this._emeEnabled){var n=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),r=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(o.KeySystems.WIDEVINE,n,r)}},(e=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/fps-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/logger.ts");e.default=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,n){var a=performance.now();if(e){if(this.lastTime){var o=n-this.lastDroppedFrames,s=e-this.lastDecodedFrames,u=1e3*o/(a-this.lastTime),l=this.hls;if(l.trigger(r.Events.FPS_DROP,{currentDropped:o,currentDecoded:s,totalDroppedFrames:n}),u>0&&o>l.config.fpsDroppedMonitoringThreshold*s){var c=l.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(l.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:c-=1,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}()},"./src/controller/fragment-finders.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"findFragmentByPDT",(function(){return a})),n.d(e,"findFragmentByPTS",(function(){return o})),n.d(e,"fragmentWithinToleranceTest",(function(){return s})),n.d(e,"pdtWithinToleranceTest",(function(){return u})),n.d(e,"findFragWithCC",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/binary-search.ts");function a(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(r.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(u(e,n,a))return a}return null}function o(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=null;return t?a=e[t.sn-e[0].sn+1]||null:0===n&&0===e[0].start&&(a=e[0]),a&&0===s(n,r,a)?a:i.default.search(e,s.bind(null,n,r))||a}function s(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function u(t,e,n){var r=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>t}function l(t,e){return i.default.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}},"./src/controller/fragment-tracker.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"FragmentState",(function(){return r})),n.d(e,"FragmentTracker",(function(){return o}));var r,i=n("./src/events.ts"),a=n("./src/types/loader.ts");!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(r||(r={}));var o=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===a.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var o=r[i],s=o?o.end:n.appendedPTS;if(o.start<=t&&void 0!==s&&t<=s)return i>9&&(this.activeParts=r.slice(i-9)),o}else if(n.start<=t&&void 0!==n.appendedPTS&&t<=n.appendedPTS)return n}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null==a?void 0:a.body.type)===e&&a.buffered){var o=a.body;if(o.start<=t&&t<=o.end)return o}}return null},e.detectEvictedFragments=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a)if(a.buffered){var o=a.range[t];o&&o.time.some((function(t){var n=!r.isTimeBuffered(t.startPTS,t.endPTS,e);return n&&r.removeFragment(a.body),n}))}else a.body.type===n&&r.removeFragment(a.body)}))},e.detectPartialFragments=function(t){var e=this,n=this.timeRanges,r=t.frag,i=t.part;if(n&&"initSegment"!==r.sn){var a=u(r),o=this.fragments[a];o&&(Object.keys(n).forEach((function(t){var a=r.elementaryStreams[t];a&&(o.range[t]=e.getBufferedTimes(r,i,null!==i||!0===a.partial,n[t]))})),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},e.fragBuffered=function(t){var e=u(t),n=this.fragments[e];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},e.getBufferedTimes=function(t,e,n,r){for(var i={time:[],partial:n},a=e?e.start:t.start,o=e?e.end:t.end,s=t.minEndPTS||o,u=t.maxStartPTS||a,l=0;l<r.length;l++){var c=r.start(l)-this.bufferPadding,f=r.end(l)+this.bufferPadding;if(u>=c&&s<=f){i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(o,r.end(l))});break}if(a<f&&o>c)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(o,r.end(l))});else if(o<=c)break}return i},e.getPartialFragment=function(t){var e,n,r,i=null,a=0,o=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach((function(l){var c=u[l];c&&s(c)&&(r=c.body.end+o,t>=(n=c.body.start-o)&&t<=r&&(e=Math.min(t-n,r-t),a<=e&&(i=c.body,a=e)))})),i},e.getState=function(t){var e=u(t),n=this.fragments[e];return n?n.buffered?s(n)?r.PARTIAL:r.OK:n.backtrack?r.BACKTRACKED:r.APPENDING:r.NOT_LOADED},e.backtrack=function(t,e){var n=u(t),r=this.fragments[n];if(!r||r.backtrack)return null;var i=r.backtrack=e||r.loaded;return r.loaded=null,i},e.getBacktrackData=function(t){var e=u(t),n=this.fragments[e];if(n){var r,i=n.backtrack;if(null!=i&&null!==(r=i.payload)&&void 0!==r&&r.byteLength)return i;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,t>=r&&e<=i)return!0;if(e<=r)return!1}return!1},e.onFragLoaded=function(t,e){var n=e.frag;if("initSegment"!==n.sn&&!n.bitrateTest&&!e.part){var r=u(n);this.fragments[r]={body:n,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var n=this,r=e.frag,i=e.part,o=e.timeRanges;if(r.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(i)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach((function(t){var e=o[t];if(n.detectEvictedFragments(t,e),!i)for(var a=0;a<e.length;a++)r.appendedPTS=Math.max(e.end(a),r.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=u(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var o=a.body;o.type===n&&o.start<e&&o.end>t&&r.removeFragment(o)}}))},e.removeFragment=function(t){var e=u(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function s(t){var e,n;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(n=t.range.audio)||void 0===n?void 0:n.partial))}function u(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}},"./src/controller/gap-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"STALL_MINIMUM_DURATION_MS",(function(){return s})),n.d(e,"MAX_START_GAP_JUMP",(function(){return u})),n.d(e,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return l})),n.d(e,"SKIP_BUFFER_RANGE_START",(function(){return c})),n.d(e,"default",(function(){return f}));var r=n("./src/utils/buffer-helper.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts"),o=n("./src/utils/logger.ts"),s=250,u=2,l=.1,c=.05,f=function(){function t(t,e,n,r){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,n=this.media,i=this.stalled,a=n.currentTime,l=n.seeking,c=this.seeking&&!l,f=!this.seeking&&l;if(this.seeking=l,a===t){if((f||c)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&r.BufferHelper.getBuffered(n).length){var d=r.BufferHelper.bufferInfo(n,a,0),h=d.nextStart||0;if(d.len>0||h){if(l){var p=d.len>u,g=!h||h-a>u&&!this.fragmentTracker.getPartialFragment(a);if(p||g)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var v,m=Math.max(h,d.start||0)-a,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,_=null==y||null===(v=y.details)||void 0===v?void 0:v.live;if(m>0&&m<=(_?2*y.details.targetduration:u))return void this._trySkipBufferHole(null)}var b=self.performance.now();if(null!==i){var E=b-i;!l&&E>=s&&this._reportStall(d.len);var T=r.BufferHelper.bufferInfo(n,a,e.maxBufferHole);this._tryFixBufferStall(T,E)}else this.stalled=b}}}else if(this.moved=!0,null!==i){if(this.stallReported){var S=self.performance.now()-i;o.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker.getPartialFragment(this.media.currentTime);r&&this._trySkipBufferHole(r)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,s=this.media,u=s.currentTime,f=0,d=r.BufferHelper.getBuffered(s),h=0;h<d.length;h++){var p=d.start(h);if(u+e.maxBufferHole>=f&&u<p){var g=Math.max(p+c,s.currentTime+l);return o.logger.warn("skipping hole, adjusting currentTime from "+u+" to "+g),this.moved=!0,this.stalled=null,s.currentTime=g,t&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+u+" to "+g,frag:t}),g}f=d.end(h)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<t.nudgeMaxRetry){var u=r+s*t.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+r+" to "+u),n.currentTime=u,e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}()},"./src/controller/id3-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/demux/id3.ts");e.default=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Object(i.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var n=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<r.length;o++){var s=a.getID3Frames(r[o].data);if(s){var u=r[o].pts,l=o<r.length-1?r[o+1].pts:n.end;l-u<=0&&(l=u+.25);for(var c=0;c<s.length;c++){var f=s[c];if(!a.isTimeStampFrame(f)){var d=new i(u,l,"");d.value=f,this.id3Track.addCue(d)}}}}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,a=e.type;if(!a||"audio"===a){var o=this.id3Track;o&&Object(i.removeCuesInRange)(o,n,r)}},t}()},"./src/controller/latency-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n("./src/errors.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,n=t.prototype;return n.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},n.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},n.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},n.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},n.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},n.onLevelUpdated=function(t,e){var n=e.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},n.onError=function(t,e){e.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},n.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.maxLiveSyncPlaybackRate;if(r.lowLatencyMode&&1!==i){var a=this.targetLatency;if(null!==a){var o=n-a,s=Math.min(this.maxLatency,a+e.targetduration);if(e.live&&o<s&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,i)),l=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,l))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},n.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},n.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},(e=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.targetduration,n=this.config,r=n.liveSyncDuration,i=this.hls.userConfig,a=n.lowLatencyMode&&t.partHoldBack||t.holdBack;return(i.liveSyncDuration||i.liveSyncDurationCount||0===a)&&(a=void 0!==r?r:n.liveSyncDurationCount*e),a+Math.min(1*this.stallCount,e)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,n=this.levelDetails;if(null===t||null===e||null===n)return null;var r=n.edge,i=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(r-n.totalduration,t-e-this.edgeStalled),i)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;return null===t?0:Math.max(t.age-3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var n=t.buffered.length;return n?t.buffered.end(n-1):e.edge-this.currentTime}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/level-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n("./src/types/level.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/utils/codecs.ts"),s=n("./src/controller/level-helper.ts"),u=n("./src/controller/base-playlist-controller.ts"),l=n("./src/types/loader.ts");function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=function(t){var e,n;function u(e){var n;return(n=t.call(this,e,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=t,(e=u).prototype=Object.create(n.prototype),e.prototype.constructor=e,f(e,n);var h,p=u.prototype;return p._registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.ERROR,this.onError,this)},p._unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.ERROR,this.onError,this)},p.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},p.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},p.onManifestLoaded=function(t,e){var n,u,l=[],c=[],f=[],h={},p=!1,g=!1,v=!1;if(e.levels.forEach((function(t){var e=t.attrs;p=p||!(!t.width||!t.height),g=g||!!t.videoCodec,v=v||!!t.audioCodec,d&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var n=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(u=h[n])?u.url.push(t.url):(u=new r.Level(t),h[n]=u,l.push(u)),e&&(e.AUDIO&&Object(s.addGroupId)(u,"audio",e.AUDIO),e.SUBTITLES&&Object(s.addGroupId)(u,"text",e.SUBTITLES))})),(p||g)&&v&&(l=l.filter((function(t){return!!t.videoCodec||!(!t.width||!t.height)}))),l=l.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||Object(o.isCodecSupportedInMp4)(e,"audio"))&&(!n||Object(o.isCodecSupportedInMp4)(n,"video"))})),e.audioTracks&&(c=e.audioTracks.filter((function(t){return!t.audioCodec||Object(o.isCodecSupportedInMp4)(t.audioCodec,"audio")})),Object(s.assignTrackIdsByGroup)(c)),e.subtitles&&(f=e.subtitles,Object(s.assignTrackIdsByGroup)(f)),l.length>0){n=l[0].bitrate,l.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=l;for(var m=0;m<l.length;m++)if(l[m].bitrate===n){this._firstLevel=m,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+n);break}var y={levels:l,audioTracks:c,subtitleTracks:f,firstLevel:this._firstLevel,stats:e.stats,audio:v,video:g,altAudio:!(v&&!g)&&c.some((function(t){return!!t.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,y),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},p.onError=function(e,n){if(t.prototype.onError.call(this,e,n),!n.fatal){var r=n.context,i=this._levels[this.currentLevelIndex];if(r&&(r.type===l.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&r.groupId===i.audioGroupIds[i.urlId]||r.type===l.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&r.groupId===i.textGroupIds[i.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,s=!1,u=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var c=this._levels[n.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=n.frag.level)):o=n.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(u=!1),o=r.level),s=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:o=n.level,s=!0}void 0!==o&&this.recoverLevel(n,o,s,u)}}},p.recoverLevel=function(t,e,n,r){var i=t.details,a=this._levels[e];if(a.loadError++,n){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(r){var o=a.url.length;if(o>1&&a.loadError<o)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var s=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(i+": switch to "+s),t.levelRetry=!0,this.hls.nextAutoLevel=s)}}},p.redundantFailover=function(t){var e=this._levels[t],n=e.url.length;if(n>1){var r=(e.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach((function(t){t.urlId=r})),this.level=t}},p.onFragLoaded=function(t,e){var n=e.frag;if(void 0!==n&&n.type===l.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},p.onLevelLoaded=function(t,e){var n,r,i=e.level,a=e.details,o=this._levels[i];if(!o)return this.warn("Invalid level index "+i),void(null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(i,e,o.details)):null!==(n=e.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},p.onAudioTrackSwitched=function(t,e){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[e.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},p.loadPlaylist=function(t){var e=this.currentLevelIndex,n=this._levels[e];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,a=n.url[r];if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+r+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:e,id:r,deliveryDirectives:t||null})}},p.removeLevel=function(t,e){var n=function(t,n){return n!==e},r=this._levels.filter((function(r,i){return i!==t||r.url.length>1&&void 0!==e&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)})).map((function(t,e){var n=t.details;return null!=n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=r,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:r})},(h=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==t||null===(e=n[t])||void 0===e||!e.details)){if(t<0||t>=n.length){var r=t<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:r,reason:"invalid level idx"}),r)return;t=Math.min(t,n.length-1)}this.clearTimer();var o=this.currentLevelIndex,s=n[o],u=n[t];this.log("switching to level "+t+" from "+o),this.currentLevelIndex=t;var l=c({},u,{level:t,maxBitrate:u.maxBitrate,uri:u.uri,urlId:u.urlId});delete l._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,l);var f=u.details;if(!f||f.live){var d=this.switchParams(u.uri,null==s?void 0:s.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,h),u}(u.default)},"./src/controller/level-helper.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"addGroupId",(function(){return a})),n.d(e,"assignTrackIdsByGroup",(function(){return o})),n.d(e,"updatePTS",(function(){return s})),n.d(e,"updateFragPTSDTS",(function(){return l})),n.d(e,"mergeDetails",(function(){return c})),n.d(e,"mapPartIntersection",(function(){return f})),n.d(e,"mapFragmentIntersection",(function(){return d})),n.d(e,"adjustSliding",(function(){return h})),n.d(e,"addSliding",(function(){return p})),n.d(e,"computeReloadInterval",(function(){return g})),n.d(e,"getFragmentWithSN",(function(){return v})),n.d(e,"getPartWith",(function(){return m}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts");function a(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function o(t){var e={};t.forEach((function(t){var n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++}))}function s(t,e,n){u(t[e],t[n])}function u(t,e){var n=e.startPTS;if(Object(r.isFiniteNumber)(n)){var i,a=0;e.sn>t.sn?(a=n-t.start,i=t):(a=t.start-n,i=e),i.duration!==a&&(i.duration=a)}else e.start=e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?t.start+(t.minEndPTS-t.start):t.start+t.duration:Math.max(t.start-e.duration,0)}function l(t,e,n,a,o,s){a-n<=0&&(i.logger.warn("Fragment should have a positive duration",e),a=n+e.duration,s=o+e.duration);var l=n,c=a,f=e.startPTS,d=e.endPTS;if(Object(r.isFiniteNumber)(f)){var h=Math.abs(f-n);e.deltaPTS=Object(r.isFiniteNumber)(e.deltaPTS)?Math.max(h,e.deltaPTS):h,l=Math.max(n,f),n=Math.min(n,f),o=Math.min(o,e.startDTS),c=Math.min(a,d),a=Math.max(a,d),s=Math.max(s,e.endDTS)}e.duration=a-n;var p=n-e.start;e.appendedPTS=a,e.start=e.startPTS=n,e.maxStartPTS=l,e.startDTS=o,e.endPTS=a,e.minEndPTS=c,e.endDTS=s;var g,v=e.sn;if(!t||v<t.startSN||v>t.endSN)return 0;var m=v-t.startSN,y=t.fragments;for(y[m]=e,g=m;g>0;g--)u(y[g],y[g-1]);for(g=m;g<y.length-1;g++)u(y[g],y[g+1]);return t.fragmentHint&&u(y[y.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,p}function c(t,e){for(var n=null,a=t.fragments,o=a.length-1;o>=0;o--){var s=a[o].initSegment;if(s){n=s;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var u,c=0;if(d(t,e,(function(t,i){t.relurl&&(c=t.cc-i.cc),Object(r.isFiniteNumber)(t.startPTS)&&Object(r.isFiniteNumber)(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.appendedPTS=t.appendedPTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(u=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment&&(i.initSegment=t.initSegment,n=t.initSegment)})),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null===(e=n)||void 0===e?void 0:e.relurl)||(t.initSegment=n)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=e.skippedSegments;p--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var g=e.fragments;if(c){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<g.length;v++)g[v].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),f(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),u?l(e,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS):h(t,e),g.length&&(e.totalduration=e.edge-g[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var m=e.advancedDateTime;if(e.advanced&&m){var y=e.edge;e.driftStart||(e.driftStartTime=m,e.driftStart=y),e.driftEndTime=m,e.driftEnd=y}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function f(t,e,n){if(t&&e)for(var r=0,i=0,a=t.length;i<=a;i++){var o=t[i],s=e[i+r];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):r--}}function d(t,e,n){for(var r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=i;l<=a;l++){var c=u[o+l],f=s[l];r&&!f&&l<r&&(f=e.fragments[l]=c),c&&f&&n(c,f)}}function h(t,e){var n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||p(e,r[n].start)}function p(t,e){if(e){for(var n=t.fragments,r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function g(t,e){var n,r=1e3*t.levelTargetDuration,i=r/2,a=t.age,o=a>0&&a<3*r,s=e.loading.end-e.loading.start,u=t.availabilityDelay;if(!1===t.updated)if(o){var l=333*t.misses;n=Math.max(Math.min(i,2*s),l),t.availabilityDelay=(t.availabilityDelay||0)+n}else n=i;else o?(u=Math.min(u||r/2,a),t.availabilityDelay=u,n=u+r-a):n=r-s;return Math.round(n)}function v(t,e,n){if(!t||!t.details)return null;var r=t.details,i=r.fragments[e-r.startSN];return i||((i=r.fragmentHint)&&i.sn===e?i:e<r.startSN&&n&&n.sn===e?n:null)}function m(t,e,n){if(!t||!t.details)return null;var r=t.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===e)return a}return null}},"./src/controller/stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/is-supported.ts"),o=n("./src/events.ts"),s=n("./src/utils/buffer-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),f=n("./src/demux/transmuxer-interface.ts"),d=n("./src/types/transmuxer.ts"),h=n("./src/controller/gap-controller.ts"),p=n("./src/errors.ts"),g=n("./src/utils/logger.ts");function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){var e,n;function m(e,n){var r;return(r=t.call(this,e,n,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.stalled=!1,r.couldBacktrack=!1,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=t,(e=m).prototype=Object.create(n.prototype),e.prototype.constructor=e,v(e,n);var y,_=m.prototype;return _._registerListeners=function(){var t=this.hls;t.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(o.Events.ERROR,this.onError,this),t.on(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(o.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var t=this.hls;t.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(o.Events.ERROR,this.onError,this),t.off(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(o.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},_.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},_.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},_.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var t,e=this.levels,n=null==e||null===(t=e[this.level])||void 0===t?void 0:t.details;if(n&&(!n.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(n))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var r,a=self.performance.now(),o=this.retryDate;(!o||a>=o||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},_.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},_.doTickIdle=function(){var t,e,n=this.hls,r=this.levels,a=this.media,s=n.nextLoadLevel;if(null!==this.levelLastLoaded&&(a||!this.startFragRequested&&n.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&r&&r[s]){var f=r[s];this.level=n.nextLoadLevel=s;var d=f.details;if(!d||this.state===i.State.WAITING_LEVEL||d.live&&this.levelLastLoaded!==s)this.state=i.State.WAITING_LEVEL;else{var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:a,l.PlaylistLevelType.MAIN);if(null!==h&&!(h.len>=this.getMaxBufferLength(f.maxBitrate))){if(this._streamEnded(h,d)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(o.Events.BUFFER_EOS,p),void(this.state=i.State.ENDED)}var g=h.end,v=this.getNextFragment(g,d);if(this.couldBacktrack&&!this.fragPrevious&&v&&"initSegment"!==v.sn){var m=v.sn-d.startSN;m>1&&this.fragmentTracker.removeFragment(v=d.fragments[m-1])}v&&this.fragmentTracker.getState(v)===u.FragmentState.OK&&this.nextLoadPosition>g&&(this.afterBufferFlushed(a,this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO,l.PlaylistLevelType.MAIN),v=this.getNextFragment(this.nextLoadPosition,d)),v&&(!v.initSegment||v.initSegment.data||this.bitrateTest||(v=v.initSegment),"identity"!==(null===(t=v.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=v.decryptdata)&&void 0!==e&&e.key?this.loadFragment(v,d,g):this.loadKey(v,d))}}}},_.loadFragment=function(e,n,r){var i,a=this.fragmentTracker.getState(e);if(this.fragCurrent=e,a===u.FragmentState.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(e);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);a=u.FragmentState.NOT_LOADED}a===u.FragmentState.NOT_LOADED||a===u.FragmentState.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,r)):a===u.FragmentState.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},_.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,l.PlaylistLevelType.MAIN);return e&&"fragment"in e?e.fragment:e},_.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,l.PlaylistLevelType.MAIN)},_.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},_.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},_.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var n,r=this.getAppendedFrag(e.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!e.paused&&t){var i=this.fragLastKbps;n=i&&this.fragCurrent?this.fragCurrent.duration*t[this.hls.nextLoadLevel].maxBitrate/(1e3*i)+1:0}else n=0;var a=this.getBufferedFrag(e.currentTime+n);if(a){var o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();var s=o.duration,u=Math.max(a.end,(o.maxStartPTS?o.maxStartPTS:o.start)+Math.min(Math.max(s-this.config.maxFragLookUpTolerance,.5*s),.75*s));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},_.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},_.flushMainBuffer=function(e,n){t.prototype.flushMainBuffer.call(this,e,n,this.altAudio?"video":null)},_.onMediaAttached=function(e,n){t.prototype.onMediaAttached.call(this,e,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new h.default(this.config,r,this.fragmentTracker,this.hls)},_.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},_.onMediaPlaying=function(){this.tick()},_.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(r.isFiniteNumber)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},_.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(o.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},_.onManifestParsed=function(t,e){var n,r=!1,i=!1;e.levels.forEach((function(t){(n=t.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i&&!Object(a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},_.onLevelLoading=function(t,e){var n=this.levels;if(n&&this.state===i.State.IDLE){var r=n[e.level];(!r.details||r.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(r.details))&&(this.state=i.State.WAITING_LEVEL)}},_.onLevelLoaded=function(t,e){var n,r=this.levels,a=e.level,s=e.details;if(r){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+s.totalduration);var u=this.fragCurrent;!u||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||u.level!==e.level&&u.loader&&(this.state=i.State.IDLE,u.loader.abort());var l=r[a],c=0;if(s.live||null!==(n=l.details)&&void 0!==n&&n.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,l.details)}if(l.details=s,this.levelLastLoaded=a,this.hls.trigger(o.Events.LEVEL_UPDATED,{details:s,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=i.State.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,c),this.tick()}else this.warn("Levels were reset while loading level "+a)},_._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,i=t.payload,a=this.levels;if(a){var o=a[n.level],s=o.details;if(s){var u=o.videoCodec,c=s.PTSKnown||!s.live,h=null===(e=n.initSegment)||void 0===e?void 0:e.data,p=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new f.default(this.hls,l.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=r?r.index:-1,m=new d.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,v,-1!==v);g.push(i,h,p,u,n,r,s.totalduration,c,m,this.initPTS[n.cc])}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},_.onAudioTrackSwitching=function(t,e){var n=this.altAudio,r=e.id;if(!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;null!=i&&i.loader&&(this.log("Switching to main audio track, cancel main fragment load"),i.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var a=this.hls;n&&a.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(o.Events.AUDIO_TRACK_SWITCHED,{id:r})}},_.onAudioTrackSwitched=function(t,e){var n=!!this.hls.audioTracks[e.id].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},_.onBufferCreated=function(t,e){var n,r,i=e.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(r=o,n=s,"video"===o){var u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},_.onFragBuffered=function(t,e){var n=e.frag,r=e.part;if(!n||n.type===l.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},_.onError=function(t,e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.MAIN,e);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(e.fatal?(this.warn(""+e.details),this.state=i.State.ERROR):e.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},_.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var n=s.BufferHelper.getBuffered(t);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},_.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},_.onBufferFlushed=function(t,e){var n=e.type;(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,n,l.PlaylistLevelType.MAIN)},_.onLevelsUpdated=function(t,e){this.levels=e.levels},_.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},_.seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(n>=0&&e<n){if(t.seeking)return void g.logger.log("could not seek to "+n+", already seeking at "+e);var r=s.BufferHelper.getBuffered(t),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(g.logger.log("adjusting start position by "+i+" to match buffer start"),this.startPosition=n+=i),this.log("seek to target start position "+n+" from current time "+e),t.currentTime=n}},_._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},_._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(n){var r=e.hls;if(n&&!r.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=i.State.IDLE,e.startFragRequested=!1,e.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(o.Events.FRAG_LOADED,n)}}))},_._handleTransmuxComplete=function(t){var e,n="main",a=this.hls,s=t.remuxResult,u=t.chunkMeta,l=this.getCurrentContext(u);if(!l)return this.warn("The loading context changed while buffering fragment "+u.sn+" of level "+u.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(u.level);var f=l.frag,d=l.part,h=l.level,p=s.video,g=s.text,v=s.id3,m=s.initSegment,y=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(f)){if(this.state=i.State.PARSING,m){m.tracks&&(this._bufferInitSegment(h,m.tracks,f,u),a.trigger(o.Events.FRAG_PARSING_INIT_SEGMENT,{frag:f,id:n,tracks:m.tracks}));var _=m.initPTS,b=m.timescale;Object(r.isFiniteNumber)(_)&&(this.initPTS[f.cc]=_,a.trigger(o.Events.INIT_PTS_FOUND,{frag:f,id:n,initPTS:_,timescale:b}))}if(p&&!1!==s.independent){if(h.details){var E=p.startPTS,T=p.endPTS,S=p.startDTS,w=p.endDTS;if(d)d.elementaryStreams[p.type]={startPTS:E,endPTS:T,startDTS:S,endDTS:w};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<E)return void this.backtrack(f);f.setElementaryStreamInfo(p.type,f.start,T,f.start,w,!0)}f.setElementaryStreamInfo(p.type,E,T,S,w),this.bufferFragmentData(p,f,d,u)}}else if(!1===s.independent)return void this.backtrack(f);if(y){var A=y.startPTS,x=y.endPTS,C=y.startDTS,D=y.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:A,endPTS:x,startDTS:C,endDTS:D}),f.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,A,x,C,D),this.bufferFragmentData(y,f,d,u)}null!=v&&null!==(e=v.samples)&&void 0!==e&&e.length&&a.trigger(o.Events.FRAG_PARSING_METADATA,{frag:f,id:n,samples:v.samples}),g&&a.trigger(o.Events.FRAG_PARSING_USERDATA,{frag:f,id:n,samples:g.samples})}},_._bufferInitSegment=function(t,e,n,r){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,u=e.video,l=e.audiovideo;if(s){var c=t.audioCodec,f=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===f.indexOf("firefox")&&(c="mp4a.40.5")),-1!==f.indexOf("android")&&"audio/mpeg"!==s.container&&this.log("Android: force audio codec to "+(c="mp4a.40.2")),t.audioCodec&&t.audioCodec!==c&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]")}u&&(u.levelCodec=t.videoCodec,u.id="main",this.log("Init video buffer, container:"+u.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+u.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(o.Events.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var i=e[t].initSegment;null!=i&&i.byteLength&&a.hls.trigger(o.Events.BUFFER_APPENDING,{type:t,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}},_.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=i.State.BACKTRACKING},_.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var n=t.currentTime;if(s.BufferHelper.isBuffered(t,n)?e=this.getAppendedFrag(n):s.BufferHelper.isBuffered(t,n+.1)&&(e=this.getAppendedFrag(n+.1)),e){var r=this.fragPlaying,i=e.level;r&&e.sn===r.sn&&r.level===i&&e.urlId===r.urlId||(this.hls.trigger(o.Events.FRAG_CHANGED,{frag:e}),r&&r.level===i||this.hls.trigger(o.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=e)}}},(y=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(m.prototype,y),m}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"SubtitleStreamController",(function(){return h}));var r=n("./src/events.ts"),i=n("./src/utils/buffer-helper.ts"),a=n("./src/controller/fragment-finders.ts"),o=n("./src/utils/discontinuities.ts"),s=n("./src/controller/level-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/controller/base-stream-controller.ts"),c=n("./src/types/loader.ts"),f=n("./src/types/level.ts");function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){var e,n;function h(e,n){var r;return(r=t.call(this,e,n,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=t,(e=h).prototype=Object.create(n.prototype),e.prototype.constructor=e,d(e,n);var p,g=h.prototype;return g.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},g._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(r.Events.ERROR,this.onError,this),t.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},g._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(r.Events.ERROR,this.onError,this),t.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},g.startLoad=function(){this.stopLoad(),this.state=l.State.IDLE,this.setInterval(500),this.tick()},g.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},g.onLevelLoaded=function(t,e){this.mainDetails=e.details},g.onSubtitleFragProcessed=function(t,e){var n=e.frag,r=e.success;if(this.fragPrevious=n,this.state=l.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=n.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var u=n.start+n.duration;a?a.end=u:i.push(a={start:o,end:u}),this.fragmentTracker.fragBuffered(n)}}},g.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=r-a[i].details.targetduration;if(o<=0)return;e.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=o)t.shift();else{if(!(t[e].start<o))break;t[e].start=o,e++}})),this.fragmentTracker.removeFragmentsInRange(n,o,c.PlaylistLevelType.SUBTITLE)}},g.onError=function(t,e){var n,r=e.frag;r&&r.type===c.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=l.State.IDLE)},g.onSubtitleTracksUpdated=function(t,e){var n=this,r=e.subtitleTracks;this.tracksBuffered=[],this.levels=r.map((function(t){return new f.Level(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){n.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},g.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];this.mediaBuffer=null!=n&&n.details?this.mediaBufferTimeRanges:null,n&&this.setInterval(500)}else this.clearInterval()},g.onSubtitleTrackLoaded=function(t,e){var n,r=e.details,i=e.id,u=this.currentTrackId,c=this.levels;if(c.length){var f=c[u];if(!(i>=c.length||i!==u)&&f){if(this.mediaBuffer=this.mediaBufferTimeRanges,r.live||null!==(n=f.details)&&void 0!==n&&n.live){var d=this.mainDetails;if(r.deltaUpdateFailed||!d)return;var h=d.fragments[0];f.details?0===this.alignPlaylists(r,f.details)&&h&&Object(s.addSliding)(r,h.start):r.hasProgramDateTime&&d.hasProgramDateTime?Object(o.alignMediaPlaylistByPDT)(r,d):h&&Object(s.addSliding)(r,h.start)}f.details=r,this.levelLastLoaded=i,this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===l.State.IDLE&&(Object(a.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),f.details=void 0))}}},g._handleFragmentLoadComplete=function(t){var e=t.frag,n=t.payload,i=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var o=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(t){var n=performance.now();a.trigger(r.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:n}})}))}},g.doTick=function(){if(this.media){if(this.state===l.State.IDLE){var t,e=this.currentTrackId,n=this.levels;if(!n.length||!n[e]||!n[e].details)return;var r=n[e].details,o=r.targetduration,s=this.config,c=i.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,this.media.currentTime-o,s.maxBufferHole),f=c.end;if(c.len>this.getMaxBufferLength()+o)return;console.assert(r,"Subtitle track details are defined on idle subtitle stream controller tick");var d,h=r.fragments,p=h.length,g=this.fragPrevious;if(f<r.edge){var v=s.maxFragLookUpTolerance;!(d=Object(a.findFragmentByPTS)(g,h,f,v))&&g&&g.start<h[0].start&&(d=h[0])}else d=h[p-1];null!==(t=d)&&void 0!==t&&t.encrypted?this.loadKey(d,r):d&&this.fragmentTracker.getState(d)===u.FragmentState.NOT_LOADED&&this.loadFragment(d,r,f)}}else this.state=l.State.IDLE},g.loadFragment=function(e,n,r){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,n,r)},(p=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(h.prototype,p),h}(l.default)},"./src/controller/subtitle-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/controller/base-playlist-controller.ts"),o=n("./src/types/loader.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}e.default=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var l,c=a.prototype;return c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},c.registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},c.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},c.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},c.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),u(this.media.textTracks).forEach((function(t){Object(i.clearCurrentCues)(t)})),this.subtitleTrack=-1,this.media=null)},c.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},c.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},c.onSubtitleTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.tracksInGroup[this.trackId];if(i){var a=i.details;i.details=e.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,a))}else this.warn("Invalid subtitle track id "+n)},c.onLevelLoading=function(t,e){this.switchLevel(e.level)},c.onLevelSwitching=function(t,e){this.switchLevel(e.level)},c.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var n=e.textGroupIds[e.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(t){return!n||t.groupId===n}));this.tracksInGroup=a;var o=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n;var s={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,i)}}},c.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},c.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},c.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},c.toggleTrackModes=function(t){var e=this,n=this.media,r=this.subtitleDisplay,i=this.trackId;if(n){var a=u(n.textTracks),o=a.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(a).forEach((function(t){t.mode="disabled"}));else{var s=o[i];s&&(s.mode="disabled")}var l=o[t];l&&(l.mode=r?"showing":"hidden")}},c.setSubtitleTrack=function(t,e){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(n=i[t])&&void 0!==n&&n.details)||t<-1||t>=i.length)){this.clearTimer();var a=i[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,a){var o=a.groupId;this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:a.id,groupId:void 0===o?"":o,name:a.name,type:a.type,url:a.url});var s=this.switchParams(a.url,null==e?void 0:e.details);this.loadPlaylist(s)}else this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},c.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=u(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},(l=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,l),a}(a.default)},"./src/controller/timeline-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"TimelineController",(function(){return d}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/cea-608-parser.ts"),o=n("./src/utils/output-filter.ts"),s=n("./src/utils/webvtt-parser.ts"),u=n("./src/utils/texttrack-utils.ts"),l=n("./src/utils/imsc1-ttml-parser.ts"),c=n("./src/types/loader.ts"),f=n("./src/utils/logger.ts"),d=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new o.default(this,"textTrack1"),n=new o.default(this,"textTrack2"),r=new o.default(this,"textTrack3"),s=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,e,n),this.cea608Parser2=new a.default(3,r,s)}t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.Events.FRAG_LOADING,this.onFragLoading,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.Events.FRAG_LOADING,this.onFragLoading,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,n,r,a){for(var o,s,u=!1,l=a.length;l--;){var c=a[l],f=(o=c[0],s=e,Math.min(c[1],n)-Math.max(o,s));if(f>=0&&(c[0]=Math.min(c[0],e),c[1]=Math.max(c[1],n),u=!0,f/(n-e)>.5))return}if(u||a.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,r);else{var d=this.Cues.newCue(null,e,n,r);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:d,track:t})}},e.onInitPtsFound=function(t,e){var n=this,r=e.frag,a=e.timescale,o=this.unparsedVttFrags;"main"===e.id&&(this.initPTS[r.cc]=e.initPTS,this.timescale[r.cc]=a),o.length&&(this.unparsedVttFrags=[],o.forEach((function(t){n.onFragLoaded(i.Events.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsTracks,n=this.media,r=this.captionsProperties[t],i=r.label,a=r.languageCode,o=this.getExistingTrack(t);if(o)e[t]=o,Object(u.clearCurrentCues)(e[t]),Object(u.sendAddTrackEvent)(e[t],n);else{var s=this.createTextTrack("captions",i,a);s&&(s[t]=!0,e[t]=s)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},e.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Object(u.clearCurrentCues)(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Object(u.clearCurrentCues)(e[n])}},e.onSubtitleTracksUpdated=function(t,e){var n=this;this.textTracks=[];var r=e.subtitleTracks||[],a=r.some((function(t){return t.textCodec===l.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=r||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var r;if(e<s.length){for(var i=null,a=0;a<s.length;a++)if(h(s[a],t)){i=s[a];break}i&&(r=i)}r?Object(u.clearCurrentCues)(r):(r=n.createTextTrack("subtitles",t.name,t.lang))&&(r.mode="disabled"),r&&(r.groupId=t.groupId,n.textTracks.push(r))}))}else if(!o&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},e.onManifestLoaded=function(t,e){var n=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var r=n.captionsProperties["textTrack"+e[1]];r&&(r.label=t.name,t.lang&&(r.languageCode=t.lang),r.media=t)}}))},e.onFragLoading=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn;if(this.enabled&&n&&r&&e.frag.type===c.PlaylistLevelType.MAIN){var a,o,s=e.frag.sn,u=null!=(a=null==e||null===(o=e.part)||void 0===o?void 0:o.index)?a:-1;s===i+1||s===i&&u===this.lastPartIndex+1||(n.reset(),r.reset()),this.lastSn=s,this.lastPartIndex=u}},e.onFragLoaded=function(t,e){var n=e.frag,a=e.payload,o=this.initPTS,s=this.unparsedVttFrags;if(n.type===c.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!Object(r.isFiniteNumber)(o[n.cc]))return s.push(e),void(o.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var u=n.decryptdata;if(null==u||null==u.key||"AES-128"!==u.method||"stats"in e){var f=this.tracks[n.level],d=this.vttCCs;d[n.cc]||(d[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),f&&f.textCodec===l.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,d)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var n=this,r=this.hls;Object(l.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){n._appendCues(e,t.level),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){f.logger.log("Failed to parse IMSC1: "+e),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,n){var r=this,a=this.hls;Object(s.parseWebVTT)(e,this.initPTS[t.cc],this.timescale[t.cc],n,t.cc,t.start,(function(e){r._appendCues(e,t.level),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(n){r._fallbackToIMSC1(t,e),f.logger.log("Failed to parse VTT cue: "+n),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:n})}))},e._fallbackToIMSC1=function(t,e){var n=this,r=this.tracks[t.level];r.textCodec||Object(l.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){r.textCodec=l.IMSC1_CODEC,n._parseIMSC1(t,e)}),(function(){r.textCodec="wvtt"}))},e._appendCues=function(t,e){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[e];if("disabled"===r.mode)return;t.forEach((function(t){return Object(u.addCueToTrack)(r,t)}))}else n.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:t,track:this.tracks[e].default?"default":"subtitles"+e})},e.onFragDecrypted=function(t,e){var n=e.frag;if(n.type===c.PlaylistLevelType.SUBTITLE){if(!Object(r.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.Events.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r)for(var i=0;i<e.samples.length;i++){var a=e.samples[i].bytes;if(a){var o=this.extractCea608Data(a);n.addData(e.samples[i].pts,o[0]),r.addData(e.samples[i].pts,o[1])}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,i=e.endOffsetSubtitles,a=e.type,o=this.media;if(o&&!(o.currentTime<r)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(t){return Object(u.removeCuesInRange)(s[t],n,r)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach((function(t){return Object(u.removeCuesInRange)(l[t],n,i)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],n=2,r=[[],[]],i=0;i<e;i++){var a=t[n++],o=127&t[n++],s=127&t[n++],u=3&a;0===o&&0===s||0!=(4&a)&&(0!==u&&1!==u||(r[u].push(o),r[u].push(s)))}return r},t}();function h(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}},"./src/crypt/aes-crypto.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}()},"./src/crypt/aes-decryptor.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"removePadding",(function(){return i})),n.d(e,"default",(function(){return a}));var r=n("./src/utils/typed-array.ts");function i(t){var e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Object(r.sliceUint8)(t,0,e-n):t}var a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;t[h]=v=v>>>8^255&v^99,e[v]=h;var m=d[h],y=d[m],_=d[y],b=257*d[v]^16843008*v;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,u[v]=(b=16843009*_^65537*y^257*m^16843008*h)<<24|b>>>8,l[v]=b<<16|b>>>16,c[v]=b<<8|b>>>24,f[v]=b,h?(h=m^d[d[d[_^m]]],p^=d[d[p]]):h=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),f=this.invKeySchedule=new Uint32Array(l),d=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=e[a]:(u=s,a%i==0?(u=d[(u=u<<8|u>>>24)>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u],u^=h[a/i|0]<<24):i>6&&a%i==4&&(u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],f[o]=o<4||a<=4?u:g[d[u>>>24]]^v[d[u>>>16&255]]^m[d[u>>>8&255]]^y[d[255&u]],f[o]=f[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n){for(var r,i,a,o,s,u,l,c,f,d,h,p,g,v=this.keySize+6,m=this.invKeySchedule,y=this.invSBox,_=this.invSubMix,b=_[0],E=_[1],T=_[2],S=_[3],w=this.uint8ArrayToUint32Array_(n),A=w[0],x=w[1],C=w[2],D=w[3],I=new Int32Array(t),R=new Int32Array(I.length),k=this.networkToHostOrderSwap;e<I.length;){for(c=k(I[e]),f=k(I[e+1]),d=k(I[e+2]),h=k(I[e+3]),o=c^m[0],s=h^m[1],u=d^m[2],l=f^m[3],p=4,g=1;g<v;g++)r=b[s>>>24]^E[u>>16&255]^T[l>>8&255]^S[255&o]^m[p+1],i=b[u>>>24]^E[l>>16&255]^T[o>>8&255]^S[255&s]^m[p+2],a=b[l>>>24]^E[o>>16&255]^T[s>>8&255]^S[255&u]^m[p+3],o=b[o>>>24]^E[s>>16&255]^T[u>>8&255]^S[255&l]^m[p],s=r,u=i,l=a,p+=4;r=y[s>>>24]<<24^y[u>>16&255]<<16^y[l>>8&255]<<8^y[255&o]^m[p+1],i=y[u>>>24]<<24^y[l>>16&255]<<16^y[o>>8&255]<<8^y[255&s]^m[p+2],a=y[l>>>24]<<24^y[o>>16&255]<<16^y[s>>8&255]<<8^y[255&u]^m[p+3],R[e]=k(y[o>>>24]<<24^y[s>>16&255]<<16^y[u>>8&255]<<8^y[255&l]^m[p]^A),R[e+1]=k(a^x),R[e+2]=k(i^C),R[e+3]=k(r^D),A=c,x=f,C=d,D=h,e+=4}return R.buffer},t}()},"./src/crypt/decrypter.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n("./src/crypt/aes-crypto.ts"),i=n("./src/crypt/fast-aes-key.ts"),a=n("./src/crypt/aes-decryptor.ts"),o=n("./src/utils/logger.ts"),s=n("./src/utils/mp4-tools.ts"),u=n("./src/utils/typed-array.ts"),l=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(o){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(e):e}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,n).then(r)},e.softwareDecrypt=function(t,e,n){var r=this.currentIV,i=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(s.appendUint8Array)(o,t),this.remainderData=null);var l=this.getValidChunk(t);if(!l.length)return null;r&&(n=r);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(e);var f=i;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=Object(u.sliceUint8)(l,-16).buffer,f||null},e.webCryptoDecrypt=function(t,e,n){var a=this,o=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new i.default(o,e)),this.fastAesKey.expandKey().then((function(e){return o?new r.default(o,n).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return a.onWebCryptoError(r,t,e,n)}))},e.onWebCryptoError=function(t,e,n,r){return o.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r)},e.getValidChunk=function(t){var e=t,n=t.length-t.length%16;return n!==t.length&&(e=Object(u.sliceUint8)(t,0,n),this.remainderData=Object(u.sliceUint8)(t,n)),e},e.logOnce=function(t){this.logEnabled&&(o.logger.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},"./src/crypt/fast-aes-key.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}()},"./src/demux/aacdemuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/adts.ts"),a=n("./src/utils/logger.ts"),o=n("./src/demux/id3.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function r(e,n){var r;return(r=t.call(this)||this).observer=void 0,r.config=void 0,r.observer=e,r.config=n,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var u=r.prototype;return u.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(o.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(i.probe(t,e))return a.logger.log("ADTS sync word found !"),!0;return!1},u.canParse=function(t,e){return i.canParse(t,e)},u.appendFrame=function(t,e,n){i.initTrackConfig(t,this.observer,e,n,t.manifestCodec);var r=i.appendFrame(t,e,n,this.initPTS,this.frameIndex);if(r&&0===r.missing)return r},r}(r.default);u.minProbeByteLength=9,e.default=u},"./src/demux/adts.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"getAudioConfig",(function(){return o})),n.d(e,"isHeaderPattern",(function(){return s})),n.d(e,"getHeaderLength",(function(){return u})),n.d(e,"getFullFrameLength",(function(){return l})),n.d(e,"canGetFrameLength",(function(){return c})),n.d(e,"isHeader",(function(){return f})),n.d(e,"canParse",(function(){return d})),n.d(e,"probe",(function(){return h})),n.d(e,"initTrackConfig",(function(){return p})),n.d(e,"getFrameDuration",(function(){return g})),n.d(e,"parseFrameHeader",(function(){return v})),n.d(e,"appendFrame",(function(){return m}));var r=n("./src/utils/logger.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts");function o(t,e,n,o){var s,u,l,c,f=navigator.userAgent.toLowerCase(),d=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[n+2])>>>6);var p=(60&e[n+2])>>>2;if(!(p>h.length-1))return l=(1&e[n+2])<<2,l|=(192&e[n+3])>>>6,r.logger.log("manifest codec:"+o+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(f)?p>=6?(s=5,c=new Array(4),u=p-3):(s=2,c=new Array(2),u=p):-1!==f.indexOf("android")?(s=2,c=new Array(2),u=p):(s=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&p>=6?u=p-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(f))||!o&&1===l)&&(s=2,c=new Array(2)),u=p)),c[0]=s<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function s(t,e){return 255===t[e]&&240==(246&t[e+1])}function u(t,e){return 1&t[e+1]?7:9}function l(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function c(t,e){return e+5<t.length}function f(t,e){return e+1<t.length&&s(t,e)}function d(t,e){return c(t,e)&&s(t,e)&&l(t,e)<=t.length-e}function h(t,e){if(f(t,e)){var n=u(t,e);if(e+n>=t.length)return!1;var r=l(t,e);if(r<=n)return!1;var i=e+r;return i===t.length||f(t,i)}return!1}function p(t,e,n,i,a){if(!t.samplerate){var s=o(e,n,i,a);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+t.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function g(t){return 9216e4/t}function v(t,e,n,r,i){var a=u(t,e),o=l(t,e);if((o-=a)>0)return{headerLength:a,frameLength:o,stamp:n+r*i}}function m(t,e,n,r,i){var a=v(e,n,r,i,g(t.samplerate));if(a){var o,s=a.headerLength,u=a.stamp,l=s+a.frameLength,c=Math.max(0,n+l-e.length);c?(o=new Uint8Array(l-s)).set(e.subarray(n+s,e.length),0):o=e.subarray(n+s,n+l);var f={unit:o,pts:u};return c||t.samples.push(f),{sample:f,length:l,missing:c}}}},"./src/demux/base-audio-demuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"initPTSFn",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/demux/id3.ts"),a=n("./src/demux/dummy-demuxed-track.ts"),o=n("./src/utils/mp4-tools.ts"),s=n("./src/utils/typed-array.ts"),u=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,n){},e.demux=function(t,e){this.cachedData&&(t=Object(o.appendUint8Array)(this.cachedData,t),this.cachedData=null);var n,r,u=i.getID3Data(t,0),c=u?u.length:0,f=this._audioTrack,d=this._id3Track,h=u?i.getTimeStamp(u):void 0,p=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=l(h,e)),u&&u.length>0&&d.samples.push({pts:this.initPTS,dts:this.initPTS,data:u}),r=this.initPTS;c<p;){if(this.canParse(t,c)){var g=this.appendFrame(f,t,c);g?(this.frameIndex++,r=g.sample.pts,n=c+=g.length):c=p}else i.canParse(t,c)?(u=i.getID3Data(t,c),d.samples.push({pts:r,dts:r,data:u}),n=c+=u.length):c++;if(c===p&&n!==p){var v=Object(s.sliceUint8)(t,n);this.cachedData=this.cachedData?Object(o.appendUint8Array)(this.cachedData,v):v}}return{audioTrack:f,avcTrack:Object(a.dummyTrack)(),id3Track:d,textTrack:Object(a.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},e.destroy=function(){},t}(),l=function(t,e){return Object(r.isFiniteNumber)(t)?90*t:9e4*e};e.default=u},"./src/demux/chunk-cache.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks;return e.length?(t=1===e.length?e[0]:function(t,e){for(var n=new Uint8Array(e),r=0,i=0;i<t.length;i++){var a=t[i];n.set(a,r),r+=a.length}return n}(e,this.dataLength),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},"./src/demux/dummy-demuxed-track.ts":function(t,e,n){"use strict";function r(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}n.r(e),n.d(e,"dummyTrack",(function(){return r}))},"./src/demux/exp-golomb.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.ts");e.default=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,n=8,r=0;r<t;r++)0!==n&&(n=(e+this.readEG()+256)%256),e=0===n?e:n},e.readSPS=function(){var t,e,n,r=0,i=0,a=0,o=0,s=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),f=this.skipBits.bind(this),d=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(u(5),f(3),s(),h(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=l();if(3===v&&f(1),h(),h(),f(1),c())for(e=3!==v?8:12,n=0;n<e;n++)c()&&p(n<6?16:64)}h();var m=l();if(0===m)l();else if(1===m)for(f(1),d(),d(),t=l(),n=0;n<t;n++)d();h(),f(1);var y=l(),_=l(),b=u(1);0===b&&f(1),f(1),c()&&(r=l(),i=l(),a=l(),o=l());var E=[1,1];if(c()&&c())switch(s()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*r-2*i),height:(2-b)*(_+1)*16-(b?2:4)*(a+o),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}()},"./src/demux/id3.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isHeader",(function(){return i})),n.d(e,"isFooter",(function(){return a})),n.d(e,"getID3Data",(function(){return o})),n.d(e,"canParse",(function(){return u})),n.d(e,"getTimeStamp",(function(){return l})),n.d(e,"isTimeStampFrame",(function(){return c})),n.d(e,"getID3Frames",(function(){return d})),n.d(e,"decodeFrame",(function(){return h})),n.d(e,"utf8ArrayToStr",(function(){return y})),n.d(e,"testables",(function(){return _}));var r,i=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},a=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},o=function(t,e){for(var n=e,r=0;i(t,e);)r+=10,r+=s(t,e+6),a(t,e+10)&&(r+=10),e+=r;if(r>0)return t.subarray(n,n+r)},s=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,(n|=(127&t[e+2])<<7)|127&t[e+3]},u=function(t,e){return i(t,e)&&s(t,e+6)+10<=t.length-e},l=function(t){for(var e=d(t),n=0;n<e.length;n++){var r=e[n];if(c(r))return m(r)}},c=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},f=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=s(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}},d=function(t){for(var e=0,n=[];i(t,e);){for(var r=s(t,e+6),o=(e+=10)+r;e+8<o;){var u=f(t.subarray(e)),l=h(u);l&&n.push(l),e+=u.size+10}a(t,e)&&(e+=10)}return n},h=function(t){return"PRIV"===t.type?p(t):"W"===t.type[0]?v(t):g(t)},p=function(t){if(!(t.size<2)){var e=y(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}},g=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,n=y(t.data.subarray(e),!0),r=y(t.data.subarray(e+=n.length+1));return{key:t.type,info:n,data:r}}var i=y(t.data.subarray(1));return{key:t.type,data:i}}},v=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,n=y(t.data.subarray(e),!0),r=y(t.data.subarray(e+=n.length+1));return{key:t.type,info:n,data:r}}var i=y(t.data);return{key:t.type,data:i}},m=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,1&e[3]&&(n+=47721858.84),Math.round(n)}},y=function(t,e){void 0===e&&(e=!1);var n=b();if(n){var r=n.decode(t);if(e){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,o,s,u=t.length,l="",c=0;c<u;){if(0===(a=t[c++])&&e)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:o=t[c++],l+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=t[c++],s=t[c++],l+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return l},_={decodeTextFrame:g};function b(){return r||void 0===self.TextDecoder||(r=new self.TextDecoder("utf-8")),r}},"./src/demux/mp3demuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/id3.ts"),a=n("./src/utils/logger.ts"),o=n("./src/demux/mpegaudio.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var u=r.prototype;return u.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(i.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(o.probe(t,e))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},u.canParse=function(t,e){return o.canParse(t,e)},u.appendFrame=function(t,e,n){if(null!==this.initPTS)return o.appendFrame(t,e,n,this.initPTS,this.frameIndex)},r}(r.default);u.minProbeByteLength=4,e.default=u},"./src/demux/mp4demuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/mp4-tools.ts"),i=n("./src/demux/dummy-demuxed-track.ts"),a=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(r.findBox)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,n=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(e=Object(r.appendUint8Array)(this.remainderData,t));var a=Object(r.segmentValidRange)(e);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=e;return{audioTrack:Object(i.dummyTrack)(),avcTrack:n,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.flush=function(){var t=Object(i.dummyTrack)();return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:t,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();a.minProbeByteLength=1024,e.default=a},"./src/demux/mpegaudio.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"appendFrame",(function(){return u})),n.d(e,"parseHeader",(function(){return l})),n.d(e,"isHeaderPattern",(function(){return c})),n.d(e,"isHeader",(function(){return f})),n.d(e,"canParse",(function(){return d})),n.d(e,"probe",(function(){return h}));var r=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s=[0,1,1,4];function u(t,e,n,r,i){if(!(n+24>e.length)){var a=l(e,n);if(a&&n+a.frameLength<=e.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function l(t,e){var n=t[e+1]>>3&3,u=t[e+1]>>1&3,l=t[e+2]>>4&15,c=t[e+2]>>2&3;if(1!==n&&0!==l&&15!==l&&3!==c){var f=t[e+3]>>6,d=1e3*i[14*(3===n?3-u:3===u?3:4)+l-1],h=a[3*(3===n?0:2===n?1:2)+c],p=3===f?1:2,g=o[n][u],v=s[u],m=8*g*v,y=Math.floor(g*d/h+(t[e+2]>>1&1))*v;if(null===r){var _=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);r=_?parseInt(_[1]):0}return!!r&&r<=87&&2===u&&d>=224e3&&0===f&&(t[e+3]=128|t[e+3]),{sampleRate:h,channelCount:p,frameLength:y,samplesPerFrame:m}}}function c(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function f(t,e){return e+1<t.length&&c(t,e)}function d(t,e){return c(t,e)&&4<=t.length-e}function h(t,e){if(e+1<t.length&&c(t,e)){var n=l(t,e),r=4;null!=n&&n.frameLength&&(r=n.frameLength);var i=e+r;return i===t.length||f(t,i)}return!1}},"./src/demux/sample-aes.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/crypt/decrypter.ts"),i=n("./src/demux/tsdemuxer.ts");e.default=function(){function t(t,e,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){var o=new Uint8Array(a);i.set(o,16),r||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){for(var n=new Uint8Array(e),r=0,i=32;i<t.length-16;i+=160,r+=16)t.set(n.subarray(r,r+16),i);return t},e.decryptAvcSample=function(t,e,n,r,a,o){var s=Object(i.discardEPB)(a.data),u=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(u.buffer,(function(i){a.data=l.getAvcDecryptedUnit(s,i),o||l.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,o),!o)return}}}},t}()},"./src/demux/transmuxer-interface.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.ts"),a=n("./src/demux/transmuxer.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./node_modules/eventemitter3/index.js"),c=Object(u.getMediaSource)()||{isTypeSupported:function(){return!1}},f=function(){function t(t,e,n,u){var f=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=n,this.onFlush=u;var d=t.config,h=function(e,n){(n=n||{}).frag=f.frag,n.id=f.id,t.trigger(e,n)};this.observer=new l.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,h),this.observer.on(i.Events.ERROR,h);var p={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(d.enableWorker&&"undefined"!=typeof Worker){var v;o.logger.log("demuxing in webworker");try{v=this.worker=r("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){t.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},v.postMessage({cmd:"init",typeSupported:p,vendor:g,id:e,config:JSON.stringify(d)})}catch(m){o.logger.warn("Error in worker:",m),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new a.default(this.observer,p,d,g,e),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,d,g,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},e.push=function(t,e,n,r,i,s,u,l,c,f){var d,h,p=this;c.transmuxing.start=self.performance.now();var g=this.transmuxer,v=this.worker,m=s?s.start:i.start,y=i.decryptdata,_=this.frag,b=!(_&&i.cc===_.cc),E=!(_&&c.level===_.level),T=_?c.sn-_.sn:-1,S=this.part?c.part-this.part.index:1,w=!E&&(1===T||0===T&&1===S),A=self.performance.now();(E||T||0===i.stats.parsing.start)&&(i.stats.parsing.start=A),!s||!S&&w||(s.stats.parsing.start=A);var x=!(_&&(null===(d=i.initSegment)||void 0===d?void 0:d.url)===(null===(h=_.initSegment)||void 0===h?void 0:h.url)),C=new a.TransmuxState(b,w,l,E,m,x);if(!w||b||x){o.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+E+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+m+"\n        initSegmentChange: "+x);var D=new a.TransmuxConfig(n,r,e,u,f);this.configureTransmuxer(D)}if(this.frag=i,this.part=s,v)v.postMessage({cmd:"demux",data:t,decryptdata:y,chunkMeta:c,state:C},t instanceof ArrayBuffer?[t]:[]);else if(g){var I=g.push(t,y,c,C);Object(a.isPromise)(I)?I.then((function(t){p.handleTransmuxComplete(t)})):this.handleTransmuxComplete(I)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:t});else if(n){var i=n.flush(t);Object(a.isPromise)(i)?i.then((function(n){e.handleFlushResult(n,t)})):this.handleFlushResult(i,t)}},e.handleFlushResult=function(t,e){var n=this;t.forEach((function(t){n.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,n=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):n&&n.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}()},"./src/demux/transmuxer-worker.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var r=n("./src/demux/transmuxer.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=n("./node_modules/eventemitter3/index.js");function s(t){var e=new o.EventEmitter,n=function(e,n){t.postMessage({event:e,data:n})};e.on(i.Events.FRAG_DECRYPTED,n),e.on(i.Events.ERROR,n),t.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.transmuxer=new r.default(e,o.typeSupported,s,o.vendor,o.id),Object(a.enableLogs)(s.debug),n("init",null);break;case"configure":t.transmuxer.configure(o.config);break;case"demux":var l=t.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(r.isPromise)(l)?l.then((function(e){u(t,e)})):u(t,l);break;case"flush":var f=o.chunkMeta,d=t.transmuxer.flush(f);Object(r.isPromise)(d)?d.then((function(e){c(t,e,f)})):c(t,d,f)}}))}function u(t,e){if((n=e.remuxResult).audio||n.video||n.text||n.id3||n.initSegment){var n,r=[],i=e.remuxResult,a=i.audio,o=i.video;a&&l(r,a),o&&l(r,o),t.postMessage({event:"transmuxComplete",data:e},r)}}function l(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function c(t,e,n){e.forEach((function(e){u(t,e)})),t.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y})),n.d(e,"isPromise",(function(){return b})),n.d(e,"TransmuxConfig",(function(){return E})),n.d(e,"TransmuxState",(function(){return T}));var r,i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/crypt/decrypter.ts"),s=n("./src/demux/aacdemuxer.ts"),u=n("./src/demux/mp4demuxer.ts"),l=n("./src/demux/tsdemuxer.ts"),c=n("./src/demux/mp3demuxer.ts"),f=n("./src/remux/mp4-remuxer.ts"),d=n("./src/remux/passthrough-remuxer.ts"),h=n("./src/demux/chunk-cache.ts"),p=n("./src/utils/mp4-tools.ts"),g=n("./src/utils/logger.ts");try{r=self.performance.now.bind(self.performance)}catch(S){g.logger.debug("Unable to use Performance API on this environment"),r=self.Date.now}var v=[{demux:l.default,remux:f.default},{demux:u.default,remux:d.default},{demux:s.default,remux:f.default},{demux:c.default,remux:f.default}],m=1024;v.forEach((function(t){m=Math.max(m,t.demux.minProbeByteLength)}));var y=function(){function t(t,e,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new h.default,this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r,this.id=i}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,n,i){var a=this,o=n.transmuxing;o.executeStart=r();var s=new Uint8Array(t),u=this.cache,l=this.config,c=this.currentTransmuxState,f=this.transmuxConfig;i&&(this.currentTransmuxState=i);var d=function(t,e){var n=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(n=e),n}(s,e);if(d&&"AES-128"===d.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(s,d.key.buffer,d.iv.buffer).then((function(t){var e=a.push(t,null,n);return a.decryptionPromise=null,e})),this.decryptionPromise;var g=h.softwareDecrypt(s,d.key.buffer,d.iv.buffer);if(!g)return o.executeEnd=r(),_(n);s=new Uint8Array(g)}var v=i||c,m=v.contiguous,y=v.discontinuity,b=v.trackSwitch,E=v.accurateTimeOffset,T=v.timeOffset,S=v.initSegmentChange,w=f.defaultInitPts;if((y||b||S)&&this.resetInitSegment(f.initSegmentData,f.audioCodec,f.videoCodec,f.duration),(y||S)&&this.resetInitialTimestamp(w),m||this.resetContiguity(),this.needsProbing(s,y,b)){if(u.dataLength){var A=u.flush();s=Object(p.appendUint8Array)(A,s)}this.configureTransmuxer(s,f)}var x=this.transmux(s,d,T,E,n),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,o.executeEnd=r(),x},e.flush=function(t){var e=this,n=t.transmuxing;n.executeStart=r();var o=this.decrypter,s=this.cache,u=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var c=[],f=u.timeOffset;if(o){var d=o.flush();d&&c.push(this.push(d,null,t))}var h=s.dataLength;s.reset();var p=this.demuxer;if(!p||!this.remuxer)return h>=m&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=r(),[_(t)];var g=p.flush(f);return b(g)?g.then((function(n){return e.flushRemux(c,n,t),c})):(this.flushRemux(c,g,t),c)},e.flushRemux=function(t,e,n){var i=e.audioTrack,a=e.avcTrack,o=e.id3Track,s=e.textTrack,u=this.currentTransmuxState,l=u.accurateTimeOffset,c=u.timeOffset;g.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var f=this.remuxer.remux(i,a,o,s,c,l,!0,this.id);t.push({remuxResult:f,chunkMeta:n}),n.transmuxing.executeEnd=r()},e.resetInitialTimestamp=function(t){var e=this.demuxer,n=this.remuxer;e&&n&&(e.resetTimeStamp(t),n.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(e,n,r),a.resetInitSegment(t,e,n))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,n,r,i){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,n,r,i):this.transmuxUnencrypted(t,n,r,i)},e.transmuxUnencrypted=function(t,e,n,r){var i=this.demuxer.demux(t,e,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i.audioTrack,i.avcTrack,i.id3Track,i.textTrack,e,n,!1,this.id),chunkMeta:r}},e.transmuxSampleAes=function(t,e,n,r,i){var a=this;return this.demuxer.demuxSampleAes(t,e,n).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,n,r,!1,a.id),chunkMeta:i}}))},e.configureTransmuxer=function(t,e){for(var n,r=this.config,i=this.observer,a=this.typeSupported,o=this.vendor,s=e.audioCodec,l=e.defaultInitPts,c=e.duration,f=e.initSegmentData,h=e.videoCodec,p=0,m=v.length;p<m;p++)if(v[p].demux.probe(t)){n=v[p];break}n||(g.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:u.default,remux:d.default});var y=this.demuxer,_=this.remuxer,b=n.remux,E=n.demux;_&&_ instanceof b||(this.remuxer=new b(i,r,a,o)),y&&y instanceof E||(this.demuxer=new E(i,r,a),this.probe=E.probe),this.resetInitSegment(f,s,h,c),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,n){return!this.demuxer||!this.remuxer||e||n},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new o.default(this.observer,this.config)),t},t}(),_=function(t){return{remuxResult:{},chunkMeta:t}};function b(t){return"then"in t&&t.then instanceof Function}var E=function(t,e,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},T=function(t,e,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"discardEPB",(function(){return b}));var r=n("./src/demux/adts.ts"),i=n("./src/demux/mpegaudio.ts"),a=n("./src/demux/exp-golomb.ts"),o=n("./src/demux/id3.ts"),s=n("./src/demux/sample-aes.ts"),u=n("./src/events.ts"),l=n("./src/utils/mp4-tools.ts"),c=n("./src/utils/logger.ts"),f=n("./src/errors.ts"),d={video:1,audio:2,id3:3,text:4},h=function(){function t(t,e,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=n}t.probe=function(e){var n=t.syncOffset(e);return!(n<0||(n&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:d[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=r},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,n=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,n,r,i){var a;void 0===r&&(r=!1),void 0===i&&(i=!1),r||(this.sampleAes=null);var o=this._avcTrack,s=this._audioTrack,d=this._id3Track,h=o.pid,p=o.pesData,y=s.pid,_=d.pid,b=s.pesData,E=d.pesData,T=!1,S=this.pmtParsed,w=this._pmtId,A=e.length;if(this.remainderData&&(A=(e=Object(l.appendUint8Array)(this.remainderData,e)).length,this.remainderData=null),A<188&&!i)return this.remainderData=e,{audioTrack:s,avcTrack:o,id3Track:d,textTrack:this._txtTrack};var x=Math.max(0,t.syncOffset(e));(A-=(A+x)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));for(var C=0,D=x;D<A;D+=188)if(71===e[D]){var I=!!(64&e[D+1]),R=((31&e[D+1])<<8)+e[D+2],k=void 0;if((48&e[D+3])>>4>1){if((k=D+5+e[D+4])===D+188)continue}else k=D+4;switch(R){case h:I&&(p&&(a=m(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(e.subarray(k,D+188)),p.size+=D+188-k);break;case y:I&&(b&&(a=m(b))&&(s.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),b={data:[],size:0}),b&&(b.data.push(e.subarray(k,D+188)),b.size+=D+188-k);break;case _:I&&(E&&(a=m(E))&&this.parseID3PES(a),E={data:[],size:0}),E&&(E.data.push(e.subarray(k,D+188)),E.size+=D+188-k);break;case 0:I&&(k+=e[k]+1),w=this._pmtId=g(e,k);break;case w:I&&(k+=e[k]+1);var O=v(e,k,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);(h=O.avc)>0&&(o.pid=h),(y=O.audio)>0&&(s.pid=y,s.isAAC=O.isAAC),(_=O.id3)>0&&(d.pid=_),T&&!S&&(c.logger.log("reparse from beginning"),T=!1,D=x-188),S=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0}}else C++;C>0&&this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+C+" TS packet/s that do not start with 0x47"}),o.pesData=p,s.pesData=b,d.pesData=E;var P={audioTrack:s,avcTrack:o,id3Track:d,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(P),P},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,n=t.audioTrack,r=t.avcTrack,i=t.id3Track,a=r.pesData,o=n.pesData,s=i.pesData;a&&(e=m(a))?(this.parseAVCPES(e,!0),r.pesData=null):r.pesData=a,o&&(e=m(o))?(n.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),n.pesData=null):(null!=o&&o.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o),s&&(e=m(s))?(this.parseID3PES(e),i.pesData=null):i.pesData=s},e.demuxSampleAes=function(t,e,n){var r=this.demux(t,n,!0,!this.config.progressive),i=this.sampleAes=new s.default(this.observer,this.config,e);return this.decrypt(r,i)},e.decrypt=function(t,e){return new Promise((function(n){var r=t.audioTrack,i=t.avcTrack;r.samples&&r.isAAC?e.decryptAacSamples(r.samples,0,(function(){i.samples?e.decryptAvcSamples(i.samples,0,0,(function(){n(t)})):n(t)})):i.samples&&e.decryptAvcSamples(i.samples,0,0,(function(){n(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var n,r=this,i=this._avcTrack,s=this.parseAVCNALu(t.data),u=this.avcSample,l=!1;t.data=null,u&&s.length&&!i.audFound&&(y(u,i),u=this.avcSample=p(!1,t.pts,t.dts,"")),s.forEach((function(e){switch(e.type){case 1:n=!0,u||(u=r.avcSample=p(!0,t.pts,t.dts,"")),u.frame=!0;var s=e.data;if(l&&s.length>4){var c=new a.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u.key=!0)}break;case 5:n=!0,u||(u=r.avcSample=p(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0;var f=new a.default(b(e.data));f.readUByte();for(var d=0,h=0,g=!1,v=0;!g&&f.bytesAvailable>1;){d=0;do{d+=v=f.readUByte()}while(255===v);h=0;do{h+=v=f.readUByte()}while(255===v);if(4===d&&0!==f.bytesAvailable){if(g=!0,181===f.readUByte()&&49===f.readUShort()&&1195456820===f.readUInt()&&3===f.readUByte()){for(var m=f.readUByte(),E=31&m,T=[m,f.readUByte()],S=0;S<E;S++)T.push(f.readUByte()),T.push(f.readUByte()),T.push(f.readUByte());_(r._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}else if(5===d&&0!==f.bytesAvailable){if(g=!0,h>16){for(var w=[],A=0;A<16;A++)w.push(f.readUByte().toString(16)),3!==A&&5!==A&&7!==A&&9!==A||w.push("-");for(var x=h-16,C=new Uint8Array(x),D=0;D<x;D++)C[D]=f.readUByte();_(r._txtTrack.samples,{pts:t.pts,payloadType:d,uuid:w.join(""),userData:Object(o.utf8ArrayToStr)(C),userDataBytes:C})}}else if(h<f.bytesAvailable)for(var I=0;I<h;I++)f.readUByte()}break;case 7:if(n=!0,l=!0,!i.sps){var R=new a.default(e.data).readSPS();i.width=R.width,i.height=R.height,i.pixelRatio=R.pixelRatio,i.sps=[e.data],i.duration=r._duration;for(var k=e.data.subarray(1,4),O="avc1.",P=0;P<3;P++){var M=k[P].toString(16);M.length<2&&(M="0"+M),O+=M}i.codec=O}break;case 8:n=!0,i.pps||(i.pps=[e.data]);break;case 9:n=!1,i.audFound=!0,u&&y(u,i),u=r.avcSample=p(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}u&&n&&u.units.push(e)})),e&&u&&(y(u,i),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,n=this.avcSample;if(!n||0===n.units.length){var r=this._avcTrack.samples;n=r[r.length-1]}if(null!==(t=n)&&void 0!==t&&t.units){var i=n.units;e=i[i.length-1]}return e},e.parseAVCNALu=function(t){var e,n,r=t.byteLength,i=this._avcTrack,a=i.naluState||0,o=a,s=[],u=0,l=-1,c=0;for(-1===a&&(l=0,c=31&t[0],a=0,u=1);u<r;)if(e=t[u++],a)if(1!==a)if(e)if(1===e){if(l>=0){var f={data:t.subarray(l,u-a-1),type:c};s.push(f)}else{var d=this.getLastNalUnit();if(d&&(o&&u<=4-o&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-o)),(n=u-a-1)>0)){var h=new Uint8Array(d.data.byteLength+n);h.set(d.data,0),h.set(t.subarray(0,n),d.data.byteLength),d.data=h,d.state=0}}u<r?(l=u,c=31&t[u],a=0):a=-1}else a=0;else a=3;else a=e?0:2;else a=e?0:1;if(l>=0&&a>=0){var p={data:t.subarray(l,r),type:c,state:a};s.push(p)}if(0===s.length){var g=this.getLastNalUnit();if(g){var v=new Uint8Array(g.data.byteLength+t.byteLength);v.set(g.data,0),v.set(t,g.data.byteLength),g.data=v}}return i.naluState=a,s},e.parseAACPES=function(t){var e,n,i,a,o,s=0,l=this._audioTrack,d=this.aacOverFlow,h=t.data;if(d){this.aacOverFlow=null;var p=d.sample.unit.byteLength,g=Math.min(d.missing,p),v=p-g;d.sample.unit.set(h.subarray(0,g),v),l.samples.push(d.sample),s=d.missing}for(e=s,n=h.length;e<n-1&&!r.isHeader(h,e);e++);if(e===s||(e<n-1?(i="AAC PES did not start with ADTS header,offset:"+e,a=!1):(i="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+i),this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:i}),!a)){if(r.initTrackConfig(l,this.observer,h,e,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!d)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var m=r.getFrameDuration(l.samplerate);o=d.sample.pts+m}for(var y=0;e<n;){if(r.isHeader(h,e)){if(e+5<n){var _=r.appendFrame(l,h,e,o,y);if(_){if(!_.missing){e+=_.length,y++;continue}this.aacOverFlow=_}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,n=e.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<n;)if(i.isHeader(e,a)){var s=i.appendFrame(this._audioTrack,e,a,o,r);if(!s)break;a+=s.length,r++}else a++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function p(t,e,n,r){return{key:t,frame:!1,pts:e,dts:n,units:[],debug:r,length:0}}function g(t,e){return(31&t[e+10])<<8|t[e+11]}function v(t,e,n,r){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var o=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!r){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=o);break;case 21:-1===i.id3&&(i.id3=o);break;case 219:if(!r){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=o);break;case 3:case 4:n?-1===i.audio&&(i.audio=o,i.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return i}function m(t){var e,n,r,i,a,o=0,s=t.data;if(!t||0===t.size)return null;for(;s[0].length<19&&s.length>1;){var u=new Uint8Array(s[0].length+s[1].length);u.set(s[0]),u.set(s[1],s[0].length),s[0]=u,s.splice(1,1)}if(1===((e=s[0])[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;var l=e[7];192&l&&(i=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?i-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(c.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var f=(r=e[8])+9;if(t.size<=f)return null;t.size-=f;for(var d=new Uint8Array(t.size),h=0,p=s.length;h<p;h++){var g=(e=s[h]).byteLength;if(f){if(f>g){f-=g;continue}e=e.subarray(f),g-=f,f=0}d.set(e,o),o+=g}return n&&(n-=r+3),{data:d,pts:i,dts:a,len:n}}return null}function y(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var n=e.samples,r=n.length;if(!r)return void e.dropped++;var i=n[r-1];t.pts=i.pts,t.dts=i.dts}e.samples.push(t)}t.debug.length&&c.logger.log(t.pts+"/"+t.dts+":"+t.debug)}function _(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)}function b(t){for(var e=t.byteLength,n=[],r=1;r<e-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;var i=e-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=t[o];return a}h.minProbeByteLength=188,e.default=h},"./src/errors.ts":function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return i})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(r||(r={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":function(t,e,n){"use strict";var r;n.r(e),n.d(e,"Events",(function(){return r})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(r||(r={}))},"./src/hls.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/playlist-loader.ts"),a=n("./src/loader/key-loader.ts"),o=n("./src/controller/id3-track-controller.ts"),s=n("./src/controller/latency-controller.ts"),u=n("./src/controller/level-controller.ts"),l=n("./src/controller/fragment-tracker.ts"),c=n("./src/controller/stream-controller.ts"),f=n("./src/is-supported.ts"),d=n("./src/utils/logger.ts"),h=n("./src/config.ts"),p=n("./node_modules/eventemitter3/index.js"),g=n("./src/events.ts"),v=n("./src/errors.ts");function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=Object(h.mergeConfig)(t.DefaultConfig,e);this.userConfig=e,Object(d.enableLogs)(n.debug),this._autoLevelCapping=-1,n.progressive&&Object(h.enableStreamingMode)(n);var r=n.bufferController,f=n.capLevelController,g=n.fpsController,v=this.abrController=new(0,n.abrController)(this),m=this.bufferController=new r(this),y=this.capLevelController=new f(this),_=new g(this),b=new i.default(this),E=new a.default(this),T=new o.default(this),S=this.levelController=new u.default(this),w=new l.FragmentTracker(this),A=this.streamController=new c.default(this,w);y.setStreamController(A),_.setStreamController(A);var x=[S,A];this.networkControllers=x;var C=[b,E,v,m,y,_,T,w];this.audioTrackController=this.createController(n.audioTrackController,null,x),this.createController(n.audioStreamController,w,x),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,x),this.createController(n.subtitleStreamController,w,x),this.createController(n.timelineController,null,C),this.emeController=this.createController(n.emeController,null,C),this.cmcdController=this.createController(n.cmcdController,null,C),this.latencyController=this.createController(s.default,null,C),this.coreComponents=C}t.isSupported=function(){return Object(f.isSupported)()};var e,n,y,_=t.prototype;return _.createController=function(t,e,n){if(t){var r=e?new t(this,e):new t(this);return n&&n.push(r),r}return null},_.on=function(t,e,n){void 0===n&&(n=this),this._emitter.on(t,e,n)},_.once=function(t,e,n){void 0===n&&(n=this),this._emitter.once(t,e,n)},_.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},_.off=function(t,e,n,r){void 0===n&&(n=this),this._emitter.off(t,e,n,r)},_.listeners=function(t){return this._emitter.listeners(t)},_.emit=function(t,e,n){return this._emitter.emit(t,e,n)},_.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(n){d.logger.error("An internal error happened while handling event "+t+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.trigger(g.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,error:n})}return!1},_.listenerCount=function(t){return this._emitter.listenerCount(t)},_.destroy=function(){d.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},_.attachMedia=function(t){d.logger.log("attachMedia"),this._media=t,this.trigger(g.Events.MEDIA_ATTACHING,{media:t})},_.detachMedia=function(){d.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},_.loadSource=function(t){this.stopLoad();var e=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});d.logger.log("loadSource:"+i),e&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(g.Events.MANIFEST_LOADING,{url:t})},_.startLoad=function(t){void 0===t&&(t=-1),d.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},_.stopLoad=function(){d.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},_.swapAudioCodec=function(){d.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},_.recoverMediaError=function(){d.logger.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},_.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,y=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:h.hlsDefaultConfig},set:function(e){t.defaultConfig=e}}],(n=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){d.logger.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){d.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){d.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){d.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){d.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(d.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var n=t.length,r=0;r<n;r++)if(t[r].maxBitrate>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&m(e.prototype,n),y&&m(e,y),t}();y.defaultConfig=void 0},"./src/is-supported.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isSupported",(function(){return a})),n.d(e,"changeTypeSupported",(function(){return o}));var r=n("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var t=Object(r.getMediaSource)();if(!t)return!1;var e=i();return!(!t||"function"!=typeof t.isTypeSupported||!t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||e&&(!e.prototype||"function"!=typeof e.prototype.appendBuffer||"function"!=typeof e.prototype.remove))}function o(){var t,e=i();return"function"==typeof(null==e||null===(t=e.prototype)||void 0===t?void 0:t.changeType)}},"./src/loader/fragment-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f})),n.d(e,"LoadError",(function(){return h}));var r=n("./src/polyfills/number.ts"),i=n("./src/errors.ts");function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return o(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function o(t,e,n){return(o=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=Math.pow(2,17),f=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var n=this,r=t.url;if(!r)return Promise.reject(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(r,u){n.loader&&n.loader.destroy();var l=n.loader=t.loader=o?new o(a):new s(a),f=d(t),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=l.stats,l.load(f,p,{onSuccess:function(e,i,a,o){n.resetLoader(t,l),r({frag:t,part:null,payload:e.data,networkDetails:o})},onError:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:a}))},onAbort:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:a}))},onTimeout:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:a}))},onProgress:function(n,r,i,a){e&&e({frag:t,part:null,payload:i,networkDetails:a})}})}))},e.loadPart=function(t,e,n){var r=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(u,l){r.loader&&r.loader.destroy();var f=r.loader=t.loader=o?new o(a):new s(a),p=d(t,e),g={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};e.stats=f.stats,f.load(p,g,{onSuccess:function(i,a,o,s){r.resetLoader(t,f),r.updateStatsFromPart(t,e);var l={frag:t,part:e,payload:i.data,networkDetails:s};n(l),u(l)},onError:function(n,a,o){r.resetLoader(t,f),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:n,networkDetails:o}))},onAbort:function(n,a,o){t.stats.aborted=e.stats.aborted,r.resetLoader(t,f),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:o}))},onTimeout:function(n,a,o){r.resetLoader(t,f),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:o}))}})}))},e.updateStatsFromPart=function(t,e){var n=t.stats,r=e.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(t.duration/e.duration),o=Math.min(Math.round(n.loaded/i),a),s=(a-o)*Math.round(n.loaded/o);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);var u=n.loading,l=r.loading;u.start?u.first+=l.first-l.start:(u.start=l.start,u.first=l.first),u.end=l.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function d(t,e){void 0===e&&(e=null);var n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,o=n.byteRangeEndOffset;return Object(r.isFiniteNumber)(a)&&Object(r.isFiniteNumber)(o)&&(i.rangeStart=a,i.rangeEnd=o),i}var h=function(t){var e,n;function r(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).data=void 0,n.data=e,n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n),r}(a(Error))},"./src/loader/fragment.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"ElementaryStreamTypes",(function(){return r})),n.d(e,"BaseSegment",(function(){return d})),n.d(e,"Fragment",(function(){return h})),n.d(e,"Part",(function(){return p}));var r,i=n("./src/polyfills/number.ts"),a=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/utils/logger.ts"),s=n("./src/loader/level-key.ts"),u=n("./src/loader/load-stats.ts");function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(r||(r={}));var d=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var n=t.split("@",2),r=[];r[0]=1===n.length?e?e.byteRangeEndOffset:0:parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},f(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),h=function(t){function e(e,n){var r;return(r=t.call(this,n)||this)._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new u.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=e,r}l(e,t);var n=e.prototype;return n.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},n.setDecryptDataFromLevelKey=function(t,e){var n=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=s.LevelKey.fromURI(t.uri)).method=t.method,n.iv=this.createInitializationVector(e),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(t,e,n,r,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[t];s?(s.startPTS=Math.min(s.startPTS,e),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):o[t]={startPTS:e,endPTS:n,startDTS:r,endDTS:i,partial:a}},n.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null},f(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(i.isFiniteNumber)(this.programDateTime))return null;var t=Object(i.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(d),p=function(t){function e(e,n,r,i,a){var o;(o=t.call(this,r)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new u.LoadStats,o.duration=e.decimalFloatingPoint("DURATION"),o.gap=e.bool("GAP"),o.independent=e.bool("INDEPENDENT"),o.relurl=e.enumeratedString("URI"),o.fragment=n,o.index=i;var s=e.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return l(e,t),f(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(d)},"./src/loader/key-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),o=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var n=e.frag,i=n.type,o=this.loaders[i];if(n.decryptdata){var s=n.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;if(o&&(a.logger.warn("abort previous key loader for type:"+i),o.abort()),!s)return void a.logger.warn("key uri is falsy");var l=n.loader=this.loaders[i]=new(0,u.loader)(u);this.decrypturl=s,this.decryptkey=null;var c={url:s,frag:n,responseType:"arraybuffer"},f={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(c,f,d)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},e.loadtimeout=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}()},"./src/loader/level-details.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LevelDetails",(function(){return i}));var r=n("./src/polyfills/number.ts"),i=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,n=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!n||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&n>0,this.misses=this.updated||this.advanced?Math.floor(.6*t.misses):t.misses+1,this.availabilityDelay=t.availabilityDelay},(e=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(r.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/loader/level-key.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LevelKey",(function(){return i}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(r.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e;return t.fromURL=function(e,n){return new t(e,n)},t.fromURI=function(e){return new t(e)},(e=[{key:"uri",get:function(){return this._uri}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/loader/load-stats.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LoadStats",(function(){return r}));var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var r=n("./src/polyfills/number.ts"),i=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/loader/fragment.ts"),o=n("./src/loader/level-details.ts"),s=n("./src/loader/level-key.ts"),u=n("./src/utils/attr-list.ts"),l=n("./src/utils/logger.ts"),c=n("./src/utils/codecs.ts"),f=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,d=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),g=/\.(mp4|m4s|m4v|m4a)$/i,v=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var n=e.shift()+".";return(n+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[],a={},o=!1;for(f.lastIndex=0;null!=(r=f.exec(e));)if(r[1]){var s=new u.AttrList(r[1]),l={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:t.resolve(r[2],n)},c=s.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),m((s.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(r[3]){var d=new u.AttrList(r[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:o?a:null}},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(d.lastIndex=0;null!==(a=d.exec(e));){var l=new u.AttrList(a[1]);if(l.TYPE===r){var c={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:r,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,n):""};if(i.length){var f=t.findGroup(i,c.groupId)||i[0];y(c,f,"audioCodec"),y(c,f,"textCodec")}o.push(c)}}return o},t.parseLevelPlaylist=function(t,e,n,c,f){var d,v,m,y=new o.LevelDetails(e),b=y.fragments,E=null,T=0,S=0,w=0,A=0,x=null,C=new a.Fragment(c,e),D=-1,I=!1;for(h.lastIndex=0,y.m3u8=t;null!==(d=h.exec(t));){I&&(I=!1,(C=new a.Fragment(c,e)).start=w,C.sn=T,C.cc=A,C.level=n,E&&(C.initSegment=E,C.rawProgramDateTime=E.rawProgramDateTime));var R=d[1];if(R){C.duration=parseFloat(R);var k=(" "+d[2]).slice(1);C.title=k||null,C.tagList.push(k?["INF",R,k]:["INF",R])}else if(d[3])Object(r.isFiniteNumber)(C.duration)&&(C.start=w,m&&(C.levelkey=m),C.sn=T,C.level=n,C.cc=A,C.urlId=f,b.push(C),C.relurl=(" "+d[3]).slice(1),_(C,x),x=C,w+=C.duration,T++,S=0,I=!0);else if(d[4]){var O=(" "+d[4]).slice(1);x?C.setByteRange(O,x):C.setByteRange(O)}else if(d[5])C.rawProgramDateTime=(" "+d[5]).slice(1),C.tagList.push(["PROGRAM-DATE-TIME",C.rawProgramDateTime]),-1===D&&(D=b.length);else{if(!(d=d[0].match(p))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(v=1;v<d.length&&void 0===d[v];v++);var P=(" "+d[v]).slice(1),M=(" "+d[v+1]).slice(1),L=d[v+2]?(" "+d[v+2]).slice(1):"";switch(P){case"PLAYLIST-TYPE":y.type=M.toUpperCase();break;case"MEDIA-SEQUENCE":T=y.startSN=parseInt(M);break;case"SKIP":var N=new u.AttrList(M),F=N.decimalInteger("SKIPPED-SEGMENTS");if(Object(r.isFiniteNumber)(F)){y.skippedSegments=F;for(var j=F;j--;)b.unshift(null);T+=F}var B=N.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(y.recentlyRemovedDateranges=B.split("\t"));break;case"TARGETDURATION":y.targetduration=parseFloat(M);break;case"VERSION":y.version=parseInt(M);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"#":(M||L)&&C.tagList.push(L?[M,L]:[M]);break;case"DIS":A++;case"GAP":C.tagList.push([P]);break;case"BITRATE":C.tagList.push([P,M]);break;case"DISCONTINUITY-SEQ":A=parseInt(M);break;case"KEY":var U,V=new u.AttrList(M),G=V.enumeratedString("METHOD"),H=V.URI,Y=V.hexadecimalInteger("IV"),z=V.enumeratedString("KEYFORMATVERSIONS"),q=V.enumeratedString("KEYID"),X=null!=(U=V.enumeratedString("KEYFORMAT"))?U:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(X)>-1){l.logger.warn("Keyformat "+X+" is not supported from the manifest");continue}if("identity"!==X)continue;G&&(m=s.LevelKey.fromURL(e,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(m.method=G,m.keyFormat=X,q&&(m.keyID=q),z&&(m.keyFormatVersions=z),m.iv=Y));break;case"START":var K=new u.AttrList(M).decimalFloatingPoint("TIME-OFFSET");Object(r.isFiniteNumber)(K)&&(y.startTimeOffset=K);break;case"MAP":var W=new u.AttrList(M);C.relurl=W.URI,W.BYTERANGE&&C.setByteRange(W.BYTERANGE),C.level=n,C.sn="initSegment",m&&(C.levelkey=m),C.initSegment=null,E=C,I=!0;break;case"SERVER-CONTROL":var Q=new u.AttrList(M);y.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),y.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),y.canSkipDateRanges=y.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),y.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),y.holdBack=Q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new u.AttrList(M);y.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var Z=y.partList;Z||(Z=y.partList=[]);var J=S>0?Z[Z.length-1]:void 0,tt=S++,et=new a.Part(new u.AttrList(M),C,e,tt,J);Z.push(et),C.duration+=et.duration;break;case"PRELOAD-HINT":var nt=new u.AttrList(M);y.preloadHint=nt;break;case"RENDITION-REPORT":var rt=new u.AttrList(M);y.renditionReports=y.renditionReports||[],y.renditionReports.push(rt);break;default:l.logger.warn("line parsed but not handled: "+d)}}}x&&!x.relurl?(b.pop(),w-=x.duration,y.partList&&(y.fragmentHint=x)):y.partList&&(_(C,x),C.cc=A,y.fragmentHint=C);var it=b.length,at=b[0],ot=b[it-1];if((w+=y.skippedSegments*y.targetduration)>0&&it&&ot){y.averagetargetduration=w/it;var st=ot.sn;y.endSN="initSegment"!==st?st:0,at&&(y.startCC=at.cc,at.initSegment||y.fragments.every((function(t){return t.relurl&&g.test(null!=(e=null===(n=i.parseURL(t.relurl))||void 0===n?void 0:n.path)?e:"");var e,n}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(C=new a.Fragment(c,e)).relurl=ot.relurl,C.level=n,C.sn="initSegment",at.initSegment=C,y.needSidxRanges=!0))}else y.endSN=0,y.startCC=0;return y.fragmentHint&&(w+=y.fragmentHint.duration),y.totalduration=w,y.endCC=A,D>0&&function(t,e){for(var n=t[e],r=e;r--;){var i=t[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(b,D),y},t}();function m(t,e){["video","audio","text"].forEach((function(n){var r=t.filter((function(t){return Object(c.isCodecType)(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}function y(t,e,n){var r=e[n];r&&(t[n]=r)}function _(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(r.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/utils/logger.ts"),s=n("./src/utils/mp4-tools.ts"),u=n("./src/loader/m3u8-parser.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/attr-list.ts");function f(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n}e.default=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,n=new(e.pLoader||e.loader)(e);return t.loader=n,this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:e.url,deliveryDirectives:null})},e.onLevelLoading=function(t,e){this.load({id:e.id,groupId:null,level:e.level,responseType:"text",type:l.PlaylistContextType.LEVEL,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.onAudioTrackLoading=function(t,e){this.load({id:e.id,groupId:e.groupId,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.onSubtitleTrackLoading=function(t,e){this.load({id:e.id,groupId:e.groupId,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.load=function(t){var e,n,r,i,a,s,u=this.hls.config,c=this.getInternalLoader(t);if(c){var f=c.context;if(f&&f.url===t.url)return void o.logger.trace("[playlist-loader]: playlist request ongoing");o.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),c.abort()}switch(t.type){case l.PlaylistContextType.MANIFEST:n=u.manifestLoadingMaxRetry,r=u.manifestLoadingTimeOut,i=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:n=0,r=u.levelLoadingTimeOut;break;default:n=u.levelLoadingMaxRetry,r=u.levelLoadingTimeOut,i=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===l.PlaylistContextType.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===l.PlaylistContextType.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var d=s.partTarget,h=s.targetduration;d&&h&&(r=Math.min(1e3*Math.max(3*d,.8*h),r))}var p={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:a,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(t,p,g)},e.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(t,n),void this.handlePlaylistLoaded(t,e,n,r);this.resetInternalLoader(n.type);var i=t.data;0===i.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,n,r):this.handleMasterPlaylist(t,e,n,r)):this.handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},e.loaderror=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!1,t)},e.loadtimeout=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!0)},e.handleMasterPlaylist=function(t,e,n,r){var a=this.hls,s=t.data,l=f(t,n),d=u.default.parseMasterPlaylist(s,l),h=d.levels,p=d.sessionData;if(h.length){var g=h.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),v=h.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),m=u.default.parseMasterPlaylistMedia(s,l,"AUDIO",g),y=u.default.parseMasterPlaylistMedia(s,l,"SUBTITLES",v),_=u.default.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");m.length&&(m.some((function(t){return!t.url}))||!h[0].audioCodec||h[0].attrs.AUDIO||(o.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:h,audioTracks:m,subtitles:y,captions:_,url:l,stats:e,networkDetails:r,sessionData:p})}else this.handleManifestParsingError(t,n,"no level found in manifest",r)},e.handleTrackOrLevelPlaylist=function(t,e,n,o){var s=this.hls,d=n.id,h=n.level,p=n.type,g=f(t,n),v=Object(r.isFiniteNumber)(d)?d:0,m=Object(r.isFiniteNumber)(h)?h:v,y=function(t){switch(t.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(n),_=u.default.parseLevelPlaylist(t.data,g,m,y,v);if(_.fragments.length){if(p===l.PlaylistContextType.MANIFEST){var b={attrs:new c.AttrList({}),bitrate:0,details:_,name:"",url:g};s.trigger(i.Events.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:g,stats:e,networkDetails:o,sessionData:null})}if(e.parsing.end=performance.now(),_.needSidxRanges){var E,T=null===(E=_.fragments[0].initSegment)||void 0===E?void 0:E.url;this.load({url:T,isSidxRequest:!0,type:p,level:h,levelDetails:_,id:d,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=_,this.handlePlaylistLoaded(t,e,n,o)}else s.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},e.handleSidxRequest=function(t,e){var n=Object(s.parseSegmentIndex)(new Uint8Array(t.data));if(n){var r=e.levelDetails;n.references.forEach((function(t,e){var i=t.info,a=r.fragments[e];0===a.byteRange.length&&a.setByteRange(String(1+i.end-i.start)+"@"+String(i.start)),a.initSegment&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,n,r){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:e.type===l.PlaylistContextType.MANIFEST,url:t.url,reason:n,response:t,context:e,networkDetails:r})},e.handleNetworkError=function(t,e,n,r){void 0===n&&(n=!1),o.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var s=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(t);switch(t.type){case l.PlaylistContextType.MANIFEST:s=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:s=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:s=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:s=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(t.type);var f={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:u,url:t.url,loader:c,context:t,networkDetails:e};r&&(f.response=r),this.hls.trigger(i.Events.ERROR,f)},e.handlePlaylistLoaded=function(t,e,n,r){var a=n.type,o=n.level,s=n.id,u=n.groupId,c=n.loader,f=n.levelDetails,d=n.deliveryDirectives;if(null!=f&&f.targetduration){if(c)switch(f.live&&(c.getCacheAge&&(f.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(f.ageHeader)||(f.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:f,level:o||0,id:s||0,stats:e,networkDetails:r,deliveryDirectives:d});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:f,id:s||0,groupId:u||"",stats:e,networkDetails:r,deliveryDirectives:d});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:f,id:s||0,groupId:u||"",stats:e,networkDetails:r,deliveryDirectives:d})}}else this.handleManifestParsingError(t,n,"invalid target duration",r)},t}()},"./src/polyfills/number.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return r})),n.d(e,"MAX_SAFE_INTEGER",(function(){return i}));var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}()},"./src/remux/mp4-generator.ts":function(t,e,n){"use strict";n.r(e);var r=Math.pow(2,32)-1,i=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,o=a;a--;)e+=r[a].byteLength;var s=new Uint8Array(e);for(s[0]=e>>24&255,s[1]=e>>16&255,s[2]=e>>8&255,s[3]=255&e,s.set(t,4),a=0,e=8;a<o;a++)s.set(r[a],e),e+=r[a].byteLength;return s},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return t.box(t.types.minf,"audio"===e.type?t.box(t.types.smhd,t.SMHD):t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)a[n+4]=(r=i[n].flags).dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)a.push((i=(r=e.sps[n]).byteLength)>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)o.push((i=(r=e.pps[n]).byteLength)>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],f=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return t.box(t.types.stsd,t.STSD,"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.mp4a(e):t.mp3(e):t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,a=e.width,o=e.height,s=Math.floor(i/(r+1)),u=Math.floor(i%(r+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),a=e.id,o=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,o,s,u,l=e.samples||[],c=l.length,f=12+16*c,d=new Uint8Array(f);for(d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,(n+=8+f)>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)d.set([(a=(i=l[r]).duration)>>>24&255,a>>>16&255,a>>>8&255,255&a,(o=i.size)>>>24&255,o>>>16&255,o>>>8&255,255&o,(s=i.flags).isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,(u=i.cts)>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,d)},t.initSegment=function(e){t.types||t.init();var n=t.moov(e),r=new Uint8Array(t.FTYP.byteLength+n.byteLength);return r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,e.default=i},"./src/remux/mp4-remuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g})),n.d(e,"normalizePts",(function(){return v}));var r=n("./src/polyfills/number.ts"),i=n("./src/remux/aac-helper.ts"),a=n("./src/remux/mp4-generator.ts"),o=n("./src/events.ts"),s=n("./src/errors.ts"),u=n("./src/utils/logger.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/timescale-conversion.ts");function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var d=null,h=null,p=!1,g=function(){function t(t,e,n,r){if(void 0===r&&(r=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===d){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);d=i?parseInt(i[1]):0}if(null===h){var a=navigator.userAgent.match(/Safari\/(\d+)/i);h=a?parseInt(a[1]):0}p=!!d&&d<75||!!h&&h<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){u.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){u.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){u.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var r=n.pts-t;return r<-4294967296?(e=!0,v(t,n.pts)):r>0?t:n.pts}),t[0].pts);return e&&u.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,r,i,a,o,s){var c,f,d,h,p,g,m=i,y=i,_=e.pid>-1,b=e.samples.length,E=t.samples.length>0,T=b>1;if((!(t.pid>-1)||E)&&(!_||T)||this.ISGenerated||o){this.ISGenerated||(d=this.generateIS(t,e,i));var S=this.isVideoContiguous,w=-1;if(T&&(w=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!S&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,w>0){u.logger.warn("[mp4-remuxer]: Dropped "+w+" out of "+b+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(w),e.dropped+=w,y+=(e.samples[0].pts-A)/(e.timescale||9e4)}else-1===w&&(u.logger.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),g=!1);if(this.ISGenerated){if(E&&T){var x=this.getVideoStartPts(e.samples),C=(v(t.samples[0].pts,x)-x)/e.inputTimeScale;m+=Math.max(0,C),y+=Math.max(0,-C)}if(E){if(t.samplerate||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(t,e,i)),f=this.remuxAudio(t,m,this.isAudioContiguous,a,_||T||s===l.PlaylistLevelType.AUDIO?y:void 0),T){var D=f?f.endPTS-f.startPTS:0;e.inputTimeScale||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(t,e,i)),c=this.remuxVideo(e,y,S,D)}}else T&&(c=this.remuxVideo(e,y,S,0));c&&(c.firstKeyFrame=w,c.independent=-1!==w)}}return this.ISGenerated&&(n.samples.length&&(p=this.remuxID3(n,i)),r.samples.length&&(h=this.remuxText(r,i))),{audio:f,video:c,initSegment:d,independent:g,text:h,id3:p}},e.generateIS=function(t,e,n){var i,o,s,u=t.samples,l=e.samples,c=this.typeSupported,f={},d=!Object(r.isFiniteNumber)(this._initPTS),h="audio/mp4";if(d&&(i=o=1/0),t.config&&u.length&&(t.timescale=t.samplerate,t.isAAC||(c.mpeg?(h="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),f.audio={id:"audio",container:h,codec:t.codec,initSegment:!t.isAAC&&c.mpeg?new Uint8Array(0):a.default.initSegment([t]),metadata:{channelCount:t.channelCount}},d&&(s=t.inputTimeScale,i=o=u[0].pts-Math.round(s*n))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,f.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:a.default.initSegment([e]),metadata:{width:e.width,height:e.height}},d)){s=e.inputTimeScale;var p=this.getVideoStartPts(l),g=Math.round(s*n);o=Math.min(o,v(l[0].dts,p)-g),i=Math.min(i,p-g)}if(Object.keys(f).length)return this.ISGenerated=!0,d&&(this._initPTS=i,this._initDTS=o),{tracks:f,initPTS:i,timescale:s}},e.remuxVideo=function(t,e,n,r){var i,l,h,g=t.inputTimeScale,y=t.samples,_=[],b=y.length,E=this._initPTS,T=this.nextAvcDts,S=8,w=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,x=0,C=!1;n&&null!==T||(T=e*g-(y[0].pts-v(y[0].dts,y[0].pts)));for(var D=0;D<b;D++){var I=y[D];I.pts=v(I.pts-E,T),I.dts=v(I.dts-E,T),I.dts>I.pts&&(x=Math.max(Math.min(x,I.pts-I.dts),-18e3)),I.dts<y[D>0?D-1:D].dts&&(C=!0)}C&&y.sort((function(t,e){return t.dts-e.dts||t.pts-e.pts})),l=y[0].dts,h=y[y.length-1].dts;var R=Math.round((h-l)/(b-1));if(x<0){if(x<-2*R){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-R,!0)+" ms");for(var k=x,O=0;O<b;O++)y[O].dts=k=Math.max(k,y[O].pts-R),y[O].pts=Math.max(k,y[O].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(x,!0)+" ms to overcome this issue");for(var P=0;P<b;P++)y[P].dts=y[P].dts+x}l=y[0].dts}if(n){var M=l-T,L=M>R;if(L||M<-1){u.logger.warn(L?"AVC: "+Object(c.toMsFromMpegTsClock)(M,!0)+" ms ("+M+"dts) hole between fragments detected, filling it":"AVC: "+Object(c.toMsFromMpegTsClock)(-M,!0)+" ms ("+M+"dts) overlapping between fragments detected");var N=y[0].pts-M;y[0].dts=l=T,y[0].pts=N,u.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(N,!0)+"/"+Object(c.toMsFromMpegTsClock)(l,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(M,!0)+" ms")}}p&&(l=Math.max(0,l));for(var F=0,j=0,B=0;B<b;B++){for(var U=y[B],V=U.units,G=V.length,H=0,Y=0;Y<G;Y++)H+=V[Y].data.length;j+=H,F+=G,U.length=H,U.dts=Math.max(U.dts,l),U.pts=Math.max(U.pts,U.dts,0),w=Math.min(U.pts,w),A=Math.max(U.pts,A)}h=y[b-1].dts;var z,q=j+4*F+8;try{z=new Uint8Array(q)}catch(ct){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating video mdat "+q})}var X=new DataView(z.buffer);X.setUint32(0,q),z.set(a.default.types.mdat,4);for(var K=0;K<b;K++){for(var W=y[K],Q=W.units,$=0,Z=0,J=Q.length;Z<J;Z++){var tt=Q[Z],et=tt.data,nt=tt.data.byteLength;X.setUint32(S,nt),z.set(et,S+=4),S+=nt,$+=4+nt}if(K<b-1)i=y[K+1].dts-W.dts;else{var rt=this.config,it=W.dts-y[K>0?K-1:K].dts;if(rt.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(rt.maxBufferHole*g),ot=(r?w+r*g:this.nextAudioPts)-W.pts;ot>at?((i=ot-it)<0&&(i=it),u.logger.log("[mp4-remuxer]: It is approximately "+ot/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=it}else i=it}var st=Math.round(W.pts-W.dts);_.push(new m(W.key,i,$,st))}if(_.length&&d&&d<70){var ut=_[0].flags;ut.dependsOn=2,ut.isNonSync=0}console.assert(void 0!==i,"mp4SampleDuration must be computed"),this.nextAvcDts=T=h+i,this.isVideoContiguous=!0;var lt={data1:a.default.moof(t.sequenceNumber++,l,f({},t,{samples:_})),data2:z,startPTS:w/g,endPTS:(A+i)/g,startDTS:l/g,endDTS:T/g,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:t.dropped};return t.samples=[],t.dropped=0,console.assert(z.length,"MDAT length must not be zero"),lt},e.remuxAudio=function(t,e,n,r,l){var c=t.inputTimeScale,d=c/(t.samplerate?t.samplerate:c),h=t.isAAC?1024:1152,p=h*d,g=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,_=[],b=t.samples,E=y?0:8,T=this.nextAudioPts||-1,S=e*c;if(this.isAudioContiguous=n=n||b.length&&T>0&&(r&&Math.abs(S-T)<9e3||Math.abs(v(b[0].pts-g,S)-T)<20*p),b.forEach((function(t){t.pts=v(t.pts-g,S)})),!n||T<0){if(!(b=b.filter((function(t){return t.pts>=0}))).length)return;T=0===l?0:r?Math.max(0,S):b[0].pts}if(t.isAAC)for(var w=void 0!==l,A=this.config.maxAudioFramesDrift,x=0,C=T;x<b.length;x++){var D=b[x],I=D.pts,R=I-C,k=Math.abs(1e3*R/c);if(R<=-A*p&&w)0===x&&(u.logger.warn("Audio frame @ "+(I/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/c)+" ms."),this.nextAudioPts=T=C=I);else if(R>=A*p&&k<1e4&&w){var O=Math.round(R/p);(C=I-O*p)<0&&(O--,C+=p),0===x&&(this.nextAudioPts=T=C),u.logger.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(C/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var P=0;P<O;P++){var M=Math.max(C,0),L=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);L||(u.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),L=D.unit.subarray()),b.splice(x,0,{unit:L,pts:M}),C+=p,x++}}D.pts=C,C+=p}for(var N,F=null,j=null,B=0,U=b.length;U--;)B+=b[U].unit.byteLength;for(var V=0,G=b.length;V<G;V++){var H=b[V],Y=H.unit,z=H.pts;if(null!==j)_[V-1].duration=Math.round((z-j)/d);else{if(n&&t.isAAC&&(z=T),F=z,!(B>0))return;B+=E;try{N=new Uint8Array(B)}catch(Z){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}y||(new DataView(N.buffer).setUint32(0,B),N.set(a.default.types.mdat,4))}N.set(Y,E);var q=Y.byteLength;E+=q,_.push(new m(!0,h,q,0)),j=z}var X=_.length;if(X){this.nextAudioPts=T=j+d*_[_.length-1].duration;var K=y?new Uint8Array(0):a.default.moof(t.sequenceNumber++,F/d,f({},t,{samples:_}));t.samples=[];var W=F/c,Q=T/c,$={data1:K,data2:N,startPTS:W,endPTS:Q,startDTS:W,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:X};return this.isAudioContiguous=!0,console.assert(N.length,"MDAT length must not be zero"),$}},e.remuxEmptyAudio=function(t,e,n,r){var a=t.inputTimeScale,o=this.nextAudioPts,s=(null!==o?o:r.startDTS*a)+this._initDTS,l=a/(t.samplerate?t.samplerate:a)*1024,c=Math.ceil((r.endDTS*a+this._initDTS-s)/l),f=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(u.logger.warn("[mp4-remuxer]: remux empty Audio"),f){for(var d=[],h=0;h<c;h++){var p=s+h*l;d.push({unit:f,pts:p,dts:p})}return t.samples=d,this.remuxAudio(t,e,n,!1)}u.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=this._initDTS,o=0;o<n;o++){var s=t.samples[o];s.pts=v(s.pts-i,e*r)/r,s.dts=v(s.dts-a,e*r)/r}var u=t.samples;return t.samples=[],{samples:u}}},e.remuxText=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=0;a<n;a++){var o=t.samples[a];o.pts=v(o.pts-i,e*r)/r}t.samples.sort((function(t,e){return t.pts-e.pts}));var s=t.samples;return t.samples=[],{samples:s}}},t}();function v(t,e){var n;if(null===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}var m=function(t,e,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=n,this.cts=r,this.flags=new y(t)},y=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},"./src/remux/passthrough-remuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/mp4-tools.ts"),a=n("./src/loader/fragment.ts"),o=n("./src/utils/logger.ts"),s=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,n){this.audioCodec=e,this.videoCodec=n,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,n=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var r=this.initData=Object(i.parseInitSegment)(t);e||(e=l(r.audio,a.ElementaryStreamTypes.AUDIO)),n||(n=l(r.video,a.ElementaryStreamTypes.VIDEO));var s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:e+","+n,initSegment:t,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:r.video?s.video={container:"video/mp4",codec:n,initSegment:t,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s},e.remux=function(t,e,n,a,s){var l=this.initPTS,c=this.lastEndDTS,f={audio:void 0,video:void 0,text:a,id3:n,initSegment:void 0};Object(r.isFiniteNumber)(c)||(c=this.lastEndDTS=s||0);var d=e.samples;if(!d||!d.length)return f;var h={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(d),p=this.initData),!p||!p.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(r.isFiniteNumber)(l)||(this.initPTS=h.initPTS=l=u(p,d,c));var g=Object(i.getDuration)(d,p),v=c,m=g+v;Object(i.offsetStartDTS)(p,d,l),g>0?this.lastEndDTS=m:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var y=!!p.audio,_=!!p.video,b="";y&&(b+="audio"),_&&(b+="video");var E={data1:d,startPTS:v,startDTS:v,endPTS:m,endDTS:m,type:b,hasAudio:y,hasVideo:_,nb:1,dropped:0};return f.audio="audio"===E.type?E:void 0,f.video="audio"!==E.type?E:void 0,f.text=a,f.id3=n,f.initSegment=h,f},t}(),u=function(t,e,n){return Object(i.getStartDTS)(t,e)-n};function l(t,e){var n=null==t?void 0:t.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||e===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}e.default=s},"./src/task-loop.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}()},"./src/types/cmcd.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"CMCDVersion",(function(){return o})),n.d(e,"CMCDObjectType",(function(){return r})),n.d(e,"CMCDStreamingFormat",(function(){return i})),n.d(e,"CMCDStreamType",(function(){return a}));var r,i,a,o=1;!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(r||(r={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(i||(i={})),function(t){t.VOD="v",t.LIVE="l"}(a||(a={}))},"./src/types/level.ts":function(t,e,n){"use strict";var r;function i(t,e){var n=t.canSkipUntil;return n&&(void 0!==e?e-t.endSN:0)<n?t.canSkipDateRanges?r.v2:r.Yes:r.No}n.r(e),n.d(e,"HlsSkip",(function(){return r})),n.d(e,"getSkipValue",(function(){return i})),n.d(e,"HlsUrlParameters",(function(){return a})),n.d(e,"Level",(function(){return o})),function(t){t.No="",t.Yes="YES",t.v2="v2"}(r||(r={}));var a=function(){function t(t,e,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=n}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),o=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e;return(e=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/types/loader.ts":function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,"PlaylistContextType",(function(){return r})),n.d(e,"PlaylistLevelType",(function(){return i})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"ChunkMetadata",(function(){return r}));var r=function(t,e,n,r,i,a){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=n,this.size=r,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"AttrList",(function(){return a}));var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var n=this[t];return n?parseFloat(n):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(i.lastIndex=0;null!==(e=i.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}()},"./src/utils/binary-search.ts":function(t,e,n){"use strict";n.r(e),e.default={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var o=e(a=t[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}}},"./src/utils/buffer-helper.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"BufferHelper",(function(){return a}));var r=n("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function t(){}return t.isBuffered=function(e,n){try{if(e)for(var r=t.getBuffered(e),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(a){}return!1},t.bufferInfo=function(e,n,r){try{if(e){var i,a=t.getBuffered(e),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,n,r)}}catch(s){}return{len:0,start:n,end:n,nextStart:void 0}},t.bufferedInfo=function(t,e,n){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var r=[];if(n)for(var i=0;i<t.length;i++){var a=r.length;if(a){var o=r[a-1].end;t[i].start-o<n?t[i].end>o&&(r[a-1].end=t[i].end):r.push(t[i])}else r.push(t[i])}else r=t;for(var s,u=0,l=e,c=e,f=0;f<r.length;f++){var d=r[f].start,h=r[f].end;if(e+n>=d&&e<h)l=d,u=(c=h)-e;else if(e+n<d){s=d;break}}return{len:u,start:l||0,end:c||0,nextStart:s}},t.getBuffered=function(t){try{return t.buffered}catch(e){return r.logger.log("failed to get media.buffered",e),i}},t}()},"./src/utils/cea-608-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"Row",(function(){return v})),n.d(e,"CaptionScreen",(function(){return m}));var r,i=n("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(t){var e=t;return a.hasOwnProperty(t)&&(e=a[t]),String.fromCharCode(e)},s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(r||(r={}));var d=function(){function t(){this.time=null,this.verboseLevel=r.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&i.logger.log(this.time+" ["+t+"] "+e)},t}(),h=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},p=function(){function t(t,e,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),g=function(){function t(t,e,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new p(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),v=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new g);this.logger=t,this.pos=0,this.currPenState=new p}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<100;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(r.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(r.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=o(t);this.pos>=100?this.logger.log(r.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),m=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new v(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(r.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(r.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var o=a.rows[i].cueStartTime,s=this.logger.time;if(o&&null!==s&&o<s)for(var u=0;u<this.nrRollUpRows;u++)this.rows[e-this.nrRollUpRows+u+1].copy(a.rows[i+u])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var c=Math.max(t.indent-1,0);l.setCursor(t.indent),t.color=l.chars[c].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},e.setBkgData=function(t){this.logger.log(r.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(r.TEXT,this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(r.INFO,"Rolling up")}else this.logger.log(r.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&e.push(t?"Row "+(r+1)+": '"+i+"'":i.trim())}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),y=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new m(n),this.nonDisplayedMemory=new m(n),this.lastOutputScreen=new m(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(r.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);this.logger.log(r.INFO,(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(r.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(r.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(r.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(r.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(r.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(r.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(r.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(r.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(r.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(r.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(r.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(r.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(r.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(r.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(r.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(r.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function _(t,e,n){n.a=t,n.b=e}function b(t,e,n){return n.a===t&&n.b===e}e.default=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new d;this.channels=[null,new y(t,e,r),new y(t+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,i,a,o=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(a=127&e[s+1],0!=(i=127&e[s])||0!==a){if(this.logger.log(r.DATA,"["+h([e[s],e[s+1]])+"] -> ("+h([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(o=this.parseChars(i,a))){var u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(r.WARNING,"No channel found yet. TEXT-MODE?")}n||o||this.logger.log(r.WARNING,"Couldn't parse cleaned data "+h([i,a])+" orig: "+h([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(b(t,e,n))return _(null,null,n),this.logger.log(r.DEBUG,"Repeated command ("+h([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,a=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),_(t,e,n),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(r.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(e),this.logger.log(r.DEBUG,"MIDROW ("+h([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(b(t,e,n))return _(null,null,n),!0;var r=t<=23?1:2,i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(e>=64&&e<=95?1===r?s[t]:l[t]:1===r?u[t]:c[t],e)),_(t,e,n),this.currentChannel=r,!0)},e.interpretPAC=function(t,e){var n,r={color:null,italics:!1,indent:null,underline:!1,row:t};return r.underline=1==(1&(n=e>95?e-96:e-64)),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n,i,a=null,s=null;if(t>=25?(n=2,s=t-8):(n=1,s=t),s>=17&&s<=19?(this.logger.log(r.INFO,"Special char '"+o(i=17===s?e+80:18===s?e+112:e+144)+"' in channel "+n),a=[i]):t>=32&&t<=127&&(a=0===e?[t]:[t,e]),a){var u=h(a);this.logger.log(r.DEBUG,"Char codes =  "+u.join(",")),_(t,e,this.cmdHistory)}return a},e.parseBackgroundAttributes=function(t,e){var n;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var r={};return 16===t||24===t?(n=Math.floor((e-32)/2),r.background=f[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),this.channels[t<=23?1:2].setBkgData(r),_(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}()},"./src/utils/codecs.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isCodecType",(function(){return i})),n.d(e,"isCodecSupportedInMp4",(function(){return a}));var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(t,e){var n=r[e];return!!n&&!0===n[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}},"./src/utils/cues.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/vttparser.ts"),i=n("./src/utils/webvtt-parser.ts"),a=n("./src/utils/texttrack-utils.ts"),o=/\s/;e.default={newCue:function(t,e,n,s){for(var u,l,c,f,d,h=[],p=self.VTTCue||self.TextTrackCue,g=0;g<s.rows.length;g++)if(c=!0,f=0,d="",!(u=s.rows[g]).isEmpty()){for(var v=0;v<u.chars.length;v++)o.test(u.chars[v].uchar)&&c?f++:(d+=u.chars[v].uchar,c=!1);u.cueStartTime=e,e===n&&(n+=1e-4),f>=16?f--:f++;var m=Object(r.fixLineBreaks)(d.trim()),y=Object(i.generateCueId)(e,n,m);t&&t.cues&&t.cues.getCueById(y)||((l=new p(e,n,m)).id=y,l.line=g+1,l.align="left",l.position=10+Math.min(80,10*Math.floor(8*f/32)),h.push(l))}return t&&h.length&&(h.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),h.forEach((function(e){return Object(a.addCueToTrack)(t,e)}))),h}}},"./src/utils/discontinuities.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"findFirstFragWithCC",(function(){return o})),n.d(e,"shouldAlignOnDiscontinuities",(function(){return s})),n.d(e,"findDiscontinuousReferenceFrag",(function(){return u})),n.d(e,"adjustSlidingStart",(function(){return c})),n.d(e,"alignStream",(function(){return f})),n.d(e,"alignPDT",(function(){return d})),n.d(e,"alignFragmentByPDTDelta",(function(){return h})),n.d(e,"alignMediaPlaylistByPDT",(function(){return p}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts"),a=n("./src/controller/level-helper.ts");function o(t,e){for(var n=null,r=0,i=t.length;r<i;r++){var a=t[r];if(a&&a.cc===e){n=a;break}}return n}function s(t,e,n){return!(!e.details||!(n.endCC>n.startCC||t&&t.cc<n.startCC))}function u(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(t,e){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function c(t,e){for(var n=e.fragments,r=0,i=n.length;r<i;r++)l(n[r],t);e.fragmentHint&&l(e.fragmentHint,t),e.alignedSliding=!0}function f(t,e,n){e&&(function(t,e,n){if(s(t,n,e)){var a=u(n.details,e);a&&Object(r.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+e.url),c(a.start,e))}}(t,n,e),!n.alignedSliding&&e.details&&d(n,e.details),n.alignedSliding||!e.details||n.skippedSegments||Object(a.adjustSliding)(e.details,n))}function d(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,o=(a-n)/1e3+e.fragments[0].start;o&&Object(r.isFiniteNumber)(o)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+o.toFixed(3)+" "+t.url+" "),c(o,t))}}function h(t,e){var n=t.programDateTime;if(n){var r=(n-e)/1e3;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function p(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime-1e3*e.fragments[0].start;t.fragments.forEach((function(t){h(t,n)})),t.fragmentHint&&h(t.fragmentHint,n),t.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/ewma.ts");e.default=function(){function t(t,e,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(e)}var e=t.prototype;return e.update=function(t,e){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new r.default(t,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new r.default(e,i.getEstimate(),i.getTotalWeight()))},e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}()},"./src/utils/ewma.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=n}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}()},"./src/utils/fetch-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"fetchSupported",(function(){return d}));var r=n("./src/polyfills/number.ts"),i=n("./src/loader/load-stats.ts"),a=n("./src/demux/chunk-cache.ts");function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function s(t,e,n){return(s=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function d(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}var h=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||p,this.controller=new self.AbortController,this.stats=new i.LoadStats}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(t,e){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(f({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}(t,this.controller.signal),s=n.onProgress,u="arraybuffer"===t.responseType,l=u?"byteLength":"length";this.context=t,this.config=e,this.callbacks=n,this.request=this.fetchSetup(t,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(a,t,i.response)}),e.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok)throw new g(n.statusText||"fetch, bad network response",n.status,n);return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),s&&Object(r.isFiniteNumber)(e.highWaterMark)?i.loadProgressively(n,a,t,e.highWaterMark,s):u?n.arrayBuffer():n.text()})).then((function(o){var u=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=o[l];var c={url:u.url,data:o};s&&!Object(r.isFiniteNumber)(e.highWaterMark)&&s(a,t,o,u),n.onSuccess(c,a,t,u)})).catch((function(e){self.clearTimeout(i.requestTimeout),a.aborted||n.onError({code:e.code||0,text:e.message},t,e.details)}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,n,r,i){void 0===r&&(r=0);var o=new a.default,s=t.body.getReader();return function a(){return s.read().then((function(s){if(s.done)return o.dataLength&&i(e,n,o.flush(),t),Promise.resolve(new ArrayBuffer(0));var u=s.value,l=u.length;return e.loaded+=l,l<r||o.dataLength?(o.push(u),o.dataLength>=r&&i(e,n,o.flush(),t)):i(e,n,u,t),a()})).catch((function(){return Promise.reject()}))}()},t}();function p(t,e){return new self.Request(t.url,e)}var g=function(t){var e,n;function r(e,n,r){var i;return(i=t.call(this,e)||this).code=void 0,i.details=void 0,i.code=n,i.details=r,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n),r}(o(Error));e.default=h},"./src/utils/imsc1-ttml-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"IMSC1_CODEC",(function(){return c})),n.d(e,"parseIMSC1",(function(){return p}));var r=n("./src/utils/mp4-tools.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/utils/vttcue.ts"),o=n("./src/demux/id3.ts"),s=n("./src/utils/timescale-conversion.ts"),u=n("./src/utils/webvtt-parser.ts");function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var c="stpp.ttml.im1t",f=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,d=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,h={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(t,e,n,i,c){var f=Object(r.findBox)(new Uint8Array(t),["mdat"]);if(0!==f.length){var d=f[0],p=Object(o.utf8ArrayToStr)(new Uint8Array(t,d.start,d.end-d.start)),b=Object(s.toTimescaleFromScale)(e,1,n);try{i(function(t,e){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((function(t,e){return t[e]=n.getAttribute("ttp:"+e)||r[e],t}),{}),o="preserve"!==n.getAttribute("xml:space"),s=v(g(n,"styling","style")),c=v(g(n,"layout","region")),f=g(n,"body","[begin]");return[].map.call(f,(function(t){var n=function t(e,n){return[].slice.call(e.childNodes).reduce((function(e,r,i){var a;return"br"===r.nodeName&&i?e+"\n":null!==(a=r.childNodes)&&void 0!==a&&a.length?t(r,n):n?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}(t,o);if(!n||!t.hasAttribute("begin"))return null;var r=_(t.getAttribute("begin"),i),f=_(t.getAttribute("dur"),i),d=_(t.getAttribute("end"),i);if(null===r)throw y(t);if(null===d){if(null===f)throw y(t);d=r+f}var p=new a.default(r-e,d-e,n);p.id=Object(u.generateCueId)(p.startTime,p.endTime,p.text);var g=c[t.getAttribute("region")],v=s[t.getAttribute("style")];p.position=10,p.size=80;var b=function(t,e){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(r,i){var a=m(e,n,i)||m(t,n,i);return a&&(r[i]=a),r}),{})}(g,v),E=b.textAlign;if(E){var T=h[E];T&&(p.lineAlign=T),p.align=E}return l(p,b),p})).filter((function(t){return null!==t}))}(p,b))}catch(E){c(E)}}else c(new Error("Could not parse IMSC1 mdat"))}function g(t,e,n){var r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function v(t){return t.reduce((function(t,e){var n=e.getAttribute("xml:id");return n&&(t[n]=e),t}),{})}function m(t,e,n){return t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function y(t){return new Error("Could not parse ttml timestamp "+t)}function _(t,e){if(!t)return null;var n=Object(i.parseTimeStamp)(t);return null===n&&(f.test(t)?n=function(t,e){var n=f.exec(t);return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+((0|n[4])+(0|n[5])/e.subFrameRate)/e.frameRate}(t,e):d.test(t)&&(n=function(t,e){var n=d.exec(t),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}(t,e))),n}},"./src/utils/logger.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"enableLogs",(function(){return s})),n.d(e,"logger",(function(){return u}));var r=function(){},i={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=i;function o(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):r}function s(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){a[e]=t[e]?t[e].bind(t):o(e)}))}(t,"debug","log","info","warn","error");try{a.log()}catch(e){a=i}}else a=i}var u=i},"./src/utils/mediakeys-helper.ts":function(t,e,n){"use strict";var r;n.r(e),n.d(e,"KeySystems",(function(){return r})),n.d(e,"requestMediaKeySystemAccess",(function(){return i})),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(r||(r={}));var i="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(t,e,n){"use strict";function r(){return self.MediaSource||self.WebKitMediaSource}n.r(e),n.d(e,"getMediaSource",(function(){return r}))},"./src/utils/mp4-tools.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"bin2str",(function(){return s})),n.d(e,"readUint16",(function(){return u})),n.d(e,"readUint32",(function(){return l})),n.d(e,"writeUint32",(function(){return c})),n.d(e,"findBox",(function(){return f})),n.d(e,"parseSegmentIndex",(function(){return d})),n.d(e,"parseInitSegment",(function(){return h})),n.d(e,"getStartDTS",(function(){return p})),n.d(e,"getDuration",(function(){return g})),n.d(e,"computeRawDurationFromSamples",(function(){return v})),n.d(e,"offsetStartDTS",(function(){return m})),n.d(e,"segmentValidRange",(function(){return y})),n.d(e,"appendUint8Array",(function(){return _}));var r=n("./src/utils/typed-array.ts"),i=n("./src/loader/fragment.ts"),a=Math.pow(2,32)-1,o=[].push;function s(t){return String.fromCharCode.apply(null,t)}function u(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n}function c(t,e,n){"data"in t&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function f(t,e){var n,r,i,a=[];if(!e.length)return a;"data"in t?(n=t.data,r=t.start,i=t.end):(r=0,i=(n=t).byteLength);for(var u=r;u<i;){var c=l(n,u),d=c>1?u+c:i;if(s(n.subarray(u+4,u+8))===e[0])if(1===e.length)a.push({data:n,start:u+8,end:d});else{var h=f({data:n,start:u+8,end:d},e.slice(1));h.length&&o.apply(a,h)}u=d}return a}function d(t){var e=f(t,["moov"])[0],n=e?e.end:null,r=f(t,["sidx"]);if(!r||!r[0])return null;var i=[],a=r[0],o=a.data[0],s=0===o?8:16,c=l(a,s);s+=4,s+=0===o?8:16;var d=a.end+0,h=u(a,s+=2);s+=2;for(var p=0;p<h;p++){var g=s,v=l(a,g);g+=4;var m=2147483647&v;if(1==(2147483648&v)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var y=l(a,g);g+=4,i.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/c,start:d,end:d+m-1}}),d+=m,s=g+=4}return{earliestPresentationTime:0,timescale:c,version:o,referencesCount:h,references:i,moovEndOffset:n}}function h(t){for(var e=[],n=f(t,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],o=f(a,["tkhd"])[0];if(o){var u=o.data[o.start],c=0===u?12:20,d=l(o,c),h=f(a,["mdia","mdhd"])[0];if(h){var p=l(h,c=0===(u=h.data[h.start])?12:20),g=f(a,["mdia","hdlr"])[0];if(g){var v=s(g.data.subarray(g.start+8,g.start+12)),m={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[v];if(m){var y=f(a,["mdia","minf","stbl","stsd"])[0],_=void 0;y&&(_=s(y.data.subarray(y.start+12,y.start+16))),e[d]={timescale:p,type:m},e[m]={timescale:p,id:d,codec:_}}}}}}return f(t,["moov","mvex","trex"]).forEach((function(t){var n=l(t,4),r=e[n];r&&(r.default={duration:l(t,12),flags:l(t,20)})})),e}function p(t,e){return f(e,["moof","traf"]).reduce((function(e,n){var r=f(n,["tfdt"])[0],i=r.data[r.start],a=f(n,["tfhd"]).reduce((function(e,n){var a=l(n,4),o=t[a];if(o){var s=l(r,4);1===i&&(s*=Math.pow(2,32),s+=l(r,8));var u=s/(o.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)||0}function g(t,e){for(var n=0,r=0,a=0,o=f(t,["moof","traf"]),s=0;s<o.length;s++){var u=o[s],c=f(u,["tfhd"])[0],h=e[l(c,4)];if(h){var p=h.default,g=l(c,0)|(null==p?void 0:p.flags),m=null==p?void 0:p.duration;8&g&&(m=l(c,2&g?12:8));for(var y=h.timescale||9e4,_=f(u,["trun"]),b=0;b<_.length;b++)!(n=v(_[b]))&&m&&(n=m*l(_[b],4)),h.type===i.ElementaryStreamTypes.VIDEO?r+=n/y:h.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/y)}}if(0===r&&0===a){var E=d(t);if(null!=E&&E.references)return E.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return r||a}function v(t){var e=l(t,0),n=8;1&e&&(n+=4),4&e&&(n+=4);for(var r=0,i=l(t,4),a=0;a<i;a++)256&e&&(r+=l(t,n),n+=4),512&e&&(n+=4),1024&e&&(n+=4),2048&e&&(n+=4);return r}function m(t,e,n){f(e,["moof","traf"]).forEach((function(e){f(e,["tfhd"]).forEach((function(r){var i=l(r,4),o=t[i];if(o){var s=o.timescale||9e4;f(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],r=l(t,4);if(0===e)c(t,4,r-n*s);else{r*=Math.pow(2,32),r+=l(t,8),r-=n*s,r=Math.max(r,0);var i=Math.floor(r/(a+1)),o=Math.floor(r%(a+1));c(t,4,i),c(t,8,o)}}))}}))}))}function y(t){var e={valid:null,remainder:null},n=f(t,["moof"]);if(!n)return e;if(n.length<2)return e.remainder=t,e;var i=n[n.length-1];return e.valid=Object(r.sliceUint8)(t,0,i.start-8),e.remainder=Object(r.sliceUint8)(t,i.start-8),e}function _(t,e){var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}},"./src/utils/output-filter.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}()},"./src/utils/texttrack-utils.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"sendAddTrackEvent",(function(){return i})),n.d(e,"addCueToTrack",(function(){return a})),n.d(e,"clearCurrentCues",(function(){return o})),n.d(e,"removeCuesInRange",(function(){return s})),n.d(e,"getCuesInRange",(function(){return u}));var r=n("./src/utils/logger.ts");function i(t,e){var n;try{n=new Event("addtrack")}catch(r){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function a(t,e){var n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(a){r.logger.debug("[texttrack-utils]: "+a);var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}"disabled"===n&&(t.mode=n)}function o(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);"disabled"===e&&(t.mode=e)}function s(t,e,n){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var i=u(t.cues,e,n),a=0;a<i.length;a++)t.removeCue(i[a]);"disabled"===r&&(t.mode=r)}function u(t,e,n){var r=[],i=function(t,e){if(e<t[0].startTime)return 0;var n=t.length-1;if(e>t[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(e<t[a].startTime)i=a-1;else{if(!(e>t[a].startTime&&r<n))return a;r=a+1}}return t[r].startTime-e<e-t[i].startTime?r:i}(t,e);if(i>-1)for(var a=i,o=t.length;a<o;a++){var s=t[a];if(s.startTime>=e&&s.endTime<=n)r.push(s);else if(s.startTime>n)return r}return r}},"./src/utils/time-ranges.ts":function(t,e,n){"use strict";n.r(e),e.default={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}}},"./src/utils/timescale-conversion.ts":function(t,e,n){"use strict";function r(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=t*e*n;return r?Math.round(i):i}function i(t,e,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),r(t,e,1/n,i)}function a(t,e){return void 0===e&&(e=!1),r(t,1e3,1/9e4,e)}function o(t,e){return void 0===e&&(e=1),r(t,9e4,1/e)}n.r(e),n.d(e,"toTimescaleFromBase",(function(){return r})),n.d(e,"toTimescaleFromScale",(function(){return i})),n.d(e,"toMsFromMpegTsClock",(function(){return a})),n.d(e,"toMpegTsClockFromTimescale",(function(){return o}))},"./src/utils/typed-array.ts":function(t,e,n){"use strict";function r(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}n.r(e),n.d(e,"sliceUint8",(function(){return r}))},"./src/utils/vttcue.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function n(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var n=e.toLowerCase();return!!~t.indexOf(n)&&n}function r(t){return n(e,t)}function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)t[o]=a[o]}return t}function a(e,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var l="",c=!1,f=e,d=a,h=o,p=null,g="",v=!0,m="auto",y="start",_=50,b="middle",E=50,T="middle";Object.defineProperty(s,"id",i({},u,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return h},set:function(t){h=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return g},set:function(e){var r=function(e){return n(t,e)}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return b},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return T},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"parseTimeStamp",(function(){return a})),n.d(e,"fixLineBreaks",(function(){return f})),n.d(e,"VTTParser",(function(){return d}));var r=n("./src/utils/vttcue.ts"),i=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function a(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+parseFloat(r||0)}var n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}var o=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var n=parseFloat(e);if(n>=0&&n<=100)return this.set(t,n),!0}return!1},t}();function s(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}var u=new r.default(0,0,""),l="middle"===u.align?"middle":"center";function c(t,e,n){var r=t;function i(){var e=a(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function c(){t=t.replace(/^\s+/,"")}if(c(),e.startTime=i(),c(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),c(),e.endTime=i(),c(),function(t,e){var r=new o;s(t,(function(t,e){var i;switch(t){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===e){r.set(t,n[a].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":i=e.split(","),r.integer(t,i[0]),r.percent(t,i[0])&&r.set("snapToLines",!1),r.alt(t,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",l,"end"]);break;case"position":i=e.split(","),r.percent(t,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",l,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",l);var a=r.get("position","auto");"auto"===a&&50===u.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function f(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var d=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=f(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(i=n()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var o=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(o?o=!1:i=n(),e.state){case"HEADER":/:/.test(i)?s(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new r.default(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{c(i,e.cue,e.regionList)}catch(l){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=-1!==i.indexOf("--\x3e");if(!i||u&&(o=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID")}}}catch(l){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t)}return this.onflush&&this.onflush(),this},t}()},"./src/utils/webvtt-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"generateCueId",(function(){return f})),n.d(e,"parseWebVTT",(function(){return d}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/demux/id3.ts"),o=n("./src/utils/timescale-conversion.ts"),s=n("./src/remux/mp4-remuxer.ts"),u=/\r\n|\n\r|\n|\r/g,l=function(t,e,n){return void 0===n&&(n=0),t.substr(n,e.length)===e},c=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()};function f(t,e,n){return c(t.toString())+c(e.toString())+c(n)}function d(t,e,n,c,d,h,p,g){var v,m=new i.VTTParser,y=Object(a.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(u,"\n").split("\n"),_=[],b=Object(o.toMpegTsClockFromTimescale)(e,n),E="00:00.000",T=0,S=0,w=!0,A=!1;m.oncue=function(t){var e=c[d],n=c.ccOffset,r=(T-b)/9e4;if(null!=e&&e.new&&(void 0!==S?n=c.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC]}t.presentationOffset=n}(c,d,r)),r&&(n=r-c.presentationOffset),A){var i=t.endTime-t.startTime,a=Object(s.normalizePts)(9e4*(t.startTime+n-S),9e4*h)/9e4;t.startTime=a,t.endTime=a+i}var o=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(o)),t.id||(t.id=f(t.startTime,t.endTime,o)),t.endTime>0&&_.push(t)},m.onparsingerror=function(t){v=t},m.onflush=function(){v?g(v):p(_)},y.forEach((function(t){if(w){if(l(t,"X-TIMESTAMP-MAP=")){w=!1,A=!0,t.substr(16).split(",").forEach((function(t){l(t,"LOCAL:")?E=t.substr(6):l(t,"MPEGTS:")&&(T=parseInt(t.substr(7)))}));try{S=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(r.isFiniteNumber)(e)&&Object(r.isFiniteNumber)(n)&&Object(r.isFiniteNumber)(i)&&Object(r.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*i)+36e5*a}(E)/1e3}catch(e){A=!1,v=e}return}""===t&&(w=!1)}m.parse(t+"\n")})),m.flush()}},"./src/utils/xhr-loader.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.ts"),i=n("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m;e.default=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=n,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,e.url)}catch(s){n.open("GET",e.url,!0),i(n,e.url)}n.readyState||n.open("GET",e.url,!0);var a=this.context.headers;if(a)for(var o in a)n.setRequestHeader(o,a[o])}catch(s){return void this.callbacks.onError({code:n.status,text:s.message},e,n)}e.rangeEnd&&n.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),n.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,n=this.stats;if(t&&e){var i=e.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){e.onreadystatechange=null,e.onprogress=null;var o=e.status;if(o>=200&&o<300){var s,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(n,t,s,e),!this.callbacks)return;this.callbacks.onSuccess({url:e.responseURL,data:s},n,t,e)}else n.retry>=a.maxRetry||o>=400&&o<499?(r.logger.error(o+" while loading "+t.url),this.callbacks.onError({code:o,text:e.statusText},t,e)):(r.logger.warn(o+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},e.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}()}}).default},t.exports=r())},vtNb:function(t,e,n){"use strict";var r=function(t){return String.fromCharCode(t)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},a=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],o=function(t){switch(t){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}},s=function(t,e){return u(e[0])||u(t[t.length-1])||(t+=i.boundryChar),t+e},u=function(t){return-1!==a.indexOf(t)},l=n("E1E9"),c=n("4abu").buildOptions;e.convert2nimn=function(t,e,n){return function t(e,n,r){if("string"==typeof n)return o(e&&e[0]&&void 0!==e[0].val?e[0].val:e,n);var a,u=void 0===(a=e)?i.missingChar:null===a?i.nilChar:!(a.child&&0===Object.keys(a.child).length&&(!a.attrsMap||0===Object.keys(a.attrsMap).length))||i.emptyChar;if(!0===u){var l="";if(Array.isArray(n)){l+=i.arrStart;var c=n[0],f=e.length;if("string"==typeof c)for(var d=0;d<f;d++){var h=o(e[d].val,c);l=s(l,h)}else for(var p=0;p<f;p++){var g=t(e[p],c,r);l=s(l,g)}l+=i.arrayEnd}else{l+=i.objStart;var v=Object.keys(n);for(var m in Array.isArray(e)&&(e=e[0]),v){var y,_=v[m];y=t(!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[_]?e.attrsMap[_]:_===r.textNodeName?e.val:e.child[_],n[_],r),l=s(l,y)}}return l}return u}(t,e,n=c(n,l.defaultOptions,l.props))}},"wnj/":function(t,e,n){var r=n("ScnH"),i=n("DbhI"),a=i.Rendition,o=i.Variant,s=i.SessionData,u=i.Key,l=i.MediaInitializationSection,c=i.DateRange,f=i.SpliceInfo,d=i.MasterPlaylist,h=i.MediaPlaylist,p=i.Segment;function g(t){return r.trim(t,'"')}function v(t){var e=r.splitAt(t,",");return{duration:r.toNumber(e[0]),title:decodeURIComponent(escape(e[1])),raw:e[0]}}function m(t){var e=r.splitAt(t,"@");return{length:r.toNumber(e[0]),offset:e[1]?r.toNumber(e[1]):-1}}function y(t,e){e.IV&&t.compatibleVersion<2&&(t.compatibleVersion=2),(e.KEYFORMAT||e.KEYFORMATVERSIONS)&&t.compatibleVersion<5&&(t.compatibleVersion=5)}function _(t){var e=r.splitByCommaWithPreservingQuotes(t),n={};return e.forEach((function(t){var e,i=tt(r.splitAt(t,"="),2),a=i[0],o=i[1],s=g(o);switch(a){case"URI":n[a]=s;break;case"START-DATE":case"END-DATE":n[a]=new Date(s);break;case"IV":n[a]=function(t){var e=r.hexToByteSequence(t);return 16!==e.length&&r.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),e}(s);break;case"BYTERANGE":n[a]=m(s);break;case"RESOLUTION":n[a]=function(t){var e=r.splitAt(t,"x");return{width:r.toNumber(e[0]),height:r.toNumber(e[1])}}(s);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":n[a]="YES"===s;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":n[a]=r.toNumber(s);break;default:n[a]=a.startsWith("SCTE35-")?r.hexToByteSequence(s):a.startsWith("X-")?(e=o).startsWith('"')?g(e):e.startsWith("0x")||e.startsWith("0X")?r.hexToByteSequence(e):r.toNumber(e):s}})),n}function b(t){r.INVALIDPLAYLIST("The file contains both media and master playlist tags.",t)}function E(t,e,n){var i,o=(i=e.attributes,new a({type:i.TYPE,uri:i.URI,groupId:i["GROUP-ID"],language:i.LANGUAGE,assocLanguage:i["ASSOC-LANGUAGE"],name:i.NAME,isDefault:i.DEFAULT,autoselect:i.AUTOSELECT,forced:i.FORCED,instreamId:i["INSTREAM-ID"],characteristics:i.CHARACTERISTICS,channels:i.CHANNELS})),s=t[r.camelify(n)],u=function(t,e){var n,r=!1,i=B(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.name===e.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";a.isDefault&&(r=!0)}}catch(o){i.e(o)}finally{i.f()}return r&&e.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(s,o);u&&r.INVALIDPLAYLIST(u),s.push(o),o.isDefault&&(t.currentRenditions[r.camelify(n)]=s.length-1)}function T(t,e,n,i,a,s){var u,l=new o({uri:n,bandwidth:e.BANDWIDTH,averageBandwidth:e["AVERAGE-BANDWIDTH"],codecs:e.CODECS,resolution:e.RESOLUTION,frameRate:e["FRAME-RATE"],hdcpLevel:e["HDCP-LEVEL"]}),c=B(t);try{for(c.s();!(u=c.n()).done;){var f=u.value;if("EXT-X-MEDIA"===f.name){var d=f.attributes,h=d.TYPE;if(h&&d["GROUP-ID"]||r.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED.",s),e[h]===d["GROUP-ID"]&&(E(l,f,h),"CLOSED-CAPTIONS"===h)){var p,g=B(l.closedCaptions);try{for(g.s();!(p=g.n()).done;){var v=p.value.instreamId;if(v&&v.startsWith("SERVICE")&&a.compatibleVersion<7){a.compatibleVersion=7;break}}}catch(m){g.e(m)}finally{g.f()}}}}}catch(m){c.e(m)}finally{c.f()}return function(t,e,n){["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(i){"CLOSED-CAPTIONS"===i&&"NONE"===t[i]?(n.isClosedCaptionsNone=!0,e.closedCaptions=[]):t[i]&&!e[r.camelify(i)].find((function(e){return e.groupId===t[i]}))&&r.INVALIDPLAYLIST("".concat(i," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(i,"."))}))}(e,l,a),l.isIFrameOnly=i,l}function S(t,e){if(t.method!==e.method)return!1;if(t.uri!==e.uri)return!1;if(t.iv){if(!e.iv)return!1;if(t.iv.length!==e.iv.length)return!1;for(var n=0;n<t.iv.length;n++)if(t.iv[n]!==e.iv[n])return!1}else if(e.iv)return!1;return t.format===e.format&&t.formatVersion===e.formatVersion}function w(t,e,n,i,a,o,s){for(var d=new p({uri:e,mediaSequenceNumber:a,discontinuitySequence:o}),h=function(e){var n=t[e],i=n.name,a=n.value,o=n.attributes;if("EXTINF"===i)a.raw.includes(".")&&s.compatibleVersion<3&&(s.compatibleVersion=3),Math.round(a.duration)>s.targetDuration&&r.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),d.duration=a.duration,d.title=a.title;else if("EXT-X-BYTERANGE"===i)s.compatibleVersion<4&&(s.compatibleVersion=4),d.byterange=a;else if("EXT-X-DISCONTINUITY"===i)d.discontinuity=!0;else if("EXT-X-KEY"===i)y(s,o),d.key=new u({method:o.METHOD,uri:o.URI,iv:o.IV,format:o.KEYFORMAT,formatVersion:o.KEYFORMATVERSIONS});else if("EXT-X-MAP"===i)s.compatibleVersion<5&&(s.compatibleVersion=5),s.hasMap=!0,d.map=new l({uri:o.URI,byterange:o.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===i)d.programDateTime=a;else if("EXT-X-DATERANGE"===i){var h={};Object.keys(o).forEach((function(t){(t.startsWith("SCTE35-")||t.startsWith("X-"))&&(h[t]=o[t])})),d.dateRange=new c({id:o.ID,classId:o.CLASS,start:o["START-DATE"],end:o["END-DATE"],duration:o.DURATION,plannedDuration:o["PLANNED-DURATION"],endOnNext:o["END-ON-NEXT"],attributes:h})}else"EXT-X-CUE-OUT"===i?d.markers.push(new f({type:"OUT",duration:a})):"EXT-X-CUE-IN"===i?d.markers.push(new f({type:"IN"})):"EXT-X-CUE-OUT-CONT"!==i&&"EXT-X-CUE"!==i&&"EXT-OATCLS-SCTE35"!==i&&"EXT-X-ASSET"!==i&&"EXT-X-SCTE35"!==i||d.markers.push(new f({type:"RAW",tagName:i,value:a}))},g=n;g<=i;g++)h(g);return d}t.exports=function(t){var e={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},n=function(t,e){var n;return e.isMasterPlaylist?n=function(t,e){var n,i=new d,a=B(t.entries());try{for(a.s();!(n=a.n()).done;){var o=tt(n.value,2),l=o[0],c=o[1],f=c.name,h=c.value,p=c.attributes;if("EXT-X-VERSION"===f)i.version=h;else if("EXT-X-STREAM-INF"===f){var g=t[l+1];("string"!=typeof g||g.startsWith("#EXT"))&&r.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line",l);var v=T(t,p,g,!1,e,l);v&&i.variants.push(v)}else if("EXT-X-I-FRAME-STREAM-INF"===f){var m=T(t,p,p.URI,!0,e,l);m&&i.variants.push(m)}else"EXT-X-SESSION-DATA"===f?function(){var t=new s({id:p["DATA-ID"],value:p.VALUE,uri:p.URI,language:p.LANGUAGE});i.sessionDataList.find((function(e){return e.id===t.id&&e.language===t.language}))&&r.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute.",l),i.sessionDataList.push(t)}():"EXT-X-SESSION-KEY"===f?function(){"NONE"===p.METHOD&&r.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE",l);var t=new u({method:p.METHOD,uri:p.URI,iv:p.IV,format:p.KEYFORMAT,formatVersion:p.KEYFORMATVERSIONS});i.sessionKeyList.find((function(e){return S(e,t)}))&&r.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values.",l),y(e,p),i.sessionKeyList.push(t)}():"EXT-X-INDEPENDENT-SEGMENTS"===f?(i.independentSegments&&r.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",l),i.independentSegments=!0):"EXT-X-START"===f&&(i.start&&r.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist",l),"number"!=typeof p["TIME-OFFSET"]&&r.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED",l),i.start={offset:p["TIME-OFFSET"],precise:p.PRECISE||!1})}}catch(E){a.e(E)}finally{a.f()}if(e.isClosedCaptionsNone){var _,b=B(i.variants);try{for(b.s();!(_=b.n()).done;){_.value.closedCaptions.length>0&&r.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE",index)}}catch(E){b.e(E)}finally{b.f()}}return i}(t,e):!(n=function(t,e){var n,i=new h,a=-1,o=0,s=!1,u=0,l=null,c=null,f=B(t.entries());try{for(f.s();!(n=f.n()).done;){var d=tt(n.value,2),p=d[0],g=d[1],v=g.name,m=g.value,y=g.attributes;if("Segment"!==g.category){if("EXT-X-VERSION"===v)void 0===i.version?i.version=m:r.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.",p);else if("EXT-X-TARGETDURATION"===v)i.targetDuration=e.targetDuration=m;else if("EXT-X-MEDIA-SEQUENCE"===v)i.segments.length>0&&r.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",p),i.mediaSequenceBase=o=m;else if("EXT-X-DISCONTINUITY-SEQUENCE"===v)i.segments.length>0&&r.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",p),s&&r.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag.",p),i.discontinuitySequenceBase=u=m;else if("EXT-X-ENDLIST"===v)i.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===v)i.playlistType=m;else if("EXT-X-I-FRAMES-ONLY"===v)e.compatibleVersion<4&&(e.compatibleVersion=4),i.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===v)i.independentSegments&&r.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",p),i.independentSegments=!0;else if("EXT-X-START"===v)i.start&&r.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist",p),"number"!=typeof y["TIME-OFFSET"]&&r.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED",p),i.start={offset:y["TIME-OFFSET"],precise:y.PRECISE||!1};else if("string"==typeof g){-1===a&&r.INVALIDPLAYLIST("A URI line is not preceded by any segment tags",p),i.targetDuration||r.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED",p);var _=w(t,g,a,p-1,o++,u,e);if(_){var b=_.discontinuity,E=_.key,T=_.map,S=_.byterange,A=_.uri;if(b&&(_.discontinuitySequence=++u),E?l=E:l&&(_.key=l),T?c=T:c&&(_.map=c),S&&-1===S.offset){var x=i.segments;if(x.length>0){var C=x[x.length-1];C.byterange&&C.uri===A?S.offset=C.byterange.offset+C.byterange.length:r.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource",p)}else r.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file",p)}i.segments.push(_)}a=-1}}else-1===a&&(a=p),"EXT-X-DISCONTINUITY"===v&&(s=!0)}}catch(D){f.e(D)}finally{f.f()}return function(t){for(var e=new Map,n=new Map,i=!1,a=!1,o=t.length-1;o>=0;o--){var s=t[o],u=s.programDateTime,l=s.dateRange;if(u&&(a=!0),l){i=!0,l.endOnNext&&(l.end||l.duration)&&r.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");var c=l.start.getTime(),f=l.duration||0;l.end&&l.duration&&c+1e3*f!==l.end.getTime()&&r.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),l.endOnNext&&(l.end=e.get(l.classId)),e.set(l.classId,l.start);var d=l.end?l.end.getTime():l.start.getTime()+1e3*(l.duration||0),h=n.get(l.classId);if(h){var p,g=B(h);try{for(g.s();!(p=g.n()).done;){var v=p.value;(v.start<=c&&v.end>c||v.start>=c&&v.start<d)&&r.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap")}}catch(D){g.e(D)}finally{g.f()}h.push({start:c,end:d})}else n.set(l.classId,[{start:c,end:d}])}}i&&!a&&r.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(i.segments),i}(t,e)).isIFrame&&e.hasMap&&e.compatibleVersion<6&&(e.compatibleVersion=6),e.compatibleVersion>1&&(!n.version||n.version<e.compatibleVersion)&&r.INVALIDPLAYLIST("EXT-X-VERSION needs to be ".concat(e.compatibleVersion," or higher.")),n}(function(t,e){var n=[];return t.split("\n").forEach((function(t){var i=t.trim();if(i)if(i.startsWith("#")){if(i.startsWith("#EXT")){var a=function(t,e,n){var i=tt(function(t){var e=t.indexOf(":");return-1===e?[t.slice(1).trim(),null]:[t.slice(1,e).trim(),t.slice(e+1).trim()]}(t),2),a=i[0],o=i[1],s=function(t){switch(t){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(a);if(function(t,e,n){if("Segment"===t||"MediaPlaylist"===t)return void 0===e.isMasterPlaylist?void(e.isMasterPlaylist=!1):void(e.isMasterPlaylist&&b(n));if("MasterPlaylist"===t){if(void 0===e.isMasterPlaylist)return void(e.isMasterPlaylist=!0);!1===e.isMasterPlaylist&&b(n)}}(s,e,n),"Unknown"===s)return null;"MediaPlaylist"===s&&(e.hash[a]&&r.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist",n),e.hash[a]=!0);var u=tt(function(t,e,n){switch(t){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-CUE-OUT":return[r.toNumber(e),null];case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":var i=r.toInteger(e);return isNaN(i)&&r.INVALIDPLAYLIST("The ".concat(t," tag MUST be an integer."),n),[i,null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":return[null,_(e)];case"EXTINF":return[v(e),null];case"EXT-X-BYTERANGE":return[m(e),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(e),null];case"EXT-X-PLAYLIST-TYPE":default:return[e,null]}}(a,o,n),2);return{name:a,category:s,value:u[0],attributes:u[1]}}(i,e,n.length);return void(a&&n.push(a))}}else n.push(i)})),0!==n.length&&"EXTM3U"===n[0].name||r.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line.",0),n}(t,e),e);return n.source=t,n}},zUnb:function(a,s,F){"use strict";function V(t){return"function"==typeof t}F.r(s);var H=!1,q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else H&&console.log("RxJS: Back to a better error behavior. Thank you. <3");H=t},get useDeprecatedSynchronousErrorHandling(){return H}};function Q(t){setTimeout((function(){throw t}),0)}var et={closed:!0,next:function(t){},error:function(t){if(q.useDeprecatedSynchronousErrorHandling)throw t;Q(t)},complete:function(){}},nt=Array.isArray||function(t){return t&&"number"==typeof t.length};function rt(t){return null!==t&&"object"==typeof t}var it,at=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),ot=((it=function(){function t(e){J(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return Y(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a)n[a].remove(this);if(V(r))try{r.call(this)}catch(l){e=l instanceof at?st(l.errors):[l]}if(nt(i))for(var o=-1,s=i.length;++o<s;){var u=i[o];if(rt(u))try{u.unsubscribe()}catch(l){e=e||[],l instanceof at?e=e.concat(st(l.errors)):e.push(l)}}if(e)throw new at(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=function(t){return t.closed=!0,t}(new it),it);function st(t){return t.reduce((function(t,e){return t.concat(e instanceof at?e.errors:e)}),[])}var ut="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),lt=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;switch(J(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=et;break;case 1:if(!t){a.destination=et;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(W(a))):(a.syncErrorThrowable=!0,a.destination=new ct(W(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new ct(W(a),t,r,i)}return a}return Y(n,[{key:ut,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,U(Z(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(ot),ct=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o,s;J(this,n),(o=e.call(this))._parentSubscriber=t;var u=W(o);return V(r)?s=r:r&&(s=r.next,i=r.error,a=r.complete,r!==et&&(V((u=Object.create(r)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(W(o)))),o._context=u,o._next=s,o._error=i,o._complete=a,o}return Y(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;q.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=q.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Q(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Q(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};q.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),q.useDeprecatedSynchronousErrorHandling)throw n;Q(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return q.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Q(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(lt),ft="function"==typeof Symbol&&Symbol.observable||"@@observable";function dt(t){return t}var ht,pt=((ht=function(){function t(e){J(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return Y(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof lt)return t;if(t[ut])return t[ut]()}return t||e||n?new lt(t,e,n):new lt(et)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||q.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),q.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){q.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof lt?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=gt(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:ft,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?dt:1===r.length?r[0]:function(t){return r.reduce((function(t,e){return e(t)}),t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=gt(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new ht(t)},ht);function gt(t){if(t||(t=q.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var vt,mt=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),yt=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return Y(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(ot),_t=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).destination=t,r}return n}(lt),bt=((vt=function(t){z(n,t);var e=X(n);function n(){var t;return J(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Y(n,[{key:ut,value:function(){return new _t(this)}},{key:"lift",value:function(t){var e=new Et(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new mt;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new mt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new mt;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new mt;return U(Z(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new mt;return this.hasError?(t.error(this.thrownError),ot.EMPTY):this.isStopped?(t.complete(),ot.EMPTY):(this.observers.push(t),new yt(this,t))}},{key:"asObservable",value:function(){var t=new pt;return t.source=this,t}}]),n}(pt)).create=function(t,e){return new Et(t,e)},vt),Et=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this)).destination=t,i.source=r,i}return Y(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):ot.EMPTY}}]),n}(bt);function Tt(t){return t&&"function"==typeof t.schedule}var St=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this)).parent=t,a.outerValue=r,a.outerIndex=i,a.index=0,a}return Y(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(lt),wt=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};var At="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",xt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ct(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Dt=function(t){if(t&&"function"==typeof t[ft])return r=t,function(t){var e=r[ft]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(xt(t))return wt(t);if(Ct(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Q),t};if(t&&"function"==typeof t[At])return e=t,function(t){for(var n=e[At]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,i=rt(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(i," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function It(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new St(t,n,r);if(!i.closed)return e instanceof pt?e.subscribe(i):Dt(e)(i)}var Rt=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(lt);function kt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ot(t,e))}}var Ot=function(){function t(e,n){J(this,t),this.project=e,this.thisArg=n}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Pt(t,this.project,this.thisArg))}}]),t}(),Pt=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t)).project=r,a.count=0,a.thisArg=i||W(a),a}return Y(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(lt);function Mt(t,e){return new pt((function(n){var r=new ot,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function Lt(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[ft]}(t))return function(t,e){return new pt((function(n){var r=new ot;return r.add(e.schedule((function(){var i=t[ft]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Ct(t))return function(t,e){return new pt((function(n){var r=new ot;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(xt(t))return Mt(t,e);if(function(t){return t&&"function"==typeof t[At]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new pt((function(n){var r,i=new ot;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[At](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(a){return void n.error(a)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof pt?t:new pt(Dt(t))}function Nt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(Nt((function(n,r){return Lt(t(n,r)).pipe(kt((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new Ft(t,n))})}var Ft=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;J(this,t),this.project=e,this.concurrent=n}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new jt(t,this.project,this.concurrent))}}]),t}(),jt=function(t){z(n,t);var e=X(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return J(this,n),(i=e.call(this,t)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Y(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=new St(this,e,n),i=this.destination;i.add(r);var a=It(this,t,void 0,void 0,r);a!==r&&i.add(a)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(Rt);function Bt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Nt(dt,t)}function Ut(t,e){return e?Mt(t,e):new pt(wt(t))}function Vt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,a=e[e.length-1];return Tt(a)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof a&&(r=e.pop()),null===i&&1===e.length&&e[0]instanceof pt?e[0]:Bt(r)(Ut(e,i))}function Gt(){return function(t){return t.lift(new Yt(t))}}var Ht,Yt=function(){function t(e){J(this,t),this.connectable=e}return Y(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new zt(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),zt=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).connectable=r,i}return Y(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(lt),qt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Ht=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return Y(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new ot).add(this.source.subscribe(new Xt(this.getSubject(),this))),t.closed&&(this._connection=null,t=ot.EMPTY)),t}},{key:"refCount",value:function(){return Gt()(this)}}]),n}(pt).prototype)._subscribe},_isComplete:{value:Ht._isComplete,writable:!0},getSubject:{value:Ht.getSubject},connect:{value:Ht.connect},refCount:{value:Ht.refCount}},Xt=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).connectable=r,i}return Y(n,[{key:"_error",value:function(t){this._unsubscribe(),U(Z(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),U(Z(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(_t);function Kt(){return new bt}function Wt(){return function(t){return Gt()((e=Kt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,qt);return r.source=t,r.subjectFactory=n,r})(t));var e}}function Qt(t){return{toString:t}.toString()}function $t(t,e,n){return Qt((function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var a=G(i,e);return o.annotation=a,o;function o(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}))}var Zt=$t("Inject",(function(t){return{token:t}})),Jt=$t("Optional"),te=$t("Self"),ee=$t("SkipSelf"),ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function re(t){for(var e in t)if(t[e]===re)return e;throw Error("Could not find renamed property on target object.")}function ie(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ae(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function oe(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function se(t){return ue(t,t[ce])||ue(t,t[he])}function ue(t,e){return e&&e.token===t?e:null}function le(t){return t&&(t.hasOwnProperty(fe)||t.hasOwnProperty(pe))?t[fe]:null}var ce=re({"\u0275prov":re}),fe=re({"\u0275inj":re}),de=re({"\u0275provFallback":re}),he=re({ngInjectableDef:re}),pe=re({ngInjectorDef:re});function ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ve(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var me=re({__forward_ref__:re});function ye(t){return t.__forward_ref__=ye,t.toString=function(){return ge(this())},t}function _e(t){return be(t)?t():t}function be(t){return"function"==typeof t&&t.hasOwnProperty(me)&&t.__forward_ref__===ye}var Ee,Te="undefined"!=typeof globalThis&&globalThis,Se="undefined"!=typeof window&&window,we="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ae="undefined"!=typeof global&&global,xe=Te||Ae||Se||we,Ce=re({"\u0275cmp":re}),De=re({"\u0275dir":re}),Ie=re({"\u0275pipe":re}),Re=re({"\u0275mod":re}),ke=re({"\u0275loc":re}),Oe=re({"\u0275fac":re}),Pe=re({__NG_ELEMENT_ID__:re}),Me=function(){function t(e,n){J(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return Y(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),Le=new Me("INJECTOR",-1),Ne={},Fe=/\n/gm,je=re({provide:String,useValue:re}),Be=void 0;function Ue(t){var e=Be;return Be=t,e}function Ve(t){var e=Ee;return Ee=t,e}function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.Default;if(void 0===Be)throw new Error("inject() must be called from an injection context");return null===Be?Ye(t,void 0,e):Be.get(t,e&ne.Optional?null:void 0,e)}function He(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.Default;return(Ee||Ge)(_e(t),e)}function Ye(t,e,n){var r=se(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(ge(t),"]"))}function ze(t){for(var e=[],n=0;n<t.length;n++){var r=_e(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=ne.Default,o=0;o<r.length;o++){var s=r[o];s instanceof Jt||"Optional"===s.ngMetadataName||s===Jt?a|=ne.Optional:s instanceof ee||"SkipSelf"===s.ngMetadataName||s===ee?a|=ne.SkipSelf:s instanceof te||"Self"===s.ngMetadataName||s===te?a|=ne.Self:i=s instanceof Zt||s===Zt?s.token:s}e.push(He(i,a))}else e.push(He(r))}return e}var qe=function(){function t(){J(this,t)}return Y(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ne;if(e===Ne){var n=new Error("NullInjectorError: No provider for ".concat(ge(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),Xe=function t(){J(this,t)},Ke=function t(){J(this,t)};function We(t,e){for(var n=0;n<t.length;n++)e.push(t[n])}function Qe(t,e){t.forEach((function(t){return Array.isArray(t)?Qe(t,e):e(t)}))}function $e(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ze(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Je(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function tn(t,e,n){var r=nn(t,e);return r>=0?t[1|r]=n:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r=~r,e,n),r}function en(t,e){var n=nn(t,e);if(n>=0)return t[1|n]}function nn(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var a=r+(i-r>>1),o=t[a<<1];if(e===o)return a<<1;o>e?i=a:r=a+1}return~(i<<1)}(t,e)}var rn,an=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),on=((rn={})[rn.Emulated=0]="Emulated",rn[rn.Native=1]="Native",rn[rn.None=2]="None",rn[rn.ShadowDom=3]="ShadowDom",rn),sn={},un=[],ln=0;function cn(t){return Qt((function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===an.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||un,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||on.Emulated,id:"c",styles:t.styles||un,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,a=t.pipes;return n.id+=ln++,n.inputs=gn(t.inputs,e),n.outputs=gn(t.outputs),i&&i.forEach((function(t){return t(n)})),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(fn)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(dn)}:null,n}))}function fn(t){return mn(t)||function(t){return t[De]||null}(t)}function dn(t){return function(t){return t[Ie]||null}(t)}var hn={};function pn(t){var e={type:t.type,bootstrap:t.bootstrap||un,declarations:t.declarations||un,imports:t.imports||un,exports:t.exports||un,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Qt((function(){hn[t.id]=t.type})),e}function gn(t,e){if(null==t)return sn;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,e&&(e[i]=a)}return n}var vn=cn;function mn(t){return t[Ce]||null}function yn(t,e){return t.hasOwnProperty(Oe)?t[Oe]:null}function _n(t,e){var n=t[Re]||null;if(!n&&!0===e)throw new Error("Type ".concat(ge(t)," does not have '\u0275mod' property."));return n}function bn(t){return Array.isArray(t)&&"object"==typeof t[1]}function En(t){return Array.isArray(t)&&!0===t[1]}function Tn(t){return 0!=(8&t.flags)}function Sn(t){return 2==(2&t.flags)}function wn(t){return 1==(1&t.flags)}function An(t){return null!==t.template}function xn(t){return 0!=(512&t[2])}var Cn=function(){function t(e,n,r){J(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return Y(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Dn(){return In}function In(t){return t.type.prototype.ngOnChanges&&(t.setInput=kn),Rn}function Rn(){var t=On(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===sn)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kn(t,e,n,r){var i=On(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:sn,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new Cn(u&&u.currentValue,e,o===sn),t[r]=e}function On(t){return t.__ngSimpleChanges__||null}Dn.ngInherit=!0;var Pn=void 0;function Mn(){return void 0!==Pn?Pn:"undefined"!=typeof document?document:void 0}function Ln(t){return!!t.listen}var Nn={createRenderer:function(t,e){return Mn()}};function Fn(t){for(;Array.isArray(t);)t=t[0];return t}function jn(t,e){return Fn(e[t+20])}function Bn(t,e){return Fn(e[t.index])}function Un(t,e){return t.data[e+20]}function Vn(t,e){var n=e[t];return bn(n)?n:n[0]}function Gn(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Hn(t){return 4==(4&t[2])}function Yn(t){return 128==(128&t[2])}function zn(t,e){return null===t||null==e?null:t[e]}function qn(t){t[18]=0}function Xn(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var Kn={lFrame:pr(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Wn(){return Kn.bindingsEnabled}function Qn(){return Kn.lFrame.lView}function $n(){return Kn.lFrame.tView}function Zn(t){Kn.lFrame.contextLView=t}function Jn(){return Kn.lFrame.previousOrParentTNode}function tr(t,e){Kn.lFrame.previousOrParentTNode=t,Kn.lFrame.isParent=e}function er(){return Kn.lFrame.isParent}function nr(){Kn.lFrame.isParent=!1}function rr(){return Kn.checkNoChangesMode}function ir(t){Kn.checkNoChangesMode=t}function ar(){return Kn.lFrame.bindingIndex++}function or(t){var e=Kn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function sr(t,e){var n=Kn.lFrame;n.bindingIndex=n.bindingRootIndex=t,ur(e)}function ur(t){Kn.lFrame.currentDirectiveIndex=t}function lr(){return Kn.lFrame.currentQueryIndex}function cr(t){Kn.lFrame.currentQueryIndex=t}function fr(t,e){var n=hr();Kn.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function dr(t,e){var n=hr(),r=t[1];Kn.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function hr(){var t=Kn.lFrame,e=null===t?null:t.child;return null===e?pr(t):e}function pr(t){var e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function gr(){var t=Kn.lFrame;return Kn.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}var vr=gr;function mr(){var t=gr();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yr(){return Kn.lFrame.selectedIndex}function _r(t){Kn.lFrame.selectedIndex=t}function br(){var t=Kn.lFrame;return Un(t.tView,t.selectedIndex)}function Er(){Kn.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Tr(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,l=i.ngOnDestroy;a&&(t.contentHooks||(t.contentHooks=[])).push(-n,a),o&&((t.contentHooks||(t.contentHooks=[])).push(n,o),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,o)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function Sr(t,e,n){xr(t,e,3,n)}function wr(t,e,n,r){(3&t[2])===n&&xr(t,e,n,r)}function Ar(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function xr(t,e,n,r){for(var i=null!=r?r:-1,a=0,o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(a=e[o],null!=r&&a>=r)break}else e[o]<0&&(t[18]+=65536),(a<i||-1==i)&&(Cr(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Cr(t,e,n,r){var i=n[r]<0,a=n[r+1],o=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,a.call(o)):a.call(o)}var Dr=function t(e,n,r){J(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Ir(t,e,n){for(var r=Ln(t),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,o):e.setAttributeNS(o,s,u)}else{var l=a,c=n[++i];kr(l)?r&&t.setProperty(e,l,c):r?t.setAttribute(e,l,c):e.setAttribute(l,c),i++}}return i}function Rr(t){return 3===t||4===t||6===t}function kr(t){return 64===t.charCodeAt(0)}function Or(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Pr(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Pr(t,e,n,r,i){var a=0,o=t.length;if(-1===e)o=-1;else for(;a<t.length;){var s=t[a++];if("number"==typeof s){if(s===e){o=-1;break}if(s>e){o=a-1;break}}}for(;a<t.length;){var u=t[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[a+1]=i));if(r===t[a+1])return void(t[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(t.splice(o,0,e),a=o+1),t.splice(a++,0,n),null!==r&&t.splice(a++,0,r),null!==i&&t.splice(a++,0,i)}function Mr(t){return-1!==t}function Lr(t){return 32767&t}function Nr(t){return t>>16}function Fr(t,e){for(var n=Nr(t),r=e;n>0;)r=r[15],n--;return r}function jr(t){return"string"==typeof t?t:null==t?"":""+t}function Br(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():jr(t)}var Ur=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xe);function Vr(t){return t instanceof Function?t():t}var Gr=!0;function Hr(t){var e=Gr;return Gr=t,e}var Yr=0;function zr(t,e){var n=Xr(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,qr(r.data,t),qr(e,null),qr(r.blueprint,null));var i=Kr(t,e),a=t.injectorIndex;if(Mr(i))for(var o=Lr(i),s=Fr(i,e),u=s[1].data,l=0;l<8;l++)e[a+l]=s[o+l]|u[o+l];return e[a+8]=i,a}function qr(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Xr(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Kr(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=e[6],r=1;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Wr(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pe)&&(r=n[Pe]),null==r&&(r=n[Pe]=Yr++);var i=255&r,a=1<<i,o=64&i,s=32&i,u=e.data;128&i?o?s?u[t+7]|=a:u[t+6]|=a:s?u[t+5]|=a:u[t+4]|=a:o?s?u[t+3]|=a:u[t+2]|=a:s?u[t+1]|=a:u[t]|=a}(t,e,n)}function Qr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ne.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var a=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(Pe)?t[Pe]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof a){fr(e,t);try{var o=a();if(null!=o||r&ne.Optional)return o;throw new Error("No provider for ".concat(Br(n),"!"))}finally{vr()}}else if("number"==typeof a){if(-1===a)return new ri(t,e);var s=null,u=Xr(t,e),l=-1,c=r&ne.Host?e[16][6]:null;for((-1===u||r&ne.SkipSelf)&&(l=-1===u?Kr(t,e):e[u+8],ni(r,!1)?(s=e[1],u=Lr(l),e=Fr(l,e)):u=-1);-1!==u;){l=e[u+8];var f=e[1];if(ei(a,u,f.data)){var d=Zr(u,e,n,s,r,c);if(d!==$r)return d}ni(r,e[1].data[u+8]===c)&&ei(a,u,e)?(s=f,u=Lr(l),e=Fr(l,e)):u=-1}}}if(r&ne.Optional&&void 0===i&&(i=null),0==(r&(ne.Self|ne.Host))){var h=e[9],p=Ve(void 0);try{return h?h.get(n,i,r&ne.Optional):Ye(n,i,r&ne.Optional)}finally{Ve(p)}}if(r&ne.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(Br(n),"]"))}var $r={};function Zr(t,e,n,r,i,a){var o=e[1],s=o.data[t+8],u=Jr(s,o,n,null==r?Sn(s)&&Gr:r!=o&&3===s.type,i&ne.Host&&a===s);return null!==u?ti(e,o,u,s):$r}function Jr(t,e,n,r,i){for(var a=t.providerIndexes,o=e.data,s=1048575&a,u=t.directiveStart,l=a>>20,c=i?s+l:t.directiveEnd,f=r?s:s+l;f<c;f++){var d=o[f];if(f<u&&n===d||f>=u&&d.type===n)return f}if(i){var h=o[u];if(h&&An(h)&&h.type===n)return u}return null}function ti(t,e,n,r){var i=t[n],a=e.data;if(i instanceof Dr){var o=i;if(o.resolving)throw new Error("Circular dep for "+Br(a[n]));var s,u=Hr(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(s=Ve(o.injectImpl)),fr(t,r);try{i=t[n]=o.factory(void 0,a,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var s=In(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,a[n],e)}finally{o.injectImpl&&Ve(s),Hr(u),o.resolving=!1,vr()}}return i}function ei(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function ni(t,e){return!(t&ne.Self||t&ne.Host&&e)}var ri=function(){function t(e,n){J(this,t),this._tNode=e,this._lView=n}return Y(t,[{key:"get",value:function(t,e){return Qr(this._tNode,this._lView,t,void 0,e)}}]),t}();function ii(t){var e=t;if(be(t))return function(){var t=ii(_e(e));return t?t():null};var n=yn(e);if(null===n){var r=le(e);n=r&&r.factory}return n||null}function ai(t){return Qt((function(){for(var e=t.prototype.constructor,n=e[Oe]||ii(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var a=i[Oe]||ii(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(t){return new t}}))}function oi(t){return t.ngDebugContext}function si(t){return t.ngOriginalError}function ui(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var li=function(){function t(){J(this,t),this._console=console}return Y(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ui}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?oi(t)?oi(t):this._findContext(si(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=si(t);e&&si(e);)e=si(e);return e}}]),t}(),ci=function(){function t(e){J(this,t),this.changingThisBreaksApplicationSecurity=e}return Y(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}();function fi(t){return t instanceof ci?t.changingThisBreaksApplicationSecurity:t}function di(t,e){var n=function(t){return t instanceof ci&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===e}var hi=!0,pi=!1;function gi(){return pi=!0,hi}var vi=function(){function t(){J(this,t)}return Y(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}}]),t}(),mi=function(){function t(e){if(J(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return Y(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;var n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),yi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,_i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bi(t){return(t=String(t)).match(yi)||t.match(_i)?t:(gi()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function Ei(t){var e,n={},r=B(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Ti(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(t[s]=!0)}return t}var Si,wi=Ei("area,br,col,hr,img,wbr"),Ai=Ei("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xi=Ei("rp,rt"),Ci=Ti(xi,Ai),Di=Ti(wi,Ti(Ai,Ei("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ti(xi,Ei("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ci),Ii=Ei("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ri=Ei("srcset"),ki=Ti(Ii,Ri,Ei("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ei("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oi=Ei("script,style,template"),Pi=function(){function t(){J(this,t),this.sanitizedSomething=!1,this.buf=[]}return Y(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!Di.hasOwnProperty(e))return this.sanitizedSomething=!0,!Oi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,s=o.toLowerCase();if(ki.hasOwnProperty(s)){var u=a.value;Ii[s]&&(u=bi(u)),Ri[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return bi(t.trim())})).join(", ")),this.buf.push(" ",o,'="',Ni(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();Di.hasOwnProperty(e)&&!wi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(Ni(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),Mi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Li=/([^\#-~ |!])/g;function Ni(t){return t.replace(/&/g,"&amp;").replace(Mi,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Li,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fi(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ji=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Bi(t){var e=Vi();return e?e.sanitize(ji.HTML,t)||"":di(t,"HTML")?fi(t):function(t,e){var n=null;try{Si=Si||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new vi:new mi(t)}(t);var r=e?String(e):"";n=Si.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=Si.getInertBodyElement(r)}while(r!==a);var o=new Pi,s=o.sanitizeChildren(Fi(n)||n);return gi()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=Fi(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(Mn(),jr(t))}function Ui(t){var e=Vi();return e?e.sanitize(ji.URL,t)||"":di(t,"URL")?fi(t):bi(jr(t))}function Vi(){var t=Qn();return t&&t[12]}function Gi(t,e){t.__ngContext__=e}function Hi(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function Yi(){throw new Error("Cannot mix multi providers and regular providers")}function zi(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var a=e.length;if(i+a===r||t.charCodeAt(i+a)<=32)return i}n=i+1}}function qi(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==zi((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Xi(t){return 0===t.type&&"ng-template"!==t.tagName}function Ki(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Wi(t,e,n){for(var r=4,i=t.attrs||[],a=function(t){for(var e=0;e<t.length;e++)if(Rr(t[e]))return e;return t.length}(i),o=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ki(t,u,n)||""===u&&1===e.length){if(Qi(r))return!1;o=!0}}else{var l=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!qi(t.attrs,l,n)){if(Qi(r))return!1;o=!0}continue}var c=$i(8&r?"class":u,i,Xi(t),n);if(-1===c){if(Qi(r))return!1;o=!0;continue}if(""!==l){var f;f=c>a?"":i[c+1].toLowerCase();var d=8&r?f:null;if(d&&-1!==zi(d,l,0)||2&r&&l!==f){if(Qi(r))return!1;o=!0}}}}else{if(!o&&!Qi(r)&&!Qi(u))return!1;if(o&&Qi(u))continue;o=!1,r=u|1&r}}return Qi(r)||o}function Qi(t){return 0==(1&t)}function $i(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var a=!1;i<e.length;){var o=e[i];if(o===t)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Zi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Wi(t,e[r],n))return!0;return!1}function Ji(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function ta(t,e){return t?":not("+e.trim()+")":e}function ea(t){for(var e=t[0],n=1,r=2,i="",a=!1;n<t.length;){var o=t[n];if("string"==typeof o)if(2&r){var s=t[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Qi(o)||(e+=ta(a,i),i=""),r=o,a=a||!Qi(r);n++}return""!==i&&(e+=ta(a,i)),e}var na={};function ra(t){var e=t[3];return En(e)?e[3]:e}function ia(t){return oa(t[13])}function aa(t){return oa(t[4])}function oa(t){for(;null!==t&&!En(t);)t=t[4];return t}function sa(t){ua($n(),Qn(),yr()+t,rr())}function ua(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&Sr(e,i,n)}else{var a=t.preOrderHooks;null!==a&&wr(e,a,0,n)}_r(n)}function la(t,e){return t<<17|e<<2}function ca(t){return t>>17&32767}function fa(t){return 2|t}function da(t){return(131068&t)>>2}function ha(t,e){return-131069&t|e<<2}function pa(t){return 1|t}function ga(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=t.data[a];cr(i),o.contentQueries(2,e[a],a)}}}function va(t,e,n){return Ln(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ma(t,e,n,r,i,a,o,s,u,l){var c=e.blueprint.slice();return c[0]=i,c[2]=140|r,qn(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[11]=s||t&&t[11],c[12]=u||t&&t[12]||null,c[9]=l||t&&t[9]||null,c[6]=a,c[16]=2==e.type?t[16]:c,c}function ya(t,e,n,r,i,a){var o=n+20,s=t.data[o]||function(t,e,n,r,i,a){var o=Jn(),s=er(),u=s?o:o&&o.parent,l=t.data[n]=Ia(0,u&&u!==e?u:null,r,n,i,a);return null===t.firstChild&&(t.firstChild=l),o&&(!s||null!=o.child||null===l.parent&&2!==o.type?s||(o.next=l):o.child=l),l}(t,e,o,r,i,a);return tr(s,!0),s}function _a(t,e,n){dr(e,e[6]);try{var r=t.viewQuery;null!==r&&Za(1,r,n);var i=t.template;null!==i&&Ta(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ga(t,e),t.staticViewQueries&&Za(2,t.viewQuery,n);var a=t.components;null!==a&&function(t,e){for(var n=0;n<e.length;n++)Xa(t,e[n])}(e,a)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),o}finally{e[2]&=-5,mr()}}function ba(t,e,n,r){var i=e[2];if(256!=(256&i)){dr(e,e[6]);var a=rr();try{qn(e),Kn.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ta(t,e,n,2,r);var o=3==(3&i);if(!a)if(o){var s=t.preOrderCheckHooks;null!==s&&Sr(e,s,null)}else{var u=t.preOrderHooks;null!==u&&wr(e,u,0,null),Ar(e,0)}if(function(t){for(var e=ia(t);null!==e;e=aa(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&Xn(a,1),i[2]|=1024}}(e),function(t){for(var e=ia(t);null!==e;e=aa(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];Yn(r)&&ba(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&ga(t,e),!a)if(o){var l=t.contentCheckHooks;null!==l&&Sr(e,l)}else{var c=t.contentHooks;null!==c&&wr(e,c,1),Ar(e,1)}!function(t,e){try{var n=t.expandoInstructions;if(null!==n)for(var r=t.expandoStartIndex,i=-1,a=0;a<n.length;a++){var o=n[a];"number"==typeof o?o<=0?(_r(0-o),i=r+=9+n[++a]):r+=o:(null!==o&&(sr(r,i),o(2,e[i])),i++)}}finally{_r(-1)}}(t,e);var f=t.components;null!==f&&function(t,e){for(var n=0;n<e.length;n++)qa(t,e[n])}(e,f);var d=t.viewQuery;if(null!==d&&Za(2,d,r),!a)if(o){var h=t.viewCheckHooks;null!==h&&Sr(e,h)}else{var p=t.viewHooks;null!==p&&wr(e,p,2),Ar(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Xn(e[3],-1))}finally{mr()}}}function Ea(t,e,n,r){var i=e[10],a=!rr(),o=Hn(e);try{a&&!o&&i.begin&&i.begin(),o&&_a(t,e,r),ba(t,e,n,r)}finally{a&&!o&&i.end&&i.end()}}function Ta(t,e,n,r,i){var a=yr();try{_r(-1),2&r&&e.length>20&&ua(t,e,0,rr()),n(r,i)}finally{_r(a)}}function Sa(t,e,n){if(Tn(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var a=t.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function wa(t,e,n){Wn()&&(function(t,e,n,r){var i=n.directiveStart,a=n.directiveEnd;t.firstCreatePass||zr(n,e),Gi(r,e);for(var o=n.initialInputs,s=i;s<a;s++){var u=t.data[s],l=An(u);l&&Va(e,n,u);var c=ti(e,t,s,n);Gi(c,e),null!==o&&Ha(0,s-i,c,u,0,o),l&&(Vn(n.index,e)[8]=c)}}(t,e,n,Bn(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,a=t.expandoInstructions,o=t.firstCreatePass,s=n.index-20,u=Kn.lFrame.currentDirectiveIndex;try{_r(s);for(var l=r;l<i;l++){var c=t.data[l],f=e[l];ur(l),null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs?La(c,f):o&&a.push(null)}}finally{_r(-1),ur(u)}}(t,e,n))}function Aa(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bn,r=e.localNames;if(null!==r)for(var i=e.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(e,t):t[o];t[i++]=s}}function xa(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ca(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ca(t,e,n,r,i,a,o,s,u,l){var c=20+r,f=c+i,d=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:na);return n}(c,f);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:s,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:f,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:l,incompleteFirstPass:!1}}function Da(t,e,n,r){var i=to(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Ia(t,e,n,r,i,a){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ra(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ka(t,e,n,r,i,a,o,s){var u,l,c=Bn(e,n),f=e.inputs;!s&&null!=f&&(u=f[r])?(no(t,n,u,r,i),Sn(e)&&function(t,e){var n=Vn(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(l=r)?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l,i=null!=o?o(i,e.tagName||"",r):i,Ln(a)?a.setProperty(c,r,i):kr(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Oa(t,e,n,r){var i=!1;if(Wn()){var a=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];Zi(n,o.selectors,!1)&&(i||(i=[]),Wr(zr(n,e),t,o.type),An(o)?(2&n.flags&&Hi(n),Fa(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==a){var s=0;i=!0,Ba(n,t.data.length,a.length);for(var u=0;u<a.length;u++){var l=a[u];l.providersResolver&&l.providersResolver(l)}Na(t,n,a.length);for(var c=!1,f=!1,d=0;d<a.length;d++){var h=a[d];n.mergedAttrs=Or(n.mergedAttrs,h.hostAttrs),Ua(t,e,h),ja(t.data.length-1,h,o),null!==h.contentQueries&&(n.flags|=8),null===h.hostBindings&&null===h.hostAttrs&&0===h.hostVars||(n.flags|=128);var p=h.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),c=!0),f||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),f=!0),Pa(t,h),s+=h.hostVars}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,a=[],o=null,s=null,u=e.directiveStart;u<n;u++){var l=r[u],c=l.inputs,f=null===i||Xi(e)?null:Ya(c,i);a.push(f),o=Ra(c,u,o),s=Ra(l.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=o,e.outputs=s}(t,n),Ma(t,e,s)}o&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var a=n[e[i+1]];if(null==a)throw new Error("Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],a)}}(n,r,o)}return n.mergedAttrs=Or(n.mergedAttrs,n.attrs),i}function Pa(t,e){var n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Ma(t,e,n){for(var r=0;r<n;r++)e.push(na),t.blueprint.push(na),t.data.push(null)}function La(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Na(t,e,n){var r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Fa(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ja(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;An(e)&&(n[""]=t)}}function Ba(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ua(t,e,n){t.data.push(n);var r=n.factory||(n.factory=yn(n.type)),i=new Dr(r,An(n),null);t.blueprint.push(i),e.push(i)}function Va(t,e,n){var r=Bn(e,t),i=xa(n),a=t[10],o=Ka(t,ma(t,i,null,n.onPush?64:16,r,e,a,a.createRenderer(r,n)));t[e.index]=o}function Ga(t,e,n,r,i,a){var o=Bn(t,e),s=e[11];if(null==r)Ln(s)?s.removeAttribute(o,n,a):o.removeAttribute(n);else{var u=null==i?jr(r):i(r,t.tagName||"",n);Ln(s)?s.setAttribute(o,n,u,a):a?o.setAttributeNS(a,n,u):o.setAttribute(n,u)}}function Ha(t,e,n,r,i,a){var o=a[e];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var l=o[u++],c=o[u++],f=o[u++];null!==s?r.setInput(n,f,l,c):n[c]=f}}function Ya(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function za(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function qa(t,e){var n=Vn(e,t);if(Yn(n)){var r=n[1];80&n[2]?ba(r,n,r.template,n[8]):n[5]>0&&function t(e){for(var n=ia(e);null!==n;n=aa(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var a=i[1];ba(a,i,a.template,i[8])}else i[5]>0&&t(i)}var o=e[1].components;if(null!==o)for(var s=0;s<o.length;s++){var u=Vn(o[s],e);Yn(u)&&u[5]>0&&t(u)}}(n)}}function Xa(t,e){var n=Vn(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),_a(r,n,n[8])}function Ka(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Wa(t){for(;t;){t[2]|=64;var e=ra(t);if(xn(t)&&!e)return t;t=e}return null}function Qa(t,e,n){var r=e[10];r.begin&&r.begin();try{ba(t,e,t.template,n)}catch(i){throw eo(e,i),i}finally{r.end&&r.end()}}function $a(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Gn(n),i=r[1];Ea(i,r,i.template,n)}}(t[8])}function Za(t,e,n){cr(0),e(t,n)}var Ja=Promise.resolve(null);function to(t){return t[7]||(t[7]=[])}function eo(t,e){var n=t[9],r=n?n.get(li,null):null;r&&r.handleError(e)}function no(t,e,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=e[o],l=t.data[o];null!==l.setInput?l.setInput(u,i,r,s):u[s]=i}}function ro(t,e){var n=e[3];return-1===t.index?En(n)?n:null:n}function io(t,e){var n=ro(t,e);return n?mo(e[11],n[7]):null}function ao(t,e,n,r,i){if(null!=r){var a,o=!1;En(r)?a=r:bn(r)&&(o=!0,r=r[0]);var s=Fn(r);0===t&&null!==n?null==i?go(e,n,s):po(e,n,s,i||null):1===t&&null!==n?po(e,n,s,i||null):2===t?function(t,e,n){var r=mo(t,e);r&&function(t,e,n,r){Ln(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,o):3===t&&e.destroyNode(s),null!=a&&function(t,e,n,r,i){var a=n[7];a!==Fn(n)&&ao(e,t,r,a,i);for(var o=10;o<n.length;o++){var s=n[o];To(s[1],s,t,e,r,a)}}(e,t,a,n,i)}}function oo(t,e,n,r){var i=io(t.node,e);i&&To(t,e,e[11],n?1:2,i,r)}function so(t,e){var n=t[9],r=n.indexOf(e);1024&e[2]&&Xn(e[3],-1),n.splice(r,1)}function uo(t,e){if(!(t.length<=10)){var n=10+e,r=t[n];if(r){var i=r[17];null!==i&&i!==t&&so(i,r),e>0&&(t[n-1][4]=r[4]);var a=Ze(t,10+e);oo(r[1],r,!1,null);var o=a[19];null!==o&&o.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function lo(t,e){if(!(256&e[2])){var n=e[11];Ln(n)&&n.destroyNode&&To(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return fo(t[1],t);for(;e;){var n=null;if(bn(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)bn(e)&&fo(e[1],e),e=co(e,t);null===e&&(e=t),bn(e)&&fo(e[1],e),n=e&&e[4]}e=n}}(e)}}function co(t,e){var n;return bn(t)&&(n=t[6])&&2===n.type?ro(n,t):t[3]===e?null:t[3]}function fo(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Dr)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2)a[o+1].call(i[a[o]]);else a.call(i)}}}(t,e),function(t,e){var n=t.cleanup;if(null!==n){for(var r=e[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var a=n[i+1],o="function"==typeof a?a(e):Fn(e[a]),s=r[n[i+2]],u=n[i+3];"boolean"==typeof u?o.removeEventListener(n[i],s,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);e[7]=null}}(t,e);var n=e[6];n&&3===n.type&&Ln(e[11])&&e[11].destroy();var r=e[17];if(null!==r&&En(e[3])){r!==e[3]&&so(r,e);var i=e[19];null!==i&&i.detachView(t)}}}function ho(t,e,n){for(var r=e.parent;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){var i=n[6];return 2===i.type?io(i,n):n[0]}if(e&&5===e.type&&4&e.flags)return Bn(e,n).parentNode;if(2&r.flags){var a=t.data,o=a[a[r.index].directiveStart].encapsulation;if(o!==on.ShadowDom&&o!==on.Native)return null}return Bn(r,n)}function po(t,e,n,r){Ln(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function go(t,e,n){Ln(t)?t.appendChild(e,n):e.appendChild(n)}function vo(t,e,n,r){null!==r?po(t,e,n,r):go(t,e,n)}function mo(t,e){return Ln(t)?t.parentNode(e):e.parentNode}function yo(t,e){if(2===t.type){var n=ro(t,e);return null===n?null:bo(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Bn(t,e):null}function _o(t,e,n,r){var i=ho(t,r,e);if(null!=i){var a=e[11],o=yo(r.parent||e[6],e);if(Array.isArray(n))for(var s=0;s<n.length;s++)vo(a,i,n[s],o);else vo(a,i,n,o)}}function bo(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){var r=n.type;if(3===r)return Bn(n,e);if(0===r)return bo(-1,e[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return t(e,i);var a=e[n.index];return En(a)?bo(-1,a):Fn(a)}var o=e[16],s=o[6],u=ra(o),l=s.projection[n.projection];return null!=l?t(u,l):t(e,n.next)}return null}(r,i)}return e[7]}function Eo(t,e,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;o&&0===e&&(s&&Gi(Fn(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Eo(t,e,n.child,r,i,a,!1),ao(e,t,i,s,a)):1===u?So(t,e,r,n,i,a):ao(e,t,i,s,a)),n=o?n.projectionNext:n.next}}function To(t,e,n,r,i,a){Eo(n,r,t.node.child,e,i,a,!1)}function So(t,e,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)ao(e,t,i,s[u],a);else Eo(t,e,s,o[3],i,a,!0)}function wo(t,e,n){Ln(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ao(t,e,n){Ln(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}var xo,Co,Do,Io=function(){function t(e,n){J(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return Y(t,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}lo(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){Da(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Wa(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Qa(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){ir(!0);try{Qa(t,e,n)}finally{ir(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,To(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"rootNodes",get:function(){var t=this._lView;return null==t[0]?function t(e,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var o=n[r.index];if(null!==o&&i.push(Fn(o)),En(o))for(var s=10;s<o.length;s++){var u=o[s],l=u[1].firstChild;null!==l&&t(u[1],u,l,i)}var c=r.type;if(4===c||5===c)t(e,n,r.child,i);else if(1===c){var f=n[16],d=f[6].projection[r.projection];if(Array.isArray(d))i.push.apply(i,j(d));else{var h=ra(f);t(h[1],h,d,i,!0)}}r=a?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),t}(),Ro=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t))._view=t,r}return Y(n,[{key:"detectChanges",value:function(){$a(this._view)}},{key:"checkNoChanges",value:function(){!function(t){ir(!0);try{$a(t)}finally{ir(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Io);function ko(t,e,n){return xo||(xo=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return n}(t)),new xo(Bn(e,n))}function Oo(t,e,n,r){return Co||(Co=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this))._declarationView=t,a._declarationTContainer=r,a.elementRef=i,a}return Y(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=ma(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),_a(e,n,t),new Io(n)}}]),n}(t)),0===n.type?new Co(r,n,ko(e,n,r)):null}function Po(t,e,n,r){var i;Do||(Do=function(t){z(r,t);var n=X(r);function r(t,e,i){var a;return J(this,r),(a=n.call(this))._lContainer=t,a._hostTNode=e,a._hostView=i,a}return Y(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var a=n||this.parentInjector;if(!i&&null==t.ngModule&&a){var o=a.get(Xe,null);o&&(i=o)}var s=t.create(a,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),En(n[3])){var i=this.indexOf(t);if(-1!==i)this.detach(i);else{var a=n[3],o=new Do(a,a[6],a[3]);o.detach(o.indexOf(t))}}var s=this._adjustIndex(e);return function(t,e,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=e),r<a-10?(e[4]=n[i],$e(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var o=e[17];null!==o&&n!==o&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,this._lContainer,s),oo(r,n,!0,bo(s,this._lContainer)),t.attachToViewContainerRef(this),$e(this._lContainer[8],s,t),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=this._lContainer[8];return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=uo(this._lContainer,e);n&&(Ze(this._lContainer[8],e),lo(n[1],n))}},{key:"detach",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=uo(this._lContainer,e);return n&&null!=Ze(this._lContainer[8],e)?new Io(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return ko(e,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new ri(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var t=Kr(this._hostTNode,this._hostView),e=Fr(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var a=Nr(t),o=e,s=e[6];a>1;)s=(o=o[15])[6],a--;return s}(t,this._hostView,this._hostTNode);return Mr(t)&&null!=n?new ri(n,e):new ri(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),r}(t));var a=r[n.index];if(En(a))i=a;else{var o;if(4===n.type)o=Fn(a);else if(o=r[11].createComment(""),xn(r)){var s=r[11],u=Bn(n,r);po(s,mo(s,u),o,function(t,e){return Ln(t)?t.nextSibling(e):e.nextSibling}(s,u))}else _o(r[1],r,o,n);r[n.index]=i=za(a,r,o,n),Ka(r,i)}return new Do(i,n,r)}var Mo=function(){var t=function t(){J(this,t)};return t.__NG_ELEMENT_ID__=function(){return Lo()},t}(),Lo=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&Sn(t)){var r=Vn(t.index,e);return new Io(r,r)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Io(e[16],e):null}(Jn(),Qn(),t)},No=Function,Fo=new Me("Set Injector scope."),jo={},Bo={},Uo=[],Vo=void 0;function Go(){return void 0===Vo&&(Vo=new qe),Vo}function Ho(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Yo(t,n,e||Go(),r)}var Yo=function(){function t(e,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;J(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&Qe(n,(function(t){return i.processProvider(t,e,n)})),Qe([e],(function(t){return i.processInjectorType(t,[],o)})),this.records.set(Le,Xo(void 0,this));var s=this.records.get(Fo);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof e?null:ge(e))}return Y(t,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(t){return t.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ne,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne.Default;this.assertNotDestroyed();var r,i=Ue(this);try{if(!(n&ne.SkipSelf)){var a=this.records.get(t);if(void 0===a){var o=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Me)&&se(t);a=o&&this.injectableDefInScope(o)?Xo(zo(t),jo):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&ne.Self?Go():this.parent).get(t,e=n&ne.Optional&&e===Ne?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(ge(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=ge(e);if(Array.isArray(e))i=e.map(ge).join(" -> ");else if("object"==typeof e){var a=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):ge(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(Fe,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{Ue(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach((function(e){return t.get(e)}))}},{key:"toString",value:function(){var t=[];return this.records.forEach((function(e,n){return t.push(ge(n))})),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=_e(t)))return!1;var i=le(t),a=null==i&&t.ngModule||void 0,o=void 0===a?t:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=le(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{Qe(i.imports,(function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))}))}finally{}if(void 0!==u)for(var l=function(t){var e=u[t],n=e.ngModule,i=e.providers;Qe(i,(function(t){return r.processProvider(t,n,i||Uo)}))},c=0;c<u.length;c++)l(c)}this.injectorDefTypes.add(o),this.records.set(o,Xo(i.factory,jo));var f=i.providers;if(null!=f&&!s){var d=t;Qe(f,(function(t){return r.processProvider(t,d,f)}))}return void 0!==a&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=Wo(t=_e(t))?t:_e(t&&t.provide),i=function(t,e,n){return Ko(t)?Xo(void 0,t.useValue):Xo(qo(t,e,n),jo)}(t,e,n);if(Wo(t)||!0!==t.multi){var a=this.records.get(r);a&&void 0!==a.multi&&Yi()}else{var o=this.records.get(r);o?void 0===o.multi&&Yi():((o=Xo(void 0,jo,!0)).factory=function(){return ze(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===Bo?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(ge(t)):e.value===jo&&(e.value=Bo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function zo(t){var e=se(t),n=null!==e?e.factory:yn(t);if(null!==n)return n;var r=le(t);if(null!==r)return r.factory;if(t instanceof Me)throw new Error("Token ".concat(ge(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=Je(e,"?");throw new Error("Can't resolve all parameters for ".concat(ge(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[ce]||t[he]||t[de]&&t[de]());if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function qo(t,e,n){var r,i=void 0;if(Wo(t)){var a=_e(t);return yn(a)||zo(a)}if(Ko(t))i=function(){return _e(t.useValue)};else if((r=t)&&r.useFactory)i=function(){return t.useFactory.apply(t,j(ze(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))i=function(){return He(_e(t.useExisting))};else{var o=_e(t&&(t.useClass||t.provide));if(o||function(t,e,n){var r="";throw t&&e&&(r=" - only instances of Provider and Type are allowed, got: [".concat(e.map((function(t){return t==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(ge(t),"'")+r)}(e,n,t),!function(t){return!!t.deps}(t))return yn(o)||zo(o);i=function(){return G(o,j(ze(t.deps)))}}return i}function Xo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function Ko(t){return null!==t&&"object"==typeof t&&je in t}function Wo(t){return"function"==typeof t}var Qo=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ho(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},$o=function(){var t=function(){function t(){J(this,t)}return Y(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Qo(t,e,""):Qo(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Ne,t.NULL=new qe,t.\u0275prov=ae({token:t,providedIn:"any",factory:function(){return He(Le)}}),t.__NG_ELEMENT_ID__=-1,t}(),Zo=new Me("AnalyzeForEntryComponents");function Jo(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,a=0;if(null!==e)for(var o=0;o<e.length;o++){var s=e[o];"number"==typeof s?a=s:1==a?i=ve(i,s):2==a&&(r=ve(r,s+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ts=null;function es(){if(!ts){var t=xe.Symbol;if(t&&t.iterator)ts=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ts=r)}}return ts}function ns(t){return!!rs(t)&&(Array.isArray(t)||!(t instanceof Map)&&es()in t)}function rs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function is(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function as(t,e,n,r){var i=Qn();return is(i,ar(),e)&&($n(),Ga(br(),i,t,e,n,r)),as}function os(t,e,n,r){return is(t,ar(),n)?e+jr(n)+r:na}function ss(t,e,n,r,i,a,o,s){var u=Qn(),l=$n(),c=t+20,f=l.firstCreatePass?function(t,e,n,r,i,a,o,s,u){var l=e.consts,c=ya(e,n[6],t,0,o||null,zn(l,s));Oa(e,n,c,zn(l,u)),Tr(e,c);var f=c.tViews=Ca(2,-1,r,i,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l),d=Ia(0,null,2,-1,null,null);return d.injectorIndex=c.injectorIndex,f.node=d,null!==e.queries&&(e.queries.template(e,c),f.queries=e.queries.embeddedTView(c)),c}(t,l,u,e,n,r,i,a,o):l.data[c];tr(f,!1);var d=u[11].createComment("");_o(l,u,d,f),Gi(d,u),Ka(u,u[c]=za(d,u,d,f)),wn(f)&&wa(l,u,f),null!=o&&Aa(u,f,s)}function us(t){return function(t,e){return t[e+20]}(Kn.lFrame.contextLView,t)}function ls(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.Default,n=Qn();return null==n?He(t,e):Qr(Jn(),n,_e(t),e)}function cs(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Rr(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===e)return n[i+1];i+=2}}return null}(Jn(),t)}function fs(t,e,n){var r=Qn();return is(r,ar(),e)&&ka($n(),br(),r,t,e,r[11],n,!1),fs}function ds(t,e,n,r,i){var a=i?"class":"style";no(t,n,e.inputs[a],a,r)}function hs(t,e,n,r){var i=Qn(),a=$n(),o=20+t,s=i[11],u=i[o]=va(e,s,Kn.lFrame.currentNamespace),l=a.firstCreatePass?function(t,e,n,r,i,a,o){var s=e.consts,u=zn(s,a),l=ya(e,n[6],t,3,i,u);return Oa(e,n,l,zn(s,o)),null!==l.attrs&&Jo(l,l.attrs,!1),null!==l.mergedAttrs&&Jo(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(t,a,i,0,e,n,r):a.data[o];tr(l,!0);var c=l.mergedAttrs;null!==c&&Ir(s,u,c);var f=l.classes;null!==f&&Ao(s,u,f);var d=l.styles;null!==d&&wo(s,u,d),_o(a,i,u,l),0===Kn.lFrame.elementDepthCount&&Gi(u,i),Kn.lFrame.elementDepthCount++,wn(l)&&(wa(a,i,l),Sa(a,l,i)),null!==r&&Aa(i,l)}function ps(){var t=Jn();er()?nr():tr(t=t.parent,!1);var e=t;Kn.lFrame.elementDepthCount--;var n=$n();n.firstCreatePass&&(Tr(n,t),Tn(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ds(n,e,Qn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ds(n,e,Qn(),e.stylesWithoutHost,!1)}function gs(t,e,n,r){hs(t,e,n,r),ps()}function vs(t,e,n){var r=Qn(),i=$n(),a=t+20,o=i.firstCreatePass?function(t,e,n,r,i){var a=e.consts,o=zn(a,r),s=ya(e,n[6],t,4,"ng-container",o);return null!==o&&Jo(s,o,!0),Oa(e,n,s,zn(a,i)),null!==e.queries&&e.queries.elementStart(e,s),s}(t,i,r,e,n):i.data[a];tr(o,!0);var s=r[a]=r[11].createComment("");_o(i,r,s,o),Gi(s,r),wn(o)&&(wa(i,r,o),Sa(i,o,r)),null!=n&&Aa(r,o)}function ms(){var t=Jn(),e=$n();er()?nr():tr(t=t.parent,!1),e.firstCreatePass&&(Tr(e,t),Tn(t)&&e.queries.elementEnd(t))}function ys(){return Qn()}function _s(t){return!!t&&"function"==typeof t.then}function bs(t){return!!t&&"function"==typeof t.subscribe}function Es(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Qn(),a=$n(),o=Jn();return function(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=wn(r),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),c=to(e),f=!0;if(3===r.type){var d=Bn(r,e),h=s?s(d):sn,p=h.target||d,g=c.length,v=s?function(t){return s(Fn(t[r.index])).target}:r.index;if(Ln(n)){var m=null;if(!s&&u&&(m=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=e[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}(t,e,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,f=!1;else{a=Ss(r,e,a,!1);var y=n.listen(h.name||p,i,a);c.push(a,y),l&&l.push(i,v,g,g+1)}}else a=Ss(r,e,a,!0),p.addEventListener(i,a,o),c.push(a),l&&l.push(i,v,g,o)}var _,b=r.outputs;if(f&&null!==b&&(_=b[i])){var E=_.length;if(E)for(var T=0;T<E;T+=2){var S=e[_[T]][_[T+1]].subscribe(a),w=c.length;c.push(a,S),l&&l.push(i,r.index,w,-(w+1))}}}(a,i,i[11],o,t,e,n,r),Es}function Ts(t,e,n){try{return!1!==e(n)}catch(r){return eo(t,r),!1}}function Ss(t,e,n,r){return function i(a){if(a===Function)return n;var o=2&t.flags?Vn(t.index,e):e;0==(32&e[2])&&Wa(o);for(var s=Ts(e,n,a),u=i.__ngNextListenerFn__;u;)s=Ts(e,u,a)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function ws(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(Kn.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Kn.lFrame.contextLView))[8]}(t)}function As(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var a=e[i];if("*"!==a){if(null===r?Zi(t,a,!0):Ji(r,a))return i}else n=i}return n}function xs(t){var e=Qn()[16][6];if(!e.projection)for(var n=e.projection=Je(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var a=t?As(i,t):0;null!==a&&(r[a]?r[a].projectionNext=i:n[a]=i,r[a]=i),i=i.next}}function Cs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Qn(),i=$n(),a=ya(i,r[6],t,1,null,n||null);null===a.projection&&(a.projection=e),nr(),function(t,e,n){So(e[11],0,e,n,ho(t,n,e),yo(n.parent||e[6],e))}(i,r,a)}function Ds(t,e,n){return Is(t,"",e,"",n),Ds}function Is(t,e,n,r,i){var a=Qn(),o=os(a,e,n,r);return o!==na&&ka($n(),br(),a,t,o,a[11],i,!1),Is}var Rs=[];function ks(t,e,n,r,i){for(var a=t[n+1],o=null===e,s=r?ca(a):da(a),u=!1;0!==s&&(!1===u||o);){var l=t[s+1];Os(t[s],e)&&(u=!0,t[s+1]=r?pa(l):fa(l)),s=r?ca(l):da(l)}u&&(t[n+1]=r?fa(a):pa(a))}function Os(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&nn(t,e)>=0}var Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ms(t){return t.substring(Ps.key,Ps.keyEnd)}function Ls(t,e){var n=Ps.textEnd;return n===e?-1:(e=Ps.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ps.key=e,n),Ns(t,e,n))}function Ns(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Fs(t,e){return function(t,e,n,r){var i=Qn(),a=$n(),o=or(2);a.firstUpdatePass&&Vs(a,t,o,!0),e!==na&&is(i,o,e)&&Ys(a,a.data[yr()+20],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=ge(fi(t))),t}(e),!0,o)}(t,e),Fs}function js(t){!function(t,e,n,r){var i=$n(),a=or(2);i.firstUpdatePass&&Vs(i,null,a,!0);var o=Qn();if(n!==na&&is(o,a,n)){var s=i.data[yr()+20];if(Xs(s,!0)&&!Us(i,a)){var u=s.classesWithoutHost;null!==u&&(n=ve(u,n||"")),ds(i,s,o,n,!0)}else!function(t,e,n,r,i,a,o,s){i===na&&(i=Rs);for(var u=0,l=0,c=0<i.length?i[0]:null,f=0<a.length?a[0]:null;null!==c||null!==f;){var d=u<i.length?i[u+1]:void 0,h=l<a.length?a[l+1]:void 0,p=null,g=void 0;c===f?(u+=2,l+=2,d!==h&&(p=f,g=h)):null===f||null!==c&&c<f?(u+=2,p=c):(l+=2,p=f,g=h),null!==p&&Ys(t,e,n,r,p,g,!0,s),c=u<i.length?i[u]:null,f=l<a.length?a[l]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(t,e,n){if(null==n||""===n)return Rs;var r=[],i=fi(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)t(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,a)}}(tn,Bs,t)}function Bs(t,e){for(var n=function(t){return function(t){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=t.length}(t),Ls(t,Ns(t,0,Ps.textEnd))}(e);n>=0;n=Ls(e,n))tn(t,Ms(e),!0)}function Us(t,e){return e>=t.expandoStartIndex}function Vs(t,e,n,r){var i=t.data;if(null===i[n+1]){var a=i[yr()+20],o=Us(t,n);Xs(a,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){var i=function(t){var e=Kn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t),a=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Hs(n=Gs(null,t,e,n,r),e.attrs,r),a=null);else{var o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Gs(i,t,e,n,r),null===a){var s=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==da(r))return t[ca(r)]}(t,e,r);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[ca(n?e.classBindings:e.styleBindings)]=r}(t,e,r,s=Hs(s=Gs(null,t,e,s[1],r),e.attrs,r))}else a=function(t,e,n){for(var r=void 0,i=e.directiveEnd,a=1+e.directiveStylingLast;a<i;a++)r=Hs(r,t[a].hostAttrs,n);return Hs(r,e.attrs,n)}(t,e,r)}return void 0!==a&&(r?e.residualClasses=a:e.residualStyles=a),n}(i,a,e,r),function(t,e,n,r,i,a){var o=a?e.classBindings:e.styleBindings,s=ca(o),u=da(o);t[r]=n;var l,c=!1;if(Array.isArray(n)){var f=n;(null===(l=f[1])||nn(f,l)>0)&&(c=!0)}else l=n;if(i)if(0!==u){var d=ca(t[s+1]);t[r+1]=la(d,s),0!==d&&(t[d+1]=ha(t[d+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=la(s,0),0!==s&&(t[s+1]=ha(t[s+1],r)),s=r;else t[r+1]=la(u,0),0===s?s=r:t[u+1]=ha(t[u+1],r),u=r;c&&(t[r+1]=fa(t[r+1])),ks(t,l,r,!0),ks(t,l,r,!1),function(t,e,n,r,i){var a=i?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof e&&nn(a,e)>=0&&(n[r+1]=pa(n[r+1]))}(e,l,t,r,a),o=la(s,u),a?e.classBindings=o:e.styleBindings=o}(i,a,e,n,o,r)}}function Gs(t,e,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=Hs(r,(a=e[s]).hostAttrs,i),a!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function Hs(t,e,n){var r=n?1:2,i=-1;if(null!==e)for(var a=0;a<e.length;a++){var o=e[a];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),tn(t,o,!!n||e[++a]))}return void 0===t?null:t}function Ys(t,e,n,r,i,a,o,s){if(3===e.type){var u=t.data,l=u[s+1];qs(1==(1&l)?zs(u,e,n,i,da(l),o):void 0)||(qs(a)||2==(2&l)&&(a=zs(u,null,n,i,s,o)),function(t,e,n,r,i){var a=Ln(t);if(e)i?a?t.addClass(n,r):n.classList.add(r):a?t.removeClass(n,r):n.classList.remove(r);else{var o=-1==r.indexOf("-")?void 0:2;null==i?a?t.removeStyle(n,r,o):n.style.removeProperty(r):a?t.setStyle(n,r,i,o):n.style.setProperty(r,i)}}(r,o,jn(yr(),n),i,a))}}function zs(t,e,n,r,i,a){for(var o=null===e,s=void 0;i>0;){var u=t[i],l=Array.isArray(u),c=l?u[1]:u,f=null===c,d=n[i+1];d===na&&(d=f?Rs:void 0);var h=f?en(d,r):c===r?d:void 0;if(l&&!qs(h)&&(h=en(u,r)),qs(h)&&(s=h,o))return s;var p=t[i+1];i=o?ca(p):da(p)}if(null!==e){var g=a?e.residualClasses:e.residualStyles;null!=g&&(s=en(g,r))}return s}function qs(t){return void 0!==t}function Xs(t,e){return 0!=(t.flags&(e?16:32))}function Ks(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Qn(),r=$n(),i=t+20,a=r.firstCreatePass?ya(r,n[6],t,3,null,null):r.data[i],o=n[i]=function(t,e){return Ln(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);_o(r,n,o,a),tr(a,!1)}function Ws(t){return Qs("",t,""),Ws}function Qs(t,e,n){var r=Qn(),i=os(r,t,e,n);return i!==na&&function(t,e,n){var r=jn(e,t),i=t[11];Ln(i)?i.setValue(r,n):r.textContent=n}(r,yr(),i),Qs}function $s(t,e,n){var r=Qn();return is(r,ar(),e)&&ka($n(),br(),r,t,e,r[11],n,!0),$s}function Zs(t,e){var n=Gn(t)[1],r=n.data.length-1;Tr(n,{directiveStart:r,directiveEnd:r+1})}function Js(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(An(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var a=t;a.inputs=tu(t.inputs),a.declaredInputs=tu(t.declaredInputs),a.outputs=tu(t.outputs);var o=i.hostBindings;o&&ru(t,o);var s=i.viewQuery,u=i.contentQueries;if(s&&eu(t,s),u&&nu(t,u),ie(t.inputs,i.inputs),ie(t.declaredInputs,i.declaredInputs),ie(t.outputs,i.outputs),An(i)&&i.data.animation){var l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}var c=i.features;if(c)for(var f=0;f<c.length;f++){var d=c[f];d&&d.ngInherit&&d(t),d===Js&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Or(i.hostAttrs,n=Or(n,i.hostAttrs))}}(r)}function tu(t){return t===sn?{}:t===un?[]:t}function eu(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function nu(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function ru(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}function iu(t,e,n,r,i){if(t=_e(t),Array.isArray(t))for(var a=0;a<t.length;a++)iu(t[a],e,n,r,i);else{var o=$n(),s=Qn(),u=Wo(t)?t:_e(t.provide),l=qo(t),c=Jn(),f=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Wo(t)||!t.multi){var p=new Dr(l,i,ls),g=su(u,e,i?f:f+h,d);-1===g?(Wr(zr(c,s),o,u),au(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(p),s.push(p)):(n[g]=p,s[g]=p)}else{var v=su(u,e,f+h,d),m=su(u,e,f,f+h),y=v>=0&&n[v],_=m>=0&&n[m];if(i&&!_||!i&&!y){Wr(zr(c,s),o,u);var b=function(t,e,n,r,i){var a=new Dr(t,n,ls);return a.multi=[],a.index=e,a.componentProviders=0,ou(a,i,r&&!n),a}(i?lu:uu,n.length,i,r,l);!i&&_&&(n[m].providerFactory=b),au(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(b),s.push(b)}else au(o,t,v>-1?v:m,ou(n[i?m:v],l,!i&&r));!i&&r&&_&&n[m].componentProviders++}}}function au(t,e,n,r){var i=Wo(e);if(i||e.useClass){var a=(e.useClass||e).prototype.ngOnDestroy;if(a){var o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=o.indexOf(n);-1===s?o.push(n,[r,a]):o[s+1].push(r,a)}else o.push(n,a)}}}function ou(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function su(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function uu(t,e,n,r){return cu(this.multi,[])}function lu(t,e,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=ti(n,n[1],this.providerFactory.index,r);cu(a,i=s.slice(0,o));for(var u=o;u<s.length;u++)i.push(s[u])}else cu(a,i=[]);return i}function cu(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function fu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=$n();if(r.firstCreatePass){var i=An(t);iu(n,r.data,r.blueprint,i,!0),iu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var du=function t(){J(this,t)},hu=function(){function t(){J(this,t)}return Y(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(ge(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),pu=function(){var t=function t(){J(this,t)};return t.NULL=new hu,t}(),gu=function(){var t=function t(e){J(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return vu(t)},t}(),vu=function(t){return ko(t,Jn(),Qn())},mu=function t(){J(this,t)},yu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),_u=function(){var t=function t(){J(this,t)};return t.__NG_ELEMENT_ID__=function(){return bu()},t}(),bu=function(){var t=Qn(),e=Vn(Jn().index,t);return function(t){var e=t[11];if(Ln(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(bn(e)?e:t)},Eu=function(){var t=function t(){J(this,t)};return t.\u0275prov=ae({token:t,providedIn:"root",factory:function(){return null}}),t}(),Tu=new function t(e){J(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}("10.0.12"),Su=function(){function t(){J(this,t)}return Y(t,[{key:"supports",value:function(t){return ns(t)}},{key:"create",value:function(t){return new Au(t)}}]),t}(),wu=function(t,e){return e},Au=function(){function t(e){J(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wu}return Y(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var a=!n||e&&e.currentIndex<Iu(n,r,i)?e:n,o=Iu(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(e=e._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var f=c<i.length?i[c]:i[c]=0,d=f+c;l<=d&&d<u&&(i[c]=f+1)}i[a.previousIndex]=l-u}}o!==s&&t(a,o,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!ns(t))throw new Error("Error trying to diff '".concat(ge(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[es()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==a&&Object.is(a.trackById,i)?(o&&(a=e._verifyReinsertion(a,t,i,n)),Object.is(a.item,t)||e._addIdentityChange(a,t)):(a=e._mismatch(a,t,i,n),o=!0),a=a._next,n++})),this.length=n;return this._truncate(a),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xu(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Du),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Du),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),xu=function t(e,n){J(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Cu=function(){function t(){J(this,t),this._head=null,this._tail=null}return Y(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Du=function(){function t(){J(this,t),this.map=new Map}return Y(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Cu,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function Iu(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Ru=function(){function t(){J(this,t)}return Y(t,[{key:"supports",value:function(t){return t instanceof Map||rs(t)}},{key:"create",value:function(){return new ku}}]),t}(),ku=function(){function t(){J(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Y(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||rs(t)))throw new Error("Error trying to diff '".concat(ge(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new Ou(t);return this._records.set(t,a),a.currentValue=e,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),Ou=function t(e){J(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Pu=function(){var t=function(){function t(e){J(this,t),this.factories=e}return Y(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ee,new Jt]]}}}]),t}();return t.\u0275prov=ae({token:t,providedIn:"root",factory:function(){return new t([new Su])}}),t}(),Mu=function(){var t=function(){function t(e){J(this,t),this.factories=e}return Y(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ee,new Jt]]}}}]),t}();return t.\u0275prov=ae({token:t,providedIn:"root",factory:function(){return new t([new Ru])}}),t}(),Lu=[new Ru],Nu=new Pu([new Su]),Fu=new Mu(Lu),ju=function(){var t=function t(){J(this,t)};return t.__NG_ELEMENT_ID__=function(){return Bu(t,gu)},t}(),Bu=function(t,e){return Oo(t,e,Jn(),Qn())},Uu=function(){var t=function t(){J(this,t)};return t.__NG_ELEMENT_ID__=function(){return Vu(t,gu)},t}(),Vu=function(t,e){return Po(t,e,Jn(),Qn())},Gu={},Hu=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this)).ngModule=t,r}return Y(n,[{key:"resolveComponentFactory",value:function(t){var e=mn(t);return new qu(e,this.ngModule)}}]),n}(pu);function Yu(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var zu=new Me("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ur}}),qu=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(ea).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return Y(n,[{key:"create",value:function(t,e,n,r){var i,a,o=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var a=t.get(n,Gu,i);return a!==Gu||r===Gu?a:e.get(n,r,i)}}}(t,r.injector):t,s=o.get(mu,Nn),u=o.get(Eu,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",f=n?function(t,e,n){if(Ln(t))return t.selectRootElement(e,n===on.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,n,this.componentDef.encapsulation):va(c,s.createRenderer(null,this.componentDef),function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h={components:[],scheduler:Ur,clean:Ja,playerHandler:null,flags:0},p=Ca(0,-1,null,1,0,null,null,null,null,null),g=ma(null,p,h,d,null,null,s,l,u,o);dr(g,null);try{var v=function(t,e,n,r,i,a){var o=n[1];n[20]=t;var s=ya(o,null,0,3,null,null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(Jo(s,u,!0),null!==t&&(Ir(i,t,u),null!==s.classes&&Ao(i,t,s.classes),null!==s.styles&&wo(i,t,s.styles)));var l=r.createRenderer(t,e),c=ma(n,xa(e),null,e.onPush?64:16,n[20],s,r,l,void 0);return o.firstCreatePass&&(Wr(zr(s,n),o,e.type),Fa(o,s),Ba(s,n.length,1)),Ka(n,c),n[20]=c}(f,this.componentDef,g,s,l);if(f)if(n)Ir(l,f,["ng-version",Tu.full]);else{var m=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var a=t[r];if("string"==typeof a)2===i?""!==a&&e.push(a,t[++r]):8===i&&n.push(a);else{if(!Qi(i))break;i=a}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,_=m.classes;y&&Ir(l,f,y),_&&_.length>0&&Ao(l,f,_.join(" "))}if(a=Un(p,0),void 0!==e)for(var b=a.projection=[],E=0;E<this.ngContentSelectors.length;E++){var T=e[E];b.push(null!=T?Array.from(T):null)}i=function(t,e,n,r,i){var a=n[1],o=function(t,e,n){var r=Jn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Na(t,r,1),Ua(t,e,n));var i=ti(e,t,e.length-1,r);Gi(i,e);var a=Bn(r,e);return a&&Gi(a,e),i}(a,n,e);r.components.push(o),t[8]=o,i&&i.forEach((function(t){return t(o,e)})),e.contentQueries&&e.contentQueries(1,o,n.length-1);var s=Jn();if(a.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){_r(s.index-20);var u=n[1];Pa(u,e),Ma(u,n,e.hostVars),La(e,o)}return o}(v,this.componentDef,g,h,[Zs]),_a(p,g,null)}finally{mr()}var S=new Xu(this.componentType,i,ko(gu,a,g),g,a);return p.node.child=a,S}},{key:"inputs",get:function(){return Yu(this.componentDef.inputs)}},{key:"outputs",get:function(){return Yu(this.componentDef.outputs)}}]),n}(du),Xu=function(t){z(n,t);var e=X(n);function n(t,r,i,a,o){var s,u,l,c;return J(this,n),(s=e.call(this)).location=i,s._rootLView=a,s._tNode=o,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new Ro(a),u=a[1],l=a,null==(c=u.node)&&(u.node=c=Ia(0,null,2,-1,null,null)),l[6]=c,s.componentType=t,s}return Y(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(t){this.destroyCbs&&this.destroyCbs.push(t)}},{key:"injector",get:function(){return new ri(this._tNode,this._rootLView)}}]),n}(function(){return function t(){J(this,t)}}()),Ku=void 0,Wu=["en",[["a","p"],["AM","PM"],Ku],[["AM","PM"],Ku,Ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ku,"{1} 'at' {0}",Ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],Qu={};function $u(t){return t in Qu||(Qu[t]=xe.ng&&xe.ng.common&&xe.ng.common.locales&&xe.ng.common.locales[t]),Qu[t]}var Zu=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function Ju(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}var tl=/\ufffd(\d+):?\d*\ufffd/gi,el=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi;function nl(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[null,null],a=t.split(tl),o=0,s=0;s<a.length;s++){var u=a[s];if(1&s){var l=parseInt(u,10);i.push(-1-l),o|=rl(l)}else""!==u&&i.push(u)}return i.push(e<<2|(n?1:0)),n&&i.push(n,r),i[0]=o,i[1]=i.length-2,i}function rl(t){return 1<<Math.min(t,31)}var il=new Map,al=function(t){z(n,t);var e=X(n);function n(t,r){var i;J(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=W(i),i.destroyCbs=[],i.componentFactoryResolver=new Hu(W(i));var a=_n(t),o=t[ke]||null;return o&&Ju(o),i._bootstrapComponents=Vr(a.bootstrap),i._r3Injector=Ho(t,r,[{provide:Xe,useValue:W(i)},{provide:pu,useValue:i.componentFactoryResolver}],ge(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return Y(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne.Default;return t===$o||t===Xe||t===Le?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(Xe),ol=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this)).moduleType=t,null!==_n(t)&&function t(e){if(null!==e.\u0275mod.id){var n=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(ge(e)," vs ").concat(ge(e.name)))})(n,il.get(n),e),il.set(n,e)}var r=e.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(e){return t(e)}))}(t),r}return Y(n,[{key:"create",value:function(t){return new al(this.moduleType,t)}}]),n}(Ke);function sl(t,e,n){var r=function(){var t=Kn.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=Qn();return i[r]===na?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}var ul=function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return J(this,n),(t=e.call(this)).__isAsync=r,t}return Y(n,[{key:"emit",value:function(t){U(Z(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,a=function(t){return null},o=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(o=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(a=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=U(Z(n.prototype),"subscribe",this).call(this,i,a,o);return t instanceof ot&&t.add(s),s}}]),n}(bt);function ll(){return this._results[es()]()}var cl=function(){function t(){J(this,t),this.dirty=!0,this._results=[],this.changes=new ul,this.length=0;var e=es(),n=t.prototype;n[e]||(n[e]=ll)}return Y(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),fl=function(){function t(e){J(this,t),this.queryList=e,this.matches=null}return Y(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),dl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J(this,t),this.queries=e}return Y(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==Cl(t,e).matches&&this.queries[e].setDirty()}}]),t}(),hl=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;J(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},pl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J(this,t),this.queries=e}return Y(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(e,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"track",value:function(t){this.queries.push(t)}},{key:"length",get:function(){return this.queries.length}}]),t}(),gl=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;J(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return Y(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,vl(e,i)),this.matchTNodeWithReadOption(t,e,Jr(e,t,i,!1,!1))}else n===ju?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Jr(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===gu||r===Uu||r===ju&&0===e.type)this.addMatch(e.index,-2);else{var i=Jr(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function vl(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ml(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?ko(gu,t,e):0===t.type?Oo(ju,gu,t,e):null}(e,t):-2===n?function(t,e,n){return n===gu?ko(gu,e,t):n===ju?Oo(ju,gu,e,t):n===Uu?Po(Uu,gu,e,t):void 0}(t,e,r):ti(t,t[1],n,e)}function yl(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var a=t.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var l=o[u];s.push(l<0?null:ml(e,a[l],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function _l(t){var e=Qn(),n=$n(),r=lr();cr(r+1);var i=Cl(n,r);if(t.dirty&&Hn(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var a=i.crossesNgTemplate?function t(e,n,r,i){var a=e.queries.getByIndex(r),o=a.matches;if(null!==o)for(var s=yl(e,n,a,r),u=0;u<o.length;u+=2){var l=o[u];if(l>0)i.push(s[u/2]);else{for(var c=o[u+1],f=n[-l],d=10;d<f.length;d++){var h=f[d];h[17]===h[3]&&t(h[1],h,c,i)}if(null!==f[9])for(var p=f[9],g=0;g<p.length;g++){var v=p[g];t(v[1],v,c,i)}}}return i}(n,e,r,[]):yl(n,e,i,r);t.reset(a),t.notifyOnChanges()}return!0}return!1}function bl(t,e,n){Tl($n(),Qn(),t,e,n,!0)}function El(t,e,n){Tl($n(),Qn(),t,e,n,!1)}function Tl(t,e,n,r,i,a){t.firstCreatePass&&(xl(t,new hl(n,r,a,i),-1),a&&(t.staticViewQueries=!0)),Al(t,e)}function Sl(t,e,n,r){!function(t,e,n,r,i,a,o,s){t.firstCreatePass&&(xl(t,new hl(n,r,!1,i),o.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s)),Al(t,e)}($n(),Qn(),e,n,r,0,Jn(),t)}function wl(){return t=Qn(),e=lr(),t[19].queries[e].queryList;var t,e}function Al(t,e){var n=new cl;Da(t,e,n,n.destroy),null===e[19]&&(e[19]=new dl),e[19].queries.push(new fl(n))}function xl(t,e,n){null===t.queries&&(t.queries=new pl),t.queries.track(new gl(e,n))}function Cl(t,e){return t.queries.getByIndex(e)}function Dl(t,e){return Oo(ju,gu,t,e)}var Il=new Me("Application Initializer"),Rl=function(){var t=function(){function t(e){var n=this;J(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return Y(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();_s(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(He(Il,8))},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}(),kl=new Me("AppId"),Ol={provide:kl,useFactory:function(){return"".concat(Pl()).concat(Pl()).concat(Pl())},deps:[]};function Pl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ml=new Me("Platform Initializer"),Ll=new Me("Platform ID"),Nl=new Me("appBootstrapListener"),Fl=function(){var t=function(){function t(){J(this,t)}return Y(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}(),jl=new Me("LocaleId"),Bl=new Me("DefaultCurrencyCode"),Ul=function t(e,n){J(this,t),this.ngModuleFactory=e,this.componentFactories=n},Vl=function(t){return new ol(t)},Gl=Vl,Hl=function(t){return Promise.resolve(Vl(t))},Yl=function(t){var e=Vl(t),n=Vr(_n(t).declarations).reduce((function(t,e){var n=mn(e);return n&&t.push(new qu(n)),t}),[]);return new Ul(e,n)},zl=Yl,ql=function(t){return Promise.resolve(Yl(t))},Xl=function(){var t=function(){function t(){J(this,t),this.compileModuleSync=Gl,this.compileModuleAsync=Hl,this.compileModuleAndAllComponentsSync=zl,this.compileModuleAndAllComponentsAsync=ql}return Y(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}(),Kl=Promise.resolve(0);function Wl(t){"undefined"==typeof Zone?Kl.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Ql=function(){function t(e){var n,r,i=e.enableLongStackTrace,a=void 0!==i&&i,o=e.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(J(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ul(!1),this.onMicrotaskEmpty=new ul(!1),this.onStable=new ul(!1),this.onError=new ul(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=xe.requestAnimationFrame,e=xe.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xe,(function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){t.lastRequestAnimationFrameId=-1,tc(t),Jl(t)}),void 0,(function(){}),(function(){}))),t.fakeTopEventTask.invoke()})),tc(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,a,o,s){try{return ec(n),t.invokeTask(i,a,o,s)}finally{r&&"eventTask"===a.type&&r(),nc(n)}},onInvoke:function(t,e,r,i,a,o,s){try{return ec(n),t.invoke(r,i,a,o,s)}finally{nc(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,tc(n),Jl(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return Y(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,t,Zl,$l,$l);try{return i.runTask(a,e,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function $l(){}var Zl={};function Jl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function tc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ec(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nc(t){t._nesting--,Jl(t)}var rc,ic=function(){function t(){J(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ul,this.onMicrotaskEmpty=new ul,this.onStable=new ul,this.onError=new ul}return Y(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),ac=function(){var t=function(){function t(e){var n=this;J(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return Y(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){Ql.assertNotInAngularZone(),Wl((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Wl((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(He(Ql))},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}(),oc=function(){var t=function(){function t(){J(this,t),this._applications=new Map,sc.addToWindow(this)}return Y(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return sc.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}(),sc=new(function(){function t(){J(this,t)}return Y(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),uc=new Me("AllowMultipleToken"),lc=function t(e,n){J(this,t),this.name=e,this.token=n};function cc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new Me(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=fc();if(!a||a.injector.get(uc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var o=n.concat(e).concat({provide:i,useValue:!0},{provide:Fo,useValue:"platform"});!function(t){if(rc&&!rc.destroyed&&!rc.injector.get(uc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rc=t.get(dc);var e=t.get(Ml,null);e&&e.forEach((function(t){return t()}))}($o.create({providers:o,name:r}))}return function(t){var e=fc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function fc(){return rc&&!rc.destroyed?rc:null}var dc=function(){var t=function(){function t(e){J(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return Y(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,a=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new ic:("zone.js"===n?void 0:n)||new Ql({enableLongStackTrace:gi(),shouldCoalesceEventChangeDetection:r})),o=[{provide:Ql,useValue:a}];return a.run((function(){var e=$o.create({providers:o,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(li,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return vc(i._modules,n)})),a.runOutsideAngular((function(){return a.onError.subscribe({next:function(t){r.handleError(t)}})})),function(t,e,r){try{var a=((o=n.injector.get(Rl)).runInitializers(),o.donePromise.then((function(){return Ju(n.injector.get(jl,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return _s(a)?a.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):a}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var o}(r,a)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=hc({},n);return function(t,e,n){var r=new ol(n);return Promise.resolve(r)}(0,0,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(gc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(ge(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(He($o))},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}();function hc(t,e){return Array.isArray(e)?e.reduce(hc,t):Object.assign(Object.assign({},t),e)}var pc,gc=((pc=function(){function t(e,n,r,i,a,o){var s=this;J(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=gi(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new pt((function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){t.next(s._stable),t.complete()}))})),l=new pt((function(t){var e;s._zone.runOutsideAngular((function(){e=s._zone.onStable.subscribe((function(){Ql.assertNotInAngularZone(),Wl((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Ql.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Vt(u,l.pipe(Wt()))}return Y(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof du?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(Xe),a=n.create($o.NULL,[],e||n.selector,i);a.onDestroy((function(){r._unloadComponent(a)}));var o=a.injector.get(ac,null);return o&&a.injector.get(oc).registerApplication(a.location.nativeElement,o),this._loadComponent(a),gi()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),a}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=B(this._views);try{for(n.s();!(e=n.n()).done;)e.value.detectChanges()}catch(a){n.e(a)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=B(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(a){i.e(a)}finally{i.f()}}}catch(o){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(o)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;vc(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Nl,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),vc(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}()).\u0275fac=function(t){return new(t||pc)(He(Ql),He(Fl),He($o),He(li),He(pu),He(Rl))},pc.\u0275prov=ae({token:pc,factory:pc.\u0275fac}),pc);function vc(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var mc=function t(){J(this,t)},yc=function t(){J(this,t)},_c={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},bc=function(){var t=function(){function t(e,n){J(this,t),this._compiler=e,this._config=n||_c}return Y(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,n=tt(t.split("#"),2),r=n[0],i=n[1];return void 0===i&&(i="default"),F("zn8P")(r).then((function(t){return t[i]})).then((function(t){return Ec(t,r,i)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=tt(t.split("#"),2),n=e[0],r=e[1],i="NgFactory";return void 0===r&&(r="default",i=""),F("zn8P")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then((function(t){return t[r+i]})).then((function(t){return Ec(t,n,r)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(He(Xl),He(yc,8))},t.\u0275prov=ae({token:t,factory:t.\u0275fac}),t}();function Ec(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Tc=cc(null,"core",[{provide:Ll,useValue:"unknown"},{provide:dc,deps:[$o]},{provide:oc,deps:[]},{provide:Fl,deps:[]}]),Sc=[{provide:gc,useClass:gc,deps:[Ql,Fl,$o,li,pu,Rl]},{provide:zu,deps:[Ql],useFactory:function(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}},{provide:Rl,useClass:Rl,deps:[[new Jt,Il]]},{provide:Xl,useClass:Xl,deps:[]},Ol,{provide:Pu,useFactory:function(){return Nu},deps:[]},{provide:Mu,useFactory:function(){return Fu},deps:[]},{provide:jl,useFactory:function(t){return Ju(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new Zt(jl),new Jt,new ee]]},{provide:Bl,useValue:"USD"}],wc=function(){var t=function t(e){J(this,t)};return t.\u0275mod=pn({type:t}),t.\u0275inj=oe({factory:function(e){return new(e||t)(He(gc))},providers:Sc}),t}(),Ac=null;function xc(){return Ac}var Cc,Dc=new Me("DocumentToken"),Ic=((Cc=function t(){J(this,t)}).\u0275fac=function(t){return new(t||Cc)},Cc.\u0275prov=ae({factory:Rc,token:Cc,providedIn:"platform"}),Cc);function Rc(){return He(Pc)}var kc,Oc=new Me("Location Initialized"),Pc=((kc=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this))._doc=t,r._init(),r}return Y(n,[{key:"_init",value:function(){this.location=xc().getLocation(),this._history=xc().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return xc().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){xc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){xc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){Mc()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){Mc()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(Ic)).\u0275fac=function(t){return new(t||kc)(He(Dc))},kc.\u0275prov=ae({factory:Lc,token:kc,providedIn:"platform"}),kc);function Mc(){return!!window.history.pushState}function Lc(){return new Pc(He(Dc))}function Nc(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Fc(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function jc(t){return t&&"?"!==t[0]?"?"+t:t}var Bc,Uc=((Bc=function t(){J(this,t)}).\u0275fac=function(t){return new(t||Bc)},Bc.\u0275prov=ae({factory:Vc,token:Bc,providedIn:"root"}),Bc);function Vc(t){var e=He(Dc).location;return new qc(He(Ic),e&&e.origin||"")}var Gc,Hc,Yc,zc=new Me("appBaseHref"),qc=((Yc=function(t){z(n,t);var e=X(n);function n(t,r){var i;if(J(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,K(i)}return Y(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return Nc(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+jc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+jc(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+jc(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Uc)).\u0275fac=function(t){return new(t||Yc)(He(Ic),He(zc,8))},Yc.\u0275prov=ae({token:Yc,factory:Yc.\u0275fac}),Yc),Xc=((Hc=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return Y(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=Nc(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+jc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+jc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Uc)).\u0275fac=function(t){return new(t||Hc)(He(Ic),He(zc,8))},Hc.\u0275prov=ae({token:Hc,factory:Hc.\u0275fac}),Hc),Kc=((Gc=function(){function t(e,n){var r=this;J(this,t),this._subject=new ul,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Fc(Qc(i)),this._platformStrategy.onPopState((function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})}))}return Y(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+jc(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Qc(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jc(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jc(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||Gc)(He(Uc),He(Ic))},Gc.normalizeQueryParams=jc,Gc.joinWithSlash=Nc,Gc.stripTrailingSlash=Fc,Gc.\u0275prov=ae({factory:Wc,token:Gc,providedIn:"root"}),Gc);function Wc(){return new Kc(He(Uc),He(Ic))}function Qc(t){return t.replace(/\/index.html$/,"")}var $c,Zc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),Jc=function t(){J(this,t)},tf=(($c=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this)).locale=t,r}return Y(n,[{key:"getPluralCategory",value:function(t,e){switch(function(t){return function(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=$u(e);if(n)return n;var r=e.split("-")[0];if(n=$u(r))return n;if("en"===r)return Wu;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[Zu.PluralCase]}(e||this.locale)(t)){case Zc.Zero:return"zero";case Zc.One:return"one";case Zc.Two:return"two";case Zc.Few:return"few";case Zc.Many:return"many";default:return"other"}}}]),n}(Jc)).\u0275fac=function(t){return new(t||$c)(He(jl))},$c.\u0275prov=ae({token:$c,factory:$c.\u0275fac}),$c);function ef(t,e){e=encodeURIComponent(e);var n,r=B(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.indexOf("="),o=tt(-1==a?[i,""]:[i.slice(0,a),i.slice(a+1)],2),s=o[0],u=o[1];if(s.trim()===e)return decodeURIComponent(u)}}catch(l){r.e(l)}finally{r.f()}return null}var nf,rf,af=function(){function t(e,n,r,i){J(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return Y(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),of=((nf=function(){function t(e,n,r){J(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return Y(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var a=e._viewContainer.createEmbeddedView(e._template,new af(null,e._ngForOf,-1,-1),null===i?void 0:i),o=new sf(t,a);n.push(o)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new sf(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){gi()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||nf)(ls(Uu),ls(ju),ls(Pu))},nf.\u0275dir=vn({type:nf,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),nf),sf=function t(e,n){J(this,t),this.record=e,this.view=n},uf=((rf=function(){function t(e,n){J(this,t),this._viewContainer=e,this._context=new lf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Y(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){cf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){cf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||rf)(ls(Uu),ls(ju))},rf.\u0275dir=vn({type:rf,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),rf),lf=function t(){J(this,t),this.$implicit=null,this.ngIf=null};function cf(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(ge(e),"'."))}var ff,df,hf,pf=((hf=function(){function t(e){J(this,t),this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return Y(t,[{key:"ngOnChanges",value:function(t){if(this._shouldRecreateView(t)){var e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}},{key:"_hasContextShapeChanged",value:function(t){var e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){var r,i=B(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(-1===e.indexOf(a))return!0}}catch(o){i.e(o)}finally{i.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}}]),t}()).\u0275fac=function(t){return new(t||hf)(ls(Uu))},hf.\u0275dir=vn({type:hf,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Dn]}),hf),gf=((df=function t(){J(this,t)}).\u0275mod=pn({type:df}),df.\u0275inj=oe({factory:function(t){return new(t||df)},providers:[{provide:Jc,useClass:tf}]}),df),vf=((ff=function t(){J(this,t)}).\u0275prov=ae({token:ff,providedIn:"root",factory:function(){return new mf(He(Dc),window,He(li))}}),ff),mf=function(){function t(e,n,r){J(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return Y(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.window||!this.window.scrollTo)return!1;var t=yf(this.window.history)||yf(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window.scrollTo}catch(t){return!1}}}]),t}();function yf(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var _f,bf,Ef,Tf,Sf=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=wf||(wf=document.querySelector("base"))?wf.getAttribute("href"):null;return null==n?null:(e=n,_f||(_f=document.createElement("a")),_f.setAttribute("href",e),"/"===_f.pathname.charAt(0)?_f.pathname:"/"+_f.pathname)}},{key:"resetBaseElement",value:function(){wf=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return ef(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,Ac||(Ac=t)}}]),n}(function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.call(this)}return Y(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){J(this,t)}}())),wf=null,Af=new Me("TRANSITION_ID"),xf=[{provide:Il,useFactory:function(t,e,n){return function(){n.get(Rl).donePromise.then((function(){var n=xc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter((function(e){return e.getAttribute("ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[Af,Dc,$o],multi:!0}],Cf=function(){function t(){J(this,t)}return Y(t,[{key:"addToWindow",value:function(t){xe.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},xe.getAllAngularTestabilities=function(){return t.getAllTestabilities()},xe.getAllAngularRootElements=function(){return t.getAllRootElements()},xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push((function(t){var e=xe.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?xc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){var e;e=new t,sc=e}}]),t}(),Df=new Me("EventManagerPlugins"),If=((bf=function(){function t(e,n){var r=this;J(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return Y(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||bf)(He(Df),He(Ql))},bf.\u0275prov=ae({token:bf,factory:bf.\u0275fac}),bf),Rf=function(){function t(e){J(this,t),this._doc=e}return Y(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=xc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),kf=((Tf=function(){function t(){J(this,t),this._stylesSet=new Set}return Y(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||Tf)},Tf.\u0275prov=ae({token:Tf,factory:Tf.\u0275fac}),Tf),Of=((Ef=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return Y(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return xc().remove(t)}))}}]),n}(kf)).\u0275fac=function(t){return new(t||Ef)(He(Dc))},Ef.\u0275prov=ae({token:Ef,factory:Ef.\u0275fac}),Ef),Pf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Mf=/%COMP%/g;function Lf(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Lf(t,i,n):(i=i.replace(Mf,t),n.push(i))}return n}function Nf(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Ff,jf,Bf,Uf,Vf=((Ff=function(){function t(e,n,r){J(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Gf(e)}return Y(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case on.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Hf(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case on.Native:case on.ShadowDom:return new Yf(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Lf(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ff)(He(If),He(Of),He(kl))},Ff.\u0275prov=ae({token:Ff,factory:Ff.\u0275fac}),Ff),Gf=function(){function t(e){J(this,t),this.eventManager=e,this.data=Object.create(null)}return Y(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Pf[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Pf[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Pf[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&yu.DashCase?t.style.setProperty(e,n,r&yu.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&yu.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Nf(n)):this.eventManager.addEventListener(t,e,Nf(n))}}]),t}(),Hf=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;J(this,n),(o=e.call(this,t)).component=i;var s,u=Lf(a+"-"+i.id,i.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(Mf,a+"-"+i.id),o.hostAttr=(s=a+"-"+i.id,"_nghost-%COMP%".replace(Mf,s)),o}return Y(n,[{key:"applyToHost",value:function(t){U(Z(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=U(Z(n.prototype),"createElement",this).call(this,t,e);return U(Z(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Gf),Yf=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;J(this,n),(o=e.call(this,t)).sharedStylesHost=r,o.hostEl=i,o.component=a,o.shadowRoot=a.encapsulation===on.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Lf(a.id,a.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],o.shadowRoot.appendChild(l)}return o}return Y(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return U(Z(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return U(Z(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return U(Z(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(U(Z(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(Gf),zf=((jf=function(t){z(n,t);var e=X(n);function n(t){return J(this,n),e.call(this,t)}return Y(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Rf)).\u0275fac=function(t){return new(t||jf)(He(Dc))},jf.\u0275prov=ae({token:jf,factory:jf.\u0275fac}),jf),qf=["alt","control","meta","shift"],Xf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kf={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wf={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Qf=((Bf=function(t){z(n,t);var e=X(n);function n(t){return J(this,n),e.call(this,t)}return Y(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return xc().onAndCancel(t,i.domEventName,a)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),a="";if(qf.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),a+=t+".")})),a+=i,0!=e.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Kf.hasOwnProperty(e)&&(e=Kf[e]))}return Xf[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),qf.forEach((function(r){r!=n&&(0,Wf[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Rf)).\u0275fac=function(t){return new(t||Bf)(He(Dc))},Bf.\u0275prov=ae({token:Bf,factory:Bf.\u0275fac}),Bf),$f=cc(Tc,"browser",[{provide:Ll,useValue:"browser"},{provide:Ml,useValue:function(){Sf.makeCurrent(),Cf.init()},multi:!0},{provide:Dc,useFactory:function(){return function(t){Pn=t}(document),document},deps:[]}]),Zf=[[],{provide:Fo,useValue:"root"},{provide:li,useFactory:function(){return new li},deps:[]},{provide:Df,useClass:zf,multi:!0,deps:[Dc,Ql,Ll]},{provide:Df,useClass:Qf,multi:!0,deps:[Dc]},[],{provide:Vf,useClass:Vf,deps:[If,Of,kl]},{provide:mu,useExisting:Vf},{provide:kf,useExisting:Of},{provide:Of,useClass:Of,deps:[Dc]},{provide:ac,useClass:ac,deps:[Ql]},{provide:If,useClass:If,deps:[Df,Ql]},[]],Jf=((Uf=function(){function t(e){if(J(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return Y(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:kl,useValue:e.appId},{provide:Af,useExisting:kl},xf]}}}]),t}()).\u0275mod=pn({type:Uf}),Uf.\u0275inj=oe({factory:function(t){return new(t||Uf)(He(Uf,12))},providers:Zf,imports:[gf,wc]}),Uf);function td(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Tt(r)?(e.pop(),Mt(e,r)):Ut(e)}function ed(t,e){return Nt(t,e,1)}function nd(t,e){return function(n){return n.lift(new rd(t,e))}}"undefined"!=typeof window&&window;var rd=function(){function t(e,n){J(this,t),this.predicate=e,this.thisArg=n}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new id(t,this.predicate,this.thisArg))}}]),t}(),id=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.count=0,a}return Y(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(lt),ad=function t(){J(this,t)},od=function t(){J(this,t)},sd=function(){function t(e){var n=this;J(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),a=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return Y(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,j(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var a=this.headers.get(e);if(!a)return;0===(a=a.filter((function(t){return-1===i.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),ud=function(){function t(){J(this,t)}return Y(t,[{key:"encodeKey",value:function(t){return ld(t)}},{key:"encodeValue",value:function(t){return ld(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function ld(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var cd=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(J(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new ud,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.split("&").forEach((function(t){var r=t.indexOf("="),i=tt(-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],2),a=i[0],o=i[1],s=n.get(a)||[];s.push(o),n.set(a,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(t){var r=n.fromObject[t];e.map.set(t,Array.isArray(r)?r:[r])}))):this.map=null}return Y(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function fd(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function dd(t){return"undefined"!=typeof Blob&&t instanceof Blob}function hd(t){return"undefined"!=typeof FormData&&t instanceof FormData}var pd=function(){function t(e,n,r,i){var a;if(J(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new sd),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new cd,this.urlWithParams=n}return Y(t,[{key:"serializeBody",value:function(){return null===this.body?null:fd(this.body)||dd(this.body)||hd(this.body)||"string"==typeof this.body?this.body:this.body instanceof cd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||hd(this.body)?null:dd(this.body)?this.body.type||null:fd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),l)),new t(n,r,a,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:o})}}]),t}(),gd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),vd=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";J(this,t),this.headers=e.headers||new sd,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},md=function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return J(this,n),(t=e.call(this,r)).type=gd.ResponseHeader,t}return Y(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(vd),yd=function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return J(this,n),(t=e.call(this,r)).type=gd.Response,t.body=void 0!==r.body?r.body:null,t}return Y(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(vd),_d=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(vd);function bd(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Ed,Td,Sd,wd,Ad,xd,Cd,Dd,Id,Rd=((Ed=function(){function t(e){J(this,t),this.handler=e}return Y(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof pd)n=t;else{var a=void 0;a=i.headers instanceof sd?i.headers:new sd(i.headers);var o=void 0;i.params&&(o=i.params instanceof cd?i.params:new cd({fromObject:i.params})),n=new pd(t,e,void 0!==i.body?i.body:null,{headers:a,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=td(n).pipe(ed((function(t){return r.handler.handle(t)})));if(t instanceof pd||"events"===i.observe)return s;var u=s.pipe(nd((function(t){return t instanceof yd})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(kt((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return u.pipe(kt((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return u.pipe(kt((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return u.pipe(kt((function(t){return t.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new cd).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,bd(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,bd(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,bd(n,e))}}]),t}()).\u0275fac=function(t){return new(t||Ed)(He(ad))},Ed.\u0275prov=ae({token:Ed,factory:Ed.\u0275fac}),Ed),kd=function(){function t(e,n){J(this,t),this.next=e,this.interceptor=n}return Y(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),Od=new Me("HTTP_INTERCEPTORS"),Pd=((Td=function(){function t(){J(this,t)}return Y(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Td)},Td.\u0275prov=ae({token:Td,factory:Td.\u0275fac}),Td),Md=/^\)\]\}',?\n/,Ld=function t(){J(this,t)},Nd=((wd=function(){function t(){J(this,t)}return Y(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}()).\u0275fac=function(t){return new(t||wd)},wd.\u0275prov=ae({token:wd,factory:wd.\u0275fac}),wd),Fd=((Sd=function(){function t(e){J(this,t),this.xhrFactory=e}return Y(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new pt((function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((function(t,e){return r.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var a=t.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var o=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new sd(r.getAllResponseHeaders()),a=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new md({headers:i,status:e,statusText:n,url:a})},l=function(){var e=u(),i=e.headers,a=e.status,o=e.statusText,s=e.url,l=null;204!==a&&(l=void 0===r.response?r.responseText:r.response),0===a&&(a=l?200:0);var c=a>=200&&a<300;if("json"===t.responseType&&"string"==typeof l){var f=l;l=l.replace(Md,"");try{l=""!==l?JSON.parse(l):null}catch(d){l=f,c&&(c=!1,l={error:d,text:l})}}c?(n.next(new yd({body:l,headers:i,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new _d({error:l,headers:i,status:a,statusText:o,url:s||void 0}))},c=function(t){var e=u().url,i=new _d({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},f=!1,d=function(e){f||(n.next(u()),f=!0);var i={type:gd.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},h=function(t){var e={type:gd.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",h)),r.send(o),n.next({type:gd.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),t.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}}))}}]),t}()).\u0275fac=function(t){return new(t||Sd)(He(Ld))},Sd.\u0275prov=ae({token:Sd,factory:Sd.\u0275fac}),Sd),jd=new Me("XSRF_COOKIE_NAME"),Bd=new Me("XSRF_HEADER_NAME"),Ud=function t(){J(this,t)},Vd=((Id=function(){function t(e,n,r){J(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return Y(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ef(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}()).\u0275fac=function(t){return new(t||Id)(He(Dc),He(Ll),He(jd))},Id.\u0275prov=ae({token:Id,factory:Id.\u0275fac}),Id),Gd=((Dd=function(){function t(e,n){J(this,t),this.tokenService=e,this.headerName=n}return Y(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Dd)(He(Ud),He(Bd))},Dd.\u0275prov=ae({token:Dd,factory:Dd.\u0275fac}),Dd),Hd=((Cd=function(){function t(e,n){J(this,t),this.backend=e,this.injector=n,this.chain=null}return Y(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(Od,[]);this.chain=e.reduceRight((function(t,e){return new kd(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Cd)(He(od),He($o))},Cd.\u0275prov=ae({token:Cd,factory:Cd.\u0275fac}),Cd),Yd=((xd=function(){function t(){J(this,t)}return Y(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:Gd,useClass:Pd}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:jd,useValue:e.cookieName}:[],e.headerName?{provide:Bd,useValue:e.headerName}:[]]}}}]),t}()).\u0275mod=pn({type:xd}),xd.\u0275inj=oe({factory:function(t){return new(t||xd)},providers:[Gd,{provide:Od,useExisting:Gd,multi:!0},{provide:Ud,useClass:Vd},{provide:jd,useValue:"XSRF-TOKEN"},{provide:Bd,useValue:"X-XSRF-TOKEN"}]}),xd),zd=((Ad=function t(){J(this,t)}).\u0275mod=pn({type:Ad}),Ad.\u0275inj=oe({factory:function(t){return new(t||Ad)},providers:[Rd,{provide:ad,useClass:Hd},Fd,{provide:od,useExisting:Fd},Nd,{provide:Ld,useExisting:Nd}],imports:[[Yd.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Ad),qd=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this))._value=t,r}return Y(n,[{key:"_subscribe",value:function(t){var e=U(Z(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new mt;return this._value}},{key:"next",value:function(t){U(Z(n.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),n}(bt),Xd=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Kd={},Wd=function(){function t(e){J(this,t),this.resultSelector=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Qd(t,this.resultSelector))}}]),t}(),Qd=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return Y(n,[{key:"_next",value:function(t){this.values.push(Kd),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(It(this,r,r,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,r,i){var a=this.values,o=this.toRespond?a[n]===Kd?--this.toRespond:this.toRespond:0;a[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Rt),$d=new pt((function(t){return t.complete()}));function Zd(t){return t?function(t){return new pt((function(e){return t.schedule((function(){return e.complete()}))}))}(t):$d}function Jd(t){return new pt((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Lt(n):Zd()).subscribe(e)}))}function th(){return Bt(1)}var eh=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function nh(t){return function(e){return 0===t?Zd():e.lift(new rh(t))}}var rh=function(){function t(e){if(J(this,t),this.total=e,this.total<0)throw new eh}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new ih(t,this.total))}}]),t}(),ih=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return Y(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=e++%n;t.next(r[a])}t.complete()}}]),n}(lt);function ah(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uh;return function(e){return e.lift(new oh(t))}}var oh=function(){function t(e){J(this,t),this.errorFactory=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new sh(t,this.errorFactory))}}]),t}(),sh=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return Y(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(lt);function uh(){return new Xd}function lh(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new ch(t))}}var ch=function(){function t(e){J(this,t),this.defaultValue=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new fh(t,this.defaultValue))}}]),t}(),fh=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return Y(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(lt);function dh(t){return function(e){var n=new hh(t),r=e.lift(n);return n.caught=r}}var hh=function(){function t(e){J(this,t),this.selector=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new ph(t,this.selector,this.caught))}}]),t}(),ph=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t)).selector=r,a.caught=i,a}return Y(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(a){return void U(Z(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new St(this,void 0,void 0);this.add(r);var i=It(this,e,void 0,void 0,r);i!==r&&this.add(i)}}}]),n}(Rt);function gh(t){return function(e){return 0===t?Zd():e.lift(new vh(t))}}var vh=function(){function t(e){if(J(this,t),this.total=e,this.total<0)throw new eh}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new mh(t,this.total))}}]),t}(),mh=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return Y(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(lt);function yh(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?nd((function(e,n){return t(e,n,r)})):dt,gh(1),n?lh(e):ah((function(){return new Xd})))}}function _h(){}function bh(t,e,n){return function(r){return r.lift(new Eh(t,e,n))}}var Eh=function(){function t(e,n,r){J(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Th(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),Th=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t))._tapNext=_h,o._tapError=_h,o._tapComplete=_h,o._tapError=i||_h,o._tapComplete=a||_h,V(r)?(o._context=W(o),o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||_h,o._tapError=r.error||_h,o._tapComplete=r.complete||_h),o}return Y(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(lt),Sh=function(){function t(e,n,r){J(this,t),this.predicate=e,this.thisArg=n,this.source=r}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new wh(t,this.predicate,this.thisArg,this.source))}}]),t}(),wh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.source=a,o.index=0,o.thisArg=i||W(o),o}return Y(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(lt);function Ah(t,e){return"function"==typeof e?function(n){return n.pipe(Ah((function(n,r){return Lt(t(n,r)).pipe(kt((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new xh(t))}}var xh=function(){function t(e){J(this,t),this.project=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Ch(t,this.project))}}]),t}(),Ch=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return Y(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new St(this,e,n),a=this.destination;a.add(i),this.innerSubscription=It(this,t,void 0,void 0,i),this.innerSubscription!==i&&a.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||U(Z(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&U(Z(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}}]),n}(Rt);function Dh(){return th()(td.apply(void 0,arguments))}var Ih=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];J(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Rh(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),Rh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return Y(n,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),n}(lt),kh=function(){function t(e){J(this,t),this.callback=e}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Oh(t,this.callback))}}]),t}(),Oh=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).add(new ot(r)),i}return n}(lt),Ph=function t(e,n){J(this,t),this.id=e,this.url=n},Mh=function(t){z(n,t);var e=X(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return J(this,n),(i=e.call(this,t,r)).navigationTrigger=a,i.restoredState=o,i}return Y(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ph),Lh=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a}return Y(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Ph),Nh=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t,r)).reason=i,a}return Y(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ph),Fh=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t,r)).error=i,a}return Y(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Ph),jh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o.state=a,o}return Y(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ph),Bh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o.state=a,o}return Y(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ph),Uh=function(t){z(n,t);var e=X(n);function n(t,r,i,a,o){var s;return J(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return Y(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Ph),Vh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o.state=a,o}return Y(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ph),Gh=function(t){z(n,t);var e=X(n);function n(t,r,i,a){var o;return J(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o.state=a,o}return Y(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ph),Hh=function(){function t(e){J(this,t),this.route=e}return Y(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Yh=function(){function t(e){J(this,t),this.route=e}return Y(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),zh=function(){function t(e){J(this,t),this.snapshot=e}return Y(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),qh=function(){function t(e){J(this,t),this.snapshot=e}return Y(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Xh=function(){function t(e){J(this,t),this.snapshot=e}return Y(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Kh=function(){function t(e){J(this,t),this.snapshot=e}return Y(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Wh=function(){function t(e,n,r){J(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return Y(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Qh=function(){function t(e){J(this,t),this.params=e||{}}return Y(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function $h(t){return new Qh(t)}function Zh(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Jh(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=t[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function tp(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!ep(t[n=r[a]],e[n]))return!1;return!0}function ep(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every((function(t){return e.indexOf(t)>-1})):t===e}function np(t){return Array.prototype.concat.apply([],t)}function rp(t){return t.length>0?t[t.length-1]:null}function ip(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ap(t){return bs(t)?t:_s(t)?Lt(Promise.resolve(t)):td(t)}function op(t,e,n){return n?function(t,e){return tp(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!cp(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return ep(t[n],e[n])}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!cp(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!cp(n.segments,i))return!1;for(var a in r.children){if(!n.children[a])return!1;if(!t(n.children[a],r.children[a]))return!1}return!0}var o=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!cp(n.segments,o)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var sp=function(){function t(e,n,r){J(this,t),this.root=e,this.queryParams=n,this.fragment=r}return Y(t,[{key:"toString",value:function(){return pp.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=$h(this.queryParams)),this._queryParamMap}}]),t}(),up=function(){function t(e,n){var r=this;J(this,t),this.segments=e,this.children=n,this.parent=null,ip(n,(function(t,e){return t.parent=r}))}return Y(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return gp(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),lp=function(){function t(e,n){J(this,t),this.path=e,this.parameters=n}return Y(t,[{key:"toString",value:function(){return Ep(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=$h(this.parameters)),this._parameterMap}}]),t}();function cp(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function fp(t,e){var n=[];return ip(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),ip(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var dp=function t(){J(this,t)},hp=function(){function t(){J(this,t)}return Y(t,[{key:"parse",value:function(t){var e=new xp(t);return new sp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return gp(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return ip(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var a=fp(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return"".concat(gp(e),"/(").concat(a.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(mp(t),"=").concat(mp(e))})).join("&"):"".concat(mp(t),"=").concat(mp(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+function(t){return encodeURI(t)}(t.fragment):"");var e,n}}]),t}(),pp=new hp;function gp(t){return t.segments.map((function(t){return Ep(t)})).join("/")}function vp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mp(t){return vp(t).replace(/%3B/gi,";")}function yp(t){return vp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _p(t){return decodeURIComponent(t)}function bp(t){return _p(t.replace(/\+/g,"%20"))}function Ep(t){return"".concat(yp(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(yp(t),"=").concat(yp(e[t]))})).join("")));var e}var Tp=/^[^\/()?;=#]+/;function Sp(t){var e=t.match(Tp);return e?e[0]:""}var wp=/^[^=?&#]+/,Ap=/^[^?&#]+/,xp=function(){function t(e){J(this,t),this.url=e,this.remaining=e}return Y(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new up([],{}):new up([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new up(t,e)),n}},{key:"parseSegment",value:function(){var t=Sp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new lp(_p(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Sp(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Sp(this.remaining);r&&(n=r,this.capture(n))}t[_p(e)]=_p(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(wp);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(Ap);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=bp(e),a=bp(n);if(t.hasOwnProperty(i)){var o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(a)}else t[i]=a}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Sp(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var a=this.parseChildren();e[i]=1===Object.keys(a).length?a.primary:new up([],a),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),Cp=function(){function t(e){J(this,t),this._root=e}return Y(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=Dp(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=Dp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=Ip(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return Ip(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function Dp(t,e){if(t===e.value)return e;var n,r=B(e.children);try{for(r.s();!(n=r.n()).done;){var i=Dp(t,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Ip(t,e){if(t===e.value)return[e];var n,r=B(e.children);try{for(r.s();!(n=r.n()).done;){var i=Ip(t,n.value);if(i.length)return i.unshift(e),i}}catch(a){r.e(a)}finally{r.f()}return[]}var Rp=function(){function t(e,n){J(this,t),this.value=e,this.children=n}return Y(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function kp(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var Op=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t)).snapshot=r,jp(W(i),t),i}return Y(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Cp);function Pp(t,e){var n=function(t,e){var n=new Np([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Fp("",new Rp(n,[]))}(t,e),r=new qd([new lp("",{})]),i=new qd({}),a=new qd({}),o=new qd({}),s=new qd(""),u=new Mp(r,i,o,s,a,"primary",e,n.root);return u.snapshot=n.root,new Op(new Rp(u,[]),n)}var Mp=function(){function t(e,n,r,i,a,o,s,u){J(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return Y(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(kt((function(t){return $h(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(kt((function(t){return $h(t)})))),this._queryParamMap}}]),t}();function Lp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Np=function(){function t(e,n,r,i,a,o,s,u,l,c,f){J(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=f}return Y(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=$h(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=$h(this.queryParams)),this._queryParamMap}}]),t}(),Fp=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,r)).url=t,jp(W(i),r),i}return Y(n,[{key:"toString",value:function(){return Bp(this._root)}}]),n}(Cp);function jp(t,e){e.value._routerState=t,e.children.forEach((function(e){return jp(t,e)}))}function Bp(t){var e=t.children.length>0?" { ".concat(t.children.map(Bp).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Up(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,tp(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),tp(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!tp(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),tp(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Vp(t,e){var n,r;return tp(t.params,e.params)&&cp(n=t.url,r=e.url)&&n.every((function(t,e){return tp(t.parameters,r[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||Vp(t.parent,e.parent))}function Gp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Hp(t,e,n,r,i){var a={};return r&&ip(r,(function(t,e){a[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new sp(n.root===t?e:function t(e,n,r){var i={};return ip(e.children,(function(e,a){i[a]=e===n?r:t(e,n,r)})),new up(e.segments,i)}(n.root,t,e),a,i)}var Yp=function(){function t(e,n,r){if(J(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gp(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(i&&i!==rp(r))throw new Error("{outlets:{}} has to be the last command")}return Y(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),zp=function t(e,n,r){J(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function qp(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Xp(t,e,n){if(t||(t=new up([],{})),0===t.segments.length&&t.hasChildren())return Kp(t,e,n);var r=function(t,e,n){for(var r=0,i=e,a={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return a;var o=t.segments[i],s=qp(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Zp(s,u,o))return a;r+=2}else{if(!Zp(s,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var a=new up(t.segments.slice(0,r.pathIndex),{});return a.children.primary=new up(t.segments.slice(r.pathIndex),t.children),Kp(a,0,i)}return r.match&&0===i.length?new up(t.segments,{}):r.match&&!t.hasChildren()?Wp(t,e,n):r.match?Kp(t,0,i):Wp(t,e,n)}function Kp(t,e,n){if(0===n.length)return new up(t.segments,{});var r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return ip(r,(function(n,r){null!==n&&(i[r]=Xp(t.children[r],e,n))})),ip(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new up(t.segments,i)}function Wp(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){var a=Qp(n[i].outlets);return new up(r,a)}if(0===i&&Gp(n[0]))r.push(new lp(t.segments[e].path,n[0])),i++;else{var o=qp(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Gp(s)?(r.push(new lp(o,$p(s))),i+=2):(r.push(new lp(o,{})),i++)}}return new up(r,{})}function Qp(t){var e={};return ip(t,(function(t,n){null!==t&&(e[n]=Wp(new up([],{}),0,t))})),e}function $p(t){var e={};return ip(t,(function(t,n){return e[n]=""+t})),e}function Zp(t,e,n){return t==n.path&&tp(e,n.parameters)}var Jp=function(){function t(e,n,r,i){J(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return Y(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Up(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=kp(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),ip(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=kp(t),a=t.value.component?r.children:e;ip(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,a)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=kp(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Kh(t.value.snapshot))})),t.children.length&&this.forwardEvent(new qh(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Up(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),tg(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function tg(t){Up(t.value),t.children.forEach(tg)}var eg=function t(e,n){J(this,t),this.routes=e,this.module=n};function ng(t){return"function"==typeof t}function rg(t){return t instanceof sp}var ig=function t(e){J(this,t),this.segmentGroup=e||null},ag=function t(e){J(this,t),this.urlTree=e};function og(t){return new pt((function(e){return e.error(new ig(t))}))}function sg(t){return new pt((function(e){return e.error(new ag(t))}))}function ug(t){return new pt((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var lg=function(){function t(e,n,r,i,a){J(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(Xe)}return Y(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(kt((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(dh((function(e){if(e instanceof ag)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof ig)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(kt((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(dh((function(t){if(t instanceof ig)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new up([],{primary:t}):t;return new sp(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(kt((function(t){return new up([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return td({});var a=[],o=[],s={};return ip(n,(function(n,i){var u,l,c=(u=i,l=n,r.expandSegmentGroup(t,e,l,u)).pipe(kt((function(t){return s[i]=t})));"primary"===i?a.push(c):o.push(c)})),td.apply(null,a.concat(o)).pipe(th(),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?nd((function(e,n){return t(e,n,r)})):dt,nh(1),n?lh(e):ah((function(){return new Xd})))}}(),kt((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,i,a){var o=this;return td.apply(void 0,j(n)).pipe(kt((function(s){return o.expandSegmentAgainstRoute(t,e,n,s,r,i,a).pipe(dh((function(t){if(t instanceof ig)return td(null);throw t})))})),th(),yh((function(t){return!!t})),dh((function(t,n){if(t instanceof Xd||"EmptyError"===t.name){if(o.noLeftoversInUrl(e,r,i))return td(new up([],{}));throw new ig(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,a,o){return hg(r)!==a?og(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a):og(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?sg(a):this.lineralizeSegments(n,a).pipe(Nt((function(n){var a=new up(n,{});return i.expandSegment(t,a,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,a){var o=this,s=cg(e,r,i),u=s.matched,l=s.consumedSegments,c=s.lastChild,f=s.positionalParamSegments;if(!u)return og(e);var d=this.applyRedirectCommands(l,r.redirectTo,f);return r.redirectTo.startsWith("/")?sg(d):this.lineralizeSegments(r,d).pipe(Nt((function(r){return o.expandSegment(t,e,n,r.concat(i.slice(c)),a,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(kt((function(t){return n._loadedConfig=t,new up(r,{})}))):td(new up(r,{}));var a=cg(e,n,r),o=a.matched,s=a.consumedSegments,u=a.lastChild;if(!o)return og(e);var l=r.slice(u);return this.getChildConfig(t,n,r).pipe(Nt((function(t){var n=t.module,r=t.routes,a=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return dg(t,e,n)&&"primary"!==hg(n)}))}(t,n,r)?{segmentGroup:fg(new up(e,function(t,e){var n={};n.primary=e;var r,i=B(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;""===a.path&&"primary"!==hg(a)&&(n[hg(a)]=new up([],{}))}}catch(o){i.e(o)}finally{i.f()}return n}(r,new up(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return dg(t,e,n)}))}(t,n,r)?{segmentGroup:fg(new up(t.segments,function(t,e,n,r){var i,a={},o=B(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;dg(t,e,s)&&!r[hg(s)]&&(a[hg(s)]=new up([],{}))}}catch(u){o.e(u)}finally{o.f()}return Object.assign(Object.assign({},r),a)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,l,r),o=a.segmentGroup,u=a.slicedSegments;return 0===u.length&&o.hasChildren()?i.expandChildren(n,r,o).pipe(kt((function(t){return new up(s,t)}))):0===r.length&&0===u.length?td(new up(s,{})):i.expandSegment(n,o,r,u,"primary",!0).pipe(kt((function(t){return new up(s.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?td(new eg(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?td(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Nt((function(n){return n?r.configLoader.load(t.injector,e).pipe(kt((function(t){return e._loadedConfig=t,t}))):function(t){return new pt((function(e){return e.error(Zh("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):td(new eg([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r,i=this,a=e.canLoad;return a&&0!==a.length?Lt(a).pipe(kt((function(r){var i,a=t.get(r);if(function(t){return t&&ng(t.canLoad)}(a))i=a.canLoad(e,n);else{if(!ng(a))throw new Error("Invalid CanLoad guard");i=a(e,n)}return ap(i)}))).pipe(th(),bh((function(t){if(rg(t)){var e=Zh('Redirecting to "'.concat(i.urlSerializer.serialize(t),'"'));throw e.url=t,e}})),(r=function(t){return!0===t},function(t){return t.lift(new Sh(r,void 0,t))})):td(!0)}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return td(n);if(r.numberOfChildren>1||!r.children.primary)return ug(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new sp(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return ip(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,a=this.createSegments(t,e.segments,n,r),o={};return ip(e.children,(function(e,a){o[a]=i.createSegmentGroup(t,e,n,r)})),new up(a,o)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=B(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===t.path)return e.splice(r),a;r++}}catch(o){i.e(o)}finally{i.f()}return t}}]),t}();function cg(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Jh)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function fg(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new up(t.segments.concat(e.segments),e.children)}return t}function dg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function hg(t){return t.outlet||"primary"}var pg=function t(e){J(this,t),this.path=e,this.route=this.path[this.path.length-1]},gg=function t(e,n){J(this,t),this.component=e,this.route=n};function vg(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function mg(t,e,n){var r=kp(t),i=t.value;ip(r,(function(t,r){mg(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new gg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var yg=Symbol("INITIAL_VALUE");function _g(){return Ah((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null,i=null;return Tt(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&nt(e[0])&&(e=e[0]),Ut(e,i).lift(new Wd(r))}).apply(void 0,j(t.map((function(t){return t.pipe(gh(1),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Tt(r)?(e.pop(),function(t){return Dh(e,t,r)}):function(t){return Dh(e,t)}}(yg))})))).pipe(function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ih(t,e,n))}}((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==yg)return t;if(r===yg&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||rg(r))return r}return t}),t)}),yg),nd((function(t){return t!==yg})),kt((function(t){return rg(t)?t:!0===t})),gh(1))}))}function bg(t,e){return null!==t&&e&&e(new Xh(t)),td(!0)}function Eg(t,e){return null!==t&&e&&e(new zh(t)),td(!0)}function Tg(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?td(r.map((function(r){return Jd((function(){var i,a=vg(r,e,n);if(function(t){return t&&ng(t.canActivate)}(a))i=ap(a.canActivate(e,t));else{if(!ng(a))throw new Error("Invalid CanActivate guard");i=ap(a(e,t))}return i.pipe(yh())}))}))).pipe(_g()):td(!0)}function Sg(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return Jd((function(){return td(e.guards.map((function(i){var a,o=vg(i,e.node,n);if(function(t){return t&&ng(t.canActivateChild)}(o))a=ap(o.canActivateChild(r,t));else{if(!ng(o))throw new Error("Invalid CanActivateChild guard");a=ap(o(r,t))}return a.pipe(yh())}))).pipe(_g())}))}));return td(i).pipe(_g())}var wg=function t(){J(this,t)},Ag=function(){function t(e,n,r,i,a,o){J(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return Y(t,[{key:"recognize",value:function(){try{var t=Dg(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Np([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Rp(n,e),i=new Fp(this.url,r);return this.inheritParamsAndData(i._root),td(i)}catch(a){return new pt((function(t){return t.error(a)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=Lp(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=fp(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i,a=B(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(s){if(!(s instanceof wg))throw s}}}catch(u){a.e(u)}finally{a.f()}if(this.noLeftoversInUrl(e,n,r))return[];throw new wg}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new wg;if((t.outlet||"primary")!==r)throw new wg;var i,a=[],o=[];if("**"===t.path){var s=n.length>0?rp(n).parameters:{};i=new Np(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kg(t),r,t.component,t,xg(e),Cg(e)+n.length,Og(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new wg;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Jh)(n,t,e);if(!r)throw new wg;var i={};ip(r.posParams,(function(t,e){i[e]=t.path}));var a=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=u.consumedSegments,o=n.slice(u.lastChild),i=new Np(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kg(t),r,t.component,t,xg(e),Cg(e)+a.length,Og(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),c=Dg(e,a,o,l,this.relativeLinkResolution),f=c.segmentGroup,d=c.slicedSegments;if(0===d.length&&f.hasChildren()){var h=this.processChildren(l,f);return[new Rp(i,h)]}if(0===l.length&&0===d.length)return[new Rp(i,[])];var p=this.processSegment(l,f,d,"primary");return[new Rp(i,p)]}}]),t}();function xg(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Cg(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Dg(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return Ig(t,e,n)&&"primary"!==Rg(n)}))}(t,n,r)){var a=new up(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var a,o=B(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(""===s.path&&"primary"!==Rg(s)){var u=new up([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[Rg(s)]=u}}}catch(l){o.e(l)}finally{o.f()}return i}(t,e,r,new up(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return Ig(t,e,n)}))}(t,n,r)){var o=new up(t.segments,function(t,e,n,r,i,a){var o,s={},u=B(r);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(Ig(t,n,l)&&!i[Rg(l)]){var c=new up([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===a?t.segments.length:e.length,s[Rg(l)]=c}}}catch(f){u.e(f)}finally{u.f()}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}var s=new up(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Ig(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Rg(t){return t.outlet||"primary"}function kg(t){return t.data||{}}function Og(t){return t.resolve||{}}function Pg(t){return function(e){return e.pipe(Ah((function(e){var n=t(e);return n?Lt(n).pipe(kt((function(){return e}))):Lt([e])})))}}var Mg,Lg=function(){function t(){J(this,t)}return Y(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),Ng=((Mg=function t(){J(this,t)}).\u0275fac=function(t){return new(t||Mg)},Mg.\u0275cmp=cn({type:Mg,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&gs(0,"router-outlet")},directives:function(){return[sv]},encapsulation:2}),Mg);function Fg(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];jg(r,Bg(e,r))}}function jg(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&Fg(t.children,e)}function Bg(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Ug(t){var e=t.children&&t.children.map(Ug),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Ng),n}var Vg=new Me("ROUTES"),Gg=function(){function t(e,n,r,i){J(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return Y(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(kt((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new eg(np(i.injector.get(Vg)).map(Ug),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Lt(this.loader.load(t)):ap(t()).pipe(Nt((function(t){return t instanceof Ke?td(t):Lt(e.compiler.compileModuleAsync(t))})))}}]),t}(),Hg=function t(){J(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new Yg,this.attachRef=null},Yg=function(){function t(){J(this,t),this.contexts=new Map}return Y(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Hg,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),zg=function(){function t(){J(this,t)}return Y(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function qg(t){throw t}function Xg(t,e,n){return e.parse("/")}function Kg(t,e){return td(null)}var Wg,Qg,$g,Zg=(($g=function(){function t(e,n,r,i,a,o,s,u){var l=this;J(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new bt,this.errorHandler=qg,this.malformedUriErrorHandler=Xg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kg,afterPreactivation:Kg},this.urlHandlingStrategy=new zg,this.routeReuseStrategy=new Lg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(Xe),this.console=a.get(Fl);var c=a.get(Ql);this.isNgZoneEnabled=c instanceof Ql,this.resetConfig(u),this.currentUrlTree=new sp(new up([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gg(o,s,(function(t){return l.triggerEvent(new Hh(t))}),(function(t){return l.triggerEvent(new Yh(t))})),this.routerState=Pp(this.currentUrlTree,this.rootComponentType),this.transitions=new qd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return Y(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(nd((function(t){return 0!==t.id})),kt((function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),Ah((function(t){var r,i,a,o,s=!1,u=!1;return td(t).pipe(bh((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Ah((function(t){var r,i,a,o,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return td(t).pipe(Ah((function(t){var r=e.transitions.getValue();return n.next(new Mh(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?$d:[t]})),Ah((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,a=e.urlSerializer,o=e.config,function(t){return t.pipe(Ah((function(t){return function(t,e,n,r,i){return new lg(t,e,n,r,i).apply()}(r,i,a,t.extractedUrl,o).pipe(kt((function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})})))})))}),bh((function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,a){return function(r){return r.pipe(Nt((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Ag(t,e,n,r,i,a).recognize()}(t,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,e.serializeUrl(o)),i,a).pipe(kt((function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})})));var o})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),bh((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),bh((function(t){var r=new jh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,l=t.extractedUrl,c=t.source,f=t.restoredState,d=t.extras,h=new Mh(u,e.serializeUrl(l),c,f);n.next(h);var p=Pp(l,e.rootComponentType).snapshot;return td(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:l,extras:Object.assign(Object.assign({},d),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),$d})),Pg((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,a=t.rawUrl,o=t.extras,s=o.skipLocationChange,u=o.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})})),bh((function(t){var n=new Bh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),kt((function(t){return Object.assign(Object.assign({},t),{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,a=n._root,function t(e,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=kp(n);return e.children.forEach((function(e){!function(e,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!cp(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cp(t.url,e.url)||!tp(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vp(t,e)||!tp(t.queryParams,e.queryParams);case"paramsChange":default:return!Vp(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?a.canActivateChecks.push(new pg(i)):(o.data=s.data,o._resolvedData=s._resolvedData),t(e,n,o.component?u?u.children:null:r,i,a),l&&a.canDeactivateChecks.push(new gg(u&&u.outlet&&u.outlet.component||null,s))}else s&&mg(n,u,a),a.canActivateChecks.push(new pg(i)),t(e,null,o.component?u?u.children:null:r,i,a)}(e,o[e.value.outlet],r,i.concat([e.value]),a),delete o[e.value.outlet]})),ip(o,(function(t,e){return mg(t,r.getContext(e),a)})),a}(a,r?r._root:null,i,[a.value]))});var n,r,i,a})),function(t,e){return function(n){return n.pipe(Nt((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?td(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Lt(t).pipe(Nt((function(t){return function(t,e,n,r,i){var a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?td(a.map((function(a){var o,s=vg(a,e,i);if(function(t){return t&&ng(t.canDeactivate)}(s))o=ap(s.canDeactivate(t,e,n,r));else{if(!ng(s))throw new Error("Invalid CanDeactivate guard");o=ap(s(t,e,n,r))}return o.pipe(yh())}))).pipe(_g()):td(!0)}(t.component,t.route,n,e,r)})),yh((function(t){return!0!==t}),!0))}(s,r,i,t).pipe(Nt((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Lt(e).pipe(ed((function(e){return Lt([Eg(e.route.parent,r),bg(e.route,r),Sg(t,e.path,n),Tg(t,e.route,n)]).pipe(th(),yh((function(t){return!0!==t}),!0))})),yh((function(t){return!0!==t}),!0))}(r,o,t,e):td(n)})),kt((function(t){return Object.assign(Object.assign({},n),{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),bh((function(t){if(rg(t.guardsResult)){var n=Zh('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),bh((function(t){var n=new Uh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),nd((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new Nh(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),Pg((function(t){if(t.guards.canActivateChecks.length)return td(t).pipe(bh((function(t){var n=new Vh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Ah((function(t){var r,i,a=!1;return td(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(Nt((function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return td(t);var a=0;return Lt(n).pipe(ed((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return td({});var a={};return Lt(i).pipe(Nt((function(i){return function(t,e,n,r){var i=vg(t,e,r);return ap(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(bh((function(t){a[i]=t})))})),nh(1),Nt((function(){return Object.keys(a).length===i.length?td(a):$d})))}(t._resolve,t,e,r).pipe(kt((function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Lp(t,n).resolve),null})))}(t.route,e,r,i)})),bh((function(){return a++})),nh(1),Nt((function(e){return a===n.length?td(t):$d})))})))}),bh({next:function(){return a=!0},complete:function(){if(!a){var r=new Nh(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))})),bh((function(t){var n=new Gh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})))})),Pg((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,a=t.rawUrl,o=t.extras,s=o.skipLocationChange,u=o.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})})),kt((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var a=function(e,n,r){return n.children.map((function(n){var i,a=B(r.children);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(e.shouldReuseRoute(o.value.snapshot,n.value))return t(e,n,o)}}catch(s){a.e(s)}finally{a.f()}return t(e,n)}))}(e,n,r);return new Rp(i,a)}var o=e.retrieve(n.value);if(o){var s=o.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new Mp(new qd((u=n.value).url),new qd(u.params),new qd(u.queryParams),new qd(u.fragment),new qd(u.data),u.outlet,u.component,u),c=n.children.map((function(n){return t(e,n)}));return new Rp(l,c)}(t,e._root,n?n._root:void 0);return new Op(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})})),bh((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(i=e.rootContexts,a=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},kt((function(t){return new Jp(a,t.targetRouterState,t.currentRouterState,o).activate(i),t}))),bh({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){e.resetUrlToCurrentUrlTree();var r=new Nh(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new kh(r))}),dh((function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=rg(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var a=new Nh(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(a),i?setTimeout((function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);return e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})}),0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var o=new Fh(t.id,e.serializeUrl(t.extractedUrl),r);n.next(o);try{t.resolve(e.errorHandler(r))}catch(l){t.reject(l)}}var s;return $d})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){Fg(t),this.config=t.map(Ug),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,i=e.fragment,a=e.preserveQueryParams,o=e.queryParamsHandling,s=e.preserveFragment;gi()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,l=s?this.currentUrlTree.fragment:i,c=null;if(o)switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=a?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Hp(e.root,e.root,e,r,i);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Yp(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return ip(r.outlets,(function(t,e){a[e]="string"==typeof t?t.split("/"):t})),[].concat(j(t),[{outlets:a}])}if(r.segmentPath)return[].concat(j(t),[r.segmentPath])}return"string"!=typeof r?[].concat(j(t),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(j(t),[r])}),[]);return new Yp(n,e,r)}(n);if(a.toRoot())return Hp(e.root,new up([],{}),e,r,i);var o=function(t,e,n){if(t.isAbsolute)return new zp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new zp(r,r===e.root,0)}var i=Gp(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new zp(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),s=o.processChildren?Kp(o.segmentGroup,o.index,a.commands):Xp(o.segmentGroup,o.index,a.commands);return Hp(o.segmentGroup,s,e,r,i)}(u,this.currentUrlTree,t,c,l)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};gi()&&this.isNgZoneEnabled&&!Ql.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=rg(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(rg(t))return op(this.currentUrlTree,t,e);var n=this.parseUrl(t);return op(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Lh(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var a,o,s,u=this.getTransition();if(u&&"imperative"!==e&&"imperative"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"hashchange"==e&&"popstate"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"popstate"==e&&"hashchange"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);i?(a=i.resolve,o=i.reject,s=i.promise):s=new Promise((function(t,e){a=t,o=e}));var l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}()).\u0275fac=function(t){return new(t||$g)(He(No),He(dp),He(Yg),He(Kc),He($o),He(mc),He(Xl),He(void 0))},$g.\u0275prov=ae({token:$g,factory:$g.\u0275fac}),$g),Jg=((Qg=function(){function t(e,n,r,i,a){J(this,t),this.router=e,this.route=n,this.commands=[],this.onChanges=new bt,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return Y(t,[{key:"ngOnChanges",value:function(t){this.onChanges.next(this)}},{key:"onClick",value:function(){var t={skipLocationChange:ev(this.skipLocationChange),replaceUrl:ev(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){gi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ev(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ev(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Qg)(ls(Zg),ls(Mp),cs("tabindex"),ls(_u),ls(gu))},Qg.\u0275dir=vn({type:Qg,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Es("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Dn]}),Qg),tv=((Wg=function(){function t(e,n,r){var i=this;J(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new bt,this.subscription=e.events.subscribe((function(t){t instanceof Lh&&i.updateTargetUrlAndHref()}))}return Y(t,[{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:ev(this.skipLocationChange),replaceUrl:ev(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){gi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ev(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ev(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Wg)(ls(Zg),ls(Mp),ls(Uc))},Wg.\u0275dir=vn({type:Wg,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Es("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&($s("href",e.href,Ui),as("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Dn]}),Wg);function ev(t){return""===t||!!t}var nv,rv,iv,av,ov=((rv=function(){function t(e,n,r,i,a,o){var s=this;J(this,t),this.router=e,this.element=n,this.renderer=r,this.cdr=i,this.link=a,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe((function(t){t instanceof Lh&&s.update()}))}return Y(t,[{key:"ngAfterContentInit",value:function(){var t=this;Lt([this.links.changes,this.linksWithHrefs.changes,td(null)]).pipe(Bt()).subscribe((function(e){t.update(),t.subscribeToEachLinkOnChanges()}))}},{key:"subscribeToEachLinkOnChanges",value:function(){var t,e=this;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();var n=[].concat(j(this.links.toArray()),j(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter((function(t){return!!t})).map((function(t){return t.onChanges}));this.linkInputChangesSubscription=Lt(n).pipe(Bt()).subscribe((function(t){e.isActive!==e.isLinkActive(e.router)(t)&&e.update()}))}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.cdr.markForCheck(),t.classes.forEach((function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter((function(t){return!!t}))}}]),t}()).\u0275fac=function(t){return new(t||rv)(ls(Zg),ls(gu),ls(_u),ls(Mo),ls(Jg,8),ls(tv,8))},rv.\u0275dir=vn({type:rv,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(Sl(n,Jg,!0),Sl(n,tv,!0)),2&t&&(_l(r=wl())&&(e.links=r),_l(r=wl())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Dn]}),rv),sv=((nv=function(){function t(e,n,r,i,a){J(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new ul,this.deactivateEvents=new ul,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return Y(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new uv(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}()).\u0275fac=function(t){return new(t||nv)(ls(Yg),ls(Uu),ls(pu),cs("name"),ls(Mo))},nv.\u0275dir=vn({type:nv,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),nv),uv=function(){function t(e,n,r){J(this,t),this.route=e,this.childContexts=n,this.parent=r}return Y(t,[{key:"get",value:function(t,e){return t===Mp?this.route:t===Yg?this.childContexts:this.parent.get(t,e)}}]),t}(),lv=function t(){J(this,t)},cv=function(){function t(){J(this,t)}return Y(t,[{key:"preload",value:function(t,e){return td(null)}}]),t}(),fv=((av=function(){function t(e,n,r,i,a){J(this,t),this.router=e,this.injector=i,this.preloadingStrategy=a,this.loader=new Gg(n,r,(function(t){return e.triggerEvent(new Hh(t))}),(function(t){return e.triggerEvent(new Yh(t))}))}return Y(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(nd((function(t){return t instanceof Lh})),ed((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(Xe);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=B(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(t,a)):a.children&&r.push(this.processRoutes(t,a.children))}}catch(s){i.e(s)}finally{i.f()}return Lt(r).pipe(Bt(),kt((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Nt((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}()).\u0275fac=function(t){return new(t||av)(He(Zg),He(mc),He(Xl),He($o),He(lv))},av.\u0275prov=ae({token:av,factory:av.\u0275fac}),av),dv=((iv=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return Y(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Mh?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Lh&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Wh&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Wh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||iv)(He(Zg),He(vf),He(void 0))},iv.\u0275prov=ae({token:iv,factory:iv.\u0275fac}),iv),hv=new Me("ROUTER_CONFIGURATION"),pv=new Me("ROUTER_FORROOT_GUARD"),gv=[Kc,{provide:dp,useClass:hp},{provide:Zg,useFactory:function(t,e,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,c=new Zg(null,t,e,n,r,i,a,np(o));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),s.errorHandler&&(c.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(c.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var f=xc();c.events.subscribe((function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()}))}return s.onSameUrlNavigation&&(c.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(c.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(c.relativeLinkResolution=s.relativeLinkResolution),c},deps:[dp,Yg,Kc,$o,mc,Xl,Vg,hv,[function(){return function t(){J(this,t)}}(),new Jt],[function(){return function t(){J(this,t)}}(),new Jt]]},Yg,{provide:Mp,useFactory:function(t){return t.routerState.root},deps:[Zg]},{provide:mc,useClass:bc},fv,cv,function(){function t(){J(this,t)}return Y(t,[{key:"preload",value:function(t,e){return e().pipe(dh((function(){return td(null)})))}}]),t}(),{provide:hv,useValue:{enableTracing:!1}}];function vv(){return new lc("Router",Zg)}var mv,yv=((mv=function(){function t(e,n){J(this,t)}return Y(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[gv,Tv(e),{provide:pv,useFactory:Ev,deps:[[Zg,new Jt,new ee]]},{provide:hv,useValue:n||{}},{provide:Uc,useFactory:bv,deps:[Ic,[new Zt(zc),new Jt],hv]},{provide:dv,useFactory:_v,deps:[Zg,vf,hv]},{provide:lv,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:cv},{provide:lc,multi:!0,useFactory:vv},[wv,{provide:Il,multi:!0,useFactory:Av,deps:[wv]},{provide:Cv,useFactory:xv,deps:[wv]},{provide:Nl,multi:!0,useExisting:Cv}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Tv(e)]}}}]),t}()).\u0275mod=pn({type:mv}),mv.\u0275inj=oe({factory:function(t){return new(t||mv)(He(pv,8),He(Zg,8))}}),mv);function _v(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new dv(t,e,n)}function bv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Xc(t,e):new qc(t,e)}function Ev(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Tv(t){return[{provide:Zo,multi:!0,useValue:t},{provide:Vg,multi:!0,useValue:t}]}var Sv,wv=((Sv=function(){function t(e){J(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new bt}return Y(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(Oc,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(Zg),i=t.injector.get(hv);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?td(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(hv),n=this.injector.get(fv),r=this.injector.get(dv),i=this.injector.get(Zg),a=this.injector.get(gc);t===a.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}()).\u0275fac=function(t){return new(t||Sv)(He($o))},Sv.\u0275prov=ae({token:Sv,factory:Sv.\u0275fac}),Sv);function Av(t){return t.appInitializer.bind(t)}function xv(t){return t.bootstrapListener.bind(t)}var Cv=new Me("Router Initializer");function Dv(t,e){return new pt((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=Lt(t[s]),l=!1;n.add(u.subscribe({next:function(t){l||(l=!0,o++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++a!==r&&l||(o===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var Iv,Rv,kv,Ov,Pv=new Me("NgValueAccessor"),Mv={provide:Pv,useExisting:ye((function(){return Lv})),multi:!0},Lv=((Iv=function(){function t(e,n){J(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return Y(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Iv)(ls(_u),ls(gu))},Iv.\u0275dir=vn({type:Iv,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[fu([Mv])]}),Iv),Nv={provide:Pv,useExisting:ye((function(){return jv})),multi:!0},Fv=new Me("CompositionEventMode"),jv=((Ov=function(){function t(e,n,r){var i;J(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=xc()?xc().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return Y(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||Ov)(ls(_u),ls(gu),ls(Fv,8))},Ov.\u0275dir=vn({type:Ov,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Es("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[fu([Nv])]}),Ov),Bv=((kv=function(){function t(){J(this,t)}return Y(t,[{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),t}()).\u0275fac=function(t){return new(t||kv)},kv.\u0275dir=vn({type:kv}),kv),Uv=((Rv=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Bv)).\u0275fac=function(t){return Vv(t||Rv)},Rv.\u0275dir=vn({type:Rv,features:[Js]}),Rv),Vv=ai(Uv);function Gv(){throw new Error("unimplemented")}var Hv,Yv,zv=function(t){z(n,t);var e=X(n);function n(){var t;return J(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return Y(n,[{key:"validator",get:function(){return Gv()}},{key:"asyncValidator",get:function(){return Gv()}}]),n}(Bv),qv=function(){function t(e){J(this,t),this._cd=e}return Y(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}(),Xv=((Yv=function(t){z(n,t);var e=X(n);function n(t){return J(this,n),e.call(this,t)}return n}(qv)).\u0275fac=function(t){return new(t||Yv)(ls(zv,2))},Yv.\u0275dir=vn({type:Yv,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Fs("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Js]}),Yv),Kv=((Hv=function(t){z(n,t);var e=X(n);function n(t){return J(this,n),e.call(this,t)}return n}(qv)).\u0275fac=function(t){return new(t||Hv)(ls(Uv,2))},Hv.\u0275dir=vn({type:Hv,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Fs("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Js]}),Hv);function Wv(t){return null==t||0===t.length}function Qv(t){return null!=t&&"number"==typeof t.length}var $v=new Me("NgValidators"),Zv=new Me("NgAsyncValidators"),Jv=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,tm=function(){function t(){J(this,t)}return Y(t,null,[{key:"min",value:function(t){return function(e){if(Wv(e.value)||Wv(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(Wv(e.value)||Wv(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return Wv(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return Wv(t.value)||Jv.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){return Wv(e.value)||!Qv(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"maxLength",value:function(t){return function(e){return Qv(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(Wv(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(em);return 0==e.length?null:function(t){return rm(im(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(em);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(nt(r))return Dv(r,null);if(rt(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Dv(i.map((function(t){return r[t]})),i)}}if("function"==typeof e[e.length-1]){var a=e.pop();return Dv(e=1===e.length&&nt(e[0])?e[0]:e,null).pipe(kt((function(t){return a.apply(void 0,j(t))})))}return Dv(e,null)}(im(t,e).map(nm)).pipe(kt(rm))}}}]),t}();function em(t){return null!=t}function nm(t){var e=_s(t)?Lt(t):t;if(!bs(e))throw new Error("Expected validator to return Promise or Observable.");return e}function rm(t){var e={};return t.forEach((function(t){e=null!=t?Object.assign(Object.assign({},e),t):e})),0===Object.keys(e).length?null:e}function im(t,e){return e.map((function(e){return e(t)}))}function am(t){return t.map((function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}}))}var om,sm,um,lm,cm,fm,dm={provide:Pv,useExisting:ye((function(){return hm})),multi:!0},hm=((om=function(){function t(e,n){J(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return Y(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||om)(ls(_u),ls(gu))},om.\u0275dir=vn({type:om,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Es("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[fu([dm])]}),om),pm={provide:Pv,useExisting:ye((function(){return vm})),multi:!0},gm=((um=function(){function t(){J(this,t),this._accessors=[]}return Y(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||um)},um.\u0275prov=ae({token:um,factory:um.\u0275fac}),um),vm=((sm=function(){function t(e,n,r,i){J(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return Y(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(zv),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()).\u0275fac=function(t){return new(t||sm)(ls(_u),ls(gu),ls(gm),ls($o))},sm.\u0275dir=vn({type:sm,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[fu([pm])]}),sm),mm={provide:Pv,useExisting:ye((function(){return ym})),multi:!0},ym=((lm=function(){function t(e,n){J(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return Y(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||lm)(ls(_u),ls(gu))},lm.\u0275dir=vn({type:lm,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[fu([mm])]}),lm),_m='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',bm='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Em=function(){function t(){J(this,t)}return Y(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+_m)}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(bm,'\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>'))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+_m)}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+bm)}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,".\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}(),Tm={provide:Pv,useExisting:ye((function(){return Sm})),multi:!0},Sm=((cm=function(){function t(e,n){J(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return Y(t,[{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}}]),t}()).\u0275fac=function(t){return new(t||cm)(ls(_u),ls(gu))},cm.\u0275dir=vn({type:cm,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[fu([Tm])]}),cm),wm={provide:Pv,useExisting:ye((function(){return Am})),multi:!0},Am=((fm=function(){function t(e,n){J(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return Y(t,[{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,a=0;a<i.length;a++){var o=i.item(a),s=e._getOptionValue(o.value);r.push(s)}else for(var u=n.options,l=0;l<u.length;l++){var c=u.item(l);if(c.selected){var f=e._getOptionValue(c.value);r.push(f)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}}]),t}()).\u0275fac=function(t){return new(t||fm)(ls(_u),ls(gu))},fm.\u0275dir=vn({type:fm,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[fu([wm])]}),fm);function xm(t,e){return[].concat(j(e.path),[t])}function Cm(t,e){t||km(e,"Cannot find control with"),e.valueAccessor||km(e,"No value accessor for form control with"),t.validator=tm.compose([t.validator,e.validator]),t.asyncValidator=tm.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Dm(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Dm(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function Dm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Im(t,e){null==t&&km(e,"Cannot find control with"),t.validator=tm.compose([t.validator,e.validator]),t.asyncValidator=tm.composeAsync([t.asyncValidator,e.asyncValidator])}function Rm(t){return km(t,"There is no FormControl instance attached to form control element with")}function km(t,e){var n;throw n=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(e," ").concat(n))}function Om(t){return null!=t?tm.compose(am(t)):null}function Pm(t){return null!=t?tm.composeAsync(am(t)):null}var Mm=[Lv,ym,hm,Sm,Am,vm];function Lm(t){var e=Fm(t)?t.validators:t;return Array.isArray(e)?Om(e):e||null}function Nm(t,e){var n=Fm(e)?e.asyncValidators:t;return Array.isArray(n)?Pm(n):n||null}function Fm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var jm,Bm,Um,Vm,Gm,Hm=function(){function t(e,n){J(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Y(t,[{key:"setValidators",value:function(t){this.validator=Lm(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=Nm(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=nm(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach((function(t){r=r instanceof zm?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof qm&&r.at(t)||null})),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new ul,this.statusChanges=new ul}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Fm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),Ym=function(t){z(n,t);var e=X(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return J(this,n),(t=e.call(this,Lm(i),Nm(a,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return Y(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(Hm),zm=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,Lm(r),Nm(i,r))).controls=t,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return Y(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof Ym?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Hm),qm=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,Lm(r),Nm(i,r))).controls=t,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return Y(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof Ym?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=B(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(Hm),Xm=((jm=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return xm(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Om(this._validators)}},{key:"asyncValidator",get:function(){return Pm(this._asyncValidators)}}]),n}(Uv)).\u0275fac=function(t){return Km(t||jm)},jm.\u0275dir=vn({type:jm,features:[Js]}),jm),Km=ai(Xm),Wm=((Bm=function t(){J(this,t)}).\u0275fac=function(t){return new(t||Bm)},Bm.\u0275dir=vn({type:Bm,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Bm),Qm=new Me("NgModelWithFormControlWarning"),$m={provide:Uv,useExisting:ye((function(){return Zm}))},Zm=((Um=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this))._validators=t,i._asyncValidators=r,i.submitted=!1,i.directives=[],i.form=null,i.ngSubmit=new ul,i}return Y(n,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return Cm(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){!function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}},{key:"addFormGroup",value:function(t){var e=this.form.get(t.path);Im(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var e=this.form.get(t.path);Im(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach((function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})),this.ngSubmit.emit(t),!1;var e}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange((function(){return Rm(e)})),e.valueAccessor.registerOnTouched((function(){return Rm(e)})),e._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),e._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(e.control,e),n&&Cm(n,e),e.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=Om(this._validators);this.form.validator=tm.compose([this.form.validator,t]);var e=Pm(this._asyncValidators);this.form.asyncValidator=tm.composeAsync([this.form.asyncValidator,e])}},{key:"_checkFormPresent",value:function(){this.form||Em.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),n}(Uv)).\u0275fac=function(t){return new(t||Um)(ls($v,10),ls(Zv,10))},Um.\u0275dir=vn({type:Um,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Es("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fu([$m]),Js,Dn]}),Um),Jm={provide:Uv,useExisting:ye((function(){return ty}))},ty=((Vm=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this))._parent=t,a._validators=r,a._asyncValidators=i,a}return Y(n,[{key:"_checkParentType",value:function(){ry(this._parent)&&Em.groupParentException()}}]),n}(Xm)).\u0275fac=function(t){return new(t||Vm)(ls(Uv,13),ls($v,10),ls(Zv,10))},Vm.\u0275dir=vn({type:Vm,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[fu([Jm]),Js]}),Vm),ey={provide:Uv,useExisting:ye((function(){return ny}))},ny=((Gm=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this))._parent=t,a._validators=r,a._asyncValidators=i,a}return Y(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"_checkParentType",value:function(){ry(this._parent)&&Em.arrayParentException()}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return xm(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"validator",get:function(){return Om(this._validators)}},{key:"asyncValidator",get:function(){return Pm(this._asyncValidators)}}]),n}(Uv)).\u0275fac=function(t){return new(t||Gm)(ls(Uv,13),ls($v,10),ls(Zv,10))},Gm.\u0275dir=vn({type:Gm,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[fu([ey]),Js]}),Gm);function ry(t){return!(t instanceof ty||t instanceof Zm||t instanceof ny)}var iy,ay,oy,sy,uy,ly={provide:zv,useExisting:ye((function(){return cy}))},cy=((uy=function(t){z(n,t);var e=X(n);function n(t,r,i,a,o){var s;return J(this,n),(s=e.call(this))._ngModelWarningConfig=o,s._added=!1,s.update=new ul,s._ngModelWarningSent=!1,s._parent=t,s._rawValidators=r||[],s._rawAsyncValidators=i||[],s.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||km(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach((function(e){var a;e.constructor===jv?n=e:(a=e,Mm.some((function(t){return a.constructor===t}))?(r&&km(t,"More than one built-in value accessor matches form control with"),r=e):(i&&km(t,"More than one custom value accessor matches form control with"),i=e))})),i||r||n||(km(t,"No valid value accessor for form control with"),null)}(W(s),a),s}return Y(n,[{key:"ngOnChanges",value:function(t){var e,r;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(e=n,r=this._ngModelWarningConfig,gi()&&"never"!==r&&((null!==r&&"once"!==r||e._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Em.ngModelWarning("formControlName"),e._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_checkParentType",value:function(){!(this._parent instanceof ty)&&this._parent instanceof Xm?Em.ngModelGroupException():this._parent instanceof ty||this._parent instanceof Zm||this._parent instanceof ny||Em.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}},{key:"isDisabled",set:function(t){Em.disabledAttrWarning()}},{key:"path",get:function(){return xm(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Om(this._rawValidators)}},{key:"asyncValidator",get:function(){return Pm(this._rawAsyncValidators)}}]),n}(zv)).\u0275fac=function(t){return new(t||uy)(ls(Uv,13),ls($v,10),ls(Zv,10),ls(Pv,10),ls(Qm,8))},uy.\u0275dir=vn({type:uy,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[fu([ly]),Js,Dn]}),uy._ngModelWarningSentOnce=!1,uy),fy=((sy=function t(){J(this,t)}).\u0275mod=pn({type:sy}),sy.\u0275inj=oe({factory:function(t){return new(t||sy)}}),sy),dy=((oy=function(){function t(){J(this,t)}return Y(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),r=null,i=null,a=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,a=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new zm(n,{asyncValidators:i,updateOn:a,validators:r})}},{key:"control",value:function(t,e,n){return new Ym(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map((function(t){return r._createControl(t)}));return new qm(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=e._createControl(t[r])})),n}},{key:"_createControl",value:function(t){return t instanceof Ym||t instanceof zm||t instanceof qm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}()).\u0275fac=function(t){return new(t||oy)},oy.\u0275prov=ae({token:oy,factory:oy.\u0275fac}),oy),hy=((ay=function t(){J(this,t)}).\u0275mod=pn({type:ay}),ay.\u0275inj=oe({factory:function(t){return new(t||ay)},providers:[gm],imports:[fy]}),ay),py=((iy=function(){function t(){J(this,t)}return Y(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Qm,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}()).\u0275mod=pn({type:iy}),iy.\u0275inj=oe({factory:function(t){return new(t||iy)},providers:[dy,gm],imports:[fy]}),iy),gy=function(t){z(n,t);var e=X(n);function n(t,r){var i;return J(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return Y(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){z(n,t);var e=X(n);function n(t,r){return J(this,n),e.call(this)}return Y(n,[{key:"schedule",value:function(t){return this}}]),n}(ot)),vy=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;J(this,t),this.SchedulerAction=e,this.now=n}return Y(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),my=new(function(t){z(n,t);var e=X(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vy.now;return J(this,n),(r=e.call(this,t,(function(){return n.delegate&&n.delegate!==W(r)?n.delegate.now():i()}))).actions=[],r.active=!1,r.scheduled=void 0,r}return Y(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):U(Z(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(vy))(gy);function yy(t,e,n,r){return V(n)&&(r=n,n=void 0),r?yy(t,e,n).pipe(kt((function(t){return nt(t)?r.apply(void 0,j(t)):r(t)}))):new pt((function(r){!function t(e,n,r,i,a){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,a),o=function(){return s.removeEventListener(n,r,a)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),o=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var l=e;e.addListener(n,r),o=function(){return l.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,f=e.length;c<f;c++)t(e[c],n,r,i,a)}i.add(o)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)}))}var _y=function(){function t(){J(this,t)}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new by(t))}}]),t}(),by=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).hasFirst=!1,r.observables=[],r.subscriptions=[],r}return Y(n,[{key:"_next",value:function(t){this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=It(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}},{key:"notifyNext",value:function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var o=this.subscriptions[a];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(e)}}]),n}(Rt);function Ey(t){return function(e){return e.lift(new Ty(t))}}var Ty=function(){function t(e){J(this,t),this.notifier=e}return Y(t,[{key:"call",value:function(t,e){var n=new Sy(t),r=It(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),Sy=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).seenValue=!1,r}return Y(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Rt);function wy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new xy(e,n))}}var Ay,xy=function(){function t(e,n){J(this,t),this.observables=e,this.project=n}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new Cy(t,this.observables,this.project))}}]),t}(),Cy=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;J(this,n),(a=e.call(this,t)).observables=r,a.project=i,a.toRespond=[];var o=r.length;a.values=new Array(o);for(var s=0;s<o;s++)a.toRespond.push(s);for(var u=0;u<o;u++){var l=r[u];a.add(It(W(a),l,l,u))}return a}return Y(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e;var a=this.toRespond;if(a.length>0){var o=a.indexOf(n);-1!==o&&a.splice(o,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(j(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Rt),Dy=((Ay=function(){function t(e,n,r){J(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return Y(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return td(this.value);case"E":return t=this.error,new pt((function(e){return e.error(t)}));case"C":return Zd()}var t;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new Ay("C"),Ay.undefinedValueNotification=new Ay("N",void 0),Ay);function Iy(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:my,r=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new Ry(r,n))}}var Ry=function(){function t(e,n){J(this,t),this.delay=e,this.scheduler=n}return Y(t,[{key:"call",value:function(t,e){return e.subscribe(new ky(t,this.delay,this.scheduler))}}]),t}(),ky=function(t){z(n,t);var e=X(n);function n(t,r,i){var a;return J(this,n),(a=e.call(this,t)).delay=r,a.scheduler=i,a.queue=[],a.active=!1,a.errored=!1,a}return Y(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new Oy(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(Dy.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(Dy.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(t,a)}else this.unsubscribe(),e.active=!1}}]),n}(lt),Oy=function t(e,n){J(this,t),this.time=e,this.notification=n},Py=["aria-label",$localize(N())];function My(t,e){if(1&t){var n=ys();hs(0,"button",1),r=Py,function(t,e,n,r){for(var i=Jn().index-20,a=[],o=0;o<r.length;o+=2)for(var s=r[o],u=r[o+1].split(el),l=0;l<u.length;l++){var c=u[l];if(1&l)throw new Error("ICU expressions are not yet supported in attributes");if(""!==c)if(c.match(tl))e.firstCreatePass&&null===e.data[21]&&We(nl(c,i,s),a);else{var f=Un(e,i);3===f.type&&Ga(f,t,s,c,null,null);var d=null!==f.inputs&&f.inputs[s];d&&no(e,t,d,s,c)}}e.firstCreatePass&&null===e.data[21]&&(e.data[21]=a)}(Qn(),$n(),0,r),Es("click",(function(){return Zn(n),ws().closeHandler()})),hs(2,"span",2),Ks(3,"\xd7"),ps(),ps()}var r}var Ly=["*"];$localize(L()),$localize(M()),$localize(P()),$localize(O()),$localize(k()),$localize(R()),$localize(I()),$localize(D()),$localize(C()),$localize(x());var Ny=["dialog"];function Fy(t,e){1&t&&Ks(0),2&t&&Ws(ws(2).title)}function jy(t,e){}function By(t,e){if(1&t&&(hs(0,"h3",3),ss(1,Fy,1,1,"ng-template",null,4,Dl),ss(3,jy,0,0,"ng-template",5),ps()),2&t){var n=us(2),r=ws();sa(3),fs("ngTemplateOutlet",r.isTitleTemplate()?r.title:n)("ngTemplateOutletContext",r.context)}}function Uy(t){return null!=t}$localize(A()),$localize(w()),$localize(S()),$localize(T()),$localize(E()),$localize(b()),$localize(_()),$localize(y()),$localize(m(),"\ufffd0\ufffd"),$localize(v()),$localize(g()),$localize(p()),$localize(h()),$localize(d()),$localize(f()),$localize(c()),$localize(l()),$localize(u()),$localize(o()),$localize(i()),$localize(r()),$localize(n(),"\ufffd0\ufffd"),$localize(e(),"\ufffd0\ufffd"),$localize(t()),"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var Vy,Gy,Hy,Yy,zy,qy,Xy,Ky,Wy=((Ky=function t(){J(this,t)}).\u0275mod=pn({type:Ky}),Ky.\u0275inj=oe({factory:function(t){return new(t||Ky)},imports:[[gf]]}),Ky),Qy=((Xy=function t(){J(this,t),this.dismissible=!0,this.type="warning"}).\u0275fac=function(t){return new(t||Xy)},Xy.\u0275prov=ae({factory:function(){return new Xy},token:Xy,providedIn:"root"}),Xy),$y=((qy=function(){function t(e,n,r){J(this,t),this._renderer=n,this._element=r,this.close=new ul,this.dismissible=e.dismissible,this.type=e.type}return Y(t,[{key:"closeHandler",value:function(){this.close.emit()}},{key:"ngOnChanges",value:function(t){var e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+e.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+e.currentValue))}},{key:"ngOnInit",value:function(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)}}]),t}()).\u0275fac=function(t){return new(t||qy)(ls(Qy),ls(_u),ls(gu))},qy.\u0275cmp=cn({type:qy,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert"],hostVars:2,hostBindings:function(t,e){2&t&&Fs("alert-dismissible",e.dismissible)},inputs:{dismissible:"dismissible",type:"type"},outputs:{close:"close"},features:[Dn],ngContentSelectors:Ly,decls:2,vars:1,consts:[["type","button","class","close",3,"click",4,"ngIf",6,"aria-label"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(t,e){1&t&&(xs(),Cs(0),ss(1,My,4,0,"button",0)),2&t&&(sa(1),fs("ngIf",e.dismissible))},directives:[uf],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),qy),Zy=((zy=function t(){J(this,t)}).\u0275mod=pn({type:zy}),zy.\u0275inj=oe({factory:function(t){return new(t||zy)},imports:[[gf]]}),zy),Jy=((Yy=function t(){J(this,t)}).\u0275mod=pn({type:Yy}),Yy.\u0275inj=oe({factory:function(t){return new(t||Yy)}}),Yy),t_=((Hy=function t(){J(this,t)}).\u0275mod=pn({type:Hy}),Hy.\u0275inj=oe({factory:function(t){return new(t||Hy)},imports:[[gf]]}),Hy),e_=((Gy=function t(){J(this,t),this.collapsed=!1}).\u0275fac=function(t){return new(t||Gy)},Gy.\u0275dir=vn({type:Gy,selectors:[["","ngbCollapse",""]],hostVars:4,hostBindings:function(t,e){2&t&&Fs("collapse",!0)("show",!e.collapsed)},inputs:{collapsed:["ngbCollapse","collapsed"]},exportAs:["ngbCollapse"]}),Gy),n_=((Vy=function t(){J(this,t)}).\u0275mod=pn({type:Vy}),Vy.\u0275inj=oe({factory:function(t){return new(t||Vy)}}),Vy),r_=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({}),i_=function(t,e){return!!e&&e.some((function(e){return e.contains(t)}))},a_=function(t,e){return!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e)},o_="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)),s_=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function u_(t){var e=Array.from(t.querySelectorAll(s_)).filter((function(t){return-1!==t.tabIndex}));return[e[0],e[e.length-1]]}var l_,c_,f_,d_,h_,p_,g_,v_,m_,y_,__,b_,E_,T_,S_,w_,A_,x_,C_,D_,I_,R_,k_,O_,P_=/\s+/,M_=new(function(){function t(){J(this,t)}return Y(t,[{key:"getAllStyles",value:function(t){return window.getComputedStyle(t)}},{key:"getStyle",value:function(t,e){return this.getAllStyles(t)[e]}},{key:"isStaticPositioned",value:function(t){return"static"===(this.getStyle(t,"position")||"static")}},{key:"offsetParent",value:function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}},{key:"position",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))e={top:(e=t.getBoundingClientRect()).top,bottom:e.bottom,left:e.left,right:e.right,height:e.height,width:e.width};else{var i=this.offsetParent(t);e=this.offset(t,!1),i!==document.documentElement&&(r=this.offset(i,!1)),r.top+=i.clientTop,r.left+=i.clientLeft}return e.top-=r.top,e.bottom-=r.top,e.left-=r.left,e.right-=r.left,n&&(e.top=Math.round(e.top),e.bottom=Math.round(e.bottom),e.left=Math.round(e.left),e.right=Math.round(e.right)),e}},{key:"offset",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft,a={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}},{key:"positionElements",value:function(t,e,n,r){var i=tt(n.split("-"),2),a=i[0],o=void 0===a?"top":a,s=i[1],u=void 0===s?"center":s,l=r?this.offset(t,!1):this.position(t,!1),c=this.getAllStyles(e),f=parseFloat(c.marginTop),d=parseFloat(c.marginBottom),h=parseFloat(c.marginLeft),p=parseFloat(c.marginRight),g=0,v=0;switch(o){case"top":g=l.top-(e.offsetHeight+f+d);break;case"bottom":g=l.top+l.height;break;case"left":v=l.left-(e.offsetWidth+h+p);break;case"right":v=l.left+l.width}switch(u){case"top":g=l.top;break;case"bottom":g=l.top+l.height-e.offsetHeight;break;case"left":v=l.left;break;case"right":v=l.left+l.width-e.offsetWidth;break;case"center":"top"===o||"bottom"===o?v=l.left+l.width/2-e.offsetWidth/2:g=l.top+l.height/2-e.offsetHeight/2}e.style.transform="translate(".concat(Math.round(v),"px, ").concat(Math.round(g),"px)");var m=e.getBoundingClientRect(),y=document.documentElement,_=window.innerHeight||y.clientHeight,b=window.innerWidth||y.clientWidth;return m.left>=0&&m.top>=0&&m.right<=b&&m.bottom<=_}}]),t}()),L_=((d_=function t(){J(this,t)}).\u0275mod=pn({type:d_}),d_.\u0275inj=oe({factory:function(t){return new(t||d_)},imports:[[gf,hy]]}),d_),N_=((f_=function t(){J(this,t)}).\u0275fac=function(t){return new(t||f_)},f_.\u0275dir=vn({type:f_,selectors:[["",8,"navbar"]]}),f_),F_=((c_=function t(){J(this,t)}).\u0275mod=pn({type:c_}),c_.\u0275inj=oe({factory:function(t){return new(t||c_)}}),c_),j_=((l_=function t(){J(this,t),this.backdrop=!0,this.keyboard=!0}).\u0275fac=function(t){return new(t||l_)},l_.\u0275prov=ae({factory:function(){return new l_},token:l_,providedIn:"root"}),l_),B_=function t(e,n,r){J(this,t),this.nodes=e,this.viewRef=n,this.componentRef=r},U_=function(){function t(e,n,r,i,a,o){J(this,t),this._type=e,this._injector=n,this._viewContainerRef=r,this._renderer=i,this._componentFactoryResolver=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}return Y(t,[{key:"open",value:function(t,e){return this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes)),this._windowRef}},{key:"close",value:function(){var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null))}},{key:"_getContentRef",value:function(t,e){if(t){if(t instanceof ju){var n=t.createEmbeddedView(e);return this._applicationRef.attachView(n),new B_([n.rootNodes],n)}return new B_([[this._renderer.createText(""+t)]])}return new B_([])}}]),t}(),V_=function(){},G_=((p_=function(){function t(e){J(this,t),this._document=e}return Y(t,[{key:"compensate",value:function(){var t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):V_}},{key:"_adjustBody",value:function(t){var e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=r+t+"px",function(){return e.style["padding-right"]=n}}},{key:"_isPresent",value:function(t){var e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}},{key:"_getWidth",value:function(){var t=this._document.createElement("div");t.className="modal-scrollbar-measure";var e=this._document.body;e.appendChild(t);var n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}]),t}()).\u0275fac=function(t){return new(t||p_)(He(Dc))},p_.\u0275prov=ae({factory:function(){return new p_(He(Dc))},token:p_,providedIn:"root"}),p_),H_=((h_=function t(){J(this,t)}).\u0275fac=function(t){return new(t||h_)},h_.\u0275cmp=cn({type:h_,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(t,e){2&t&&js("modal-backdrop fade show"+(e.backdropClass?" "+e.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),h_),Y_=function(){function t(){J(this,t)}return Y(t,[{key:"close",value:function(t){}},{key:"dismiss",value:function(t){}}]),t}(),z_=function(){function t(e,n,r,i){var a=this;J(this,t),this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=r,this._beforeDismiss=i,e.instance.dismissEvent.subscribe((function(t){a.dismiss(t)})),this.result=new Promise((function(t,e){a._resolve=t,a._reject=e})),this.result.then(null,(function(){}))}return Y(t,[{key:"close",value:function(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}},{key:"_dismiss",value:function(t){this._reject(t),this._removeModalElements()}},{key:"dismiss",value:function(t){var e=this;if(this._windowCmptRef)if(this._beforeDismiss){var n=this._beforeDismiss();n&&n.then?n.then((function(n){!1!==n&&e._dismiss(t)}),(function(){})):!1!==n&&this._dismiss(t)}else this._dismiss(t)}},{key:"_removeModalElements",value:function(){var t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){var e=this._backdropCmptRef.location.nativeElement;e.parentNode.removeChild(e),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}},{key:"componentInstance",get:function(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}}]),t}(),q_=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({}),X_=((b_=function(){function t(e,n,r){J(this,t),this._document=e,this._elRef=n,this._zone=r,this._closed$=new bt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ul}return Y(t,[{key:"dismiss",value:function(t){this.dismissEvent.emit(t)}},{key:"ngOnInit",value:function(){this._elWithFocus=this._document.activeElement}},{key:"ngAfterViewInit",value:function(){var t=this,e=this._elRef.nativeElement;if(this._zone.runOutsideAngular((function(){yy(e,"keydown").pipe(Ey(t._closed$),nd((function(e){return e.which===r_.Escape&&t.keyboard}))).subscribe((function(e){return requestAnimationFrame((function(){e.defaultPrevented||t._zone.run((function(){return t.dismiss(q_.ESC)}))}))}));var n=!1;yy(t._dialogEl.nativeElement,"mousedown").pipe(Ey(t._closed$),bh((function(){return n=!1})),Ah((function(){return yy(e,"mouseup").pipe(Ey(t._closed$),gh(1))})),nd((function(t){var n=t.target;return e===n}))).subscribe((function(){n=!0})),yy(e,"click").pipe(Ey(t._closed$)).subscribe((function(r){var i=r.target;!0!==t.backdrop||e!==i||n||t._zone.run((function(){return t.dismiss(q_.BACKDROP_CLICK)})),n=!1}))})),!e.contains(document.activeElement)){var n=e.querySelector("[ngbAutofocus]"),r=u_(e)[0];(n||r||e).focus()}}},{key:"ngOnDestroy",value:function(){var t,e=this,n=this._document.body,r=this._elWithFocus;t=r&&r.focus&&n.contains(r)?r:n,this._zone.runOutsideAngular((function(){setTimeout((function(){return t.focus()})),e._elWithFocus=null})),this._closed$.next()}}]),t}()).\u0275fac=function(t){return new(t||b_)(ls(Dc),ls(gu),ls(Ql))},b_.\u0275cmp=cn({type:b_,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var n;1&t&&bl(Ny,!0),2&t&&_l(n=wl())&&(e._dialogEl=n.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(t,e){2&t&&(as("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),js("modal fade show d-block"+(e.windowClass?" "+e.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Ly,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(xs(),hs(0,"div",0,1),hs(2,"div",2),Cs(3),ps(),ps()),2&t&&js("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),b_),K_=((__=function(){function t(e,n,r,i,a,o){var s=this;J(this,t),this._applicationRef=e,this._injector=n,this._document=r,this._scrollBar=i,this._rendererFactory=a,this._ngZone=o,this._activeWindowCmptHasChanged=new bt,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new ul,this._activeWindowCmptHasChanged.subscribe((function(){if(s._windowCmpts.length){var t=s._windowCmpts[s._windowCmpts.length-1];(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s._ngZone.runOutsideAngular((function(){var t=yy(e,"focusin").pipe(Ey(n),kt((function(t){return t.target})));yy(e,"keydown").pipe(Ey(n),nd((function(t){return t.which===r_.Tab})),wy(t)).subscribe((function(t){var n=tt(t,2),r=n[0],i=n[1],a=tt(u_(e),2),o=a[0],s=a[1];i!==o&&i!==e||!r.shiftKey||(s.focus(),r.preventDefault()),i!==s||r.shiftKey||(o.focus(),r.preventDefault())})),r&&yy(e,"click").pipe(Ey(n),wy(t),kt((function(t){return t[1]}))).subscribe((function(t){return t.focus()}))}))})(0,t.location.nativeElement,s._activeWindowCmptHasChanged),s._revertAriaHidden(),s._setAriaHidden(t.location.nativeElement)}}))}return Y(t,[{key:"open",value:function(t,e,n,r){var i=this,a=r.container instanceof HTMLElement?r.container:Uy(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),u=function(){i._modalRefs.length||(o.removeClass(i._document.body,"modal-open"),i._revertAriaHidden())};if(!a)throw new Error('The specified modal container "'.concat(r.container||"body",'" was not found in the DOM.'));var l=new Y_,c=this._getContentRef(t,r.injector||e,n,l,r),f=!1!==r.backdrop?this._attachBackdrop(t,a):void 0,d=this._attachWindowComponent(t,a,c),h=new z_(d,c,f,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.result.then(s,s),h.result.then(u,u),l.close=function(t){h.close(t)},l.dismiss=function(t){h.dismiss(t)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),f&&f.instance&&this._applyBackdropOptions(f.instance,r),h}},{key:"dismissAll",value:function(t){this._modalRefs.forEach((function(e){return e.dismiss(t)}))}},{key:"hasOpenModals",value:function(){return this._modalRefs.length>0}},{key:"_attachBackdrop",value:function(t,e){var n=t.resolveComponentFactory(H_).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}},{key:"_attachWindowComponent",value:function(t,e,n){var r=t.resolveComponentFactory(X_).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}},{key:"_applyWindowOptions",value:function(t,e){this._windowAttributes.forEach((function(n){Uy(e[n])&&(t[n]=e[n])}))}},{key:"_applyBackdropOptions",value:function(t,e){this._backdropAttributes.forEach((function(n){Uy(e[n])&&(t[n]=e[n])}))}},{key:"_getContentRef",value:function(t,e,n,r,i){return n?n instanceof ju?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,r,i):new B_([])}},{key:"_createFromTemplateRef",value:function(t,e){var n=t.createEmbeddedView({$implicit:e,close:function(t){e.close(t)},dismiss:function(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new B_([n.rootNodes],n)}},{key:"_createFromString",value:function(t){var e=this._document.createTextNode(""+t);return new B_([[e]])}},{key:"_createFromComponent",value:function(t,e,n,r,i){var a=t.resolveComponentFactory(n),o=$o.create({providers:[{provide:Y_,useValue:r}],parent:e}),s=a.create(o),u=s.location.nativeElement;return i.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(s.hostView),new B_([[u]],s.hostView,s)}},{key:"_setAriaHidden",value:function(t){var e=this,n=t.parentElement;n&&t!==this._document.body&&(Array.from(n.children).forEach((function(n){n!==t&&"SCRIPT"!==n.nodeName&&(e._ariaHiddenValues.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))})),this._setAriaHidden(n))}},{key:"_revertAriaHidden",value:function(){this._ariaHiddenValues.forEach((function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")})),this._ariaHiddenValues.clear()}},{key:"_registerModalRef",value:function(t){var e=this,n=function(){var n=e._modalRefs.indexOf(t);n>-1&&(e._modalRefs.splice(n,1),e._activeInstances.emit(e._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(n,n)}},{key:"_registerWindowCmpt",value:function(t){var e=this;this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy((function(){var n=e._windowCmpts.indexOf(t);n>-1&&(e._windowCmpts.splice(n,1),e._activeWindowCmptHasChanged.next())}))}},{key:"activeInstances",get:function(){return this._activeInstances}}]),t}()).\u0275fac=function(t){return new(t||__)(He(gc),He($o),He(Dc),He(G_),He(mu),He(Ql))},__.\u0275prov=ae({factory:function(){return new __(He(gc),He(Le),He(Dc),He(G_),He(mu),He(Ql))},token:__,providedIn:"root"}),__),W_=((y_=function(){function t(e,n,r,i){J(this,t),this._moduleCFR=e,this._injector=n,this._modalStack=r,this._config=i}return Y(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}},{key:"dismissAll",value:function(t){this._modalStack.dismissAll(t)}},{key:"hasOpenModals",value:function(){return this._modalStack.hasOpenModals()}},{key:"activeInstances",get:function(){return this._modalStack.activeInstances}}]),t}()).\u0275fac=function(t){return new(t||y_)(He(pu),He($o),He(K_),He(j_))},y_.\u0275prov=ae({factory:function(){return new y_(He(pu),He(Le),He(K_),He(j_))},token:y_,providedIn:"root"}),y_),Q_=((m_=function t(){J(this,t)}).\u0275mod=pn({type:m_}),m_.\u0275inj=oe({factory:function(t){return new(t||m_)},providers:[W_]}),m_),$_=((v_=function t(){J(this,t)}).\u0275mod=pn({type:v_}),v_.\u0275inj=oe({factory:function(t){return new(t||v_)},imports:[[gf]]}),v_),Z_=((g_=function t(){J(this,t)}).\u0275mod=pn({type:g_}),g_.\u0275inj=oe({factory:function(t){return new(t||g_)},imports:[[gf]]}),g_),J_=function(){function t(e,n){J(this,t),this.open=e,this.close=n,n||(this.close=e)}return Y(t,[{key:"isManual",value:function(){return"manual"===this.open||"manual"===this.close}}]),t}(),tb={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},eb=function(t){return t>0?Iy(t):function(t){return t}},nb=((k_=function t(){J(this,t),this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}).\u0275fac=function(t){return new(t||k_)},k_.\u0275prov=ae({factory:function(){return new k_},token:k_,providedIn:"root"}),k_),rb=0,ib=((R_=function(){function t(){J(this,t)}return Y(t,[{key:"isTitleTemplate",value:function(){return this.title instanceof ju}}]),t}()).\u0275fac=function(t){return new(t||R_)},R_.\u0275cmp=cn({type:R_,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(t,e){2&t&&($s("id",e.id),js("popover"+(e.popoverClass?" "+e.popoverClass:"")))},inputs:{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:Ly,decls:4,vars:1,consts:[[1,"arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(xs(),gs(0,"div",0),ss(1,By,4,2,"h3",1),hs(2,"div",2),Cs(3),ps()),2&t&&(sa(1),fs("ngIf",null!=e.title))},directives:[uf,pf],styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],encapsulation:2,changeDetection:0}),R_),ab=((I_=function(){function t(e,n,r,i,a,o,s,u,l,c){var f=this;J(this,t),this._elementRef=e,this._renderer=n,this._ngZone=s,this._document=u,this._changeDetector=l,this.shown=new ul,this.hidden=new ul,this._ngbPopoverWindowId="ngb-popover-"+rb++,this._windowRef=null,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new U_(ib,r,a,n,i,c),this._zoneSubscription=s.onStable.subscribe((function(){f._windowRef&&function(t,e,n,r,i){var a=Array.isArray(n)?n:n.split(P_),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],s=e.classList,u=function(t){var e=tt(t.split("-"),2),n=e[0],r=e[1],i=[];return i.push("bs-popover-"+n),r&&i.push("bs-popover-".concat(n,"-").concat(r)),i.forEach((function(t){s.add(t)})),i};o.forEach((function(t){s.remove("bs-popover-"+t)}));var l=a.findIndex((function(t){return"auto"===t}));l>=0&&o.forEach((function(t){null==a.find((function(e){return-1!==e.search("^"+t)}))&&a.splice(l++,1,t)}));var c=e.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";var f,d=null,h=!1,p=B(a);try{for(p.s();!(f=p.n()).done;){var g=u(d=f.value);if(M_.positionElements(t,e,d,r)){h=!0;break}g.forEach((function(t){s.remove(t)}))}}catch(v){p.e(v)}finally{p.f()}h||(u(d=a[0]),M_.positionElements(t,e,d,r))}(f._elementRef.nativeElement,f._windowRef.location.nativeElement,f.placement,"body"===f.container)}))}return Y(t,[{key:"_isDisabled",value:function(){return!!this.disablePopover||!this.ngbPopover&&!this.popoverTitle}},{key:"open",value:function(t){var e=this;this._windowRef||this._isDisabled()||(this._windowRef=this._popupService.open(this.ngbPopover,t),this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=t,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),function(t,n,r,i,a,o,s,u){var l;r&&t.runOutsideAngular((l=function(){var i=yy(n,"keydown").pipe(Ey(a),nd((function(t){return t.which===r_.Escape})),bh((function(t){return t.preventDefault()}))),s=yy(n,"mousedown").pipe(kt((function(t){var e=t.target;return 2!==t.button&&!i_(e,void 0)&&("inside"===r?i_(e,o)&&a_(e,void 0):"outside"===r?!i_(e,o):a_(e,void 0)||!i_(e,o))})),Ey(a)),u=yy(n,"mouseup").pipe(wy(s),nd((function(t){var e=tt(t,2);return e[0],e[1]})),Iy(0),Ey(a));(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){if(!nt(e[0]))return e[0];e=e[0]}return Ut(e,void 0).lift(new _y)})([i.pipe(kt((function(t){return 0}))),u.pipe(kt((function(t){return 1})))]).subscribe((function(n){return t.run((function(){return e.close()}))}))},o_?function(){return setTimeout((function(){return l()}),100)}:l))}(this._ngZone,this._document,this.autoClose,0,this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}},{key:"close",value:function(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}},{key:"toggle",value:function(){this._windowRef?this.close():this.open()}},{key:"isOpen",value:function(){return null!=this._windowRef}},{key:"ngOnInit",value:function(){this._unregisterListenersFn=function(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tb,n=(t||"").trim();if(0===n.length)return[];var r=n.split(/\s+/).map((function(t){return t.split(":")})).map((function(t){var n=e[t[0]]||t;return new J_(n[0],n[1])})),i=r.filter((function(t){return t.isManual()}));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===i.length&&r.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r}(n);if(1===u.length&&u[0].isManual())return function(){};var l=function(t,e,n,r){return new pt((function(i){var a=[],o=function(){return i.next(!0)},s=function(){return i.next(!1)},u=function(){return i.next(!r())};return n.forEach((function(n){n.open===n.close?a.push(t.listen(e,n.open,u)):a.push(t.listen(e,n.open,o),t.listen(e,n.close,s))})),function(){a.forEach((function(t){return t()}))}}))}(t,e,u,r).pipe(function(t,e,n){return function(r){var i=null,a=r.pipe(kt((function(t){return{open:t}})),nd((function(t){var e=n();return e===t.open||i&&i.open!==e?(i&&i.open!==t.open&&(i=null),!1):(i=t,!0)})),Wt());return Vt(a.pipe(nd((function(t){return t.open})),eb(t)),a.pipe(nd((function(t){return!t.open})),eb(e))).pipe(nd((function(t){return t===i&&(i=null,t.open!==n())})),kt((function(t){return t.open})))}}(o,s,r)).subscribe((function(t){return t?i():a()}));return function(){return l.unsubscribe()}}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}},{key:"ngOnChanges",value:function(t){var e=t.ngbPopover,n=t.popoverTitle,r=t.disablePopover,i=t.popoverClass;i&&this.isOpen()&&(this._windowRef.instance.popoverClass=i.currentValue),(e||n||r)&&this._isDisabled()&&this.close()}},{key:"ngOnDestroy",value:function(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||I_)(ls(gu),ls(_u),ls($o),ls(pu),ls(Uu),ls(nb),ls(Ql),ls(Dc),ls(Mo),ls(gc))},I_.\u0275dir=vn({type:I_,selectors:[["","ngbPopover",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Dn]}),I_),ob=((D_=function t(){J(this,t)}).\u0275mod=pn({type:D_}),D_.\u0275inj=oe({factory:function(t){return new(t||D_)},imports:[[gf]]}),D_),sb=((C_=function t(){J(this,t)}).\u0275mod=pn({type:C_}),C_.\u0275inj=oe({factory:function(t){return new(t||C_)},imports:[[gf]]}),C_),ub=((x_=function t(){J(this,t)}).\u0275mod=pn({type:x_}),x_.\u0275inj=oe({factory:function(t){return new(t||x_)},imports:[[gf]]}),x_),lb=((A_=function t(){J(this,t)}).\u0275mod=pn({type:A_}),A_.\u0275inj=oe({factory:function(t){return new(t||A_)},imports:[[gf]]}),A_),cb=((w_=function t(){J(this,t)}).\u0275mod=pn({type:w_}),w_.\u0275inj=oe({factory:function(t){return new(t||w_)},imports:[[gf]]}),w_),fb=((S_=function t(){J(this,t)}).\u0275mod=pn({type:S_}),S_.\u0275inj=oe({factory:function(t){return new(t||S_)},imports:[[gf]]}),S_),db=((T_=function t(){J(this,t)}).\u0275mod=pn({type:T_}),T_.\u0275inj=oe({factory:function(t){return new(t||T_)}}),T_),hb=((E_=function t(){J(this,t)}).\u0275mod=pn({type:E_}),E_.\u0275inj=oe({factory:function(t){return new(t||E_)},imports:[[gf]]}),E_),pb=[Wy,Zy,Jy,t_,n_,L_,F_,Q_,$_,Z_,ob,sb,ub,cb,fb,db,hb,lb],gb=((O_=function t(){J(this,t)}).\u0275mod=pn({type:O_}),O_.\u0275inj=oe({factory:function(t){return new(t||O_)},imports:[pb,Wy,Zy,Jy,t_,n_,L_,F_,Q_,$_,Z_,ob,sb,ub,cb,fb,db,hb,lb]}),O_);F("EVdn");var vb,mb,yb,_b,bb,Eb=function(){return["active"]},Tb=function(){return{exact:!0}},Sb=((vb=function(){function t(){J(this,t),this.isCollapsed=!0}return Y(t,[{key:"ngOnInit",value:function(){var t=$(".navbar");$(window).scroll((function(){$(window).scrollTop()>=5?t.addClass("ak-sl2"):t.removeClass("ak-sl2")}))}}]),t}()).\u0275fac=function(t){return new(t||vb)},vb.\u0275cmp=cn({type:vb,selectors:[["app-top-bar"]],decls:15,vars:11,consts:[["id","nav",1,"navbar","fixed-top","navbar-expand-lg","navbar-light","bg-light","px-0"],[1,"col-12","row","justify-content-center","px-0"],[1,"col-10","px-0","row","py-1"],["rel","author","href","/","title","Akamai Debug Players",1,"navbar-brand"],["alt","Akamai Debug Players","src","./assets/img/Akamai-Logo-RGB.png","alt","html","height","47px"],["type","button",1,"navbar-toggler","ml-auto",3,"click"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","mr-auto","h6","mt-3"],[1,"nav-item","active","mx-2"],["name","players","title","Players","alt","Players",1,"nav-link",3,"routerLinkActive","routerLinkActiveOptions","routerLink","click"],[1,"nav-item","mx-2",3,"routerLinkActive","routerLinkActiveOptions"],["name","stream-validator","title","Stream Validator","alt","Stream Validator",1,"nav-link",3,"routerLink","click"]],template:function(t,e){1&t&&(hs(0,"nav",0),hs(1,"div",1),hs(2,"div",2),hs(3,"a",3),gs(4,"img",4),ps(),hs(5,"button",5),Es("click",(function(){return e.isCollapsed=!e.isCollapsed})),gs(6,"span",6),ps(),hs(7,"div",7),hs(8,"ul",8),hs(9,"li",9),hs(10,"a",10),Es("click",(function(){return e.isCollapsed=!0})),Ks(11,"Players"),ps(),ps(),hs(12,"li",11),hs(13,"a",12),Es("click",(function(){return e.isCollapsed=!0})),Ks(14,"Stream Validator"),ps(),ps(),ps(),ps(),ps(),ps(),ps()),2&t&&(sa(7),fs("ngbCollapse",e.isCollapsed),sa(3),fs("routerLinkActive",sl(7,Eb))("routerLinkActiveOptions",sl(8,Tb))("routerLink","players"),sa(2),fs("routerLinkActive",sl(9,Eb))("routerLinkActiveOptions",sl(10,Tb)),sa(1),fs("routerLink","stream-validator"))},directives:[N_,e_,tv,ov],styles:[".navbar[_ngcontent-%COMP%]{z-index:100000}.ak-sl2[_ngcontent-%COMP%]{box-shadow:1px 2px 3px 0 rgba(92,92,92,.25)!important;transition:opacity 100 ease-in-out!important;transition:all .9s ease-out 0s}"]}),vb),wb=F("kiQV"),Ab=((_b=function t(){J(this,t),this.version=wb.a}).\u0275fac=function(t){return new(t||_b)},_b.\u0275cmp=cn({type:_b,selectors:[["app-bottom-bar"]],decls:15,vars:1,consts:[[1,"page-footer"],[1,"footer-copyright","text-center","py-3"],[1,"text-muted"],["routerLink","/release-notes"],["href","https://forms.gle/KjsEhkyApnS1HQQX8"],[2,"color","var(--akamai-orange)"]],template:function(t,e){1&t&&(hs(0,"footer",0),hs(1,"div",1),hs(2,"span",2),Ks(3),hs(4,"a",3),Ks(5,"Release Notes"),ps(),Ks(6,"."),ps(),gs(7,"br"),hs(8,"span",2),Ks(9,"Please provide "),hs(10,"a",4),Ks(11,"feedback"),ps(),Ks(12," or direct questions "),ps(),hs(13,"span",5),Ks(14,"dl-playersakamai@akamai.com"),ps(),ps(),ps()),2&t&&(sa(3),Qs("Akamai Stream Validation and Player Test Page v",e.version,". See "))},directives:[tv],styles:[".footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:60px;text-align:center;line-height:60px;background-color:#f5f5f5}"]}),_b),xb=((yb=function t(e){J(this,t),this.router=e,this.title="players-akamai"}).\u0275fac=function(t){return new(t||yb)(ls(Zg))},yb.\u0275cmp=cn({type:yb,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(gs(0,"app-top-bar"),gs(1,"router-outlet"),gs(2,"app-bottom-bar"))},directives:[Sb,sv,Ab],styles:[""]}),yb),Cb=((mb=function t(e){J(this,t),this.viewContainerRef=e}).\u0275fac=function(t){return new(t||mb)(ls(Uu))},mb.\u0275dir=vn({type:mb,selectors:[["","appPlayer",""]]}),mb),Db=["video"],Ib=((bb=function(){function t(){J(this,t),this.rebufferingEvents=[],this.ongoingBufferingEvent=!1,this.debug=!1,this.showOptions=!1,this.errors=[],this.downloadedFrags=[],this.newPlayer()}return Y(t,[{key:"ngAfterViewInit",value:function(){var t=this;this.videoElement=this.video.nativeElement,this.videoElement.addEventListener("waiting",(function(e){t.debug&&console.log("Waiting event fired"),t.ongoingBufferingEvent||(t.bufferingStartTime=Date.now()),t.ongoingBufferingEvent=!0})),this.debug&&this.videoElement.addEventListener("stalled",(function(t){console.log("Stalled event fired")})),this.videoElement.addEventListener("playing",(function(e){if(t.debug&&console.log("Playing event fired"),t.ongoingBufferingEvent){var n=Date.now();t.rebufferingEvents.push({startTime:t.bufferingStartTime,duration:n-t.bufferingStartTime})}t.ongoingBufferingEvent=!1}))}},{key:"updateShowOptions",value:function(t){this.showOptions=t}},{key:"getAllStatistics",value:function(){var t=this.videoElement.buffered,e=NaN;if(t.length>0){var n=t.start(t.length-1);e=t.end(t.length-1)-Math.max(n,this.videoElement.currentTime)}var r,i=void 0,a=void 0;void 0!==this.videoElement.getVideoPlaybackQuality&&(i=(r=this.videoElement.getVideoPlaybackQuality()).droppedVideoFrames,a=r.totalVideoFrames);var o={bufferLevel:e,bufferingEvents:this.rebufferingEvents,droppedFrames:i,totalFrames:a};this.rebufferingEvents=[];var s=this.getStatistics();return s.generalStats!={}&&(this.prevPlayerStats=Object.assign(Object.assign({},this.prevPlayerStats),s),s=this.prevPlayerStats),Object.assign(Object.assign({},s),{html5Stats:o})}}]),t}()).\u0275fac=function(t){return new(t||bb)},bb.\u0275cmp=cn({type:bb,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&El(Db,!0),2&t&&_l(n=wl())&&(e.video=n.first)},decls:1,vars:0,template:function(t,e){1&t&&Ks(0,"no-ui")},encapsulation:2}),bb),Rb=F("ulZh"),kb=F.n(Rb),Ob=F("XkjI");function Pb(t,e){if(1&t){var n=ys();hs(0,"ngb-alert",16),Es("close",(function(){return Zn(n),ws().closeAlert()})),Ks(1),ps()}if(2&t){var r=ws();fs("type",r.alertType),sa(1),Qs(" ",r.alertMessage,"")}}var Mb,Lb=function(){function t(e){J(this,t),this.settings=e}return Y(t,[{key:"getPlayerConfig",value:function(){return this.settings}}]),t}(),Nb=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"getCMCD",value:function(){return this.settings.streaming.cmcd.enabled}},{key:"setCMCD",value:function(t){t?(this.settings.streaming.cmcd.enabled=!0,this.settings.streaming.cmcd.mode="query"):this.settings.streaming.cmcd.enabled=!1}},{key:"NewPlayerSettings",value:function(t){return new n(t)}}]),n}(Lb),Fb=function(t){z(n,t);var e=X(n);function n(){return J(this,n),e.apply(this,arguments)}return Y(n,[{key:"getCMCD",value:function(){return null!=this.settings.cmcd}},{key:"setCMCD",value:function(t){t?this.settings.cmcd={useHeaders:!1}:delete this.settings.cmcd}},{key:"NewPlayerSettings",value:function(t){return new n(t)}}]),n}(Lb),jb=((Mb=function(){function t(e){J(this,t),this.formBuilder=e,this.submitPlayerOptionsEvent=new ul,this.resetPlayerOptionsEvent=new ul,this.activeForm="simple"}return Y(t,[{key:"ngOnChanges",value:function(t){t.settings&&this.settings&&this.optionsJsonForm&&this.optionsJsonForm.patchValue({json:Object(Ob.stringify)(this.settings.getPlayerConfig(),null,"  "),cmcd:this.settings.getCMCD()})}},{key:"enableCard",value:function(t){var e="#".concat(t,"ConfigButton"),n="#".concat(t,"Input");$(e).removeClass("btn-secondary"),$(e).addClass("btn-primary"),$(n).removeClass("d-none")}},{key:"disableCard",value:function(t){var e="#".concat(t,"ConfigButton"),n="#".concat(t,"Input");$(e).removeClass("btn-primary"),$(e).addClass("btn-secondary"),$(n).addClass("d-none")}},{key:"ngOnInit",value:function(){var t=this.settings.getCMCD();this.optionsJsonForm=this.formBuilder.group({cmcd:t,json:Object(Ob.stringify)(this.settings.getPlayerConfig(),null,"  ")})}},{key:"showSimpleOptions",value:function(){this.enableCard("simple"),this.disableCard("JSON"),this.activeForm="simple"}},{key:"showJSONOptions",value:function(){this.disableCard("simple"),this.enableCard("JSON"),this.activeForm="JSON"}},{key:"onSubmitPlayerOptions",value:function(t){var e,n=this;try{e=Object(Ob.parse)(t.json)}catch(i){return this.alertMessage="Invalid JSON input. See console.",this.alertType="danger",void console.error(i)}var r=this.settings.NewPlayerSettings(e);try{"simple"==this.activeForm&&r.setCMCD(t.cmcd)}catch(i){return this.alertMessage="Unable to update configuration. See console.",this.alertType="danger",void console.error(i)}try{this.submitPlayerOptionsEvent.emit(r),this.alertMessage="Configuration updated.",this.alertType="success",setTimeout((function(){return n.closeAlert()}),3e3)}catch(i){this.alertMessage="Invalid configuration. See console.",this.alertType="warning",console.error(i)}}},{key:"resetPlayerOptions",value:function(){console.log("Reset player options. "),this.resetPlayerOptionsEvent.emit()}},{key:"closeAlert",value:function(){this.alertMessage=null,this.alertType=null}}]),t}()).\u0275fac=function(t){return new(t||Mb)(ls(dy))},Mb.\u0275cmp=cn({type:Mb,selectors:[["player-options"]],inputs:{settings:"settings"},outputs:{submitPlayerOptionsEvent:"submitPlayerOptionsEvent",resetPlayerOptionsEvent:"resetPlayerOptionsEvent"},features:[Dn],decls:23,vars:2,consts:[[1,"card","h-100","w-100",2,"display","flex","flex-direction","column"],[1,"card-header"],[1,"row"],[1,"col-md-8","col-lg-10","text-left"],["role","group",1,"col-md-4","col-lg-2","btn-group"],["type","button","id","simpleConfigButton",1,"btn","btn-primary","btn-sm",3,"click"],["type","button","id","JSONConfigButton",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"card-body","w-100","player-options-card-body"],[1,"w-100","player-options-card-form",3,"formGroup","ngSubmit"],["style","flex-grow: 0",3,"type","close",4,"ngIf"],["id","simpleInput",1,"text-left","form-control","form-group","checkbox"],["type","checkbox","formControlName","cmcd",2,"margin-right","8px"],["id","JSONInput","formControlName","json","rows","10",1,"form-control","d-none",2,"flex-grow","6"],["role","group",1,"btn-group","float-right","mt-3",2,"align-self","flex-end","flex-grow","0"],["type","button",1,"btn","btn-primary",3,"click"],["type","submit",1,"btn","btn-primary"],[2,"flex-grow","0",3,"type","close"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"div",2),hs(3,"div",3),Ks(4," Player Options "),ps(),hs(5,"div",4),hs(6,"button",5),Es("click",(function(){return e.showSimpleOptions()})),Ks(7," Simple "),ps(),hs(8,"button",6),Es("click",(function(){return e.showJSONOptions()})),Ks(9," JSON "),ps(),ps(),ps(),ps(),hs(10,"div",7),hs(11,"form",8),Es("ngSubmit",(function(){return e.onSubmitPlayerOptions(e.optionsJsonForm.value)})),ss(12,Pb,2,2,"ngb-alert",9),hs(13,"div",10),hs(14,"label"),gs(15,"input",11),Ks(16," Enable Common Media Client Data (CMCD) "),ps(),ps(),gs(17,"textarea",12),hs(18,"div",13),hs(19,"button",14),Es("click",(function(){return e.resetPlayerOptions()})),Ks(20,"Reset"),ps(),hs(21,"button",15),Ks(22,"Save"),ps(),ps(),ps(),ps(),ps()),2&t&&(sa(11),fs("formGroup",e.optionsJsonForm),sa(1),fs("ngIf",null!=e.alertMessage))},directives:[Wm,Kv,Zm,uf,Lv,Xv,cy,jv,$y],styles:[".player-options-card-body[_ngcontent-%COMP%]{align-self:flex-end;flex-grow:1;height:100%}.player-options-card-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;flex-grow:1;height:100%}"]}),Mb);function Bb(t,e){if(1&t){var n=ys();hs(0,"player-options",5),Es("submitPlayerOptionsEvent",(function(t){return Zn(n),ws().submitPlayerOptions(t)}))("resetPlayerOptionsEvent",(function(){return Zn(n),ws().resetPlayerOptions()})),ps()}2&t&&fs("settings",ws().settings)}var Ub,Vb=((Ub=function(t){z(n,t);var e=X(n);function n(){var t;return J(this,n),(t=e.apply(this,arguments)).name="hls.js",t}return Y(n,[{key:"newPlayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hls&&this.hls.destroy();var n=this.settings.getPlayerConfig();this.settings.getCMCD()&&(n.cmcd.contentId=t),n.xhrSetup=function(t,n){t.withCredentials=e},this.hls=new kb.a(n);var r=this;this.hls.on(kb.a.Events.ERROR,(function(t,e){r.errors.push(e.type)})),this.hls.on(kb.a.Events.FRAG_LOADED,(function(t,e){var n=e.frag.stats,i=n.loading.end-n.loading.start;r.downloadedFrags.push({url:e.frag.url,startTime:Date.now()-i,duration:i})}))}},{key:"playUrl",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.newPlayer(e,n);var r=this.hls,i=this.video;function a(t,e){i.nativeElement.play()}r.once(kb.a.Events.MEDIA_ATTACHED,(function(){r.once(kb.a.Events.MANIFEST_PARSED,a),r.loadSource(t)})),r.attachMedia(this.video.nativeElement)}},{key:"stop",value:function(){this.hls.destroy()}},{key:"getPlayerInfo",value:function(){return{name:this.name,version:kb.a.version}}},{key:"getStatistics",value:function(){var t={basicStats:{}};return t.basicStats.errorLogs=this.errors,this.errors=[],this.hls.currentLevel>=0&&null!=this.hls.levels[this.hls.currentLevel]&&(t.basicStats.currentBitrate=this.hls.levels[this.hls.currentLevel].bitrate),t.advancedStats={},t.advancedStats.measuredThroughput=this.hls.bandwidthEstimate,t.advancedStats.resourceDownloadEvents=this.downloadedFrags,this.downloadedFrags=[],t.generalStats={},null!=this.hls.levels&&(t.generalStats.availableBitRates=this.hls.levels.map((function(t){return t.bitrate})),t.generalStats.bitrateResolutions=this.hls.levels.map((function(t){return{height:t.height,width:t.width}}))),this.hls.currentLevel>=0&&null!=this.hls.levels[this.hls.currentLevel]&&(t.generalStats.segmentLength=this.hls.levels[this.hls.currentLevel].details.targetduration),t.generalStats.separateAudioVideo=this.hls.audioTracks.length>0,t}},{key:"submitPlayerOptions",value:function(t){this.settings=t}},{key:"resetPlayerOptions",value:function(){this.settings=void 0}},{key:"settings",get:function(){return null==this.hlsJsSettings&&(this.hlsJsSettings=new Fb(Object(Ob.parse)(Object(Ob.stringify)(kb.a.DefaultConfig))),this.hlsJsSettings.setCMCD(!0)),this.hlsJsSettings},set:function(t){new kb.a(t.getPlayerConfig()).destroy(),this.hlsJsSettings=t}}]),n}(Ib)).\u0275fac=function(t){return Gb(t||Ub)},Ub.\u0275cmp=cn({type:Ub,selectors:[["app-hlsjs"]],features:[Js],decls:5,vars:1,consts:[[1,"hls-container"],["class","player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent",4,"ngIf"],[1,"player","w-100","pl-0","pr-0"],["controls","","width","100%","id","video","muted","",2,"background","black"],["video",""],[1,"player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent"]],template:function(t,e){1&t&&(hs(0,"div",0),ss(1,Bb,1,1,"player-options",1),hs(2,"div",2),gs(3,"video",3,4),ps(),ps()),2&t&&(sa(1),fs("ngIf",e.showOptions))},directives:[uf,jb],styles:[""]}),Ub),Gb=ai(Vb),Hb=F("Yvhy"),Yb=F.n(Hb);function zb(t,e){if(1&t){var n=ys();hs(0,"player-options",5),Es("submitPlayerOptionsEvent",(function(t){return Zn(n),ws().submitPlayerOptions(t)}))("resetPlayerOptionsEvent",(function(){return Zn(n),ws().resetPlayerOptions()})),ps()}2&t&&fs("settings",ws().settings)}var qb,Xb=((qb=function(t){z(n,t);var e=X(n);function n(){var t;return J(this,n),(t=e.apply(this,arguments)).name="dash.js",t}return Y(n,[{key:"newPlayer",value:function(){var t=this;if(this.dash)try{this.dash.reset()}catch(e){}this.dash=Yb.a.MediaPlayer().create(),this.dash.setAutoPlay(!1),this.dash.on("error",(function(e){t.errors.push(JSON.stringify(e))}))}},{key:"playUrl",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.newPlayer(),this.dash.updateSettings(this.settings.getPlayerConfig()),this.settings.getCMCD()&&this.dash.updateSettings({streaming:{cmcd:{cid:e}}}),this.dash.setXHRWithCredentialsForType(void 0,n),this.dash.initialize(this.video.nativeElement),this.dash.attachSource(t)}},{key:"stop",value:function(){this.dash.reset()}},{key:"getPlayerInfo",value:function(){return{name:this.name,version:this.dash.getVersion()}}},{key:"getStatistics",value:function(){var t=this.dash.getBitrateInfoListFor("video"),e={basicStats:{}};e.basicStats.errorLogs=this.errors,this.errors=[];var n=this.dash.getQualityFor("video");return n>=0&&t[n]&&(e.basicStats.currentBitrate=t[n].bitrate),e.advancedStats={},e.advancedStats.measuredThroughput=this.dash.getAverageThroughput(),e.generalStats={},t.length>0&&(e.generalStats.availableBitRates=t.map((function(t){return t.bitrate})),e.generalStats.bitrateResolutions=t.map((function(t){return{height:t.height,width:t.width}}))),e.generalStats.separateAudioVideo=this.dash.getBitrateInfoListFor("audio").length>0,e}},{key:"submitPlayerOptions",value:function(t){null!=t&&(this.settings=t)}},{key:"resetPlayerOptions",value:function(){this.dash.resetSettings(),this.dashJsConfig=void 0}},{key:"settings",get:function(){return void 0===this.dashJsConfig&&(this.dashJsConfig=new Nb(this.dash.getSettings()),this.dashJsConfig.setCMCD(!0)),this.dashJsConfig},set:function(t){this.dashJsConfig=t}}]),n}(Ib)).\u0275fac=function(t){return Kb(t||qb)},qb.\u0275cmp=cn({type:qb,selectors:[["app-dashjs"]],features:[Js],decls:5,vars:1,consts:[[1,"dash-container","pl-0","pr-0","player-container"],["class","player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent",4,"ngIf"],[1,"player","w-100","pl-0","pr-0"],["controls","","width","100%","id","video","muted","",2,"background","black"],["video",""],[1,"player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent"]],template:function(t,e){1&t&&(hs(0,"div",0),ss(1,zb,1,1,"player-options",1),hs(2,"div",2),gs(3,"video",3,4),ps(),ps()),2&t&&(sa(1),fs("ngIf",e.showOptions))},directives:[uf,jb],styles:[".player-container[_ngcontent-%COMP%]{position:relative}.player-options[_ngcontent-%COMP%]{width:100%;height:500px;left:0;top:0;bottom:500px;opacity:1}"]}),qb),Kb=ai(Xb),Wb=F("KjvB");function Qb(t,e){if(1&t){var n=ys();hs(0,"ngb-alert",1),Es("close",(function(){return Zn(n),ws().close()})),hs(1,"strong"),Ks(2,"Error!"),ps(),Ks(3),ps()}if(2&t){var r=ws();fs("dismissible",!0),sa(3),Qs(" ",r.reason," ")}}var $b,Zb=(($b=function(){function t(){J(this,t),this.isAlertDismissed=!0,this.reason=""}return Y(t,[{key:"ngOnChanges",value:function(t){void 0!==this.badUrlMsg.reason&&(this.reason=this.badUrlMsg.reason,this.isAlertDismissed=!1)}},{key:"close",value:function(){this.isAlertDismissed=!0}}]),t}()).\u0275fac=function(t){return new(t||$b)},$b.\u0275cmp=cn({type:$b,selectors:[["bad-url-alert"]],inputs:{badUrlMsg:"badUrlMsg"},features:[Dn],decls:2,vars:1,consts:[["type","danger",3,"dismissible","close",4,"ngIf"],["type","danger",3,"dismissible","close"]],template:function(t,e){1&t&&(hs(0,"p"),ss(1,Qb,4,2,"ngb-alert",0),ps()),2&t&&(sa(1),fs("ngIf",!e.isAlertDismissed))},directives:[uf,$y],encapsulation:2}),$b);function Jb(t,e){if(1&t){var n=ys();hs(0,"li",19),Es("click",(function(){Zn(n);var t=e.$implicit;return ws().onPlayerSubmit(t)})),Ks(1),ps()}if(2&t){var r=e.$implicit;sa(1),Ws(r.name)}}function tE(t,e){if(1&t){var n=ys();hs(0,"li",19),Es("click",(function(){Zn(n);var t=e.$implicit;return ws(),us(23).value=t.url})),Ks(1),ps()}if(2&t){var r=e.$implicit;sa(1),Ws(r.name)}}function eE(t,e){if(1&t){var n=ys();hs(0,"li",19),Es("click",(function(){Zn(n);var t=e.$implicit;return ws(),us(23).value=t.url})),Ks(1),ps()}if(2&t){var r=e.$implicit;sa(1),Ws(r.name)}}function nE(t,e){1&t&&(Er(),Kn.lFrame.currentNamespace=null,hs(0,"div"),Er(),hs(1,"svg",26),gs(2,"path",27),gs(3,"path",28),ps(),Ks(4," Copied to clipboard "),ps())}function rE(t,e){if(1&t){var n=ys();hs(0,"div",1),hs(1,"div",2),gs(2,"input",20),ps(),hs(3,"div",6),hs(4,"button",21),Es("click",(function(){Zn(n);var t=ws();return t.copyMessage(t.sharableLink)})),Er(),hs(5,"svg",22),gs(6,"path",23),gs(7,"path",24),ps(),ps(),ps(),ps(),ss(8,nE,5,0,"div",25)}if(2&t){var r=ws();sa(2),Ds("value",r.sharableLink),sa(6),fs("ngIf",r.linkCopied)}}function iE(t,e){1&t&&Ks(0,"Share link")}function aE(t,e){if(1&t){var n=ys();hs(0,"button",29),Es("click",(function(){Zn(n);var t=ws();return t.copyMessage(t.sharableLink)})),Ks(1," Share "),ps()}if(2&t){ws();var r=us(26),i=us(28);fs("autoClose","outside")("ngbPopover",r)("popoverTitle",i)}}var oE,sE=F("tcQk"),uE=((oE=function(){function t(e,n,r){J(this,t),this.router=e,this.activatedRoute=n,this.location=r,this.streamChangeEvent=new ul,this.playerChangeEvent=new ul,this.showPlayerOptionsEvent=new ul,this.badUrlMsg={reason:void 0,counter:0},this.showSharableLink=!1,this.linkCopied=!1,this.players=[{name:"hls.js",type:"hlsjs",stream_types:["hls"]},{name:"dash.js",type:"dashjs",stream_types:["dash"]}]}return Y(t,[{key:"onStreamSubmit",value:function(){var e,n=$("#selectedstream").val(),r=!1,i="";try{e=new URL(n),t.loadedUsingHTTPS()&&"http:"==e.protocol?i="Cannot play HTTP stream from HTTPS page due to Content Security Policy. Reload players.akamai.com via HTTP.":r=!0}catch(o){i="URL cannot be parsed"}if(r){var a=encodeURIComponent(e.href);this.location.go("players/"+this.currentPlayer,"streamUrl="+a),this.streamChangeEvent.emit(n),this.sharableLink=window.location.href,this.showSharableLink=!0}else this.badUrlMsg={reason:'Cannot play URL "'.concat(n,'": ').concat(i),counter:this.badUrlMsg.counter+1}}},{key:"onPlayerSubmit",value:function(t){this.currentVodStreams=[],this.currentLiveStreams=[];var e,n=B(t.stream_types);try{for(n.s();!(e=n.n()).done;){var r,i,a=e.value;(r=this.currentVodStreams).push.apply(r,j(sE[a].VOD)),(i=this.currentLiveStreams).push.apply(i,j(sE[a].LIVE))}}catch(u){n.e(u)}finally{n.f()}this.currentPlayer=t.type,$("#players").html(t.name),$("#streams").prop("disabled",!1),$("#selectedstream").prop("disabled",!1);var o="",s=this.activatedRoute.snapshot.queryParamMap.get("streamUrl");null!=s&&(o=decodeURIComponent(s)||""),$("#selectedstream").val(o),$("#playButton").prop("disabled",!1),"dashjs"==t.type||"hlsjs"==t.type?$("#playerOptionsButton").prop("disabled",!1):$("#playerOptionsButton").prop("disabled",!0),this.showPlayerOptions(!1),this.playerChangeEvent.emit(t.type)}},{key:"ngOnChanges",value:function(t){if(null!=t.setPlayer){var e,n=B(this.players);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.type==this.setPlayer&&this.onPlayerSubmit(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"toggleShowPlayerOptions",value:function(){this.showPlayerOptions(!this.showPlayerOptionsOverlay)}},{key:"showPlayerOptions",value:function(t){this.showPlayerOptionsOverlay=t,this.showPlayerOptionsEvent.emit(t),this.showPlayerOptionsOverlay?($("#playerOptionsButton").removeClass("btn-primary"),$("#playerOptionsButton").addClass("btn-secondary"),$("#playerOptionsButton").text("Hide options")):($("#playerOptionsButton").removeClass("btn-secondary"),$("#playerOptionsButton").addClass("btn-primary"),$("#playerOptionsButton").text("Player options"))}},{key:"copyMessage",value:function(t){var e=this,n=document.createElement("textarea");n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0",n.value=t,document.body.appendChild(n),n.focus(),n.select(),document.execCommand("copy"),document.body.removeChild(n),this.linkCopied=!0,setTimeout((function(){e.linkCopied=!1}),5e3)}}],[{key:"loadedUsingHTTPS",value:function(){return"https:"==document.location.protocol}}]),t}()).\u0275fac=function(t){return new(t||oE)(ls(Zg),ls(Mp),ls(Kc))},oE.\u0275cmp=cn({type:oE,selectors:[["app-selector"]],inputs:{setPlayer:"setPlayer"},outputs:{streamChangeEvent:"streamChangeEvent",playerChangeEvent:"playerChangeEvent",showPlayerOptionsEvent:"showPlayerOptionsEvent"},features:[Dn],decls:36,vars:5,consts:[[1,"row","my-2"],[1,"input-group"],[1,"input-group-prepend"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","id","players",1,"btn","btn-primary","dropdown-toggle",2,"width","150px !important"],["aria-labelledby","players",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"input-group-append"],["id","playerOptionsButton","disabled","",1,"btn","btn-primary",2,"width","150px !important",3,"click"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","id","streams","disabled","",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","streams",1,"dropdown-menu"],[1,"dropdown-item","disabled"],["id","selectedstream","type","text","placeholder","Input stream URL","aria-label","Text input with dropdown button","disabled","",1,"form-control"],["selectedstream",""],["popContent",""],["popTitle",""],["type","button","class","btn btn-secondary","placement","bottom",3,"autoClose","ngbPopover","popoverTitle","click",4,"ngIf"],["id","playButton","disabled","",1,"btn","btn-primary",3,"click"],[1,"w-100"],[3,"badUrlMsg"],[1,"dropdown-item",3,"click"],["type","text","readonly","",1,"form-control","form-rounded-left",3,"value"],["type","button",1,"btn","btn-secondary",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","black","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-clipboard"],["fill-rule","evenodd","d","M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"],["fill-rule","evenodd","d","M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"],[4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","green","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-check-circle"],["fill-rule","evenodd","d","M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["fill-rule","evenodd","d","M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"],["type","button","placement","bottom",1,"btn","btn-secondary",3,"autoClose","ngbPopover","popoverTitle","click"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"div",2),hs(3,"button",3),Ks(4," Select player "),ps(),hs(5,"ul",4),ss(6,Jb,2,1,"li",5),ps(),ps(),hs(7,"div",6),hs(8,"button",7),Es("click",(function(){return e.toggleShowPlayerOptions()})),Ks(9,"Player options"),ps(),ps(),hs(10,"div",2),hs(11,"button",8),Ks(12,"Select stream"),ps(),hs(13,"ul",9),hs(14,"li",10),hs(15,"b"),Ks(16,"VOD Streams"),ps(),ps(),ss(17,tE,2,1,"li",5),hs(18,"li",10),hs(19,"b"),Ks(20,"LIVE Streams"),ps(),ps(),ss(21,eE,2,1,"li",5),ps(),ps(),gs(22,"input",11,12),hs(24,"div",2),ss(25,rE,9,2,"ng-template",null,13,Dl),ss(27,iE,1,0,"ng-template",null,14,Dl),ss(29,aE,2,3,"button",15),ps(),hs(30,"div",6),hs(31,"button",16),Es("click",(function(){return e.onStreamSubmit()})),Ks(32,"Play stream"),ps(),ps(),ps(),ps(),hs(33,"div",0),hs(34,"div",17),gs(35,"bad-url-alert",18),ps(),ps()),2&t&&(sa(6),fs("ngForOf",e.players),sa(11),fs("ngForOf",e.currentVodStreams),sa(4),fs("ngForOf",e.currentLiveStreams),sa(8),fs("ngIf",e.showSharableLink),sa(6),fs("badUrlMsg",e.badUrlMsg))},directives:[of,uf,Zb,ab],styles:[""]}),oE),lE=function(){function t(){J(this,t)}return Y(t,null,[{key:"isSafari",value:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("safari")>-1&&-1==t.indexOf("chrome")}}]),t}();function cE(t,e){if(1&t){var n=ys();hs(0,"ngb-alert",1),Es("close",(function(){return Zn(n),ws().close()})),Ks(1," Error! Token Authentication is currently not supported on Safari browsers. "),ps()}2&t&&fs("dismissible",!0)}var fE,dE,hE=((dE=function(){function t(){J(this,t),this.isAlertDismissed=!1,this.isSafari=lE.isSafari()}return Y(t,[{key:"ngOnChanges",value:function(t){t.hasAmdStyleTokenAuth&&(this.isAlertDismissed=!1)}},{key:"close",value:function(){this.isAlertDismissed=!0}}]),t}()).\u0275fac=function(t){return new(t||dE)},dE.\u0275cmp=cn({type:dE,selectors:[["safari-token-auth-alert"]],inputs:{hasAmdStyleTokenAuth:"hasAmdStyleTokenAuth"},features:[Dn],decls:2,vars:1,consts:[["type","danger",3,"dismissible","close",4,"ngIf"],["type","danger",3,"dismissible","close"]],template:function(t,e){1&t&&(hs(0,"p"),ss(1,cE,2,1,"ngb-alert",0),ps()),2&t&&(sa(1),fs("ngIf",e.isSafari&&!e.isAlertDismissed&&e.hasAmdStyleTokenAuth))},directives:[uf,$y],encapsulation:2}),dE),pE=((fE=function(){function t(){J(this,t)}return Y(t,[{key:"ngOnChanges",value:function(t){this.info=null==this.playerInfo?{name:"No player loaded",version:""}:{name:this.playerInfo.name,version:this.playerInfo.version}}}]),t}()).\u0275fac=function(t){return new(t||fE)},fE.\u0275cmp=cn({type:fE,selectors:[["app-player-info"]],inputs:{playerInfo:"playerInfo"},features:[Dn],decls:20,vars:2,consts:[[1,"container-fluid","card"],[1,"card-header","row"],[1,"col-12"],[1,"card-body","row","p-0"],[1,"col-12","p-0","m-0"],[1,"table","table-sm"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"div",2),Ks(3," Player Info "),ps(),ps(),hs(4,"div",3),hs(5,"div",4),hs(6,"table",5),hs(7,"tbody"),hs(8,"tr"),hs(9,"th"),hs(10,"i"),Ks(11,"Name"),ps(),ps(),hs(12,"th"),hs(13,"i"),Ks(14,"Version"),ps(),ps(),ps(),hs(15,"tr"),hs(16,"td"),Ks(17),ps(),hs(18,"td"),Ks(19),ps(),ps(),ps(),ps(),ps(),ps(),ps()),2&t&&(sa(17),Qs(" ",e.info.name," "),sa(2),Qs(" ",e.info.version," "))},styles:[""]}),fE);function gE(t,e){if(1&t&&(hs(0,"tr"),hs(1,"td"),Ks(2),ps(),hs(3,"td"),Ks(4),ps(),ps()),2&t){var n=e.$implicit;sa(2),Ws(n.first),sa(2),Ws(n.second)}}function vE(t,e){if(1&t&&(hs(0,"tr",12),hs(1,"td",12),Ks(2),ps(),hs(3,"td",12),Ks(4),ps(),ps()),2&t){var n=e.$implicit;sa(2),Ws(n.rate),sa(2),Ws(n.resolution)}}function mE(t,e){if(1&t&&(vs(0),hs(1,"table",10),hs(2,"tbody"),ss(3,vE,5,2,"tr",11),ps(),ps(),ms()),2&t){var n=ws(2);sa(3),fs("ngForOf",n.bitrates)}}function yE(t,e){1&t&&(vs(0),Ks(1," No bitrates found "),ms())}function _E(t,e){if(1&t&&(vs(0),hs(1,"div",1),hs(2,"div",2),hs(3,"div",3),Ks(4," General Statistics "),ps(),ps(),hs(5,"div",4),hs(6,"div",5),hs(7,"table",6),hs(8,"tbody"),ss(9,gE,5,2,"tr",7),hs(10,"tr"),hs(11,"td",8),Ks(12,"Available Bitrate "),gs(13,"br"),Ks(14," (Mbps) / resolution: "),ps(),hs(15,"td",9),ss(16,mE,4,1,"ng-container",0),ss(17,yE,2,0,"ng-container",0),ps(),ps(),ps(),ps(),ps(),ps(),ps(),ms()),2&t){var n=ws();sa(9),fs("ngForOf",n.stats),sa(7),fs("ngIf",n.bitrates.length>0),sa(1),fs("ngIf",0==n.bitrates.length)}}var bE,EE,TE,SE,wE=((bE=function(){function t(){J(this,t)}return Y(t,[{key:"ngAfterViewInit",value:function(){this.formatGeneralStats({})}},{key:"ngOnChanges",value:function(t){this.formatGeneralStats(this.generalStats)}},{key:"formatGeneralStats",value:function(t){var e=this;this.foundAny=!1,this.stats=[],this.bitrates=[];var n="No segment length found";t&&t.segmentLength&&(this.foundAny=!0,n=t.segmentLength+"s"),this.stats.push({first:"Segment length:",second:n});var r="N/A";t&&void 0!==t.separateAudioVideo&&(this.foundAny=!0,r=t.separateAudioVideo.toString()),this.stats.push({first:"Separate Audio/Video:",second:r}),t&&t.availableBitRates&&t.availableBitRates.forEach((function(n,r){e.foundAny=!0;var i=(n/1e6).toFixed(2),a=t.bitrateResolutions[r];e.bitrates.push({rate:i,resolution:a.height+"x"+a.width})}))}},{key:"clearStats",value:function(){this.formatGeneralStats({})}}]),t}()).\u0275fac=function(t){return new(t||bE)},bE.\u0275cmp=cn({type:bE,selectors:[["app-general-stats"]],inputs:{generalStats:"generalStats"},features:[Dn],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","card"],[1,"card-header","row"],[1,"col-12"],[1,"card-body","row","p-0"],[1,"col-12","p-0","m-0"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[1,"my-0","py-0"],[1,"m-0","p-0"],[1,"table","table-sm","table-borderless","mb-0"],["class","py-0 my-0",4,"ngFor","ngForOf"],[1,"py-0","my-0"]],template:function(t,e){1&t&&ss(0,_E,18,3,"ng-container",0),2&t&&fs("ngIf",1==e.foundAny)},directives:[uf,of],styles:[""]}),bE),AE=function(){var t=function(){function t(e,n,r){J(this,t),this.groupId=e,this.title=n,this.columns=new Map,this.dataLabel="",this.dataSetLabels=[],this.plotIDNum=t.plotIDNum++,this.options=this.setDefaultOptions(r)}return Y(t,[{key:"clear",value:function(){this.columns.clear(),this.maxKey=void 0}},{key:"getGroupID",value:function(){return this.groupId}},{key:"getDescription",value:function(){return this.options.description}},{key:"setDescription",value:function(t){this.options.description=t}},{key:"setDataSetLabel",value:function(t,e){return this.dataSetLabels[t]=e,this}},{key:"setDataLabel",value:function(t){return this.dataLabel=t,this}},{key:"isEmpty",value:function(){return 0===this.columns.size}},{key:"getDataLabel",value:function(){return this.dataLabel}},{key:"reduceDimensions",value:function(t,e,n){var r=this,i=-1,a=0;if(t.length>0){for(var o=t[0].length-1,s=new Array(o).fill(0),u=0;u<t.length;u++)for(var l=1;l<=o;l++){var c=t[u][l];null!=t[u][l]&&(s[l-1]+=c)}var f=s.reduce((function(t,e){return t+e}));s.forEach((function(n,s){null!=r.options.thresholdForDimensions&&n/f<r.options.thresholdForDimensions.countPercentage&&o>=r.options.thresholdForDimensions.minDimensions&&(-1==i?(i=s+1,e[s]="Others"):(t.forEach((function(e,n){t[n][i]+=t[n][s+1-a],t[n].splice(s+1-a,1)})),e.splice(s-a,1),a+=1))}))}if(0!=t.length&&n){for(var d=t[0].length-1,h=new Array(d).fill(0),p=0;p<t.length;p++)for(var g=0;g<d;g++)h[g]+=t[p][g+1];for(var v=0;v<t.length;v++)for(var m=0;m<d;m++)t[v][m+1]/=h[m]}}},{key:"getDataSetLabels",value:function(t){for(var e=0;e<t;e++)null==this.dataSetLabels[e]&&(this.dataSetLabels[e]=this.dataLabel+e);return this.dataSetLabels.slice(0,t)}},{key:"updateValue",value:function(t,e,n,r){if(null==t)throw new Error("Columns cannot be changed at undefined column with value: "+e);if(!isFinite(e))throw new Error("Columns cannot be changed by infinite value ".concat(e," for column ").concat(t));if("number"==typeof t&&!isFinite(t))throw new Error("Columns cannot be changed at infinite column: "+t);var i=this.columns.get(t);null==i&&(i=[]),null!=i[n]&&r?i[n]+=e:i[n]=e,this.columns.set(t,i),(null==this.maxKey||this.maxKey<t)&&(this.maxKey=t)}},{key:"setValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.updateValue(t,e,n,!1)}},{key:"accumValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.updateValue(t,e,n,!0)}},{key:"incrValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.accumValue(t,1,e)}},{key:"getMaxValue",value:function(){var t=-1/0;return this.columns.forEach((function(e){e.forEach((function(e){t=Math.max(e,t)}))})),t}},{key:"getColumns",value:function(){return this.columns}},{key:"getTitle",value:function(){return this.title}},{key:"isNumberArray",value:function(t){return Array.isArray(t)&&t.length>0&&"number"==typeof t[0]}}],[{key:"resetPlotIDNum",value:function(){this.plotIDNum=0}},{key:"sortChartsOnTitle",value:function(t){var e=Array.from(t.values());return e.sort((function(t,e){return t.getTitle()||e.getTitle()?t.getTitle()?e.getTitle()?t.getTitle().localeCompare(e.getTitle()):1:-1:0})),e}},{key:"printHTMLTable",value:function(t){var e="<summary>".concat(t.label,"</summary>").concat(t.summary,"<table class='").concat(t.htmlClass,"'>");return t.table.forEach((function(t,n){0==n?(e+="<thead><tr>",t.forEach((function(t){e+="<th>"+t+"</th>"})),e+="</tr></thead><tbody>"):(e+="<tr>",t.forEach((function(t){e+="<td>"+t+"</td>"})),e+="</tr>")})),e+="</tbody></table><br>"}}]),t}();return t.plotIDNum=0,t}(),xE=function(t){z(n,t);var e=X(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return J(this,n),(i=e.call(this,t,r,a)).annotations=[],i.plotIDNum=n.plotIDNum++,i}return Y(n,[{key:"setDefaultOptions",value:function(t){return Object.assign(Object.assign({xlabel:"Time",ylabel:void 0,syncID:void 0,description:"",maxSampleTime:NaN,height:300,showLegend:!0,timeBin:1e3},t),{dygraphOptions:Object.assign({stackedGraph:!1,drawPoints:!0,axes:{y:{axisLabelWidth:75,maxNumberWidth:5}}},t.dygraphOptions)})}},{key:"clear",value:function(){U(Z(n.prototype),"clear",this).call(this),this.annotations=[]}},{key:"getSyncPlot",value:function(){for(var t,e=0,n=[],r=this.getColumns(),i=Array.from(r.keys()).sort((function(t,e){return t-e})),a=0;a<i.length;a++){var o=i[a],s=r.get(o);if(null==s)throw new Error("Map was empty at key");for(e=Math.max(e,s.length);null!=t&&!isNaN(this.options.maxSampleTime)&&o>t+this.options.maxSampleTime;){var u=t+this.options.maxSampleTime;n.push([u]),t=u}var l=[];n.push(l),l[0]=o;for(var c=0;c<s.length;c++){var f=s[c];null!=l[c+1]&&console.error("Multiple values written to same cell"),l[c+1]=f}t=o}for(var d=0;d<n.length;d++)for(var h=1;h<=e;h++)null==n[d][h]&&(n[d][h]=null);var p=[this.options.xlabel].concat(this.getDataSetLabels(e)),g=null!=this.options.dygraphOptions.stackedGraph&&this.options.dygraphOptions.stackedGraph;return{groupID:this.groupId,id:"timeSync"+this.plotIDNum,syncID:this.options.syncID,plotType:"timeSeries",synchronizedPlots:[Object.assign(Object.assign({},{labels:p,dataRows:n}),{isStacked:g,heading:this.getTitle(),xlabel:this.options.xlabel,ylabel:this.options.ylabel,dygraphOptions:this.options.dygraphOptions,showLegend:this.options.showLegend,annotations:this.annotations,description:this.options.description,id:"time"+this.plotIDNum,height:this.options.height})],synchronizedOnlyXAxis:!0}}},{key:"addAnnotation",value:function(t){this.annotations.push(t)}}]),n}(AE),CE=F("LV99"),DE=function(){function t(){J(this,t),this.graphs=new Map}return Y(t,[{key:"resize",value:function(){this.graphs.forEach((function(t){t.resize()}))}}]),t}(),IE=((EE=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this)).parentElement=t,r}return Y(n,[{key:"plot",value:function(t){var e=this;t.forEach((function(t){var r=n.ELEMENT_ID_COUNTER++,i=document.createElement("h2");i.innerHTML=t.heading;var a,o=document.createElement("div"),s="c3".concat(e.plotType,"Plot").concat(r);if(o.setAttribute("id",s),e.parentElement.appendChild(i),e.parentElement.appendChild(o),null!=t.description){var u=document.createElement("div");u.setAttribute("id","description"+r),u.innerHTML+=t.description+"<br>\n",e.parentElement.appendChild(u)}a=t.isStacked?[t.labels.slice(1)]:t.labels.slice(1).map((function(t){return[t]}));var l=e.plotSingle(t,a,s);e.graphs.set(t.heading,CE.generate(l))}))}},{key:"update",value:function(t){var e=this,n=0;this.graphs.forEach((function(r){e.updateSingle(t[n],r),n++}))}},{key:"clear",value:function(){this.graphs.forEach((function(t){t.load({columns:[]})}))}}]),n}(DE)).ELEMENT_ID_COUNTER=1,EE),RE=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).parentElement=t,r.plotType="bar",r}return Y(n,[{key:"plotSingle",value:function(t,e,n){var r=t.dataRows.map((function(t){return t.slice(1)}));r.unshift(t.labels);var i=[];null!=t.categories&&(i=t.categories.slice());var a={bindto:"#"+n,size:{height:t.height},data:{rows:r,groups:e,type:"bar"},bar:{width:{ratio:1}},axis:{x:{type:"category",categories:i,label:t.xlabel},y:{label:t.ylabel}}};return 0==t.showLegend&&(a.legend={show:!1}),a}},{key:"updateSingle",value:function(t,e){var n=t.dataRows[0].map((function(e,n){return t.dataRows.map((function(t){return t[n]}))})).slice(1);e.load({columns:n})}}]),n}(IE),kE=F("Cnnb"),OE=((TE=function(t){z(n,t);var e=X(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return J(this,n),(r=e.call(this)).parentElement=t,r.options=i,r.rows=new Map,r.labels=new Map,r.dateWindow=[1/0,0],r.annotations=new Map,r}return Y(n,[{key:"updateDateWindow",value:function(t){var e,n=B(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.dataRows.length>0&&(this.dateWindow[0]=Math.min(this.dateWindow[0],r.dataRows[0][0]),this.dateWindow[1]=Math.max(this.dateWindow[1],r.dataRows[r.dataRows.length-1][0]))}}catch(i){n.e(i)}finally{n.f()}}},{key:"plot",value:function(t){var e=this;this.updateDateWindow(t),this.synchronize(t.map((function(t){return e.plotSynchronized(t)})),this.options)}},{key:"plotSynchronized",value:function(t){this.rows.set(t.heading,t.dataRows),this.labels.set(t.heading,t.labels),this.annotations.set(t.heading,t.annotations);var e=n.ELEMENT_ID_COUNTER++,r=document.createElement("h2");r.innerHTML=t.heading;var i=document.createElement("div"),a="dygraphPlot"+e;i.setAttribute("id",a),i.setAttribute("style","height: 250px;");var o=document.createElement("div"),s="dygraphLabel"+e;o.setAttribute("id",s),o.setAttribute("class","digraph-legend");var u=document.createElement("div");u.setAttribute("style","height: 2em;"),u.appendChild(o);var l=document.createElement("div");if(l.appendChild(r),l.appendChild(i),l.appendChild(i),l.appendChild(u),null!=t.description){var c=document.createElement("div");c.setAttribute("id","description"+t.id),c.innerHTML+=t.description+"<br><br>\n",l.appendChild(c)}this.parentElement.appendChild(l);var f={};null!=t.axes&&t.axes.forEach((function(e,n){f[t.labels[n+1]]={axis:e}})),null==t.dygraphOptions.axes&&(t.dygraphOptions.axes={}),null==t.dygraphOptions.axes.x&&(t.dygraphOptions.axes.x={}),null==t.dygraphOptions.axes.x.axisLabelFormatter&&(t.dygraphOptions.axes.x.axisLabelFormatter=function(t,e,n){return kE.default.dateAxisLabelFormatter(new Date(t),e,n)}),null==t.dygraphOptions.axes.x.valueFormatter&&(t.dygraphOptions.axes.x.valueFormatter=function(t,e){return kE.default.dateString_(t,e("labelsUTC"))}),null==t.dygraphOptions.axes.x.ticker&&(t.dygraphOptions.axes.x.ticker=function(t,e,n,r,i,a){return kE.default.dateTicker(t,e,n,r,i,a)});var d=new kE.default(a,t.dataRows,Object.assign(Object.assign({colors:["red","green","blue","purple","orange"],labelsUTC:!0,highlightCircleSize:t.dygraphOptions.drawPoints?7:2,strokeWidth:t.dygraphOptions.drawPoints?0:1,strokeBorderWidth:t.isStacked?void 0:1,labels:t.labels,xlabel:t.xlabel,ylabel:t.ylabel,labelsDiv:s,series:f,showLabelsOnHighlight:t.showLegend,dateWindow:this.dateWindow},t.dygraphOptions),{drawCallback:function(e,n){n&&null!=t.annotations&&t.annotations.length>0&&e.setAnnotations(t.annotations)}}));return this.graphs.set(t.heading,d),d}},{key:"update",value:function(t){var e=this;this.updateDateWindow(t),t.forEach((function(t){if(e.graphs.has(t.heading)){var n,r=e.graphs.get(t.heading);(n=e.rows.get(t.heading)).push.apply(n,j(t.dataRows));var i=e.labels.get(t.heading);if(i.length<t.labels.length&&(i.push.apply(i,j(t.labels.slice(i.length))),e.rows.get(t.heading).forEach((function(e){e.length=t.labels.length}))),null!=t.description){var a=document.getElementById("description"+t.id);null!=a?a.innerHTML=t.description+"<br><br>\n":console.error("Couldn't find description element with id: description"+t.id)}if(t.dataRows.forEach((function(t){var n=t[0];e.dateWindow[0]=Math.min(e.dateWindow[0],n),e.dateWindow[1]=Math.max(e.dateWindow[1],n)})),r.updateOptions({file:e.rows.get(t.heading),labels:i,dateWindow:e.dateWindow}),null!=t.annotations&&t.annotations.length>0){var o,s=e.annotations.get(t.heading);null==s&&(s=[],e.annotations.set(t.heading,s)),(o=s).push.apply(o,j(t.annotations)),r.setAnnotations(s,!0)}}else e.plotSynchronized(t),e.synchronize(Array.from(e.graphs.values()),e.options)}))}},{key:"clear",value:function(){var t=this;this.dateWindow=[1/0,0],this.rows.forEach((function(e,n){t.rows.set(n,[])})),this.labels.forEach((function(e,n){t.labels.set(n,[])})),this.annotations.forEach((function(e,n){t.annotations.set(n,[])})),this.graphs.forEach((function(e){e.updateOptions({file:[],dateWindow:t.dateWindow})}))}},{key:"synchronize",value:function(t,e){var n;t.length>1&&(null==e?e={dateWindow:this.dateWindow}:e.dateWindow=this.dateWindow,(n=kE.default).synchronize.apply(n,j(t).concat([e])))}}]),n}(DE)).ELEMENT_ID_COUNTER=1,TE),PE=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).parentElement=t,r.plotType="hist",r}return Y(n,[{key:"plotSingle",value:function(t,e,n){var r=t.labels[0],i=t.dataRows.slice();i.unshift(t.labels);var a={bindto:"#"+n,size:{height:t.height},data:{type:"bar",x:r,rows:i,groups:e},bar:{zerobased:!0},axis:{x:{label:t.xlabel,tick:{format:function(e){return null!=t.outlierThresholdValue&&e==t.outlierThresholdValue?" >="+e.toString():e.toString()}}},y:{label:t.ylabel}}};return 0==t.showLegend&&(a.legend={show:!1}),a}},{key:"updateSingle",value:function(t,e){var n=t.dataRows.slice();n.unshift(t.labels),e.load({rows:n})}}]),n}(IE),ME=function(t){z(n,t);var e=X(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).parentElement=t,r.plotType="pie",r}return Y(n,[{key:"plotSingle",value:function(t,e,n){var r=t.dataRows.slice();r.unshift(t.labels);var i={bindto:"#"+n,size:{height:t.height},data:{rows:r,type:"pie"}};return 0==t.showLegend&&(i.legend={show:!1}),i}},{key:"updateSingle",value:function(t,e){var n=t.dataRows.slice();e.load({rows:n})}}]),n}(IE),LE=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];J(this,t),this.parentElement=e,this.addCollapsibles=n,this.groupedPlots=new Map,this.plotGroupHTMLElements=new Map,this.graphs=new Map}return Y(t,[{key:"toggleCollapsed",value:function(t){var e=this;t.classList.toggle("lib-plot-report-active");var n=t.innerHTML,r=t.nextElementSibling;r&&("block"===r.style.display?r.style.display="none":(r.style.display="block",setTimeout((function(){var t=e.groupedPlots.get(n);void 0!==t&&t.forEach((function(t){t.resize()}))}),1)))}},{key:"clearPlots",value:function(){this.groupedPlots.forEach((function(t){t.forEach((function(t){return t.clear()}))}))}},{key:"plotChart",value:function(t,e){var n=this,r=void 0;switch(e.plotType){case"timeSeries":(r=new OE(t,{range:!e.synchronizedOnlyXAxis})).plot(e.synchronizedPlots);break;case"histogram":(r=new PE(t)).plot(e.synchronizedPlots);break;case"bar":(r=new RE(t)).plot(e.synchronizedPlots);break;case"html":var i=document.createElement("div");i.innerHTML=e.html,t.appendChild(i);break;case"pie":(r=new ME(t)).plot(e.synchronizedPlots);break;default:throw new Error("Unknown plot type in plot: "+JSON.stringify(e))}return"html"!=e.plotType&&null!=r&&r.graphs.forEach((function(t,e){n.graphs.set(e,t)})),r}},{key:"updateChart",value:function(t,e){"bar"!=t.plotType&&"histogram"!=t.plotType&&"timeSeries"!=t.plotType||e.update(t.synchronizedPlots)}},{key:"plot",value:function(t,e){var n=this,r=[];t.forEach((function(t){var e;if("html"!=t.plotType&&t.synchronizedPlots.forEach((function(e){null!=e.dataRows&&null!=e.dataRows[0]||console.error("Cannot plot synchronized plot that contains empty plots: "+JSON.stringify(t))})),e=t.groupID?t.groupID:"Others",null==n.plotGroupHTMLElements.get(e)){var i=document.createElement("div"),a=document.createElement("div");if(n.addCollapsibles){var o=document.createElement("button");o.setAttribute("class","lib-plot-report-collapsible"),o.innerHTML=e,i.appendChild(o),a.setAttribute("class","lib-plot-report-content"),a.setAttribute("style","display: none;")}i.appendChild(a),r.push(i),n.plotGroupHTMLElements.set(e,a)}})),r.sort((function(t,e){return t.firstElementChild||e.firstElementChild?t.firstElementChild?e.firstElementChild?t.firstElementChild.innerHTML.localeCompare(e.firstElementChild.innerHTML):1:-1:0}));for(var i=0;i<r.length;i++)this.parentElement.appendChild(r[i]);t.forEach((function(t){var r;r=t.groupID?t.groupID:"Others";var i=n.plotGroupHTMLElements.get(r),a=n.groupedPlots.get(r);if(null==a&&(a=new Map,n.groupedPlots.set(r,a)),a.has(t.id))n.updateChart(t,a.get(t.id));else{var o=n.plotChart(i,t);null!=o&&a.set(t.id,o)}if("html"!=t.plotType&&null!=t.details){var s=t.id+"details",u=document.getElementById(s);null==u&&((u=document.createElement("details")).setAttribute("id",s),u.style.marginBottom="1.5rem",i.appendChild(u)),null==e?u.innerHTML=AE.printHTMLTable(t.details):e(s,t.details)}})),this.addCollapsibles&&function(){for(var t=n,e=function(e){var n=r[e].getElementsByClassName("lib-plot-report-collapsible");n[0].addEventListener("click",(function(){t.toggleCollapsed(n[0])}))},i=0;i<r.length;i++)e(i)}()}}]),t}(),NE=function(){function t(){J(this,t)}return Y(t,null,[{key:"synchronizePlots",value:function(t){var e=[],n=new Map,r=0;return t.forEach((function(i){var a=i.syncID;null==a&&(a="undefined");var o=a+"+"+i.groupID+"+"+i.plotType,s=n.get(o);if("undefined"==a||"timeSeries"!=i.plotType||null==s)s=r,r++,n.set(o,s),e[s]=i;else{var u=e[s];if(null==u||"timeSeries"!=u.plotType)throw new Error("synchronizePlots: Unexpected plots: "+JSON.stringify(t));if(u.groupID!=i.groupID)throw new Error("synchronizePlots: Different groupIDs for the same syncID: "+JSON.stringify(t));u.synchronizedPlots=u.synchronizedPlots.concat(i.synchronizedPlots),u.id+=i.id}})),e}},{key:"removeEmptyPlots",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(t=this.removeEmptySynchronizedPlots(t,e)).filter((function(t){if("bar"===t.plotType||"histogram"===t.plotType||"timeSeries"===t.plotType||"pie"===t.plotType){for(var n=0;n<t.synchronizedPlots.length;n++)if(t.synchronizedPlots[n].dataRows.length>e)return!0;return!1}return!0}))}},{key:"removeEmptySynchronizedPlots",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return t.forEach((function(t){n.push("bar"===t.plotType||"histogram"===t.plotType||"timeSeries"===t.plotType?Object.assign(Object.assign({},t),{synchronizedPlots:t.synchronizedPlots.filter((function(t){return t.dataRows.length>e}))}):t)})),n}},{key:"getPercentile",value:function(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;var n=e.sort((function(t,e){return t-e})),r=t/100*(n.length-1),i=Math.floor(r);return void 0!==n[i+1]?n[i]+(r-i)*(n[i+1]-n[i]):n[i]}},{key:"getPercentileFrequencies",value:function(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;var n=e.sort((function(t,e){return t.key-e.key})),r=0;n.forEach((function(t){r+=t.count}));for(var i=t/100*(r-1),a=Math.floor(i),o=i-a,s=-1,u=0;u<n.length;u++){var l=n[u];if(a<(s+=l.count))return l.key;if(a==s){var c=n[u+1];return void 0!==c?l.key+o*(c.key-l.key):l.key}}throw new Error("getPercentileFrequencies() failed to calculate percentile: accum "+s+" base "+a+" totalCount "+r+" remain "+o+" percentileVal "+i+" percentile "+t)}},{key:"getPercentilePDF",value:function(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;if(1==e.length)return e[0].key;var n=e.sort((function(t,e){return t.key-e.key})),r=0;n.forEach((function(t){r+=t.count}));for(var i=r*(t/100),a=0,o=0;o<n.length;o++){var s=n[o];if(i<=(a+=s.count))return s.key}throw new Error("getPercentilePDF() failed to calculate percentile: accum "+a+" totalCount "+r+" percentileVal "+i+" percentile "+t)}},{key:"roundForHist",value:function(t){if(Number.isInteger(t)||(t=Math.round(t)),-10<t&&t<10)return t;var e=Math.abs(t),n=Math.trunc(Math.log10(e));switch(n){case 0:return t;case 1:var r=Math.pow(10,n),i=r/2;return Math.sign(t)*Math.trunc((e+i)/r)*r;default:var a=Math.pow(10,n-1),o=a/2;return Math.sign(t)*Math.trunc((e+o)/a)*a}}}]),t}(),FE=["plotDiv"],jE=((SE=function(){function t(){J(this,t),this.updateStats=new ul,this.updateGeneralStats=new ul(!0),this.startStats=!1,this.statData=new Map,this.updatePlotsActive=!0,this.startStopButtonText="Stop",this.pauseResumeButtonText="Pause"}return Y(t,[{key:"ngAfterViewInit",value:function(){$("#controlButtons").hide(),this.plotDrawer=new LE(this.plotDiv.nativeElement),this.errorLogsDiv=document.createElement("div"),this.plotDiv.nativeElement.parentElement.appendChild(this.errorLogsDiv),this.getTimeSeries("1 - HTML5 Statistics","Buffer Level (seconds)"),this.getTimeSeries("1 - HTML5 Statistics","Buffering events (y-value is duration in milliseconds)"),this.getTimeSeries("1 - HTML5 Statistics","Dropped Frames"),this.getTimeSeries("1 - HTML5 Statistics","Total Frames"),this.getTimeSeries("2 - Basic Statistics","Current Bitrate (Mbps)"),this.getTimeSeries("3 - Advanced Statistics","Bandwidth estimate (Mbps)"),this.getTimeSeries("3 - Advanced Statistics","Resource download events (y-value is download duration in milliseconds)")}},{key:"startTimer",value:function(){var t=this;this.statInterval=setInterval((function(){return t.updateStats.emit()}),1e3)}},{key:"stopTimer",value:function(){this.statInterval=clearInterval(this.statInterval)}},{key:"startStopButton",value:function(){null!=this.statInterval?(this.stopTimer(),this.startStopButtonText="Start"):(this.startTimer(),this.startStopButtonText="Stop")}},{key:"pauseResumeButton",value:function(){this.updatePlotsActive=!this.updatePlotsActive,this.updatePlotsActive?(this.pauseResumeButtonText="Pause",this.updatePlots()):this.pauseResumeButtonText="Resume"}},{key:"clearButton",value:function(){var t=this.updatePlotsActive;this.updatePlotsActive=!1,this.plotDrawer.clearPlots(),this.updatePlotsActive=t,this.errorLogsDiv.innerHTML=""}},{key:"ngOnChanges",value:function(t){var e=this;if(null!=t.startStats&&(0==t.startStats.previousValue&&1==t.startStats.currentValue&&($("#controlButtons").show(),this.startTimer()),1==t.startStats.previousValue&&0==t.startStats.currentValue))return $("#controlButtons").hide(),this.stopTimer(),this.clearButton(),this.plotDiv.nativeElement.innerHTML="",void(this.plotDrawer=new LE(this.plotDiv.nativeElement));var n=Date.now();if(this.stats){if(this.stats.html5Stats){if(this.stats.html5Stats.bufferLevel&&this.getTimeSeries("1 - HTML5 Statistics","Buffer Level (seconds)").setValue(n,this.stats.html5Stats.bufferLevel),this.stats.html5Stats.bufferingEvents){var r=this.getTimeSeries("1 - HTML5 Statistics","Buffering events (y-value is duration in milliseconds)");this.stats.html5Stats.bufferingEvents.forEach((function(t){r.setValue(t.startTime,t.duration)}))}this.stats.html5Stats.droppedFrames&&this.getTimeSeries("1 - HTML5 Statistics","Dropped Frames").setValue(n,this.stats.html5Stats.droppedFrames),this.stats.html5Stats.totalFrames&&this.getTimeSeries("1 - HTML5 Statistics","Total Frames").setValue(n,this.stats.html5Stats.totalFrames)}if(this.stats.basicStats&&(this.stats.basicStats.currentBitrate&&this.getTimeSeries("2 - Basic Statistics","Current Bitrate (Mbps)").setValue(n,this.stats.basicStats.currentBitrate/1e6),this.stats.basicStats.errorLogs&&this.stats.basicStats.errorLogs.forEach((function(t){e.errorLogsDiv.innerHTML+=t+"<br>"}))),this.stats.generalStats&&0!=Object.keys(this.stats.generalStats).length&&this.updateGeneralStats.emit(this.stats.generalStats),this.stats.advancedStats&&(this.stats.advancedStats.measuredThroughput&&this.getTimeSeries("3 - Advanced Statistics","Bandwidth estimate (Mbps)").setValue(n,this.stats.advancedStats.measuredThroughput/1e6),this.stats.advancedStats.resourceDownloadEvents)){var i=this.getTimeSeries("3 - Advanced Statistics","Resource download events (y-value is download duration in milliseconds)");i.setDataSetLabel(0,"Download"),this.stats.advancedStats.resourceDownloadEvents.forEach((function(t){i.setValue(t.startTime,t.duration),i.addAnnotation({series:"Download",x:t.startTime.toString(),shortText:"D",text:t.url})}))}this.updatePlotsActive&&this.updatePlots()}}},{key:"updatePlots",value:function(){if(null!=this.plotDrawer){var t=[];this.statData.forEach((function(e){t.push(e.getSyncPlot()),e.clear()})),t=NE.removeEmptyPlots(t);var e=NE.synchronizePlots(t);this.plotDrawer.plot(e),$(".lib-plot-report-collapsible").parent().addClass("col-xl-6 col-12")}else console.log("stat-viewer: plotDrawer is undefined")}},{key:"getTimeSeries",value:function(t,e){var n=t+"+"+e;return this.statData.has(n)||this.statData.set(n,new xE(t,e,{dygraphOptions:{includeZero:!0}})),this.statData.get(n)}}]),t}()).\u0275fac=function(t){return new(t||SE)},SE.\u0275cmp=cn({type:SE,selectors:[["app-stat-viewer"]],viewQuery:function(t,e){var n;1&t&&El(FE,!0),2&t&&_l(n=wl())&&(e.plotDiv=n.first)},inputs:{startStats:"startStats",stats:"stats"},outputs:{updateStats:"updateStats",updateGeneralStats:"updateGeneralStats"},features:[Dn],decls:14,vars:2,consts:[[1,"container-fluid","m-0","p-0"],[1,"row"],[1,"col-10"],["id","controlButtons",1,"input-group"],[1,"input-group-prepend"],[1,"btn","btn-secondary",3,"click"],[1,"input-group-append"],["plotDiv",""]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"div",2),hs(3,"div",3),hs(4,"div",4),hs(5,"button",5),Es("click",(function(){return e.startStopButton()})),Ks(6),ps(),ps(),hs(7,"div",6),hs(8,"button",5),Es("click",(function(){return e.pauseResumeButton()})),Ks(9),ps(),hs(10,"button",5),Es("click",(function(){return e.clearButton()})),Ks(11,"Clear"),ps(),ps(),ps(),ps(),ps(),gs(12,"div",1,7),ps()),2&t&&(sa(6),Ws(e.startStopButtonText),sa(3),Ws(e.pauseResumeButtonText))},styles:['.c3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3[_ngcontent-%COMP%]   line[_ngcontent-%COMP%], .c3[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:#000}.c3[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-bars[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .c3-event-rect[_ngcontent-%COMP%], .c3-legend-item-tile[_ngcontent-%COMP%], .c3-xgrid-focus[_ngcontent-%COMP%], .c3-ygrid[_ngcontent-%COMP%]{shape-rendering:crispEdges}.c3-chart-arc[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.c3-chart-arc[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#fff;stroke-width:1}.c3-chart-arc[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#fff;font-size:13px}.c3-grid[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#aaa}.c3-grid[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#aaa}.c3-xgrid[_ngcontent-%COMP%], .c3-ygrid[_ngcontent-%COMP%]{stroke-dasharray:3 3}.c3-text.c3-empty[_ngcontent-%COMP%]{fill:grey;font-size:2em}.c3-line[_ngcontent-%COMP%]{stroke-width:1px}.c3-circle._expanded_[_ngcontent-%COMP%]{stroke-width:1px;stroke:#fff}.c3-selected-circle[_ngcontent-%COMP%]{fill:#fff;stroke-width:2px}.c3-bar[_ngcontent-%COMP%]{stroke-width:0}.c3-bar._expanded_[_ngcontent-%COMP%]{fill-opacity:1;fill-opacity:.75}.c3-target.c3-focused[_ngcontent-%COMP%]{opacity:1}.c3-target.c3-focused[_ngcontent-%COMP%]   path.c3-line[_ngcontent-%COMP%], .c3-target.c3-focused[_ngcontent-%COMP%]   path.c3-step[_ngcontent-%COMP%]{stroke-width:2px}.c3-target.c3-defocused[_ngcontent-%COMP%]{opacity:.3!important}.c3-region[_ngcontent-%COMP%]{fill:#4682b4;fill-opacity:.1}.c3-brush[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]{fill-opacity:.1}.c3-legend-item[_ngcontent-%COMP%]{font-size:12px}.c3-legend-item-hidden[_ngcontent-%COMP%]{opacity:.15}.c3-legend-background[_ngcontent-%COMP%]{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title[_ngcontent-%COMP%]{font:14px sans-serif}.c3-tooltip-container[_ngcontent-%COMP%]{z-index:10}.c3-tooltip[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ccc}.c3-tooltip[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#fff}.c3-tooltip[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{text-align:right}.c3-area[_ngcontent-%COMP%]{stroke-width:0;opacity:.2}.c3-chart-arcs-title[_ngcontent-%COMP%]{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-background[_ngcontent-%COMP%]{fill:#e0e0e0;stroke:#fff}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-unit[_ngcontent-%COMP%]{fill:#000;font-size:16px}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-max[_ngcontent-%COMP%], .c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-min[_ngcontent-%COMP%]{fill:#777}.c3-chart-arc[_ngcontent-%COMP%]   .c3-gauge-value[_ngcontent-%COMP%]{fill:#000}.c3-chart-arc.c3-target.c3-focused[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .c3-chart-arc.c3-target[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{opacity:1}.digraph-legend[_ngcontent-%COMP%] > span.highlight[_ngcontent-%COMP%]{border:3px solid #000}.digraph-legend[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px}.dygraph-annotation[_ngcontent-%COMP%]{position:absolute;z-index:10;overflow:hidden}.dygraph-default-annotation[_ngcontent-%COMP%]{border:1px solid #000;background-color:#fff;text-align:center;box-sizing:content-box}.dygraph-label-rotate-left[_ngcontent-%COMP%]{text-align:center;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}.dygraph-label-rotate-right[_ngcontent-%COMP%]{text-align:center;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.lib-plot-report-collapsible[_ngcontent-%COMP%]{background-color:#adb5bd;color:#fff;cursor:pointer;margin-top:10px;padding:18px;width:100%;border:none;text-align:left;outline:none;font-size:15px;border-radius:1.078em}.lib-plot-report-active[_ngcontent-%COMP%], .lib-plot-report-collapsible[_ngcontent-%COMP%]:hover{background-color:#919ca6;border-color:#8a95a1}.lib-plot-report-active[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.lib-plot-report-content[_ngcontent-%COMP%]{padding:0 18px 5px;display:block;overflow:hidden;border:1px solid #8a95a1;border-bottom-left-radius:1.078em;border-bottom-right-radius:1.078em}.lib-plot-report-collapsible[_ngcontent-%COMP%]:after{content:"\\02795";font-size:13px;color:#fff;float:right;margin-left:5px}.lib-plot-report-active[_ngcontent-%COMP%]:after{content:"\\2796"}.lib-plot-report[_ngcontent-%COMP%]{border-collapse:collapse;margin:0 auto;border:2px solid grey}.lib-plot-report[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .lib-plot-report[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px}.lib-plot-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e6e5e5}.lib-plot-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}']}),SE);function BE(t,e){}var UE,VE,GE,HE,YE,zE,qE=((UE=function(){function t(e,n,r){J(this,t),this.componentFactoryResolver=e,this.activatedRoute=n,this.location=r,this.startStats=!1,this.urlHasAmdStyleTokenAuth=!1}return Y(t,[{key:"ngOnInit",value:function(){this.setPlayer=this.activatedRoute.snapshot.data.player}},{key:"ngOnDestroy",value:function(){this.playerComponent&&this.playerComponent.stop()}},{key:"resetStats",value:function(){this.startStats=!1}},{key:"playUrl",value:function(t){var e=this;this.urlHasAmdStyleTokenAuth=!1,setTimeout((function(){var n=!1;new RegExp(/\?.*hdnts/).test(t)&&(n=!0),e.urlHasAmdStyleTokenAuth=n;var r=Wb.sync(t.split("?")[0]).substr(0,12);e.playerComponent.playUrl(t,r,n),e.startStats=!0}),1)}},{key:"showOptions",value:function(t){null!=this.playerComponent&&this.playerComponent.updateShowOptions(t)}},{key:"changePlayer",value:function(t){var e;"hlsjs"==t?e=Vb:"dashjs"==t&&(e=Xb);var n=this.componentFactoryResolver.resolveComponentFactory(e),r=this.appPlayer.viewContainerRef;r.clear(),this.updateGeneralStats({});var i=r.createComponent(n);this.playerComponent=i.instance,this.playerInfo=this.playerComponent.getPlayerInfo(),this.location.go("players/"+t,"")}},{key:"getStatistics",value:function(){this.stats=this.playerComponent.getAllStatistics()}},{key:"updateGeneralStats",value:function(t){this.generalStats=t}}]),t}()).\u0275fac=function(t){return new(t||UE)(ls(pu),ls(Mp),ls(Kc))},UE.\u0275cmp=cn({type:UE,selectors:[["app-players"]],viewQuery:function(t,e){var n;1&t&&bl(Cb,!0),2&t&&_l(n=wl())&&(e.appPlayer=n.first)},decls:20,vars:6,consts:[[1,"row","justify-content-center","my-3"],[1,"col-10","px-0"],[1,"row","justify-content-center"],[1,"col-10"],[3,"setPlayer","playerChangeEvent","streamChangeEvent","showPlayerOptionsEvent"],[3,"hasAmdStyleTokenAuth"],[1,"col-xl-7","col-10"],["appPlayer",""],[1,"col-xl-3","col-10","m-0","p-0"],[1,"row-xl-3","mt-2"],[3,"playerInfo"],[3,"generalStats"],[1,"row","justify-content-center","stats"],[3,"stats","startStats","updateStats","updateGeneralStats"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"h1"),Ks(3,"Player Testing"),ps(),ps(),ps(),hs(4,"div",2),hs(5,"div",3),hs(6,"app-selector",4),Es("playerChangeEvent",(function(t){return e.resetStats(),e.changePlayer(t)}))("streamChangeEvent",(function(t){return e.resetStats(),e.playUrl(t)}))("showPlayerOptionsEvent",(function(t){return e.showOptions(t)})),ps(),ps(),hs(7,"div",1),gs(8,"safari-token-auth-alert",5),ps(),ps(),hs(9,"div",0),hs(10,"div",6),ss(11,BE,0,0,"ng-template",7),ps(),hs(12,"div",8),hs(13,"div",9),gs(14,"app-player-info",10),ps(),hs(15,"div",9),gs(16,"app-general-stats",11),ps(),ps(),ps(),hs(17,"div",12),hs(18,"div",1),hs(19,"app-stat-viewer",13),Es("updateStats",(function(){return e.getStatistics()}))("updateGeneralStats",(function(t){return e.updateGeneralStats(t)})),ps(),ps(),ps()),2&t&&(sa(6),fs("setPlayer",e.setPlayer),sa(2),fs("hasAmdStyleTokenAuth",e.urlHasAmdStyleTokenAuth),sa(6),fs("playerInfo",e.playerInfo),sa(2),fs("generalStats",e.generalStats),sa(3),fs("stats",e.stats)("startStats",e.startStats))},directives:[uE,hE,Cb,pE,wE,jE],styles:[""]}),UE),XE=F("elGS"),KE=F("NMsv"),WE=function t(e,n,r){var i=this;J(this,t),this.url=e,this.callback=r;var a=new XMLHttpRequest;a.open("GET",e),a.withCredentials=n,a.onload=function(){i.callback(a)},a.send()},QE=function(){function t(){J(this,t),this.errors=new Map}return Y(t,[{key:"addError",value:function(t,e,n){var r=this.errors.get(t);if(null==r)this.errors.set(t,new Map([[e,new Set([n])]]));else{var i=r.get(e);null==i?r.set(e,new Set([n])):i.add(n)}}},{key:"getFileErrors",value:function(t){var e=this.errors.get(t);return null==e?new Map:e}},{key:Symbol.iterator,value:function(){return this.errors[Symbol.iterator]()}}]),t}(),$E=function(){function t(e,n){J(this,t),this.masterUrl=e,this.withCredentials=n,this.levelPlaylistInfos=[],this.levelPlaylists=[],this.errors=new QE}return Y(t,[{key:"clearData",value:function(){this.masterPlaylist=void 0,this.levelPlaylists=[],this.levelPlaylistInfos=[],this.errors=new QE}},{key:"getPlaylists",value:function(){var t=this;return this.clearData(),new Promise((function(e){new WE(t.masterUrl,t.withCredentials,(function(n){var r=t;if(KE.setOptions({onError:function(t,e){r.errors.addError(r.masterUrl,t,e)}}),!(n.status>=300)){t.masterPlaylist=KE.parse(n.response);var i=[];return t.levelPlaylistInfos=t.masterPlaylist.variants,t.levelPlaylistInfos.forEach((function(e,n){var r=new Promise((function(r){var i=new URL(e.uri,t.masterUrl).href;new WE(i,t.withCredentials,(function(e){var i,a=t;KE.setOptions({onError:function(t,n){a.errors.addError(e.responseURL.substring(e.responseURL.lastIndexOf("/")+1),t,n)}}),e.status>=300?(a.errors.addError(e.responseURL.substring(e.responseURL.lastIndexOf("/")+1),e.responseText,0),t.levelPlaylists[n]=e.responseText):(i=KE.parse(e.response),t.levelPlaylists[n]=i),r()}))}));i.push(r)})),Promise.all(i).then((function(){e()}))}r.errors.addError(n.responseURL.substring(n.responseURL.lastIndexOf("/")+1),n.responseText,0)}))}))}}]),t}(),ZE=function(t){return t[t.WARNING=0]="WARNING",t[t.ERROR=1]="ERROR",t}({}),JE=function(t){return t.NOT_SAME_ASPECT_RATIO="Not Same Aspect Ratio",t.NO_RESOLUTION="No Resolution",t.INVALID_RESOLUTION="InvalidResolution",t.CHANGING_RESOLUTION="Changing Resolution",t.MISSING_CODECS_ATTRIBUTE="Missing Codecs Attribute",t.INCONSISTENT_VERSION="Versions are inconsistent",t.INCONSISTENT_DURATION="Playlists have varying target durations",t.NO_MULTIPLE_BITRATES="No multiple bitrates",t.BAD_DEFAULT_BITRATE="Bad default bitrate",t}({}),tT=[{code:"2dcc",description:"2D Cartesian coordinates",handler:"Metadata",specification:"Metrics",objectType:""},{code:"3glo",description:"3GPP Location",handler:"Metadata",specification:"3GPP",objectType:""},{code:"3gor",description:"3GPP Orientation",handler:"Metadata",specification:"3GPP",objectType:""},{code:"3gvo",description:"3GPP Video Orientation",handler:"Metadata",specification:"3GPP",objectType:""},{code:"a3d1",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d2",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d3",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d4",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3ds",description:"Auro-Cx 3D audio",handler:"Audio",specification:"Auro",objectType:"0xAF"},{code:"ac-3",description:"AC-3 audio",handler:"Audio",specification:"ETSI AC-3",objectType:"0xA5"},{code:"ac-4",description:"AC-4 audio",handler:"Audio",specification:"ETSI AC-4",objectType:"0xAE"},{code:"alac",description:"Apple lossless audio codec",handler:"Audio",specification:"Apple",objectType:""},{code:"alaw",description:"a-Law",handler:"Audio",specification:"QT",objectType:""},{code:"av01",description:"AOM Video Codec",handler:"Video",specification:"AV1-ISOBMFF",objectType:""},{code:"avc1",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc2",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc3",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc4",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avcp",description:"Advanced Video Coding Parameters",handler:"Video",specification:"NALu Video",objectType:"0x22"},{code:"camm",description:"Camera motion metadata track",handler:"Video",specification:"CamMotion",objectType:""},{code:"dra1",description:"DRA Audio",handler:"Audio",specification:"DRA",objectType:"0xA7"},{code:"drac",description:"Dirac Video Coder",handler:"Video",specification:"Dirac",objectType:"0xA4"},{code:"dts+",description:"Enhancement layer for DTS layered audio",handler:"Audio",specification:"DTS",objectType:""},{code:"dts-",description:"Dependent base layer for DTS layered audio",handler:"Audio",specification:"DTS",objectType:""},{code:"dtsc",description:"Core Substream",handler:"Audio",specification:"DTS-HD",objectType:"0xA9"},{code:"dtse",description:"Extension Substream containing only LBR",handler:"Audio",specification:"DTS-HD",objectType:"0xAC"},{code:"dtsh",description:"Core Substream + Extension Substream",handler:"Audio",specification:"DTS-HD",objectType:"0xAA"},{code:"dtsl",description:"Extension Substream containing only XLL",handler:"Audio",specification:"DTS-HD",objectType:"0xAB"},{code:"dtsx",description:"DTS-UHD profile 2",handler:"Audio",specification:"DTS-UHD",objectType:"0xB2"},{code:"dtsy",description:"DTS-UHD profile 3 or higher",handler:"Audio",specification:"DTS-UHD",objectType:"0xB3"},{code:"dva1",description:"AVC-based Dolby Vision derived from avc1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvav",description:"AVC-based Dolby Vision derived from avc3",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvh1",description:"HEVC-based Dolby Vision derived from hvc1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvhe",description:"HEVC-based Dolby Vision derived from hev1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"ec-3",description:"Enhanced AC-3 audio",handler:"Audio",specification:"ETSI AC-3",objectType:"0xA6"},{code:"enca",description:"Encrypted/Protected audio",handler:"Audio",specification:"ISO",objectType:""},{code:"encf",description:"Encrypted/Protected font",handler:"Font",specification:"ISO",objectType:""},{code:"encm",description:"Encrypted/Protected metadata",handler:"Metadata",specification:"ISO",objectType:""},{code:"encs",description:"Encrypted Systems stream",handler:"(various)",specification:"ISO",objectType:""},{code:"enct",description:"Encrypted Text",handler:"Text",specification:"ISO",objectType:""},{code:"encv",description:"Encrypted/protected video",handler:"Video",specification:"ISO",objectType:""},{code:"fdp$20",description:"File delivery hints",handler:"Hint",specification:"ISO",objectType:""},{code:"g719",description:"ITU-T Recommendation G.719 (2008)",handler:"Audio",specification:"ITU G.719",objectType:"0xA8"},{code:"g726",description:"ITU-T Recommendation G.726 (1990)",handler:"Audio",specification:"SDV",objectType:""},{code:"hev1",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hev2",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvc1",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvc2",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvt1",description:"HEVC tile tracks",handler:"Video",specification:"NALu Video",objectType:""},{code:"icpv",description:"Incomplete video",handler:"Video",specification:"ISO",objectType:""},{code:"ixse",description:"DVB Track Level Index Track",handler:"Metadata",specification:"DVB",objectType:""},{code:"jxsm",description:"Video and image sequences coded to the JPEG-XS coding format",handler:"Video",specification:"JPXS",objectType:""},{code:"lhe1",description:"Layered HEVC",handler:"Video",specification:"NALu Video",objectType:""},{code:"lht1",description:"Layered HEVC tile tracks",handler:"Video",specification:"NALu Video",objectType:""},{code:"lhv1",description:"Layered HEVC",handler:"Video",specification:"NALu Video",objectType:""},{code:"m2ts",description:"MPEG-2 transport stream for DMB",handler:"Hint",specification:"DMB-MAF",objectType:""},{code:"m4ae",description:"MPEG-4 Audio Enhancement",handler:"Audio",specification:"MP4v2",objectType:"0x40"},{code:"mebx",description:"Timed metadata multiplex",handler:"Metadata",specification:"ISO",objectType:""},{code:"mett",description:"Text timed metadata that is not XML",handler:"Metadata",specification:"ISO",objectType:""},{code:"metx",description:"XML timed metadata",handler:"Metadata",specification:"ISO",objectType:""},{code:"mha1",description:"MPEG-H Audio (single stream",handler:" unencapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mha2",description:"MPEG-H Audio (multi-stream",handler:" unencapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mhm1",description:"MPEG-H Audio (single stream",handler:" MHAS encapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mhm2",description:"MPEG-H Audio (multi-stream",handler:" MHAS encapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mjp2",description:"Motion JPEG 2000",handler:"Video",specification:"MJ2",objectType:""},{code:"mjpg",description:"JPEG image sequences",handler:"Video",specification:"HEIF",objectType:""},{code:"mlix",description:"DVB Movie level index track",handler:"Metadata",specification:"DVB",objectType:""},{code:"mlpa",description:"MLP Audio",handler:"Audio",specification:"Dolby MLP",objectType:""},{code:"mp4a",description:"MPEG-4 Audio",handler:"Audio",specification:"MP4v1",objectType:"0x40"},{code:"mp4s",description:"MPEG-4 Systems",handler:"(various)",specification:"MP4v1",objectType:"various"},{code:"mp4v",description:"MPEG-4 Visual",handler:"Video",specification:"MP4v1",objectType:"0x20"},{code:"mvc1",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc2",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc3",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc4",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd1",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd2",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd3",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd4",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"oksd",description:"OMA Keys",handler:"Metadata",specification:"OMA DRM XBS",objectType:""},{code:"Opus",description:"Opus audio coding",handler:"Audio",specification:"Opus",objectType:"0xAD"},{code:"pm2t",description:"Protected MPEG-2 Transport",handler:"Hint",specification:"ISO",objectType:""},{code:"prtp",description:"Protected RTP Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"raw$20",description:"Uncompressed audio",handler:"Audio",specification:"MJ2",objectType:""},{code:"resv",description:"Restricted Video",handler:"Video",specification:"NALu Video",objectType:""},{code:"rm2t",description:"MPEG-2 Transport Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rrtp",description:"RTP reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rsrp",description:"SRTP Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rtcp",description:"RTCP reception hint track",handler:"Hint",specification:"ISO",objectType:""},{code:"rtmd",description:"Real Time Metadata Sample Entry(XAVC Format)",handler:"Metadata",specification:"Sony",objectType:""},{code:"rtp$20",description:"RTP Hints",handler:"Hint",specification:"ISO",objectType:"n/a"},{code:"rv60",description:"RealVideo Codec 11",handler:"Video",specification:"RealHD",objectType:"0xB0"},{code:"s263",description:"ITU H.263 video (3GPP format)",handler:"Video",specification:"3GPP",objectType:""},{code:"samr",description:"Narrowband AMR voice",handler:"Audio",specification:"3GPP",objectType:""},{code:"sawb",description:"Wideband AMR voice",handler:"Audio",specification:"3GPP",objectType:""},{code:"sawp",description:"Extended AMR-WB (AMR-WB+)",handler:"Audio",specification:"3GPP",objectType:""},{code:"sbtt",description:"Text subtitles",handler:"Subtitles",specification:"ISO",objectType:""},{code:"sevc",description:"EVRC Voice",handler:"Audio",specification:"3GPP2",objectType:"0xA0"},{code:"sevs",description:"Enhanced Voice Services (EVS)",handler:"Audio",specification:"3GPP",objectType:""},{code:"sm2t",description:"MPEG-2 Transport Server",handler:"Hint",specification:"ISO",objectType:""},{code:"sqcp",description:"13K Voice",handler:"Audio",specification:"3GPP2",objectType:"0xE1"},{code:"srtp",description:"SRTP Hints",handler:"Hint",specification:"ISO",objectType:"n/a"},{code:"ssmv",description:"SMV Voice",handler:"Audio",specification:"3GPP2",objectType:"0xA1"},{code:"stcp",description:"SRTCP reception hint track",handler:"Hint",specification:"ISO",objectType:""},{code:"STGS",description:"Subtitle Sample Entry (HMMP)",handler:"Subtitle Graphics",specification:"Sony",objectType:""},{code:"stpp",description:"Subtitles (Timed Text)",handler:"Subtitles",specification:"ISO",objectType:""},{code:"stxt",description:"Simple timed text",handler:"Text",specification:"ISO",objectType:""},{code:"svc1",description:"Scalable Video Coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"svc2",description:"Scalable Video Coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"svcM",description:"SVC metadata",handler:"Metadata",specification:"NALu Video",objectType:""},{code:"tc64",description:"64 bit timecode samples",handler:"Timecode",specification:"Apple",objectType:""},{code:"tmcd",description:"32 bit timecode samples",handler:"Timecode",specification:"Apple",objectType:""},{code:"twos",description:"Uncompressed 16-bit audio",handler:"Audio",specification:"MJ2",objectType:""},{code:"tx3g",description:"Timed Text stream",handler:"Text",specification:"3GPP",objectType:""},{code:"ulaw",description:"Samples have been compressed using uLaw 2:1.",handler:"Audio",specification:"QT",objectType:""},{code:"unid",description:"Dynamic Range Control (DRC) data",handler:"Metadata",specification:"DRC",objectType:""},{code:"urim",description:"Binary timed metadata identified by URI",handler:"Metadata",specification:"ISO",objectType:""},{code:"vc-1",description:"SMPTE VC-1",handler:"Video",specification:"SMPTE",objectType:"0xA3"},{code:"vp08",description:"VP8 video",handler:"Video",specification:"VPxx",objectType:""},{code:"vp09",description:"VP9 video",handler:"Video",specification:"VPxx",objectType:"0xB1"},{code:"wvtt",description:"WebVTT data",handler:"Text",specification:"ISO-Text",objectType:""}],eT=function(){function t(e){if(J(this,t),this.codecAttribute=e,this.codecs=[],null!=e){var n,r=B(e.split(","));try{for(r.s();!(n=r.n()).done;){var i=n.value;i=i.trim();var a,o=!1,s=B(tT);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(i.startsWith(u.code)){this.codecs.push({value:i,codec:u}),o=!0;break}}}catch(l){s.e(l)}finally{s.f()}o||this.codecs.push({value:i,codec:void 0})}}catch(l){r.e(l)}finally{r.f()}}}return Y(t,[{key:"toStringArray",value:function(){if(0==this.codecs.length)return[];var t,e=[],n=B(this.codecs);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.value+" => ";i+=null==r.codec?"unknown":"".concat(r.codec.description,", ").concat(r.codec.handler,", ").concat(r.codec.specification),e.push(i)}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"hasHandler",value:function(t){var e,n=B(this.codecs);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(void 0!==r.codec&&r.codec.handler==t)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"hasVideo",value:function(){return this.hasHandler("Video")}},{key:"hasAudio",value:function(){return this.hasHandler("Audio")}}]),t}(),nT=function(){function t(){J(this,t)}return Y(t,null,[{key:"check",value:function(e){var n=new Array;return t.checkResolutionAndAspectRatio(e.masterPlaylist.variants,n),t.checkCodecsPresent(e.masterPlaylist.variants,n),t.checkVersionConsistency(e.masterPlaylist,e.levelPlaylists,n),t.checkTargetDurations(e.levelPlaylists,n),t.checkMultipleBitrates(e.masterPlaylist,n),t.checkDefaultBitrate(e.masterPlaylist,n),n}},{key:"checkCodecsPresent",value:function(t,e){var n,r=B(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;null==i.codecs&&e.push({type:ZE.WARNING,kind:JE.MISSING_CODECS_ATTRIBUTE,msg:"Violating Apple 9.1. Your EXT-X-STREAM-INF tag MUST always provide the CODECS attribute. Stream ".concat(i.uri," has no CODECS attribute.")})}}catch(a){r.e(a)}finally{r.f()}}},{key:"checkResolutionAndAspectRatio",value:function(t,e){var n,r,i,a=1<<28,o=-(1<<28),s=B(t);try{for(s.s();!(i=s.n()).done;){var u=i.value,l=new eT(u.codecs),c=u.resolution;if(null!=c)if(c.width<=0||c.height<=0)e.push({type:ZE.ERROR,kind:JE.INVALID_RESOLUTION,msg:"Invalid resolution width: ".concat(c.width,", height: ").concat(c.height," for stream ").concat(u.uri,".")});else{var f=1*c.width/c.height;f<a&&(a=f,n=c),f>o&&(o=f,r=c)}else l.hasVideo()&&e.push({type:ZE.WARNING,kind:JE.NO_RESOLUTION,msg:"Violating Apple rule 9.2 due to missing RESOLUTION attribute for video stream ".concat(u.uri,".")})}}catch(d){s.e(d)}finally{s.f()}a!=-o&&Math.abs(a-o)>.16&&e.push({type:ZE.WARNING,kind:JE.CHANGING_RESOLUTION,msg:"Violating Apple rule 1.33 due to aspect ratio changing aspect ratio. Minimum aspect ratio ".concat(n.width,"x").concat(n.height,"=").concat(a," vs. ").concat(r.width,"x").concat(r.height,"=").concat(o,".")})}},{key:"checkVersionConsistency",value:function(t,e,n){for(var r in e)"string"!=typeof e[r]&&(null==t.version&&(t.version=1),null==e[r].version&&(e[r].version=1),e[r].version!=t.version&&n.push({type:ZE.WARNING,kind:JE.INCONSISTENT_VERSION,msg:"Media playlist ".concat(t.variants[r].uri," has version ").concat(e[r].version,", but master playlist has version ").concat(t.version,".")}))}},{key:"checkTargetDurations",value:function(t,e){var n=new Set(t.map((function(t){return t.targetDuration})));n.size>1&&e.push({type:ZE.WARNING,kind:JE.INCONSISTENT_DURATION,msg:"Violating Apple rule 8.2 by having several different target durations (".concat(Array.from(n).join(", "),") detected in media playlists.")})}},{key:"checkMultipleBitrates",value:function(t,e){1==new Set(t.variants.map((function(t){return t.bandwidth}))).size&&e.push({type:ZE.WARNING,kind:JE.NO_MULTIPLE_BITRATES,msg:"Violating Apple rule 9.9 that a stream should include different bitrates."})}},{key:"checkDefaultBitrate",value:function(t,e){var n=t.variants.filter((function(t){return new eT(t.codecs).hasVideo()}));0==n.length&&(n=t.variants),null!=n[0].bandwidth&&(n[0].bandwidth>25e5||n[0].bandwidth<15e5)&&e.push({type:ZE.WARNING,kind:JE.BAD_DEFAULT_BITRATE,msg:"Violating Apple rule 1.32 that the default bitrate should be approximate 2000 kb/s."})}}]),t}(),rT=function(){function t(e){J(this,t),this.dygraphOptions={dygraphOptions:{axes:{x:{axisLabelFormatter:function(t){return new Date(t).getTime().toString()},valueFormatter:function(t){return new Date(t).getTime().toString()}}},labelsUTC:!1}},this.bitrate=new xE("","Bitrate",this.dygraphOptions),this.plotDrawer=new LE(e)}return Y(t,[{key:"addDownloadData",value:function(t){"initSegment"!=t.sn&&"main"==t.type&&this.bitrate.setValue(t.sn,8*t.stats.loaded/t.duration/1e3)}},{key:"clear",value:function(){this.plotDrawer.clearPlots(),this.updatePlots()}},{key:"updatePlots",value:function(){var t=[];t.push(this.bitrate.getSyncPlot()),(t=NE.removeEmptyPlots(t)).length>0&&(this.bitrate.clear(),this.plotDrawer.plot(t))}}]),t}(),iT=!1,aT=F("uHMj"),oT=((HE=function(){function t(e){J(this,t),this.withCredentials=!1,this.numSegments=0;var n=this;this.hls=new kb.a({fLoader:function(t){z(r,t);var e=X(r);function r(t){return J(this,r),e.call(this,t)}return Y(r,[{key:"load",value:function(t,e,i){var a=i.onSuccess;i.onSuccess=function(t,e,r,i){n.analyzeSegment(r,t.data),n.addSegmentInfo(r,e,t.data),a(t,e,r,i)},U(Z(r.prototype),"load",this).call(this,t,e,i)}}]),r}(kb.a.DefaultConfig.loader),xhrSetup:function(t,e){t.withCredentials=n.withCredentials}}),this.hls.on(kb.a.Events.FRAG_LOADED,(function(t,e){$("#streamButton").html("Analyze Stream"),n.plotter.addDownloadData(e.frag)})),e.events.subscribe((function(t){t instanceof Mh&&$("#betaModal").modal("hide")}))}return Y(t,[{key:"ngOnInit",value:function(){var t=document.createElement("script");t.src="./assets/mediainfo/mediainfo.js",t.type="text/javascript",t.async=!0,t.charset="utf-8",t.onload=function(){$("#streamButton").prop("disabled",!1)},document.getElementsByTagName("head")[0].appendChild(t)}},{key:"ngAfterContentInit",value:function(){var t=this;$("#betaModal").modal("show"),$("#streamList").html((function(t,e){var n,r=B(aT.streams);try{for(r.s();!(n=r.n()).done;){var i=n.value;e+='<li class="dropdown-item" data-url="'.concat(i.url,'">').concat(i.name,"</li>")}}catch(a){r.e(a)}finally{r.f()}return e})),$("#streamList").on("click","li",(function(t){$("#inputUrl").val(t.currentTarget.dataset.url)})),$("#streamButton").on("click",(function(){t.loadStream()})),$("#inputUrl").on("keyup",(function(t){t.preventDefault(),13===t.keyCode&&$("#streamButton").click()}));var e=this;$("#plotCollapse").on("shown.bs.collapse",(function(){e.plotter.updatePlots(),null!=e.updateTimer&&window.clearInterval(e.updateTimer),e.updateTimer=window.setInterval((function(){return e.plotter.updatePlots()}),1e3)}))}},{key:"resetEverything",value:function(){this.hls.stopLoad(),this.plotter.clear(),this.numSegments=0,$("#infoOutput").html(""),$("#errorsCollapseBtn").text("Detected Issues"),$("#errorOutput").html(""),$("#rawOutput").html(""),$("#downloadedSegmentsBtnText").text("Downloaded Segments"),$("#segmentOutput").html(""),null!=this.cbOnLoadedRef&&this.hls.off(kb.a.Events.LEVEL_LOADED,this.cbOnLoadedRef)}},{key:"loadStream",value:function(){var t,e=document.getElementById("inputUrl"),n=this;if(null!=e&&e instanceof HTMLInputElement&&""!=e.value){t=e.value,this.startAnalysis(t),$("#plotOutput").html(""),this.plotter=new rT($("#plotOutput").get(0));var r=MediaInfo((function(){n.mediaInfo=new r.MediaInfo("XML")}))}}},{key:"startAnalysis",value:function(t){var e=this;if(this.withCredentials=!1,this.withCredentials=!!new RegExp(/\?.*hdnts/).test(t),lE.isSafari()&&this.withCredentials)this.resetEverything();else{this.hlsDownloader=new $E(t,this.withCredentials);var n=[];this.hlsDownloader.getPlaylists().then((function(){var r=document.getElementById("bitrateModalBody");r.innerHTML="",e.hlsDownloader.levelPlaylistInfos.forEach((function(t,i){var a=document.createElement("div");a.setAttribute("class","custom-control custom-radio");var o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("class","custom-control-input"),o.setAttribute("name","custom-radio"),"string"==typeof e.hlsDownloader.levelPlaylists[i]&&(o.disabled=!0);var s="";null!=t.resolution&&(s=t.resolution.width+"x"+t.resolution.height);var u="bitrateModalBodyCheck"+i;n.push(u);var l="Bandwidth: "+t.bandwidth+" Resolution: "+s+" Codecs: "+t.codecs;o.setAttribute("id",u),a.appendChild(o);var c=document.createElement("label");c.setAttribute("class","custom-control-label"),c.setAttribute("for",u),c.innerHTML=l,a.appendChild(c),r.appendChild(a)})),$("#bitrateModal").modal();var i=e;$("#selectBitrates").on("click",(function(){i.resetEverything();var e=document.getElementById("video"),r="";n.forEach((function(t,e){$("#"+t).prop("checked")&&(r=i.hlsDownloader.levelPlaylistInfos[e].uri)})),r=new URL(r,t).href,kb.a.isSupported()&&null!=e&&e instanceof HTMLVideoElement&&(i.hls.on(Rb.Events.MANIFEST_PARSED,(function(t,e){var n=!1;e.levels.forEach((function(t,e){-1!=t.url.indexOf(r)&&(i.hls.currentLevel=e,n=!0)})),n||(i.hls.currentLevel=0)})),i.createRaw(i.hlsDownloader),i.createInfo(i.hlsDownloader),i.cbOnLoadedRef=function(){i.onLevelLoaded(i.hlsDownloader)},i.hls.on(kb.a.Events.LEVEL_LOADED,i.cbOnLoadedRef),$("#streamButton").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n            Analysing...'),i.hls.loadSource(t),i.hls.attachMedia(e))}))}))}}},{key:"onLevelLoaded",value:function(t){var e=this,n=document.getElementById("video");null!=n&&n instanceof HTMLVideoElement&&(n.play(),t.getPlaylists().then((function(){e.displayRaw(t),e.displayInfo(t),e.displayErrors(t)})))}},{key:"displayErrors",value:function(t){var e=document.getElementById("errorOutput"),n=nT.check(t),r=!1,i=0;if(null!=e&&e instanceof HTMLDivElement){e.innerHTML="";var a,o=B(t.errors);try{for(o.s();!(a=o.n()).done;){var s,u=tt(a.value,2),l=u[0],c=B(u[1]);try{for(c.s();!(s=c.n()).done;){var f=tt(s.value,2),d=f[0],h=f[1];r=!0,i+=1;var p=h.size>5?Array.from(h).slice(0,5).join(", ")+", ...":Array.from(h).join(", ");e.innerHTML+=this.makeSimpleCardHtml("<b>File (Lines):</b> ".concat(l," (").concat(p,")<br><b>Error:</b> ").concat(d,"<br>"),"bg-danger text-white")}}catch(_){c.e(_)}finally{c.f()}}}catch(_){o.e(_)}finally{o.f()}var g,v=B(n);try{for(v.s();!(g=v.n()).done;){var m=g.value;i+=1;var y="<b>Warning:</b> ".concat(m.kind,"<br><b>Message:</b> ").concat(m.msg,"<br>");m.type==ZE.ERROR&&(r=!0,e.innerHTML+=this.makeSimpleCardHtml(""+y,"bg-danger text-white")),m.type==ZE.WARNING&&(e.innerHTML+=this.makeSimpleCardHtml(""+y,"bg-warning text-white"))}}catch(_){v.e(_)}finally{v.f()}$("#errorsCollapseBtn").text("Detected Issues (".concat(i,")")),r&&$("#errorsCollapse").collapse("show")}}},{key:"addInfo",value:function(t,e,n){return null!=e?t+n:t}},{key:"createInfo",value:function(t){var e=document.getElementById("infoOutput");if(null!=e&&e instanceof HTMLDivElement){var n=this.getStreamType(t);e.innerHTML="<div>                                <b>Stream Format:</b> HLS<br>                                <b>Stream Type:</b> ".concat(n,"<br><br>                              </div>"),e.innerHTML+=this.makeCardHtml("Master Playlist","","masterInfo",!1);var r,i=B(t.levelPlaylistInfos.entries());try{for(i.s();!(r=i.n()).done;){var a=tt(r.value,2),o=a[0],s=a[1],u=s.uri.substring(s.uri.lastIndexOf("/")+1);e.innerHTML+=this.makeCardHtml("Level Playlist: "+u,"","levelPlaylist".concat(o,"Info"),!1)}}catch(l){i.e(l)}finally{i.f()}e.innerHTML+='<div style="text-align: right; font-family: monospace" id="timestampInfo"></div>'}}},{key:"displayInfo",value:function(t){var e=document.getElementById("infoOutput");if(null!=e&&e instanceof HTMLDivElement){var n="";n=this.addInfo(n,t.masterPlaylist.version,"<b>Version</b>: ".concat(t.masterPlaylist.version,"<br>")),n=this.addInfo(n,t.masterPlaylist.independentSegments,"<b>Independent segments</b>: ".concat(t.masterPlaylist.independentSegments,"<br>")),n=this.addInfo(n,t.masterPlaylist.start,"<b>Start</b>: ".concat(t.masterPlaylist.start,"<br>")),this.updateCardHtml("masterInfo",n);var r,i=B(t.levelPlaylistInfos.entries());try{for(i.s();!(r=i.n()).done;){var a=tt(r.value,2),o=a[0],s=a[1];n="";var u=t.levelPlaylists[o];if("string"==typeof u)n=u;else{if(s.uri.substring(s.uri.lastIndexOf("/")+1),n=this.addInfo(n,u.version,"<b>Version:</b> ".concat(u.version,"<br>")),n=this.addInfo(n,u.independentSegments,"<b>Independent segments:</b> ".concat(u.independentSegments,"<br>")),n=this.addInfo(n,u.start,"<b>Start:</b> ".concat(u.start,"<br>")),n=this.addInfo(n,u.targetDuration,"<b>Target duration:</b> ".concat(u.targetDuration,"<br>")),n=this.addInfo(n,u.mediaSequenceBase,"<b>Media sequence:</b> ".concat(u.mediaSequenceBase,"<br>")),n=this.addInfo(n,u.discontinuitySequenceBase,"<b>Discontinuity sequence:</b> ".concat(u.discontinuitySequenceBase,"<br>")),n=this.addInfo(n,u.playlistType,"<b>Type:</b> ".concat(u.playlistType,"<br>")),n=this.addInfo(n,s.bandwidth,"<b>Bandwidth:</b> ".concat(s.bandwidth,"<br>")),n=this.addInfo(n,s.averageBandwidth,"<b>Average bandwidth:</b> ".concat(s.averageBandwidth,"<br>")),n=this.addInfo(n,s.codecs,"<b>Codecs:</b> ".concat(s.codecs,"<br>")),void 0!==s.codecs){var l=new eT(s.codecs);l.hasAudio()&&l.hasVideo()?n+="Muxed audio and video<br/>":l.hasVideo()?n+="Video only<br/>":l.hasAudio()?n+="Audio only<br/>":n+="No audio nor video<br/>";var c,f=B(l.toStringArray());try{for(f.s();!(c=f.n()).done;)n+=c.value+"</b><br>"}catch(d){f.e(d)}finally{f.f()}}null!=s.resolution&&(n+="<b>Resolution:</b> ".concat(s.resolution.width,"x").concat(s.resolution.height,"<br>")),n=this.addInfo(n,s.frameRate,"<b>Frame rate:</b> ".concat(s.frameRate,"<br>")),n+="<b>Audio renditions:</b> ".concat(s.audio.map((function(t){return"(".concat(t.toString(),")")})).join(","),"<br>"),n+="<b>Video renditions:</b> ".concat(s.video.map((function(t){return"(".concat(t.toString(),")")})).join(","),"<br>"),n+="<b>Subtitles renditions:</b> ".concat(s.subtitles.map((function(t){return"(".concat(t.toString(),")")})).join(","),"<br>"),n+="<b>Closed captions renditions:</b> ".concat(s.closedCaptions.map((function(t){return"(".concat(t.toString(),")")})).join(","),"<br>")}this.updateCardHtml("levelPlaylist".concat(o,"Info"),n)}}catch(d){i.e(d)}finally{i.f()}this.addTimestamp("timestampInfo")}}},{key:"createRaw",value:function(t){var e=this;$("#rawOutput").html((function(t,n){n+=e.makeCardHtml("Master Playlist","","masterRaw",!0);var r,i=B(e.hlsDownloader.levelPlaylistInfos.entries());try{for(i.s();!(r=i.n()).done;){var a=tt(r.value,2),o=a[0],s=a[1],u=s.uri.substring(s.uri.lastIndexOf("/")+1);n+=e.makeCardHtml("Level Playlist: "+u,"","levelPlaylist".concat(o,"Raw"),!0)}}catch(l){i.e(l)}finally{i.f()}return n+'<div style="text-align: right; font-family: monospace" id="timestampRaw"></div>'}))}},{key:"displayRaw",value:function(t){var e=this,n=new Set;t.errors.getFileErrors(t.masterUrl).forEach((function(t){t.forEach((function(t){return n.add(t)}))}));var r='<table style="font-family: monospace;">'+t.masterPlaylist.source.replace(/^\s*[\r\n]/gm,"").replace("\n\n","\n").split("\n").map((function(t,e){return'<tr><span style="'.concat(n.has(e)?"color:#ce1a1a":"",'"><td style="color:LightGray; border-right: solid 1.5px; padding-right: 5px">').concat(e,'</td><td style="padding-left: 5px"> ').concat(t,"<td></span>")})).join("")+"</table>";this.updateCardHtml("masterRaw",r);var i,a=B(t.levelPlaylistInfos.entries());try{var o=function(){var n=tt(i.value,2),r=n[0],a=n[1],o=new Set;t.errors.getFileErrors(a.uri).forEach((function(t){t.forEach((function(t){return o.add(t)}))}));var s=t.levelPlaylists[r],u='<table style="font-family: monospace;">'+(s.source?s.source.replace(/^\s*[\r\n]/gm,""):s).replace("\n\n","\n").split("\n").map((function(t,e){return'<tr><span style="'.concat(o.has(e)?"color:#ce1a1a":"",'"><td style="color:LightGray; border-right: solid 1.5px; padding-right: 5px">').concat(e,'</td><td style="padding-left: 5px"> ').concat(t,"<td></span>")})).join("")+"</table>";e.updateCardHtml("levelPlaylist".concat(r,"Raw"),u)};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}this.addTimestamp("timestampRaw")}},{key:"analyzeSegment",value:function(t,e){}},{key:"addSegmentInfo",value:function(e,n,r){var i=this,a=document.getElementById("segmentOutput");if(null!=a&&a instanceof HTMLDivElement&&!e.frag.encrypted){var o=e.url,s=o.substring(o.lastIndexOf("/")+1),u="";u+="<b>Continuity Counter:</b> ".concat(e.frag.cc,"<br>"),u+="<b>Duration:</b> ".concat(e.frag.duration,"<br>"),u+="<b>Sequence Number:</b> ".concat(e.frag.sn,"<br>"),u+="<b>Type:</b> ".concat(e.frag.type,"<br>"),u+="<b>Bitrate:</b> ".concat(Math.round(8*n.loaded/e.frag.duration/1e3)," kbps<br>");var l=new File([r],s);!function(e,n,r){if(!iT){iT=!0;var o=n.size,l=0,c=0,f=null;e.open_buffer_init(o,l);var d=function(n){var r;if(null!==n.target.error){var d="An error happened reading your file!";return console.error(d,n.target.error),h(),void alert(d)}var p=new Uint8Array(n.target.result);c=e.open_buffer_continue(p,r=p.length);var g,v=e.open_buffer_continue_goto_get_lower(),m=e.open_buffer_continue_goto_get_upper();if(-1===(g=-1==v&&-1==m?-1:v<0?v+4294967296+4294967296*m:v+4294967296*m)?l+=r:(l=g,e.open_buffer_init(o,g)),p=null,l>=o||8&c){e.open_buffer_finalize();var y=e.inform();return e.close(),function(e){var n=XE.parse(e),r=t.extractAudioAndVideoTracks(n);if(u+="<br>",r.frameRate&&(u+="<b>Frame Rate:</b> ".concat(r.frameRate,"<br>")),r.video.length>0){u+="<b>Video Tracks:</b><br>";var o=1;r.video.forEach((function(t){u+='<div style="padding-left: 10px">',u+="Track ".concat(o,"<br>"),u+='<div style="padding-left: 10px">Format: '.concat(t.Format,"<br>\n                     Format Profile: ").concat(t.Format_Profile,"<br> Format Level: ").concat(t.Format_Level,"<br>\n                     Standard: ").concat(t.Standard,"<br>Aspect Ratio: ").concat(t.DisplayAspectRatio,"</div>"),u+="</div><br>",o+=1}))}if(r.audio.length>0){u+="<b>Audio Tracks:</b><br>";var l=1;r.audio.forEach((function(t){u+='<div style="padding-left: 10px">',u+="Track ".concat(l,"<br>"),u+='<div style="padding-left: 10px">Format: '.concat(t.Format,"<br>Compression_Mode: ").concat(t.Compression_Mode,"</div>"),u+="</div><br>",l+=1}))}a.innerHTML+=i.makeCardHtml(s,u,"seg"+i.numSegments.toString(),!1),i.numSegments+=1,$("#downloadedSegmentsBtnText").text("Downloaded Segments (".concat(i.numSegments,")"))}(y),void h()}f(r)};(f=function(t){if(iT){var r=new FileReader,i=n.slice(l,t+l);r.onload=d,r.readAsArrayBuffer(i)}else e.close(),h()})(5242880)}function h(){iT=!1}}(this.mediaInfo,l)}}},{key:"addTimestamp",value:function(t){$("#"+t).html("timestamp: "+new Date(Date.now()).toISOString())}},{key:"makeCardHtml",value:function(t,e,n,r){return'<div class="card bg-light">\n      <div class="card-header" id="'.concat(n,'Heading">\n        <h2 class="mb-0">\n          <button class="btn btn-link collapsed text-dark" type="button" data-toggle="collapse" data-target="#').concat(n,'Collapse" aria-expanded="false" aria-controls="').concat(n,'Collapse">\n            <h6>').concat(t,'</h6>\n          </button>\n        </h2>\n      </div>\n\n      <div id="').concat(n,'Collapse" class="collapse" aria-labelledby="').concat(n,'Heading">\n        <div class="card-body" ').concat(r?'style="display: block; height: 500px; overflow-x: scroll; overflow-y: scroll; white-space: nowrap;"':"",">\n          ").concat(e,"\n        </div>\n      </div>\n    </div>")}},{key:"updateCardHtml",value:function(t,e){document.getElementById(t+"Collapse").firstElementChild.innerHTML=e}},{key:"makeSimpleCardHtml",value:function(t,e){return'<div class="card">\n      <div class="card-body '.concat(e,'">\n        ').concat(t,"\n      </div>\n    </div>")}},{key:"getStreamType",value:function(t){if(null!=t.masterPlaylist.playlistType)return t.masterPlaylist.playlistType;var e="LIVE";return t.levelPlaylists.forEach((function(t){t.endlist&&(e="VOD")})),e}}],[{key:"extractAudioAndVideoTracks",value:function(t){for(var e=t.MediaInfo.media.track,n=[],r=[],i=void 0,a=0;a<e.length;a++)"AVC"==e[a].Format?n.push(e[a]):"AAC"==e[a].Format?r.push(e[a]):"MPEG-TS"==e[a].Format&&(i=e[a].FrameRate);return{video:n,audio:r,frameRate:i}}}]),t}()).\u0275fac=function(t){return new(t||HE)(ls(Zg))},HE.\u0275cmp=cn({type:HE,selectors:[["app-stream-validator"]],decls:366,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-10"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"ml-auto","row"],["role","group",1,"btn-group"],["onclick","$('#infoModal').modal()",1,"btn","btn-primary"],["onclick","$('#betaModal').modal()",1,"btn","btn-danger"],["id","infoModal","tabindex","-1","role","dialog","aria-labelledby","infoModalLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","100px","height","80%"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","infoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["id","infoModalBody",1,"modal-body"],[2,"color","#ce1a1a"],[2,"color","#dbd336"],["size","3"],[1,"table","table-striped"],[1,"thead-dark"],["scope","col"],["href","mailto:dl-playersakamai@akamai.com"],["id","bitrateModal","tabindex","-1","role","dialog","aria-labelledby","bitrateModalLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","100px"],[1,"modal-dialog","modal-lg"],["id","exampleModalLabel",1,"modal-title"],["id","bitrateModalBody",1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","id","selectBitrates","data-dismiss","modal",1,"btn","btn-primary"],[1,"row","p-2"],[1,"col-12","col-lg-6"],[1,"row"],[1,"col"],[1,"col-12"],[1,"input-group"],[1,"input-group-prepend"],["id","streamButton","type","submit","disabled","true",1,"btn","btn-primary"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle","dropdown-toggle-split"],["id","streamList",1,"dropdown-menu"],["id","inputUrl","type","text","placeholder","Input master manifest URI or select stream from the list","aria-label","Input master manifest URI","aria-describedby","addon-wrapping",1,"form-control"],[1,"col-12","mt-2","mb-0"],[3,"hasAmdStyleTokenAuth"],[1,"pt-2","col-12"],["id","video","width","100%","muted","muted",2,"background","black"],[1,"card"],["id","errorsHeading",1,"card-header","bg-secondary"],[1,"mb-0"],["id","errorsCollapseBtn","type","button","data-toggle","collapse","data-target","#errorsCollapse","aria-expanded","false","aria-controls","errorsCollapse",1,"btn","btn-link","collapsed","text-white"],["id","errorsCollapse","aria-labelledby","errorsHeading",1,"collapse"],["id","errorOutput",1,"card-body"],["id","generalInfoHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#generalInfoCollapse","aria-expanded","false","aria-controls","generalInfoCollapse",1,"btn","btn-link","collapsed","text-white"],["id","generalInfoCollapse","aria-labelledby","generalInfoHeading",1,"collapse"],["id","infoOutput",1,"card-body"],["id","infoList",1,"list-group"],["id","plotHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#plotCollapse","aria-expanded","false","aria-controls","plotCollapse",1,"btn","btn-link","collapsed","text-white"],["id","plotCollapse","aria-labelledby","plotHeading",1,"collapse"],["id","plotOutput",1,"card-body"],["id","rawHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#rawCollapse","aria-expanded","false","aria-controls","rawCollapse",1,"btn","btn-link","collapsed","text-white"],["id","rawCollapse","aria-labelledby","rawHeading",1,"collapse"],["id","rawOutput",1,"card-body"],["id","segmentHeading",1,"card-header","bg-secondary"],["id","downloadedSegmentsBtnText","type","button","data-toggle","collapse","data-target","#segmentCollapse","aria-expanded","false","aria-controls","segmentCollapse",1,"btn","btn-link","collapsed","text-white"],["id","segmentCollapse","aria-labelledby","segmentHeading",1,"collapse"],["id","segmentOutput",1,"card-body",2,"display","block","height","600px","overflow-x","scroll","overflow-y","scroll","white-space","nowrap"],["id","betaModal","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog","aria-labelledby","betaModalLabel","aria-hidden","false",1,"modal","fade",2,"margin-top","100px"],["id","betaModalLabel",1,"modal-title"],["id","betaModalBody",1,"modal-body"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"nav",2),hs(3,"h1"),Ks(4,"Stream Validator"),ps(),hs(5,"div",3),hs(6,"div",4),hs(7,"button",5),Ks(8,"INFO"),ps(),hs(9,"button",6),Ks(10,"BETA"),ps(),ps(),ps(),ps(),hs(11,"div",7),hs(12,"div",8),hs(13,"div",9),hs(14,"div",10),hs(15,"h6",11),Ks(16,"Info"),ps(),hs(17,"button",12),hs(18,"span",13),Ks(19,"\xd7"),ps(),ps(),ps(),hs(20,"div",14),hs(21,"b"),Ks(22,"The Stream Validator"),ps(),Ks(23," can be used to check an HLS stream for errors. "),hs(24,"ul"),hs(25,"li"),Ks(26," Input the stream you want to analyse with "),hs(27,"b"),Ks(28,"The Stream Validator"),ps(),Ks(29,' in the text input. Information about the stream is output in the "General Information" section. '),ps(),hs(30,"li"),Ks(31," The "),hs(32,"span",15),Ks(33,"errors"),ps(),Ks(34," and "),hs(35,"span",16),Ks(36,"warnings"),ps(),Ks(37," that "),hs(38,"b"),Ks(39,"The Stream Validator"),ps(),Ks(40,' finds are reported in the "Detected Issues" section. '),ps(),hs(41,"li"),Ks(42,' The playlists are shown in the "Raw Playlist" section, and lines with errors are highlighted. '),ps(),hs(43,"li"),Ks(44,' Segments are analysed as they are downloaded, and information about them are shown in the "Segment Statistics" and "Downloaded Segments" sections. '),ps(),ps(),Ks(45," Below is a list of all the requirements "),hs(46,"b"),Ks(47,"The Stream Validator"),ps(),Ks(48," will check for you, as well as some recommendations we will make. "),gs(49,"br"),gs(50,"br"),hs(51,"font",17),hs(52,"table",18),hs(53,"thead",19),hs(54,"tr"),hs(55,"th",20),Ks(56,"Hard Requirements"),ps(),hs(57,"th",20),Ks(58,"Checked in File"),ps(),ps(),ps(),hs(59,"tbody"),hs(60,"tr"),hs(61,"td"),Ks(62," EXT-X-MEDIA tags in the same Group have different NAME attributes "),ps(),hs(63,"td"),Ks(64," Master Playlist "),ps(),ps(),hs(65,"tr"),hs(66,"td"),Ks(67," Groups do not have more than one member with a DEFAULT attribute of YES "),ps(),hs(68,"td"),Ks(69," Master Playlist "),ps(),ps(),hs(70,"tr"),hs(71,"td"),Ks(72," GROUP TYPE matches EXT-X-MEDIA TYPE "),ps(),hs(73,"td"),Ks(74," Master Playlist "),ps(),ps(),hs(75,"tr"),hs(76,"td"),Ks(77," EXT-X-STREAM-INF is followed by a URI line "),ps(),hs(78,"td"),Ks(79," Master Playlist "),ps(),ps(),hs(80,"tr"),hs(81,"td"),Ks(82," Only one EXT-X-SESSION-DATA tag with the same DATA-ID and LANGUAGE "),ps(),hs(83,"td"),Ks(84," Master Playlist "),ps(),ps(),hs(85,"tr"),hs(86,"td"),Ks(87," METHOD attribute of EXT-X-SESSION-KEY is not NONE "),ps(),hs(88,"td"),Ks(89," Master Playlist "),ps(),ps(),hs(90,"tr"),hs(91,"td"),Ks(92," Master Playlist does not contain multiple EXT-X-SESSION-KEY tags with the same METHOD, URI, IV, KEYFORMAT, KEYFORMATVERSIONS "),ps(),hs(93,"td"),Ks(94," Master Playlist "),ps(),ps(),hs(95,"tr"),hs(96,"td"),Ks(97," Only one EXT-X-INDEPENDENT-SEGMENTS in a playlist "),ps(),hs(98,"td"),Ks(99," Master Playlist "),ps(),ps(),hs(100,"tr"),hs(101,"td"),Ks(102," Resolution is greater than zero "),ps(),hs(103,"td"),Ks(104," Master Playlist "),ps(),ps(),hs(105,"tr"),hs(106,"td"),Ks(107," Only one EXT-X-START in a playlist "),ps(),hs(108,"td"),Ks(109," Master Playlist "),ps(),ps(),hs(110,"tr"),hs(111,"td"),Ks(112," Consitent CLOSED-CAPTIONS attributes "),ps(),hs(113,"td"),Ks(114," Master Playlist "),ps(),ps(),hs(115,"tr"),hs(116,"td"),Ks(117," EXT-X-MEDIA-SEQUENCE is an integer "),ps(),hs(118,"td"),Ks(119," Media Playlist "),ps(),ps(),hs(120,"tr"),hs(121,"td"),Ks(122," EXTINF duration, when rounded, is less than or equal to the target duration "),ps(),hs(123,"td"),Ks(124," Media Playlist "),ps(),ps(),hs(125,"tr"),hs(126,"td"),Ks(127," Only one EXT-X-VERSION in a playlist "),ps(),hs(128,"td"),Ks(129," Media Playlist "),ps(),ps(),hs(130,"tr"),hs(131,"td"),Ks(132," EXT-X-MEDIA-SEQUENCE appears before the first segment in the playlist "),ps(),hs(133,"td"),Ks(134," Media Playlist "),ps(),ps(),hs(135,"tr"),hs(136,"td"),Ks(137," EXT-X-DISCONTINUITY-SEQUENCE appears before the first media segment in the playlist "),ps(),hs(138,"td"),Ks(139," Media Playlist "),ps(),ps(),hs(140,"tr"),hs(141,"td"),Ks(142," EXT-X-DISCONTINUITY-SEQUENCE appears before EXT-X-DISCONTINUITY "),ps(),hs(143,"td"),Ks(144," Media Playlist "),ps(),ps(),hs(145,"tr"),hs(146,"td"),Ks(147," Only one EXT-X-INDEPENDENT-SEGMENTS in a playlist "),ps(),hs(148,"td"),Ks(149," Media Playlist "),ps(),ps(),hs(150,"tr"),hs(151,"td"),Ks(152," Only one EXT-X-START in a Playlist "),ps(),hs(153,"td"),Ks(154," Media Playlist "),ps(),ps(),hs(155,"tr"),hs(156,"td"),Ks(157," TIME-OFFSET is present in EXT-X-START "),ps(),hs(158,"td"),Ks(159," Media Playlist "),ps(),ps(),hs(160,"tr"),hs(161,"td"),Ks(162," URI line is not preceded by any segment tags "),ps(),hs(163,"td"),Ks(164," Media Playlist "),ps(),ps(),hs(165,"tr"),hs(166,"td"),Ks(167," EXT-X-TARGETDURATION is present "),ps(),hs(168,"td"),Ks(169," Media Playlist "),ps(),ps(),hs(170,"tr"),hs(171,"td"),Ks(172," Correct usage of EXT-X-BYTERANGE "),ps(),hs(173,"td"),Ks(174," Media Playlist "),ps(),ps(),hs(175,"tr"),hs(176,"td"),Ks(177," EXT-X-DATERANGE with END-ON-NEXT=YES has no DURATION or END-DATE "),ps(),hs(178,"td"),Ks(179," Media Playlist "),ps(),ps(),hs(180,"tr"),hs(181,"td"),Ks(182," END-DATE is equal to START-DATE plus DURATION "),ps(),hs(183,"td"),Ks(184," Media Playlist "),ps(),ps(),hs(185,"tr"),hs(186,"td"),Ks(187," DATERANGE with the same CLASS does not overlap "),ps(),hs(188,"td"),Ks(189," Media Playlist "),ps(),ps(),hs(190,"tr"),hs(191,"td"),Ks(192," Playlist with EXT-X-DATERANGE contains EXT-X-PROGRAM-DATE-TIME "),ps(),hs(193,"td"),Ks(194," Media Playlist "),ps(),ps(),hs(195,"tr"),hs(196,"td"),Ks(197," Only one media playlist tag of each type in any media playlist "),ps(),hs(198,"td"),Ks(199," Media Playlist "),ps(),ps(),hs(200,"tr"),hs(201,"td"),Ks(202," TIME-OFFSET appears in EXT-X-START "),ps(),hs(203,"td"),Ks(204," Both "),ps(),ps(),hs(205,"tr"),hs(206,"td"),Ks(207," EXTM3U is the first line "),ps(),hs(208,"td"),Ks(209," Both "),ps(),ps(),hs(210,"tr"),hs(211,"td"),Ks(212," Check correct EXT-X-VERSION "),ps(),hs(213,"td"),Ks(214," Both "),ps(),ps(),hs(215,"tr"),hs(216,"td"),Ks(217," File does not contain both media and master playlist tags "),ps(),hs(218,"td"),Ks(219," Both "),ps(),ps(),ps(),ps(),hs(220,"table",18),hs(221,"thead",19),hs(222,"tr"),hs(223,"th",20),Ks(224,"Recommendations"),ps(),hs(225,"th",20),Ks(226,"Checked in File"),ps(),ps(),ps(),hs(227,"tbody"),hs(228,"tr"),hs(229,"td"),Ks(230," EXT-X-STREAM-INF has a CODECS attribute "),ps(),hs(231,"td"),Ks(232," Master Playlist "),ps(),ps(),hs(233,"tr"),hs(234,"td"),Ks(235," RESOLUTION is present for video renditions "),ps(),hs(236,"td"),Ks(237," Master Playlist "),ps(),ps(),hs(238,"tr"),hs(239,"td"),Ks(240," Aspect rations is identical for all video variants "),ps(),hs(241,"td"),Ks(242," Master Playlist "),ps(),ps(),hs(243,"tr"),hs(244,"td"),Ks(245," The stream has multiple different bitrates "),ps(),hs(246,"td"),Ks(247," Master Playlist "),ps(),ps(),hs(248,"tr"),hs(249,"td"),Ks(250," The default bitrate should be approximately 2000 kb/s "),ps(),hs(251,"td"),Ks(252," Master Playlist "),ps(),ps(),hs(253,"tr"),hs(254,"td"),Ks(255," All EXT-X-TARGETDURATION are identical in a playlist "),ps(),hs(256,"td"),Ks(257," Media Playlist "),ps(),ps(),hs(258,"tr"),hs(259,"td"),Ks(260," All manifests have the same EXT-X-VERSION "),ps(),hs(261,"td"),Ks(262," Both "),ps(),ps(),ps(),ps(),ps(),Ks(263," If you have questions or suggestions to the "),hs(264,"b"),Ks(265,"Stream Validator"),ps(),Ks(266," team, please send an email to "),hs(267,"a",21),Ks(268,"dl-playersakamai@akamai.com"),ps(),ps(),ps(),ps(),ps(),hs(269,"div",22),hs(270,"div",23),hs(271,"div",9),hs(272,"div",10),hs(273,"h6",24),Ks(274,"Select bitrate to analyze"),ps(),hs(275,"button",12),hs(276,"span",13),Ks(277,"\xd7"),ps(),ps(),ps(),gs(278,"div",25),hs(279,"div",26),hs(280,"button",27),Ks(281,"Close"),ps(),hs(282,"button",28),Ks(283,"Select Bitrates"),ps(),ps(),ps(),ps(),ps(),hs(284,"div",29),hs(285,"div",30),hs(286,"div",31),hs(287,"div",32),hs(288,"div",31),hs(289,"div",33),hs(290,"div",34),hs(291,"div",35),hs(292,"button",36),Ks(293,"Analyze Stream"),ps(),gs(294,"button",37),gs(295,"div",38),ps(),gs(296,"input",39),ps(),ps(),hs(297,"div",40),gs(298,"safari-token-auth-alert",41),ps(),ps(),hs(299,"div",31),hs(300,"div",42),gs(301,"video",43),ps(),ps(),ps(),ps(),hs(302,"div",31),hs(303,"div",32),hs(304,"div",44),hs(305,"div",45),hs(306,"h2",46),hs(307,"button",47),Ks(308," Detected Errors "),ps(),ps(),ps(),hs(309,"div",48),gs(310,"div",49),ps(),ps(),ps(),ps(),ps(),hs(311,"div",30),hs(312,"div",31),hs(313,"div",32),hs(314,"div",44),hs(315,"div",50),hs(316,"h2",46),hs(317,"button",51),Ks(318," General Information "),ps(),ps(),ps(),hs(319,"div",52),hs(320,"div",53),gs(321,"ul",54),ps(),ps(),ps(),ps(),ps(),hs(322,"div",31),hs(323,"div",32),hs(324,"div",44),hs(325,"div",55),hs(326,"h2",46),hs(327,"button",56),Ks(328," Segment Statistics "),ps(),ps(),ps(),hs(329,"div",57),gs(330,"div",58),ps(),ps(),ps(),ps(),hs(331,"div",31),hs(332,"div",32),hs(333,"div",44),hs(334,"div",59),hs(335,"h2",46),hs(336,"button",60),Ks(337," Raw Playlists "),ps(),ps(),ps(),hs(338,"div",61),gs(339,"div",62),ps(),ps(),ps(),ps(),hs(340,"div",31),hs(341,"div",32),hs(342,"div",44),hs(343,"div",63),hs(344,"h2",46),hs(345,"button",64),Ks(346," Downloaded Segments "),ps(),ps(),ps(),hs(347,"div",65),gs(348,"div",66),ps(),ps(),ps(),ps(),ps(),ps(),hs(349,"div",67),hs(350,"div",23),hs(351,"div",9),hs(352,"div",10),hs(353,"h4",68),hs(354,"b"),Ks(355,"This page is in Beta!"),ps(),ps(),ps(),hs(356,"div",69),hs(357,"b"),Ks(358,"The Stream Validator"),ps(),Ks(359," is currently in development, and is not a finished product. There will be bugs and inaccurate results. "),gs(360,"br"),gs(361,"br"),Ks(362,' THIS SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL AKAMAI TECHNOLOGIES BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. '),ps(),hs(363,"div",26),hs(364,"button",28),Ks(365,"I understand!"),ps(),ps(),ps(),ps(),ps(),ps(),ps()),2&t&&(sa(298),fs("hasAmdStyleTokenAuth",e.withCredentials))},directives:[N_,hE],styles:[""]}),HE),sT=((GE=function t(){J(this,t)}).\u0275fac=function(t){return new(t||GE)},GE.\u0275cmp=cn({type:GE,selectors:[["app-welcome-page"]],decls:22,vars:2,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-7","col-lg-5","linkbox","m-4","p-3","border-1","rounded"],[1,"row","m-0",3,"routerLink"],[1,"col"],["src","./assets/img/players.png",1,"img-fluid",2,"position","relative","top","30%","width","80%"],[1,"col-12","col-md-7","col-lg-5","linkbox","m-4","p-3","border-1","rounded",3,"routerLink"],[1,"row","m-0"],["src","./assets/img/stream_validator.png",1,"img-fluid",2,"width","50%"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),hs(2,"div",2),hs(3,"div",3),hs(4,"div",4),gs(5,"img",5),ps(),hs(6,"div",4),hs(7,"h2"),hs(8,"b"),Ks(9,"Players"),ps(),ps(),Ks(10," Check the integration of a reference player with an HLS/DASH stream. "),ps(),ps(),ps(),ps(),ps(),hs(11,"div",0),hs(12,"div",1),hs(13,"div",6),hs(14,"div",7),hs(15,"div",4),hs(16,"h2"),hs(17,"b"),Ks(18,"Stream Validator"),ps(),ps(),Ks(19," Validate your HLS stream with respect to the standard. "),ps(),hs(20,"div",4),gs(21,"img",8),ps(),ps(),ps(),ps(),ps()),2&t&&(sa(3),fs("routerLink","players"),sa(10),fs("routerLink","stream-validator"))},directives:[Jg],styles:[""]}),GE),uT=((VE=function(){function t(e){J(this,t),this.http=e}return Y(t,[{key:"getReleaseNotes",value:function(){return this.http.get("assets/RELEASENOTES.md",{responseType:"text"})}}]),t}()).\u0275fac=function(t){return new(t||VE)(He(Rd))},VE.\u0275prov=ae({token:VE,factory:VE.\u0275fac}),VE),lT=F("DlQD"),cT=((zE=function(){function t(e){J(this,t),this.releaseNotesReader=e}return Y(t,[{key:"ngOnInit",value:function(){var t=this;this.releaseNotesReader.getReleaseNotes().subscribe((function(e){t.convertedReleaseNotes=lT.parse(e)}),(function(e){t.convertedReleaseNotes="An error has occurred: "+JSON.stringify(e)}))}}]),t}()).\u0275fac=function(t){return new(t||zE)(ls(uT))},zE.\u0275cmp=cn({type:zE,selectors:[["app-release-notes"]],features:[fu([uT])],decls:3,vars:1,consts:[[1,"container"],[1,"col-10"],[3,"innerHTML"]],template:function(t,e){1&t&&(hs(0,"div",0),hs(1,"div",1),gs(2,"div",2),ps(),ps()),2&t&&(sa(2),fs("innerHTML",e.convertedReleaseNotes,Bi))},styles:[""]}),zE),fT=((YE=function t(){J(this,t)}).\u0275mod=pn({type:YE,bootstrap:[Sb]}),YE.\u0275inj=oe({factory:function(t){return new(t||YE)},imports:[[Jf,gb,yv.forRoot([])]]}),YE);window.Dygraph=kE.default,F("kyqF");var dT,hT=((dT=function t(){J(this,t)}).\u0275mod=pn({type:dT,bootstrap:[xb]}),dT.\u0275inj=oe({factory:function(t){return new(t||dT)},providers:[],imports:[[Jf,zd,py,Zy,gb,fT,yv.forRoot([{path:"",component:sT},{path:"stream-validator",component:oT},{path:"players",component:qE},{path:"players/hlsjs",component:qE,data:{player:"hlsjs"}},{path:"players/dashjs",component:qE,data:{player:"dashjs"}},{path:"release-notes",component:cT}])]]}),dT);(function(){if(pi)throw new Error("Cannot enable prod mode after platform setup.");hi=!1})(),$f().bootstrapModule(hT).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]])}();