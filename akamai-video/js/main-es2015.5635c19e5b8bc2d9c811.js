(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"4abu":function(t,e,n){"use strict";const r="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e){const r=Object.keys(e),i=r.length;for(let a=0;a<i;a++)t[r[a]]="strict"===n?[e[r[a]]]:e[r[a]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var r={};if(!t)return e;for(let i=0;i<n.length;i++)r[n[i]]=void 0!==t[n[i]]?t[n[i]]:e[n[i]];return r},e.isName=function(t){return!(null==i.exec(t))},e.getAllMatches=function(t,e){const n=[];let r=e.exec(t);for(;r;){const i=[],a=r.length;for(let t=0;t<a;t++)i.push(r[t]);n.push(i),r=e.exec(t)}return n},e.nameRegexp=r},Cnnb:function(t,e,n){"use strict";n.r(e);var r=function(t,e,n,r,i,a){var s,u,l,c=r("pixelsPerLabel"),d=[];if(a)for(s=0;s<a.length;s++)d.push({v:a[s]});else{if(r("logscale")){l=Math.floor(n/c);var f=P(t,o,1),h=P(e,o,-1);-1==f&&(f=0),-1==h&&(h=o.length-1);var p=null;if(h-f>=l/4){for(var g=h;g>=f;g--){var m=o[g],y=Math.log(m/t)/Math.log(e/t)*n,v={v:m};null===p||Math.abs(y-p.pixel_coord)>=c?p={tickValue:m,pixel_coord:y}:v.label="",d.push(v)}d.reverse()}}if(0===d.length){var _,b;r("labelsKMG2")?(_=[1,2,4,8,16,32,64,128,256],b=16):(_=[1,2,5,10,20,50,100],b=10);var E,T,S,w=Math.ceil(n/c),A=Math.abs(e-t)/w,x=Math.floor(Math.log(A)/Math.log(b)),C=Math.pow(b,x);for(u=0;u<_.length&&(E=C*_[u],T=Math.floor(t/E)*E,S=Math.ceil(e/E)*E,!(n/(l=Math.abs(S-T)/E)>c));u++);for(T>S&&(E*=-1),s=0;s<=l;s++)d.push({v:T+s*E})}}var D=r("axisLabelFormatter");for(s=0;s<d.length;s++)void 0===d[s].label&&(d[s].label=D.call(i,d[s].v,0,r,i));return d},i=function(t,e,n,r,i,a){var s=u(t,e,n,r);return s>=0?c(t,e,s,r,i):[]},a={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29},s=[];s[a.MILLISECONDLY]={datefield:6,step:1,spacing:1},s[a.TWO_MILLISECONDLY]={datefield:6,step:2,spacing:2},s[a.FIVE_MILLISECONDLY]={datefield:6,step:5,spacing:5},s[a.TEN_MILLISECONDLY]={datefield:6,step:10,spacing:10},s[a.FIFTY_MILLISECONDLY]={datefield:6,step:50,spacing:50},s[a.HUNDRED_MILLISECONDLY]={datefield:6,step:100,spacing:100},s[a.FIVE_HUNDRED_MILLISECONDLY]={datefield:6,step:500,spacing:500},s[a.SECONDLY]={datefield:5,step:1,spacing:1e3},s[a.TWO_SECONDLY]={datefield:5,step:2,spacing:2e3},s[a.FIVE_SECONDLY]={datefield:5,step:5,spacing:5e3},s[a.TEN_SECONDLY]={datefield:5,step:10,spacing:1e4},s[a.THIRTY_SECONDLY]={datefield:5,step:30,spacing:3e4},s[a.MINUTELY]={datefield:4,step:1,spacing:6e4},s[a.TWO_MINUTELY]={datefield:4,step:2,spacing:12e4},s[a.FIVE_MINUTELY]={datefield:4,step:5,spacing:3e5},s[a.TEN_MINUTELY]={datefield:4,step:10,spacing:6e5},s[a.THIRTY_MINUTELY]={datefield:4,step:30,spacing:18e5},s[a.HOURLY]={datefield:3,step:1,spacing:36e5},s[a.TWO_HOURLY]={datefield:3,step:2,spacing:72e5},s[a.SIX_HOURLY]={datefield:3,step:6,spacing:216e5},s[a.DAILY]={datefield:2,step:1,spacing:864e5},s[a.TWO_DAILY]={datefield:2,step:2,spacing:1728e5},s[a.WEEKLY]={datefield:2,step:7,spacing:6048e5},s[a.MONTHLY]={datefield:1,step:1,spacing:2629817280},s[a.QUARTERLY]={datefield:1,step:3,spacing:7889451840.000001},s[a.BIANNUAL]={datefield:1,step:6,spacing:432e5*365.2524},s[a.ANNUAL]={datefield:0,step:1,spacing:864e5*365.2524},s[a.DECADAL]={datefield:0,step:10,spacing:315578073600},s[a.CENTENNIAL]={datefield:0,step:100,spacing:3155780736e3};var o=function(){for(var t=[],e=-39;e<=39;e++)for(var n=Math.pow(10,e),r=1;r<=9;r++)t.push(n*r);return t}(),u=function(t,e,n,r){for(var i=r("pixelsPerLabel"),s=0;s<a.NUM_GRANULARITIES;s++)if(n/l(t,e,s)>=i)return s;return-1},l=function(t,e,n){return Math.round(1*(e-t)/s[n].spacing)},c=function(t,e,n,r,i){var o=r("axisLabelFormatter"),u=r("labelsUTC")?D:C,l=s[n].datefield,c=s[n].step,d=s[n].spacing,f=new Date(t),h=[];h[0]=u.getFullYear(f),h[1]=u.getMonth(f),h[2]=u.getDate(f),h[3]=u.getHours(f),h[4]=u.getMinutes(f),h[5]=u.getSeconds(f),h[6]=u.getMilliseconds(f);var p=h[l]%c;n==a.WEEKLY&&(p=u.getDay(f)),h[l]-=p;for(var g=l+1;g<7;g++)h[g]=2===g?1:0;var m=[],y=u.makeDate.apply(null,h),v=y.getTime();if(n<=a.HOURLY)for(v<t&&(v+=d,y=new Date(v));v<=e;)m.push({v,label:o.call(i,y,n,r,i)}),v+=d,y=new Date(v);else for(v<t&&(h[l]+=c,v=(y=u.makeDate.apply(null,h)).getTime());v<=e;)(n>=a.DAILY||u.getHours(y)%c==0)&&m.push({v,label:o.call(i,y,n,r,i)}),h[l]+=c,v=(y=u.makeDate.apply(null,h)).getTime();return m},d=Math.log(10),f=function(t){return Math.log(t)/d},h=function(t,e,n){var r=f(t),i=f(e);return Math.pow(10,r+n*(i-r))},p=function(t){return t.getContext("2d")},g=function(t,e,n){t.addEventListener(e,n,!1)};function m(t,e,n){t.removeEventListener(e,n,!1)}function y(t){return(t=t||window.event).stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,!1}function v(t,e,n){var r,i,a;if(0===e)r=n,i=n,a=n;else{var s=Math.floor(6*t),o=6*t-s,u=n*(1-e),l=n*(1-e*o),c=n*(1-e*(1-o));switch(s){case 1:r=l,i=n,a=u;break;case 2:r=u,i=n,a=c;break;case 3:r=u,i=l,a=n;break;case 4:r=c,i=u,a=n;break;case 5:r=n,i=u,a=l;break;case 6:case 0:r=n,i=c,a=u}}return"rgb("+(r=Math.floor(255*r+.5))+","+(i=Math.floor(255*i+.5))+","+(a=Math.floor(255*a+.5))+")"}function _(t){var e=t.getBoundingClientRect(),n=window,r=document.documentElement;return{x:e.left+(n.pageXOffset||r.scrollLeft),y:e.top+(n.pageYOffset||r.scrollTop)}}function b(t){return!t.pageX||t.pageX<0?0:t.pageX}function E(t){return!t.pageY||t.pageY<0?0:t.pageY}function T(t,e){return b(t)-e.px}function S(t,e){return E(t)-e.py}function w(t,e){return!!t&&null!==t.yval&&null!=t.x&&null!=t.y&&!(isNaN(t.x)||!e&&isNaN(t.y))}function A(t,e){var n=Math.min(Math.max(1,e||2),21);return Math.abs(t)<.001&&0!==t?t.toExponential(n-1):t.toPrecision(n)}function x(t){return t<10?"0"+t:""+t}var C={getFullYear:t=>t.getFullYear(),getMonth:t=>t.getMonth(),getDate:t=>t.getDate(),getHours:t=>t.getHours(),getMinutes:t=>t.getMinutes(),getSeconds:t=>t.getSeconds(),getMilliseconds:t=>t.getMilliseconds(),getDay:t=>t.getDay(),makeDate:function(t,e,n,r,i,a,s){return new Date(t,e,n,r,i,a,s)}},D={getFullYear:t=>t.getUTCFullYear(),getMonth:t=>t.getUTCMonth(),getDate:t=>t.getUTCDate(),getHours:t=>t.getUTCHours(),getMinutes:t=>t.getUTCMinutes(),getSeconds:t=>t.getUTCSeconds(),getMilliseconds:t=>t.getUTCMilliseconds(),getDay:t=>t.getUTCDay(),makeDate:function(t,e,n,r,i,a,s){return new Date(Date.UTC(t,e,n,r,i,a,s))}};function I(t,e,n,r){var i=x(t)+":"+x(e);if(n&&(i+=":"+x(n),r)){var a=""+r;i+="."+("000"+a).substring(a.length)}return i}function R(t,e){var n=e?D:C,r=new Date(t),i=n.getFullYear(r),a=n.getMonth(r),s=n.getDate(r),o=n.getHours(r),u=n.getMinutes(r),l=n.getSeconds(r),c=n.getMilliseconds(r),d=i+"/"+x(a+1)+"/"+x(s);return 3600*o+60*u+l+.001*c&&(d+=" "+I(o,u,l,c)),d}function O(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function P(t,e,n,r,i){if(null!=r&&null!=i||(r=0,i=e.length-1),r>i)return-1;null==n&&(n=0);var a,s=function(t){return t>=0&&t<e.length},o=parseInt((r+i)/2,10),u=e[o];return u==t?o:u>t?n>0&&s(a=o-1)&&e[a]<t?o:P(t,e,n,r,o-1):u<t?n<0&&s(a=o+1)&&e[a]>t?o:P(t,e,n,o+1,i):-1}function M(t){var e,n;if((-1==t.search("-")||-1!=t.search("T")||-1!=t.search("Z"))&&(n=L(t))&&!isNaN(n))return n;if(-1!=t.search("-")){for(e=t.replace("-","/","g");-1!=e.search("-");)e=e.replace("-","/");n=L(e)}else n=L(8==t.length?e=t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2):t);return n&&!isNaN(n)||console.error("Couldn't parse "+t+" as a date"),n}function L(t){return new Date(t).getTime()}function N(t,e){if(null!=e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function k(t,e){function n(t){return"object"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}if(null!=e)for(var r in e)e.hasOwnProperty(r)&&(null===e[r]?t[r]=null:F(e[r])?t[r]=e[r].slice():n(e[r])?t[r]=e[r]:"object"==typeof e[r]?("object"==typeof t[r]&&null!==t[r]||(t[r]={}),k(t[r],e[r])):t[r]=e[r]);return t}function F(t){var e=typeof t;return("object"==e||"function"==e&&"function"==typeof t.item)&&null!==t&&"number"==typeof t.length&&3!==t.nodeType}function B(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime}function j(){return document.createElement("canvas")}function U(t){try{var e=window.devicePixelRatio;return void 0!==e?e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1):1}catch(n){return 1}}function V(t,e,n,r){e=e||0,n=n||t.length,this.hasNext=!0,this.peek=null,this.start_=e,this.array_=t,this.predicate_=r,this.end_=Math.min(t.length,e+n),this.nextIdx_=e-1,this.next()}function G(t,e,n,r){return new V(t,e,n,r)}V.prototype.next=function(){if(!this.hasNext)return null;for(var t=this.peek,e=this.nextIdx_+1,n=!1;e<this.end_;){if(!this.predicate_||this.predicate_(this.array_,e)){this.peek=this.array_[e],n=!0;break}e++}return this.nextIdx_=e,n||(this.hasNext=!1,this.peek=null),t};var H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function Y(t,e,n,r){var i,a=0,s=(new Date).getTime();if(t(a),1!=e){var o=e-1;!function u(){a>=e||H.call(window,(function(){var e=(new Date).getTime();i=a;var l=(a=Math.floor((e-s)/n))-i;a+l>o||a>=o?(t(o),r()):(0!==l&&t(a),u())}))}()}else r()}var z={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,labelsDiv:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotFillGradientColor:!0,rangeSelectorPlotStrokeColor:!0,rangeSelectorBackgroundStrokeColor:!0,rangeSelectorBackgroundLineWidth:!0,rangeSelectorPlotLineWidth:!0,rangeSelectorForegroundStrokeColor:!0,rangeSelectorForegroundLineWidth:!0,rangeSelectorAlpha:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0},q={DEFAULT:function(t,e,n,r,i,a,s){n.beginPath(),n.fillStyle=a,n.arc(r,i,s,0,2*Math.PI,!1),n.fill()}};function X(t){for(var e=0;e<t.length;e++){var n=t.charAt(e);if("\r"===n)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":n;if("\n"===n)return e+1<t.length&&"\r"===t.charAt(e+1)?"\n\r":n}return null}function K(t,e){if(null===e||null===t)return!1;for(var n=t;n&&n!==e;)n=n.parentNode;return n===e}function W(t,e){return e<0?1/Math.pow(t,-e):Math.pow(t,e)}var $=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;function Q(t){var e=$.exec(t);if(!e)return null;var n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);return e[4]?{r:n,g:r,b:i,a:parseFloat(e[4])}:{r:n,g:r,b:i}}function Z(t){var e=Q(t);if(e)return e;var n=document.createElement("div");n.style.backgroundColor=t,n.style.visibility="hidden",document.body.appendChild(n);var r=window.getComputedStyle(n,null).backgroundColor;return document.body.removeChild(n),Q(r)}function J(t,e,n){var r=parseFloat(t);if(!isNaN(r))return r;if(/^ *$/.test(t))return null;if(/^ *nan *$/i.test(t))return NaN;var i="Unable to parse '"+t+"' as a number";return void 0!==n&&void 0!==e&&(i+=" on line "+(1+(e||0))+" ('"+n+"') of CSV."),console.error(i),null}var tt=["K","M","B","T","Q"],et=["k","M","G","T","P","E","Z","Y"],nt=["m","u","n","p","f","a","z","y"];function rt(t,e){var n=e("sigFigs");if(null!==n)return A(t,n);var r,i=e("digitsAfterDecimal"),a=e("maxNumberWidth"),s=e("labelsKMB"),o=e("labelsKMG2");if(r=0!==t&&(Math.abs(t)>=Math.pow(10,a)||Math.abs(t)<Math.pow(10,-i))?t.toExponential(i):""+O(t,i),s||o){var u,l=[],c=[];s&&(u=1e3,l=tt),o&&(s&&console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),u=1024,l=et,c=nt);for(var d=Math.abs(t),f=W(u,l.length),h=l.length-1;h>=0;h--,f/=u)if(d>=f){r=O(t/f,i)+l[h];break}if(o){var p=String(t.toExponential()).split("e-");2===p.length&&p[1]>=3&&p[1]<=24&&(r=p[1]%3>0?O(p[0]/W(10,p[1]%3),i):Number(p[0]).toFixed(2),r+=c[Math.floor(p[1]/3)-1])}}return r}function it(t,e,n){return rt.call(this,t,n)}var at=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function st(t,e,n){var r=n("labelsUTC")?D:C,i=r.getFullYear(t),s=r.getMonth(t),o=r.getDate(t),u=r.getHours(t),l=r.getMinutes(t),c=r.getSeconds(t),d=r.getMilliseconds(t);if(e>=a.DECADAL)return""+i;if(e>=a.MONTHLY)return at[s]+"&#160;"+i;if(0===3600*u+60*l+c+.001*d||e>=a.DAILY)return x(o)+"&#160;"+at[s];if(e<a.SECONDLY){var f=""+d;return x(c)+"."+("000"+f).substring(f.length)}return I(u,l,c,e>a.MINUTELY?0:d)}function ot(t,e){return R(t,e("labelsUTC"))}var ut=function(t){this.dygraph_=t,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};ut.prototype.addDataset=function(t,e){this.points.push(e),this.setNames.push(t)},ut.prototype.getPlotArea=function(){return this.area_},ut.prototype.computePlotArea=function(){var t={x:0,y:0};t.w=this.dygraph_.width_-t.x-this.dygraph_.getOption("rightGap"),t.h=this.dygraph_.height_,this.dygraph_.cascadeEvents_("layout",{chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(e){var n={x:t.x,y:t.y,w:e,h:t.h};return t.x+=e,t.w-=e,n},reserveSpaceRight:function(e){var n={x:t.x+t.w-e,y:t.y,w:e,h:t.h};return t.w-=e,n},reserveSpaceTop:function(e){var n={x:t.x,y:t.y,w:t.w,h:e};return t.y+=e,t.h-=e,n},reserveSpaceBottom:function(e){var n={x:t.x,y:t.y+t.h-e,w:t.w,h:e};return t.h-=e,n},chartRect:function(){return{x:t.x,y:t.y,w:t.w,h:t.h}}}),this.area_=t},ut.prototype.setAnnotations=function(t){this.annotations=[];for(var e=this.dygraph_.getOption("xValueParser")||function(t){return t},n=0;n<t.length;n++){var r={};if(!t[n].xval&&void 0===t[n].x)return void console.error("Annotations must have an 'x' property");if(t[n].icon&&(!t[n].hasOwnProperty("width")||!t[n].hasOwnProperty("height")))return void console.error("Must set width and height when setting annotation.icon property");N(r,t[n]),r.xval||(r.xval=e(r.x)),this.annotations.push(r)}},ut.prototype.setXTicks=function(t){this.xTicks_=t},ut.prototype.setYAxes=function(t){this.yAxes_=t},ut.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},ut.prototype._evaluateLimits=function(){var t=this.dygraph_.xAxisRange();this._xAxis.minval=t[0],this._xAxis.maxval=t[1];var e=t[1]-t[0];this._xAxis.scale=0!==e?1/e:1,this.dygraph_.getOptionForAxis("logscale","x")&&(this._xAxis.xlogrange=f(this._xAxis.maxval)-f(this._xAxis.minval),this._xAxis.xlogscale=0!==this._xAxis.xlogrange?1/this._xAxis.xlogrange:1);for(var n=0;n<this.yAxes_.length;n++){var r=this.yAxes_[n];r.minyval=r.computedValueRange[0],r.maxyval=r.computedValueRange[1],r.yrange=r.maxyval-r.minyval,r.yscale=0!==r.yrange?1/r.yrange:1,this.dygraph_.getOption("logscale")&&(r.ylogrange=f(r.maxyval)-f(r.minyval),r.ylogscale=0!==r.ylogrange?1/r.ylogrange:1,isFinite(r.ylogrange)&&!isNaN(r.ylogrange)||console.error("axis "+n+" of graph at "+r.g+" can't be displayed in log scale for range ["+r.minyval+" - "+r.maxyval+"]"))}},ut.calcXNormal_=function(t,e,n){return n?(f(t)-f(e.minval))*e.xlogscale:(t-e.minval)*e.scale},ut.calcYNormal_=function(t,e,n){if(n){var r=1-(f(e)-f(t.minyval))*t.ylogscale;return isFinite(r)?r:NaN}return 1-(e-t.minyval)*t.yscale},ut.prototype._evaluateLineCharts=function(){for(var t=this.dygraph_.getOption("stackedGraph"),e=this.dygraph_.getOptionForAxis("logscale","x"),n=0;n<this.points.length;n++){for(var r=this.points[n],i=this.setNames[n],a=this.dygraph_.getOption("connectSeparatedPoints",i),s=this.dygraph_.axisPropertiesForSeries(i),o=this.dygraph_.attributes_.getForSeries("logscale",i),u=0;u<r.length;u++){var l=r[u];l.x=ut.calcXNormal_(l.xval,this._xAxis,e);var c=l.yval;t&&(l.y_stacked=ut.calcYNormal_(s,l.yval_stacked,o),null===c||isNaN(c)||(c=l.yval_stacked)),null===c&&(c=NaN,a||(l.yval=NaN)),l.y=ut.calcYNormal_(s,c,o)}this.dygraph_.dataHandler_.onLineEvaluated(r,s,o)}},ut.prototype._evaluateLineTicks=function(){var t,e,n,r,i;for(this.xticks=[],t=0;t<this.xTicks_.length;t++)n=(e=this.xTicks_[t]).label,(r=this.dygraph_.toPercentXCoord((i=!("label_v"in e))?e.v:e.label_v))>=0&&r<1&&this.xticks.push({pos:r,label:n,has_tick:i});for(this.yticks=[],t=0;t<this.yAxes_.length;t++)for(var a=this.yAxes_[t],s=0;s<a.ticks.length;s++)n=(e=a.ticks[s]).label,(r=this.dygraph_.toPercentYCoord((i=!("label_v"in e))?e.v:e.label_v,t))>0&&r<=1&&this.yticks.push({axis:t,pos:r,label:n,has_tick:i})},ut.prototype._evaluateAnnotations=function(){var t,e={};for(t=0;t<this.annotations.length;t++){var n=this.annotations[t];e[n.xval+","+n.series]=n}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var r=0;r<this.points.length;r++){var i=this.points[r];for(t=0;t<i.length;t++){var a=i[t],s=a.xval+","+a.name;s in e&&(a.annotation=e[s],this.annotated_points.push(a))}}},ut.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]};var lt=ut,ct=function(t,e,n,r){if(this.dygraph_=t,this.layout=r,this.element=e,this.elementContext=n,this.height=t.height_,this.width=t.width_,!function(t){try{(t||document.createElement("canvas")).getContext("2d")}catch(e){return!1}return!0}(this.element))throw"Canvas is not supported.";this.area=r.getPlotArea();var i=this.dygraph_.canvas_ctx_;i.beginPath(),i.rect(this.area.x,this.area.y,this.area.w,this.area.h),i.clip(),(i=this.dygraph_.hidden_ctx_).beginPath(),i.rect(this.area.x,this.area.y,this.area.w,this.area.h),i.clip()};ct.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)},ct.prototype.render=function(){this._updatePoints(),this._renderLineChart()},ct._getIteratorPredicate=function(t){return t?ct._predicateThatSkipsEmptyPoints:null},ct._predicateThatSkipsEmptyPoints=function(t,e){return null!==t[e].yval},ct._drawStyledLine=function(t,e,n,r,i,a,s){var o=t.dygraph,u=o.getBooleanOption("stepPlot",t.setName);F(r)||(r=null);var l=o.getBooleanOption("drawGapEdgePoints",t.setName),c=t.points,d=G(c,0,c.length,ct._getIteratorPredicate(o.getBooleanOption("connectSeparatedPoints",t.setName))),f=r&&r.length>=2,h=t.drawingContext;h.save(),f&&h.setLineDash&&h.setLineDash(r);var p=ct._drawSeries(t,d,n,s,i,l,u,e);ct._drawPointsOnLine(t,p,a,e,s),f&&h.setLineDash&&h.setLineDash([]),h.restore()},ct._drawSeries=function(t,e,n,r,i,a,s,o){var u,l,c=null,d=null,f=null,h=[],p=!0,g=t.drawingContext;g.beginPath(),g.strokeStyle=o,g.lineWidth=n;for(var m=e.array_,y=e.end_,v=e.predicate_,_=e.start_;_<y;_++){if(l=m[_],v){for(;_<y&&!v(m,_);)_++;if(_==y)break;l=m[_]}if(null===l.canvasy||l.canvasy!=l.canvasy)s&&null!==c&&(g.moveTo(c,d),g.lineTo(l.canvasx,d)),c=d=null;else{if(u=!1,a||null===c){e.nextIdx_=_,e.next();var b=null===(f=e.hasNext?e.peek.canvasy:null)||f!=f;u=null===c&&b,a&&(!p&&null===c||e.hasNext&&b)&&(u=!0)}null!==c?n&&(s&&(g.moveTo(c,d),g.lineTo(l.canvasx,d)),g.lineTo(l.canvasx,l.canvasy)):g.moveTo(l.canvasx,l.canvasy),(i||u)&&h.push([l.canvasx,l.canvasy,l.idx]),c=l.canvasx,d=l.canvasy}p=!1}return g.stroke(),h},ct._drawPointsOnLine=function(t,e,n,r,i){for(var a=t.drawingContext,s=0;s<e.length;s++){var o=e[s];a.save(),n.call(t.dygraph,t.dygraph,t.setName,a,o[0],o[1],r,i,o[2]),a.restore()}},ct.prototype._updatePoints=function(){for(var t=this.layout.points,e=t.length;e--;)for(var n=t[e],r=n.length;r--;){var i=n[r];i.canvasx=this.area.w*i.x+this.area.x,i.canvasy=this.area.h*i.y+this.area.y}},ct.prototype._renderLineChart=function(t,e){var n,r,i=e||this.elementContext,a=this.layout.points,s=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var o=this.dygraph_.getOption("plotter"),u=o;F(u)||(u=[u]);var l={};for(n=0;n<s.length;n++){var c=this.dygraph_.getOption("plotter",r=s[n]);c!=o&&(l[r]=c)}for(n=0;n<u.length;n++)for(var d=u[n],f=n==u.length-1,h=0;h<a.length;h++)if(r=s[h],!t||r==t){var p=a[h],g=d;if(r in l){if(!f)continue;g=l[r]}var m=this.colors[r],y=this.dygraph_.getOption("strokeWidth",r);i.save(),i.strokeStyle=m,i.lineWidth=y,g({points:p,setName:r,drawingContext:i,color:m,strokeWidth:y,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(r),plotArea:this.area,seriesIndex:h,seriesCount:a.length,singleSeriesName:t,allSeriesPoints:a}),i.restore()}},ct._Plotters={linePlotter:function(t){ct._linePlotter(t)},fillPlotter:function(t){ct._fillPlotter(t)},errorPlotter:function(t){ct._errorPlotter(t)}},ct._linePlotter=function(t){var e=t.dygraph,n=t.setName,r=t.strokeWidth,i=e.getNumericOption("strokeBorderWidth",n),a=e.getOption("drawPointCallback",n)||q.DEFAULT,s=e.getOption("strokePattern",n),o=e.getBooleanOption("drawPoints",n),u=e.getNumericOption("pointSize",n);i&&r&&ct._drawStyledLine(t,e.getOption("strokeBorderColor",n),r+2*i,s,o,a,u),ct._drawStyledLine(t,t.color,r,s,o,a,u)},ct._errorPlotter=function(t){var e=t.dygraph,n=t.setName;if(e.getBooleanOption("errorBars")||e.getBooleanOption("customBars")){e.getBooleanOption("fillGraph",n)&&console.warn("Can't use fillGraph option with error bars");var r,i=t.drawingContext,a=t.color,s=e.getNumericOption("fillAlpha",n),o=e.getBooleanOption("stepPlot",n),u=t.points,l=G(u,0,u.length,ct._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",n))),c=NaN,d=NaN,f=[-1,-1],h=Z(a);i.fillStyle="rgba("+h.r+","+h.g+","+h.b+","+s+")",i.beginPath();for(var p=function(t){return null==t||isNaN(t)};l.hasNext;){var g=l.next();!o&&p(g.y)||o&&!isNaN(d)&&p(d)?c=NaN:(r=[g.y_bottom,g.y_top],o&&(d=g.y),isNaN(r[0])&&(r[0]=g.y),isNaN(r[1])&&(r[1]=g.y),r[0]=t.plotArea.h*r[0]+t.plotArea.y,r[1]=t.plotArea.h*r[1]+t.plotArea.y,isNaN(c)||(o?(i.moveTo(c,f[0]),i.lineTo(g.canvasx,f[0]),i.lineTo(g.canvasx,f[1])):(i.moveTo(c,f[0]),i.lineTo(g.canvasx,r[0]),i.lineTo(g.canvasx,r[1])),i.lineTo(c,f[1]),i.closePath()),f=r,c=g.canvasx)}i.fill()}},ct._fastCanvasProxy=function(t){var e=[],n=null,r=null,i=0,a=function(n){!function(t){if(!(e.length<=1)){for(var n=e.length-1;n>0;n--)if(2==(o=e[n])[0]){var r=e[n-1];r[1]==o[1]&&r[2]==o[2]&&e.splice(n,1)}for(n=0;n<e.length-1;)2==(o=e[n])[0]&&2==e[n+1][0]?e.splice(n,1):n++;if(e.length>2&&!t){var i=0;2==e[0][0]&&i++;var a=null,s=null;for(n=i;n<e.length;n++){var o;if(1==(o=e[n])[0])if(null===a&&null===s)a=n,s=n;else{var u=o[2];u<e[a][2]?a=n:u>e[s][2]&&(s=n)}}var l=e[a],c=e[s];e.splice(i,e.length-i),a<s?(e.push(l),e.push(c)):a>s?(e.push(c),e.push(l)):e.push(l)}}}(n);for(var a=0,s=e.length;a<s;a++){var o=e[a];1==o[0]?t.lineTo(o[1],o[2]):2==o[0]&&t.moveTo(o[1],o[2])}e.length&&(r=e[e.length-1][1]),i+=e.length,e=[]},s=function(t,i,s){var o=Math.round(i);null!==n&&o==n||(a(n-r>1||o-n>1),n=o),e.push([t,i,s])};return{moveTo:function(t,e){s(2,t,e)},lineTo:function(t,e){s(1,t,e)},stroke:function(){a(!0),t.stroke()},fill:function(){a(!0),t.fill()},beginPath:function(){a(!0),t.beginPath()},closePath:function(){a(!0),t.closePath()},_count:function(){return i}}},ct._fillPlotter=function(t){if(!t.singleSeriesName&&0===t.seriesIndex){for(var e=t.dygraph,n=e.getLabels().slice(1),r=n.length;r>=0;r--)e.visibility()[r]||n.splice(r,1);if(function(){for(var t=0;t<n.length;t++)if(e.getBooleanOption("fillGraph",n[t]))return!0;return!1}())for(var i,a,s,o=t.plotArea,u=t.allSeriesPoints,l=u.length,c=e.getBooleanOption("stackedGraph"),d=e.getColors(),f={},h=function(t,e,n,r){if(t.lineTo(e,n),c)for(var i=r.length-1;i>=0;i--){var a=r[i];t.lineTo(a[0],a[1])}},p=l-1;p>=0;p--){var g=t.drawingContext,m=n[p];if(e.getBooleanOption("fillGraph",m)){var y=e.getNumericOption("fillAlpha",m),v=e.getBooleanOption("stepPlot",m),_=d[p],b=e.axisPropertiesForSeries(m),E=1+b.minyval*b.yscale;E<0?E=0:E>1&&(E=1),E=o.h*E+o.y;var T,S=u[p],w=G(S,0,S.length,ct._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",m))),A=NaN,x=[-1,-1],C=Z(_);g.fillStyle="rgba("+C.r+","+C.g+","+C.b+","+y+")",g.beginPath();var D,I=!0;(S.length>2*e.width_||Jt.FORCE_FAST_PROXY)&&(g=ct._fastCanvasProxy(g));for(var R,O=[];w.hasNext;)if((s=(R=w.next()).y)&&!isNaN(s)||v){if(c){if(!I&&D==R.xval)continue;I=!1,D=R.xval,T=[R.canvasy,void 0===(i=f[R.canvasx])?E:a?i[0]:i],f[R.canvasx]=v?-1===x[0]?[R.canvasy,E]:[R.canvasy,x[0]]:R.canvasy}else T=isNaN(R.canvasy)&&v?[o.y+o.h,E]:[R.canvasy,E];isNaN(A)?(g.moveTo(R.canvasx,T[1]),g.lineTo(R.canvasx,T[0])):(v?(g.lineTo(R.canvasx,x[0]),g.lineTo(R.canvasx,T[0])):g.lineTo(R.canvasx,T[0]),c&&(O.push([A,x[1]]),O.push(a&&i?[R.canvasx,i[1]]:[R.canvasx,T[1]]))),x=T,A=R.canvasx}else h(g,A,x[1],O),O=[],A=NaN,null===R.y_stacked||isNaN(R.y_stacked)||(f[R.canvasx]=o.h*R.y_stacked+o.y);a=v,T&&R&&(h(g,R.canvasx,T[1],O),O=[]),g.fill()}}}};var dt=ct,ft={maybeTreatMouseOpAsClick:function(t,e,n){n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=Math.abs(n.dragEndX-n.dragStartX),i=Math.abs(n.dragEndY-n.dragStartY);r<2&&i<2&&void 0!==e.lastx_&&-1!=e.lastx_&&ft.treatMouseOpAsClick(e,t,n),n.regionWidth=r,n.regionHeight=i},startPan:function(t,e,n){var r,i;n.isPanning=!0;var a=e.xAxisRange();if(e.getOptionForAxis("logscale","x")?(n.initialLeftmostDate=f(a[0]),n.dateRange=f(a[1])-f(a[0])):(n.initialLeftmostDate=a[0],n.dateRange=a[1]-a[0]),n.xUnitsPerPixel=n.dateRange/(e.plotter_.area.w-1),e.getNumericOption("panEdgeFraction")){var s=e.width_*e.getNumericOption("panEdgeFraction"),o=e.xAxisExtremes(),u=e.toDomXCoord(o[0])-s,l=e.toDomXCoord(o[1])+s,c=e.toDataXCoord(u),d=e.toDataXCoord(l);n.boundedDates=[c,d];var h=[],p=e.height_*e.getNumericOption("panEdgeFraction");for(r=0;r<e.axes_.length;r++){var g=(i=e.axes_[r]).extremeRange,m=e.toDomYCoord(g[0],r)+p,y=e.toDomYCoord(g[1],r)-p,v=e.toDataYCoord(m,r),_=e.toDataYCoord(y,r);h[r]=[v,_]}n.boundedValues=h}for(n.is2DPan=!1,n.axes=[],r=0;r<e.axes_.length;r++){i=e.axes_[r];var b={},E=e.yAxisRange(r);e.attributes_.getForAxis("logscale",r)?(b.initialTopValue=f(E[1]),b.dragValueRange=f(E[1])-f(E[0])):(b.initialTopValue=E[1],b.dragValueRange=E[1]-E[0]),b.unitsPerPixel=b.dragValueRange/(e.plotter_.area.h-1),n.axes.push(b),i.valueRange&&(n.is2DPan=!0)}},movePan:function(t,e,n){n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=n.initialLeftmostDate-(n.dragEndX-n.dragStartX)*n.xUnitsPerPixel;n.boundedDates&&(r=Math.max(r,n.boundedDates[0]));var i=r+n.dateRange;if(n.boundedDates&&i>n.boundedDates[1]&&(i=(r-=i-n.boundedDates[1])+n.dateRange),e.dateWindow_=e.getOptionForAxis("logscale","x")?[Math.pow(10,r),Math.pow(10,i)]:[r,i],n.is2DPan)for(var a=n.dragEndY-n.dragStartY,s=0;s<e.axes_.length;s++){var o=e.axes_[s],u=n.axes[s],l=n.boundedValues?n.boundedValues[s]:null,c=u.initialTopValue+a*u.unitsPerPixel;l&&(c=Math.min(c,l[1]));var d=c-u.dragValueRange;l&&d<l[0]&&(d=(c-=d-l[0])-u.dragValueRange),o.valueRange=e.attributes_.getForAxis("logscale",s)?[Math.pow(10,d),Math.pow(10,c)]:[d,c]}e.drawGraph_(!1)}};ft.endPan=ft.maybeTreatMouseOpAsClick,ft.startZoom=function(t,e,n){n.isZooming=!0,n.zoomMoved=!1},ft.moveZoom=function(t,e,n){n.zoomMoved=!0,n.dragEndX=T(t,n),n.dragEndY=S(t,n);var r=Math.abs(n.dragStartX-n.dragEndX),i=Math.abs(n.dragStartY-n.dragEndY);n.dragDirection=r<i/2?2:1,e.drawZoomRect_(n.dragDirection,n.dragStartX,n.dragEndX,n.dragStartY,n.dragEndY,n.prevDragDirection,n.prevEndX,n.prevEndY),n.prevEndX=n.dragEndX,n.prevEndY=n.dragEndY,n.prevDragDirection=n.dragDirection},ft.treatMouseOpAsClick=function(t,e,n){for(var r=t.getFunctionOption("clickCallback"),i=t.getFunctionOption("pointClickCallback"),a=null,s=-1,o=Number.MAX_VALUE,u=0;u<t.selPoints_.length;u++){var l=t.selPoints_[u],c=Math.pow(l.canvasx-n.dragEndX,2)+Math.pow(l.canvasy-n.dragEndY,2);!isNaN(c)&&(-1==s||c<o)&&(o=c,s=u)}var d=t.getNumericOption("highlightCircleSize")+2;if(o<=d*d&&(a=t.selPoints_[s]),a){if(t.cascadeEvents_("pointClick",{cancelable:!0,point:a,canvasx:n.dragEndX,canvasy:n.dragEndY}))return;i&&i.call(t,e,a)}t.cascadeEvents_("click",{cancelable:!0,xval:t.lastx_,pts:t.selPoints_,canvasx:n.dragEndX,canvasy:n.dragEndY})||r&&r.call(t,e,t.lastx_,t.selPoints_)},ft.endZoom=function(t,e,n){e.clearZoomRect_(),n.isZooming=!1,ft.maybeTreatMouseOpAsClick(t,e,n);var r=e.getArea();if(n.regionWidth>=10&&1==n.dragDirection){var i=Math.min(n.dragStartX,n.dragEndX),a=Math.max(n.dragStartX,n.dragEndX);(i=Math.max(i,r.x))<(a=Math.min(a,r.x+r.w))&&e.doZoomX_(i,a),n.cancelNextDblclick=!0}else if(n.regionHeight>=10&&2==n.dragDirection){var s=Math.min(n.dragStartY,n.dragEndY),o=Math.max(n.dragStartY,n.dragEndY);(s=Math.max(s,r.y))<(o=Math.min(o,r.y+r.h))&&e.doZoomY_(s,o),n.cancelNextDblclick=!0}n.dragStartX=null,n.dragStartY=null},ft.startTouch=function(t,e,n){t.preventDefault(),t.touches.length>1&&(n.startTimeForDoubleTapMs=null);for(var r=[],i=0;i<t.touches.length;i++){var a=t.touches[i];r.push({pageX:a.pageX,pageY:a.pageY,dataX:e.toDataXCoord(a.pageX),dataY:e.toDataYCoord(a.pageY)})}if(n.initialTouches=r,1==r.length)n.initialPinchCenter=r[0],n.touchDirections={x:!0,y:!0};else if(r.length>=2){n.initialPinchCenter={pageX:.5*(r[0].pageX+r[1].pageX),pageY:.5*(r[0].pageY+r[1].pageY),dataX:.5*(r[0].dataX+r[1].dataX),dataY:.5*(r[0].dataY+r[1].dataY)};var s=180/Math.PI*Math.atan2(n.initialPinchCenter.pageY-r[0].pageY,r[0].pageX-n.initialPinchCenter.pageX);(s=Math.abs(s))>90&&(s=90-s),n.touchDirections={x:s<67.5,y:s>22.5}}n.initialRange={x:e.xAxisRange(),y:e.yAxisRange()}},ft.moveTouch=function(t,e,n){n.startTimeForDoubleTapMs=null;var r,i=[];for(r=0;r<t.touches.length;r++){var a=t.touches[r];i.push({pageX:a.pageX,pageY:a.pageY})}var s,o,u,l=n.initialTouches,c=n.initialPinchCenter,d={pageX:(s=1==i.length?i[0]:{pageX:.5*(i[0].pageX+i[1].pageX),pageY:.5*(i[0].pageY+i[1].pageY)}).pageX-c.pageX,pageY:s.pageY-c.pageY},f=n.initialRange.y[0]-n.initialRange.y[1];d.dataX=d.pageX/e.plotter_.area.w*(n.initialRange.x[1]-n.initialRange.x[0]),d.dataY=d.pageY/e.plotter_.area.h*f,1==i.length?(o=1,u=1):i.length>=2&&(o=(i[1].pageX-s.pageX)/(l[1].pageX-c.pageX),u=(i[1].pageY-s.pageY)/(l[1].pageY-c.pageY)),o=Math.min(8,Math.max(.125,o)),u=Math.min(8,Math.max(.125,u));var h=!1;if(n.touchDirections.x&&(e.dateWindow_=[c.dataX-d.dataX+(n.initialRange.x[0]-c.dataX)/o,c.dataX-d.dataX+(n.initialRange.x[1]-c.dataX)/o],h=!0),n.touchDirections.y)for(r=0;r<1;r++){var p=e.axes_[r];e.attributes_.getForAxis("logscale",r)||(p.valueRange=[c.dataY-d.dataY+(n.initialRange.y[0]-c.dataY)/u,c.dataY-d.dataY+(n.initialRange.y[1]-c.dataY)/u],h=!0)}if(e.drawGraph_(!1),h&&i.length>1&&e.getFunctionOption("zoomCallback")){var g=e.xAxisRange();e.getFunctionOption("zoomCallback").call(e,g[0],g[1],e.yAxisRanges())}},ft.endTouch=function(t,e,n){if(0!==t.touches.length)ft.startTouch(t,e,n);else if(1==t.changedTouches.length){var r=(new Date).getTime(),i=t.changedTouches[0];n.startTimeForDoubleTapMs&&r-n.startTimeForDoubleTapMs<500&&n.doubleTapX&&Math.abs(n.doubleTapX-i.screenX)<50&&n.doubleTapY&&Math.abs(n.doubleTapY-i.screenY)<50?e.resetZoom():(n.startTimeForDoubleTapMs=r,n.doubleTapX=i.screenX,n.doubleTapY=i.screenY)}};var ht=function(t,e,n){return t<e?e-t:t>n?t-n:0};ft.defaultModel={mousedown:function(t,e,n){if(!t.button||2!=t.button){n.initializeMouseDown(t,e,n),t.altKey||t.shiftKey?ft.startPan(t,e,n):ft.startZoom(t,e,n);var r=function(t){n.isZooming?function(t,e){var n=_(e.canvas_),r={left:n.x,right:n.x+e.canvas_.offsetWidth,top:n.y,bottom:n.y+e.canvas_.offsetHeight},i={x:b(t),y:E(t)},a=ht(i.x,r.left,r.right),s=ht(i.y,r.top,r.bottom);return Math.max(a,s)}(t,e)<100?ft.moveZoom(t,e,n):null!==n.dragEndX&&(n.dragEndX=null,n.dragEndY=null,e.clearZoomRect_()):n.isPanning&&ft.movePan(t,e,n)},i=function(t){n.isZooming?null!==n.dragEndX?ft.endZoom(t,e,n):ft.maybeTreatMouseOpAsClick(t,e,n):n.isPanning&&ft.endPan(t,e,n),m(document,"mousemove",r),m(document,"mouseup",i),n.destroy()};e.addAndTrackEvent(document,"mousemove",r),e.addAndTrackEvent(document,"mouseup",i)}},willDestroyContextMyself:!0,touchstart:function(t,e,n){ft.startTouch(t,e,n)},touchmove:function(t,e,n){ft.moveTouch(t,e,n)},touchend:function(t,e,n){ft.endTouch(t,e,n)},dblclick:function(t,e,n){n.cancelNextDblclick?n.cancelNextDblclick=!1:e.cascadeEvents_("dblclick",{canvasx:n.dragEndX,canvasy:n.dragEndY,cancelable:!0})||t.altKey||t.shiftKey||e.resetZoom()}},ft.nonInteractiveModel_={mousedown:function(t,e,n){n.initializeMouseDown(t,e,n)},mouseup:ft.maybeTreatMouseOpAsClick},ft.dragIsPanInteractionModel={mousedown:function(t,e,n){n.initializeMouseDown(t,e,n),ft.startPan(t,e,n)},mousemove:function(t,e,n){n.isPanning&&ft.movePan(t,e,n)},mouseup:function(t,e,n){n.isPanning&&ft.endPan(t,e,n)}};var pt=ft,gt={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,xValueParser:void 0,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:50,gridLineColor:"rgb(128,128,128)",interactionModel:pt.defaultModel,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[dt._fillPlotter,dt._errorPlotter,dt._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:st,valueFormatter:ot,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:i},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:rt,axisLabelFormatter:it,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:r},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:rt,axisLabelFormatter:it,drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:r}}},mt=function(t){this.dygraph_=t,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};mt.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},mt.axisToIndex_=function(t){if("string"==typeof t){if(mt.AXIS_STRING_MAPPINGS_.hasOwnProperty(t))return mt.AXIS_STRING_MAPPINGS_[t];throw"Unknown axis : "+t}if("number"==typeof t){if(0===t||1===t)return t;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(t)throw"Unknown axis : "+t;return 0},mt.prototype.reparseSeries=function(){var t=this.get("labels");if(t){this.labels_=t.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};for(var e=this.user_.series||{},n=0;n<this.labels_.length;n++){var r=this.labels_[n],i=e[r]||{},a=mt.axisToIndex_(i.axis);this.series_[r]={idx:n,yAxis:a,options:i},this.yAxes_[a]?this.yAxes_[a].series.push(r):this.yAxes_[a]={series:[r],options:{}}}var s=this.user_.axes||{};N(this.yAxes_[0].options,s.y||{}),this.yAxes_.length>1&&N(this.yAxes_[1].options,s.y2||{}),N(this.xAxis_.options,s.x||{})}},mt.prototype.get=function(t){var e=this.getGlobalUser_(t);return null!==e?e:this.getGlobalDefault_(t)},mt.prototype.getGlobalUser_=function(t){return this.user_.hasOwnProperty(t)?this.user_[t]:null},mt.prototype.getGlobalDefault_=function(t){return this.global_.hasOwnProperty(t)?this.global_[t]:gt.hasOwnProperty(t)?gt[t]:null},mt.prototype.getForAxis=function(t,e){var n,r;if("number"==typeof e)r=0===(n=e)?"y":"y2";else{if("y1"==e&&(e="y"),"y"==e)n=0;else if("y2"==e)n=1;else{if("x"!=e)throw"Unknown axis "+e;n=-1}r=e}var i=-1==n?this.xAxis_:this.yAxes_[n];if(i){var a=i.options;if(a.hasOwnProperty(t))return a[t]}if("x"!==e||"logscale"!==t){var s=this.getGlobalUser_(t);if(null!==s)return s}var o=gt.axes[r];return o.hasOwnProperty(t)?o[t]:this.getGlobalDefault_(t)},mt.prototype.getForSeries=function(t,e){if(e===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(t))return this.highlightSeries_[t];if(!this.series_.hasOwnProperty(e))throw"Unknown series: "+e;var n=this.series_[e],r=n.options;return r.hasOwnProperty(t)?r[t]:this.getForAxis(t,n.yAxis)},mt.prototype.numAxes=function(){return this.yAxes_.length},mt.prototype.axisForSeries=function(t){return this.series_[t].yAxis},mt.prototype.axisOptions=function(t){return this.yAxes_[t].options},mt.prototype.seriesForAxis=function(t){return this.yAxes_[t].series},mt.prototype.seriesNames=function(){return this.labels_};var yt=mt;function vt(){this.tarps=[]}vt.prototype.cover=function(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var n=t[e],r=_(n),i=r.x,a=r.y,s=n.offsetWidth,o=n.offsetHeight,u=document.createElement("div");u.style.position="absolute",u.style.left=i+"px",u.style.top=a+"px",u.style.width=s+"px",u.style.height=o+"px",u.style.zIndex=999,document.body.appendChild(u),this.tarps.push(u)}},vt.prototype.uncover=function(){for(var t=0;t<this.tarps.length;t++)this.tarps[t].parentNode.removeChild(this.tarps[t]);this.tarps=[]};var _t=vt,bt=function(){},Et=bt;Et.X=0,Et.Y=1,Et.EXTRAS=2,Et.prototype.extractSeries=function(t,e,n){},Et.prototype.seriesToPoints=function(t,e,n){for(var r=[],i=0;i<t.length;++i){var a=t[i],s=a[1],o=null===s?null:Et.parseFloat(s),u={x:NaN,y:NaN,xval:Et.parseFloat(a[0]),yval:o,name:e,idx:i+n};r.push(u)}return this.onPointsCreated_(t,r),r},Et.prototype.onPointsCreated_=function(t,e){},Et.prototype.rollingAverage=function(t,e,n){},Et.prototype.getExtremeYValues=function(t,e,n){},Et.prototype.onLineEvaluated=function(t,e,n){},Et.parseFloat=function(t){return null===t?NaN:t};var Tt=bt,St=function(){};(St.prototype=new Tt).extractSeries=function(t,e,n){for(var r=[],i=n.get("logscale"),a=0;a<t.length;a++){var s=t[a][e];i&&s<=0&&(s=null),r.push([t[a][0],s])}return r},St.prototype.rollingAverage=function(t,e,n){var r,i,a,s,o,u=[];if(1==(e=Math.min(e,t.length)))return t;for(r=0;r<t.length;r++){for(s=0,o=0,i=Math.max(0,r-e+1);i<r+1;i++)null===(a=t[i][1])||isNaN(a)||(o++,s+=t[i][1]);u[r]=o?[t[r][0],s/o]:[t[r][0],null]}return u},St.prototype.getExtremeYValues=function(t,e,n){for(var r,i=null,a=null,s=t.length-1,o=0;o<=s;o++)null===(r=t[o][1])||isNaN(r)||((null===a||r>a)&&(a=r),(null===i||r<i)&&(i=r));return[i,a]};var wt=St,At=function(){Tt.call(this)};(At.prototype=new Tt).extractSeries=function(t,e,n){},At.prototype.rollingAverage=function(t,e,n){},At.prototype.onPointsCreated_=function(t,e){for(var n=0;n<t.length;++n){var r=t[n],i=e[n];i.y_top=NaN,i.y_bottom=NaN,i.yval_minus=Tt.parseFloat(r[2][0]),i.yval_plus=Tt.parseFloat(r[2][1])}},At.prototype.getExtremeYValues=function(t,e,n){for(var r,i=null,a=null,s=t.length-1,o=0;o<=s;o++)if(null!==(r=t[o][1])&&!isNaN(r)){var u=t[o][2][0],l=t[o][2][1];u>r&&(u=r),l<r&&(l=r),(null===a||l>a)&&(a=l),(null===i||u<i)&&(i=u)}return[i,a]},At.prototype.onLineEvaluated=function(t,e,n){for(var r,i=0;i<t.length;i++)(r=t[i]).y_top=lt.calcYNormal_(e,r.yval_minus,n),r.y_bottom=lt.calcYNormal_(e,r.yval_plus,n)};var xt=At,Ct=function(){};(Ct.prototype=new xt).extractSeries=function(t,e,n){for(var r,i,a,s,o=[],u=n.get("sigma"),l=n.get("logscale"),c=0;c<t.length;c++)r=t[c][0],s=t[c][e],l&&null!==s&&(s[0]<=0||s[0]-u*s[1]<=0)&&(s=null),null!==s?null===(i=s[0])||isNaN(i)?o.push([r,i,[i,i,i]]):o.push([r,i,[i-(a=u*s[1]),i+a,s[1]]]):o.push([r,null,[null,null,null]]);return o},Ct.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a,s,o,u,l,c,d,f=[],h=n.get("sigma");for(r=0;r<t.length;r++){for(o=0,c=0,u=0,i=Math.max(0,r-e+1);i<r+1;i++)null===(a=t[i][1])||isNaN(a)||(u++,o+=a,c+=Math.pow(t[i][2][2],2));u?(l=Math.sqrt(c)/u,f[r]=[t[r][0],d=o/u,[d-h*l,d+h*l]]):f[r]=[t[r][0],s=1==e?t[r][1]:null,[s,s]]}return f};var Dt=Ct,It=function(){};(It.prototype=new xt).extractSeries=function(t,e,n){for(var r,i,a,s=[],o=n.get("logscale"),u=0;u<t.length;u++)r=t[u][0],a=t[u][e],o&&null!==a&&(a[0]<=0||a[1]<=0||a[2]<=0)&&(a=null),null!==a?null===(i=a[1])||isNaN(i)?s.push([r,i,[i,i]]):s.push([r,i,[a[0],a[2]]]):s.push([r,null,[null,null]]);return s},It.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a,s,o,u,l,c=[];for(i=0,s=0,a=0,o=0,u=0;u<t.length;u++){if(r=t[u][1],l=t[u][2],c[u]=t[u],null===r||isNaN(r)||(i+=l[0],s+=r,a+=l[1],o+=1),u-e>=0){var d=t[u-e];null===d[1]||isNaN(d[1])||(i-=d[2][0],s-=d[1],a-=d[2][1],o-=1)}c[u]=o?[t[u][0],1*s/o,[1*i/o,1*a/o]]:[t[u][0],null,[null,null]]}return c};var Rt=It,Ot=function(){};(Ot.prototype=new wt).extractSeries=function(t,e,n){for(var r,i,a,s,o=[],u=n.get("logscale"),l=0;l<t.length;l++)r=t[l][0],i=t[l][e],u&&null!==i&&(i[0]<=0||i[1]<=0)&&(i=null),null!==i?(s=i[1],null===(a=i[0])||isNaN(a)?o.push([r,a,[a,s]]):o.push([r,100*(s?a/s:0),[a,s]])):o.push([r,null,[null,null]]);return o},Ot.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i=[],a=0,s=0;for(r=0;r<t.length;r++)a+=t[r][2][0],s+=t[r][2][1],r-e>=0&&(a-=t[r-e][2][0],s-=t[r-e][2][1]),i[r]=[t[r][0],100*(s?a/s:0)];return i};var Pt=Ot,Mt=function(){};(Mt.prototype=new xt).extractSeries=function(t,e,n){for(var r,i,a,s,o,u,l,c,d=[],f=n.get("sigma"),h=n.get("logscale"),p=0;p<t.length;p++)r=t[p][0],a=t[p][e],h&&null!==a&&(a[0]<=0||a[1]<=0)&&(a=null),null!==a?(o=a[1],null===(s=a[0])||isNaN(s)?d.push([r,s,[s,s,s,o]]):(u=o?s/o:0,l=o?f*Math.sqrt(u*(1-u)/o):1,d.push([r,i=100*u,[i-(c=100*l),i+c,s,o]]))):d.push([r,null,[null,null,null,null]]);return d},Mt.prototype.rollingAverage=function(t,e,n){e=Math.min(e,t.length);var r,i,a=[],s=n.get("sigma"),o=n.get("wilsonInterval"),u=0,l=0;for(r=0;r<t.length;r++){u+=t[r][2][2],l+=t[r][2][3],r-e>=0&&(u-=t[r-e][2][2],l-=t[r-e][2][3]);var c=t[r][0],d=l?u/l:0;if(o)if(l){var f=d<0?0:d,h=s*Math.sqrt(f*(1-f)/l+s*s/(4*l*l)),p=1+s*s/l;a[r]=[c,100*f,[(f+s*s/(2*l)-h)/p*100,(f+s*s/(2*l)+h)/p*100]]}else a[r]=[c,0,[0,0]];else i=l?s*Math.sqrt(d*(1-d)/l):1,a[r]=[c,100*d,[100*(d-i),100*(d+i)]]}return a};var Lt=Mt,Nt=function(){this.annotations_=[]};Nt.prototype.toString=function(){return"Annotations Plugin"},Nt.prototype.activate=function(t){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},Nt.prototype.detachLabels=function(){for(var t=0;t<this.annotations_.length;t++){var e=this.annotations_[t];e.parentNode&&e.parentNode.removeChild(e),this.annotations_[t]=null}this.annotations_=[]},Nt.prototype.clearChart=function(t){this.detachLabels()},Nt.prototype.didDrawChart=function(t){var e=t.dygraph,n=e.layout_.annotated_points;if(n&&0!==n.length)for(var r=t.canvas.parentNode,i=function(t,n,r){return function(i){var a=r.annotation;a.hasOwnProperty(t)?a[t](a,r,e,i):e.getOption(n)&&e.getOption(n)(a,r,e,i)}},a=t.dygraph.getArea(),s={},o=0;o<n.length;o++){var u=n[o];if(!(u.canvasx<a.x||u.canvasx>a.x+a.w||u.canvasy<a.y||u.canvasy>a.y+a.h)){var l=u.annotation,c=6;l.hasOwnProperty("tickHeight")&&(c=l.tickHeight);var d=document.createElement("div");d.style.fontSize=e.getOption("axisLabelFontSize")+"px";var f="dygraph-annotation";l.hasOwnProperty("icon")||(f+=" dygraphDefaultAnnotation dygraph-default-annotation"),l.hasOwnProperty("cssClass")&&(f+=" "+l.cssClass),d.className=f;var h=l.hasOwnProperty("width")?l.width:16,p=l.hasOwnProperty("height")?l.height:16;if(l.hasOwnProperty("icon")){var g=document.createElement("img");g.src=l.icon,g.width=h,g.height=p,d.appendChild(g)}else u.annotation.hasOwnProperty("shortText")&&d.appendChild(document.createTextNode(u.annotation.shortText));var m=u.canvasx-h/2;d.style.left=m+"px";var y=0;if(l.attachAtBottom){var v=a.y+a.h-p-c;s[m]?v-=s[m]:s[m]=0,s[m]+=c+p,y=v}else y=u.canvasy-p-c;d.style.top=y+"px",d.style.width=h+"px",d.style.height=p+"px",d.title=u.annotation.text,d.style.color=e.colorsMap_[u.name],d.style.borderColor=e.colorsMap_[u.name],l.div=d,e.addAndTrackEvent(d,"click",i("clickHandler","annotationClickHandler",u)),e.addAndTrackEvent(d,"mouseover",i("mouseOverHandler","annotationMouseOverHandler",u)),e.addAndTrackEvent(d,"mouseout",i("mouseOutHandler","annotationMouseOutHandler",u)),e.addAndTrackEvent(d,"dblclick",i("dblClickHandler","annotationDblClickHandler",u)),r.appendChild(d),this.annotations_.push(d);var _=t.drawingContext;_.save(),_.strokeStyle=l.hasOwnProperty("tickColor")?l.tickColor:e.colorsMap_[u.name],_.lineWidth=l.hasOwnProperty("tickWidth")?l.tickWidth:e.getOption("strokeWidth"),_.beginPath(),l.attachAtBottom?(_.moveTo(u.canvasx,v=y+p),_.lineTo(u.canvasx,v+c)):(_.moveTo(u.canvasx,u.canvasy),_.lineTo(u.canvasx,u.canvasy-2-c)),_.closePath(),_.stroke(),_.restore()}}},Nt.prototype.destroy=function(){this.detachLabels()};var kt=Nt,Ft=function(){this.xlabels_=[],this.ylabels_=[]};Ft.prototype.toString=function(){return"Axes Plugin"},Ft.prototype.activate=function(t){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},Ft.prototype.layout=function(t){var e,n=t.dygraph;if(n.getOptionForAxis("drawAxis","y")){var r=n.getOptionForAxis("axisLabelWidth","y")+2*n.getOptionForAxis("axisTickSize","y");t.reserveSpaceLeft(r)}n.getOptionForAxis("drawAxis","x")&&(e=n.getOption("xAxisHeight")?n.getOption("xAxisHeight"):n.getOptionForAxis("axisLabelFontSize","x")+2*n.getOptionForAxis("axisTickSize","x"),t.reserveSpaceBottom(e)),2==n.numAxes()?n.getOptionForAxis("drawAxis","y2")&&(r=n.getOptionForAxis("axisLabelWidth","y2")+2*n.getOptionForAxis("axisTickSize","y2"),t.reserveSpaceRight(r)):n.numAxes()>2&&n.error("Only two y-axes are supported at this time. (Trying to use "+n.numAxes()+")")},Ft.prototype.detachLabels=function(){function t(t){for(var e=0;e<t.length;e++){var n=t[e];n.parentNode&&n.parentNode.removeChild(n)}}t(this.xlabels_),t(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},Ft.prototype.clearChart=function(t){this.detachLabels()},Ft.prototype.willDrawChart=function(t){var e=t.dygraph;if(e.getOptionForAxis("drawAxis","x")||e.getOptionForAxis("drawAxis","y")||e.getOptionForAxis("drawAxis","y2")){var n,r,i,a=t.drawingContext,s=t.canvas.parentNode,o=e.width_,u=e.height_,l=function(t){return{position:"absolute",fontSize:e.getOptionForAxis("axisLabelFontSize",t)+"px",width:e.getOptionForAxis("axisLabelWidth",t)+"px"}},c={x:l("x"),y:l("y"),y2:l("y2")},d=function(t,e,n){var r=document.createElement("div");N(r.style,c["y2"==n?"y2":e]);var i=document.createElement("div");return i.className="dygraph-axis-label dygraph-axis-label-"+e+(n?" dygraph-axis-label-"+n:""),i.innerHTML=t,r.appendChild(i),r};a.save();var f=e.layout_,h=t.dygraph.plotter_.area,p=function(t){return function(n){return e.getOptionForAxis(n,t)}};if(e.getOptionForAxis("drawAxis","y")){if(f.yticks&&f.yticks.length>0){var g=e.numAxes(),m=[p("y"),p("y2")];f.yticks.forEach(t=>{if(void 0!==t.label){r=h.x;var e="y1",a=m[0];1==t.axis&&(r=h.x+h.w,e="y2",a=m[1]);var o=a("axisLabelFontSize");i=h.y+t.pos*h.h,n=d(t.label,"y",2==g?e:null);var l=i-o/2;l<0&&(l=0),l+o+3>u?n.style.bottom="0":n.style.top=l+"px",0===t.axis?(n.style.left=h.x-a("axisLabelWidth")-a("axisTickSize")+"px",n.style.textAlign="right"):1==t.axis&&(n.style.left=h.x+h.w+a("axisTickSize")+"px",n.style.textAlign="left"),n.style.width=a("axisLabelWidth")+"px",s.appendChild(n),this.ylabels_.push(n)}});var y=this.ylabels_[0],v=e.getOptionForAxis("axisLabelFontSize","y");parseInt(y.style.top,10)+v>u-v&&(y.style.top=parseInt(y.style.top,10)-v/2+"px")}var _;e.getOption("drawAxesAtZero")?(((T=e.toPercentXCoord(0))>1||T<0||isNaN(T))&&(T=0),_=S(h.x+T*h.w)):_=S(h.x),a.strokeStyle=e.getOptionForAxis("axisLineColor","y"),a.lineWidth=e.getOptionForAxis("axisLineWidth","y"),a.beginPath(),a.moveTo(_,w(h.y)),a.lineTo(_,w(h.y+h.h)),a.closePath(),a.stroke(),2==e.numAxes()&&(a.strokeStyle=e.getOptionForAxis("axisLineColor","y2"),a.lineWidth=e.getOptionForAxis("axisLineWidth","y2"),a.beginPath(),a.moveTo(w(h.x+h.w),w(h.y)),a.lineTo(w(h.x+h.w),w(h.y+h.h)),a.closePath(),a.stroke())}if(e.getOptionForAxis("drawAxis","x")){if(f.xticks){var b=p("x");f.xticks.forEach(t=>{if(void 0!==t.label){r=h.x+t.pos*h.w,i=h.y+h.h,(n=d(t.label,"x")).style.textAlign="center",n.style.top=i+b("axisTickSize")+"px";var e=r-b("axisLabelWidth")/2;e+b("axisLabelWidth")>o&&(e=o-b("axisLabelWidth"),n.style.textAlign="right"),e<0&&(e=0,n.style.textAlign="left"),n.style.left=e+"px",n.style.width=b("axisLabelWidth")+"px",s.appendChild(n),this.xlabels_.push(n)}})}var E,T;a.strokeStyle=e.getOptionForAxis("axisLineColor","x"),a.lineWidth=e.getOptionForAxis("axisLineWidth","x"),a.beginPath(),e.getOption("drawAxesAtZero")?(((T=e.toPercentYCoord(0,0))>1||T<0)&&(T=1),E=w(h.y+T*h.h)):E=w(h.y+h.h),a.moveTo(S(h.x),E),a.lineTo(S(h.x+h.w),E),a.closePath(),a.stroke()}a.restore()}function S(t){return Math.round(t)+.5}function w(t){return Math.round(t)-.5}};var Bt=Ft,jt=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};jt.prototype.toString=function(){return"ChartLabels Plugin"},jt.prototype.activate=function(t){return{layout:this.layout,didDrawChart:this.didDrawChart}};var Ut=function(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.width=t.w+"px",e.style.height=t.h+"px",e};jt.prototype.detachLabels_=function(){for(var t=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],e=0;e<t.length;e++){var n=t[e];n&&n.parentNode&&n.parentNode.removeChild(n)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var Vt=function(t,e,n,r,i){var a=document.createElement("div");a.style.position="absolute",a.style.left=1==n?"0px":e.x+"px",a.style.top=e.y+"px",a.style.width=e.w+"px",a.style.height=e.h+"px",a.style.fontSize=t.getOption("yLabelWidth")-2+"px";var s=document.createElement("div");s.style.position="absolute",s.style.width=e.h+"px",s.style.height=e.w+"px",s.style.top=e.h/2-e.w/2+"px",s.style.left=e.w/2-e.h/2+"px",s.className="dygraph-label-rotate-"+(1==n?"right":"left");var o=document.createElement("div");return o.className=r,o.innerHTML=i,s.appendChild(o),a.appendChild(s),a};jt.prototype.layout=function(t){this.detachLabels_();var e=t.dygraph,n=t.chart_div;if(e.getOption("title")){var r=t.reserveSpaceTop(e.getOption("titleHeight"));this.title_div_=Ut(r),this.title_div_.style.fontSize=e.getOption("titleHeight")-8+"px",(i=document.createElement("div")).className="dygraph-label dygraph-title",i.innerHTML=e.getOption("title"),this.title_div_.appendChild(i),n.appendChild(this.title_div_)}if(e.getOption("xlabel")){var i,a=t.reserveSpaceBottom(e.getOption("xLabelHeight"));this.xlabel_div_=Ut(a),this.xlabel_div_.style.fontSize=e.getOption("xLabelHeight")-2+"px",(i=document.createElement("div")).className="dygraph-label dygraph-xlabel",i.innerHTML=e.getOption("xlabel"),this.xlabel_div_.appendChild(i),n.appendChild(this.xlabel_div_)}if(e.getOption("ylabel")){var s=t.reserveSpaceLeft(0);this.ylabel_div_=Vt(e,s,1,"dygraph-label dygraph-ylabel",e.getOption("ylabel")),n.appendChild(this.ylabel_div_)}if(e.getOption("y2label")&&2==e.numAxes()){var o=t.reserveSpaceRight(0);this.y2label_div_=Vt(e,o,2,"dygraph-label dygraph-y2label",e.getOption("y2label")),n.appendChild(this.y2label_div_)}},jt.prototype.didDrawChart=function(t){var e=t.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=e.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=e.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=e.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=e.getOption("y2label"))},jt.prototype.clearChart=function(){},jt.prototype.destroy=function(){this.detachLabels_()};var Gt=jt,Ht=function(){};Ht.prototype.toString=function(){return"Gridline Plugin"},Ht.prototype.activate=function(t){return{willDrawChart:this.willDrawChart}},Ht.prototype.willDrawChart=function(t){var e,n,r,i=t.dygraph,a=t.drawingContext,s=i.layout_,o=t.dygraph.plotter_.area;function u(t){return Math.round(t)+.5}function l(t){return Math.round(t)-.5}if(i.getOptionForAxis("drawGrid","y")){for(var c=["y","y2"],d=[],f=[],h=[],p=[],g=[],m=0;m<c.length;m++)h[m]=i.getOptionForAxis("drawGrid",c[m]),h[m]&&(d[m]=i.getOptionForAxis("gridLineColor",c[m]),f[m]=i.getOptionForAxis("gridLineWidth",c[m]),g[m]=i.getOptionForAxis("gridLinePattern",c[m]),p[m]=g[m]&&g[m].length>=2);r=s.yticks,a.save(),r.forEach(t=>{if(t.has_tick){var r=t.axis;h[r]&&(a.save(),p[r]&&a.setLineDash&&a.setLineDash(g[r]),a.strokeStyle=d[r],a.lineWidth=f[r],e=u(o.x),n=l(o.y+t.pos*o.h),a.beginPath(),a.moveTo(e,n),a.lineTo(e+o.w,n),a.stroke(),a.restore())}}),a.restore()}i.getOptionForAxis("drawGrid","x")&&(r=s.xticks,a.save(),g=i.getOptionForAxis("gridLinePattern","x"),(p=g&&g.length>=2)&&a.setLineDash&&a.setLineDash(g),a.strokeStyle=i.getOptionForAxis("gridLineColor","x"),a.lineWidth=i.getOptionForAxis("gridLineWidth","x"),r.forEach(t=>{t.has_tick&&(e=u(o.x+t.pos*o.w),n=l(o.y+o.h),a.beginPath(),a.moveTo(e,n),a.lineTo(e,o.y),a.closePath(),a.stroke())}),p&&a.setLineDash&&a.setLineDash([]),a.restore())},Ht.prototype.destroy=function(){};var Yt=Ht,zt=function(){this.legend_div_=null,this.is_generated_div_=!1};function qt(t,e,n){if(!t||t.length<=1)return`<div class="dygraph-legend-line" style="border-bottom-color: ${e};"></div>`;var r,i,a,s=0,o=0,u=[];for(r=0;r<=t.length;r++)s+=t[r%t.length];if((a=Math.floor(n/(s-t[0])))>1){for(r=0;r<t.length;r++)u[r]=t[r]/n;o=u.length}else{for(a=1,r=0;r<t.length;r++)u[r]=t[r]/s;o=u.length+1}var l="";for(i=0;i<a;i++)for(r=0;r<o;r+=2)l+=`<div class="dygraph-legend-dash" style="margin-right: ${r<t.length?u[(r+1)%u.length]:0}em; padding-left: ${u[r%u.length]}em;"></div>`;return l}zt.prototype.toString=function(){return"Legend Plugin"},zt.prototype.activate=function(t){var e,n=t.getOption("labelsDiv");return n&&null!==n?e="string"==typeof n||n instanceof String?document.getElementById(n):n:((e=document.createElement("div")).className="dygraph-legend",t.graphDiv.appendChild(e),this.is_generated_div_=!0),this.legend_div_=e,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}},zt.prototype.select=function(t){var e=t.selectedX,n=t.selectedPoints,r=t.selectedRow,i=t.dygraph.getOption("legend");if("never"!==i){if("follow"===i){var a=t.dygraph.plotter_.area,s=this.legend_div_.offsetWidth,o=t.dygraph.getOptionForAxis("axisLabelWidth","y"),u=n[0].x*a.w+50,l=n[0].y*a.h-50;u+s+1>a.w&&(u=u-100-s-(o-a.x)),t.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=o+u+"px",this.legend_div_.style.top=l+"px"}var c=zt.generateLegendHTML(t.dygraph,e,n,this.one_em_width_,r);this.legend_div_.innerHTML=c,this.legend_div_.style.display=""}else this.legend_div_.style.display="none"},zt.prototype.deselect=function(t){"always"!==t.dygraph.getOption("legend")&&(this.legend_div_.style.display="none");var e=function(t){var e=document.createElement("span");e.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),t.appendChild(e);var n=e.offsetWidth;return t.removeChild(e),n}(this.legend_div_);this.one_em_width_=e;var n=zt.generateLegendHTML(t.dygraph,void 0,void 0,e,null);this.legend_div_.innerHTML=n},zt.prototype.didDrawChart=function(t){this.deselect(t)},zt.prototype.predraw=function(t){if(this.is_generated_div_){t.dygraph.graphDiv.appendChild(this.legend_div_);var e=t.dygraph.getArea();this.legend_div_.style.left=e.x+e.w-this.legend_div_.offsetWidth-1+"px",this.legend_div_.style.top=e.y+"px"}},zt.prototype.destroy=function(){this.legend_div_=null},zt.generateLegendHTML=function(t,e,n,r,i){var a,s={dygraph:t,x:e,series:[]},o={},u=t.getLabels();if(u)for(var l=1;l<u.length;l++){var c=t.getPropertiesForSeries(u[l]),d={dashHTML:qt(t.getOption("strokePattern",u[l]),c.color,r),label:u[l],labelHTML:(a=u[l],a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),isVisible:c.visible,color:c.color};s.series.push(d),o[u[l]]=d}if(void 0!==e){var f=t.optionsViewForAxis_("x"),h=f("valueFormatter");s.xHTML=h.call(t,e,f,u[0],t,i,0);var p=[],g=t.numAxes();for(l=0;l<g;l++)p[l]=t.optionsViewForAxis_("y"+(l?1+l:""));var m=t.getOption("labelsShowZeroValues"),y=t.getHighlightSeries();for(l=0;l<n.length;l++){var v=n[l];if((d=o[v.name]).y=v.yval,0===v.yval&&!m||isNaN(v.canvasy))d.isVisible=!1;else{var _=p[(c=t.getPropertiesForSeries(v.name)).axis-1];N(d,{yHTML:_("valueFormatter").call(t,v.yval,_,v.name,t,i,u.indexOf(v.name))}),v.name==y&&(d.isHighlighted=!0)}}}return(t.getOption("legendFormatter")||zt.defaultFormatter).call(t,s)},zt.defaultFormatter=function(t){var e=t.dygraph;if(!0!==e.getOption("showLabelsOnHighlight"))return"";var n,r=e.getOption("labelsSeparateLines");if(void 0===t.x){if("always"!=e.getOption("legend"))return"";n="";for(var i=0;i<t.series.length;i++)(a=t.series[i]).isVisible&&(""!==n&&(n+=r?"<br/>":" "),n+=`<span style='font-weight: bold; color: ${a.color};'>${a.dashHTML} ${a.labelHTML}</span>`);return n}for(n=t.xHTML+":",i=0;i<t.series.length;i++){var a;(a=t.series[i]).isVisible&&(r&&(n+="<br>"),n+=`<span${a.isHighlighted?' class="highlight"':""}> <b><span style='color: ${a.color};'>${a.labelHTML}</span></b>:&#160;${a.yHTML}</span>`)}return n};var Xt=zt,Kt=function(){this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};Kt.prototype.toString=function(){return"RangeSelector Plugin"},Kt.prototype.activate=function(t){return this.dygraph_=t,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},Kt.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null},Kt.prototype.getOption_=function(t,e){return this.dygraph_.getOption(t,e)},Kt.prototype.setDefaultOption_=function(t,e){this.dygraph_.attrs_[t]=e},Kt.prototype.createInterface_=function(){this.createCanvases_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},Kt.prototype.addToGraph_=function(){var t=this.graphDiv_=this.dygraph_.graphDiv;t.appendChild(this.bgcanvas_),t.appendChild(this.fgcanvas_),t.appendChild(this.leftZoomHandle_),t.appendChild(this.rightZoomHandle_)},Kt.prototype.removeFromGraph_=function(){var t=this.graphDiv_;t.removeChild(this.bgcanvas_),t.removeChild(this.fgcanvas_),t.removeChild(this.leftZoomHandle_),t.removeChild(this.rightZoomHandle_),this.graphDiv_=null},Kt.prototype.reserveSpace_=function(t){this.getOption_("showRangeSelector")&&t.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},Kt.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},Kt.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},Kt.prototype.updateVisibility_=function(){var t=this.getOption_("showRangeSelector");if(t)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var e=this.dygraph_;setTimeout((function(){e.width_=0,e.resize()}),1)}return t},Kt.prototype.resize_=function(){function t(t,e,n,r){var i=r||U(e);t.style.top=n.y+"px",t.style.left=n.x+"px",t.width=n.w*i,t.height=n.h*i,t.style.width=n.w+"px",t.style.height=n.h+"px",1!=i&&e.scale(i,i)}var e=this.dygraph_.layout_.getPlotArea(),n=0;this.dygraph_.getOptionForAxis("drawAxis","x")&&(n=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:e.x,y:e.y+e.h+n+4,w:e.w,h:this.getOption_("rangeSelectorHeight")};var r=this.dygraph_.getNumericOption("pixelRatio");t(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,r),t(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,r)},Kt.prototype.createCanvases_=function(){this.bgcanvas_=j(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=p(this.bgcanvas_),this.fgcanvas_=j(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=p(this.fgcanvas_)},Kt.prototype.createZoomHandles_=function(){var t=new Image;t.className="dygraph-rangesel-zoomhandle",t.style.position="absolute",t.style.zIndex=10,t.style.visibility="hidden",t.style.cursor="col-resize",t.width=9,t.height=16,t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=",this.isMobileDevice_&&(t.width*=2,t.height*=2),this.leftZoomHandle_=t,this.rightZoomHandle_=t.cloneNode(!1)},Kt.prototype.initInteraction_=function(){var t,e,n,r,i,a,s,o,u,l,c,d,f,h,p=this,v=document,_=0,b=null,E=!1,T=!1,S=!this.isMobileDevice_,w=new _t;t=function(t){var e=p.dygraph_.xAxisExtremes(),n=(e[1]-e[0])/p.canvasRect_.w;return[e[0]+(t.leftHandlePos-p.canvasRect_.x)*n,e[0]+(t.rightHandlePos-p.canvasRect_.x)*n]},e=function(t){return y(t),E=!0,_=t.clientX,b=t.target?t.target:t.srcElement,"mousedown"!==t.type&&"dragstart"!==t.type||(g(v,"mousemove",n),g(v,"mouseup",r)),p.fgcanvas_.style.cursor="col-resize",w.cover(),!0},n=function(t){if(!E)return!1;y(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var n,r=p.getZoomHandleStatus_();return b==p.leftZoomHandle_?(n=r.leftHandlePos+e,n=Math.min(n,r.rightHandlePos-b.width-3),n=Math.max(n,p.canvasRect_.x)):(n=r.rightHandlePos+e,n=Math.min(n,p.canvasRect_.x+p.canvasRect_.w),n=Math.max(n,r.leftHandlePos+b.width+3)),b.style.left=n-b.width/2+"px",p.drawInteractiveLayer_(),S&&i(),!0},r=function(t){return!!E&&(E=!1,w.uncover(),m(v,"mousemove",n),m(v,"mouseup",r),p.fgcanvas_.style.cursor="default",S||i(),!0)},i=function(){try{var e=p.getZoomHandleStatus_();if(p.isChangingRange_=!0,e.isZoomed){var n=t(e);p.dygraph_.doZoomXDates_(n[0],n[1])}else p.dygraph_.resetZoom()}finally{p.isChangingRange_=!1}},a=function(t){var e=p.leftZoomHandle_.getBoundingClientRect(),n=e.left+e.width/2;return e=p.rightZoomHandle_.getBoundingClientRect(),t.clientX>n&&t.clientX<e.left+e.width/2},s=function(t){return!(T||!a(t)||!p.getZoomHandleStatus_().isZoomed||(y(t),T=!0,_=t.clientX,"mousedown"===t.type&&(g(v,"mousemove",o),g(v,"mouseup",u)),0))},o=function(t){if(!T)return!1;y(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var n=p.getZoomHandleStatus_(),r=n.leftHandlePos,i=n.rightHandlePos,a=i-r;r+e<=p.canvasRect_.x?i=(r=p.canvasRect_.x)+a:i+e>=p.canvasRect_.x+p.canvasRect_.w?r=(i=p.canvasRect_.x+p.canvasRect_.w)-a:(r+=e,i+=e);var s=p.leftZoomHandle_.width/2;return p.leftZoomHandle_.style.left=r-s+"px",p.rightZoomHandle_.style.left=i-s+"px",p.drawInteractiveLayer_(),S&&l(),!0},u=function(t){return!!T&&(T=!1,m(v,"mousemove",o),m(v,"mouseup",u),S||l(),!0)},l=function(){try{p.isChangingRange_=!0,p.dygraph_.dateWindow_=t(p.getZoomHandleStatus_()),p.dygraph_.drawGraph_(!1)}finally{p.isChangingRange_=!1}},c=function(t){if(!E&&!T){var e=a(t)?"move":"default";e!=p.fgcanvas_.style.cursor&&(p.fgcanvas_.style.cursor=e)}},d=function(t){"touchstart"==t.type&&1==t.targetTouches.length?e(t.targetTouches[0])&&y(t):"touchmove"==t.type&&1==t.targetTouches.length?n(t.targetTouches[0])&&y(t):r(t)},f=function(t){"touchstart"==t.type&&1==t.targetTouches.length?s(t.targetTouches[0])&&y(t):"touchmove"==t.type&&1==t.targetTouches.length?o(t.targetTouches[0])&&y(t):u(t)},h=function(t,e){for(var n=["touchstart","touchend","touchmove","touchcancel"],r=0;r<n.length;r++)p.dygraph_.addAndTrackEvent(t,n[r],e)},this.setDefaultOption_("interactionModel",pt.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var A=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,A,e),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,A,e),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",s),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",c),this.hasTouchInterface_&&(h(this.leftZoomHandle_,d),h(this.rightZoomHandle_,d),h(this.fgcanvas_,f))},Kt.prototype.drawStaticLayer_=function(){var t=this.bgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(e){console.warn(e)}this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth"),t.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor"),t.beginPath(),t.moveTo(.5,.5),t.lineTo(.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,.5),t.stroke()},Kt.prototype.drawMiniPlot_=function(){var t=this.getOption_("rangeSelectorPlotFillColor"),e=this.getOption_("rangeSelectorPlotFillGradientColor"),n=this.getOption_("rangeSelectorPlotStrokeColor");if(t||n){var r=this.getOption_("stepPlot"),i=this.computeCombinedSeriesAndLimits_(),a=i.yMax-i.yMin,s=this.bgcanvas_ctx_,o=this.dygraph_.xAxisExtremes(),u=Math.max(o[1]-o[0],1e-30),l=(this.canvasRect_.w-.5)/u,c=(this.canvasRect_.h-.5)/a,d=this.canvasRect_.w-.5,f=this.canvasRect_.h-.5,h=null,p=null;s.beginPath(),s.moveTo(.5,f);for(var g=0;g<i.data.length;g++){var m=i.data[g],y=null!==m[0]?(m[0]-o[0])*l:NaN,v=null!==m[1]?f-(m[1]-i.yMin)*c:NaN;(r||null===h||Math.round(y)!=Math.round(h))&&(isFinite(y)&&isFinite(v)?(null===h?s.lineTo(y,f):r&&s.lineTo(y,p),s.lineTo(y,v),h=y,p=v):(null!==h&&(r?(s.lineTo(y,p),s.lineTo(y,f)):s.lineTo(h,f)),h=p=null))}if(s.lineTo(d,f),s.closePath(),t){var _=this.bgcanvas_ctx_.createLinearGradient(0,0,0,f);e&&_.addColorStop(0,e),_.addColorStop(1,t),this.bgcanvas_ctx_.fillStyle=_,s.fill()}n&&(this.bgcanvas_ctx_.strokeStyle=n,this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth"),s.stroke())}},Kt.prototype.computeCombinedSeriesAndLimits_=function(){var t,e=this.dygraph_,n=this.getOption_("logscale"),r=e.numColumns(),i=e.getLabels(),a=new Array(r),s=!1,o=e.visibility(),u=[];for(t=1;t<r;t++){var l=this.getOption_("showInRangeSelector",i[t]);u.push(l),null!==l&&(s=!0)}if(s)for(t=1;t<r;t++)a[t]=u[t-1];else for(t=1;t<r;t++)a[t]=o[t-1];var c=[],d=e.dataHandler_,h=e.attributes_;for(t=1;t<e.numColumns();t++)if(a[t]){var p=d.extractSeries(e.rawData_,t,h);e.rollPeriod()>1&&(p=d.rollingAverage(p,e.rollPeriod(),h)),c.push(p)}var g=[];for(t=0;t<c[0].length;t++){for(var m=0,y=0,v=0;v<c.length;v++){var _=c[v][t][1];null===_||isNaN(_)||(y++,m+=_)}g.push([c[0][t][0],m/y])}var b=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(t=0;t<g.length;t++){var T=g[t][1];null!==T&&isFinite(T)&&(!n||T>0)&&(b=Math.min(b,T),E=Math.max(E,T))}if(n)for(E=f(E),E+=.25*E,b=f(b),t=0;t<g.length;t++)g[t][1]=f(g[t][1]);else{var S,w=E-b;E+=S=w<=Number.MIN_VALUE?.25*E:.25*w,b-=S}return{data:g,yMin:b,yMax:E}},Kt.prototype.placeZoomHandles_=function(){var t=this.dygraph_.xAxisExtremes(),e=this.dygraph_.xAxisRange(),n=t[1]-t[0],r=Math.max(0,(e[0]-t[0])/n),i=Math.max(0,(t[1]-e[1])/n),a=this.canvasRect_.x+this.canvasRect_.w*r,s=this.canvasRect_.x+this.canvasRect_.w*(1-i),o=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),u=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=a-u+"px",this.leftZoomHandle_.style.top=o+"px",this.rightZoomHandle_.style.left=s-u+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},Kt.prototype.drawInteractiveLayer_=function(){var t=this.fgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var e=this.canvasRect_.w-1,n=this.canvasRect_.h-1,r=this.getZoomHandleStatus_();if(t.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor"),t.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth"),r.isZoomed){var i=Math.max(1,r.leftHandlePos-this.canvasRect_.x),a=Math.min(e,r.rightHandlePos-this.canvasRect_.x);t.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")",t.fillRect(0,0,i,this.canvasRect_.h),t.fillRect(a,0,this.canvasRect_.w-a,this.canvasRect_.h),t.beginPath(),t.moveTo(1,1),t.lineTo(i,1),t.lineTo(i,n),t.lineTo(a,n),t.lineTo(a,1),t.lineTo(e,1),t.stroke()}else t.beginPath(),t.moveTo(1,1),t.lineTo(1,n),t.lineTo(e,n),t.lineTo(e,1),t.stroke()},Kt.prototype.getZoomHandleStatus_=function(){var t=this.leftZoomHandle_.width/2,e=parseFloat(this.leftZoomHandle_.style.left)+t,n=parseFloat(this.rightZoomHandle_.style.left)+t;return{leftHandlePos:e,rightHandlePos:n,isZoomed:e-1>this.canvasRect_.x||n+1<this.canvasRect_.x+this.canvasRect_.w}};var Wt=Kt,$t=function(t){this.container=t};$t.prototype.draw=function(t,e){this.container.innerHTML="",void 0!==this.date_graph&&this.date_graph.destroy(),this.date_graph=new Jt(this.container,t,e)},$t.prototype.setSelection=function(t){var e=!1;t.length&&(e=t[0].row),this.date_graph.setSelection(e)},$t.prototype.getSelection=function(){var t=[],e=this.date_graph.getSelection();if(e<0)return t;for(var n=this.date_graph.layout_.points,r=0;r<n.length;++r)t.push({row:e,column:r+1});return t};var Qt=$t,Zt=function(t,e,n){this.__init__(t,e,n)};Zt.NAME="Dygraph",Zt.VERSION="2.0.0",Zt.DEFAULT_ROLL_PERIOD=1,Zt.DEFAULT_WIDTH=480,Zt.DEFAULT_HEIGHT=320,Zt.ANIMATION_STEPS=12,Zt.ANIMATION_DURATION=200,Zt.Plotters=dt._Plotters,Zt.addedAnnotationCSS=!1,Zt.prototype.__init__=function(t,e,n){if(this.is_initial_draw_=!0,this.readyFns_=[],null==n&&(n={}),n=Zt.copyUserAttrs_(n),"string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("Constructing dygraph with a non-existent div!");this.maindiv_=t,this.file_=e,this.rollPeriod_=n.rollPeriod||Zt.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=n.fractions||!1,this.dateWindow_=n.dateWindow||null,this.annotations_=[],t.innerHTML="",""===t.style.width&&n.width&&(t.style.width=n.width+"px"),""===t.style.height&&n.height&&(t.style.height=n.height+"px"),""===t.style.height&&0===t.clientHeight&&(t.style.height=Zt.DEFAULT_HEIGHT+"px",""===t.style.width&&(t.style.width=Zt.DEFAULT_WIDTH+"px")),this.width_=t.clientWidth||n.width||0,this.height_=t.clientHeight||n.height||0,n.stackedGraph&&(n.fillGraph=!0),this.user_attrs_={},N(this.user_attrs_,n),this.attrs_={},k(this.attrs_,gt),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new yt(this),this.createInterface_(),this.plugins_=[];for(var r=Zt.PLUGINS.concat(this.getOption("plugins")),i=0;i<r.length;i++){var a,s=r[i],o={plugin:a=void 0!==s.activate?s:new s,events:{},options:{},pluginOptions:{}},u=a.activate(this);for(var l in u)u.hasOwnProperty(l)&&(o.events[l]=u[l]);this.plugins_.push(o)}for(i=0;i<this.plugins_.length;i++){var c=this.plugins_[i];for(var l in c.events)if(c.events.hasOwnProperty(l)){var d=[c.plugin,c.events[l]];l in this.eventListeners_?this.eventListeners_[l].push(d):this.eventListeners_[l]=[d]}}this.createDragInterface_(),this.start_()},Zt.prototype.cascadeEvents_=function(t,e){if(!(t in this.eventListeners_))return!1;var n={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!n.cancelable)throw"Cannot call preventDefault on non-cancelable event.";n.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){n.propagationStopped=!0}};N(n,e);var r=this.eventListeners_[t];if(r)for(var i=r.length-1;i>=0&&(r[i][1].call(r[i][0],n),!n.propagationStopped);i--);return n.defaultPrevented},Zt.prototype.getPluginInstance_=function(t){for(var e=0;e<this.plugins_.length;e++){var n=this.plugins_[e];if(n.plugin instanceof t)return n.plugin}return null},Zt.prototype.isZoomed=function(t){const e=!!this.dateWindow_;if("x"===t)return e;const n=this.axes_.map(t=>!!t.valueRange).indexOf(!0)>=0;if(null==t)return e||n;if("y"===t)return n;throw new Error(`axis parameter is [${t}] must be null, 'x' or 'y'.`)},Zt.prototype.toString=function(){var t=this.maindiv_;return"[Dygraph "+(t&&t.id?t.id:t)+"]"},Zt.prototype.attr_=function(t,e){return e?this.attributes_.getForSeries(t,e):this.attributes_.get(t)},Zt.prototype.getOption=function(t,e){return this.attr_(t,e)},Zt.prototype.getNumericOption=function(t,e){return this.getOption(t,e)},Zt.prototype.getStringOption=function(t,e){return this.getOption(t,e)},Zt.prototype.getBooleanOption=function(t,e){return this.getOption(t,e)},Zt.prototype.getFunctionOption=function(t,e){return this.getOption(t,e)},Zt.prototype.getOptionForAxis=function(t,e){return this.attributes_.getForAxis(t,e)},Zt.prototype.optionsViewForAxis_=function(t){var e=this;return function(n){var r=e.user_attrs_.axes;return r&&r[t]&&r[t].hasOwnProperty(n)?r[t][n]:("x"!==t||"logscale"!==n)&&(void 0!==e.user_attrs_[n]?e.user_attrs_[n]:(r=e.attrs_.axes)&&r[t]&&r[t].hasOwnProperty(n)?r[t][n]:"y"==t&&e.axes_[0].hasOwnProperty(n)?e.axes_[0][n]:"y2"==t&&e.axes_[1].hasOwnProperty(n)?e.axes_[1][n]:e.attr_(n))}},Zt.prototype.rollPeriod=function(){return this.rollPeriod_},Zt.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Zt.prototype.xAxisExtremes=function(){var t=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-t,1+t];var e=this.rawData_[0][0],n=this.rawData_[this.rawData_.length-1][0];if(t){var r=n-e;e-=r*t,n+=r*t}return[e,n]},Zt.prototype.yAxisExtremes=function(){const t=this.gatherDatasets_(this.rolledSeries_,null),{extremes:e}=t,n=this.axes_;this.computeYAxisRanges_(e);const r=this.axes_;return this.axes_=n,r.map(t=>t.extremeRange)},Zt.prototype.yAxisRange=function(t){if(void 0===t&&(t=0),t<0||t>=this.axes_.length)return null;var e=this.axes_[t];return[e.computedValueRange[0],e.computedValueRange[1]]},Zt.prototype.yAxisRanges=function(){for(var t=[],e=0;e<this.axes_.length;e++)t.push(this.yAxisRange(e));return t},Zt.prototype.toDomCoords=function(t,e,n){return[this.toDomXCoord(t),this.toDomYCoord(e,n)]},Zt.prototype.toDomXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,n=this.xAxisRange();return e.x+(t-n[0])/(n[1]-n[0])*e.w},Zt.prototype.toDomYCoord=function(t,e){var n=this.toPercentYCoord(t,e);if(null===n)return null;var r=this.plotter_.area;return r.y+n*r.h},Zt.prototype.toDataCoords=function(t,e,n){return[this.toDataXCoord(t),this.toDataYCoord(e,n)]},Zt.prototype.toDataXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,n=this.xAxisRange();return this.attributes_.getForAxis("logscale","x")?h(n[0],n[1],(t-e.x)/e.w):n[0]+(t-e.x)/e.w*(n[1]-n[0])},Zt.prototype.toDataYCoord=function(t,e){if(null===t)return null;var n=this.plotter_.area,r=this.yAxisRange(e);return void 0===e&&(e=0),this.attributes_.getForAxis("logscale",e)?h(r[1],r[0],(t-n.y)/n.h):r[0]+(n.y+n.h-t)/n.h*(r[1]-r[0])},Zt.prototype.toPercentYCoord=function(t,e){if(null===t)return null;void 0===e&&(e=0);var n,r=this.yAxisRange(e);if(this.attributes_.getForAxis("logscale",e)){var i=f(r[0]),a=f(r[1]);n=(a-f(t))/(a-i)}else n=(r[1]-t)/(r[1]-r[0]);return n},Zt.prototype.toPercentXCoord=function(t){if(null===t)return null;var e,n=this.xAxisRange();if(!0===this.attributes_.getForAxis("logscale","x")){var r=f(n[0]),i=f(n[1]);e=(f(t)-r)/(i-r)}else e=(t-n[0])/(n[1]-n[0]);return e},Zt.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},Zt.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},Zt.prototype.getValue=function(t,e){return t<0||t>this.rawData_.length||e<0||e>this.rawData_[t].length?null:this.rawData_[t][e]},Zt.prototype.createInterface_=function(){var t=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",this.graphDiv.style.position="relative",t.appendChild(this.graphDiv),this.canvas_=j(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=p(this.canvas_),this.hidden_ctx_=p(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new lt(this);var e=this;this.mouseMoveHandler_=function(t){e.mouseMove_(t)},this.mouseOutHandler_=function(t){var n=t.relatedTarget||t.toElement;K(t.target||t.fromElement,e.graphDiv)&&!K(n,e.graphDiv)&&e.mouseOut_(t)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(t){e.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},Zt.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px";var t=this.getNumericOption("pixelRatio"),e=t||U(this.canvas_ctx_);this.canvas_.width=this.width_*e,this.canvas_.height=this.height_*e,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",1!==e&&this.canvas_ctx_.scale(e,e);var n=t||U(this.hidden_ctx_);this.hidden_.width=this.width_*n,this.hidden_.height=this.height_*n,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px",1!==n&&this.hidden_ctx_.scale(n,n)},Zt.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var t=this.plugins_.length-1;t>=0;t--){var e=this.plugins_.pop();e.plugin.destroy&&e.plugin.destroy()}var n=function(t){for(;t.hasChildNodes();)n(t.firstChild),t.removeChild(t.firstChild)};this.removeTrackedEvents_(),m(window,"mouseout",this.mouseOutHandler_),m(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),m(window,"resize",this.resizeHandler_),this.resizeHandler_=null,n(this.maindiv_);var r=function(t){for(var e in t)"object"==typeof t[e]&&(t[e]=null)};r(this.layout_),r(this.plotter_),r(this)},Zt.prototype.createPlotKitCanvas_=function(t){var e=j();return e.style.position="absolute",e.style.top=t.style.top,e.style.left=t.style.left,e.width=this.width_,e.height=this.height_,e.style.width=this.width_+"px",e.style.height=this.height_+"px",e},Zt.prototype.createMouseEventElement_=function(){return this.canvas_},Zt.prototype.setColors_=function(){var t=this.getLabels(),e=t.length-1;this.colors_=[],this.colorsMap_={};for(var n=this.getNumericOption("colorSaturation")||1,r=this.getNumericOption("colorValue")||.5,i=Math.ceil(e/2),a=this.getOption("colors"),s=this.visibility(),o=0;o<e;o++)if(s[o]){var u=t[o+1],l=this.attributes_.getForSeries("color",u);l||(l=a?a[o%a.length]:v(1*(o%2?i+(o+1)/2:Math.ceil((o+1)/2))/(1+e),n,r)),this.colors_.push(l),this.colorsMap_[u]=l}},Zt.prototype.getColors=function(){return this.colors_},Zt.prototype.getPropertiesForSeries=function(t){for(var e=-1,n=this.getLabels(),r=1;r<n.length;r++)if(n[r]==t){e=r;break}return-1==e?null:{name:t,column:e,visible:this.visibility()[e-1],color:this.colorsMap_[t],axis:1+this.attributes_.axisForSeries(t)}},Zt.prototype.createRollInterface_=function(){var t=this.roller_;t||(this.roller_=t=document.createElement("input"),t.type="text",t.style.display="none",t.className="dygraph-roller",this.graphDiv.appendChild(t));var e=this.getBooleanOption("showRoller")?"block":"none",n=this.getArea(),r={top:n.y+n.h-25+"px",left:n.x+1+"px",display:e};t.size="2",t.value=this.rollPeriod_,N(t.style,r),t.onchange=()=>this.adjustRoll(t.value)},Zt.prototype.createDragInterface_=function(){var t={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new _t,initializeMouseDown:function(t,e,n){t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0);var r=_(e.canvas_);n.px=r.x,n.py=r.y,n.dragStartX=T(t,n),n.dragStartY=S(t,n),n.cancelNextDblclick=!1,n.tarp.cover()},destroy:function(){if((this.isZooming||this.isPanning)&&(this.isZooming=!1,this.dragStartX=null,this.dragStartY=null),this.isPanning){this.isPanning=!1,this.draggingDate=null,this.dateRange=null;for(var t=0;t<n.axes_.length;t++)delete n.axes_[t].draggingValue,delete n.axes_[t].dragValueRange}this.tarp.uncover()}},e=this.getOption("interactionModel"),n=this,r=function(e){return function(r){e(r,n,t)}};for(var i in e)e.hasOwnProperty(i)&&this.addAndTrackEvent(this.mouseEventElement_,i,r(e[i]));e.willDestroyContextMyself||this.addAndTrackEvent(document,"mouseup",(function(e){t.destroy()}))},Zt.prototype.drawZoomRect_=function(t,e,n,r,i,a,s,o){var u=this.canvas_ctx_;1==a?u.clearRect(Math.min(e,s),this.layout_.getPlotArea().y,Math.abs(e-s),this.layout_.getPlotArea().h):2==a&&u.clearRect(this.layout_.getPlotArea().x,Math.min(r,o),this.layout_.getPlotArea().w,Math.abs(r-o)),1==t?n&&e&&(u.fillStyle="rgba(128,128,128,0.33)",u.fillRect(Math.min(e,n),this.layout_.getPlotArea().y,Math.abs(n-e),this.layout_.getPlotArea().h)):2==t&&i&&r&&(u.fillStyle="rgba(128,128,128,0.33)",u.fillRect(this.layout_.getPlotArea().x,Math.min(r,i),this.layout_.getPlotArea().w,Math.abs(i-r)))},Zt.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},Zt.prototype.doZoomX_=function(t,e){this.currentZoomRectArgs_=null;var n=this.toDataXCoord(t),r=this.toDataXCoord(e);this.doZoomXDates_(n,r)},Zt.prototype.doZoomXDates_=function(t,e){var n=this.xAxisRange(),r=[t,e];const i=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(n,r,null,null,()=>{i&&i.call(this,t,e,this.yAxisRanges())})},Zt.prototype.doZoomY_=function(t,e){this.currentZoomRectArgs_=null;for(var n=this.yAxisRanges(),r=[],i=0;i<this.axes_.length;i++){var a=this.toDataYCoord(t,i),s=this.toDataYCoord(e,i);r.push([s,a])}const o=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,n,r,()=>{if(o){const[t,e]=this.xAxisRange();o.call(this,t,e,this.yAxisRanges())}})},Zt.zoomAnimationFunction=function(t,e){return(1-Math.pow(1.5,-t))/(1-Math.pow(1.5,-e))},Zt.prototype.resetZoom=function(){const t=this.isZoomed("x"),e=this.isZoomed("y"),n=t||e;if(this.clearSelection(),!n)return;const[r,i]=this.xAxisExtremes(),a=this.getBooleanOption("animatedZooms"),s=this.getFunctionOption("zoomCallback");if(!a)return this.dateWindow_=null,this.axes_.forEach(t=>{t.valueRange&&delete t.valueRange}),this.drawGraph_(),void(s&&s.call(this,r,i,this.yAxisRanges()));var o=null,u=null,l=null,c=null;t&&(o=this.xAxisRange(),u=[r,i]),e&&(l=this.yAxisRanges(),c=this.yAxisExtremes()),this.doAnimatedZoom(o,u,l,c,()=>{this.dateWindow_=null,this.axes_.forEach(t=>{t.valueRange&&delete t.valueRange}),s&&s.call(this,r,i,this.yAxisRanges())})},Zt.prototype.doAnimatedZoom=function(t,e,n,r,i){var a,s,o=this.getBooleanOption("animatedZooms")?Zt.ANIMATION_STEPS:1,u=[],l=[];if(null!==t&&null!==e)for(a=1;a<=o;a++)s=Zt.zoomAnimationFunction(a,o),u[a-1]=[t[0]*(1-s)+s*e[0],t[1]*(1-s)+s*e[1]];if(null!==n&&null!==r)for(a=1;a<=o;a++){s=Zt.zoomAnimationFunction(a,o);for(var c=[],d=0;d<this.axes_.length;d++)c.push([n[d][0]*(1-s)+s*r[d][0],n[d][1]*(1-s)+s*r[d][1]]);l[a-1]=c}Y(t=>{if(l.length)for(var e=0;e<this.axes_.length;e++){var n=l[t][e];this.axes_[e].valueRange=[n[0],n[1]]}u.length&&(this.dateWindow_=u[t]),this.drawGraph_()},o,Zt.ANIMATION_DURATION/o,i)},Zt.prototype.getArea=function(){return this.plotter_.area},Zt.prototype.eventToDomCoords=function(t){if(t.offsetX&&t.offsetY)return[t.offsetX,t.offsetY];var e=_(this.mouseEventElement_);return[b(t)-e.x,E(t)-e.y]},Zt.prototype.findClosestRow=function(t){for(var e=1/0,n=-1,r=this.layout_.points,i=0;i<r.length;i++)for(var a=r[i],s=a.length,o=0;o<s;o++){var u=a[o];if(w(u,!0)){var l=Math.abs(u.canvasx-t);l<e&&(e=l,n=u.idx)}}return n},Zt.prototype.findClosestPoint=function(t,e){for(var n,r,i,a,s,o,u,l=1/0,c=this.layout_.points.length-1;c>=0;--c)for(var d=this.layout_.points[c],f=0;f<d.length;++f)w(a=d[f])&&(n=(r=a.canvasx-t)*r+(i=a.canvasy-e)*i)<l&&(l=n,s=a,o=c,u=a.idx);return{row:u,seriesName:this.layout_.setNames[o],point:s}},Zt.prototype.findStackedPoint=function(t,e){for(var n,r,i=this.findClosestRow(t),a=0;a<this.layout_.points.length;++a){var s=i-this.getLeftBoundary_(a),o=this.layout_.points[a];if(!(s>=o.length)){var u=o[s];if(w(u)){var l=u.canvasy;if(t>u.canvasx&&s+1<o.length){var c=o[s+1];w(c)&&(d=c.canvasx-u.canvasx)>0&&(l+=(t-u.canvasx)/d*(c.canvasy-u.canvasy))}else if(t<u.canvasx&&s>0){var d,f=o[s-1];w(f)&&(d=u.canvasx-f.canvasx)>0&&(l+=(u.canvasx-t)/d*(f.canvasy-u.canvasy))}(0===a||l<e)&&(n=u,r=a)}}}return{row:i,seriesName:this.layout_.setNames[r],point:n}},Zt.prototype.mouseMove_=function(t){if(null!=this.layout_.points){var e=this.eventToDomCoords(t),n=e[0],r=e[1],i=!1;if(this.getOption("highlightSeriesOpts")&&!this.isSeriesLocked()){var a;a=this.getBooleanOption("stackedGraph")?this.findStackedPoint(n,r):this.findClosestPoint(n,r),i=this.setSelection(a.row,a.seriesName)}else{var s=this.findClosestRow(n);i=this.setSelection(s)}var o=this.getFunctionOption("highlightCallback");o&&i&&o.call(this,t,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},Zt.prototype.getLeftBoundary_=function(t){if(this.boundaryIds_[t])return this.boundaryIds_[t][0];for(var e=0;e<this.boundaryIds_.length;e++)if(void 0!==this.boundaryIds_[e])return this.boundaryIds_[e][0];return 0},Zt.prototype.animateSelection_=function(t){void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var e=this.fadeLevel,n=t<0?e:10-e;if(n<=0)this.fadeLevel&&this.updateSelection_(1);else{var r=++this.animateId,i=this;Y((function(e){i.animateId==r&&(i.fadeLevel+=t,0===i.fadeLevel?i.clearSelection():i.updateSelection_(i.fadeLevel/10))}),n,30,(function(){0!==i.fadeLevel&&t<0&&(i.fadeLevel=0,i.clearSelection())}))}},Zt.prototype.updateSelection_=function(t){var e;this.cascadeEvents_("select",{selectedRow:-1===this.lastRow_?void 0:this.lastRow_,selectedX:-1===this.lastx_?void 0:this.lastx_,selectedPoints:this.selPoints_});var n=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){n.clearRect(0,0,this.width_,this.height_);var r=1-this.getNumericOption("highlightSeriesBackgroundAlpha"),i=Z(this.getOption("highlightSeriesBackgroundColor"));if(r){if(void 0===t)return void this.animateSelection_(1);n.fillStyle="rgba("+i.r+","+i.g+","+i.b+","+(r*=t)+")",n.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,n)}else if(this.previousVerticalX_>=0){var a=0,s=this.attr_("labels");for(e=1;e<s.length;e++){var o=this.getNumericOption("highlightCircleSize",s[e]);o>a&&(a=o)}n.clearRect(this.previousVerticalX_-a-1,0,2*a+2,this.height_)}if(this.selPoints_.length>0){var u=this.selPoints_[0].canvasx;for(n.save(),e=0;e<this.selPoints_.length;e++){var l=this.selPoints_[e];if(!isNaN(l.canvasy)){var c=this.getNumericOption("highlightCircleSize",l.name),d=this.getFunctionOption("drawHighlightPointCallback",l.name),f=this.plotter_.colors[l.name];d||(d=q.DEFAULT),n.lineWidth=this.getNumericOption("strokeWidth",l.name),n.strokeStyle=f,n.fillStyle=f,d.call(this,this,l.name,n,u,l.canvasy,f,c,l.idx)}}n.restore(),this.previousVerticalX_=u}},Zt.prototype.setSelection=function(t,e,n){this.selPoints_=[];var r=!1;if(!1!==t&&t>=0){t!=this.lastRow_&&(r=!0),this.lastRow_=t;for(var i=0;i<this.layout_.points.length;++i){var a=this.layout_.points[i],s=t-this.getLeftBoundary_(i);if(s>=0&&s<a.length&&a[s].idx==t)null!==(u=a[s]).yval&&this.selPoints_.push(u);else for(var o=0;o<a.length;++o){var u;if((u=a[o]).idx==t){null!==u.yval&&this.selPoints_.push(u);break}}}}else this.lastRow_>=0&&(r=!0),this.lastRow_=-1;return this.lastx_=this.selPoints_.length?this.selPoints_[0].xval:-1,void 0!==e&&(this.highlightSet_!==e&&(r=!0),this.highlightSet_=e),void 0!==n&&(this.lockedSet_=n),r&&this.updateSelection_(void 0),r},Zt.prototype.mouseOut_=function(t){this.getFunctionOption("unhighlightCallback")&&this.getFunctionOption("unhighlightCallback").call(this,t),this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},Zt.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null)},Zt.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var t=0;t<this.layout_.points.length;t++)for(var e=this.layout_.points[t],n=0;n<e.length;n++)if(e[n].x==this.selPoints_[0].x)return e[n].idx;return-1},Zt.prototype.getHighlightSeries=function(){return this.highlightSet_},Zt.prototype.isSeriesLocked=function(){return this.lockedSet_},Zt.prototype.loadedEvent_=function(t){this.rawData_=this.parseCSV_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_()},Zt.prototype.addXTicks_=function(){var t;t=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var e=this.optionsViewForAxis_("x"),n=e("ticker")(t[0],t[1],this.plotter_.area.w,e,this);this.layout_.setXTicks(n)},Zt.prototype.getHandlerClass_=function(){return this.attr_("dataHandler")?this.attr_("dataHandler"):this.fractions_?this.getBooleanOption("errorBars")?Lt:Pt:this.getBooleanOption("customBars")?Rt:this.getBooleanOption("errorBars")?Dt:wt},Zt.prototype.predraw_=function(){var t=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new dt(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var e=1;e<this.numColumns();e++){var n=this.dataHandler_.extractSeries(this.rawData_,e,this.attributes_);this.rollPeriod_>1&&(n=this.dataHandler_.rollingAverage(n,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(n)}this.drawGraph_();var r=new Date;this.drawingTimeMs_=r-t},Zt.PointType=void 0,Zt.stackPoints_=function(t,e,n,r){for(var i=null,a=null,s=null,o=-1,u=function(e){if(!(o>=e))for(var n=e;n<t.length;++n)if(s=null,!isNaN(t[n].yval)&&null!==t[n].yval){o=n,s=t[n];break}},l=0;l<t.length;++l){var c=t[l],d=c.xval;void 0===e[d]&&(e[d]=0);var f=c.yval;isNaN(f)||null===f?"none"==r?f=0:(u(l),f=a&&s&&"none"!=r?a.yval+(d-a.xval)/(s.xval-a.xval)*(s.yval-a.yval):a&&"all"==r?a.yval:s&&"all"==r?s.yval:0):a=c;var h=e[d];i!=d&&(e[d]=h+=f),i=d,c.yval_stacked=h,h>n[1]&&(n[1]=h),h<n[0]&&(n[0]=h)}},Zt.prototype.gatherDatasets_=function(t,e){var n,r,i,a,s,o,u=[],l=[],c=[],d={};for(n=t.length-1;n>=1;n--)if(this.visibility()[n-1]){if(e){o=t[n];var f=e[0],h=e[1];for(i=null,a=null,r=0;r<o.length;r++)o[r][0]>=f&&null===i&&(i=r),o[r][0]<=h&&(a=r);null===i&&(i=0);for(var p=i,g=!0;g&&p>0;)g=null===o[--p][1];null===a&&(a=o.length-1);var m=a;for(g=!0;g&&m<o.length-1;)g=null===o[++m][1];p!==i&&(i=p),m!==a&&(a=m),u[n-1]=[i,a],o=o.slice(i,a+1)}else u[n-1]=[0,(o=t[n]).length-1];var y=this.attr_("labels")[n],v=this.dataHandler_.getExtremeYValues(o,e,this.getBooleanOption("stepPlot",y)),_=this.dataHandler_.seriesToPoints(o,y,u[n-1][0]);this.getBooleanOption("stackedGraph")&&(void 0===c[s=this.attributes_.axisForSeries(y)]&&(c[s]=[]),Zt.stackPoints_(_,c[s],v,this.getBooleanOption("stackedGraphNaNFill"))),d[y]=v,l[n]=_}return{points:l,extremes:d,boundaryIds:u}},Zt.prototype.drawGraph_=function(){var t=new Date,e=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var n=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),r=n.points,i=n.extremes;this.boundaryIds_=n.boundaryIds,this.setIndexByName_={};for(var a=this.attr_("labels"),s=0,o=1;o<r.length;o++)this.visibility()[o-1]&&(this.layout_.addDataset(a[o],r[o]),this.datasetIndex_[o]=s++);for(o=0;o<a.length;o++)this.setIndexByName_[a[o]]=o;if(this.computeYAxisRanges_(i),this.layout_.setYAxes(this.axes_),this.addXTicks_(),this.layout_.evaluate(),this.renderGraph_(e),this.getStringOption("timingName")){var u=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(u-t)+"ms")}},Zt.prototype.renderGraph_=function(t){this.cascadeEvents_("clearChart"),this.plotter_.clear();const e=this.getFunctionOption("underlayCallback");e&&e.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var n={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",n),this.plotter_.render(),this.cascadeEvents_("didDrawChart",n),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);const r=this.getFunctionOption("drawCallback");if(null!==r&&r.call(this,this,t),t)for(this.readyFired_=!0;this.readyFns_.length>0;)this.readyFns_.pop()(this)},Zt.prototype.computeYAxes_=function(){var t,e,n;for(this.axes_=[],t=0;t<this.attributes_.numAxes();t++)N(e={g:this},this.attributes_.axisOptions(t)),this.axes_[t]=e;for(t=0;t<this.axes_.length;t++)if(0===t)(n=(e=this.optionsViewForAxis_("y"+(t?"2":"")))("valueRange"))&&(this.axes_[t].valueRange=n);else{var r=this.user_attrs_.axes;r&&r.y2&&(n=r.y2.valueRange)&&(this.axes_[t].valueRange=n)}},Zt.prototype.numAxes=function(){return this.attributes_.numAxes()},Zt.prototype.axisPropertiesForSeries=function(t){return this.axes_[this.attributes_.axisForSeries(t)]},Zt.prototype.computeYAxisRanges_=function(t){for(var e,n,r,i,a,s=function(t){return isNaN(parseFloat(t))},o=this.attributes_.numAxes(),u=0;u<o;u++){var l=this.axes_[u],c=this.attributes_.getForAxis("logscale",u),d=this.attributes_.getForAxis("includeZero",u),f=this.attributes_.getForAxis("independentTicks",u);r=this.attributes_.seriesForAxis(u),e=!0,i=.1;const o=this.getNumericOption("yRangePad");if(null!==o&&(e=!1,i=o/this.plotter_.area.h),0===r.length)l.extremeRange=[0,1];else{for(var p,g,m=1/0,y=-1/0,v=0;v<r.length;v++)t.hasOwnProperty(r[v])&&(null!==(p=t[r[v]][0])&&(m=Math.min(p,m)),null!==(g=t[r[v]][1])&&(y=Math.max(g,y)));d&&!c&&(m>0&&(m=0),y<0&&(y=0)),m==1/0&&(m=0),y==-1/0&&(y=1),0==(n=y-m)&&(0!==y?n=Math.abs(y):(y=1,n=1));var _=y,b=m;e&&(c?(_=y+i*n,b=m):((b=m-i*n)<0&&m>=0&&(b=0),(_=y+i*n)>0&&y<=0&&(_=0))),l.extremeRange=[b,_]}if(l.valueRange){var E=s(l.valueRange[0])?l.extremeRange[0]:l.valueRange[0],T=s(l.valueRange[1])?l.extremeRange[1]:l.valueRange[1];l.computedValueRange=[E,T]}else l.computedValueRange=l.extremeRange;if(!e)if(c){var S=(i-1)/(2*i-1);l.computedValueRange[0]=h(E=l.computedValueRange[0],T=l.computedValueRange[1],i/(2*i-1)),l.computedValueRange[1]=h(E,T,S)}else l.computedValueRange[0]=(E=l.computedValueRange[0])-(n=(T=l.computedValueRange[1])-E)*i,l.computedValueRange[1]=T+n*i;if(f){l.independentTicks=f;var w=(A=this.optionsViewForAxis_("y"+(u?"2":"")))("ticker");l.ticks=w(l.computedValueRange[0],l.computedValueRange[1],this.plotter_.area.h,A,this),a||(a=l)}}if(void 0===a)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(u=0;u<o;u++)if(!(l=this.axes_[u]).independentTicks){w=(A=this.optionsViewForAxis_("y"+(u?"2":"")))("ticker");for(var A,x=a.ticks,C=a.computedValueRange[1]-a.computedValueRange[0],D=l.computedValueRange[1]-l.computedValueRange[0],I=[],R=0;R<x.length;R++)I.push(l.computedValueRange[0]+(x[R].v-a.computedValueRange[0])/C*D);l.ticks=w(l.computedValueRange[0],l.computedValueRange[1],this.plotter_.area.h,A,this,I)}},Zt.prototype.detectTypeFromString_=function(t){var e=!1,n=t.indexOf("-");(n>0&&"e"!=t[n-1]&&"E"!=t[n-1]||t.indexOf("/")>=0||isNaN(parseFloat(t))||8==t.length&&t>"19700101"&&t<"20371231")&&(e=!0),this.setXAxisOptions_(e)},Zt.prototype.setXAxisOptions_=function(t){t?(this.attrs_.xValueParser=M,this.attrs_.axes.x.valueFormatter=ot,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st):(this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Zt.prototype.parseCSV_=function(t){var e,n,r=[],i=X(t),a=t.split(i||"\n"),s=this.getStringOption("delimiter");-1==a[0].indexOf(s)&&a[0].indexOf("\t")>=0&&(s="\t");var o=0;"labels"in this.user_attrs_||(o=1,this.attrs_.labels=a[0].split(s),this.attributes_.reparseSeries());for(var u,l=!1,c=this.attr_("labels").length,d=!1,f=o;f<a.length;f++){var h=a[f];if(0!==h.length&&"#"!=h[0]){var p=h.split(s);if(!(p.length<2)){var g=[];if(l||(this.detectTypeFromString_(p[0]),u=this.getFunctionOption("xValueParser"),l=!0),g[0]=u(p[0],this),this.fractions_)for(n=1;n<p.length;n++)2!=(e=p[n].split("/")).length?(console.error('Expected fractional "num/den" values in CSV data but found a value \''+p[n]+"' on line "+(1+f)+" ('"+h+"') which is not of this form."),g[n]=[0,0]):g[n]=[J(e[0],f,h),J(e[1],f,h)];else if(this.getBooleanOption("errorBars"))for(p.length%2!=1&&console.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+f)+" has an odd number of values ("+(p.length-1)+"): '"+h+"'"),n=1;n<p.length;n+=2)g[(n+1)/2]=[J(p[n],f,h),J(p[n+1],f,h)];else if(this.getBooleanOption("customBars"))for(n=1;n<p.length;n++){var m=p[n];/^ *$/.test(m)?g[n]=[null,null,null]:3==(e=m.split(";")).length?g[n]=[J(e[0],f,h),J(e[1],f,h),J(e[2],f,h)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+m+'" on line '+(1+f))}else for(n=1;n<p.length;n++)g[n]=J(p[n],f,h);if(r.length>0&&g[0]<r[r.length-1][0]&&(d=!0),g.length!=c&&console.error("Number of columns in line "+f+" ("+g.length+") does not agree with number of labels ("+c+") "+h),0===f&&this.attr_("labels")){var y=!0;for(n=0;y&&n<g.length;n++)g[n]&&(y=!1);if(y){console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+h+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}r.push(g)}}}return d&&(console.warn("CSV is out of order; order it correctly to speed loading."),r.sort((function(t,e){return t[0]-e[0]}))),r},Zt.prototype.parseArray_=function(t){if(0===t.length)return console.error("Can't plot empty data set"),null;if(0===t[0].length)return console.error("Data set cannot contain an empty row"),null;var e;if(function(t){const e=t[0],n=e[0];if("number"!=typeof n&&!B(n))throw new Error(`Expected number or date but got ${typeof n}: ${n}.`);for(let r=1;r<e.length;r++){const t=e[r];if(null!=t&&"number"!=typeof t&&!F(t))throw new Error(`Expected number or array but got ${typeof t}: ${t}.`)}}(t),null===this.attr_("labels")){for(console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],e=1;e<t[0].length;e++)this.attrs_.labels.push("Y"+e);this.attributes_.reparseSeries()}else{var n=this.attr_("labels");if(n.length!=t[0].length)return console.error("Mismatch between number of labels ("+n+") and number of columns in array ("+t[0].length+")"),null}if(B(t[0][0])){this.attrs_.axes.x.valueFormatter=ot,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st;var a=function t(e){for(var n=[],r=0;r<e.length;r++)F(e[r])?n.push(t(e[r])):n.push(e[r]);return n}(t);for(e=0;e<t.length;e++){if(0===a[e].length)return console.error("Row "+(1+e)+" of data is empty"),null;if(null===a[e][0]||"function"!=typeof a[e][0].getTime||isNaN(a[e][0].getTime()))return console.error("x value in row "+(1+e)+" is not a Date"),null;a[e][0]=a[e][0].getTime()}return a}return this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=it,t},Zt.prototype.parseDataTable_=function(t){var e=function(t){var e=String.fromCharCode(65+t%26);for(t=Math.floor(t/26);t>0;)e=String.fromCharCode(65+(t-1)%26)+e.toLowerCase(),t=Math.floor((t-1)/26);return e},n=t.getNumberOfColumns(),a=t.getNumberOfRows(),s=t.getColumnType(0);if("date"==s||"datetime"==s)this.attrs_.xValueParser=M,this.attrs_.axes.x.valueFormatter=ot,this.attrs_.axes.x.ticker=i,this.attrs_.axes.x.axisLabelFormatter=st;else{if("number"!=s)throw new Error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+s+"')");this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=r,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var o,u,l=[],c={},d=!1;for(o=1;o<n;o++){var f=t.getColumnType(o);if("number"==f)l.push(o);else{if("string"!=f||!this.getBooleanOption("displayAnnotations"))throw new Error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");var h=l[l.length-1];c.hasOwnProperty(h)?c[h].push(o):c[h]=[o],d=!0}}var p=[t.getColumnLabel(0)];for(o=0;o<l.length;o++)p.push(t.getColumnLabel(l[o])),this.getBooleanOption("errorBars")&&(o+=1);this.attrs_.labels=p,n=p.length;var g=[],m=!1,y=[];for(o=0;o<a;o++){var v=[];if(void 0!==t.getValue(o,0)&&null!==t.getValue(o,0)){if(v.push("date"==s||"datetime"==s?t.getValue(o,0).getTime():t.getValue(o,0)),this.getBooleanOption("errorBars"))for(u=0;u<n-1;u++)v.push([t.getValue(o,1+2*u),t.getValue(o,2+2*u)]);else{for(u=0;u<l.length;u++){var _=l[u];if(v.push(t.getValue(o,_)),d&&c.hasOwnProperty(_)&&null!==t.getValue(o,c[_][0])){var b={};b.series=t.getColumnLabel(_),b.xval=v[0],b.shortText=e(y.length),b.text="";for(var E=0;E<c[_].length;E++)E&&(b.text+="\n"),b.text+=t.getValue(o,c[_][E]);y.push(b)}}for(u=0;u<v.length;u++)isFinite(v[u])||(v[u]=null)}g.length>0&&v[0]<g[g.length-1][0]&&(m=!0),g.push(v)}else console.warn("Ignoring row "+o+" of DataTable because of undefined or null first column.")}m&&(console.warn("DataTable is out of order; order it correctly to speed loading."),g.sort((function(t,e){return t[0]-e[0]}))),this.rawData_=g,y.length>0&&this.setAnnotations(y,!0),this.attributes_.reparseSeries()},Zt.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})},Zt.prototype.start_=function(){var t=this.file_;if("function"==typeof t&&(t=t()),F(t))this.rawData_=this.parseArray_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("object"==typeof t&&"function"==typeof t.getColumnRange)this.parseDataTable_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("string"==typeof t)if(X(t))this.loadedEvent_(t);else{var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){4==e.readyState&&(200!==e.status&&0!==e.status||n.loadedEvent_(e.responseText))},e.open("GET",t,!0),e.send(null)}else console.error("Unknown data format: "+typeof t)},Zt.prototype.updateOptions=function(t,e){void 0===e&&(e=!1);var n=t.file,r=Zt.copyUserAttrs_(t);"rollPeriod"in r&&(this.rollPeriod_=r.rollPeriod),"dateWindow"in r&&(this.dateWindow_=r.dateWindow);var i=function(t,e){var n={};if(t)for(var r=1;r<t.length;r++)n[t[r]]=!0;var i=function(t){for(var e in t)if(t.hasOwnProperty(e)&&!z[e])return!0;return!1};for(var a in e)if(e.hasOwnProperty(a))if("highlightSeriesOpts"==a||n[a]&&!e.series){if(i(e[a]))return!0}else if("series"==a||"axes"==a){var s=e[a];for(var o in s)if(s.hasOwnProperty(o)&&i(s[o]))return!0}else if(!z[a])return!0;return!1}(this.attr_("labels"),r);k(this.user_attrs_,r),this.attributes_.reparseSeries(),n?(this.cascadeEvents_("dataWillUpdate",{}),this.file_=n,e||this.start_()):e||(i?this.predraw_():this.renderGraph_(!1))},Zt.copyUserAttrs_=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&"file"!=n&&t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Zt.prototype.resize=function(t,e){if(!this.resize_lock){this.resize_lock=!0,null===t!=(null===e)&&(console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),t=e=null);var n=this.width_,r=this.height_;t?(this.maindiv_.style.width=t+"px",this.maindiv_.style.height=e+"px",this.width_=t,this.height_=e):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),n==this.width_&&r==this.height_||(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},Zt.prototype.adjustRoll=function(t){this.rollPeriod_=t,this.predraw_()},Zt.prototype.visibility=function(){for(this.getOption("visibility")||(this.attrs_.visibility=[]);this.getOption("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption("visibility")},Zt.prototype.setVisibility=function(t,e){var n=this.visibility(),r=!1;if(Array.isArray(t)||(null!==t&&"object"==typeof t?r=!0:t=[t]),r)for(var i in t)t.hasOwnProperty(i)&&(i<0||i>=n.length?console.warn("Invalid series number in setVisibility: "+i):n[i]=t[i]);else for(i=0;i<t.length;i++)"boolean"==typeof t[i]?i>=n.length?console.warn("Invalid series number in setVisibility: "+i):n[i]=t[i]:t[i]<0||t[i]>=n.length?console.warn("Invalid series number in setVisibility: "+t[i]):n[t[i]]=e;this.predraw_()},Zt.prototype.size=function(){return{width:this.width_,height:this.height_}},Zt.prototype.setAnnotations=function(t,e){this.annotations_=t,this.layout_?(this.layout_.setAnnotations(this.annotations_),e||this.predraw_()):console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html")},Zt.prototype.annotations=function(){return this.annotations_},Zt.prototype.getLabels=function(){var t=this.attr_("labels");return t?t.slice():null},Zt.prototype.indexFromSetName=function(t){return this.setIndexByName_[t]},Zt.prototype.getRowForX=function(t){for(var e=0,n=this.numRows()-1;e<=n;){var r=n+e>>1,i=this.getValue(r,0);if(i<t)e=r+1;else if(i>t)n=r-1;else{if(e==r)return r;n=r}}return null},Zt.prototype.ready=function(t){this.is_initial_draw_?this.readyFns_.push(t):t.call(this,this)},Zt.prototype.addAndTrackEvent=function(t,e,n){g(t,e,n),this.registeredEvents_.push({elem:t,type:e,fn:n})},Zt.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var t=0;t<this.registeredEvents_.length;t++){var e=this.registeredEvents_[t];m(e.elem,e.type,e.fn)}this.registeredEvents_=[]},Zt.PLUGINS=[Xt,Bt,Wt,Gt,kt,Yt],Zt.GVizChart=Qt,Zt.DASHED_LINE=[7,3],Zt.DOT_DASH_LINE=[7,2,2,2],Zt.dateAxisLabelFormatter=st,Zt.toRGB_=Z,Zt.findPos=_,Zt.pageX=b,Zt.pageY=E,Zt.dateString_=R,Zt.defaultInteractionModel=pt.defaultModel,Zt.nonInteractiveModel=Zt.nonInteractiveModel_=pt.nonInteractiveModel_,Zt.Circles=q,Zt.Plugins={Legend:Xt,Axes:Bt,Annotations:kt,ChartLabels:Gt,Grid:Yt,RangeSelector:Wt},Zt.DataHandlers={DefaultHandler:wt,BarsHandler:xt,CustomBarsHandler:Rt,DefaultFractionHandler:Pt,ErrorBarsHandler:Dt,FractionsBarsHandler:Lt},Zt.startPan=pt.startPan,Zt.startZoom=pt.startZoom,Zt.movePan=pt.movePan,Zt.moveZoom=pt.moveZoom,Zt.endPan=pt.endPan,Zt.endZoom=pt.endZoom,Zt.numericLinearTicks=function(t,e,n,i,a,s){return r(t,e,n,(function(t){return"logscale"!==t&&i(t)}),a,s)},Zt.numericTicks=r,Zt.dateTicker=i,Zt.Granularity=a,Zt.getDateAxis=c,Zt.floatFormat=A;var Jt=e.default=Zt},DbhI:function(t,e,n){const r=n("ScnH");class i{constructor(t){r.PARAMCHECK(t),this.type=t}}class a extends i{constructor({isMasterPlaylist:t,uri:e,version:n,independentSegments:i=!1,start:a,source:s}){super("playlist"),r.PARAMCHECK(t),this.isMasterPlaylist=t,this.uri=e,this.version=n,this.independentSegments=i,this.start=a,this.source=s}}t.exports={Rendition:class{constructor({type:t,uri:e,groupId:n,language:i,assocLanguage:a,name:s,isDefault:o,autoselect:u,forced:l,instreamId:c,characteristics:d,channels:f}){r.PARAMCHECK(t,n,s),r.CONDITIONALASSERT(["SUBTITLES"===t,e],["CLOSED-CAPTIONS"===t,c],["CLOSED-CAPTIONS"===t,!e],[l,"CLOSED-CAPTIONS"===t]),this.type=t,this.uri=e,this.groupId=n,this.language=i,this.assocLanguage=a,this.name=s,this.isDefault=o,this.autoselect=u,this.forced=l,this.instreamId=c,this.characteristics=d,this.channels=f}toString(){return`${this.name}, ${this.type}, ${this.language}`}},Variant:class{constructor({uri:t,isIFrameOnly:e=!1,bandwidth:n,averageBandwidth:i,codecs:a,resolution:s,frameRate:o,hdcpLevel:u,audio:l=[],video:c=[],subtitles:d=[],closedCaptions:f=[],currentRenditions:h={audio:0,video:0,subtitles:0,closedCaptions:0}}){r.PARAMCHECK(t,n),this.uri=t,this.isIFrameOnly=e,this.bandwidth=n,this.averageBandwidth=i,this.codecs=a,this.resolution=s,this.frameRate=o,this.hdcpLevel=u,this.audio=l,this.video=c,this.subtitles=d,this.closedCaptions=f,this.currentRenditions=h}},SessionData:class{constructor({id:t,value:e,uri:n,language:i}){r.PARAMCHECK(t,e||n),r.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(e&&n)),this.id=t,this.value=e,this.uri=n,this.language=i}},Key:class{constructor({method:t,uri:e,iv:n,format:i,formatVersion:a}){r.PARAMCHECK(t),r.CONDITIONALPARAMCHECK(["NONE"!==t,e]),r.CONDITIONALASSERT(["NONE"===t,!(e||n||i||a)]),this.method=t,this.uri=e,this.iv=n,this.format=i,this.formatVersion=a}},MediaInitializationSection:class{constructor({uri:t,mimeType:e,byterange:n}){r.PARAMCHECK(t),this.uri=t,this.mimeType=e,this.byterange=n}},DateRange:class{constructor({id:t,classId:e,start:n,end:i,duration:a,plannedDuration:s,endOnNext:o,attributes:u={}}){r.PARAMCHECK(t,n),r.CONDITIONALPARAMCHECK([!0===o,e]),r.CONDITIONALASSERT([i,n<=i],[a,a>=0],[s,s>=0]),this.id=t,this.classId=e,this.start=n,this.end=i,this.duration=a,this.plannedDuration=s,this.endOnNext=o,this.attributes=u}},SpliceInfo:class{constructor({type:t,duration:e,tagName:n,value:i}){r.PARAMCHECK(t),r.CONDITIONALPARAMCHECK(["OUT"===t,e]),r.CONDITIONALPARAMCHECK(["RAW"===t,n]),this.type=t,this.duration=e,this.tagName=n,this.value=i}},Playlist:a,MasterPlaylist:class extends a{constructor(t={}){t.isMasterPlaylist=!0,super(t);const{variants:e=[],currentVariant:n,sessionDataList:r=[],sessionKeyList:i=[]}=t;this.variants=e,this.currentVariant=n,this.sessionDataList=r,this.sessionKeyList=i}},MediaPlaylist:class extends a{constructor(t={}){t.isMasterPlaylist=!1,super(t);const{targetDuration:e,mediaSequenceBase:n=0,discontinuitySequenceBase:r=0,endlist:i=!1,playlistType:a,isIFrame:s,segments:o=[],hash:u}=t;this.targetDuration=e,this.mediaSequenceBase=n,this.discontinuitySequenceBase=r,this.endlist=i,this.playlistType=a,this.isIFrame=s,this.segments=o,this.hash=u}},Segment:class extends i{constructor({uri:t,mimeType:e,data:n,duration:i,title:a,byterange:s,discontinuity:o,mediaSequenceNumber:u,discontinuitySequence:l,key:c,map:d,programDateTime:f,dateRange:h,markers:p=[]}){super("segment"),r.PARAMCHECK(t,u,l),this.uri=t,this.mimeType=e,this.data=n,this.duration=i,this.title=a,this.byterange=s,this.discontinuity=o,this.mediaSequenceNumber=u,this.discontinuitySequence=l,this.key=c,this.map=d,this.programDateTime=f,this.dateRange=h,this.markers=p}}}},DlQD:function(t,e,n){t.exports=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var r=function(t){var e={exports:{}};return function(t){t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},changeDefaults:function(e){t.exports.defaults=e}}}(e),e.exports}(),i=/[&<>"']/,a=/[&<>"']/g,s=/[<>"']|&(?!#?\w+;)/,o=/[<>"']|&(?!#?\w+;)/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(t){return u[t]},c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d(t){return t.replace(c,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var f=/(^|[^\[])\^/g,h=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,g={},m=/^[^:]+:\/*[^/]*$/,y=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _(t,e,n){var r=t.length;if(0===r)return"";for(var i=0;i<r;){var a=t.charAt(r-i-1);if(a!==e||n){if(a===e||!n)break;i++}else i++}return t.substr(0,r-i)}var b=function(t,e){if(e){if(i.test(t))return t.replace(a,l)}else if(s.test(t))return t.replace(o,l);return t},E=d,T=function(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},S=r.defaults,w=_,A=function(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var r=!1,i=e;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},x=b;function C(t,e,n){var r=e.href,i=e.title?x(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");return"!"!==t[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:a}:{type:"image",raw:n,href:r,title:i,text:x(a)}}var D=function(){function t(t){this.options=t||S}var e=t.prototype;return e.space=function(t){var e=this.rules.block.newline.exec(t);if(e)return e[0].length>1?{type:"space",raw:e[0]}:{raw:"\n"}},e.code=function(t,e){var n=this.rules.block.code.exec(t);if(n){var r=e[e.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:w(i,"\n")}}},e.fences=function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],r=function(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var r=n[1];return e.split("\n").map((function(t){var e=t.match(/^\s+/);return null===e?t:e[0].length>=r.length?t.slice(r.length):t})).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:r}}},e.heading=function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var r=w(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n}}},e.nptable=function(t){var e=this.rules.block.nptable.exec(t);if(e){var n={type:"table",header:A(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[],raw:e[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)n.align[r]=/^ *-+: *$/.test(n.align[r])?"right":/^ *:-+: *$/.test(n.align[r])?"center":/^ *:-+ *$/.test(n.align[r])?"left":null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=A(n.cells[r],n.header.length);return n}}},e.hr=function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}},e.blockquote=function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],text:n}}},e.list=function(t){var e=this.rules.block.list.exec(t);if(e){var n,r,i,a,s,o,u,l,c=e[0],d=e[2],f=d.length>1,h={type:"list",raw:c,ordered:f,start:f?+d.slice(0,-1):"",loose:!1,items:[]},p=e[0].match(this.rules.block.item),g=!1,m=p.length;i=this.rules.block.listItemStart.exec(p[0]);for(var y=0;y<m;y++){if(c=n=p[y],y!==m-1){if(a=this.rules.block.listItemStart.exec(p[y+1]),this.options.pedantic?a[1].length>i[1].length:a[1].length>i[0].length||a[1].length>3){p.splice(y,2,p[y]+"\n"+p[y+1]),y--,m--;continue}(!this.options.pedantic||this.options.smartLists?a[2][a[2].length-1]!==d[d.length-1]:f===(1===a[2].length))&&(s=p.slice(y+1).join("\n"),h.raw=h.raw.substring(0,h.raw.length-s.length),y=m-1),i=a}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=n.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+r+"}","gm"),"")),o=g||/\n\n(?!\s*$)/.test(n),y!==m-1&&(g="\n"===n.charAt(n.length-1),o||(o=g)),o&&(h.loose=!0),this.options.gfm&&(l=void 0,(u=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),h.items.push({type:"list_item",raw:c,task:u,checked:l,loose:o,text:n})}return h}},e.html=function(t){var e=this.rules.block.html.exec(t);if(e)return{type:this.options.sanitize?"paragraph":"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):x(e[0]):e[0]}},e.def=function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}},e.table=function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:A(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var r,i=n.align.length;for(r=0;r<i;r++)n.align[r]=/^ *-+: *$/.test(n.align[r])?"right":/^ *:-+: *$/.test(n.align[r])?"center":/^ *:-+ *$/.test(n.align[r])?"left":null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=A(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},e.lheading=function(t){var e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1]}},e.paragraph=function(t){var e=this.rules.block.paragraph.exec(t);if(e)return{type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]}},e.text=function(t,e){var n=this.rules.block.text.exec(t);if(n){var r=e[e.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},e.escape=function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:x(e[1])}},e.tag=function(t,e,n){var r=this.rules.inline.tag.exec(t);if(r)return!e&&/^<a /i.test(r[0])?e=!0:e&&/^<\/a>/i.test(r[0])&&(e=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:e,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):x(r[0]):r[0]}},e.link=function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=w(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var i=function(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,r=0,i=0;i<n;i++)if("\\"===t[i])i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&--r<0)return i;return-1}(e[2],"()");if(i>-1){var a=(0===e[0].indexOf("!")?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}var s=e[2],o="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);u&&(s=u[1],o=u[3])}else o=e[3]?e[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),C(e,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:o?o.replace(this.rules.inline._escapes,"$1"):o},e[0])}},e.reflink=function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=e[r.toLowerCase()])||!r.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return C(n,r,n[0])}},e.strong=function(t,e,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(t);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){e=e.slice(-1*t.length);var i,a="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(a.lastIndex=0;null!=(r=a.exec(e));)if(i=this.rules.inline.strong.middle.exec(e.slice(0,r.index+3)))return{type:"strong",raw:t.slice(0,i[0].length),text:t.slice(2,i[0].length-2)}}},e.em=function(t,e,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(t);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){e=e.slice(-1*t.length);var i,a="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(a.lastIndex=0;null!=(r=a.exec(e));)if(i=this.rules.inline.em.middle.exec(e.slice(0,r.index+2)))return{type:"em",raw:t.slice(0,i[0].length),text:t.slice(1,i[0].length-1)}}},e.codespan=function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=x(n,!0),{type:"codespan",raw:e[0],text:n}}},e.br=function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}},e.del=function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2]}},e.autolink=function(t,e){var n,r,i=this.rules.inline.autolink.exec(t);if(i)return r="@"===i[2]?"mailto:"+(n=x(this.options.mangle?e(i[1]):i[1])):n=x(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},e.url=function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var r,i;if("@"===n[2])i="mailto:"+(r=x(this.options.mangle?e(n[0]):n[0]));else{var a;do{a=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(a!==n[0]);r=x(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},e.inlineText=function(t,e,n){var r,i=this.rules.inline.text.exec(t);if(i)return r=e?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):x(i[0]):i[0]:x(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},t}(),I={exec:function(){}},R=function(t,e){t=t.source||t,e=e||"";var n={replace:function(e,r){return r=(r=r.source||r).replace(f,"$1"),t=t.replace(e,r),n},getRegex:function(){return new RegExp(t,e)}};return n},O=T,P={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:I,table:I,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};P.def=R(P.def).replace("label",P._label).replace("title",P._title).getRegex(),P.bullet=/(?:[*+-]|\d{1,9}[.)])/,P.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,P.item=R(P.item,"gm").replace(/bull/g,P.bullet).getRegex(),P.listItemStart=R(/^( *)(bull)/).replace("bull",P.bullet).getRegex(),P.list=R(P.list).replace(/bull/g,P.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+P.def.source+")").getRegex(),P._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",P._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,P.html=R(P.html,"i").replace("comment",P._comment).replace("tag",P._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),P.paragraph=R(P._paragraph).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.blockquote=R(P.blockquote).replace("paragraph",P.paragraph).getRegex(),P.normal=O({},P),P.gfm=O({},P.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),P.gfm.nptable=R(P.gfm.nptable).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.gfm.table=R(P.gfm.table).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.pedantic=O({},P.normal,{html:R("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",P._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:I,paragraph:R(P.normal._paragraph).replace("hr",P.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",P.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:I,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:I,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};M.punctuation=R(M.punctuation).replace(/punctuation/g,M._punctuation).getRegex(),M._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",M._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",M._comment=R(P._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),M.em.start=R(M.em.start).replace(/punctuation/g,M._punctuation).getRegex(),M.em.middle=R(M.em.middle).replace(/punctuation/g,M._punctuation).replace(/overlapSkip/g,M._overlapSkip).getRegex(),M.em.endAst=R(M.em.endAst,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.em.endUnd=R(M.em.endUnd,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.strong.start=R(M.strong.start).replace(/punctuation/g,M._punctuation).getRegex(),M.strong.middle=R(M.strong.middle).replace(/punctuation/g,M._punctuation).replace(/overlapSkip/g,M._overlapSkip).getRegex(),M.strong.endAst=R(M.strong.endAst,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.strong.endUnd=R(M.strong.endUnd,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.blockSkip=R(M._blockSkip,"g").getRegex(),M.overlapSkip=R(M._overlapSkip,"g").getRegex(),M._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,M.autolink=R(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex(),M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,M.tag=R(M.tag).replace("comment",M._comment).replace("attribute",M._attribute).getRegex(),M._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,M._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,M.link=R(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex(),M.reflink=R(M.reflink).replace("label",M._label).getRegex(),M.reflinkSearch=R(M.reflinkSearch,"g").replace("reflink",M.reflink).replace("nolink",M.nolink).getRegex(),M.normal=O({},M),M.pedantic=O({},M.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:R(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:R(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()}),M.gfm=O({},M.normal,{escape:R(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),M.gfm.url=R(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex(),M.breaks=O({},M.gfm,{br:R(M.br).replace("{2,}","*").getRegex(),text:R(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var L={block:P,inline:M},N=r.defaults,k=L.block,F=L.inline,B=function(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t};function j(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function U(t){var e,n,r="",i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var V=function(){function e(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||N,this.options.tokenizer=this.options.tokenizer||new D,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:k.normal,inline:F.normal};this.options.pedantic?(e.block=k.pedantic,e.inline=F.pedantic):this.options.gfm&&(e.block=k.gfm,e.inline=this.options.breaks?F.breaks:F.gfm),this.tokenizer.rules=e}e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n,r,i=e.prototype;return i.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(t,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(t,e,n){var r,i,a,s;for(void 0===e&&(e=[]),void 0===n&&(n=!0),this.options.pedantic&&(t=t.replace(/^ +$/gm,""));t;)if(r=this.tokenizer.space(t))t=t.substring(r.raw.length),r.type&&e.push(r);else if(r=this.tokenizer.code(t,e))t=t.substring(r.raw.length),r.type?e.push(r):((s=e[e.length-1]).raw+="\n"+r.raw,s.text+="\n"+r.text);else if(r=this.tokenizer.fences(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.heading(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.nptable(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.hr(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.blockquote(t))t=t.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),e.push(r);else if(r=this.tokenizer.list(t)){for(t=t.substring(r.raw.length),a=r.items.length,i=0;i<a;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);e.push(r)}else if(r=this.tokenizer.html(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.def(t)))t=t.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.lheading(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.paragraph(t)))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.text(t,e))t=t.substring(r.raw.length),r.type?e.push(r):((s=e[e.length-1]).raw+="\n"+r.raw,s.text+="\n"+r.text);else if(t){var o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}return e},i.inline=function(t){var e,n,r,i,a,s,o=t.length;for(e=0;e<o;e++)switch((s=t[e]).type){case"paragraph":case"text":case"heading":s.tokens=[],this.inlineTokens(s.text,s.tokens);break;case"table":for(s.tokens={header:[],cells:[]},i=s.header.length,n=0;n<i;n++)s.tokens.header[n]=[],this.inlineTokens(s.header[n],s.tokens.header[n]);for(i=s.cells.length,n=0;n<i;n++)for(a=s.cells[n],s.tokens.cells[n]=[],r=0;r<a.length;r++)s.tokens.cells[n][r]=[],this.inlineTokens(a[r],s.tokens.cells[n][r]);break;case"blockquote":this.inline(s.tokens);break;case"list":for(i=s.items.length,n=0;n<i;n++)this.inline(s.items[n].tokens)}return t},i.inlineTokens=function(t,e,n,r){var i;void 0===e&&(e=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var a,s,o,u=t;if(this.tokens.links){var l=Object.keys(this.tokens.links);if(l.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(u));)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,a.index)+"["+B("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,a.index)+"["+B("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;t;)if(s||(o=""),s=!1,i=this.tokenizer.escape(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.tag(t,n,r))t=t.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,e.push(i);else if(i=this.tokenizer.link(t))t=t.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),e.push(i);else if(i=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),e.push(i);else if(i=this.tokenizer.strong(t,u,o))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.em(t,u,o))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.codespan(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.br(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.del(t))t=t.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),e.push(i);else if(i=this.tokenizer.autolink(t,U))t=t.substring(i.raw.length),e.push(i);else if(n||!(i=this.tokenizer.url(t,U))){if(i=this.tokenizer.inlineText(t,r,j))t=t.substring(i.raw.length),o=i.raw.slice(-1),s=!0,e.push(i);else if(t){var c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else t=t.substring(i.raw.length),e.push(i);return e},n=e,(r=[{key:"rules",get:function(){return{block:k,inline:F}}}])&&t(n,r),e}(),G=r.defaults,H=function(t,e,n){if(t){var r;try{r=decodeURIComponent(d(n)).replace(h,"").toLowerCase()}catch(i){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!p.test(n)&&(n=function(t,e){g[" "+t]||(g[" "+t]=m.test(t)?t+"/":_(t,"/",!0));var n=-1===(t=g[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(y,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(v,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(i){return null}return n},Y=b,z=function(){function t(t){this.options=t||G}var e=t.prototype;return e.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(t,r);null!=i&&i!==t&&(n=!0,t=i)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+Y(r,!0)+'">'+(n?t:Y(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:Y(t,!0))+"</code></pre>\n"},e.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},e.html=function(t){return t},e.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},e.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},e.listitem=function(t){return"<li>"+t+"</li>\n"},e.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(t){return"<p>"+t+"</p>\n"},e.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},e.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},e.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},e.strong=function(t){return"<strong>"+t+"</strong>"},e.em=function(t){return"<em>"+t+"</em>"},e.codespan=function(t){return"<code>"+t+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(t){return"<del>"+t+"</del>"},e.link=function(t,e,n){if(null===(t=H(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+Y(t)+'"';return e&&(r+=' title="'+e+'"'),r+">"+n+"</a>"},e.image=function(t,e,n){if(null===(t=H(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+(this.options.xhtml?"/>":">")},e.text=function(t){return t},t}(),q=function(){function t(){}var e=t.prototype;return e.strong=function(t){return t},e.em=function(t){return t},e.codespan=function(t){return t},e.del=function(t){return t},e.html=function(t){return t},e.text=function(t){return t},e.link=function(t,e,n){return""+n},e.image=function(t,e,n){return""+n},e.br=function(){return""},t}(),X=function(){function t(){this.seen={}}var e=t.prototype;return e.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(t,e){var n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do{n=t+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n},e.slug=function(t,e){void 0===e&&(e={});var n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)},t}(),K=r.defaults,W=E,$=function(){function t(t){this.options=t||K,this.options.renderer=this.options.renderer||new z,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new q,this.slugger=new X}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var e=t.prototype;return e.parse=function(t,e){void 0===e&&(e=!0);var n,r,i,a,s,o,u,l,c,d,f,h,p,g,m,y,v,_,b="",E=t.length;for(n=0;n<E;n++)switch((d=t[n]).type){case"space":continue;case"hr":b+=this.renderer.hr();continue;case"heading":b+=this.renderer.heading(this.parseInline(d.tokens),d.depth,W(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":b+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",u="",a=d.header.length,r=0;r<a;r++)u+=this.renderer.tablecell(this.parseInline(d.tokens.header[r]),{header:!0,align:d.align[r]});for(l+=this.renderer.tablerow(u),c="",a=d.cells.length,r=0;r<a;r++){for(u="",s=(o=d.tokens.cells[r]).length,i=0;i<s;i++)u+=this.renderer.tablecell(this.parseInline(o[i]),{header:!1,align:d.align[i]});c+=this.renderer.tablerow(u)}b+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(d.tokens),b+=this.renderer.blockquote(c);continue;case"list":for(f=d.ordered,h=d.start,p=d.loose,a=d.items.length,c="",r=0;r<a;r++)y=(m=d.items[r]).checked,v=m.task,g="",m.task&&(_=this.renderer.checkbox(y),p?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=_+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=_+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:_}):g+=_),g+=this.parse(m.tokens,p),c+=this.renderer.listitem(g,v,y);b+=this.renderer.list(c,f,h);continue;case"html":b+=this.renderer.html(d.text);continue;case"paragraph":b+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;n+1<E&&"text"===t[n+1].type;)c+="\n"+((d=t[++n]).tokens?this.parseInline(d.tokens):d.text);b+=e?this.renderer.paragraph(c):c;continue;default:var T='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(T);throw new Error(T)}return b},e.parseInline=function(t,e){e=e||this.renderer;var n,r,i="",a=t.length;for(n=0;n<a;n++)switch((r=t[n]).type){case"escape":i+=e.text(r.text);break;case"html":i+=e.html(r.text);break;case"link":i+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":i+=e.image(r.href,r.title,r.text);break;case"strong":i+=e.strong(this.parseInline(r.tokens,e));break;case"em":i+=e.em(this.parseInline(r.tokens,e));break;case"codespan":i+=e.codespan(r.text);break;case"br":i+=e.br();break;case"del":i+=e.del(this.parseInline(r.tokens,e));break;case"text":i+=e.text(r.text);break;default:var s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}return i},t}(),Q=T,Z=function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},J=b,tt=r.getDefaults,et=r.changeDefaults,nt=r.defaults;function rt(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),e=Q({},rt.defaults,e||{}),Z(e),n){var r,i=e.highlight;try{r=V.lex(t,e)}catch(u){return n(u)}var a=function(t){var a;if(!t)try{a=$.parse(r,e)}catch(u){t=u}return e.highlight=i,t?n(t):n(null,a)};if(!i||i.length<3)return a();if(delete e.highlight,!r.length)return a();var s=0;return rt.walkTokens(r,(function(t){"code"===t.type&&(s++,setTimeout((function(){i(t.text,t.lang,(function(e,n){if(e)return a(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0==--s&&a()}))}),0))})),void(0===s&&a())}try{var o=V.lex(t,e);return e.walkTokens&&rt.walkTokens(o,e.walkTokens),$.parse(o,e)}catch(u){if(u.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+J(u.message+"",!0)+"</pre>";throw u}}return rt.options=rt.setOptions=function(t){return Q(rt.defaults,t),et(rt.defaults),rt},rt.getDefaults=tt,rt.defaults=nt,rt.use=function(t){var e=Q({},t);if(t.renderer&&function(){var n=rt.defaults.renderer||new z,r=function(e){var r=n[e];n[e]=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=t.renderer[e].apply(n,a);return!1===o&&(o=r.apply(n,a)),o}};for(var i in t.renderer)r(i);e.renderer=n}(),t.tokenizer&&function(){var n=rt.defaults.tokenizer||new D,r=function(e){var r=n[e];n[e]=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=t.tokenizer[e].apply(n,a);return!1===o&&(o=r.apply(n,a)),o}};for(var i in t.tokenizer)r(i);e.tokenizer=n}(),t.walkTokens){var n=rt.defaults.walkTokens;e.walkTokens=function(e){t.walkTokens(e),n&&n(e)}}rt.setOptions(e)},rt.walkTokens=function(t,e){for(var r,i=n(t);!(r=i()).done;){var a=r.value;switch(e(a),a.type){case"table":for(var s,o=n(a.tokens.header);!(s=o()).done;)rt.walkTokens(s.value,e);for(var u,l=n(a.tokens.cells);!(u=l()).done;)for(var c,d=n(u.value);!(c=d()).done;)rt.walkTokens(c.value,e);break;case"list":rt.walkTokens(a.items,e);break;default:a.tokens&&rt.walkTokens(a.tokens,e)}}},rt.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Q({},rt.defaults,e||{}),Z(e);try{var n=V.lexInline(t,e);return e.walkTokens&&rt.walkTokens(n,e.walkTokens),$.parseInline(n,e)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+J(r.message+"",!0)+"</pre>";throw r}},rt.Parser=$,rt.parser=$.parse,rt.Renderer=z,rt.TextRenderer=q,rt.Lexer=V,rt.lexer=V.lex,rt.Tokenizer=D,rt.Slugger=X,rt.parse=rt,rt}()},E1E9:function(t,e,n){"use strict";const r=n("4abu"),i=n("4abu").buildOptions,a=n("Y81X");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=s;const o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function u(t,e,n){return e&&(n.trimValues&&(e=e.trim()),e=c(e=n.tagValueProcessor(e,t),n.parseNodeValue,n.parseTrueNumberOnly)),e}function l(t,e){if(e.ignoreNameSpace){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}function c(t,e,n){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?e=Number.parseInt(t,16):-1!==t.indexOf(".")?(e=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):e=Number.parseInt(t,10),n&&(e=String(e)===t?e:t)),e}return r.isExist(t)?t:""}e.props=o;const d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function f(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const n=r.getAllMatches(t,d),i=n.length,a={};for(let t=0;t<i;t++){const r=l(n[t][1],e);r.length&&(void 0!==n[t][4]?(e.trimValues&&(n[t][4]=n[t][4].trim()),n[t][4]=e.attrValueProcessor(n[t][4],r),a[e.attributeNamePrefix+r]=c(n[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(a[e.attributeNamePrefix+r]=!0))}if(!Object.keys(a).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=a,t}return a}}function h(t,e){let n,r="";for(let i=e;i<t.length;i++){let e=t[i];if(n)e===n&&(n="");else if('"'===e||"'"===e)n=e;else{if(">"===e)return{data:r,index:i};"\t"===e&&(e=" ")}r+=e}}function p(t,e,n,r){const i=t.indexOf(e,n);if(-1===i)throw new Error(r);return i+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/(\r\n)|\n/," "),e=i(e,s,o);const n=new a("!xml");let l=n,c="";for(let i=0;i<t.length;i++)if("<"===t[i])if("/"===t[i+1]){const n=p(t,">",i,"Closing Tag is not closed.");let a=t.substring(i+2,n).trim();if(e.ignoreNameSpace){const t=a.indexOf(":");-1!==t&&(a=a.substr(t+1))}l&&(l.val=l.val?r.getValue(l.val)+""+u(a,c,e):u(a,c,e)),e.stopNodes.length&&e.stopNodes.includes(l.tagname)&&(l.child=[],null==l.attrsMap&&(l.attrsMap={}),l.val=t.substr(l.startIndex+1,i-l.startIndex-1)),l=l.parent,c="",i=n}else if("?"===t[i+1])i=p(t,"?>",i,"Pi Tag is not closed.");else if("!--"===t.substr(i+1,3))i=p(t,"--\x3e",i,"Comment is not closed.");else if("!D"===t.substr(i+1,2)){const e=p(t,">",i,"DOCTYPE is not closed.");i=t.substring(i,e).indexOf("[")>=0?t.indexOf("]>",i)+1:e}else if("!["===t.substr(i+1,2)){const n=p(t,"]]>",i,"CDATA is not closed.")-2,s=t.substring(i+9,n);if(c&&(l.val=r.getValue(l.val)+""+u(l.tagname,c,e),c=""),e.cdataTagName){const t=new a(e.cdataTagName,l,s);l.addChild(t),l.val=r.getValue(l.val)+e.cdataPositionChar,s&&(t.val=s)}else l.val=(l.val||"")+(s||"");i=n+2}else{const n=h(t,i+1);let s=n.data;const o=n.index,d=s.indexOf(" ");let p=s;if(-1!==d&&(p=s.substr(0,d).trimRight(),s=s.substr(d+1)),e.ignoreNameSpace){const t=p.indexOf(":");-1!==t&&(p=p.substr(t+1))}if(l&&c&&"!xml"!==l.tagname&&(l.val=r.getValue(l.val)+""+u(l.tagname,c,e)),s.length>0&&s.lastIndexOf("/")===s.length-1){"/"===p[p.length-1]?(p=p.substr(0,p.length-1),s=p):s=s.substr(0,s.length-1);const t=new a(p,l,"");p!==s&&(t.attrsMap=f(s,e)),l.addChild(t)}else{const t=new a(p,l);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=o),p!==s&&(t.attrsMap=f(s,e)),l.addChild(t),l=t}c="",i=o}else c+=t[i];return n}},EVdn:function(t,e,n){var r;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var a=[],s=Object.getPrototypeOf,o=a.slice,u=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},l=a.push,c=a.indexOf,d={},f=d.toString,h=d.hasOwnProperty,p=h.toString,g=p.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},v=function(t){return null!=t&&t===t.window},_=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function E(t,e,n){var r,i,a=(n=n||_).createElement("script");if(a.text=t,e)for(r in b)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function T(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[f.call(t)]||"object":typeof t}var S=function(t,e){return new S.fn.init(t,e)};function w(t){var e=!!t&&"length"in t&&t.length,n=T(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}S.fn=S.prototype={jquery:"3.5.1",constructor:S,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},S.extend=S.fn.extend=function(){var t,e,n,r,i,a,s=arguments[0]||{},o=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[o]||{},o++),"object"==typeof s||y(s)||(s={}),o===u&&(s=this,o--);o<u;o++)if(null!=(t=arguments[o]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],a=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,s[e]=S.extend(l,a,r)):void 0!==r&&(s[e]=r));return s},S.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=s(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){E(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(w(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?S.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,a=t.length,s=!n;i<a;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,a=0,s=[];if(w(t))for(r=t.length;a<r;a++)null!=(i=e(t[a],a,n))&&s.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&s.push(i);return u(s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=a[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var A=function(t){var e,n,r,i,a,s,o,u,l,c,d,f,h,p,g,m,y,v,_,b="sizzle"+1*new Date,E=t.document,T=0,S=0,w=ut(),A=ut(),x=ut(),C=ut(),D=function(t,e){return t===e&&(d=!0),0},I={}.hasOwnProperty,R=[],O=R.pop,P=R.push,M=R.push,L=R.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",U=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),H=new RegExp("^"+F+"*,"+F+"*"),Y=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp(F+"|>"),q=new RegExp(U),X=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},W=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=function(){f()},st=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(R=L.call(E.childNodes),E.childNodes)}catch(At){M={apply:R.length?function(t,e){P.apply(t,L.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var a,o,l,c,d,p,y,v=e&&e.ownerDocument,E=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==E&&9!==E&&11!==E)return r;if(!i&&(f(e),e=e||h,g)){if(11!==E&&(d=J.exec(t)))if(a=d[1]){if(9===E){if(!(l=e.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(v&&(l=v.getElementById(a))&&_(e,l)&&l.id===a)return r.push(l),r}else{if(d[2])return M.apply(r,e.getElementsByTagName(t)),r;if((a=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return M.apply(r,e.getElementsByClassName(a)),r}if(n.qsa&&!C[t+" "]&&(!m||!m.test(t))&&(1!==E||"object"!==e.nodeName.toLowerCase())){if(y=t,v=e,1===E&&(z.test(t)||Y.test(t))){for((v=tt.test(t)&&yt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=b)),o=(p=s(t)).length;o--;)p[o]=(c?"#"+c:":scope")+" "+_t(p[o]);y=p.join(",")}try{return M.apply(r,v.querySelectorAll(y)),r}catch(T){C(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return u(t.replace(G,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function lt(t){return t[b]=!0,t}function ct(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(At){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return lt((function(e){return e=+e,lt((function(n,r){for(var i,a=t([],n.length,e),s=a.length;s--;)n[i=a[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},a=ot.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!W.test(t.namespaceURI||e&&e.nodeName||"HTML")},f=ot.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:E;return s!=h&&9===s.nodeType&&s.documentElement?(p=(h=s).documentElement,g=!a(h),E!=h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",at,!1):i.attachEvent&&i.attachEvent("onunload",at)),n.scope=ct((function(t){return p.appendChild(t).appendChild(h.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(h.getElementsByClassName),n.getById=ct((function(t){return p.appendChild(t).id=b,!h.getElementsByName||!h.getElementsByName(b).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(i=e.getElementsByName(t),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},y=[],m=[],(n.qsa=Z.test(h.querySelectorAll))&&(ct((function(t){var e;p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+k+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Z.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",U)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),e=Z.test(p.compareDocumentPosition),_=e||Z.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},D=e?function(t,e){if(t===e)return d=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==h||t.ownerDocument==E&&_(E,t)?-1:e==h||e.ownerDocument==E&&_(E,e)?1:c?N(c,t)-N(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,r=0,i=t.parentNode,a=e.parentNode,s=[t],o=[e];if(!i||!a)return t==h?-1:e==h?1:i?-1:a?1:c?N(c,t)-N(c,e):0;if(i===a)return ft(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;s[r]===o[r];)r++;return r?ft(s[r],o[r]):s[r]==E?-1:o[r]==E?1:0},h):h},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&g&&!C[e+" "]&&(!y||!y.test(e))&&(!m||!m.test(e)))try{var r=v.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(At){C(e,!0)}return ot(e,h,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!=h&&f(t),_(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!=h&&f(t);var i=r.attrHandle[e.toLowerCase()],a=i&&I.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==a?a:n.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},ot.escape=function(t){return(t+"").replace(rt,it)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(D),d){for(;e=t[a++];)e===t[a]&&(i=r.push(a));for(;i--;)t.splice(r[i],1)}return c=null,t},i=ot.getText=function(t){var e,n="",r=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:lt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=w[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&w(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var a="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,d,f,h,p,g=a!==s?"nextSibling":"previousSibling",m=e.parentNode,y=o&&e.nodeName.toLowerCase(),v=!u&&!o,_=!1;if(m){if(a){for(;g;){for(f=e;f=f[g];)if(o?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&v){for(_=(h=(l=(c=(d=(f=m)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===T&&l[1])&&l[2],f=h&&m.childNodes[h];f=++h&&f&&f[g]||(_=h=0)||p.pop();)if(1===f.nodeType&&++_&&f===e){c[t]=[T,h,_];break}}else if(v&&(_=h=(l=(c=(d=(f=e)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===T&&l[1]),!1===_)for(;(f=++h&&f&&f[g]||(_=h=0)||p.pop())&&((o?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++_||(v&&((c=(d=f[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]=[T,_]),f!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var r,a=i(t,e),s=a.length;s--;)t[r=N(t,a[s])]=!(n[r]=a[s])})):function(t){return i(t,0,n)}):i}},pseudos:{not:lt((function(t){var e=[],n=[],r=o(t.replace(G,"$1"));return r[b]?lt((function(t,e,n,i){for(var a,s=r(t,null,i,[]),o=t.length;o--;)(a=s[o])&&(t[o]=!(e[o]=a))})):function(t,i,a){return e[0]=t,r(e,null,a,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return ot(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}})),lang:lt((function(t){return X.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:mt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function vt(){}function _t(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function bt(t,e,n){var r=e.dir,i=e.next,a=i||r,s=n&&"parentNode"===a,o=S++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,u){var l,c,d,f=[T,o];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(c=(d=e[b]||(e[b]={}))[e.uniqueID]||(d[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[a])&&l[0]===T&&l[1]===o)return f[2]=l[2];if(c[a]=f,f[2]=t(e,n,u))return!0}return!1}}function Et(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Tt(t,e,n,r,i){for(var a,s=[],o=0,u=t.length,l=null!=e;o<u;o++)(a=t[o])&&(n&&!n(a,r,i)||(s.push(a),l&&e.push(o)));return s}function St(t,e,n,r,i,a){return r&&!r[b]&&(r=St(r)),i&&!i[b]&&(i=St(i,a)),lt((function(a,s,o,u){var l,c,d,f=[],h=[],p=s.length,g=a||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",o.nodeType?[o]:o,[]),m=!t||!a&&e?g:Tt(g,f,t,o,u),y=n?i||(a?t:p||r)?[]:s:m;if(n&&n(m,y,o,u),r)for(l=Tt(y,h),r(l,[],o,u),c=l.length;c--;)(d=l[c])&&(y[h[c]]=!(m[h[c]]=d));if(a){if(i||t){if(i){for(l=[],c=y.length;c--;)(d=y[c])&&l.push(m[c]=d);i(null,y=[],l,u)}for(c=y.length;c--;)(d=y[c])&&(l=i?N(a,d):f[c])>-1&&(a[l]=!(s[l]=d))}}else y=Tt(y===s?y.splice(p,y.length):y),i?i(null,s,y,u):M.apply(s,y)}))}function wt(t){for(var e,n,i,a=t.length,s=r.relative[t[0].type],o=s||r.relative[" "],u=s?1:0,c=bt((function(t){return t===e}),o,!0),d=bt((function(t){return N(e,t)>-1}),o,!0),f=[function(t,n,r){var i=!s&&(r||n!==l)||((e=n).nodeType?c(t,n,r):d(t,n,r));return e=null,i}];u<a;u++)if(n=r.relative[t[u].type])f=[bt(Et(f),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[b]){for(i=++u;i<a&&!r.relative[t[i].type];i++);return St(u>1&&Et(f),u>1&&_t(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&wt(t.slice(u,i)),i<a&&wt(t=t.slice(i)),i<a&&_t(t))}f.push(n)}return Et(f)}return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,s=ot.tokenize=function(t,e){var n,i,a,s,o,u,l,c=A[t+" "];if(c)return e?0:c.slice(0);for(o=t,u=[],l=r.preFilter;o;){for(s in n&&!(i=H.exec(o))||(i&&(o=o.slice(i[0].length)||o),u.push(a=[])),n=!1,(i=Y.exec(o))&&(n=i.shift(),a.push({value:n,type:i[0].replace(G," ")}),o=o.slice(n.length)),r.filter)!(i=K[s].exec(o))||l[s]&&!(i=l[s](i))||(n=i.shift(),a.push({value:n,type:s,matches:i}),o=o.slice(n.length));if(!n)break}return e?o.length:o?ot.error(t):A(t,u).slice(0)},o=ot.compile=function(t,e){var n,i=[],a=[],o=x[t+" "];if(!o){for(e||(e=s(t)),n=e.length;n--;)(o=wt(e[n]))[b]?i.push(o):a.push(o);(o=x(t,function(t,e){var n=e.length>0,i=t.length>0,a=function(a,s,o,u,c){var d,p,m,y=0,v="0",_=a&&[],b=[],E=l,S=a||i&&r.find.TAG("*",c),w=T+=null==E?1:Math.random()||.1,A=S.length;for(c&&(l=s==h||s||c);v!==A&&null!=(d=S[v]);v++){if(i&&d){for(p=0,s||d.ownerDocument==h||(f(d),o=!g);m=t[p++];)if(m(d,s||h,o)){u.push(d);break}c&&(T=w)}n&&((d=!m&&d)&&y--,a&&_.push(d))}if(y+=v,n&&v!==y){for(p=0;m=e[p++];)m(_,b,s,o);if(a){if(y>0)for(;v--;)_[v]||b[v]||(b[v]=O.call(u));b=Tt(b)}M.apply(u,b),c&&!a&&b.length>0&&y+e.length>1&&ot.uniqueSort(u)}return c&&(T=w,l=E),_};return n?lt(a):a}(a,i))).selector=t}return o},u=ot.select=function(t,e,n,i){var a,u,l,c,d,f="function"==typeof t&&t,h=!i&&s(t=f.selector||t);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(a=K.needsContext.test(t)?0:u.length;a--&&!r.relative[c=(l=u[a]).type];)if((d=r.find[c])&&(i=d(l.matches[0].replace(et,nt),tt.test(u[0].type)&&yt(e.parentNode)||e))){if(u.splice(a,1),!(t=i.length&&_t(u)))return M.apply(n,i),n;break}}return(f||o(t,h))(i,e,!g,n,!e||tt.test(t)&&yt(e.parentNode)||e),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!d,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||dt(k,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),ot}(n);S.find=A,S.expr=A.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=A.uniqueSort,S.text=A.getText,S.isXMLDoc=A.isXML,S.contains=A.contains,S.escapeSelector=A.escape;var x=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&S(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=S.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return y(e)?S.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return c.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?S.find.matchesSelector(r,t)?[r]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<r;e++)if(S.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)S.find(t,i[e],n);return r>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&D.test(t)?S(t):t||[],!1).length}});var P,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:M.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(S.merge(this,S.parseHTML(r[1],(e=e instanceof S?e[0]:e)&&e.nodeType?e.ownerDocument||e:_,!0)),R.test(r[1])&&S.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,P=S(_);var L=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function k(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,a=[],s="string"!=typeof t&&S(t);if(!D.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?c.call(S(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return x(t,"parentNode")},parentsUntil:function(t,e,n){return x(t,"parentNode",n)},next:function(t){return k(t,"nextSibling")},prev:function(t){return k(t,"previousSibling")},nextAll:function(t){return x(t,"nextSibling")},prevAll:function(t){return x(t,"previousSibling")},nextUntil:function(t,e,n){return x(t,"nextSibling",n)},prevUntil:function(t,e,n){return x(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,r){var i=S.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=S.filter(r,i)),this.length>1&&(N[t]||S.uniqueSort(i),L.test(t)&&i.reverse()),this.pushStack(i)}}));var F=/[^\x20\t\r\n\f]+/g;function B(t){return t}function j(t){throw t}function U(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(F)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,r,i,a=[],s=[],o=-1,u=function(){for(i=i||t.once,r=e=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&t.stopOnFalse&&(o=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},l={add:function(){return a&&(n&&!e&&(o=a.length-1,s.push(n)),function e(n){S.each(n,(function(n,r){y(r)?t.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==T(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,a,n))>-1;)a.splice(n,1),n<=o&&o--})),this},has:function(t){return t?S.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||e||(a=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,r){var i=y(t[r[4]])&&t[r[4]];a[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,r,i){var a=0;function s(t,e,r,i){return function(){var o=this,u=arguments,l=function(){var n,l;if(!(t<a)){if((n=r.apply(o,u))===e.promise())throw new TypeError("Thenable self-resolution");y(l=n&&("object"==typeof n||"function"==typeof n)&&n.then)?i?l.call(n,s(a,e,B,i),s(a,e,j,i)):(a++,l.call(n,s(a,e,B,i),s(a,e,j,i),s(a,e,B,e.notifyWith))):(r!==B&&(o=void 0,u=[n]),(i||e.resolveWith)(o,u))}},c=i?l:function(){try{l()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,c.stackTrace),t+1>=a&&(r!==j&&(o=void 0,u=[n]),e.rejectWith(o,u))}};t?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),n.setTimeout(c))}}return S.Deferred((function(n){e[0][3].add(s(0,n,y(i)?i:B,n.notifyWith)),e[1][3].add(s(0,n,y(t)?t:B)),e[2][3].add(s(0,n,y(r)?r:j))})).promise()},promise:function(t){return null!=t?S.extend(t,i):i}},a={};return S.each(e,(function(t,n){var s=n[2],o=n[5];i[n[1]]=s.add,o&&s.add((function(){r=o}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=s.fireWith})),i.promise(a),t&&t.call(a,a),a},when:function(t){var e=arguments.length,n=e,r=Array(n),i=o.call(arguments),a=S.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?o.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(U(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||y(i[n]&&i[n].then)))return a.then();for(;n--;)U(i[n],s(n),a.reject);return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&V.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){n.setTimeout((function(){throw t}))};var G=S.Deferred();function H(){_.removeEventListener("DOMContentLoaded",H),n.removeEventListener("load",H),S.ready()}S.fn.ready=function(t){return G.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||G.resolveWith(_,[S]))}}),S.ready.then=G.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?n.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",H),n.addEventListener("load",H));var Y=function(t,e,n,r,i,a,s){var o=0,u=t.length,l=null==n;if("object"===T(n))for(o in i=!0,n)Y(t,e,o,n[o],!0,a,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),l&&(s?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(S(t),n)})),e))for(;o<u;o++)e(t[o],n,s?r:r.call(t[o],o,e(t[o],n)));return i?t:l?e.call(t):u?e(t[0],n):a},z=/^-ms-/,q=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function K(t){return t.replace(z,"ms-").replace(q,X)}var W=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function $(){this.expando=S.expando+$.uid++}$.uid=1,$.prototype={cache:function(t){var e=t[this.expando];return e||(e={},W(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||S.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var Q=new $,Z=new $,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(i){}Z.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return Z.hasData(t)||Q.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,r,i,a=this[0],s=a&&a.attributes;if(void 0===t){if(this.length&&(i=Z.get(a),1===a.nodeType&&!Q.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=K(r.slice(5)),et(a,r,i[r]));Q.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){Z.set(this,t)})):Y(this,(function(e){var n;if(a&&void 0===e)return void 0!==(n=Z.get(a,t))||void 0!==(n=et(a,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var r;if(t)return r=Q.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Q.access(t,e,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=S.queue(t,e=e||"fx"),r=n.length,i=n.shift(),a=S._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete a.stop,i.call(t,(function(){S.dequeue(t,e)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:S.Callbacks("once memory").add((function(){Q.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=S.Deferred(),a=this,s=this.length,o=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Q.get(a[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(o));return o(),i.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],at=_.documentElement,st=function(t){return S.contains(t.ownerDocument,t)},ot={composed:!0};at.getRootNode&&(st=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===S.css(t,"display")};function lt(t,e,n,r){var i,a,s=20,o=r?function(){return r.cur()}:function(){return S.css(t,e,"")},u=o(),l=n&&n[3]||(S.cssNumber[e]?"":"px"),c=t.nodeType&&(S.cssNumber[e]||"px"!==l&&+u)&&rt.exec(S.css(t,e));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;s--;)S.style(t,e,c+l),(1-a)*(1-(a=o()/u||.5))<=0&&(s=0),c/=a;S.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ct={};function dt(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=S.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function ft(t,e){for(var n,r,i=[],a=0,s=t.length;a<s;a++)(r=t[a]).style&&(n=r.style.display,e?("none"===n&&(i[a]=Q.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&ut(r)&&(i[a]=dt(r))):"none"!==n&&(i[a]="none",Q.set(r,"display",n)));for(a=0;a<s;a++)null!=i[a]&&(t[a].style.display=i[a]);return t}S.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ut(this)?S(this).show():S(this).hide()}))}});var ht,pt,gt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;ht=_.createDocumentFragment().appendChild(_.createElement("div")),(pt=_.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),ht.appendChild(pt),m.checkClone=ht.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!ht.cloneNode(!0).lastChild.defaultValue,ht.innerHTML="<option></option>",m.option=!!ht.lastChild;var vt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?S.merge([t],n):n}function bt(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,m.option||(vt.optgroup=vt.option=[1,"<select multiple='multiple'>","</select>"]);var Et=/<|&#?\w+;/;function Tt(t,e,n,r,i){for(var a,s,o,u,l,c,d=e.createDocumentFragment(),f=[],h=0,p=t.length;h<p;h++)if((a=t[h])||0===a)if("object"===T(a))S.merge(f,a.nodeType?[a]:a);else if(Et.test(a)){for(s=s||d.appendChild(e.createElement("div")),o=(mt.exec(a)||["",""])[1].toLowerCase(),s.innerHTML=(u=vt[o]||vt._default)[1]+S.htmlPrefilter(a)+u[2],c=u[0];c--;)s=s.lastChild;S.merge(f,s.childNodes),(s=d.firstChild).textContent=""}else f.push(e.createTextNode(a));for(d.textContent="",h=0;a=f[h++];)if(r&&S.inArray(a,r)>-1)i&&i.push(a);else if(l=st(a),s=_t(d.appendChild(a),"script"),l&&bt(s),n)for(c=0;a=s[c++];)yt.test(a.type||"")&&n.push(a);return d}var St=/^key/,wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,At=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Ct(){return!1}function Dt(t,e){return t===function(){try{return _.activeElement}catch(t){}}()==("focus"===e)}function It(t,e,n,r,i,a){var s,o;if("object"==typeof e){for(o in"string"!=typeof n&&(r=r||n,n=void 0),e)It(t,o,n,r,e[o],a);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===a&&(s=i,(i=function(t){return S().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),t.each((function(){S.event.add(this,e,i,r,n)}))}function Rt(t,e,n){n?(Q.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var r,i,a=Q.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=o.call(arguments),Q.set(this,e,a),r=n(this,e),this[e](),a!==(i=Q.get(this,e))||r?Q.set(this,e,!1):i={},a!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else a.length&&(Q.set(this,e,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Q.get(t,e)&&S.event.add(t,e,xt)}S.event={global:{},add:function(t,e,n,r,i){var a,s,o,u,l,c,d,f,h,p,g,m=Q.get(t);if(W(t))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&S.find.matchesSelector(at,i),n.guid||(n.guid=S.guid++),(u=m.events)||(u=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(F)||[""]).length;l--;)h=g=(o=At.exec(e[l])||[])[1],p=(o[2]||"").split(".").sort(),h&&(d=S.event.special[h]||{},d=S.event.special[h=(i?d.delegateType:d.bindType)||h]||{},c=S.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:p.join(".")},a),(f=u[h])||((f=u[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,p,s)||t.addEventListener&&t.addEventListener(h,s)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),S.event.global[h]=!0)},remove:function(t,e,n,r,i){var a,s,o,u,l,c,d,f,h,p,g,m=Q.hasData(t)&&Q.get(t);if(m&&(u=m.events)){for(l=(e=(e||"").match(F)||[""]).length;l--;)if(h=g=(o=At.exec(e[l])||[])[1],p=(o[2]||"").split(".").sort(),h){for(d=S.event.special[h]||{},f=u[h=(r?d.delegateType:d.bindType)||h]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=f.length;a--;)c=f[a],!i&&g!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(a,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(t,c));s&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,p,m.handle)||S.removeEvent(t,h,m.handle),delete u[h])}else for(h in u)S.event.remove(t,h+e[l],n,r,!0);S.isEmptyObject(u)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,a,s,o=new Array(arguments.length),u=S.event.fix(t),l=(Q.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(o[0]=u,e=1;e<arguments.length;e++)o[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(s=S.event.handlers.call(this,u,l),e=0;(i=s[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,void 0!==(r=((S.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,o))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,a,s,o=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(a=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?S(i,this).index(l)>-1:S.find(i,this,null,[l]).length),s[i]&&a.push(r);a.length&&o.push({elem:l,handlers:a})}return l=this,u<e.length&&o.push({elem:l,handlers:e.slice(u)}),o},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Rt(e,"click",xt),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&I(e,"input")&&Q.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&St.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&wt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(t,e){S.event.special[t]={setup:function(){return Rt(this,t,Dt),!1},trigger:function(){return Rt(this,t),!0},delegateType:e}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,a=t.handleObj;return i&&(i===r||S.contains(r,i))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,r){return It(this,t,e,n,r)},one:function(t,e,n,r){return It(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each((function(){S.event.remove(this,t,n,e)}))}});var Ot=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Nt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function kt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,i,a,s,o;if(1===e.nodeType){if(Q.hasData(t)&&(o=Q.get(t).events))for(i in Q.remove(e,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)S.event.add(e,i,o[i][n]);Z.hasData(t)&&(a=Z.access(t),s=S.extend({},a),Z.set(e,s))}}function Bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function jt(t,e,n,r){e=u(e);var i,a,s,o,l,c,d=0,f=t.length,h=f-1,p=e[0],g=y(p);if(g||f>1&&"string"==typeof p&&!m.checkClone&&Pt.test(p))return t.each((function(i){var a=t.eq(i);g&&(e[0]=p.call(this,i,a.html())),jt(a,e,n,r)}));if(f&&(a=(i=Tt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(o=(s=S.map(_t(i,"script"),Nt)).length;d<f;d++)l=i,d!==h&&(l=S.clone(l,!0,!0),o&&S.merge(s,_t(l,"script"))),n.call(t[d],l,d);if(o)for(c=s[s.length-1].ownerDocument,S.map(s,kt),d=0;d<o;d++)yt.test((l=s[d]).type||"")&&!Q.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):E(l.textContent.replace(Mt,""),l,c))}return t}function Ut(t,e,n){for(var r,i=e?S.filter(e,t):t,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||S.cleanData(_t(r)),r.parentNode&&(n&&st(r)&&bt(_t(r,"script")),r.parentNode.removeChild(r));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,a,s,o=t.cloneNode(!0),u=st(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(s=_t(o),r=0,i=(a=_t(t)).length;r<i;r++)Bt(a[r],s[r]);if(e)if(n)for(a=a||_t(t),s=s||_t(o),r=0,i=a.length;r<i;r++)Ft(a[r],s[r]);else Ft(t,o);return(s=_t(o,"script")).length>0&&bt(s,!u&&_t(t,"script")),o},cleanData:function(t){for(var e,n,r,i=S.event.special,a=0;void 0!==(n=t[a]);a++)if(W(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Ut(this,t,!0)},remove:function(t){return Ut(this,t)},text:function(t){return Y(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return jt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lt(this,t).appendChild(t)}))},prepend:function(){return jt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return Y(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ot.test(t)&&!vt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return jt(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(_t(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,r=[],i=S(t),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),S(i[s])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Vt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ht=function(t,e,n){var r,i,a={};for(i in e)a[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=a[i];return r},Yt=new RegExp(it.join("|"),"i");function zt(t,e,n){var r,i,a,s,o=t.style;return(n=n||Gt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||st(t)||(s=S.style(t,e)),!m.pixelBoxStyles()&&Vt.test(s)&&Yt.test(e)&&(r=o.width,i=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=r,o.minWidth=i,o.maxWidth=a)),void 0!==s?s+"":s}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(c);var t=n.getComputedStyle(c);r="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),i=36===e(t.width),c.style.position="absolute",a=12===e(c.offsetWidth/3),at.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var r,i,a,s,o,u,l=_.createElement("div"),c=_.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,e,r,i;return null==o&&(t=_.createElement("table"),e=_.createElement("tr"),r=_.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",r.style.height="9px",at.appendChild(t).appendChild(e).appendChild(r),i=n.getComputedStyle(e),o=parseInt(i.height)>3,at.removeChild(t)),o}}))}();var Xt=["Webkit","Moz","ms"],Kt=_.createElement("div").style,Wt={};function $t(t){return S.cssProps[t]||Wt[t]||(t in Kt?t:Wt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in Kt)return t}(t)||t)}var Qt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,n){var r=rt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ne(t,e,n,r,i,a){var s="width"===e?1:0,o=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=S.css(t,n+it[s],!0,i)),r?("content"===n&&(u-=S.css(t,"padding"+it[s],!0,i)),"margin"!==n&&(u-=S.css(t,"border"+it[s]+"Width",!0,i))):(u+=S.css(t,"padding"+it[s],!0,i),"padding"!==n?u+=S.css(t,"border"+it[s]+"Width",!0,i):o+=S.css(t,"border"+it[s]+"Width",!0,i));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-u-o-.5))||0),u}function re(t,e,n){var r=Gt(t),i=(!m.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,r),a=i,s=zt(t,e,r),o="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&I(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===S.css(t,"boxSizing",!1,r),(a=o in t)&&(s=t[o])),(s=parseFloat(s)||0)+ne(t,e,n||(i?"border":"content"),a,r,s)+"px"}function ie(t,e,n,r,i){return new ie.prototype.init(t,e,n,r,i)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,a,s,o=K(e),u=Zt.test(e),l=t.style;if(u||(e=$t(o)),s=S.cssHooks[e]||S.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:l[e];"string"==(a=typeof n)&&(i=rt.exec(n))&&i[1]&&(n=lt(t,e,i),a="number"),null!=n&&n==n&&("number"!==a||u||(n+=i&&i[3]||(S.cssNumber[o]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,a,s,o=K(e);return Zt.test(e)||(e=$t(o)),(s=S.cssHooks[e]||S.cssHooks[o])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=zt(t,e,r)),"normal"===i&&e in te&&(i=te[e]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,r){if(n)return!Qt.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?re(t,e,r):Ht(t,Jt,(function(){return re(t,e,r)}))},set:function(t,n,r){var i,a=Gt(t),s=!m.scrollboxSize()&&"absolute"===a.position,o=(s||r)&&"border-box"===S.css(t,"boxSizing",!1,a),u=r?ne(t,e,r,o,a):0;return o&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-ne(t,e,"border",!1,a)-.5)),u&&(i=rt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),ee(0,n,u)}}})),S.cssHooks.marginLeft=qt(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(zt(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+it[r]+e]=a[r]||a[r-2]||a[0];return i}},"margin"!==t&&(S.cssHooks[t+e].set=ee)})),S.fn.extend({css:function(t,e){return Y(this,(function(t,e,n){var r,i,a={},s=0;if(Array.isArray(e)){for(r=Gt(t),i=e.length;s<i;s++)a[e[s]]=S.css(t,e[s],!1,r);return a}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=ie,(ie.prototype={constructor:ie,init:function(t,e,n,r,i,a){this.elem=t,this.prop=n,this.easing=i||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.pos=e=this.options.duration?S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}}).init.prototype=ie.prototype,(ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[$t(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=ie.prototype.init,S.fx.step={};var ae,se,oe=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function le(){se&&(!1===_.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(le):n.setTimeout(le,S.fx.interval),S.fx.tick())}function ce(){return n.setTimeout((function(){ae=void 0})),ae=Date.now()}function de(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=it[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function fe(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),a=0,s=i.length;a<s;a++)if(r=i[a].call(n,e,t))return r}function he(t,e,n){var r,i,a=0,s=he.prefilters.length,o=S.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=ae||ce(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),a=0,s=l.tweens.length;a<s;a++)l.tweens[a].run(r);return o.notifyWith(t,[l,r,n]),r<1&&s?n:(s||o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l]),!1)},l=o.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:ae||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var r=S.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l,e])):o.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,r,i,a,s;for(n in t)if(i=e[r=K(n)],a=t[n],Array.isArray(a)&&(i=a[1],a=t[n]=a[0]),n!==r&&(t[r]=a,delete t[n]),(s=S.cssHooks[r])&&"expand"in s)for(n in a=s.expand(a),delete t[r],a)n in t||(t[n]=a[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);a<s;a++)if(r=he.prefilters[a].call(l,t,c,l.opts))return y(r.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,fe,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)(he.tweeners[n=t[r]]=he.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,a,s,o,u,l,c,d="width"in e||"height"in e,f=this,h={},p=t.style,g=t.nodeType&&ut(t),m=Q.get(t,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,f.always((function(){f.always((function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()}))}))),e)if(oe.test(i=e[r])){if(delete e[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||S.style(t,r)}if((u=!S.isEmptyObject(e))||!S.isEmptyObject(h))for(r in d&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=Q.get(t,"display")),"none"===(c=S.css(t,"display"))&&(l?c=l:(ft([t],!0),l=t.style.display||l,c=S.css(t,"display"),ft([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(t,"float")&&(u||(f.done((function(){p.display=l})),null==l&&(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(m?"hidden"in m&&(g=m.hidden):m=Q.access(t,"fxshow",{display:l}),a&&(m.hidden=!g),g&&ft([t],!0),f.done((function(){for(r in g||ft([t]),Q.remove(t,"fxshow"),h)S.style(t,r,h[r])}))),u=fe(g?m[r]:0,r,f),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in S.fx.speeds?S.fx.speeds[r.duration]:S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),a=S.speed(e,n,r),s=function(){var e=he(this,S.extend({},t),a);(i||Q.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",a=S.timers,s=Q.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ue.test(i)&&r(s[i]);for(i=a.length;i--;)a[i].elem!==this||null!=t&&a[i].queue!==t||(a[i].anim.stop(n),e=!1,a.splice(i,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Q.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],a=S.timers,s=r?r.length:0;for(n.finish=!0,S.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(de(e,!0),t,r,i)}})),S.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(ae=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),ae=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){se||(se=!0,le())},S.fx.stop=function(){se=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,this.queue(e=e||"fx",(function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}}))},function(){var t=_.createElement("input"),e=_.createElement("select").appendChild(_.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=_.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var pe,ge=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return Y(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?S.prop(t,e,n):(1===a&&S.isXMLDoc(t)||(i=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&I(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ge[e]||S.find.attr;ge[e]=function(t,e,r){var i,a,s=e.toLowerCase();return r||(a=ge[s],ge[s]=i,i=null!=n(t,e,r)?s:null,ge[s]=a),i}}));var me=/^(?:input|select|textarea|button)$/i,ye=/^(?:a|area)$/i;function ve(t){return(t.match(F)||[]).join(" ")}function _e(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}S.fn.extend({prop:function(t,e){return Y(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(t)||(i=S.propHooks[e=S.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(t){return null},set:function(t){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,r,i,a,s,o,u=0;if(y(t))return this.each((function(e){S(this).addClass(t.call(this,e,_e(this)))}));if((e=be(t)).length)for(;n=this[u++];)if(i=_e(n),r=1===n.nodeType&&" "+ve(i)+" "){for(s=0;a=e[s++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(o=ve(r))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,r,i,a,s,o,u=0;if(y(t))return this.each((function(e){S(this).removeClass(t.call(this,e,_e(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[u++];)if(i=_e(n),r=1===n.nodeType&&" "+ve(i)+" "){for(s=0;a=e[s++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(o=ve(r))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,_e(this),e),e)})):this.each((function(){var e,i,a,s;if(r)for(i=0,a=S(this),s=be(t);e=s[i++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=_e(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ve(_e(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ee=/\r/g;S.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,S(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ee,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:ve(S.text(t))}},select:{get:function(t){var e,n,r,i=t.options,a=t.selectedIndex,s="select-one"===t.type,o=s?null:[],u=s?a+1:i.length;for(r=a<0?u:s?a:0;r<u;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!I(n.parentNode,"optgroup"))){if(e=S(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,r,i=t.options,a=S.makeArray(e),s=i.length;s--;)((r=i[s]).selected=S.inArray(S.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},m.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in n;var Te=/^(?:focusinfocus|focusoutblur)$/,Se=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,r,i){var a,s,o,u,l,c,d,f,p=[r||_],g=h.call(t,"type")?t.type:t,m=h.call(t,"namespace")?t.namespace.split("."):[];if(s=f=o=r=r||_,3!==r.nodeType&&8!==r.nodeType&&!Te.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[S.expando]?t:new S.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:S.makeArray(e,[t]),d=S.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(r,e))){if(!i&&!d.noBubble&&!v(r)){for(Te.test((u=d.delegateType||g)+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),o=s;o===(r.ownerDocument||_)&&p.push(o.defaultView||o.parentWindow||n)}for(a=0;(s=p[a++])&&!t.isPropagationStopped();)f=s,t.type=a>1?u:d.bindType||g,(c=(Q.get(s,"events")||Object.create(null))[t.type]&&Q.get(s,"handle"))&&c.apply(s,e),(c=l&&s[l])&&c.apply&&W(s)&&(t.result=c.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),e)||!W(r)||l&&y(r[g])&&!v(r)&&((o=r[l])&&(r[l]=null),S.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,Se),r[g](),t.isPropagationStopped()&&f.removeEventListener(g,Se),S.event.triggered=void 0,o&&(r[l]=o)),t.result}},simulate:function(t,e,n){var r=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(r,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){S.event.simulate(e,t.target,S.event.fix(t))};S.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e);i||r.addEventListener(t,n,!0),Q.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e)-1;i?Q.access(r,e,i):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}}));var we=n.location,Ae={guid:Date.now()},xe=/\?/;S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(r){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Ce=/\[\]$/,De=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function Oe(t,e,n,r){var i;if(Array.isArray(e))S.each(e,(function(e,i){n||Ce.test(t)?r(t,i):Oe(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==T(e))r(t,e);else for(i in e)Oe(t+"["+i+"]",e[i],n,r)}S.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){i(this.name,this.value)}));else for(n in t)Oe(n,t[n],e,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Re.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(De,"\r\n")}})):{name:e.name,value:n.replace(De,"\r\n")}})).get()}});var Pe=/%20/g,Me=/#.*$/,Le=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,ke=/^(?:GET|HEAD)$/,Fe=/^\/\//,Be={},je={},Ue="*/".concat("*"),Ve=_.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,a=e.toLowerCase().match(F)||[];if(y(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function He(t,e,n,r){var i={},a=t===je;function s(o){var u;return i[o]=!0,S.each(t[o]||[],(function(t,o){var l=o(e,n,r);return"string"!=typeof l||a||i[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Ye(t,e){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&S.extend(!0,t,r),t}Ve.href=we.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ye(Ye(t,S.ajaxSettings),e):Ye(S.ajaxSettings,t)},ajaxPrefilter:Ge(Be),ajaxTransport:Ge(je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var r,i,a,s,o,u,l,c,d,f,h=S.ajaxSetup({},e=e||{}),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?S(p):S.event,m=S.Deferred(),y=S.Callbacks("once memory"),v=h.statusCode||{},b={},E={},T="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Ne.exec(a);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(t,e){return null==l&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)w.always(t[w.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||T;return r&&r.abort(e),A(0,e),this}};if(m.promise(w),h.url=((t||h.url||we.href)+"").replace(Fe,we.protocol+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(F)||[""],null==h.crossDomain){u=_.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Ve.protocol+"//"+Ve.host!=u.protocol+"//"+u.host}catch(x){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=S.param(h.data,h.traditional)),He(Be,h,e,w),l)return w;for(d in(c=S.event&&h.global)&&0==S.active++&&S.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ke.test(h.type),i=h.url.replace(Me,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Pe,"+")):(f=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(xe.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Le,"$1"),f=(xe.test(i)?"&":"?")+"_="+Ae.guid+++f),h.url=i+f),h.ifModified&&(S.lastModified[i]&&w.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&w.setRequestHeader("If-None-Match",S.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ue+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(p,w,h)||l))return w.abort();if(T="abort",y.add(h.complete),w.done(h.success),w.fail(h.error),r=He(je,h,e,w)){if(w.readyState=1,c&&g.trigger("ajaxSend",[w,h]),l)return w;h.async&&h.timeout>0&&(o=n.setTimeout((function(){w.abort("timeout")}),h.timeout));try{l=!1,r.send(b,A)}catch(x){if(l)throw x;A(-1,x)}}else A(-1,"No Transport");function A(t,e,s,u){var d,f,_,b,E,T=e;l||(l=!0,o&&n.clearTimeout(o),r=void 0,a=u||"",w.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(b=function(t,e,n){for(var r,i,a,s,o=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in o)if(o[i]&&o[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){a=i;break}s||(s=i)}a=a||s}if(a)return a!==u[0]&&u.unshift(a),n[a]}(h,w,s)),!d&&S.inArray("script",h.dataTypes)>-1&&(h.converters["text script"]=function(){}),b=function(t,e,n,r){var i,a,s,o,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(s=l[u+" "+a]||l["* "+a]))for(i in l)if((o=i.split(" "))[1]===a&&(s=l[u+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[i]:!0!==l[i]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(x){return{state:"parsererror",error:s?x:"No conversion from "+u+" to "+a}}}return{state:"success",data:e}}(h,b,w,d),d?(h.ifModified&&((E=w.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=E),(E=w.getResponseHeader("etag"))&&(S.etag[i]=E)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=b.state,f=b.data,d=!(_=b.error))):(_=T,!t&&T||(T="error",t<0&&(t=0))),w.status=t,w.statusText=(e||T)+"",d?m.resolveWith(p,[f,T,w]):m.rejectWith(p,[w,T,_]),w.statusCode(v),v=void 0,c&&g.trigger(d?"ajaxSuccess":"ajaxError",[w,h,d?f:_]),y.fireWith(p,[w,T]),c&&(g.trigger("ajaxComplete",[w,h]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:i,data:n,success:r},S.isPlainObject(t)&&t))}})),S.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},qe=S.ajaxSettings.xhr();m.cors=!!qe&&"withCredentials"in qe,m.ajax=qe=!!qe,S.ajaxTransport((function(t){var e,r;if(m.cors||qe&&!t.crossDomain)return{send:function(i,a){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)o.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=r=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(ze[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=e(),r=o.onerror=o.ontimeout=e("error"),void 0!==o.onabort?o.onabort=r:o.onreadystatechange=function(){4===o.readyState&&n.setTimeout((function(){e&&r()}))},e=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(u){if(e)throw u}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),_.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Xe,Ke=[],We=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||S.expando+"_"+Ae.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,r){var i,a,s,o=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(xe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||S.error(i+" was not called"),s[0]},t.dataTypes[0]="json",a=n[i],n[i]=function(){s=arguments},r.always((function(){void 0===a?S(n).removeProp(i):n[i]=a,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(i)),s&&y(a)&&a(s[0]),s=a=void 0})),"script"})),m.createHTMLDocument=((Xe=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,e.head.appendChild(r)):e=_),a=!n&&[],(i=R.exec(t))?[e.createElement(i[1])]:(i=Tt([t],e,a),a&&a.length&&S(a).remove(),S.merge([],i.childNodes)));var r,i,a},S.fn.load=function(t,e,n){var r,i,a,s=this,o=t.indexOf(" ");return o>-1&&(r=ve(t.slice(o)),t=t.slice(0,o)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&S.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){a=arguments,s.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,a||[t.responseText,e,t])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var r,i,a,s,o,u,l=S.css(t,"position"),c=S(t),d={};"static"===l&&(t.style.position="relative"),o=c.offset(),a=S.css(t,"top"),u=S.css(t,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(a)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,S.extend({},o))),null!=e.top&&(d.top=e.top-o.top+s),null!=e.left&&(d.left=e.left-o.left+i),"using"in e?e.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),c.css(d))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),i.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-S.css(r,"marginTop",!0),left:e.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||at}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(r){return Y(this,(function(t,r,i){var a;if(v(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===i)return a?a[e]:t[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):t[r]=i}),t,r,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=qt(m.pixelPosition,(function(t,n){if(n)return n=zt(t,e),Vt.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){S.fn[r]=function(i,a){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===a?"margin":"border");return Y(this,(function(e,n,i){var a;return v(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===i?S.css(e,n,o):S.style(e,n,i,o)}),e,s?i:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var $e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=o.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||S.guid++,i},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=I,S.isFunction=y,S.isWindow=v,S.camelCase=K,S.type=T,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace($e,"")},void 0===(r=(function(){return S}).apply(e,[]))||(t.exports=r);var Qe=n.jQuery,Ze=n.$;return S.noConflict=function(t){return n.$===S&&(n.$=Ze),t&&n.jQuery===S&&(n.jQuery=Qe),S},void 0===i&&(n.jQuery=n.$=S),S}))},KjvB:function(t,e,n){const r=n("c4+4"),i=n("V26T"),a=new r,s="undefined"!=typeof window?window:self,o=s.crypto||s.msCrypto||{};let u=o.subtle||o.webkitSubtle;function l(t){return a.digest(t)}try{u.digest({name:"sha-1"},new Uint8Array).catch((function(){u=!1}))}catch(c){u=!1}t.exports=function(t,e){u?("string"==typeof t&&(t=function(t){const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}(t)),u.digest({name:"sha-1"},t).then((function(t){e(function(t){const e=t.length,n=[];for(let r=0;r<e;r++){const e=t[r];n.push((e>>>4).toString(16)),n.push((15&e).toString(16))}return n.join("")}(new Uint8Array(t)))}),(function(){e(l(t))}))):"undefined"!=typeof window?i(t,(function(n,r){e(n?l(t):r)})):queueMicrotask(()=>e(l(t)))},t.exports.sync=l},LV99:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){var e=this;e.d3=window.d3?window.d3:n("VphZ"),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function r(t){this.internal=new e(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function t(e,n,r){Object.keys(e).forEach((function(i){n[i]=e[i].bind(r),Object.keys(e[i]).length>0&&t(e[i],n[i],r)}))}(r.prototype,this,this)}function i(t,e){this.component=t,this.params=e||{},this.d3=t.d3,this.scale=this.d3.scaleLinear(),this.orient="bottom",this.innerTickSize=6,this.outerTickSize=this.params.withOuterTick?6:0,this.tickPadding=3,this.tickValues=null,this.tickOffset=0,this.tickCulling=!0,this.tickTextRotate=this.params.tickTextRotate,this.axis=this.generateAxis()}i.prototype.axisX=function(t,e,n){t.attr("transform",(function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"}))},i.prototype.axisY=function(t,e){t.attr("transform",(function(t){return"translate(0,"+Math.ceil(e(t))+")"}))},i.prototype.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},i.prototype.generateTicks=function(t){var e,n,r=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)r.push(e);return r.length>0&&r[0]>0&&r.unshift(r[0]-(r[1]-r[0])),r},i.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},i.prototype.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},i.prototype.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},i.prototype.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var n={h:11.5,w:5.5};return t.select("text").text((function(t){return e.textFormatted(t)})).each((function(t){var r=this.getBoundingClientRect(),i=e.textFormatted(t),a=r.height,s=i?r.width/i.length:void 0;a&&s&&(n.h=a,n.w=s)})).text(""),e.tickTextCharSize=n,n},i.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},i.prototype.tspanData=function(t,e,n){var r=this.params.tickMultiline?this.splitTickText(t,n):[].concat(this.textFormatted(t));return this.params.tickMultiline&&this.params.tickMultilineMax>0&&(r=this.ellipsify(r,this.params.tickMultilineMax)),r.map((function(t){return{index:e,splitted:t,length:r.length}}))},i.prototype.splitTickText=function(t,e){var n,r,i=this,a=i.textFormatted(t),s=i.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(a)?a:((!s||s<=0)&&(s=i.isVertical()?95:i.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function t(e,a){r=void 0;for(var o=1;o<a.length;o++)if(" "===a.charAt(o)&&(r=o),n=a.substr(0,o+1),s<i.tickTextCharSize.w*n.length)return t(e.concat(a.substr(0,r||o)),a.slice(r?r+1:o));return e.concat(a)}([],a+""))},i.prototype.ellipsify=function(t,e){if(t.length<=e)return t;for(var n=t.slice(0,e),r=3,i=e-1;i>=0;i--){var a=n[i].length;if(n[i]=n[i].substr(0,a-r).padEnd(a,"."),(r-=a)<=0)break}return n},i.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},i.prototype.lineY2=function(t){var e=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<e&&e<this.range[1]?this.innerTickSize:0},i.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(t>0?1:-1):this.tickLength},i.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},i.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?t>0?"start":"end":"middle"},i.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},i.prototype.tspanDy=function(t,e){var n=this.tickTextCharSize.h;return 0===e&&(n=this.isVertical()?-(this.tickTextCharSize.h/2*(t.length-1)-3):".71em"),n},i.prototype.generateAxis=function(){var t=this,e=t.d3,n=t.params;function r(i,a){var s;return i.each((function(){var i,o,u,l=r.g=e.select(this),c=this.__chart__||t.scale,d=this.__chart__=t.copyScale(),f=t.tickValues?t.tickValues:t.generateTicks(d),h=l.selectAll(".tick").data(f,d),p=h.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),g=h.exit().remove(),m=h.merge(p);n.isCategory?(t.tickOffset=Math.ceil((d(1)-d(0))/2),o=t.tickCentered?0:t.tickOffset,u=t.tickCentered?t.tickOffset:0):t.tickOffset=o=0,t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(l.select(".tick"));var y=m.select("line").merge(p.append("line")),v=m.select("text").merge(p.append("text")),_=m.selectAll("text").selectAll("tspan").data((function(e,n){return t.tspanData(e,n,d)})),b=_.enter().append("tspan").merge(_).text((function(t){return t.splitted}));_.exit().remove();var E=l.selectAll(".domain").data([0]),T=E.enter().append("path").merge(E).attr("class","domain");switch(t.orient){case"bottom":i=t.axisX,y.attr("x1",o).attr("x2",o).attr("y2",(function(e,n){return t.lineY2(e,n)})),v.attr("x",0).attr("y",(function(e,n){return t.textY(e,n)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),b.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),T.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":i=t.axisX,y.attr("x1",o).attr("x2",o).attr("y2",(function(e,n){return-1*t.lineY2(e,n)})),v.attr("x",0).attr("y",(function(e,r){return-1*t.textY(e,r)-(n.isCategory?2:t.tickLength-2)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),b.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),T.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":i=t.axisY,y.attr("x2",-t.innerTickSize).attr("y1",u).attr("y2",u),v.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),b.attr("x",-t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),T.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":i=t.axisY,y.attr("x2",t.innerTickSize).attr("y1",u).attr("y2",u),v.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),b.attr("x",t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),T.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize)}if(d.rangeBand){var S=d,w=S.rangeBand()/2;c=d=function(t){return S(t)+w}}else c.rangeBand?c=d:g.call(i,d,t.tickOffset);p.call(i,c,t.tickOffset),s=(a?m.transition(a):m).style("opacity",1).call(i,d,t.tickOffset)})),s}return r.scale=function(e){return arguments.length?(t.scale=e,r):t.scale},r.orient=function(e){return arguments.length?(t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",r):t.orient},r.tickFormat=function(e){return arguments.length?(t.tickFormat=e,r):t.tickFormat},r.tickCentered=function(e){return arguments.length?(t.tickCentered=e,r):t.tickCentered},r.tickOffset=function(){return t.tickOffset},r.tickInterval=function(){var e;return(e=n.isCategory?2*t.tickOffset:(r.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize)/r.g.selectAll("line").size())==1/0?0:e},r.ticks=function(){return arguments.length?(t.tickArguments=arguments,r):t.tickArguments},r.tickCulling=function(e){return arguments.length?(t.tickCulling=e,r):t.tickCulling},r.tickValues=function(e){if("function"==typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return r},r};var a={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},s=function(t){return Math.ceil(t)+.5},o=function(t){return 10*Math.ceil(t/10)},u=function(t){return t[1]-t[0]},l=function(t,e,n){return f(t[e])?t[e]:n},c=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:e.width,height:e.height}},d=function(t){return Array.isArray(t)},f=function(t){return void 0!==t},h=function(e){return null==e||g(e)&&0===e.length||"object"===t(e)&&0===Object.keys(e).length},p=function(t){return"function"==typeof t},g=function(t){return"string"==typeof t},m=function(t){return void 0===t},y=function(t){return t||0===t},v=function(t){return!h(t)},_=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},b=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=e,this.d3=e.d3,this.internal=i};b.prototype.init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",a.axis+" "+a.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",a.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",a.axis+" "+a.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",a.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",a.axis+" "+a.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",a.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},b.prototype.getXAxis=function(t,e,n,r,i,a,s){var o=this.owner,u=o.config,l={isCategory:o.isCategorized(),withOuterTick:i,tickMultiline:u.axis_x_tick_multiline,tickMultilineMax:u.axis_x_tick_multiline?Number(u.axis_x_tick_multilineMax):0,tickWidth:u.axis_x_tick_width,tickTextRotate:s?0:u.axis_x_tick_rotate,withoutTransition:a},c=new this.internal(this,l).axis.scale(t).orient(e);return o.isTimeSeries()&&r&&"function"!=typeof r&&(r=r.map((function(t){return o.parseDate(t)}))),c.tickFormat(n).tickValues(r),o.isCategorized()&&(c.tickCentered(u.axis_x_tick_centered),h(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),c},b.prototype.updateXAxisTickValues=function(t,e){var n,r=this.owner,i=r.config;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(n=this.generateTickValues(r.mapTargetsToUniqueXs(t),i.axis_x_tick_count,r.isTimeSeries())),e?e.tickValues(n):(r.xAxis.tickValues(n),r.subXAxis.tickValues(n)),n},b.prototype.getYAxis=function(t,e,n,r,i,a,s){var o=this.owner,u=o.config,l=new this.internal(this,{withOuterTick:i,withoutTransition:a,tickTextRotate:s?0:u.axis_y_tick_rotate}).axis.scale(t).orient(e).tickFormat(n);return o.isTimeSeriesY()?l.ticks(u.axis_y_tick_time_type,u.axis_y_tick_time_interval):l.tickValues(r),l},b.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},b.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return t};return e.axis_x_tick_format&&(p(e.axis_x_tick_format)?n=e.axis_x_tick_format:t.isTimeSeries()&&(n=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),p(n)?function(e){return n.call(t,e)}:n},b.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},b.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},b.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},b.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},b.prototype.getLabelOptionByAxisId=function(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},b.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return g(e)?e:e?e.text:null},b.prototype.setLabelText=function(t,e){var n=this.owner.config,r=this.getLabelOptionByAxisId(t);g(r)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):r&&(r.text=e)},b.prototype.getLabelPosition=function(e,n){var r=this.getLabelOptionByAxisId(e),i=r&&"object"===t(r)&&r.position?r.position:n;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},b.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},b.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},b.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},b.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},b.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},b.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},b.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},b.prototype.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},b.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},b.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},b.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},b.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},b.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},b.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},b.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},b.prototype.textAnchorForY2AxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},b.prototype.getMaxTickWidth=function(t,e){var n,r,i,a,s=this.owner,o=s.config,u=0;return e&&s.currentMaxTickWidths[t]||(s.svg&&(n=s.filterTargetsToShow(s.data.targets),"y"===t?(r=s.y.copy().domain(s.getYDomain(n,"y")),i=this.getYAxis(r,s.yOrient,o.axis_y_tick_format,s.yAxisTickValues,!1,!0,!0)):"y2"===t?(r=s.y2.copy().domain(s.getYDomain(n,"y2")),i=this.getYAxis(r,s.y2Orient,o.axis_y2_tick_format,s.y2AxisTickValues,!1,!0,!0)):(r=s.x.copy().domain(s.getXDomain(n)),i=this.getXAxis(r,s.xOrient,s.xAxisTickFormat,s.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,i)),(a=s.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(i).each((function(){s.d3.select(this).selectAll("text").each((function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)})),a.remove()}))),s.currentMaxTickWidths[t]=u<=0?s.currentMaxTickWidths[t]:u),s.currentMaxTickWidths[t]},b.prototype.updateLabels=function(t){var e=this.owner,n=e.main.select("."+a.axisX+" ."+a.axisXLabel),r=e.main.select("."+a.axisY+" ."+a.axisYLabel),i=e.main.select("."+a.axisY2+" ."+a.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},b.prototype.getPadding=function(t,e,n,r){var i="number"==typeof t?t:t[e];return y(i)?"ratio"===t.unit?t[e]*r:this.convertPixelsToAxisPadding(i,r):n},b.prototype.convertPixelsToAxisPadding=function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},b.prototype.generateTickValues=function(t,e,n){var r,i,a,s,o,u,l,c=t;if(e)if(1===(r=p(e)?e():e))c=[t[0]];else if(2===r)c=[t[0],t[t.length-1]];else if(r>2){for(o=((a=t[t.length-1])-(i=t[0]))/(1+(s=r-2)),c=[i],u=0;u<s;u++)l=+i+o*(u+1),c.push(n?new Date(l):l);c.push(a)}return n||(c=c.sort((function(t,e){return t-e}))),c},b.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},b.prototype.redraw=function(t,e){var n=this.owner,r=t?n.d3.transition().duration(t):null;n.axes.x.style("opacity",e?0:1).call(n.xAxis,r),n.axes.y.style("opacity",e?0:1).call(n.yAxis,r),n.axes.y2.style("opacity",e?0:1).call(n.y2Axis,r),n.axes.subx.style("opacity",e?0:1).call(n.subXAxis,r)};var E={version:"0.6.14",chart:{fn:r.prototype,internal:{fn:e.prototype,axis:{fn:b.prototype,internal:{fn:i.prototype}}}},generate:function(t){return new r(t)}};return e.prototype.beforeInit=function(){},e.prototype.afterInit=function(){},e.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},e.prototype.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(n.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=n.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(t){return t.getMilliseconds()?e.timeFormat(".%L")(t):t.getSeconds()?e.timeFormat(":%S")(t):t.getMinutes()?e.timeFormat("%I:%M")(t):t.getHours()?e.timeFormat("%I %p")(t):t.getDay()&&1!==t.getDate()||1!==t.getDate()||t.getMonth()?e.timeFormat("%-m/%-d")(t):e.timeFormat("%Y/%-m/%-d")(t)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},e.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},e.prototype.initWithData=function(t){var e,n,r=this,i=r.d3,s=r.config,o=!0;r.axis=new b(r),r.selectChart=s.bindto?"function"==typeof s.bindto.node?s.bindto:i.select(s.bindto):i.selectAll([]),r.selectChart.empty()&&(r.selectChart=i.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),o=!1),r.selectChart.html("").classed("c3",!0),r.data.xs={},r.data.targets=r.convertDataToTargets(t),s.data_filter&&(r.data.targets=r.data.targets.filter(s.data_filter)),s.data_hide&&r.addHiddenTargetIds(!0===s.data_hide?r.mapToIds(r.data.targets):s.data_hide),s.legend_hide&&r.addHiddenLegendIds(!0===s.legend_hide?r.mapToIds(r.data.targets):s.legend_hide),r.updateSizes(),r.updateScales(),r.x.domain(i.extent(r.getXDomain(r.data.targets))),r.y.domain(r.getYDomain(r.data.targets,"y")),r.y2.domain(r.getYDomain(r.data.targets,"y2")),r.subX.domain(r.x.domain()),r.subY.domain(r.y.domain()),r.subY2.domain(r.y2.domain()),r.orgXDomain=r.x.domain(),r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return s.onmouseover.call(r)})).on("mouseleave",(function(){return s.onmouseout.call(r)})),r.config.svg_classname&&r.svg.attr("class",r.config.svg_classname),e=r.svg.append("defs"),r.clipChart=r.appendClip(e,r.clipId),r.clipXAxis=r.appendClip(e,r.clipIdForXAxis),r.clipYAxis=r.appendClip(e,r.clipIdForYAxis),r.clipGrid=r.appendClip(e,r.clipIdForGrid),r.clipSubchart=r.appendClip(e,r.clipIdForSubchart),r.updateSvgSize(),n=r.main=r.svg.append("g").attr("transform",r.getTranslate("main")),r.initPie&&r.initPie(),r.initDragZoom&&r.initDragZoom(),r.initSubchart&&r.initSubchart(),r.initTooltip&&r.initTooltip(),r.initLegend&&r.initLegend(),r.initTitle&&r.initTitle(),r.initZoom&&r.initZoom(),r.initSubchartBrush&&r.initSubchartBrush(),n.append("text").attr("class",a.text+" "+a.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),r.initRegion(),r.initGrid(),n.append("g").attr("clip-path",r.clipPath).attr("class",a.chart),s.grid_lines_front&&r.initGridLines(),r.initEventRect(),r.initChartElements(),r.axis.init(),r.updateTargets(r.data.targets),s.axis_x_selection&&r.brush.selectionAsValue(r.getDefaultSelection()),o&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),r.bindResize(),r.bindWindowFocus(),r.api.element=r.selectChart.node()},e.prototype.smoothLines=function(t,e){var n=this;"grid"===e&&t.each((function(){var t=n.d3.select(this),e=t.attr("x1"),r=t.attr("x2"),i=t.attr("y1"),a=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(r),y1:Math.ceil(i),y2:Math.ceil(a)})}))},e.prototype.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,r=t.legend?t.getLegendWidth():0,i=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),s=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),o=e.subchart_show&&!a?e.subchart_size_height+s:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+i+t.getCurrentPaddingBottom(),left:o+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:s+o+i+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+i,left:t.rotated_padding_left}:{top:t.currentHeight-o-i,right:NaN,bottom:s+i,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,r),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?r+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},e.prototype.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},e.prototype.showTargets=function(){var t=this;t.svg.selectAll("."+a.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(t.config.transition_duration).style("opacity",1)},e.prototype.redraw=function(t,e){var n,r,i,s,o,u,c,d,f,h,p,g,m,y,v,_,b,E,T,S,w,A,x,C,D,I,R,O,P,M,L,N=this,k=N.main,F=N.d3,B=N.config,j=N.getShapeIndices(N.isAreaType),U=N.getShapeIndices(N.isBarType),V=N.getShapeIndices(N.isLineType),G=N.hasArcType(),H=N.filterTargetsToShow(N.data.targets),Y=N.xv.bind(N);if(n=l(t=t||{},"withY",!0),r=l(t,"withSubchart",!0),i=l(t,"withTransition",!0),u=l(t,"withTransform",!1),c=l(t,"withUpdateXDomain",!1),d=l(t,"withUpdateOrgXDomain",!1),f=l(t,"withTrimXDomain",!0),m=l(t,"withUpdateXAxis",c),h=l(t,"withLegend",!1),p=l(t,"withEventRect",!0),g=l(t,"withDimension",!0),s=l(t,"withTransitionForExit",i),o=l(t,"withTransitionForAxis",i),T=i?B.transition_duration:0,S=s?T:0,w=o?T:0,e=e||N.axis.generateTransitions(w),h&&B.legend_show?N.updateLegend(N.mapToIds(N.data.targets),t,e):g&&N.updateDimension(!0),N.isCategorized()&&0===H.length&&N.x.domain([0,N.axes.x.selectAll(".tick").size()]),H.length?(N.updateXDomain(H,c,d,f),B.axis_x_tick_values||(I=N.axis.updateXAxisTickValues(H))):(N.xAxis.tickValues([]),N.subXAxis.tickValues([])),B.zoom_rescale&&!t.flow&&(P=N.x.orgDomain()),N.y.domain(N.getYDomain(H,"y",P)),N.y2.domain(N.getYDomain(H,"y2",P)),!B.axis_y_tick_values&&B.axis_y_tick_count&&N.yAxis.tickValues(N.axis.generateTickValues(N.y.domain(),B.axis_y_tick_count)),!B.axis_y2_tick_values&&B.axis_y2_tick_count&&N.y2Axis.tickValues(N.axis.generateTickValues(N.y2.domain(),B.axis_y2_tick_count)),N.axis.redraw(w,G),N.axis.updateLabels(i),(c||m)&&H.length)if(B.axis_x_tick_culling&&I){for(R=1;R<I.length;R++)if(I.length/R<B.axis_x_tick_culling_max){O=R;break}N.svg.selectAll("."+a.axisX+" .tick text").each((function(t){var e=I.indexOf(t);e>=0&&F.select(this).style("display",e%O?"none":"block")}))}else N.svg.selectAll("."+a.axisX+" .tick text").style("display","block");y=N.generateDrawArea?N.generateDrawArea(j,!1):void 0,v=N.generateDrawBar?N.generateDrawBar(U):void 0,_=N.generateDrawLine?N.generateDrawLine(V,!1):void 0,b=N.generateXYForText(j,U,V,!0),E=N.generateXYForText(j,U,V,!1),N.updateCircleY(),M=(N.config.axis_rotated?N.circleY:N.circleX).bind(N),L=(N.config.axis_rotated?N.circleX:N.circleY).bind(N),n&&(N.subY.domain(N.getYDomain(H,"y")),N.subY2.domain(N.getYDomain(H,"y2"))),N.updateXgridFocus(),k.select("text."+a.text+"."+a.empty).attr("x",N.width/2).attr("y",N.height/2).text(B.data_empty_label_text).transition().style("opacity",H.length?0:1),p&&N.redrawEventRect(),N.updateGrid(T),N.updateRegion(T),N.updateBar(S),N.updateLine(S),N.updateArea(S),N.updateCircle(M,L),N.hasDataLabel()&&N.updateText(b,E,S),N.redrawTitle&&N.redrawTitle(),N.redrawArc&&N.redrawArc(T,S,u),N.redrawSubchart&&N.redrawSubchart(r,e,T,S,j,U,V),k.selectAll("."+a.selectedCircles).filter(N.isBarType.bind(N)).selectAll("circle").remove(),t.flow&&(C=N.generateFlow({targets:H,flow:t.flow,duration:t.flow.duration,drawBar:v,drawLine:_,drawArea:y,cx:M,cy:L,xv:Y,xForText:b,yForText:E})),N.isTabVisible()&&(T?(D=F.transition().duration(T),A=[],[N.redrawBar(v,!0,D),N.redrawLine(_,!0,D),N.redrawArea(y,!0,D),N.redrawCircle(M,L,!0,D),N.redrawText(b,E,t.flow,!0,D),N.redrawRegion(!0,D),N.redrawGrid(!0,D)].forEach((function(t){t.forEach((function(t){A.push(t)}))})),x=N.generateWait(),A.forEach((function(t){x.add(t)})),x((function(){C&&C(),B.onrendered&&B.onrendered.call(N)}))):(N.redrawBar(v),N.redrawLine(_),N.redrawArea(y),N.redrawCircle(M,L),N.redrawText(b,E,t.flow),N.redrawRegion(),N.redrawGrid(),C&&C(),B.onrendered&&B.onrendered.call(N))),N.mapToIds(N.data.targets).forEach((function(t){N.withoutFadeIn[t]=!0}))},e.prototype.updateAndRedraw=function(t){var e,n=this,r=n.config;(t=t||{}).withTransition=l(t,"withTransition",!0),t.withTransform=l(t,"withTransform",!1),t.withLegend=l(t,"withLegend",!1),t.withUpdateXDomain=l(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=l(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=l(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&r.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?r.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},e.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},e.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},e.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},e.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||v(t.data_xs))},e.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},e.prototype.getTranslate=function(t){var e,n,r=this,i=r.config;return"main"===t?(e=s(r.margin.left),n=s(r.margin.top)):"context"===t?(e=s(r.margin2.left),n=s(r.margin2.top)):"legend"===t?(e=r.margin3.left,n=r.margin3.top):"x"===t?(e=0,n=i.axis_rotated?0:r.height):"y"===t?(e=0,n=i.axis_rotated?r.height:0):"y2"===t?(e=i.axis_rotated?0:r.width,n=i.axis_rotated?1:0):"subx"===t?(e=0,n=i.axis_rotated?0:r.height2):"arc"===t&&(e=r.arcWidth/2,n=r.arcHeight/2-(r.hasType("gauge")?6:0)),"translate("+e+","+n+")"},e.prototype.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},e.prototype.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},e.prototype.opacityForCircle=function(t){var e=(p(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return y(t.value)?this.isScatterType(t)?.5:e:0},e.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},e.prototype.xx=function(t){return t?this.x(t.x):null},e.prototype.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},e.prototype.yv=function(t){return Math.ceil((t.axis&&"y2"===t.axis?this.y2:this.y)(t.value))},e.prototype.subxx=function(t){return t?this.subX(t.x):null},e.prototype.transformMain=function(t,e){var n,r,i,s=this;e&&e.axisX?n=e.axisX:(n=s.main.select("."+a.axisX),t&&(n=n.transition())),e&&e.axisY?r=e.axisY:(r=s.main.select("."+a.axisY),t&&(r=r.transition())),e&&e.axisY2?i=e.axisY2:(i=s.main.select("."+a.axisY2),t&&(i=i.transition())),(t?s.main.transition():s.main).attr("transform",s.getTranslate("main")),n.attr("transform",s.getTranslate("x")),r.attr("transform",s.getTranslate("y")),i.attr("transform",s.getTranslate("y2")),s.main.select("."+a.chartArcs).attr("transform",s.getTranslate("arc"))},e.prototype.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},e.prototype.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.selectChart.style("max-height",t.currentHeight+"px")},e.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},e.prototype.observeInserted=function(t){var e,n=this;"undefined"!=typeof MutationObserver?(e=new MutationObserver((function(r){r.forEach((function(r){"childList"===r.type&&r.previousSibling&&(e.disconnect(),n.intervalForObserveInserted=window.setInterval((function(){t.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))}),10))}))}))).observe(t.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},e.prototype.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add((function(){e.onresize.call(t)})),e.resize_auto&&t.resizeFunction.add((function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout((function(){delete t.resizeTimeout,t.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.brush&&t.brush.update()}),100)})),t.resizeFunction.add((function(){e.onresized.call(t)})),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(window.onresize):n=t.generateResize(),n.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&n()}}},e.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},e.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},e.prototype.generateResize=function(){var t=[];function e(){t.forEach((function(t){t()}))}return e.add=function(e){t.push(e)},e.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}},e},e.prototype.endall=function(t,e){var n=0;t.each((function(){++n})).on("end",(function(){--n||e.apply(this,arguments)}))},e.prototype.generateWait=function(){var t=this,e=[],n=function(n){var r=setInterval((function(){if(t.isTabVisible()){var i=0;e.forEach((function(t){if(t.empty())i+=1;else try{t.transition()}catch(e){i+=1}})),i===e.length&&(clearInterval(r),n&&n())}}),50)};return n.add=function(t){e.push(t)},n},e.prototype.parseDate=function(e){var n;return e instanceof Date?n=e:"string"==typeof e?n=this.dataTimeParse(e):"object"===t(e)?n=new Date(+e):"number"!=typeof e||isNaN(e)||(n=new Date(+e)),n&&!isNaN(+n)||window.console.error("Failed to parse x '"+e+"' to Date object"),n},e.prototype.isTabVisible=function(){return!document.hidden},e.prototype.getPathBox=c,e.prototype.CLASS=a,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=r,this._y1=i,this._x2=a,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=r,this._y1=i,this._x2=a,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=r,this._y1=i},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=r,this._y1=i},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,r,i,a,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=r,this._r2=i,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,r,i,a,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=r,this._r2=i,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=r,this._y2=i},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=r,this._y2=i},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,r,i,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,r,i,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,r,i,a,s){return new window.SVGPathSegArcAbs(void 0,t,e,n,r,i,a,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,r,i,a,s){return new window.SVGPathSegArcRel(void 0,t,e,n,r,i,a,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(e.pathSegList.removeItem(n),t>e.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach((function(t){"d"==t.attributeName&&(e=!0)})),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach((function(t){t._owningPathSegList=null})),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),this._list[e]=t,t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach((function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()})),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var e=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(t){this.pathSegList.push(t)};var r=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};r.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},r.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},r.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},r.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},r.prototype.peekSegmentType=function(){return this._pathSegTypeFromChar(this._string[this._currentIndex])},r.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},r.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},r.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},r.prototype._parseNumber=function(){var t=0,e=0,n=1,r=0,i=1,a=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,i=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var o=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=o)for(var u=this._currentIndex-1,l=1;u>=o;)e+=l*(this._string.charAt(u--)-"0"),l*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,r+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=e+r;if(c*=i,t&&(c*=Math.pow(10,a*t)),s!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},r.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},r.prototype.parseSegment=function(){var t=this._string[this._currentIndex],n=this._pathSegTypeFromChar(t);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);default:throw"Unknown path seg type."}};var i=new n,a=new r(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var s=a.parseSegment();if(!s)return[];i.appendSegment(s)}return i.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),(r.prototype.axis=function(){}).labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach((function(n){e.axis.setLabelText(n,t[n])})),e.axis.updateLabels())},r.prototype.axis.max=function(e){var n=this.internal,r=n.config;if(!arguments.length)return{x:r.axis_x_max,y:r.axis_y_max,y2:r.axis_y2_max};"object"===t(e)?(y(e.x)&&(r.axis_x_max=e.x),y(e.y)&&(r.axis_y_max=e.y),y(e.y2)&&(r.axis_y2_max=e.y2)):r.axis_y_max=r.axis_y2_max=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},r.prototype.axis.min=function(e){var n=this.internal,r=n.config;if(!arguments.length)return{x:r.axis_x_min,y:r.axis_y_min,y2:r.axis_y2_min};"object"===t(e)?(y(e.x)&&(r.axis_x_min=e.x),y(e.y)&&(r.axis_y_min=e.y),y(e.y2)&&(r.axis_y2_min=e.y2)):r.axis_y_min=r.axis_y2_min=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},r.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};f(t.max)&&this.axis.max(t.max),f(t.min)&&this.axis.min(t.min)},r.prototype.category=function(t,e){var n=this.internal,r=n.config;return arguments.length>1&&(r.axis_x_categories[t]=e,n.redraw()),r.axis_x_categories[t]},r.prototype.categories=function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories},r.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},r.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},r.prototype.destroy=function(){var t=this.internal;if(window.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),window.detachEvent)window.detachEvent("onresize",t.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",t.resizeIfElementDisplayed);else{var e=window.onresize;e&&e.add&&e.remove&&e.remove(t.resizeFunction)}return t.resizeFunction.remove(),t.unbindWindowFocus(),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach((function(e){t[e]=null})),null},r.prototype.color=function(t){return this.internal.color(t)},(r.prototype.data=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter((function(e){return[].concat(t).indexOf(e.id)>=0}))}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},r.prototype.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map((function(t){return t.value})):null),n},r.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},r.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},r.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},r.prototype.flow=function(t){var e,n,r,i,a,s,o,u=this.internal,l=[],c=u.getMaxDataCount(),d=0,h=0;if(t.json)n=u.convertJsonToData(t.json,t.keys);else if(t.rows)n=u.convertRowsToData(t.rows);else{if(!t.columns)return;n=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(n,!0),u.data.targets.forEach((function(t){var n,r,i=!1;for(n=0;n<e.length;n++)if(t.id===e[n].id){for(i=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),d=e[n].values.length,r=0;r<d;r++)e[n].values[r].index=h+r,u.isTimeSeries()||(e[n].values[r].x=h+r);t.values=t.values.concat(e[n].values),e.splice(n,1);break}i||l.push(t.id)})),u.data.targets.forEach((function(t){var e,n;for(e=0;e<l.length;e++)if(t.id===l[e])for(h=t.values[t.values.length-1].index+1,n=0;n<d;n++)t.values.push({id:t.id,index:h+n,x:u.isTimeSeries()?u.getOtherTargetX(h+n):h+n,value:null})})),u.data.targets.length&&e.forEach((function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<h;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach((function(t){t.index+=h,u.isTimeSeries()||(t.x+=h)})),t.values=n.concat(t.values)})),u.data.targets=u.data.targets.concat(e),u.getMaxDataCount(),a=(i=u.data.targets[0]).values[0],f(t.to)?(d=0,o=u.isTimeSeries()?u.parseDate(t.to):t.to,i.values.forEach((function(t){t.x<o&&d++}))):f(t.length)&&(d=t.length),c?1===c&&u.isTimeSeries()&&(s=(i.values[i.values.length-1].x-a.x)/2,r=[new Date(+a.x-s),new Date(+a.x+s)],u.updateXDomain(null,!0,!0,!1,r)):(s=u.isTimeSeries()?i.values.length>1?i.values[i.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,u.updateXDomain(null,!0,!0,!1,r=[a.x-s,a.x])),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:d,duration:y(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:c},withLegend:!0,withTransition:c>1,withTrimXDomain:!1,withUpdateXAxis:!0})},e.prototype.generateFlow=function(t){var e=this,n=e.config,r=e.d3;return function(){var i,s,o,l,c,d,f,h,p,g,m,y=t.targets,v=t.flow,_=t.drawBar,b=t.drawLine,E=t.drawArea,T=t.cx,S=t.cy,w=t.xv,A=t.xForText,x=t.yForText,C=t.duration,D=v.index,I=v.length,R=e.getValueOnIndex(e.data.targets[0].values,D),O=e.getValueOnIndex(e.data.targets[0].values,D+I),P=e.x.domain(),M=v.duration||C,L=v.done||function(){},N=e.generateWait();e.flowing=!0,e.data.targets.forEach((function(t){t.values.splice(0,I)})),o=e.updateXDomain(y,!0,!0),e.updateXGrid&&e.updateXGrid(!0),l=e.xgrid||r.selectAll([]),c=e.xgridLines||r.selectAll([]),d=e.mainRegion||r.selectAll([]),f=e.mainText||r.selectAll([]),h=e.mainBar||r.selectAll([]),p=e.mainLine||r.selectAll([]),g=e.mainArea||r.selectAll([]),m=e.mainCircle||r.selectAll([]),v.orgDataCount?i=1===v.orgDataCount||(R&&R.x)===(O&&O.x)||e.isTimeSeries()?e.x(P[0])-e.x(o[0]):e.x(R.x)-e.x(O.x):1!==e.data.targets[0].values.length?i=e.x(P[0])-e.x(o[0]):e.isTimeSeries()?(R=e.getValueOnIndex(e.data.targets[0].values,0),O=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),i=e.x(R.x)-e.x(O.x)):i=u(o)/2,s="translate("+i+",0) scale("+u(P)/u(o)+",1)",e.hideXGridFocus();var k=r.transition().ease(r.easeLinear).duration(M);N.add(e.xAxis(e.axes.x,k)),N.add(h.transition(k).attr("transform",s)),N.add(p.transition(k).attr("transform",s)),N.add(g.transition(k).attr("transform",s)),N.add(m.transition(k).attr("transform",s)),N.add(f.transition(k).attr("transform",s)),N.add(d.filter(e.isRegionOnX).transition(k).attr("transform",s)),N.add(l.transition(k).attr("transform",s)),N.add(c.transition(k).attr("transform",s)),N((function(){var t,r=[],i=[];if(I){for(t=0;t<I;t++)r.push("."+a.shape+"-"+(D+t)),i.push("."+a.text+"-"+(D+t));e.svg.selectAll("."+a.shapes).selectAll(r).remove(),e.svg.selectAll("."+a.texts).selectAll(i).remove(),e.svg.select("."+a.xgrid).remove()}l.attr("transform",null).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),c.attr("transform",null),c.select("line").attr("x1",n.axis_rotated?0:w).attr("x2",n.axis_rotated?e.width:w),c.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",w),h.attr("transform",null).attr("d",_),p.attr("transform",null).attr("d",b),g.attr("transform",null).attr("d",E),m.attr("transform",null).attr("cx",T).attr("cy",S),f.attr("transform",null).attr("x",A).attr("y",x).style("fill-opacity",e.opacityForText.bind(e)),d.attr("transform",null),d.filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),L(),e.flowing=!1}))}},r.prototype.focus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),e.classed(a.focused,!0).classed(a.defocused,!1),n.hasArcType()&&n.expandArc(t),n.toggleFocusLegend(t,!0),n.focusedTargetIds=t,n.defocusedTargetIds=n.defocusedTargetIds.filter((function(e){return t.indexOf(e)<0}))},r.prototype.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(a.focused,!1).classed(a.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter((function(e){return t.indexOf(e)<0})),e.defocusedTargetIds=t},r.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(a.focused,!1).classed(a.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter((function(){return e.d3.select(this).classed(a.legendItemFocused)})).classed(a.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(r.prototype.xgrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines}).add=function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},r.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(r.prototype.ygrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines}).add=function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},r.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},r.prototype.groups=function(t){var e=this.internal,n=e.config;return m(t)||(n.data_groups=t,e.redraw()),n.data_groups},(r.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},r.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},r.prototype.load=function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&r.prototype.data.names.bind(this)(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){n.data_classes[e]=t.classes[e]})),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){n.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){n.data_colors[e]=t.colors[e]})),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):"unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),(function(){e.loadFromArgs(t)})):e.loadFromArgs(t)},r.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),(function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()}))},(r.prototype.regions=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),n.regions):n.regions}).add=function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},r.prototype.regions.remove=function(t){var e,n,r,i=this.internal,s=i.config;return e=l(t=t||{},"duration",s.transition_duration),n=l(t,"classes",[a.region]),r=i.main.select("."+a.regions).selectAll(n.map((function(t){return"."+t}))),(e?r.transition().duration(e):r).style("opacity",0).remove(),s.regions=s.regions.filter((function(t){var e=!1;return!t.class||(t.class.split(" ").forEach((function(t){n.indexOf(t)>=0&&(e=!0)})),!e)})),s.regions},r.prototype.selected=function(t){var e=this.internal,n=e.d3;return e.main.selectAll("."+a.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+a.shape).filter((function(){return n.select(this).classed(a.SELECTED)})).nodes().map((function(t){var e=t.__data__;return e.data?e.data:e}))},r.prototype.select=function(t,e,n){var r=this.internal,i=r.d3,s=r.config;s.data_selection_enabled&&r.main.selectAll("."+a.shapes).selectAll("."+a.shape).each((function(o,u){var l=i.select(this),c=o.data?o.data.id:o.id,d=r.getToggle(this,o).bind(r),h=s.data_selection_grouped||!t||t.indexOf(c)>=0,p=!e||e.indexOf(u)>=0,g=l.classed(a.SELECTED);l.classed(a.line)||l.classed(a.area)||(h&&p?s.data_selection_isselectable(o)&&!g&&d(!0,l.classed(a.SELECTED,!0),o,u):f(n)&&n&&g&&d(!1,l.classed(a.SELECTED,!1),o,u))}))},r.prototype.unselect=function(t,e){var n=this.internal,r=n.d3,i=n.config;i.data_selection_enabled&&n.main.selectAll("."+a.shapes).selectAll("."+a.shape).each((function(s,o){var u=r.select(this),l=s.data?s.data.id:s.id,c=n.getToggle(this,s).bind(n),d=i.data_selection_grouped||!t||t.indexOf(l)>=0,f=!e||e.indexOf(o)>=0,h=u.classed(a.SELECTED);u.classed(a.line)||u.classed(a.area)||d&&f&&i.data_selection_isselectable(s)&&h&&c(!1,u.classed(a.SELECTED,!1),s,o)}))},r.prototype.show=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.removeHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("display","initial","important").style("opacity",1,"important").call(r.endall,(function(){n.style("opacity",null).style("opacity",1)})),e.withLegend&&r.showLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.prototype.hide=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.addHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("opacity",0,"important").call(r.endall,(function(){n.style("opacity",null).style("opacity",0),n.style("display","none")})),e.withLegend&&r.hideLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.prototype.toggle=function(t,e){var n=this,r=this.internal;r.mapToTargetIds(t).forEach((function(t){r.isTargetToShow(t)?n.hide(t,e):n.show(t,e)}))},(r.prototype.tooltip=function(){}).show=function(t){var e,n,r=this.internal,i={};t.mouse?i=t.mouse:(t.data?n=t.data:void 0!==t.x&&(e=t.id?r.data.targets.filter((function(e){return e.id===t.id})):r.data.targets,n=r.filterByX(e,t.x).slice(0,1)[0]),i=n?r.getMousePosition(n):null),r.dispatchEvent("mousemove",i),r.config.tooltip_onshow.call(r,n)},r.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},r.prototype.transform=function(t,e){var n=this.internal,r=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;n.transformTo(e,t,r)},e.prototype.transformTo=function(t,e,n){var r=this,i=!r.hasArcType(),a=n||{withTransitionForAxis:i};a.withTransitionForTransform=!1,r.transiting=!1,r.setTargetType(t,e),r.updateTargets(r.data.targets),r.updateAndRedraw(a)},r.prototype.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},r.prototype.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(r.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&&(t=t.map((function(t){return e.parseDate(t)}))),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},r.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},r.prototype.zoom.max=function(t){var e=this.internal,n=e.config;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=e.d3.max([e.orgXDomain[1],t])},r.prototype.zoom.min=function(t){var e=this.internal,n=e.config;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=e.d3.min([e.orgXDomain[0],t])},r.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};f(t.max)&&this.domain.max(t.max),f(t.min)&&this.domain.min(t.min)},e.prototype.initPie=function(){var t=this;t.pie=t.d3.pie().value((function(t){return t.values.reduce((function(t,e){return t+e.value}),0)}));var e=t.getOrderFunction();if(e&&(t.isOrderAsc()||t.isOrderDesc())){var n=e;e=function(t,e){return-1*n(t,e)}}t.pie.sort(e||null)},e.prototype.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,r=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=n||(r<=t.radius-t.innerRadius?t.radius-t.innerRadius:r<=t.radius?r:t.radius)},e.prototype.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},e.prototype.updateAngle=function(t){var e,n,r,i,a=this,s=a.config,o=!1,u=0;return s?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach((function(e){o||e.data.id!==t.data.id||(o=!0,(t=e).index=u),u++})),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),a.isGaugeType(t.data)&&(e=s.gauge_min,n=s.gauge_max,r=Math.PI*(s.gauge_fullCircle?2:1)/(n-e),i=t.value<e?0:t.value<n?t.value-e:n-e,t.startAngle=s.gauge_startingAngle,t.endAngle=t.startAngle+r*i),o?t:null):null},e.prototype.getSvgArc=function(){var t=this,e=t.hasType("gauge"),n=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=t.d3.arc().outerRadius((function(r){return e?t.radius-n*r.index:t.radius})).innerRadius((function(r){return e?t.radius-n*(r.index+1):t.innerRadius})),i=function(e,n){var i;return n?r(e):(i=t.updateAngle(e))?r(i):"M 0 0"};return i.centroid=r.centroid,i},e.prototype.getSvgArcExpanded=function(t){t=t||1;var e=this,n=e.hasType("gauge"),r=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=Math.min(e.radiusExpanded*t-e.radius,.8*r-100*(1-t)),a=e.d3.arc().outerRadius((function(a){return n?e.radius-r*a.index+i:e.radiusExpanded*t})).innerRadius((function(t){return n?e.radius-r*(t.index+1):e.innerRadius}));return function(t){var n=e.updateAngle(t);return n?a(n):"M 0 0"}},e.prototype.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},e.prototype.transformForArcLabel=function(t){var e,n,r,i,a,s=this,o=s.config,u=s.updateAngle(t),l="",c=s.hasType("gauge");if(u&&!c)e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1],i=Math.sqrt(n*n+r*r),l="translate("+n*(a=s.hasType("donut")&&o.donut_label_ratio?p(o.donut_label_ratio)?o.donut_label_ratio(t,s.radius,i):o.donut_label_ratio:s.hasType("pie")&&o.pie_label_ratio?p(o.pie_label_ratio)?o.pie_label_ratio(t,s.radius,i):o.pie_label_ratio:s.radius&&i?(36/s.radius>.375?1.175-36/s.radius:.8)*s.radius/i:0)+","+r*a+")";else if(u&&c&&s.filterTargetsToShow(s.data.targets).length>1){var d=Math.sin(u.endAngle-Math.PI/2);l="translate("+(n=Math.cos(u.endAngle-Math.PI/2)*(s.radiusExpanded+25))+","+(r=d*(s.radiusExpanded+15-Math.abs(10*d))+3)+")"}return l},e.prototype.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},e.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},e.prototype.textForArcLabel=function(t){var e,n,r,i,a,s=this;return s.shouldShowArcLabel()?(n=(e=s.updateAngle(t))?e.value:null,r=s.getArcRatio(e),i=t.data.id,s.hasType("gauge")||s.meetsArcLabelThreshold(r)?(a=s.getArcLabelFormat())?a(n,r,i):s.defaultArcValueFormat(n,r):""):""},e.prototype.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},e.prototype.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval((function(){n.transiting||(window.clearInterval(e),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(t))}),10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+a.chartArc)).each((function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each((function(t){n.isDonutType(t.data)}))})))},e.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+a.chartArc)).selectAll("path").transition().duration((function(t){return e.expandDuration(t.data.id)})).attr("d",e.svgArc),e.svg.selectAll("."+a.arc))},e.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},e.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},e.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},e.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},e.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},e.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},e.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},e.prototype.updateTargetsForArc=function(t){var e,n=this,r=n.main,i=n.classChartArc.bind(n),s=n.classArcs.bind(n),o=n.classFocus.bind(n);(e=r.select("."+a.chartArcs).selectAll("."+a.chartArc).data(n.pie(t)).attr("class",(function(t){return i(t)+o(t.data)})).enter().append("g").attr("class",i)).append("g").attr("class",s),e.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},e.prototype.initArc=function(){var t=this;t.arcs=t.main.select("."+a.chart).append("g").attr("class",a.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",a.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},e.prototype.redrawArc=function(t,e,n){var r,i,s,o,u=this,l=u.d3,c=u.config,d=u.main,f=u.hasType("gauge");if(i=(r=d.selectAll("."+a.arcs).selectAll("."+a.arc).data(u.arcData.bind(u))).enter().append("path").attr("class",u.classArc.bind(u)).style("fill",(function(t){return u.color(t.data)})).style("cursor",(function(t){return c.interaction_enabled&&c.data_selection_isselectable(t)?"pointer":null})).each((function(t){u.isGaugeType(t.data)&&(t.startAngle=t.endAngle=c.gauge_startingAngle),this._current=t})).merge(r),f&&(o=(s=d.selectAll("."+a.arcs).selectAll("."+a.arcLabelLine).data(u.arcData.bind(u))).enter().append("rect").attr("class",(function(t){return a.arcLabelLine+" "+a.target+" "+a.target+"-"+t.data.id})).merge(s),1===u.filterTargetsToShow(u.data.targets).length?o.style("display","none"):o.style("fill",(function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data)})).style("display",c.gauge_labelLine_show?"":"none").each((function(t){var e=0,n=0,r=0,i="";if(u.hiddenTargetIds.indexOf(t.data.id)<0){var a=u.updateAngle(t),s=u.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(a.index+1),o=a.endAngle-Math.PI/2,c=u.radius-s,d=o-(0===c?0:1/c);e=u.radiusExpanded-u.radius+s,n=Math.cos(d)*c,r=Math.sin(d)*c,i="rotate("+180*o/Math.PI+", "+n+", "+r+")"}l.select(this).attr("x",n).attr("y",r).attr("width",e).attr("height",2).attr("transform",i).style("stroke-dasharray","0, "+(e+2)+", 0")}))),i.attr("transform",(function(t){return!u.isGaugeType(t.data)&&n?"scale(0)":""})).on("mouseover",c.interaction_enabled?function(t){var e,n;u.transiting||(e=u.updateAngle(t))&&(n=u.convertToArcData(e),u.expandArc(e.data.id),u.api.focus(e.data.id),u.toggleFocusLegend(e.data.id,!0),u.config.data_onmouseover(n,this))}:null).on("mousemove",c.interaction_enabled?function(t){var e,n=u.updateAngle(t);n&&(e=u.convertToArcData(n),u.showTooltip([e],this))}:null).on("mouseout",c.interaction_enabled?function(t){var e,n;u.transiting||(e=u.updateAngle(t))&&(n=u.convertToArcData(e),u.unexpandArc(e.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(n,this))}:null).on("click",c.interaction_enabled?function(t,e){var n,r=u.updateAngle(t);r&&(n=u.convertToArcData(r),u.toggleShape&&u.toggleShape(this,n,e),u.config.data_onclick.call(u.api,n,this))}:null).each((function(){u.transiting=!0})).transition().duration(t).attrTween("d",(function(t){var e,n=u.updateAngle(t);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=l.interpolate(this._current,n),this._current=e(0),function(n){var r=e(n);return r.data=t.data,u.getArc(r,!0)}):function(){return"M 0 0"}})).attr("transform",n?"scale(1)":"").style("fill",(function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data.id)})).call(u.endall,(function(){u.transiting=!1})),r.exit().transition().duration(e).style("opacity",0).remove(),d.selectAll("."+a.chartArc).select("text").style("opacity",0).attr("class",(function(t){return u.isGaugeType(t.data)?a.gaugeValue:""})).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",(function(t){return u.isGaugeType(t.data)&&1===u.filterTargetsToShow(u.data.targets).length?Math.round(u.radius/5)+"px":""})).transition().duration(t).style("opacity",(function(t){return u.isTargetToShow(t.data.id)&&u.isArcType(t.data)?1:0})),d.select("."+a.chartArcsTitle).style("opacity",u.hasType("donut")||f?1:0),f){var h=0,p=u.arcs.select("g."+a.chartArcsBackground).selectAll("path."+a.chartArcsBackground).data(u.data.targets);p.enter().append("path").attr("class",(function(t,e){return a.chartArcsBackground+" "+a.chartArcsBackground+"-"+e})).merge(p).attr("d",(function(t){if(u.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:c.gauge_max}],startAngle:c.gauge_startingAngle,endAngle:-1*c.gauge_startingAngle*(c.gauge_fullCircle?Math.PI:1),index:h++};return u.getArc(e,!0,!0)})),p.exit().remove(),u.arcs.select("."+a.chartArcsGaugeUnit).attr("dy",".75em").text(c.gauge_label_show?c.gauge_units:""),u.arcs.select("."+a.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/(c.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(c.gauge_label_show?u.textForGaugeMinMax(c.gauge_min,!1):""),u.arcs.select("."+a.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/(c.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(c.gauge_label_show?u.textForGaugeMinMax(c.gauge_max,!0):"")}},e.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",a.chartArcsBackground),t.append("text").attr("class",a.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",a.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",a.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},e.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},e.prototype.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},e.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},e.prototype.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n},e.prototype.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},e.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""},e.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},e.prototype.classText=function(t){return this.generateClass(a.text,t.index)},e.prototype.classTexts=function(t){return this.generateClass(a.texts,t.id)},e.prototype.classShape=function(t){return this.generateClass(a.shape,t.index)},e.prototype.classShapes=function(t){return this.generateClass(a.shapes,t.id)},e.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(a.line,t.id)},e.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(a.lines,t.id)},e.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(a.circle,t.index)},e.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(a.circles,t.id)},e.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(a.bar,t.index)},e.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(a.bars,t.id)},e.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(a.arc,t.data.id)},e.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(a.arcs,t.data.id)},e.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(a.area,t.id)},e.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(a.areas,t.id)},e.prototype.classRegion=function(t,e){return this.generateClass(a.region,e)+" "+("class"in t?t.class:"")},e.prototype.classEvent=function(t){return this.generateClass(a.eventRect,t.index)},e.prototype.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+a.target+"-"+e),this.generateClass(a.target,t)+n},e.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},e.prototype.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?a.focused:"")},e.prototype.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?a.defocused:"")},e.prototype.classChartText=function(t){return a.chartText+this.classTarget(t.id)},e.prototype.classChartLine=function(t){return a.chartLine+this.classTarget(t.id)},e.prototype.classChartBar=function(t){return a.chartBar+this.classTarget(t.id)},e.prototype.classChartArc=function(t){return a.chartArc+this.classTarget(t.data.id)},e.prototype.getTargetSelectorSuffix=function(t){return this.generateTargetClass(t).replace(/([?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},e.prototype.selectorTarget=function(t,e){return(e||"")+"."+a.target+this.getTargetSelectorSuffix(t)},e.prototype.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map((function(t){return n.selectorTarget(t,e)})):null},e.prototype.selectorLegend=function(t){return"."+a.legendItem+this.getTargetSelectorSuffix(t)},e.prototype.selectorLegends=function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null},e.prototype.getClipPath=function(t){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"},e.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},e.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},e.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},e.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},e.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},e.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},e.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},e.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},e.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},e.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},e.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},e.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},e.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},e.prototype.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,r=v(t.color_pattern)?t.color_pattern:e.schemeCategory10,i=t.data_color,a=[];return function(t){var e,s=t.id||t.data&&t.data.id||t;return n[s]instanceof Function?e=n[s](t):n[s]?e=n[s]:(a.indexOf(s)<0&&a.push(s),e=r[a.indexOf(s)%r.length],n[s]=e),i instanceof Function?i(e,t):e}},e.prototype.generateLevelColor=function(){var t=this.config,e=t.color_pattern,n=t.color_threshold,r="value"===n.unit,i=n.values&&n.values.length?n.values:[],a=n.max||100;return v(n)&&v(e)?function(t){var n,s=e[e.length-1];for(n=0;n<i.length;n++)if((r?t:100*t/a)<i[n]){s=e[n];break}return s}:null},e.prototype.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,r){return this.getTooltipContent?this.getTooltipContent(t,e,n,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach((function(e){t[e]=this.additionalConfig[e]}),this),t},e.prototype.additionalConfig={},e.prototype.loadConfig=function(e){var n,r,i,a=this.config;Object.keys(a).forEach((function(s){n=e,r=s.split("_"),i=function e(){var i=r.shift();return i&&n&&"object"===t(n)&&i in n?(n=n[i],e()):i?void 0:n}(),f(i)&&(a[s]=i)}))},e.prototype.convertUrlToData=function(t,e,n,r,i){var a,s,o=this,u=e||"csv";"json"===u?(a=o.d3.json,s=o.convertJsonToData):"tsv"===u?(a=o.d3.tsv,s=o.convertXsvToData):(a=o.d3.csv,s=o.convertXsvToData),a(t,n).then((function(t){i.call(o,s.call(o,t,r))})).catch((function(t){throw t}))},e.prototype.convertXsvToData=function(t){var e=t.columns;return 0===t.length?{keys:e,rows:[e.reduce((function(t,e){return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[e]=null,t}({},e))}),{})]}:{keys:e,rows:[].concat(t)}},e.prototype.convertJsonToData=function(t,e){var n,r,i=this,a=[];return e?(e.x?(n=e.value.concat(e.x),i.config.data_x=e.x):n=e.value,a.push(n),t.forEach((function(t){var e=[];n.forEach((function(n){var r=i.findValueInJson(t,n);m(r)&&(r=null),e.push(r)})),a.push(e)})),r=i.convertRowsToData(a)):(Object.keys(t).forEach((function(e){a.push([e].concat(t[e]))})),r=i.convertColumnsToData(a)),r},e.prototype.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<n.length;++r){var i=n[r];if(!(i in t))return;t=t[i]}return t},e.prototype.convertRowsToData=function(t){for(var e=[],n=t[0],r=1;r<t.length;r++){for(var i={},a=0;a<t[r].length;a++){if(m(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");i[n[a]]=t[r][a]}e.push(i)}return{keys:n,rows:e}},e.prototype.convertColumnsToData=function(t){for(var e=[],n=[],r=0;r<t.length;r++){for(var i=t[r][0],a=1;a<t[r].length;a++){if(m(e[a-1])&&(e[a-1]={}),m(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");e[a-1][i]=t[r][a]}n.push(i)}return{keys:n,rows:e}},e.prototype.convertDataToTargets=function(t,e){var n,r,i,a,s=this,o=s.config;return d(t)?a=Object.keys(t[0]):(a=t.keys,t=t.rows),r=a.filter(s.isNotX,s),i=a.filter(s.isX,s),r.forEach((function(n){var r=s.getXKey(n);s.isCustomX()||s.isTimeSeries()?i.indexOf(r)>=0?s.data.xs[n]=(e&&s.data.xs[n]?s.data.xs[n]:[]).concat(t.map((function(t){return t[r]})).filter(y).map((function(t,e){return s.generateTargetX(t,n,e)}))):o.data_x?s.data.xs[n]=s.getOtherTargetXs():v(o.data_xs)&&(s.data.xs[n]=s.getXValuesOfXKey(r,s.data.targets)):s.data.xs[n]=t.map((function(t,e){return e}))})),r.forEach((function(t){if(!s.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')})),(n=r.map((function(e,n){var r=o.data_idConverter(e);return{id:r,id_org:e,values:t.map((function(t,i){var a,u=t[s.getXKey(e)],l=null===t[e]||isNaN(t[e])?null:+t[e];return s.isCustomX()&&s.isCategorized()&&!m(u)?(0===n&&0===i&&(o.axis_x_categories=[]),-1===(a=o.axis_x_categories.indexOf(u))&&(a=o.axis_x_categories.length,o.axis_x_categories.push(u))):a=s.generateTargetX(u,e,i),(m(t[e])||s.data.xs[e].length<=i)&&(a=void 0),{x:a,value:l,id:r}})).filter((function(t){return f(t.x)}))}}))).forEach((function(t){var e;o.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),e=0,t.values.forEach((function(t){t.index=e++})),s.data.xs[t.id].sort((function(t,e){return t-e}))})),s.hasNegativeValue=s.hasNegativeValueInTargets(n),s.hasPositiveValue=s.hasPositiveValueInTargets(n),o.data_type&&s.setTargetType(s.mapToIds(n).filter((function(t){return!(t in o.data_types)})),o.data_type),n.forEach((function(t){s.addCache(t.id_org,t)})),n},e.prototype.isX=function(t){var e,n,r,i=this.config;return i.data_x&&t===i.data_x||v(i.data_xs)&&(e=i.data_xs,n=t,r=!1,Object.keys(e).forEach((function(t){e[t]===n&&(r=!0)})),r)},e.prototype.isNotX=function(t){return!this.isX(t)},e.prototype.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:v(e.data_xs)?e.data_xs[t]:null},e.prototype.getXValuesOfXKey=function(t,e){var n,r=this;return(e&&v(e)?r.mapToIds(e):[]).forEach((function(e){r.getXKey(e)===t&&(n=r.data.xs[e])})),n},e.prototype.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&y(this.data.xs[t][e])?this.data.xs[t][e]:e},e.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},e.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},e.prototype.addXs=function(t){var e=this;Object.keys(t).forEach((function(n){e.config.data_xs[n]=t[n]}))},e.prototype.addName=function(t){var e;return t&&(t.name=void 0!==(e=this.config.data_names[t.id])?e:t.id),t},e.prototype.getValueOnIndex=function(t,e){var n=t.filter((function(t){return t.index===e}));return n.length?n[0]:null},e.prototype.updateTargetX=function(t,e){var n=this;t.forEach((function(t){t.values.forEach((function(r,i){r.x=n.generateTargetX(e[i],t.id,i)})),n.data.xs[t.id]=e}))},e.prototype.updateTargetXs=function(t,e){var n=this;t.forEach((function(t){e[t.id]&&n.updateTargetX([t],e[t.id])}))},e.prototype.generateTargetX=function(t,e,n){var r=this;return r.isTimeSeries()?r.parseDate(t||r.getXValue(e,n)):r.isCustomX()&&!r.isCategorized()?y(t)?+t:r.getXValue(e,n):n},e.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},e.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,(function(t){return t.values.length}))},e.prototype.mapToIds=function(t){return t.map((function(t){return t.id}))},e.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},e.prototype.hasTarget=function(t,e){var n,r=this.mapToIds(t);for(n=0;n<r.length;n++)if(r[n]===e)return!0;return!1},e.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},e.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},e.prototype.filterTargetsToShow=function(t){var e=this;return t.filter((function(t){return e.isTargetToShow(t.id)}))},e.prototype.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map((function(t){return t.values.map((function(t){return+t.x}))})))).values();return(e=this.isTimeSeries()?e.map((function(t){return new Date(+t)})):e.map((function(t){return+t}))).sort((function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}))},e.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},e.prototype.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},e.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},e.prototype.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},e.prototype.getValuesAsIdKeyed=function(t){var e={};return t.forEach((function(t){e[t.id]=[],t.values.forEach((function(n){e[t.id].push(n.value)}))})),e},e.prototype.checkValueInTargets=function(t,e){var n,r,i,a=Object.keys(t);for(n=0;n<a.length;n++)for(i=t[a[n]].values,r=0;r<i.length;r++)if(e(i[r].value))return!0;return!1},e.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},e.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},e.prototype.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},e.prototype.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},e.prototype.getOrderFunction=function(){var t=this.config,e=this.isOrderAsc(),n=this.isOrderDesc();if(e||n){var r=function(t,e){return t+Math.abs(e.value)};return function(t,n){var i=t.values.reduce(r,0),a=n.values.reduce(r,0);return e?a-i:i-a}}if(p(t.data_order))return t.data_order;if(d(t.data_order)){var i=t.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}},e.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&&t.sort(e),t},e.prototype.filterByX=function(t,e){return this.d3.merge(t.map((function(t){return t.values}))).filter((function(t){return t.x-e==0}))},e.prototype.filterRemoveNull=function(t){return t.filter((function(t){return y(t.value)}))},e.prototype.filterByXDomain=function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},e.prototype.hasDataLabel=function(){var e=this.config;return!("boolean"!=typeof e.data_labels||!e.data_labels)||!("object"!==t(e.data_labels)||!v(e.data_labels))},e.prototype.getDataLabelLength=function(t,e,n){var r=this,i=[0,0];return r.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return r.dataLabelFormat(t.id)(t)})).each((function(t,e){i[e]=1.3*this.getBoundingClientRect()[n]})).remove(),i},e.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},e.prototype.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},e.prototype.findClosestFromTargets=function(t,e){var n,r=this;return n=t.map((function(t){return r.findClosest(t.values,e)})),r.findClosest(n,e)},e.prototype.findClosest=function(t,e){var n,r=this,i=r.config.point_sensitivity;return t.filter((function(t){return t&&r.isBarType(t.id)})).forEach((function(t){var e=r.main.select("."+a.bars+r.getTargetSelectorSuffix(t.id)+" ."+a.bar+"-"+t.index).node();!n&&r.isWithinBar(r.d3.mouse(e),e)&&(n=t)})),t.filter((function(t){return t&&!r.isBarType(t.id)})).forEach((function(t){var a=r.dist(t,e);a<i&&(i=a,n=t)})),n},e.prototype.dist=function(t,e){var n=this.config,r=n.axis_rotated?1:0,i=n.axis_rotated?0:1,a=this.circleY(t,t.index),s=this.x(t.x);return Math.sqrt(Math.pow(s-e[r],2)+Math.pow(a-e[i],2))},e.prototype.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},e.prototype.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach((function(t){n[t]=e[t]})),this.redraw({withLegend:!0})),n},e.prototype.load=function(t,e){var n=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach((function(t){n.setTargetType(t.id,e.types&&e.types[t.id]?e.types[t.id]:e.type)})),n.data.targets.forEach((function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}})),n.data.targets=n.data.targets.concat(t)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},e.prototype.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,(function(n){e.load(e.convertDataToTargets(n),t)})):e.load(t.json?e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)):t.rows?e.convertDataToTargets(e.convertRowsToData(t.rows)):t.columns?e.convertDataToTargets(e.convertColumnsToData(t.columns)):null,t)},e.prototype.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter((function(t){return n.hasTarget(n.data.targets,t)})))&&0!==t.length?(n.svg.selectAll(t.map((function(t){return n.selectorTarget(t)}))).transition().style("opacity",0).remove().call(n.endall,e),t.forEach((function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll("."+a.legendItem+n.getTargetSelectorSuffix(t)).remove(),n.data.targets=n.data.targets.filter((function(e){return e.id!==t}))}))):e()},e.prototype.getYDomainMin=function(t){var e,n,r,i,a,s,o=this,u=o.config,l=o.mapToIds(t),c=o.getValuesAsIdKeyed(t);if(u.data_groups.length>0)for(s=o.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter((function(t){return l.indexOf(t)>=0}))).length)for(r=i[0],s&&c[r]&&c[r].forEach((function(t,e){c[r][e]=t<0?t:0})),n=1;n<i.length;n++)c[a=i[n]]&&c[a].forEach((function(t,e){o.axis.getId(a)!==o.axis.getId(r)||!c[r]||s&&+t>0||(c[r][e]+=+t)}));return o.d3.min(Object.keys(c).map((function(t){return o.d3.min(c[t])})))},e.prototype.getYDomainMax=function(t){var e,n,r,i,a,s,o=this,u=o.config,l=o.mapToIds(t),c=o.getValuesAsIdKeyed(t);if(u.data_groups.length>0)for(s=o.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter((function(t){return l.indexOf(t)>=0}))).length)for(r=i[0],s&&c[r]&&c[r].forEach((function(t,e){c[r][e]=t>0?t:0})),n=1;n<i.length;n++)c[a=i[n]]&&c[a].forEach((function(t,e){o.axis.getId(a)!==o.axis.getId(r)||!c[r]||s&&+t<0||(c[r][e]+=+t)}));return o.d3.max(Object.keys(c).map((function(t){return o.d3.max(c[t])})))},e.prototype.getYDomain=function(t,e,n){var r,i,a,s,o,l,c,d,f,h,p=this,g=p.config,m=t.filter((function(t){return p.axis.getId(t.id)===e})),_=n?p.filterByXDomain(m,n):m,b="y2"===e?g.axis_y2_min:g.axis_y_min,E="y2"===e?g.axis_y2_max:g.axis_y_max,T=p.getYDomainMin(_),S=p.getYDomainMax(_),w="y2"===e?g.axis_y2_center:g.axis_y_center,A=p.hasType("bar",_)&&g.bar_zerobased||p.hasType("area",_)&&g.area_zerobased,x="y2"===e?g.axis_y2_inverted:g.axis_y_inverted,C=p.hasDataLabel()&&g.axis_rotated,D=p.hasDataLabel()&&!g.axis_rotated;return T=y(b)?b:y(E)?T<E?T:E-10:T,S=y(E)?E:y(b)?b<S?S:b+10:S,0===_.length?"y2"===e?p.y2.domain():p.y.domain():(isNaN(T)&&(T=0),isNaN(S)&&(S=T),T===S&&(T<0?S=0:T=0),f=T>=0&&S>=0,h=T<=0&&S<=0,(y(b)&&f||y(E)&&h)&&(A=!1),A&&(f&&(T=0),h&&(S=0)),a=s=.1*(i=Math.abs(S-T)),void 0!==w&&(S=w+(o=Math.max(Math.abs(T),Math.abs(S))),T=w-o),C?(l=p.getDataLabelLength(T,S,"width"),c=u(p.y.range()),a+=i*((d=[l[0]/c,l[1]/c])[1]/(1-d[0]-d[1])),s+=i*(d[0]/(1-d[0]-d[1]))):D&&(l=p.getDataLabelLength(T,S,"height"),a+=p.axis.convertPixelsToAxisPadding(l[1],i),s+=p.axis.convertPixelsToAxisPadding(l[0],i)),"y"===e&&v(g.axis_y_padding)&&(a=p.axis.getPadding(g.axis_y_padding,"top",a,i),s=p.axis.getPadding(g.axis_y_padding,"bottom",s,i)),"y2"===e&&v(g.axis_y2_padding)&&(a=p.axis.getPadding(g.axis_y2_padding,"top",a,i),s=p.axis.getPadding(g.axis_y2_padding,"bottom",s,i)),A&&(f&&(s=T),h&&(a=-S)),r=[T-s,S+a],x?r.reverse():r)},e.prototype.getXDomainMin=function(t){var e=this,n=e.config;return f(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,(function(t){return e.d3.min(t.values,(function(t){return t.x}))}))},e.prototype.getXDomainMax=function(t){var e=this,n=e.config;return f(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,(function(t){return e.d3.max(t.values,(function(t){return t.x}))}))},e.prototype.getXDomainPadding=function(e){var n,r,i,a,s=this.config,o=e[1]-e[0];return r=this.isCategorized()?0:this.hasType("bar")?(n=this.getMaxDataCount())>1?o/(n-1)/2:.5:.01*o,"object"===t(s.axis_x_padding)&&v(s.axis_x_padding)?(i=y(s.axis_x_padding.left)?s.axis_x_padding.left:r,a=y(s.axis_x_padding.right)?s.axis_x_padding.right:r):i=a="number"==typeof s.axis_x_padding?s.axis_x_padding:r,{left:i,right:a}},e.prototype.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],r=n[0],i=n[1],a=e.getXDomainPadding(n),s=0,o=0;return r-i!=0||e.isCategorized()||(e.isTimeSeries()?(r=new Date(.5*r.getTime()),i=new Date(1.5*i.getTime())):(r=0===r?1:.5*r,i=0===i?-1:1.5*i)),(r||0===r)&&(s=e.isTimeSeries()?new Date(r.getTime()-a.left):r-a.left),(i||0===i)&&(o=e.isTimeSeries()?new Date(i.getTime()+a.right):i+a.right),[s,o]},e.prototype.updateXDomain=function(t,e,n,r,i){var a=this,s=a.config;return n&&(a.x.domain(i||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),s.zoom_enabled&&a.zoom.update(),a.subX.domain(a.x.domain()),a.brush&&a.brush.updateScale(a.subX)),e&&a.x.domain(i||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.selectionAsValue())),r&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},e.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],r=e[1];return t[0]<=n&&(t[1]=n-t[0]+ +t[1],t[0]=n),r<=t[1]&&(t[0]=+t[0]-(t[1]-r),t[1]=r),t},e.prototype.drag=function(t){var e,n,r,i,s,o,u,l,d=this,f=d.config,h=d.main,p=d.d3;d.hasArcType()||f.data_selection_enabled&&f.data_selection_multiple&&(e=d.dragStart[0],n=d.dragStart[1],r=t[0],i=t[1],s=Math.min(e,r),o=Math.max(e,r),u=f.data_selection_grouped?d.margin.top:Math.min(n,i),l=f.data_selection_grouped?d.height:Math.max(n,i),h.select("."+a.dragarea).attr("x",s).attr("y",u).attr("width",o-s).attr("height",l-u),h.selectAll("."+a.shapes).selectAll("."+a.shape).filter((function(t){return f.data_selection_isselectable(t)})).each((function(t,e){var n,r,i,f,h=p.select(this),g=h.classed(a.SELECTED),m=h.classed(a.INCLUDED),y=!1;if(h.classed(a.circle))n=1*h.attr("cx"),r=1*h.attr("cy"),i=d.togglePoint,y=s<n&&n<o&&u<r&&r<l;else{if(!h.classed(a.bar))return;r=(f=c(this)).y,i=d.togglePath,y=!(o<(n=f.x)||n+f.width<s||l<r||r+f.height<u)}y^m&&(h.classed(a.INCLUDED,!m),h.classed(a.SELECTED,!g),i.call(d,!g,h,t,e))})))},e.prototype.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+a.chart).append("rect").attr("class",a.dragarea).style("opacity",.1),e.dragging=!0)},e.prototype.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+a.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+a.shape).classed(a.INCLUDED,!1),t.dragging=!1)},e.prototype.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,r=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,i,a){return("y2"===e.axis.getId(a)?r:n).call(e,t,i)}},e.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},e.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},e.prototype.defaultValueFormat=function(t){return y(t)?+t:""},e.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},e.prototype.dataLabelFormat=function(e){var n=this.config.data_labels,r=function(t){return y(t)?+t:""};return"function"==typeof n.format?n.format:"object"===t(n.format)?n.format[e]?!0===n.format[e]?r:n.format[e]:function(){return""}:r},e.prototype.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",a.grid),e.grid_x_show&&t.grid.append("g").attr("class",a.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",a.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",a.xgridFocus).append("line").attr("class",a.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},e.prototype.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",a.grid+" "+a.gridLines),t.gridLines.append("g").attr("class",a.xgridLines),t.gridLines.append("g").attr("class",a.ygridLines),t.xgridLines=e.selectAll([])},e.prototype.updateXGrid=function(t){var e=this,n=e.config,r=e.d3,i=e.generateGridData(n.grid_x_type,e.x),s=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-s},y2:function(t){return e.x(t)-s}}:{x1:function(t){return e.x(t)+s},x2:function(t){return e.x(t)+s},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+r.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1};var o=e.main.select("."+a.xgrids).selectAll("."+a.xgrid).data(i),u=o.enter().append("line").attr("class",a.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=u.merge(o),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),o.exit().remove()},e.prototype.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),r=t.main.select("."+a.ygrids).selectAll("."+a.ygrid).data(n),i=r.enter().append("line").attr("class",a.ygrid);t.ygrid=i.merge(r),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),r.exit().remove(),t.smoothLines(t.ygrid,"grid")},e.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"},e.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},e.prototype.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},e.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},e.prototype.updateGrid=function(t){var e,n,r,i,s=this,o=s.main,u=s.config,l=s.xv.bind(s),c=s.yv.bind(s),d=s.xGridTextX.bind(s),f=s.yGridTextX.bind(s);s.grid.style("visibility",s.hasArcType()?"hidden":"visible"),o.select("line."+a.xgridFocus).style("visibility","hidden"),u.grid_x_show&&s.updateXGrid(),(n=(e=o.select("."+a.xgridLines).selectAll("."+a.xgridLine).data(u.grid_x_lines)).enter().append("g").attr("class",(function(t){return a.xgridLine+(t.class?" "+t.class:"")}))).append("line").attr("x1",u.axis_rotated?0:l).attr("x2",u.axis_rotated?s.width:l).attr("y1",u.axis_rotated?l:0).attr("y2",u.axis_rotated?l:s.height).style("opacity",0),n.append("text").attr("text-anchor",s.gridTextAnchor).attr("transform",u.axis_rotated?"":"rotate(-90)").attr("x",u.axis_rotated?f:d).attr("y",l).attr("dx",s.gridTextDx).attr("dy",-5).style("opacity",0),s.xgridLines=n.merge(e),e.exit().transition().duration(t).style("opacity",0).remove(),u.grid_y_show&&s.updateYGrid(),(i=(r=o.select("."+a.ygridLines).selectAll("."+a.ygridLine).data(u.grid_y_lines)).enter().append("g").attr("class",(function(t){return a.ygridLine+(t.class?" "+t.class:"")}))).append("line").attr("x1",u.axis_rotated?c:0).attr("x2",u.axis_rotated?c:s.width).attr("y1",u.axis_rotated?0:c).attr("y2",u.axis_rotated?s.height:c).style("opacity",0),i.append("text").attr("text-anchor",s.gridTextAnchor).attr("transform",u.axis_rotated?"rotate(-90)":"").attr("x",u.axis_rotated?d:f).attr("y",c).attr("dx",s.gridTextDx).attr("dy",-5).style("opacity",0),s.ygridLines=i.merge(r),s.ygridLines.select("line").transition().duration(t).attr("x1",u.axis_rotated?c:0).attr("x2",u.axis_rotated?c:s.width).attr("y1",u.axis_rotated?0:c).attr("y2",u.axis_rotated?s.height:c).style("opacity",1),s.ygridLines.select("text").transition().duration(t).attr("x",u.axis_rotated?s.xGridTextX.bind(s):s.yGridTextX.bind(s)).attr("y",c).text((function(t){return t.text})).style("opacity",1),r.exit().transition().duration(t).style("opacity",0).remove()},e.prototype.redrawGrid=function(t,e){var n=this,r=n.config,i=n.xv.bind(n),a=n.xgridLines.select("line"),s=n.xgridLines.select("text");return[(t?a.transition(e):a).attr("x1",r.axis_rotated?0:i).attr("x2",r.axis_rotated?n.width:i).attr("y1",r.axis_rotated?i:0).attr("y2",r.axis_rotated?i:n.height).style("opacity",1),(t?s.transition(e):s).attr("x",r.axis_rotated?n.yGridTextX.bind(n):n.xGridTextX.bind(n)).attr("y",i).text((function(t){return t.text})).style("opacity",1)]},e.prototype.showXGridFocus=function(t){var e=this,n=e.config,r=t.filter((function(t){return t&&y(t.value)})),i=e.main.selectAll("line."+a.xgridFocus),s=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(i.style("visibility","visible").data([r[0]]).attr(n.axis_rotated?"y1":"x1",s).attr(n.axis_rotated?"y2":"x2",s),e.smoothLines(i,"grid")))},e.prototype.hideXGridFocus=function(){this.main.select("line."+a.xgridFocus).style("visibility","hidden")},e.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+a.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},e.prototype.generateGridData=function(t,e){var n,r,i,s,o=[],u=this.main.select("."+a.axisX).selectAll(".tick").size();if("year"===t)for(r=(n=this.getXDomain())[0].getFullYear(),i=n[1].getFullYear(),s=r;s<=i;s++)o.push(new Date(s+"-01-01 00:00:00"));else(o=e.ticks(10)).length>u&&(o=o.filter((function(t){return(""+t).indexOf(".")<0})));return o},e.prototype.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach((function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)})),n}:function(){return!0}},e.prototype.removeGridLines=function(t,e){var n=this.config,r=this.getGridFilterToRemove(t),i=function(t){return!r(t)},s=e?a.xgridLine:a.ygridLine;this.main.select("."+(e?a.xgridLines:a.ygridLines)).selectAll("."+s).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},e.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+a.chart).append("g").attr("class",a.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+a.eventRects).append("rect").attr("class",a.eventRect),e.zoom_enabled&&t.zoom&&(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},e.prototype.redrawEventRect=function(){var t,e,n=this,r=n.d3,i=n.config;function s(){n.svg.select("."+a.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}t=n.width,e=n.height,n.main.select("."+a.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null),n.eventRect.attr("x",0).attr("y",0).attr("width",t).attr("height",e).on("mouseout",i.interaction_enabled?function(){i&&(n.hasArcType()||s())}:null).on("mousemove",i.interaction_enabled?function(){var t,e,o,u;n.dragging||n.hasArcType(t)||(t=n.filterTargetsToShow(n.data.targets),e=r.mouse(this),o=n.findClosestFromTargets(t,e),!n.mouseover||o&&o.id===n.mouseover.id||(i.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),o?(u=(n.isScatterType(o)||!i.tooltip_grouped?[o]:n.filterByX(t,o.x)).map((function(t){return n.addName(t)})),n.showTooltip(u,this),i.point_focus_expand_enabled&&(n.unexpandCircles(),u.forEach((function(t){n.expandCircles(t.index,t.id,!1)}))),n.expandBars(o.index,o.id,!0),n.showXGridFocus(u),(n.isBarType(o.id)||n.dist(o,e)<i.point_sensitivity)&&(n.svg.select("."+a.eventRect).style("cursor","pointer"),n.mouseover||(i.data_onmouseover.call(n.api,o),n.mouseover=o))):s())}:null).on("click",i.interaction_enabled?function(){var t,e,s;n.hasArcType(t)||(t=n.filterTargetsToShow(n.data.targets),e=r.mouse(this),(s=n.findClosestFromTargets(t,e))&&(n.isBarType(s.id)||n.dist(s,e)<i.point_sensitivity)&&(n.isScatterType(s)||!i.data_selection_grouped?[s]:n.filterByX(t,s.x)).forEach((function(t){n.main.selectAll("."+a.shapes+n.getTargetSelectorSuffix(t.id)).selectAll("."+a.shape+"-"+t.index).each((function(){(i.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,t.index),i.data_onclick.call(n.api,t,this))}))})))}:null).call(i.interaction_enabled&&i.data_selection_draggable&&n.drag?r.drag().on("drag",(function(){n.drag(r.mouse(this))})).on("start",(function(){n.dragstart(r.mouse(this))})).on("end",(function(){n.dragend()})):function(){})},e.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},e.prototype.dispatchEvent=function(t,e){var n=this.main.select("."+a.eventRect).node(),r=n.getBoundingClientRect(),i=r.left+(e?e[0]:0),s=r.top+(e?e[1]:0),o=document.createEvent("MouseEvents");o.initMouseEvent(t,!0,!0,window,0,i,s,i,s,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},e.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},e.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},e.prototype.updateSizeForLegend=function(t,e){var n=this,r=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+r.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-r.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+r.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-r.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?i.left:0}},e.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},e.prototype.updateLegendStep=function(t){this.legendStep=t},e.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},e.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},e.prototype.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},e.prototype.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},e.prototype.opacityForLegend=function(t){return t.classed(a.legendItemHidden)?null:1},e.prototype.opacityForUnfocusedLegend=function(t){return t.classed(a.legendItemHidden)?null:.3},e.prototype.toggleFocusLegend=function(t,e){var n=this;t=n.mapToTargetIds(t),n.legend.selectAll("."+a.legendItem).filter((function(e){return t.indexOf(e)>=0})).classed(a.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))}))},e.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+a.legendItem).classed(a.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(e.select(this))}))},e.prototype.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(e.d3.select(this))}))},e.prototype.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&h(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},e.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},e.prototype.updateLegend=function(t,e,n){var r,i,s,o,u,c,d,h,p,g,m,y,v,_,b,E,T=this,S=T.config,w=0,A=0,x=S.legend_item_tile_width+5,C=0,D={},I={},R={},O=[0],P={},M=0;function L(e,n,r){var i,s,o=0===r,u=r===t.length-1,l=function(t,e){return T.legendItemTextBox[e]||(T.legendItemTextBox[e]=T.getTextRect(t.textContent,a.legendItem,t)),T.legendItemTextBox[e]}(e,n),c=l.width+x+(!u||T.isLegendRight||T.isLegendInset?10:0)+S.legend_padding,d=l.height+4,f=T.isLegendRight||T.isLegendInset?d:c,h=T.isLegendRight||T.isLegendInset?T.getLegendHeight():T.getLegendWidth();function p(t,e){e||(i=(h-C-f)/2)<10&&(i=(h-f)/2,C=0,M++),P[t]=M,O[M]=T.isLegendInset?10:i,D[t]=C,C+=f}o&&(C=0,M=0,w=0,A=0),!S.legend_show||T.isLegendToShow(n)?(I[n]=c,R[n]=d,(!w||c>=w)&&(w=c),(!A||d>=A)&&(A=d),s=T.isLegendRight||T.isLegendInset?A:w,S.legend_equally?(Object.keys(I).forEach((function(t){I[t]=w})),Object.keys(R).forEach((function(t){R[t]=A})),(i=(h-s*t.length)/2)<10?(C=0,M=0,t.forEach((function(t){p(t)}))):p(n,!0)):p(n)):I[n]=R[n]=P[n]=D[n]=0}t=t.filter((function(t){return!f(S.data_names[t])||null!==S.data_names[t]})),m=l(e=e||{},"withTransition",!0),y=l(e,"withTransitionForTransform",!0),T.isLegendInset&&T.updateLegendStep(M=S.legend_inset_step?S.legend_inset_step:t.length),T.isLegendRight?(r=function(t){return w*P[t]},o=function(t){return O[P[t]]+D[t]}):T.isLegendInset?(r=function(t){return w*P[t]+10},o=function(t){return O[P[t]]+D[t]}):(r=function(t){return O[P[t]]+D[t]},o=function(t){return A*P[t]}),i=function(t,e){return r(t,e)+4+S.legend_item_tile_width},u=function(t,e){return o(t,e)+9},s=function(t,e){return r(t,e)},c=function(t,e){return o(t,e)-5},d=function(t,e){return r(t,e)-2},h=function(t,e){return r(t,e)-2+S.legend_item_tile_width},p=function(t,e){return o(t,e)+4},(g=T.legend.selectAll("."+a.legendItem).data(t).enter().append("g").attr("class",(function(t){return T.generateClass(a.legendItem,t)})).style("visibility",(function(t){return T.isLegendToShow(t)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(t){S.legend_item_onclick?S.legend_item_onclick.call(T,t):T.d3.event.altKey?(T.api.hide(),T.api.show(t)):(T.api.toggle(t),T.isTargetToShow(t)?T.api.focus(t):T.api.revert())})).on("mouseover",(function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(T,t):(T.d3.select(this).classed(a.legendItemFocused,!0),!T.transiting&&T.isTargetToShow(t)&&T.api.focus(t))})).on("mouseout",(function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(T,t):(T.d3.select(this).classed(a.legendItemFocused,!1),T.api.revert())}))).append("text").text((function(t){return f(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){L(this,t,e)})).style("pointer-events","none").attr("x",T.isLegendRight||T.isLegendInset?i:-200).attr("y",T.isLegendRight||T.isLegendInset?-200:u),g.append("rect").attr("class",a.legendItemEvent).style("fill-opacity",0).attr("x",T.isLegendRight||T.isLegendInset?s:-200).attr("y",T.isLegendRight||T.isLegendInset?-200:c),g.append("line").attr("class",a.legendItemTile).style("stroke",T.color).style("pointer-events","none").attr("x1",T.isLegendRight||T.isLegendInset?d:-200).attr("y1",T.isLegendRight||T.isLegendInset?-200:p).attr("x2",T.isLegendRight||T.isLegendInset?h:-200).attr("y2",T.isLegendRight||T.isLegendInset?-200:p).attr("stroke-width",S.legend_item_tile_height),E=T.legend.select("."+a.legendBackground+" rect"),T.isLegendInset&&w>0&&0===E.size()&&(E=T.legend.insert("g","."+a.legendItem).attr("class",a.legendBackground).append("rect")),v=T.legend.selectAll("text").data(t).text((function(t){return f(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){L(this,t,e)})),(m?v.transition():v).attr("x",i).attr("y",u),_=T.legend.selectAll("rect."+a.legendItemEvent).data(t),(m?_.transition():_).attr("width",(function(t){return I[t]})).attr("height",(function(t){return R[t]})).attr("x",s).attr("y",c),b=T.legend.selectAll("line."+a.legendItemTile).data(t),(m?b.transition():b).style("stroke",T.levelColor?function(t){return T.levelColor(T.cache[t].values[0].value)}:T.color).attr("x1",d).attr("y1",p).attr("x2",h).attr("y2",p),E&&(m?E.transition():E).attr("height",T.getLegendHeight()-12).attr("width",w*(M+1)+10),T.legend.selectAll("."+a.legendItem).classed(a.legendItemHidden,(function(t){return!T.isTargetToShow(t)})),T.updateLegendItemWidth(w),T.updateLegendItemHeight(A),T.updateLegendStep(M),T.updateSizes(),T.updateScales(),T.updateSvgSize(),T.transformAll(y,n),T.legendHasRendered=!0},e.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",a.regions)},e.prototype.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var r=e.main.select("."+a.regions).selectAll("."+a.region).data(n.regions),i=r.enter().append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",0);e.mainRegion=i.merge(r).attr("class",e.classRegion.bind(e)),r.exit().transition().duration(t).style("opacity",0).remove()},e.prototype.redrawRegion=function(t,e){var n=this,r=n.mainRegion;return[(t?r.transition(e):r).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n)).style("fill-opacity",(function(t){return y(t.opacity)?t.opacity:.1}))]},e.prototype.regionX=function(t){var e=this,n=e.config;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?("y"===t.axis?e.y:e.y2)(t.start):0:n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},e.prototype.regionY=function(t){var e=this,n=e.config;return"y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?("y"===t.axis?e.y:e.y2)(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},e.prototype.regionWidth=function(t){var e,n=this,r=n.config,i=n.regionX(t);return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated&&"end"in t?("y"===t.axis?n.y:n.y2)(t.end):n.width:r.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<i?0:e-i},e.prototype.regionHeight=function(t){var e,n=this,r=n.config,i=this.regionY(t);return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated?n.height:"start"in t?("y"===t.axis?n.y:n.y2)(t.start):n.height:r.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<i?0:e-i},e.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis},e.prototype.getScale=function(t,e,n){return(n?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},e.prototype.getX=function(t,e,n,r){var i,a=this.getScale(t,e,this.isTimeSeries()),s=n?a.domain(n):a;for(i in this.isCategorized()?(r=r||function(){return 0},a=function(t,e){var n=s(t)+r(t);return e?n:Math.ceil(n)}):a=function(t,e){var n=s(t);return e?n:Math.ceil(n)},s)a[i]=s[i];return a.orgDomain=function(){return s.domain()},this.isCategorized()&&(a.domain=function(t){return arguments.length?(s.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},e.prototype.getY=function(t,e,n){var r=this.getScale(t,e,this.isTimeSeriesY());return n&&r.domain(n),r},e.prototype.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},e.prototype.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},e.prototype.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),(function(){return t.xAxis.tickOffset()})),t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,(function(e){return e%1?0:t.subXAxis.tickOffset()})),t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),n||t.brush&&t.brush.updateScale(t.subX),t.updateArc&&t.updateArc()},e.prototype.selectPoint=function(t,e,n){var r=this,i=r.config,s=(i.axis_rotated?r.circleY:r.circleX).bind(r),o=(i.axis_rotated?r.circleX:r.circleY).bind(r),u=r.pointSelectR.bind(r);i.data_onselected.call(r.api,e,t.node()),r.main.select("."+a.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+a.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",(function(){return r.generateClass(a.selectedCircle,n)})).attr("cx",s).attr("cy",o).attr("stroke",(function(){return r.color(e)})).attr("r",(function(t){return 1.4*r.pointSelectR(t)})).transition().duration(100).attr("r",u)},e.prototype.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+a.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+a.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},e.prototype.togglePoint=function(t,e,n,r){t?this.selectPoint(e,n,r):this.unselectPoint(e,n,r)},e.prototype.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.d3.rgb(n.color(e)).brighter(.75)}))},e.prototype.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.color(e)}))},e.prototype.togglePath=function(t,e,n,r){t?this.selectPath(e,n,r):this.unselectPath(e,n,r)},e.prototype.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},e.prototype.toggleShape=function(t,e,n){var r=this,i=r.d3,s=r.config,o=i.select(t),u=o.classed(a.SELECTED),l=r.getToggle(t,e).bind(r);s.data_selection_enabled&&s.data_selection_isselectable(e)&&(s.data_selection_multiple||r.main.selectAll("."+a.shapes+(s.data_selection_grouped?r.getTargetSelectorSuffix(e.id):"")).selectAll("."+a.shape).each((function(t,e){var n=i.select(this);n.classed(a.SELECTED)&&l(!1,n.classed(a.SELECTED,!1),t,e)})),o.classed(a.SELECTED,!u),l(!u,o,e,n))},e.prototype.initBar=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartBars)},e.prototype.updateTargetsForBar=function(t){var e=this,n=e.config,r=e.classChartBar.bind(e),i=e.classBars.bind(e),s=e.classFocus.bind(e);e.main.select("."+a.chartBars).selectAll("."+a.chartBar).data(t).attr("class",(function(t){return r(t)+s(t)})).enter().append("g").attr("class",r).style("pointer-events","none").append("g").attr("class",i).style("cursor",(function(t){return n.data_selection_isselectable(t)?"pointer":null}))},e.prototype.updateBar=function(t){var e=this,n=e.barData.bind(e),r=e.classBar.bind(e),i=e.initialOpacity.bind(e),s=function(t){return e.color(t.id)},o=e.main.selectAll("."+a.bars).selectAll("."+a.bar).data(n),u=o.enter().append("path").attr("class",r).style("stroke",s).style("fill",s);e.mainBar=u.merge(o).style("opacity",i),o.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawBar=function(t,e,n){return[(e?this.mainBar.transition(n):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},e.prototype.getBarW=function(t,e){var n=this.config,r="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&r>n.bar_width_max?n.bar_width_max:r},e.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+a.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+a.bar+(y(t)?"-"+t:""))},e.prototype.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(a.EXPANDED,!0)},e.prototype.unexpandBars=function(t){this.getBars(t).classed(a.EXPANDED,!1)},e.prototype.generateDrawBar=function(t,e){var n=this.config,r=this.generateGetBarPoints(t,e);return function(t,e){var i=r(t,e),a=n.axis_rotated?1:0,s=n.axis_rotated?0:1;return"M "+i[0][a]+","+i[0][s]+" L"+i[1][a]+","+i[1][s]+" L"+i[2][a]+","+i[2][s]+" L"+i[3][a]+","+i[3][s]+" z"}},e.prototype.generateGetBarPoints=function(t,e){var n=this,r=t.__max__+1,i=n.getBarW(e?n.subXAxis:n.xAxis,r),a=n.getShapeX(i,r,t,!!e),s=n.getShapeY(!!e),o=n.getShapeOffset(n.isBarType,t,!!e),u=i*(n.config.bar_space/2),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),c=o(t,e)||r,d=a(t),f=s(t);return n.config.axis_rotated&&(0<t.value&&f<r||t.value<0&&r<f)&&(f=r),[[d+u,c],[d+u,f-(r-c)],[d+i-u,f-(r-c)],[d+i-u,c]]}},e.prototype.isWithinBar=function(t,e){var n=e.getBoundingClientRect(),r=e.pathSegList.getItem(0),i=e.pathSegList.getItem(1),a=Math.min(r.x,i.x),s=Math.min(r.y,i.y);return a-2<t[0]&&t[0]<a+n.width+2&&s-2<t[1]&&t[1]<s+n.height+2},e.prototype.getShapeIndices=function(t){var e,n,r=this.config,i={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach((function(t){for(e=0;e<r.data_groups.length;e++)if(!(r.data_groups[e].indexOf(t.id)<0))for(n=0;n<r.data_groups[e].length;n++)if(r.data_groups[e][n]in i){i[t.id]=i[r.data_groups[e][n]];break}m(i[t.id])&&(i[t.id]=a++)})),i.__max__=a-1,i},e.prototype.getShapeX=function(t,e,n,r){var i=r?this.subX:this.x;return function(r){var a=r.id in n?n[r.id]:0;return r.x||0===r.x?i(r.x)-t*(e/2-a):0}},e.prototype.getShapeY=function(t){var e=this;return function(n){return(t?e.getSubYScale(n.id):e.getYScale(n.id))(n.value)}},e.prototype.getShapeOffset=function(t,e,n){var r=this,i=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),a=i.map((function(t){return t.id}));return function(t,s){var o=n?r.getSubYScale(t.id):r.getYScale(t.id),u=o(0),l=u;return i.forEach((function(n){var i=r.isStepType(t)?r.convertValuesToStep(n.values):n.values;n.id!==t.id&&e[n.id]===e[t.id]&&a.indexOf(n.id)<a.indexOf(t.id)&&(void 0!==i[s]&&+i[s].x==+t.x||(s=-1,i.forEach((function(e,n){e.x===t.x&&(s=n)}))),s in i&&i[s].value*t.value>=0&&(l+=o(i[s].value)-u))})),l}},e.prototype.isWithinShape=function(t,e){var n,r=this,i=r.d3.select(t);return r.isTargetToShow(e.id)?"circle"===t.nodeName?n=r.isStepType(e)?r.isWithinStep(t,r.getYScale(e.id)(e.value)):r.isWithinCircle(t,1.5*r.pointSelectR(e)):"path"===t.nodeName&&(n=!i.classed(a.bar)||r.isWithinBar(r.d3.mouse(t),t)):n=!1,n},e.prototype.getInterpolate=function(t){var e=this,n=e.d3,r={linear:n.curveLinear,"linear-closed":n.curveLinearClosed,basis:n.curveBasis,"basis-open":n.curveBasisOpen,"basis-closed":n.curveBasisClosed,bundle:n.curveBundle,cardinal:n.curveCardinal,"cardinal-open":n.curveCardinalOpen,"cardinal-closed":n.curveCardinalClosed,monotone:n.curveMonotoneX,step:n.curveStep,"step-before":n.curveStepBefore,"step-after":n.curveStepAfter};return e.isSplineType(t)?r[e.config.spline_interpolation_type]||r.cardinal:e.isStepType(t)?r[e.config.line_step_type]:r.linear},e.prototype.initLine=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartLines)},e.prototype.updateTargetsForLine=function(t){var e,n=this,r=n.config,i=n.classChartLine.bind(n),s=n.classLines.bind(n),o=n.classAreas.bind(n),u=n.classCircles.bind(n),l=n.classFocus.bind(n);(e=n.main.select("."+a.chartLines).selectAll("."+a.chartLine).data(t).attr("class",(function(t){return i(t)+l(t)})).enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none")).append("g").attr("class",s),e.append("g").attr("class",o),e.append("g").attr("class",(function(t){return n.generateClass(a.selectedCircles,t.id)})),e.append("g").attr("class",u).style("cursor",(function(t){return r.data_selection_isselectable(t)?"pointer":null})),t.forEach((function(t){n.main.selectAll("."+a.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+a.selectedCircle).each((function(e){e.value=t.values[e.index].value}))}))},e.prototype.updateLine=function(t){var e=this,n=e.main.selectAll("."+a.lines).selectAll("."+a.line).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=r.merge(n).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",(function(t){return e.isStepType(t)?"crispEdges":""})).attr("transform",null),n.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawLine=function(t,e,n){return[(e?this.mainLine.transition(n):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},e.prototype.generateDrawLine=function(t,e){var n=this,r=n.config,i=n.d3.line(),a=n.generateGetLinePoints(t,e),s=e?n.getSubYScale:n.getYScale,o=function(t){return(e?n.subxx:n.xx).call(n,t)},u=function(t,e){return r.data_groups.length>0?a(t,e)[0][1]:s.call(n,t.id)(t.value)};return i=r.axis_rotated?i.x(u).y(o):i.x(o).y(u),r.line_connectNull||(i=i.defined((function(t){return null!=t.value}))),function(t){var a,o=r.line_connectNull?n.filterRemoveNull(t.values):t.values,u=e?n.subX:n.x,l=s.call(n,t.id),c=0,d=0;return n.isLineType(t)?r.data_regions[t.id]?a=n.lineWithRegions(o,u,l,r.data_regions[t.id]):(n.isStepType(t)&&(o=n.convertValuesToStep(o)),a=i.curve(n.getInterpolate(t))(o)):(o[0]&&(c=u(o[0].x),d=l(o[0].value)),a=r.axis_rotated?"M "+d+" "+c:"M "+c+" "+d),a||"M 0 0"}},e.prototype.generateGetLinePoints=function(t,e){var n=this,r=n.config,i=n.getShapeX(0,t.__max__+1,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isLineType,t,!!e),o=e?n.getSubYScale:n.getYScale;return function(t,e){var u=o.call(n,t.id)(0),l=s(t,e)||u,c=i(t),d=a(t);return r.axis_rotated&&(0<t.value&&d<u||t.value<0&&u<d)&&(d=u),[[c,d-(u-l)],[c,d-(u-l)],[c,d-(u-l)],[c,d-(u-l)]]}},e.prototype.lineWithRegions=function(t,e,n,r){var i,a,s,o,u,l,c,d,h,p,g,y=this,v=y.config,_="M",b=y.isCategorized()?.5:0,E=[];function T(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}if(f(r))for(i=0;i<r.length;i++)E[i]={},E[i].start=m(r[i].start)?t[0].x:y.isTimeSeries()?y.parseDate(r[i].start):r[i].start,E[i].end=m(r[i].end)?t[t.length-1].x:y.isTimeSeries()?y.parseDate(r[i].end):r[i].end;function S(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(p=v.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)},g=v.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)},s=y.isTimeSeries()?function(t,r,i,a){var s=t.x.getTime(),o=r.x-t.x,l=new Date(s+o*i),c=new Date(s+o*(i+a));return S(v.axis_rotated?[[n(u(i)),e(l)],[n(u(i+a)),e(c)]]:[[e(l),n(u(i))],[e(c),n(u(i+a))]])}:function(t,r,i,a){return S(v.axis_rotated?[[n(u(i),!0),e(o(i))],[n(u(i+a),!0),e(o(i+a))]]:[[e(o(i),!0),n(u(i))],[e(o(i+a),!0),n(u(i+a))]])},i=0;i<t.length;i++)if(m(E)||!T(t[i].x,E))_+=" "+p(t[i])+" "+g(t[i]);else for(o=y.getScale(t[i-1].x+b,t[i].x+b,y.isTimeSeries()),u=y.getScale(t[i-1].value,t[i].value),l=e(t[i].x)-e(t[i-1].x),c=n(t[i].value)-n(t[i-1].value),h=2*(d=2/Math.sqrt(Math.pow(l,2)+Math.pow(c,2))),a=d;a<=1;a+=h)_+=s(t[i-1],t[i],a,d);return _},e.prototype.updateArea=function(t){var e=this,n=e.d3,r=e.main.selectAll("."+a.areas).selectAll("."+a.area).data(e.lineData.bind(e)),i=r.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}));e.mainArea=i.merge(r).style("opacity",e.orgAreaOpacity),r.exit().transition().duration(t).style("opacity",0)},e.prototype.redrawArea=function(t,e,n){return[(e?this.mainArea.transition(n):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},e.prototype.generateDrawArea=function(t,e){var n=this,r=n.config,i=n.d3.area(),a=n.generateGetAreaPoints(t,e),s=e?n.getSubYScale:n.getYScale,o=function(t){return(e?n.subxx:n.xx).call(n,t)},u=function(t,e){return r.data_groups.length>0?a(t,e)[0][1]:s.call(n,t.id)(n.getAreaBaseValue(t.id))},l=function(t,e){return r.data_groups.length>0?a(t,e)[1][1]:s.call(n,t.id)(t.value)};return i=r.axis_rotated?i.x0(u).x1(l).y(o):i.x(o).y0(r.area_above?0:u).y1(l),r.line_connectNull||(i=i.defined((function(t){return null!==t.value}))),function(t){var e,a=r.line_connectNull?n.filterRemoveNull(t.values):t.values,s=0,o=0;return n.isAreaType(t)?(n.isStepType(t)&&(a=n.convertValuesToStep(a)),e=i.curve(n.getInterpolate(t))(a)):(a[0]&&(s=n.x(a[0].x),o=n.getYScale(t.id)(a[0].value)),e=r.axis_rotated?"M "+o+" "+s:"M "+s+" "+o),e||"M 0 0"}},e.prototype.getAreaBaseValue=function(){return 0},e.prototype.generateGetAreaPoints=function(t,e){var n=this,r=n.config,i=n.getShapeX(0,t.__max__+1,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),o=e?n.getSubYScale:n.getYScale;return function(t,e){var u=o.call(n,t.id)(0),l=s(t,e)||u,c=i(t),d=a(t);return r.axis_rotated&&(0<t.value&&d<u||t.value<0&&u<d)&&(d=u),[[c,l],[c,d-(u-l)],[c,d-(u-l)],[c,l]]}},e.prototype.updateCircle=function(t,e){var n=this,r=n.main.selectAll("."+a.circles).selectAll("."+a.circle).data(n.lineOrScatterData.bind(n)),i=r.enter().append("circle").attr("class",n.classCircle.bind(n)).attr("cx",t).attr("cy",e).attr("r",n.pointR.bind(n)).style("fill",n.color);n.mainCircle=i.merge(r).style("opacity",n.initialOpacityForCircle.bind(n)),r.exit().style("opacity",0)},e.prototype.redrawCircle=function(t,e,n,r){var i=this,s=i.main.selectAll("."+a.selectedCircle);return[(n?i.mainCircle.transition(r):i.mainCircle).style("opacity",this.opacityForCircle.bind(i)).style("fill",i.color).attr("cx",t).attr("cy",e),(n?s.transition(r):s).attr("cx",t).attr("cy",e)]},e.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},e.prototype.updateCircleY=function(){var t,e,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),e=n.generateGetLinePoints(t),n.circleY=function(t,n){return e(t,n)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}},e.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+a.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+a.circle+(y(t)?"-"+t:""))},e.prototype.expandCircles=function(t,e,n){var r=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(a.EXPANDED,!0).attr("r",r)},e.prototype.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter((function(){return e.d3.select(this).classed(a.EXPANDED)})).classed(a.EXPANDED,!1).attr("r",n)},e.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:p(e.point_r)?e.point_r(t):e.point_r},e.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?p(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},e.prototype.pointSelectR=function(t){var e=this.config;return p(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},e.prototype.isWithinCircle=function(t,e){var n=this.d3,r=n.mouse(t),i=n.select(t),a=+i.attr("cx"),s=+i.attr("cy");return Math.sqrt(Math.pow(a-r[0],2)+Math.pow(s-r[1],2))<e},e.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},e.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},e.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},e.prototype.getCurrentPaddingTop=function(){var t=this.config,e=y(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},e.prototype.getCurrentPaddingBottom=function(){var t=this.config;return y(t.padding_bottom)?t.padding_bottom:0},e.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return y(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(o(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:o(this.getAxisWidthByAxisId("y",t))},e.prototype.getCurrentPaddingRight=function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return y(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):o(t.getAxisWidthByAxisId("y2"))+n},e.prototype.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(r){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},e.prototype.getParentWidth=function(){return this.getParentRectValue("width")},e.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},e.prototype.getSvgLeft=function(t){var e=this,n=e.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,i=e.main.select("."+(n.axis_rotated?a.axisX:a.axisY)).node(),s=i&&r?i.getBoundingClientRect():{right:0},o=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),l=s.right-o.left-(u?0:e.getCurrentPaddingLeft(t));return l>0?l:0},e.prototype.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},e.prototype.getHorizontalAxisHeight=function(t){var e=this,n=e.config,r=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_x_tick_rotate))/180)),"y"===t&&n.axis_rotated&&n.axis_y_tick_rotate&&(r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_y_tick_rotate))/180)),r+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},e.prototype.initBrush=function(t){var e=this,n=e.d3;return e.brush=(e.config.axis_rotated?n.brushY():n.brushX()).on("brush",(function(){var t=n.event.sourceEvent;t&&"zoom"===t.type||e.redrawForBrush()})).on("end",(function(){var t=n.event.sourceEvent;t&&"zoom"===t.type||e.brush.empty()&&t&&"end"!==t.type&&e.brush.clear()})),e.brush.updateExtent=function(){var t=this.scale.range();return this.extent(e.config.axis_rotated?[[0,t[0]],[e.width2,t[1]]]:[[t[0],0],[t[1],e.height2]]),this},e.brush.updateScale=function(t){return this.scale=t,this},e.brush.update=function(t){this.updateScale(t||e.subX).updateExtent(),e.context.select("."+a.brush).call(this)},e.brush.clear=function(){e.context.select("."+a.brush).call(e.brush.move,null)},e.brush.selection=function(){return n.brushSelection(e.context.select("."+a.brush).node())},e.brush.selectionAsValue=function(t,n){var r,i;return t?(e.context&&(r=[this.scale(t[0]),this.scale(t[1])],i=e.context.select("."+a.brush),n&&(i=i.transition()),e.brush.move(i,r)),[]):(r=e.brush.selection()||[0,0],[this.scale.invert(r[0]),this.scale.invert(r[1])])},e.brush.empty=function(){var t=e.brush.selection();return!t||t[0]===t[1]},e.brush.updateScale(t)},e.prototype.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));n.style("visibility",e.subchart_show?"visible":"hidden"),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",a.chart),n.select("."+a.chart).append("g").attr("class",a.chartBars),n.select("."+a.chart).append("g").attr("class",a.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",a.brush),t.axes.subx=n.append("g").attr("class",a.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis)},e.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+a.brush).call(this.brush)},e.prototype.updateTargetsForSubchart=function(t){var e,n,r,i,s=this,o=s.context,u=s.config,l=s.classChartBar.bind(s),c=s.classBars.bind(s),d=s.classChartLine.bind(s),f=s.classLines.bind(s),h=s.classAreas.bind(s);u.subchart_show&&((r=(i=o.select("."+a.chartBars).selectAll("."+a.chartBar).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",l),r.append("g").attr("class",c),(e=(n=o.select("."+a.chartLines).selectAll("."+a.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(n).attr("class",d),e.append("g").attr("class",f),e.append("g").attr("class",h),o.selectAll("."+a.brush+" rect").attr(u.axis_rotated?"width":"height",u.axis_rotated?s.width2:s.height2))},e.prototype.updateBarForSubchart=function(t){var e=this,n=e.context.selectAll("."+a.bars).selectAll("."+a.bar).data(e.barData.bind(e)),r=n.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color);n.exit().transition().duration(t).style("opacity",0).remove(),e.contextBar=r.merge(n).style("opacity",e.initialOpacity.bind(e))},e.prototype.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},e.prototype.updateLineForSubchart=function(t){var e=this,n=e.context.selectAll("."+a.lines).selectAll("."+a.line).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);n.exit().transition().duration(t).style("opacity",0).remove(),e.contextLine=r.merge(n).style("opacity",e.initialOpacity.bind(e))},e.prototype.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},e.prototype.updateAreaForSubchart=function(t){var e=this,n=e.d3,r=e.context.selectAll("."+a.areas).selectAll("."+a.area).data(e.lineData.bind(e)),i=r.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}));r.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=i.merge(r).style("opacity",0)},e.prototype.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},e.prototype.redrawSubchart=function(t,e,n,r,i,a,s){var o,u,l,c=this,d=c.d3,f=c.config;c.context.style("visibility",f.subchart_show?"visible":"hidden"),f.subchart_show&&(d.event&&"zoom"===d.event.type&&c.brush.selectionAsValue(c.x.orgDomain()),t&&(c.brush.empty()||c.brush.selectionAsValue(c.x.orgDomain()),o=c.generateDrawArea(i,!0),u=c.generateDrawBar(a,!0),l=c.generateDrawLine(s,!0),c.updateBarForSubchart(n),c.updateLineForSubchart(n),c.updateAreaForSubchart(n),c.redrawBarForSubchart(u,n,n),c.redrawLineForSubchart(l,n,n),c.redrawAreaForSubchart(o,n,n)))},e.prototype.redrawForBrush=function(){var t,e=this,n=e.x,r=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=r.event.selection||e.brush.scale.range(),e.main.select("."+a.eventRect).call(e.zoom.transform,r.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,n.orgDomain())},e.prototype.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+a.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},e.prototype.getDefaultSelection=function(){var t=this,e=t.config,n=p(e.axis_x_selection)?e.axis_x_selection(t.getXDomain(t.data.targets)):e.axis_x_selection;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},e.prototype.initText=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartTexts),this.mainText=this.d3.selectAll([])},e.prototype.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),r=e.classTexts.bind(e),i=e.classFocus.bind(e),s=e.main.select("."+a.chartTexts).selectAll("."+a.chartText).data(t),o=s.enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none");o.append("g").attr("class",r),o.merge(s).attr("class",(function(t){return n(t)+i(t)}))},e.prototype.updateText=function(t,e,n){var r=this,i=r.config,s=r.barOrLineData.bind(r),o=r.classText.bind(r),u=r.main.selectAll("."+a.texts).selectAll("."+a.text).data(s),l=u.enter().append("text").attr("class",o).attr("text-anchor",(function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"})).style("stroke","none").attr("x",t).attr("y",e).style("fill",(function(t){return r.color(t)})).style("fill-opacity",0);r.mainText=l.merge(u).text((function(t,e,n){return r.dataLabelFormat(t.id)(t.value,t.id,e,n)})),u.exit().transition().duration(n).style("fill-opacity",0).remove()},e.prototype.redrawText=function(t,e,n,r,i){return[(r?this.mainText.transition(i):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},e.prototype.getTextRect=function(t,e,n){var r,i=this.d3.select("body").append("div").classed("c3",!0),a=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s=this.d3.select(n).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",s).text(t).each((function(){r=this.getBoundingClientRect()})),i.remove(),r},e.prototype.generateXYForText=function(t,e,n,r){var i=this,a=i.generateGetAreaPoints(t,!1),s=i.generateGetBarPoints(e,!1),o=i.generateGetLinePoints(n,!1),u=r?i.getXForText:i.getYForText;return function(t,e){var n=i.isAreaType(t)?a:i.isBarType(t)?s:o;return u.call(i,n(t,e),t,this)}},e.prototype.getXForText=function(t,e,n){var r,i,a=this,s=n.getBoundingClientRect();return a.config.axis_rotated?(i=a.isBarType(e)?4:6,r=t[2][1]+i*(e.value<0?-1:1)):r=a.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(r>a.width?r=a.width-s.width:r<0&&(r=4)),r},e.prototype.getYForText=function(t,e,n){var r,i=this,a=n.getBoundingClientRect();return i.config.axis_rotated?r=(t[0][0]+t[2][0]+.6*a.height)/2:(r=t[2][1],e.value<0||0===e.value&&!i.hasPositiveValue?(r+=a.height,i.isBarType(e)&&i.isSafari()?r-=3:!i.isBarType(e)&&i.isChrome()&&(r+=3)):r+=i.isBarType(e)?-3:-6),null!==e.value||i.config.axis_rotated||(r<a.height?r=a.height:r>this.height&&(r=this.height-4)),r},e.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},e.prototype.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},e.prototype.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return n.indexOf("right")>=0?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:n.indexOf("center")>=0?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},e.prototype.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},e.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},e.prototype.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",a.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&g(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map((function(t){return e.addName(t.values[n.tooltip_init_x])})),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},e.prototype.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&&void 0===e.tooltip_order){var n=t.orderTargets(t.data.targets).map((function(t){return t.id}));return(t.isOrderAsc()||t.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}var r=e.tooltip_order;void 0===r&&(r=e.data_order);var i=function(t){return t?t.value:null};if(g(r)&&"asc"===r.toLowerCase())return function(t,e){return i(t)-i(e)};if(g(r)&&"desc"===r.toLowerCase())return function(t,e){return i(e)-i(t)};if(p(r)){var a=r;return void 0===e.tooltip_order&&(a=function(t,e){return r(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),a}return d(r)?function(t,e){return r.indexOf(t.id)-r.indexOf(e.id)}:void 0},e.prototype.getTooltipContent=function(t,e,n,r){var i,a,s,o,u,l,c=this,d=c.config,f=d.tooltip_format_title||e,h=d.tooltip_format_name||function(t){return t},p=d.tooltip_format_value||n,g=this.getTooltipSortFunction();for(g&&t.sort(g),a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)&&(i||(s=_(f?f(t[a].x,t[a].index):t[a].x),i="<table class='"+c.CLASS.tooltip+"'>"+(s||0===s?"<tr><th colspan='2'>"+s+"</th></tr>":"")),void 0!==(o=_(p(t[a].value,t[a].ratio,t[a].id,t[a].index,t))))){if(null===t[a].name)continue;u=_(h(t[a].name,t[a].ratio,t[a].id,t[a].index)),l=c.levelColor?c.levelColor(t[a].value):r(t[a].id),i+="<tr class='"+c.CLASS.tooltipName+"-"+c.getTargetSelectorSuffix(t[a].id)+"'>",i+="<td class='name'><span style='background-color:"+l+"'></span>"+u+"</td>",i+="<td class='value'>"+o+"</td>",i+="</tr>"}return i+"</table>"},e.prototype.tooltipPosition=function(t,e,n,r){var i,a,s,o,u,l=this,c=l.config,d=l.d3,f=l.hasArcType(),h=d.mouse(r);return f?(a=(l.width-(l.isLegendRight?l.getLegendWidth():0))/2+h[0],o=(l.hasType("gauge")?l.height:l.height/2)+h[1]+20):(i=l.getSvgLeft(!0),c.axis_rotated?(s=(a=i+h[0]+100)+e,u=l.currentWidth-l.getCurrentPaddingRight(),o=l.x(t[0].x)+20):(s=(a=i+l.getCurrentPaddingLeft(!0)+l.x(t[0].x)+20)+e,u=i+l.currentWidth-l.getCurrentPaddingRight(),o=h[1]+15),s>u&&(a-=s-u+20),o+n>l.currentHeight&&(o-=n+30)),o<0&&(o=0),{top:o,left:a}},e.prototype.showTooltip=function(t,n){var r,i,a,s=this,o=s.config,u=s.hasArcType(),l=t.filter((function(t){return t&&y(t.value)})),c=o.tooltip_position||e.prototype.tooltipPosition;0!==l.length&&o.tooltip_show&&(s.tooltip.html(o.tooltip_contents.call(s,t,s.axis.getXAxisTickFormat(),s.getYFormat(u),s.color)).style("display","block"),r=s.tooltip.property("offsetWidth"),i=s.tooltip.property("offsetHeight"),a=c.call(this,l,r,i,n),s.tooltip.style("top",a.top+"px").style("left",a.left+"px"))},e.prototype.hideTooltip=function(){this.tooltip.style("display","none")},e.prototype.setTargetType=function(t,e){var n=this,r=n.config;n.mapToTargetIds(t).forEach((function(t){n.withoutFadeIn[t]=e===r.data_types[t],r.data_types[t]=e})),t||(r.data_type=e)},e.prototype.hasType=function(t,e){var n=this.config.data_types,r=!1;return(e=e||this.data.targets)&&e.length?e.forEach((function(e){var i=n[e.id];(i&&i.indexOf(t)>=0||!i&&"line"===t)&&(r=!0)})):Object.keys(n).length?Object.keys(n).forEach((function(e){n[e]===t&&(r=!0)})):r=this.config.data_type===t,r},e.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},e.prototype.isLineType=function(t){var e=this.config,n=g(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0},e.prototype.isStepType=function(t){var e=g(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},e.prototype.isSplineType=function(t){var e=g(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},e.prototype.isAreaType=function(t){var e=g(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},e.prototype.isBarType=function(t){var e=g(t)?t:t.id;return"bar"===this.config.data_types[e]},e.prototype.isScatterType=function(t){var e=g(t)?t:t.id;return"scatter"===this.config.data_types[e]},e.prototype.isPieType=function(t){var e=g(t)?t:t.id;return"pie"===this.config.data_types[e]},e.prototype.isGaugeType=function(t){var e=g(t)?t:t.id;return"gauge"===this.config.data_types[e]},e.prototype.isDonutType=function(t){var e=g(t)?t:t.id;return"donut"===this.config.data_types[e]},e.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},e.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},e.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},e.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},e.prototype.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},e.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},e.prototype.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},e.prototype.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},e.prototype.initZoom=function(){var t,e=this,n=e.d3,r=e.config;return e.zoom=n.zoom().on("start",(function(){if("scroll"===r.zoom_type){var i=n.event.sourceEvent;i&&"brush"===i.type||(t=i,r.zoom_onzoomstart.call(e.api,i))}})).on("zoom",(function(){if("scroll"===r.zoom_type){var t=n.event.sourceEvent;t&&"brush"===t.type||(e.redrawForZoom(),r.zoom_onzoom.call(e.api,e.x.orgDomain()))}})).on("end",(function(){if("scroll"===r.zoom_type){var i=n.event.sourceEvent;i&&"brush"===i.type||i&&t.clientX===i.clientX&&t.clientY===i.clientY||r.zoom_onzoomend.call(e.api,e.x.orgDomain())}})),e.zoom.updateDomain=function(){return n.event&&n.event.transform&&e.x.domain(n.event.transform.rescaleX(e.subX).domain()),this},e.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[e.width,e.height]]).extent([[0,0],[e.width,e.height]]),this},e.zoom.update=function(){return this.updateExtent().updateDomain()},e.zoom.updateExtent()},e.prototype.zoomTransform=function(t){var e=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(e[1]-e[0])).translate(-e[0],0)},e.prototype.initDragZoom=function(){var t=this,e=t.d3,n=t.config,r=t.context=t.svg,i=t.margin.left+20.5,s=t.margin.top+.5;if("drag"===n.zoom_type&&n.zoom_enabled){var o=function(e){return e&&e.map((function(e){return t.x.invert(e)}))},u=t.dragZoomBrush=e.brushX().on("start",(function(){t.api.unzoom(),t.svg.select("."+a.dragZoom).classed("disabled",!1),n.zoom_onzoomstart.call(t.api,e.event.sourceEvent)})).on("brush",(function(){n.zoom_onzoom.call(t.api,o(e.event.selection))})).on("end",(function(){if(null!=e.event.selection){var r=o(e.event.selection);n.zoom_disableDefaultBehavior||t.api.zoom(r),t.svg.select("."+a.dragZoom).classed("disabled",!0),n.zoom_onzoomend.call(t.api,r)}}));r.append("g").classed(a.dragZoom,!0).attr("clip-path",t.clipPath).attr("transform","translate("+i+","+s+")").call(u)}},e.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},e.prototype.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,r=t.zoom,i=t.x;n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length&&(r.update(),n.zoom_disableDefaultBehavior||(t.isCategorized()&&i.orgDomain()[0]===t.orgXDomain[0]&&i.domain([t.orgXDomain[0]-1e-10,i.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&&"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0)))},E}()},NMsv:function(t,e,n){const{getOptions:r,setOptions:i}=n("ScnH"),a=n("wnj/"),s=n("Pq0d"),o=n("DbhI");t.exports={parse:a,stringify:s,types:o,getOptions:r,setOptions:i}},Pq0d:function(t,e,n){const r=n("ScnH"),i=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN"],a=["#EXT-X-KEY","#EXT-X-MAP","#EXT-X-MEDIA"];class s extends Array{constructor(t){super(),this.baseUri=t}push(...t){for(const e of t)if(e.startsWith("#"))if(i.some(t=>e.startsWith(t)))super.push(e);else{if(this.includes(e)){if(a.some(t=>e.startsWith(t)))continue;r.INVALIDPLAYLIST(`Redundant item (${e})`)}super.push(e)}else super.push(e)}}function o(t,e){const n=Math.round(1e3*t)/1e3;return e?n.toFixed(e):n}function u(t,e){const n=[`DATA-ID="${e.id}"`];e.language&&n.push(`LANGUAGE="${e.language}"`),e.value?n.push(`VALUE="${e.value}"`):e.uri&&n.push(`URI="${e.uri}"`),t.push("#EXT-X-SESSION-DATA:"+n.join(","))}function l(t,e,n){const i=n?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",a=["METHOD="+e.method];e.uri&&a.push(`URI="${e.uri}"`),e.iv&&(16!==e.iv.length&&r.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),a.push("IV="+r.byteSequenceToHex(e.iv))),e.format&&a.push(`KEYFORMAT="${e.format}"`),e.formatVersion&&a.push(`KEYFORMATVERSIONS="${e.formatVersion}"`),t.push(`${i}:${a.join(",")}`)}function c(t,e){const n=e.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",i=["BANDWIDTH="+e.bandwidth];if(e.averageBandwidth&&i.push("AVERAGE-BANDWIDTH="+e.averageBandwidth),e.isIFrameOnly&&i.push(`URI="${e.uri}"`),e.codecs&&i.push(`CODECS="${e.codecs}"`),e.resolution&&i.push(`RESOLUTION=${e.resolution.width}x${e.resolution.height}`),e.frameRate&&i.push("FRAME-RATE="+o(e.frameRate,3)),e.hdcpLevel&&i.push("HDCP-LEVEL="+e.hdcpLevel),e.audio.length>0){i.push(`AUDIO="${e.audio[0].groupId}"`);for(const n of e.audio)d(t,n)}if(e.video.length>0){i.push(`VIDEO="${e.video[0].groupId}"`);for(const n of e.video)d(t,n)}if(e.subtitles.length>0){i.push(`SUBTITLES="${e.subtitles[0].groupId}"`);for(const n of e.subtitles)d(t,n)}if(r.getOptions().allowClosedCaptionsNone&&0===e.closedCaptions.length)i.push("CLOSED-CAPTIONS=NONE");else if(e.closedCaptions.length>0){i.push(`CLOSED-CAPTIONS="${e.closedCaptions[0].groupId}"`);for(const n of e.closedCaptions)d(t,n)}t.push(`${n}:${i.join(",")}`),e.isIFrameOnly||t.push(""+e.uri)}function d(t,e){const n=["TYPE="+e.type,`GROUP-ID="${e.groupId}"`,`NAME="${e.name}"`];void 0!==e.isDefault&&n.push("DEFAULT="+(e.isDefault?"YES":"NO")),void 0!==e.autoselect&&n.push("AUTOSELECT="+(e.autoselect?"YES":"NO")),void 0!==e.forced&&n.push("FORCED="+(e.forced?"YES":"NO")),e.language&&n.push(`LANGUAGE="${e.language}"`),e.assocLanguage&&n.push(`ASSOC-LANGUAGE="${e.assocLanguage}"`),e.instreamId&&n.push(`INSTREAM-ID="${e.instreamId}"`),e.characteristics&&n.push(`CHARACTERISTICS="${e.characteristics}"`),e.channels&&n.push(`CHANNELS="${e.channels}"`),e.uri&&n.push(`URI="${e.uri}"`),t.push("#EXT-X-MEDIA:"+n.join(","))}function f(t,e,n=1){e.byterange&&t.push("#EXT-X-BYTERANGE:"+h(e.byterange)),e.discontinuity&&t.push("#EXT-X-DISCONTINUITY"),e.key&&l(t,e.key),e.map&&function(t,e){const n=[`URI="${e.uri}"`];e.byterange&&n.push("BYTERANGE="+h(e.byterange)),t.push("#EXT-X-MAP:"+n.join(","))}(t,e.map),e.programDateTime&&t.push("#EXT-X-PROGRAM-DATE-TIME:"+r.formatDate(e.programDateTime)),e.dateRange&&function(t,e){const n=[`ID="${e.id}"`,`START-DATE="${r.formatDate(e.start)}"`];e.end&&n.push(`END-DATE="${e.end}"`),e.duration&&n.push("DURATION="+e.duration),e.plannedDuration&&n.push("PLANNED-DURATION="+e.plannedDuration),e.classId&&n.push(`CLASS="${e.classId}"`),e.endOnNext&&n.push("END-ON-NEXT=YES"),Object.keys(e.attributes).forEach(t=>{t.startsWith("X-")?n.push("number"==typeof e.attributes[t]?`${t}=${e.attributes[t]}`:`${t}="${e.attributes[t]}"`):t.startsWith("SCTE35-")&&n.push(`${t}=${r.byteSequenceToHex(e.attributes[t])}`)}),t.push("#EXT-X-DATERANGE:"+n.join(","))}(t,e.dateRange),e.markers.length>0&&function(t,e){for(const n of e)"OUT"===n.type?t.push("#EXT-X-CUE-OUT:"+n.duration):"IN"===n.type?t.push("#EXT-X-CUE-IN"):"RAW"===n.type&&t.push(`#${n.tagName}${n.value?":"+n.value:""}`)}(t,e.markers);const i=n<3?Math.round(e.duration):o(e.duration);t.push(`#EXTINF:${i},${unescape(encodeURIComponent(e.title||""))}`),Array.prototype.push.call(t,""+e.uri)}function h(t){return`${t.length}@${t.offset}`}t.exports=function(t){r.PARAMCHECK(t),r.ASSERT("Not a playlist","playlist"===t.type);const e=new s(t.uri);return e.push("#EXTM3U"),t.version&&e.push("#EXT-X-VERSION:"+t.version),t.independentSegments&&e.push("#EXT-X-INDEPENDENT-SEGMENTS"),t.start&&e.push(`#EXT-X-START:TIME-OFFSET=${o(t.start.offset)}${t.start.precise?",PRECISE=YES":""}`),t.isMasterPlaylist?function(t,e){for(const n of e.sessionDataList)u(t,n);for(const n of e.sessionKeyList)l(t,n,!0);for(const n of e.variants)c(t,n)}(e,t):function(t,e){e.targetDuration&&t.push("#EXT-X-TARGETDURATION:"+e.targetDuration),e.mediaSequenceBase&&t.push("#EXT-X-MEDIA-SEQUENCE:"+e.mediaSequenceBase),e.discontinuitySequenceBase&&t.push("#EXT-X-DISCONTINUITY-SEQUENCE:"+e.discontinuitySequenceBase),e.playlistType&&t.push("#EXT-X-PLAYLIST-TYPE:"+e.playlistType),e.isIFrame&&t.push("#EXT-X-I-FRAMES-ONLY");for(const n of e.segments)f(t,n,e.version);e.endlist&&t.push("#EXT-X-ENDLIST")}(e,t),e.join("\n")}},ScnH:function(t,e){let n={};function r(t){if(!n.strictMode)return console.error(t.message);throw t}function i(t,e=10){if("number"==typeof t)return t;let n;return n=10===e?parseFloat(t,e):parseInt(t,e),isNaN(n)?0:n}t.exports={THROW:r,ASSERT:function(t,...e){for(const[n,i]of e.entries())i||r(new Error(`${t} : Failed at [${n}]`))},CONDITIONALASSERT:function(...t){for(const[e,[n,i]]of t.entries())n&&(i||r(new Error(`Conditional Assert : Failed at [${e}]`)))},PARAMCHECK:function(...t){for(const[e,n]of t.entries())void 0===n&&r(new Error(`Param Check : Failed at [${e}]`))},CONDITIONALPARAMCHECK:function(...t){for(const[e,[n,i]]of t.entries())n&&void 0===i&&r(new Error(`Conditional Param Check : Failed at [${e}]`))},INVALIDPLAYLIST:function(t,e){null!=n.onError?n.onError(t,null!=e?e:"-"):r(new Error("Invalid Playlist : "+t))},toInteger:function(t,e=10){let n,r;return n=parseInt(t,e),r=parseFloat(t,e),n!=r&&(n=NaN),n},toNumber:i,hexToByteSequence:function(t){(t.startsWith("0x")||t.startsWith("0X"))&&(t=t.slice(2));const e=[];for(let n=0;n<t.length;n+=2)e.push(i(t.slice(n,n+2),16));return Buffer.from(e)},byteSequenceToHex:function(t,e=0,n=t.length){n<=e&&r(new Error(`end must be larger than start : start=${e}, end=${n}`));const i=[];for(let r=e;r<n;r++)i.push(("0"+(255&t[r]).toString(16).toUpperCase()).slice(-2));return"0x"+i.join("")},tryCatch:function(t,e){try{return t()}catch(n){return e(n)}},splitAt:function(t,e,n=0){let r=-1;for(let i=0,a=0;i<t.length;i++)if(t[i]===e){if(a++===n)return[t.slice(0,i),t.slice(i+1)];r=i}return-1!==r?[t.slice(0,r),t.slice(r+1)]:[t]},trim:function(t,e=" "){return t?(t=t.trim()," "===e||(t.startsWith(e)&&(t=t.slice(1)),t.endsWith(e)&&(t=t.slice(0,-1))),t):t},splitByCommaWithPreservingQuotes:function(t){const e=[];let n=!0,r=0;const i=[];for(let a=0;a<t.length;a++){const s=t[a];n&&","===s?(e.push(t.slice(r,a).trim()),r=a+1):'"'!==s&&"'"!==s||(n?(i.push(s),n=!1):s===i[i.length-1]?(i.pop(),n=!0):i.push(s))}return e.push(t.slice(r).trim()),e},camelify:function(t){const e=[];let n=!1;for(const r of t)"-"!==r&&"_"!==r?n?(e.push(r.toUpperCase()),n=!1):e.push(r.toLowerCase()):n=!0;return e.join("")},formatDate:function(t){return`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`},hasOwnProp:function(t,e){return Object.hasOwnProperty.call(t,e)},setOptions:function(t={}){n=Object.assign(n,t)},getOptions:function(){return Object.assign({},n)}}},V26T:function(t,e,n){const r=n("c4+4");let i,a,s;t.exports=function(t,e){i||(i=r.createWorker(),a=1,s={},i.onmessage=function(t){const e=t.data.id,n=s[e];delete s[e],null!=t.data.error?n(new Error("Rusha worker error: "+t.data.error)):n(null,t.data.hash)}),s[a]=e,i.postMessage({id:a,data:t}),a+=1}},VphZ:function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return r})),n.d(e,"bisect",(function(){return l})),n.d(e,"bisectRight",(function(){return o})),n.d(e,"bisectLeft",(function(){return u})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return a})),n.d(e,"cross",(function(){return f})),n.d(e,"descending",(function(){return h})),n.d(e,"deviation",(function(){return m})),n.d(e,"extent",(function(){return y})),n.d(e,"histogram",(function(){return O})),n.d(e,"thresholdFreedmanDiaconis",(function(){return M})),n.d(e,"thresholdScott",(function(){return L})),n.d(e,"thresholdSturges",(function(){return R})),n.d(e,"max",(function(){return N})),n.d(e,"mean",(function(){return k})),n.d(e,"median",(function(){return F})),n.d(e,"merge",(function(){return B})),n.d(e,"min",(function(){return j})),n.d(e,"pairs",(function(){return c})),n.d(e,"permute",(function(){return U})),n.d(e,"quantile",(function(){return P})),n.d(e,"range",(function(){return S})),n.d(e,"scan",(function(){return V})),n.d(e,"shuffle",(function(){return G})),n.d(e,"sum",(function(){return H})),n.d(e,"ticks",(function(){return C})),n.d(e,"tickIncrement",(function(){return D})),n.d(e,"tickStep",(function(){return I})),n.d(e,"transpose",(function(){return Y})),n.d(e,"variance",(function(){return g})),n.d(e,"zip",(function(){return q})),n.d(e,"axisTop",(function(){return et})),n.d(e,"axisRight",(function(){return nt})),n.d(e,"axisBottom",(function(){return rt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return Ai})),n.d(e,"brushX",(function(){return Si})),n.d(e,"brushY",(function(){return wi})),n.d(e,"brushSelection",(function(){return Ti})),n.d(e,"chord",(function(){return Li})),n.d(e,"ribbon",(function(){return Ki})),n.d(e,"nest",(function(){return Zi})),n.d(e,"set",(function(){return sa})),n.d(e,"map",(function(){return Qi})),n.d(e,"keys",(function(){return oa})),n.d(e,"values",(function(){return ua})),n.d(e,"entries",(function(){return la})),n.d(e,"color",(function(){return Ye})),n.d(e,"rgb",(function(){return Ke})),n.d(e,"hsl",(function(){return en})),n.d(e,"lab",(function(){return pa})),n.d(e,"hcl",(function(){return Ta})),n.d(e,"lch",(function(){return Ea})),n.d(e,"gray",(function(){return ha})),n.d(e,"cubehelix",(function(){return Ra})),n.d(e,"contours",(function(){return Ua})),n.d(e,"contourDensity",(function(){return qa})),n.d(e,"dispatch",(function(){return dt})),n.d(e,"drag",(function(){return Ja})),n.d(e,"dragDisable",(function(){return xe})),n.d(e,"dragEnable",(function(){return Ce})),n.d(e,"dsvFormat",(function(){return as})),n.d(e,"csvParse",(function(){return os})),n.d(e,"csvParseRows",(function(){return us})),n.d(e,"csvFormat",(function(){return ls})),n.d(e,"csvFormatBody",(function(){return cs})),n.d(e,"csvFormatRows",(function(){return ds})),n.d(e,"csvFormatRow",(function(){return fs})),n.d(e,"csvFormatValue",(function(){return hs})),n.d(e,"tsvParse",(function(){return gs})),n.d(e,"tsvParseRows",(function(){return ms})),n.d(e,"tsvFormat",(function(){return ys})),n.d(e,"tsvFormatBody",(function(){return vs})),n.d(e,"tsvFormatRows",(function(){return _s})),n.d(e,"tsvFormatRow",(function(){return bs})),n.d(e,"tsvFormatValue",(function(){return Es})),n.d(e,"autoType",(function(){return Ts})),n.d(e,"easeLinear",(function(){return ws})),n.d(e,"easeQuad",(function(){return Cs})),n.d(e,"easeQuadIn",(function(){return As})),n.d(e,"easeQuadOut",(function(){return xs})),n.d(e,"easeQuadInOut",(function(){return Cs})),n.d(e,"easeCubic",(function(){return qr})),n.d(e,"easeCubicIn",(function(){return Yr})),n.d(e,"easeCubicOut",(function(){return zr})),n.d(e,"easeCubicInOut",(function(){return qr})),n.d(e,"easePoly",(function(){return Rs})),n.d(e,"easePolyIn",(function(){return Ds})),n.d(e,"easePolyOut",(function(){return Is})),n.d(e,"easePolyInOut",(function(){return Rs})),n.d(e,"easeSin",(function(){return Ns})),n.d(e,"easeSinIn",(function(){return Ms})),n.d(e,"easeSinOut",(function(){return Ls})),n.d(e,"easeSinInOut",(function(){return Ns})),n.d(e,"easeExp",(function(){return js})),n.d(e,"easeExpIn",(function(){return Fs})),n.d(e,"easeExpOut",(function(){return Bs})),n.d(e,"easeExpInOut",(function(){return js})),n.d(e,"easeCircle",(function(){return Gs})),n.d(e,"easeCircleIn",(function(){return Us})),n.d(e,"easeCircleOut",(function(){return Vs})),n.d(e,"easeCircleInOut",(function(){return Gs})),n.d(e,"easeBounce",(function(){return Ys})),n.d(e,"easeBounceIn",(function(){return Hs})),n.d(e,"easeBounceOut",(function(){return Ys})),n.d(e,"easeBounceInOut",(function(){return zs})),n.d(e,"easeBack",(function(){return Ks})),n.d(e,"easeBackIn",(function(){return qs})),n.d(e,"easeBackOut",(function(){return Xs})),n.d(e,"easeBackInOut",(function(){return Ks})),n.d(e,"easeElastic",(function(){return Qs})),n.d(e,"easeElasticIn",(function(){return $s})),n.d(e,"easeElasticOut",(function(){return Qs})),n.d(e,"easeElasticInOut",(function(){return Zs})),n.d(e,"blob",(function(){return to})),n.d(e,"buffer",(function(){return no})),n.d(e,"dsv",(function(){return so})),n.d(e,"csv",(function(){return oo})),n.d(e,"tsv",(function(){return uo})),n.d(e,"image",(function(){return lo})),n.d(e,"json",(function(){return fo})),n.d(e,"text",(function(){return io})),n.d(e,"xml",(function(){return po})),n.d(e,"html",(function(){return go})),n.d(e,"svg",(function(){return mo})),n.d(e,"forceCenter",(function(){return yo})),n.d(e,"forceCollide",(function(){return Ro})),n.d(e,"forceLink",(function(){return Mo})),n.d(e,"forceManyBody",(function(){return Bo})),n.d(e,"forceRadial",(function(){return jo})),n.d(e,"forceSimulation",(function(){return Fo})),n.d(e,"forceX",(function(){return Uo})),n.d(e,"forceY",(function(){return Vo})),n.d(e,"formatDefaultLocale",(function(){return ru})),n.d(e,"format",(function(){return Wo})),n.d(e,"formatPrefix",(function(){return $o})),n.d(e,"formatLocale",(function(){return nu})),n.d(e,"formatSpecifier",(function(){return zo})),n.d(e,"FormatSpecifier",(function(){return qo})),n.d(e,"precisionFixed",(function(){return iu})),n.d(e,"precisionPrefix",(function(){return au})),n.d(e,"precisionRound",(function(){return su})),n.d(e,"geoArea",(function(){return Qu})),n.d(e,"geoBounds",(function(){return Hl})),n.d(e,"geoCentroid",(function(){return ec})),n.d(e,"geoCircle",(function(){return fc})),n.d(e,"geoClipAntimeridian",(function(){return wc})),n.d(e,"geoClipCircle",(function(){return Ac})),n.d(e,"geoClipExtent",(function(){return Rc})),n.d(e,"geoClipRectangle",(function(){return xc})),n.d(e,"geoContains",(function(){return Kc})),n.d(e,"geoDistance",(function(){return jc})),n.d(e,"geoGraticule",(function(){return Qc})),n.d(e,"geoGraticule10",(function(){return Zc})),n.d(e,"geoInterpolate",(function(){return rd})),n.d(e,"geoLength",(function(){return kc})),n.d(e,"geoPath",(function(){return ef})),n.d(e,"geoAlbers",(function(){return Ef})),n.d(e,"geoAlbersUsa",(function(){return Tf})),n.d(e,"geoAzimuthalEqualArea",(function(){return xf})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return Af})),n.d(e,"geoAzimuthalEquidistant",(function(){return Df})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return Cf})),n.d(e,"geoConicConformal",(function(){return Lf})),n.d(e,"geoConicConformalRaw",(function(){return Mf})),n.d(e,"geoConicEqualArea",(function(){return bf})),n.d(e,"geoConicEqualAreaRaw",(function(){return _f})),n.d(e,"geoConicEquidistant",(function(){return Bf})),n.d(e,"geoConicEquidistantRaw",(function(){return Ff})),n.d(e,"geoEqualEarth",(function(){return zf})),n.d(e,"geoEqualEarthRaw",(function(){return Yf})),n.d(e,"geoEquirectangular",(function(){return kf})),n.d(e,"geoEquirectangularRaw",(function(){return Nf})),n.d(e,"geoGnomonic",(function(){return Xf})),n.d(e,"geoGnomonicRaw",(function(){return qf})),n.d(e,"geoIdentity",(function(){return Kf})),n.d(e,"geoProjection",(function(){return mf})),n.d(e,"geoProjectionMutator",(function(){return yf})),n.d(e,"geoMercator",(function(){return Rf})),n.d(e,"geoMercatorRaw",(function(){return If})),n.d(e,"geoNaturalEarth1",(function(){return $f})),n.d(e,"geoNaturalEarth1Raw",(function(){return Wf})),n.d(e,"geoOrthographic",(function(){return Zf})),n.d(e,"geoOrthographicRaw",(function(){return Qf})),n.d(e,"geoStereographic",(function(){return th})),n.d(e,"geoStereographicRaw",(function(){return Jf})),n.d(e,"geoTransverseMercator",(function(){return nh})),n.d(e,"geoTransverseMercatorRaw",(function(){return eh})),n.d(e,"geoRotation",(function(){return lc})),n.d(e,"geoStream",(function(){return Hu})),n.d(e,"geoTransform",(function(){return nf})),n.d(e,"cluster",(function(){return sh})),n.d(e,"hierarchy",(function(){return uh})),n.d(e,"pack",(function(){return Mh})),n.d(e,"packSiblings",(function(){return Ch})),n.d(e,"packEnclose",(function(){return ph})),n.d(e,"partition",(function(){return jh})),n.d(e,"stratify",(function(){return Yh})),n.d(e,"tree",(function(){return Qh})),n.d(e,"treemap",(function(){return np})),n.d(e,"treemapBinary",(function(){return rp})),n.d(e,"treemapDice",(function(){return Bh})),n.d(e,"treemapSlice",(function(){return Zh})),n.d(e,"treemapSliceDice",(function(){return ip})),n.d(e,"treemapSquarify",(function(){return ep})),n.d(e,"treemapResquarify",(function(){return ap})),n.d(e,"interpolate",(function(){return Dn})),n.d(e,"interpolateArray",(function(){return vn})),n.d(e,"interpolateBasis",(function(){return sn})),n.d(e,"interpolateBasisClosed",(function(){return on})),n.d(e,"interpolateDate",(function(){return Tn})),n.d(e,"interpolateDiscrete",(function(){return sp})),n.d(e,"interpolateHue",(function(){return op})),n.d(e,"interpolateNumber",(function(){return Sn})),n.d(e,"interpolateNumberArray",(function(){return mn})),n.d(e,"interpolateObject",(function(){return wn})),n.d(e,"interpolateRound",(function(){return up})),n.d(e,"interpolateString",(function(){return Cn})),n.d(e,"interpolateTransformCss",(function(){return dr})),n.d(e,"interpolateTransformSvg",(function(){return fr})),n.d(e,"interpolateZoom",(function(){return dp})),n.d(e,"interpolateRgb",(function(){return fn})),n.d(e,"interpolateRgbBasis",(function(){return pn})),n.d(e,"interpolateRgbBasisClosed",(function(){return gn})),n.d(e,"interpolateHsl",(function(){return hp})),n.d(e,"interpolateHslLong",(function(){return pp})),n.d(e,"interpolateLab",(function(){return gp})),n.d(e,"interpolateHcl",(function(){return yp})),n.d(e,"interpolateHclLong",(function(){return vp})),n.d(e,"interpolateCubehelix",(function(){return bp})),n.d(e,"interpolateCubehelixLong",(function(){return Ep})),n.d(e,"piecewise",(function(){return Tp})),n.d(e,"quantize",(function(){return Sp})),n.d(e,"path",(function(){return Gi})),n.d(e,"polygonArea",(function(){return wp})),n.d(e,"polygonCentroid",(function(){return Ap})),n.d(e,"polygonHull",(function(){return Ip})),n.d(e,"polygonContains",(function(){return Rp})),n.d(e,"polygonLength",(function(){return Op})),n.d(e,"quadtree",(function(){return wo})),n.d(e,"randomUniform",(function(){return Mp})),n.d(e,"randomNormal",(function(){return Lp})),n.d(e,"randomLogNormal",(function(){return Np})),n.d(e,"randomBates",(function(){return Fp})),n.d(e,"randomIrwinHall",(function(){return kp})),n.d(e,"randomExponential",(function(){return Bp})),n.d(e,"scaleBand",(function(){return qp})),n.d(e,"scalePoint",(function(){return Kp})),n.d(e,"scaleIdentity",(function(){return ug})),n.d(e,"scaleLinear",(function(){return og})),n.d(e,"scaleLog",(function(){return yg})),n.d(e,"scaleSymlog",(function(){return Eg})),n.d(e,"scaleOrdinal",(function(){return zp})),n.d(e,"scaleImplicit",(function(){return Yp})),n.d(e,"scalePow",(function(){return xg})),n.d(e,"scaleSqrt",(function(){return Cg})),n.d(e,"scaleQuantile",(function(){return Dg})),n.d(e,"scaleQuantize",(function(){return Ig})),n.d(e,"scaleThreshold",(function(){return Rg})),n.d(e,"scaleTime",(function(){return hv})),n.d(e,"scaleUtc",(function(){return Sv})),n.d(e,"scaleSequential",(function(){return xv})),n.d(e,"scaleSequentialLog",(function(){return Cv})),n.d(e,"scaleSequentialPow",(function(){return Iv})),n.d(e,"scaleSequentialSqrt",(function(){return Rv})),n.d(e,"scaleSequentialSymlog",(function(){return Dv})),n.d(e,"scaleSequentialQuantile",(function(){return Ov})),n.d(e,"scaleDiverging",(function(){return Mv})),n.d(e,"scaleDivergingLog",(function(){return Lv})),n.d(e,"scaleDivergingPow",(function(){return kv})),n.d(e,"scaleDivergingSqrt",(function(){return Fv})),n.d(e,"scaleDivergingSymlog",(function(){return Nv})),n.d(e,"tickFormat",(function(){return ag})),n.d(e,"schemeCategory10",(function(){return jv})),n.d(e,"schemeAccent",(function(){return Uv})),n.d(e,"schemeDark2",(function(){return Vv})),n.d(e,"schemePaired",(function(){return Gv})),n.d(e,"schemePastel1",(function(){return Hv})),n.d(e,"schemePastel2",(function(){return Yv})),n.d(e,"schemeSet1",(function(){return zv})),n.d(e,"schemeSet2",(function(){return qv})),n.d(e,"schemeSet3",(function(){return Xv})),n.d(e,"schemeTableau10",(function(){return Kv})),n.d(e,"interpolateBrBG",(function(){return Qv})),n.d(e,"schemeBrBG",(function(){return $v})),n.d(e,"interpolatePRGn",(function(){return Jv})),n.d(e,"schemePRGn",(function(){return Zv})),n.d(e,"interpolatePiYG",(function(){return e_})),n.d(e,"schemePiYG",(function(){return t_})),n.d(e,"interpolatePuOr",(function(){return r_})),n.d(e,"schemePuOr",(function(){return n_})),n.d(e,"interpolateRdBu",(function(){return a_})),n.d(e,"schemeRdBu",(function(){return i_})),n.d(e,"interpolateRdGy",(function(){return o_})),n.d(e,"schemeRdGy",(function(){return s_})),n.d(e,"interpolateRdYlBu",(function(){return l_})),n.d(e,"schemeRdYlBu",(function(){return u_})),n.d(e,"interpolateRdYlGn",(function(){return d_})),n.d(e,"schemeRdYlGn",(function(){return c_})),n.d(e,"interpolateSpectral",(function(){return h_})),n.d(e,"schemeSpectral",(function(){return f_})),n.d(e,"interpolateBuGn",(function(){return g_})),n.d(e,"schemeBuGn",(function(){return p_})),n.d(e,"interpolateBuPu",(function(){return y_})),n.d(e,"schemeBuPu",(function(){return m_})),n.d(e,"interpolateGnBu",(function(){return __})),n.d(e,"schemeGnBu",(function(){return v_})),n.d(e,"interpolateOrRd",(function(){return E_})),n.d(e,"schemeOrRd",(function(){return b_})),n.d(e,"interpolatePuBuGn",(function(){return S_})),n.d(e,"schemePuBuGn",(function(){return T_})),n.d(e,"interpolatePuBu",(function(){return A_})),n.d(e,"schemePuBu",(function(){return w_})),n.d(e,"interpolatePuRd",(function(){return C_})),n.d(e,"schemePuRd",(function(){return x_})),n.d(e,"interpolateRdPu",(function(){return I_})),n.d(e,"schemeRdPu",(function(){return D_})),n.d(e,"interpolateYlGnBu",(function(){return O_})),n.d(e,"schemeYlGnBu",(function(){return R_})),n.d(e,"interpolateYlGn",(function(){return M_})),n.d(e,"schemeYlGn",(function(){return P_})),n.d(e,"interpolateYlOrBr",(function(){return N_})),n.d(e,"schemeYlOrBr",(function(){return L_})),n.d(e,"interpolateYlOrRd",(function(){return F_})),n.d(e,"schemeYlOrRd",(function(){return k_})),n.d(e,"interpolateBlues",(function(){return j_})),n.d(e,"schemeBlues",(function(){return B_})),n.d(e,"interpolateGreens",(function(){return V_})),n.d(e,"schemeGreens",(function(){return U_})),n.d(e,"interpolateGreys",(function(){return H_})),n.d(e,"schemeGreys",(function(){return G_})),n.d(e,"interpolatePurples",(function(){return z_})),n.d(e,"schemePurples",(function(){return Y_})),n.d(e,"interpolateReds",(function(){return X_})),n.d(e,"schemeReds",(function(){return q_})),n.d(e,"interpolateOranges",(function(){return W_})),n.d(e,"schemeOranges",(function(){return K_})),n.d(e,"interpolateCividis",(function(){return $_})),n.d(e,"interpolateCubehelixDefault",(function(){return Q_})),n.d(e,"interpolateRainbow",(function(){return eb})),n.d(e,"interpolateWarm",(function(){return Z_})),n.d(e,"interpolateCool",(function(){return J_})),n.d(e,"interpolateSinebow",(function(){return ab})),n.d(e,"interpolateTurbo",(function(){return sb})),n.d(e,"interpolateViridis",(function(){return ub})),n.d(e,"interpolateMagma",(function(){return lb})),n.d(e,"interpolateInferno",(function(){return cb})),n.d(e,"interpolatePlasma",(function(){return db})),n.d(e,"create",(function(){return fb})),n.d(e,"creator",(function(){return re})),n.d(e,"local",(function(){return pb})),n.d(e,"matcher",(function(){return mt})),n.d(e,"mouse",(function(){return Pn})),n.d(e,"namespace",(function(){return wt})),n.d(e,"namespaces",(function(){return St})),n.d(e,"clientPoint",(function(){return Rn})),n.d(e,"select",(function(){return Se})),n.d(e,"selectAll",(function(){return mb})),n.d(e,"selection",(function(){return Te})),n.d(e,"selector",(function(){return ht})),n.d(e,"selectorAll",(function(){return gt})),n.d(e,"style",(function(){return Nt})),n.d(e,"touch",(function(){return On})),n.d(e,"touches",(function(){return yb})),n.d(e,"window",(function(){return Ot})),n.d(e,"event",(function(){return le})),n.d(e,"customEvent",(function(){return ge})),n.d(e,"arc",(function(){return Bb})),n.d(e,"area",(function(){return Yb})),n.d(e,"line",(function(){return Hb})),n.d(e,"pie",(function(){return Xb})),n.d(e,"areaRadial",(function(){return Jb})),n.d(e,"radialArea",(function(){return Jb})),n.d(e,"lineRadial",(function(){return Zb})),n.d(e,"radialLine",(function(){return Zb})),n.d(e,"pointRadial",(function(){return tE})),n.d(e,"linkHorizontal",(function(){return uE})),n.d(e,"linkVertical",(function(){return lE})),n.d(e,"linkRadial",(function(){return cE})),n.d(e,"symbol",(function(){return DE})),n.d(e,"symbols",(function(){return CE})),n.d(e,"symbolCircle",(function(){return dE})),n.d(e,"symbolCross",(function(){return fE})),n.d(e,"symbolDiamond",(function(){return gE})),n.d(e,"symbolSquare",(function(){return bE})),n.d(e,"symbolStar",(function(){return _E})),n.d(e,"symbolTriangle",(function(){return TE})),n.d(e,"symbolWye",(function(){return xE})),n.d(e,"curveBasisClosed",(function(){return LE})),n.d(e,"curveBasisOpen",(function(){return kE})),n.d(e,"curveBasis",(function(){return PE})),n.d(e,"curveBundle",(function(){return BE})),n.d(e,"curveCardinalClosed",(function(){return HE})),n.d(e,"curveCardinalOpen",(function(){return zE})),n.d(e,"curveCardinal",(function(){return VE})),n.d(e,"curveCatmullRomClosed",(function(){return $E})),n.d(e,"curveCatmullRomOpen",(function(){return ZE})),n.d(e,"curveCatmullRom",(function(){return KE})),n.d(e,"curveLinearClosed",(function(){return tT})),n.d(e,"curveLinear",(function(){return Ub})),n.d(e,"curveMonotoneX",(function(){return uT})),n.d(e,"curveMonotoneY",(function(){return lT})),n.d(e,"curveNatural",(function(){return fT})),n.d(e,"curveStep",(function(){return pT})),n.d(e,"curveStepAfter",(function(){return mT})),n.d(e,"curveStepBefore",(function(){return gT})),n.d(e,"stack",(function(){return bT})),n.d(e,"stackOffsetExpand",(function(){return ET})),n.d(e,"stackOffsetDiverging",(function(){return TT})),n.d(e,"stackOffsetNone",(function(){return yT})),n.d(e,"stackOffsetSilhouette",(function(){return ST})),n.d(e,"stackOffsetWiggle",(function(){return wT})),n.d(e,"stackOrderAppearance",(function(){return AT})),n.d(e,"stackOrderAscending",(function(){return CT})),n.d(e,"stackOrderDescending",(function(){return IT})),n.d(e,"stackOrderInsideOut",(function(){return RT})),n.d(e,"stackOrderNone",(function(){return vT})),n.d(e,"stackOrderReverse",(function(){return OT})),n.d(e,"timeInterval",(function(){return Mg})),n.d(e,"timeMillisecond",(function(){return pm})),n.d(e,"timeMilliseconds",(function(){return gm})),n.d(e,"utcMillisecond",(function(){return pm})),n.d(e,"utcMilliseconds",(function(){return gm})),n.d(e,"timeSecond",(function(){return dm})),n.d(e,"timeSeconds",(function(){return fm})),n.d(e,"utcSecond",(function(){return dm})),n.d(e,"utcSeconds",(function(){return fm})),n.d(e,"timeMinute",(function(){return um})),n.d(e,"timeMinutes",(function(){return lm})),n.d(e,"timeHour",(function(){return am})),n.d(e,"timeHours",(function(){return sm})),n.d(e,"timeDay",(function(){return nm})),n.d(e,"timeDays",(function(){return rm})),n.d(e,"timeWeek",(function(){return Vg})),n.d(e,"timeWeeks",(function(){return Kg})),n.d(e,"timeSunday",(function(){return Vg})),n.d(e,"timeSundays",(function(){return Kg})),n.d(e,"timeMonday",(function(){return Gg})),n.d(e,"timeMondays",(function(){return Wg})),n.d(e,"timeTuesday",(function(){return Hg})),n.d(e,"timeTuesdays",(function(){return $g})),n.d(e,"timeWednesday",(function(){return Yg})),n.d(e,"timeWednesdays",(function(){return Qg})),n.d(e,"timeThursday",(function(){return zg})),n.d(e,"timeThursdays",(function(){return Zg})),n.d(e,"timeFriday",(function(){return qg})),n.d(e,"timeFridays",(function(){return Jg})),n.d(e,"timeSaturday",(function(){return Xg})),n.d(e,"timeSaturdays",(function(){return tm})),n.d(e,"timeMonth",(function(){return Bg})),n.d(e,"timeMonths",(function(){return jg})),n.d(e,"timeYear",(function(){return Ng})),n.d(e,"timeYears",(function(){return kg})),n.d(e,"utcMinute",(function(){return Ev})),n.d(e,"utcMinutes",(function(){return Tv})),n.d(e,"utcHour",(function(){return vv})),n.d(e,"utcHours",(function(){return _v})),n.d(e,"utcDay",(function(){return Pm})),n.d(e,"utcDays",(function(){return Mm})),n.d(e,"utcWeek",(function(){return ym})),n.d(e,"utcWeeks",(function(){return wm})),n.d(e,"utcSunday",(function(){return ym})),n.d(e,"utcSundays",(function(){return wm})),n.d(e,"utcMonday",(function(){return vm})),n.d(e,"utcMondays",(function(){return Am})),n.d(e,"utcTuesday",(function(){return _m})),n.d(e,"utcTuesdays",(function(){return xm})),n.d(e,"utcWednesday",(function(){return bm})),n.d(e,"utcWednesdays",(function(){return Cm})),n.d(e,"utcThursday",(function(){return Em})),n.d(e,"utcThursdays",(function(){return Dm})),n.d(e,"utcFriday",(function(){return Tm})),n.d(e,"utcFridays",(function(){return Im})),n.d(e,"utcSaturday",(function(){return Sm})),n.d(e,"utcSaturdays",(function(){return Rm})),n.d(e,"utcMonth",(function(){return gv})),n.d(e,"utcMonths",(function(){return mv})),n.d(e,"utcYear",(function(){return Nm})),n.d(e,"utcYears",(function(){return km})),n.d(e,"timeFormatDefaultLocale",(function(){return lv})),n.d(e,"timeFormat",(function(){return Gm})),n.d(e,"timeParse",(function(){return Hm})),n.d(e,"utcFormat",(function(){return Ym})),n.d(e,"utcParse",(function(){return zm})),n.d(e,"timeFormatLocale",(function(){return Um})),n.d(e,"isoFormat",(function(){return PT})),n.d(e,"isoParse",(function(){return MT})),n.d(e,"now",(function(){return Vn})),n.d(e,"timer",(function(){return Yn})),n.d(e,"timerFlush",(function(){return zn})),n.d(e,"timeout",(function(){return Wn})),n.d(e,"interval",(function(){return LT})),n.d(e,"transition",(function(){return Vr})),n.d(e,"active",(function(){return $r})),n.d(e,"interrupt",(function(){return sr})),n.d(e,"voronoi",(function(){return bS})),n.d(e,"zoom",(function(){return LS})),n.d(e,"zoomTransform",(function(){return AS})),n.d(e,"zoomIdentity",(function(){return wS}));var r="5.16.0",i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},a=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}},s=a(i),o=s.right,u=s.left,l=o,c=function(t,e){null==e&&(e=d);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return a};function d(t,e){return[t,e]}var f=function(t,e,n){var r,i,a,s,o=t.length,u=e.length,l=new Array(o*u);for(null==n&&(n=d),r=a=0;r<o;++r)for(s=t[r],i=0;i<u;++i,++a)l[a]=n(s,e[i]);return l},h=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},g=function(t,e){var n,r,i=t.length,a=0,s=-1,o=0,u=0;if(null==e)for(;++s<i;)isNaN(n=p(t[s]))||(u+=(r=n-o)*(n-(o+=r/++a)));else for(;++s<i;)isNaN(n=p(e(t[s],s,t)))||(u+=(r=n-o)*(n-(o+=r/++a)));if(a>1)return u/(a-1)},m=function(t,e){var n=g(t,e);return n?Math.sqrt(n):n},y=function(t,e){var n,r,i,a=t.length,s=-1;if(null==e){for(;++s<a;)if(null!=(n=t[s])&&n>=n)for(r=i=n;++s<a;)null!=(n=t[s])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++s<a;)if(null!=(n=e(t[s],s,t))&&n>=n)for(r=i=n;++s<a;)null!=(n=e(t[s],s,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},v=Array.prototype,_=v.slice,b=v.map,E=function(t){return function(){return t}},T=function(t){return t},S=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},w=Math.sqrt(50),A=Math.sqrt(10),x=Math.sqrt(2),C=function(t,e,n){var r,i,a,s,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=D(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(i=Math.ceil(e-t+1));++o<i;)a[o]=(t+o)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(i=Math.ceil(t-e+1));++o<i;)a[o]=(t-o)/s;return r&&a.reverse(),a};function D(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=w?10:a>=A?5:a>=x?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=w?10:a>=A?5:a>=x?2:1)}function I(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=w?i*=10:a>=A?i*=5:a>=x&&(i*=2),e<t?-i:i}var R=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},O=function(){var t=T,e=y,n=R;function r(r){var i,a,s=r.length,o=new Array(s);for(i=0;i<s;++i)o[i]=t(r[i],i,r);var u=e(o),c=u[0],d=u[1],f=n(o,c,d);Array.isArray(f)||(f=I(c,d,f),f=S(Math.ceil(c/f)*f,d,f));for(var h=f.length;f[0]<=c;)f.shift(),--h;for(;f[h-1]>d;)f.pop(),--h;var p,g=new Array(h+1);for(i=0;i<=h;++i)(p=g[i]=[]).x0=i>0?f[i-1]:c,p.x1=i<h?f[i]:d;for(i=0;i<s;++i)c<=(a=o[i])&&a<=d&&g[l(f,a,0,h)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:E(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:E([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?E(_.call(t)):E(t),r):n},r},P=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(i-a)}},M=function(t,e,n){return t=b.call(t,p).sort(i),Math.ceil((n-e)/(2*(P(t,.75)-P(t,.25))*Math.pow(t.length,-1/3)))},L=function(t,e,n){return Math.ceil((n-e)/(3.5*m(t)*Math.pow(t.length,-1/3)))},N=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},k=function(t,e){var n,r=t.length,i=r,a=-1,s=0;if(null==e)for(;++a<r;)isNaN(n=p(t[a]))?--i:s+=n;else for(;++a<r;)isNaN(n=p(e(t[a],a,t)))?--i:s+=n;if(i)return s/i},F=function(t,e){var n,r=t.length,a=-1,s=[];if(null==e)for(;++a<r;)isNaN(n=p(t[a]))||s.push(n);else for(;++a<r;)isNaN(n=p(e(t[a],a,t)))||s.push(n);return P(s.sort(i),.5)},B=function(t){for(var e,n,r,i=t.length,a=-1,s=0;++a<i;)s+=t[a].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n},j=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r},U=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},V=function(t,e){if(n=t.length){var n,r,a=0,s=0,o=t[s];for(null==e&&(e=i);++a<n;)(e(r=t[a],o)<0||0!==e(o,o))&&(o=r,s=a);return 0===e(o,o)?s:void 0}},G=function(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},H=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a},Y=function(t){if(!(i=t.length))return[];for(var e=-1,n=j(t,z),r=new Array(n);++e<n;)for(var i,a=-1,s=r[e]=new Array(i);++a<i;)s[a]=t[a][e];return r};function z(t){return t.length}var q=function(){return Y(arguments)},X=Array.prototype.slice,K=function(t){return t};function W(t){return"translate("+(t+.5)+",0)"}function $(t){return"translate(0,"+(t+.5)+")"}function Q(t){return function(e){return+t(e)}}function Z(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function J(){return!this.__axis}function tt(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,u=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",c=1===t||3===t?W:$;function d(d){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,h=null==i?e.tickFormat?e.tickFormat.apply(e,n):K:i,p=Math.max(a,0)+o,g=e.range(),m=+g[0]+.5,y=+g[g.length-1]+.5,v=(e.bandwidth?Z:Q)(e.copy()),_=d.selection?d.selection():d,b=_.selectAll(".domain").data([null]),E=_.selectAll(".tick").data(f,e).order(),T=E.exit(),S=E.enter().append("g").attr("class","tick"),w=E.select("line"),A=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(S),w=w.merge(S.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),A=A.merge(S.append("text").attr("fill","currentColor").attr(l,u*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==_&&(b=b.transition(d),E=E.transition(d),w=w.transition(d),A=A.transition(d),T=T.transition(d).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=v(t))?c(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:v(t))}))),T.remove(),b.attr("d",4===t||2==t?s?"M"+u*s+","+m+"H0.5V"+y+"H"+u*s:"M0.5,"+m+"V"+y:s?"M"+m+","+u*s+"V0.5H"+y+"V"+u*s:"M"+m+",0.5H"+y),E.attr("opacity",1).attr("transform",(function(t){return c(v(t))})),w.attr(l+"2",u*a),A.attr(l,u*p).text(h),_.filter(J).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=v}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=X.call(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:X.call(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:X.call(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(a=s=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(o=+t,d):o},d}function et(t){return tt(1,t)}function nt(t){return tt(2,t)}function rt(t){return tt(3,t)}function it(t){return tt(4,t)}var at={value:function(){}};function st(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ot(r)}function ot(t){this._=t}function ut(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function lt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ct(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ot.prototype=st.prototype={constructor:ot,on:function(t,e){var n,r=this._,i=ut(t+"",r),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)r[n]=ct(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ct(r[n],t.name,null);return this}for(;++a<s;)if((n=(t=i[a]).type)&&(n=lt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ot(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var dt=st;function ft(){}var ht=function(t){return null==t?ft:function(){return this.querySelector(t)}};function pt(){return[]}var gt=function(t){return null==t?pt:function(){return this.querySelectorAll(t)}},mt=function(t){return function(){return this.matches(t)}},yt=function(t){return new Array(t.length)};function vt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function _t(t,e,n,r,i,a){for(var s,o=0,u=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new vt(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function bt(t,e,n,r,i,a,s){var o,u,l,c={},d=e.length,f=a.length,h=new Array(d);for(o=0;o<d;++o)(u=e[o])&&(h[o]=l="$"+s.call(u,u.__data__,o,e),l in c?i[o]=u:c[l]=u);for(o=0;o<f;++o)(u=c[l="$"+s.call(t,a[o],o,a)])?(r[o]=u,u.__data__=a[o],c[l]=null):n[o]=new vt(t,a[o]);for(o=0;o<d;++o)(u=e[o])&&c[h[o]]===u&&(i[o]=u)}function Et(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}vt.prototype={constructor:vt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Tt="http://www.w3.org/1999/xhtml",St={svg:"http://www.w3.org/2000/svg",xhtml:Tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),St.hasOwnProperty(e)?{space:St[e],local:t}:t};function At(t){return function(){this.removeAttribute(t)}}function xt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ct(t,e){return function(){this.setAttribute(t,e)}}function Dt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function It(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Rt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Ot=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Pt(t){return function(){this.style.removeProperty(t)}}function Mt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Lt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Nt(t,e){return t.style.getPropertyValue(e)||Ot(t).getComputedStyle(t,null).getPropertyValue(e)}function kt(t){return function(){delete this[t]}}function Ft(t,e){return function(){this[t]=e}}function Bt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function jt(t){return t.trim().split(/^|\s+/)}function Ut(t){return t.classList||new Vt(t)}function Vt(t){this._node=t,this._names=jt(t.getAttribute("class")||"")}function Gt(t,e){for(var n=Ut(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ht(t,e){for(var n=Ut(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Yt(t){return function(){Gt(this,t)}}function zt(t){return function(){Ht(this,t)}}function qt(t,e){return function(){(e.apply(this,arguments)?Gt:Ht)(this,t)}}function Xt(){this.textContent=""}function Kt(t){return function(){this.textContent=t}}function Wt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function $t(){this.innerHTML=""}function Qt(t){return function(){this.innerHTML=t}}function Zt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Jt(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tt&&e.documentElement.namespaceURI===Tt?e.createElement(t):e.createElementNS(n,t)}}function ne(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}Vt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var re=function(t){var e=wt(t);return(e.local?ne:ee)(e)};function ie(){return null}function ae(){var t=this.parentNode;t&&t.removeChild(this)}function se(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var ue={},le=null;function ce(t,e,n){return t=de(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function de(t,e,n){return function(r){var i=le;le=r;try{t.call(this,this.__data__,e,n)}finally{le=i}}}function fe(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function he(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function pe(t,e,n){var r=ue.hasOwnProperty(t.type)?ce:de;return function(i,a,s){var o,u=this.__on,l=r(e,a,s);if(u)for(var c=0,d=u.length;c<d;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=l,o.capture=n),void(o.value=e);this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(o):this.__on=[o]}}function ge(t,e,n,r){var i=le;t.sourceEvent=le,le=t;try{return e.apply(n,r)}finally{le=i}}function me(t,e,n){var r=Ot(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ye(t,e){return function(){return me(this,t,e)}}function ve(t,e){return function(){return me(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ue={mouseenter:"mouseover",mouseleave:"mouseout"}));var _e=[null];function be(t,e){this._groups=t,this._parents=e}function Ee(){return new be([[document.documentElement]],_e)}be.prototype=Ee.prototype={constructor:be,select:function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s,o=e[i],u=o.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=o[c])&&(s=t.call(a,a.__data__,c,o))&&("__data__"in a&&(s.__data__=a.__data__),l[c]=s);return new be(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=gt(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s,o=e[a],u=o.length,l=0;l<u;++l)(s=o[l])&&(r.push(t.call(s,s.__data__,l,o)),i.push(s));return new be(r,i)},filter:function(t){"function"!=typeof t&&(t=mt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],o=s.length,u=r[i]=[],l=0;l<o;++l)(a=s[l])&&t.call(a,a.__data__,l,s)&&u.push(a);return new be(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n,r=e?bt:_t,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=a.length,o=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var d=i[c],f=a[c],h=f.length,p=t.call(d,d&&d.__data__,c,i),g=p.length,m=u[c]=new Array(g),y=o[c]=new Array(g);r(d,f,m,y,l[c]=new Array(h),p,e);for(var v,_,b=0,E=0;b<g;++b)if(v=m[b]){for(b>=E&&(E=b+1);!(_=y[E])&&++E<g;);v._next=_||null}}return(o=new be(o,i))._enter=u,o._exit=l,o},enter:function(){return new be(this._enter||this._groups.map(yt),this._parents)},exit:function(){return new be(this._exit||this._groups.map(yt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),a=new Array(r),s=0;s<i;++s)for(var o,u=e[s],l=n[s],c=u.length,d=a[s]=new Array(c),f=0;f<c;++f)(o=u[f]||l[f])&&(d[f]=o);for(;s<r;++s)a[s]=e[s];return new be(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,s=i[a];--a>=0;)(r=i[a])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Et);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s,o=n[a],u=o.length,l=i[a]=new Array(u),c=0;c<u;++c)(s=o[c])&&(l[c]=s);l.sort(e)}return new be(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],s=0,o=a.length;s<o;++s)(i=a[s])&&t.call(i,i.__data__,s,a);return this},attr:function(t,e){var n=wt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?xt:At:"function"==typeof e?n.local?Rt:It:n.local?Dt:Ct)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Pt:"function"==typeof e?Lt:Mt)(t,e,null==n?"":n)):Nt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?kt:"function"==typeof e?Bt:Ft)(t,e)):this.node()[t]},classed:function(t,e){var n=jt(t+"");if(arguments.length<2){for(var r=Ut(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?qt:e?Yt:zt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Xt:("function"==typeof t?Wt:Kt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?Zt:Qt)(t)):this.node().innerHTML},raise:function(){return this.each(Jt)},lower:function(){return this.each(te)},append:function(t){var e="function"==typeof t?t:re(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:re(t),r=null==e?ie:"function"==typeof e?e:ht(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ae)},clone:function(t){return this.select(t?oe:se)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=fe(t+""),s=a.length;if(!(arguments.length<2)){for(o=e?pe:he,null==n&&(n=!1),r=0;r<s;++r)this.each(o(a[r],e,n));return this}var o=this.node().__on;if(o)for(var u,l=0,c=o.length;l<c;++l)for(r=0,u=o[l];r<s;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ve:ye)(t,e))}};var Te=Ee,Se=function(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],_e)};function we(){le.stopImmediatePropagation()}var Ae=function(){le.preventDefault(),le.stopImmediatePropagation()},xe=function(t){var e=t.document.documentElement,n=Se(t).on("dragstart.drag",Ae,!0);"onselectstart"in e?n.on("selectstart.drag",Ae,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Ce(t,e){var n=t.document.documentElement,r=Se(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ae,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var De=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Ie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Re(){}var Oe="\\s*([+-]?\\d+)\\s*",Pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Me="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Le=/^#([0-9a-f]{3,8})$/,Ne=new RegExp("^rgb\\("+[Oe,Oe,Oe]+"\\)$"),ke=new RegExp("^rgb\\("+[Me,Me,Me]+"\\)$"),Fe=new RegExp("^rgba\\("+[Oe,Oe,Oe,Pe]+"\\)$"),Be=new RegExp("^rgba\\("+[Me,Me,Me,Pe]+"\\)$"),je=new RegExp("^hsl\\("+[Pe,Me,Me]+"\\)$"),Ue=new RegExp("^hsla\\("+[Pe,Me,Me,Pe]+"\\)$"),Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ge(){return this.rgb().formatHex()}function He(){return this.rgb().formatRgb()}function Ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Le.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ze(e):3===n?new We(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ne.exec(t))?new We(e[1],e[2],e[3],1):(e=ke.exec(t))?new We(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Fe.exec(t))?qe(e[1],e[2],e[3],e[4]):(e=Be.exec(t))?qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=je.exec(t))?Je(e[1],e[2]/100,e[3]/100,1):(e=Ue.exec(t))?Je(e[1],e[2]/100,e[3]/100,e[4]):Ve.hasOwnProperty(t)?ze(Ve[t]):"transparent"===t?new We(NaN,NaN,NaN,0):null}function ze(t){return new We(t>>16&255,t>>8&255,255&t,1)}function qe(t,e,n,r){return r<=0&&(t=e=n=NaN),new We(t,e,n,r)}function Xe(t){return t instanceof Re||(t=Ye(t)),t?new We((t=t.rgb()).r,t.g,t.b,t.opacity):new We}function Ke(t,e,n,r){return 1===arguments.length?Xe(t):new We(t,e,n,null==r?1:r)}function We(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $e(){return"#"+Ze(this.r)+Ze(this.g)+Ze(this.b)}function Qe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ze(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Je(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nn(t,e,n,r)}function tn(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Re||(t=Ye(t)),!t)return new nn;if(t instanceof nn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,u=(a+i)/2;return o?(s=e===a?(n-r)/o+6*(n<r):n===a?(r-e)/o+2:(e-n)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new nn(s,o,u,t.opacity)}function en(t,e,n,r){return 1===arguments.length?tn(t):new nn(t,e,n,null==r?1:r)}function nn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function rn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function an(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}De(Re,Ye,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ge,formatHex:Ge,formatHsl:function(){return tn(this).formatHsl()},formatRgb:He,toString:He}),De(We,Ke,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new We(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new We(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$e,formatHex:$e,formatRgb:Qe,toString:Qe})),De(nn,en,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new We(rn(t>=240?t-240:t+120,i,r),rn(t,i,r),rn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var sn=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1];return an((n-r/e)*e,r>0?t[r-1]:2*i-a,i,a,r<e-1?t[r+2]:2*a-i)}},on=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return an((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}},un=function(t){return function(){return t}};function ln(t,e){return function(n){return t+n*e}}function cn(t,e){var n=e-t;return n?ln(t,n>180||n<-180?n-360*Math.round(n/360):n):un(isNaN(t)?e:t)}function dn(t,e){var n=e-t;return n?ln(t,n):un(isNaN(t)?e:t)}var fn=function t(e){var n=function(t){return 1==(t=+t)?dn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):un(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Ke(t)).r,(e=Ke(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),s=dn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function hn(t){return function(e){var n,r,i=e.length,a=new Array(i),s=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=Ke(e[n]),a[n]=r.r||0,s[n]=r.g||0,o[n]=r.b||0;return a=t(a),s=t(s),o=t(o),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=o(t),r+""}}}var pn=hn(sn),gn=hn(on),mn=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function yn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var vn=function(t,e){return(yn(e)?mn:_n)(t,e)};function _n(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=Dn(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=a[n](t);return s}}var bn,En,Tn=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Sn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},wn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Dn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},An=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(An.source,"g"),Cn=function(t,e){var n,r,i,a=An.lastIndex=xn.lastIndex=0,s=-1,o=[],u=[];for(t+="",e+="";(n=An.exec(t))&&(r=xn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:Sn(n,r)})),a=xn.lastIndex;return a<e.length&&(i=e.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)o[(n=u[r]).i]=n.x(t);return o.join("")})},Dn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?un(e):("number"===r?Sn:"string"===r?(n=Ye(e))?(e=n,fn):Cn:e instanceof Ye?fn:e instanceof Date?Tn:yn(e)?mn:Array.isArray(e)?_n:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?wn:Sn)(t,e)},In=function(){for(var t,e=le;t=e.sourceEvent;)e=t;return e},Rn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},On=function(t,e,n){arguments.length<3&&(n=e,e=In().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return Rn(t,r);return null},Pn=function(t){var e=In();return e.changedTouches&&(e=e.changedTouches[0]),Rn(t,e)},Mn=0,Ln=0,Nn=0,kn=0,Fn=0,Bn=0,jn="object"==typeof performance&&performance.now?performance:Date,Un="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vn(){return Fn||(Un(Gn),Fn=jn.now()+Bn)}function Gn(){Fn=0}function Hn(){this._call=this._time=this._next=null}function Yn(t,e,n){var r=new Hn;return r.restart(t,e,n),r}function zn(){Vn(),++Mn;for(var t,e=bn;e;)(t=Fn-e._time)>=0&&e._call.call(null,t),e=e._next;--Mn}function qn(){Fn=(kn=jn.now())+Bn,Mn=Ln=0;try{zn()}finally{Mn=0,function(){for(var t,e,n=bn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bn=e);En=t,Kn(r)}(),Fn=0}}function Xn(){var t=jn.now(),e=t-kn;e>1e3&&(Bn-=e,kn=t)}function Kn(t){Mn||(Ln&&(Ln=clearTimeout(Ln)),t-Fn>24?(t<1/0&&(Ln=setTimeout(qn,t-jn.now()-Bn)),Nn&&(Nn=clearInterval(Nn))):(Nn||(kn=jn.now(),Nn=setInterval(Xn,1e3)),Mn=1,Un(qn)))}Hn.prototype=Yn.prototype={constructor:Hn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Vn():+n)+(null==e?0:+e),this._next||En===this||(En?En._next=this:bn=this,En=this),this._call=t,this._time=n,Kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kn())}};var Wn=function(t,e,n){var r=new Hn;return r.restart((function(n){r.stop(),t(n+e)}),e=null==e?0:+e,n),r},$n=dt("start","end","cancel","interrupt"),Qn=[],Zn=function(t,e,n,r,i,a){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(u){var l,c,d,f;if(1!==n.state)return o();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return Wn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(Wn((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),l=0,c=-1;l<d;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=5,1),a=-1,s=r.length;++a<s;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Yn((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:$n,tween:Qn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function Jn(t,e){var n=er(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function tr(t,e){var n=er(t,e);if(n.state>3)throw new Error("too late; already running");return n}function er(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var nr,rr,ir,ar,sr=function(t,e){var n,r,i,a=t.__transition,s=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):s=!1;s&&delete t.__transition}},or=180/Math.PI,ur={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},lr=function(t,e,n,r,i,a){var s,o,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*or,skewX:Math.atan(u)*or,scaleX:s,scaleY:o}};function cr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,s){var o=[],u=[];return a=t(a),s=t(s),function(t,r,i,a,s,o){if(t!==i||r!==a){var u=s.push("translate(",null,e,null,n);o.push({i:u-4,x:Sn(t,i)},{i:u-2,x:Sn(r,a)})}else(i||a)&&s.push("translate("+i+e+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,o,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Sn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,s.rotate,o,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Sn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,s.skewX,o,u),function(t,e,n,r,a,s){if(t!==n||e!==r){var o=a.push(i(a)+"scale(",null,",",null,")");s.push({i:o-4,x:Sn(t,n)},{i:o-2,x:Sn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,o,u),a=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)o[(e=u[n]).i]=e.x(t);return o.join("")}}}var dr=cr((function(t){return"none"===t?ur:(nr||(nr=document.createElement("DIV"),rr=document.documentElement,ir=document.defaultView),nr.style.transform=t,t=ir.getComputedStyle(rr.appendChild(nr),null).getPropertyValue("transform"),rr.removeChild(nr),t=t.slice(7,-1).split(","),lr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),fr=cr((function(t){return null==t?ur:(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),(t=ar.transform.baseVal.consolidate())?lr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ur)}),", ",")",")");function hr(t,e){var n,r;return function(){var i=tr(this,t),a=i.tween;if(a!==n)for(var s=0,o=(r=n=a).length;s<o;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function pr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=tr(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=o;break}u===l&&i.push(o)}a.tween=i}}function gr(t,e,n){var r=t._id;return t.each((function(){var t=tr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return er(t,r).value[e]}}var mr=function(t,e){var n;return("number"==typeof e?Sn:e instanceof Ye?fn:(n=Ye(e))?(e=n,fn):Cn)(t,e)};function yr(t){return function(){this.removeAttribute(t)}}function vr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _r(t,e,n){var r,i,a=n+"";return function(){var s=this.getAttribute(t);return s===a?null:s===r?i:i=e(r=s,n)}}function br(t,e,n){var r,i,a=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===r?i:i=e(r=s,n)}}function Er(t,e,n){var r,i,a;return function(){var s,o,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(o=u+"")?null:s===r&&o===i?a:(i=o,a=e(r=s,u));this.removeAttribute(t)}}function Tr(t,e,n){var r,i,a;return function(){var s,o,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(o=u+"")?null:s===r&&o===i?a:(i=o,a=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function Sr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ar(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&wr(t,i)),n}return i._value=e,i}function xr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Sr(t,i)),n}return i._value=e,i}function Cr(t,e){return function(){Jn(this,t).delay=+e.apply(this,arguments)}}function Dr(t,e){return e=+e,function(){Jn(this,t).delay=e}}function Ir(t,e){return function(){tr(this,t).duration=+e.apply(this,arguments)}}function Rr(t,e){return e=+e,function(){tr(this,t).duration=e}}function Or(t,e){if("function"!=typeof e)throw new Error;return function(){tr(this,t).ease=e}}function Pr(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Jn:tr;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}var Mr=Te.prototype.constructor;function Lr(t){return function(){this.style.removeProperty(t)}}function Nr(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function kr(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Nr(t,a,n)),r}return a._value=e,a}function Fr(t){return function(e){this.textContent=t.call(this,e)}}function Br(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Fr(r)),e}return r._value=t,r}var jr=0;function Ur(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vr(t){return Te().transition(t)}function Gr(){return++jr}var Hr=Te.prototype;function Yr(t){return t*t*t}function zr(t){return--t*t*t+1}function qr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ur.prototype=Vr.prototype={constructor:Ur,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ht(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o,u,l=r[s],c=l.length,d=a[s]=new Array(c),f=0;f<c;++f)(o=l[f])&&(u=t.call(o,o.__data__,f,l))&&("__data__"in o&&(u.__data__=o.__data__),d[f]=u,Zn(d[f],e,n,f,d,er(o,n)));return new Ur(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=gt(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var u,l=r[o],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var f,h=t.call(u,u.__data__,d,l),p=er(u,n),g=0,m=h.length;g<m;++g)(f=h[g])&&Zn(f,e,n,g,h,p);a.push(h),s.push(u)}return new Ur(a,s,e,n)},filter:function(t){"function"!=typeof t&&(t=mt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,s=e[i],o=s.length,u=r[i]=[],l=0;l<o;++l)(a=s[l])&&t.call(a,a.__data__,l,s)&&u.push(a);return new Ur(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),a=new Array(r),s=0;s<i;++s)for(var o,u=e[s],l=n[s],c=u.length,d=a[s]=new Array(c),f=0;f<c;++f)(o=u[f]||l[f])&&(d[f]=o);for(;s<r;++s)a[s]=e[s];return new Ur(a,this._parents,this._name,this._id)},selection:function(){return new Mr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Gr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s,o=r[a],u=o.length,l=0;l<u;++l)if(s=o[l]){var c=er(s,e);Zn(s,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ur(r,this._parents,t,n)},call:Hr.call,nodes:Hr.nodes,node:Hr.node,size:Hr.size,empty:Hr.empty,each:Hr.each,on:function(t,e){var n=this._id;return arguments.length<2?er(this.node(),n).on.on(t):this.each(Pr(n,t,e))},attr:function(t,e){var n=wt(t),r="transform"===n?fr:mr;return this.attrTween(t,"function"==typeof e?(n.local?Tr:Er)(n,r,gr(this,"attr."+t,e)):null==e?(n.local?vr:yr)(n):(n.local?br:_r)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=wt(t);return this.tween(n,(r.local?Ar:xr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?dr:mr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Nt(this,t),s=(this.style.removeProperty(t),Nt(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}(t,r)).on("end.style."+t,Lr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var s=Nt(this,t),o=n(this),u=o+"";return null==o&&(this.style.removeProperty(t),u=o=Nt(this,t)),s===u?null:s===r&&u===i?a:(i=u,a=e(r=s,o))}}(t,r,gr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,s="style."+e,o="end."+s;return function(){var u=tr(this,t),l=u.on,c=null==u.value[s]?a||(a=Lr(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(o,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var s=Nt(this,t);return s===a?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,kr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(gr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Br(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=er(this.node(),n).tween,a=0,s=i.length;a<s;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?hr:pr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cr:Dr)(e,t)):er(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ir:Rr)(e,t)):er(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Or(e,t)):er(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,s){var o={value:s},u={value:function(){0==--i&&a()}};n.each((function(){var n=tr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),n.on=e}))}))}};var Xr={time:null,delay:0,duration:250,ease:qr};function Kr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Xr.time=Vn(),Xr;return n}Te.prototype.interrupt=function(t){return this.each((function(){sr(this,t)}))},Te.prototype.transition=function(t){var e,n;t instanceof Ur?(e=t._id,t=t._name):(e=Gr(),(n=Xr).time=Vn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s,o=r[a],u=o.length,l=0;l<u;++l)(s=o[l])&&Zn(s,t,e,l,o,n||Kr(s,e));return new Ur(r,this._parents,t,e)};var Wr=[null],$r=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new Ur([[t]],Wr,e,+r);return null},Qr=function(t){return function(){return t}},Zr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function Jr(){le.stopImmediatePropagation()}var ti=function(){le.preventDefault(),le.stopImmediatePropagation()},ei={name:"drag"},ni={name:"space"},ri={name:"handle"},ii={name:"center"};function ai(t){return[+t[0],+t[1]]}function si(t){return[ai(t[0]),ai(t[1])]}function oi(t){return function(e){return On(e,le.touches,t)}}var ui={name:"x",handles:["w","e"].map(mi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},li={name:"y",handles:["n","s"].map(mi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ci={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(mi),input:function(t){return null==t?null:si(t)},output:function(t){return t}},di={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function mi(t){return{type:t}}function yi(){return!le.ctrlKey&&!le.button}function vi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function _i(){return navigator.maxTouchPoints||"ontouchstart"in this}function bi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ei(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ti(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Si(){return xi(ui)}function wi(){return xi(li)}var Ai=function(){return xi(ci)};function xi(t){var e,n=vi,r=yi,i=_i,a=!0,s=dt("start","brush","end"),o=6;function u(e){var n=e.property("__brush",g).selectAll(".overlay").data([mi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",di.overlay).merge(n).each((function(){var t=bi(this).extent;Se(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([mi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",di.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return di[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Se(this),e=bi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-o/2:e[0][0]-o/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-o/2:e[0][1]-o/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+o:o})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+o:o}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new d(t,e,n):r}function d(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(){if((!e||le.touches)&&r.apply(this,arguments)){var n,i,s,o,u,d,f,h,p,g,m,y=this,v=le.target.__data__.type,_="selection"===(a&&le.metaKey?v="overlay":v)?ei:a&&le.altKey?ii:ri,b=t===li?null:pi[v],E=t===ui?null:gi[v],T=bi(y),S=T.extent,w=T.selection,A=S[0][0],x=S[0][1],C=S[1][0],D=S[1][1],I=0,R=0,O=b&&E&&a&&le.shiftKey,P=le.touches?oi(le.changedTouches[0].identifier):Pn,M=P(y),L=M,N=c(y,arguments,!0).beforestart();"overlay"===v?(w&&(p=!0),T.selection=w=[[n=t===li?A:M[0],s=t===ui?x:M[1]],[u=t===li?C:n,f=t===ui?D:s]]):(n=w[0][0],s=w[0][1],u=w[1][0],f=w[1][1]),i=n,o=s,d=u,h=f;var k=Se(y).attr("pointer-events","none"),F=k.selectAll(".overlay").attr("cursor",di[v]);if(le.touches)N.moved=j,N.ended=V;else{var B=Se(le.view).on("mousemove.brush",j,!0).on("mouseup.brush",V,!0);a&&B.on("keydown.brush",G,!0).on("keyup.brush",H,!0),xe(le.view)}Jr(),sr(y),l.call(y),N.start()}function j(){var t=P(y);!O||g||m||(Math.abs(t[0]-L[0])>Math.abs(t[1]-L[1])?m=!0:g=!0),L=t,p=!0,ti(),U()}function U(){var t;switch(I=L[0]-M[0],R=L[1]-M[1],_){case ni:case ei:b&&(I=Math.max(A-n,Math.min(C-u,I)),i=n+I,d=u+I),E&&(R=Math.max(x-s,Math.min(D-f,R)),o=s+R,h=f+R);break;case ri:b<0?(I=Math.max(A-n,Math.min(C-n,I)),i=n+I,d=u):b>0&&(I=Math.max(A-u,Math.min(C-u,I)),i=n,d=u+I),E<0?(R=Math.max(x-s,Math.min(D-s,R)),o=s+R,h=f):E>0&&(R=Math.max(x-f,Math.min(D-f,R)),o=s,h=f+R);break;case ii:b&&(i=Math.max(A,Math.min(C,n-I*b)),d=Math.max(A,Math.min(C,u+I*b))),E&&(o=Math.max(x,Math.min(D,s-R*E)),h=Math.max(x,Math.min(D,f+R*E)))}d<i&&(b*=-1,t=n,n=u,u=t,t=i,i=d,d=t,v in fi&&F.attr("cursor",di[v=fi[v]])),h<o&&(E*=-1,t=s,s=f,f=t,t=o,o=h,h=t,v in hi&&F.attr("cursor",di[v=hi[v]])),T.selection&&(w=T.selection),g&&(i=w[0][0],d=w[1][0]),m&&(o=w[0][1],h=w[1][1]),w[0][0]===i&&w[0][1]===o&&w[1][0]===d&&w[1][1]===h||(T.selection=[[i,o],[d,h]],l.call(y),N.brush())}function V(){if(Jr(),le.touches){if(le.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ce(le.view,p),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);k.attr("pointer-events","all"),F.attr("cursor",di.overlay),T.selection&&(w=T.selection),Ei(w)&&(T.selection=null,l.call(y)),N.end()}function G(){switch(le.keyCode){case 16:O=b&&E;break;case 18:_===ri&&(b&&(u=d-I*b,n=i+I*b),E&&(f=h-R*E,s=o+R*E),_=ii,U());break;case 32:_!==ri&&_!==ii||(b<0?u=d-I:b>0&&(n=i-I),E<0?f=h-R:E>0&&(s=o-R),_=ni,F.attr("cursor",di.selection),U());break;default:return}ti()}function H(){switch(le.keyCode){case 16:O&&(g=m=O=!1,U());break;case 18:_===ii&&(b<0?u=d:b>0&&(n=i),E<0?f=h:E>0&&(s=o),_=ri,U());break;case 32:_===ni&&(le.altKey?(b&&(u=d-I*b,n=i+I*b),E&&(f=h-R*E,s=o+R*E),_=ii):(b<0?u=d:b>0&&(n=i),E<0?f=h:E>0&&(s=o),_=ri),F.attr("cursor",di[v]),U());break;default:return}ti()}}function h(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=si(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=c(e,arguments),a=r.selection,s=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),o=Dn(a,s);function u(t){r.selection=1===t&&null===s?null:o(t),l.call(e),i.brush()}return null!==a&&null!==s?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),s=c(e,r).beforestart();sr(e),i.selection=null===a?null:a,l.call(e),s.start().brush().end()}))},u.clear=function(t){u.move(t,null)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ge(new Zr(u,e,t.output(this.state.selection)),s.apply,s,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Qr(si(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Qr(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Qr(!!t),u):i},u.handleSize=function(t){return arguments.length?(o=+t,u):o},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=s.on.apply(s,arguments);return t===s?u:t},u}var Ci=Math.cos,Di=Math.sin,Ii=Math.PI,Ri=Ii/2,Oi=2*Ii,Pi=Math.max;function Mi(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Li=function(){var t=0,e=null,n=null,r=null;function i(i){var a,s,o,u,l,c,d=i.length,f=[],h=S(d),p=[],g=[],m=g.groups=new Array(d),y=new Array(d*d);for(a=0,l=-1;++l<d;){for(s=0,c=-1;++c<d;)s+=i[l][c];f.push(s),p.push(S(d)),a+=s}for(e&&h.sort((function(t,n){return e(f[t],f[n])})),n&&p.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(a=Pi(0,Oi-t*d)/a)?t:Oi/d,s=0,l=-1;++l<d;){for(o=s,c=-1;++c<d;){var v=h[l],_=p[v][c],b=i[v][_],E=s,T=s+=b*a;y[_*d+v]={index:v,subindex:_,startAngle:E,endAngle:T,value:b}}m[v]={index:v,startAngle:o,endAngle:s,value:f[v]},s+=u}for(l=-1;++l<d;)for(c=l-1;++c<d;){var w=y[c*d+l],A=y[l*d+c];(w.value||A.value)&&g.push(w.value<A.value?{source:A,target:w}:{source:w,target:A})}return r?g.sort(r):g}return i.padAngle=function(e){return arguments.length?(t=Pi(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Mi(t))._=t,i):r&&r._},i},Ni=Array.prototype.slice,ki=function(t){return function(){return t}},Fi=Math.PI,Bi=2*Fi,ji=Bi-1e-6;function Ui(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vi(){return new Ui}Ui.prototype=Vi.prototype={constructor:Ui,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){var a=this._x1,s=this._y1,o=(n=+n)-(t=+t),u=(r=+r)-(e=+e),l=a-t,c=s-e,d=l*l+c*c;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>1e-6)if(Math.abs(c*o-u*l)>1e-6&&i){var f=n-a,h=r-s,p=o*o+u*u,g=f*f+h*h,m=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((Fi-Math.acos((p+d-g)/(2*m*y)))/2),_=v/y,b=v/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(e+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*h)+","+(this._x1=t+b*o)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var s=(n=+n)*Math.cos(r),o=n*Math.sin(r),u=t+s,l=e+o,c=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(d<0&&(d=d%Bi+Bi),d>ji?this._+="A"+n+","+n+",0,1,"+c+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=Fi)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Gi=Vi;function Hi(t){return t.source}function Yi(t){return t.target}function zi(t){return t.radius}function qi(t){return t.startAngle}function Xi(t){return t.endAngle}var Ki=function(){var t=Hi,e=Yi,n=zi,r=qi,i=Xi,a=null;function s(){var s,o=Ni.call(arguments),u=t.apply(this,o),l=e.apply(this,o),c=+n.apply(this,(o[0]=u,o)),d=r.apply(this,o)-Ri,f=i.apply(this,o)-Ri,h=c*Ci(d),p=c*Di(d),g=+n.apply(this,(o[0]=l,o)),m=r.apply(this,o)-Ri,y=i.apply(this,o)-Ri;if(a||(a=s=Gi()),a.moveTo(h,p),a.arc(0,0,c,d,f),d===m&&f===y||(a.quadraticCurveTo(0,0,g*Ci(m),g*Di(m)),a.arc(0,0,g,m,y)),a.quadraticCurveTo(0,0,h,p),a.closePath(),s)return a=null,s+""||null}return s.radius=function(t){return arguments.length?(n="function"==typeof t?t:ki(+t),s):n},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:ki(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:ki(+t),s):i},s.source=function(e){return arguments.length?(t=e,s):t},s.target=function(t){return arguments.length?(e=t,s):e},s.context=function(t){return arguments.length?(a=null==t?null:t,s):a},s};function Wi(){}function $i(t,e){var n=new Wi;if(t instanceof Wi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}Wi.prototype=$i.prototype={constructor:Wi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Qi=$i,Zi=function(){var t,e,n,r=[],i=[];function a(n,i,s,o){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,l,c,d=-1,f=n.length,h=r[i++],p=Qi(),g=s();++d<f;)(c=p.get(u=h(l=n[d])+""))?c.push(l):p.set(u,[l]);return p.each((function(t,e){o(g,e,a(t,i,s,o))})),g}return n={object:function(t){return a(t,0,Ji,ta)},map:function(t){return a(t,0,ea,na)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var s,o=i[a-1];return null!=e&&a>=r.length?s=n.entries():(s=[],n.each((function(e,n){s.push({key:n,values:t(e,a)})}))),null!=o?s.sort((function(t,e){return o(t.key,e.key)})):s}(a(t,0,ea,na),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function Ji(){return{}}function ta(t,e,n){t[e]=n}function ea(){return Qi()}function na(t,e,n){t.set(e,n)}function ra(){}var ia=Qi.prototype;function aa(t,e){var n=new ra;if(t instanceof ra)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}ra.prototype=aa.prototype={constructor:ra,has:ia.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ia.remove,clear:ia.clear,values:ia.keys,size:ia.size,empty:ia.empty,each:ia.each};var sa=aa,oa=function(t){var e=[];for(var n in t)e.push(n);return e},ua=function(t){var e=[];for(var n in t)e.push(t[n]);return e},la=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ca=Math.PI/180,da=180/Math.PI;function fa(t){if(t instanceof ga)return new ga(t.l,t.a,t.b,t.opacity);if(t instanceof Sa)return wa(t);t instanceof We||(t=Xe(t));var e,n,r=_a(t.r),i=_a(t.g),a=_a(t.b),s=ma((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=s:(e=ma((.4360747*r+.3850649*i+.1430804*a)/.96422),n=ma((.0139322*r+.0971045*i+.7141733*a)/.82521)),new ga(116*s-16,500*(e-s),200*(s-n),t.opacity)}function ha(t,e){return new ga(t,0,0,null==e?1:e)}function pa(t,e,n,r){return 1===arguments.length?fa(t):new ga(t,e,n,null==r?1:r)}function ga(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function ma(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function ya(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function va(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function _a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ba(t){if(t instanceof Sa)return new Sa(t.h,t.c,t.l,t.opacity);if(t instanceof ga||(t=fa(t)),0===t.a&&0===t.b)return new Sa(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*da;return new Sa(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ea(t,e,n,r){return 1===arguments.length?ba(t):new Sa(n,e,t,null==r?1:r)}function Ta(t,e,n,r){return 1===arguments.length?ba(t):new Sa(t,e,n,null==r?1:r)}function Sa(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function wa(t){if(isNaN(t.h))return new ga(t.l,0,0,t.opacity);var e=t.h*ca;return new ga(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}De(ga,pa,Ie(Re,{brighter:function(t){return new ga(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ga(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new We(va(3.1338561*(e=.96422*ya(e))-1.6168667*(t=1*ya(t))-.4906146*(n=.82521*ya(n))),va(-.9787684*e+1.9161415*t+.033454*n),va(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),De(Sa,Ta,Ie(Re,{brighter:function(t){return new Sa(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Sa(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return wa(this).rgb()}}));var Aa=-.29227,xa=-1.7884503806,Ca=3.5172982438,Da=-.6557636667999999;function Ia(t){if(t instanceof Oa)return new Oa(t.h,t.s,t.l,t.opacity);t instanceof We||(t=Xe(t));var e=t.g/255,n=t.b/255,r=(Da*n+xa*(t.r/255)-Ca*e)/(Da+xa-Ca),i=n-r,a=(1.97294*(e-r)-Aa*i)/-.90649,s=Math.sqrt(a*a+i*i)/(1.97294*r*(1-r)),o=s?Math.atan2(a,i)*da-120:NaN;return new Oa(o<0?o+360:o,s,r,t.opacity)}function Ra(t,e,n,r){return 1===arguments.length?Ia(t):new Oa(t,e,n,null==r?1:r)}function Oa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}De(Oa,Ra,Ie(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Oa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Oa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ca,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new We(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Aa*r+-.90649*i)),255*(e+n*(1.97294*r)),this.opacity)}}));var Pa=Array.prototype.slice,Ma=function(t,e){return t-e},La=function(t){return function(){return t}},Na=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ka(t,e[r]))return n;return 0};function ka(t,e){for(var n=e[0],r=e[1],i=-1,a=0,s=t.length,o=s-1;a<s;o=a++){var u=t[a],l=u[0],c=u[1],d=t[o],f=d[0],h=d[1];if(Fa(u,d,e))return 0;c>r!=h>r&&n<(f-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Fa(t,e,n){var r,i,a,s;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],s=e[r],i<=(a=n[r])&&a<=s||s<=a&&a<=i)}var Ba=function(){},ja=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Ua=function(){var t=1,e=1,n=R,r=o;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Ma);else{var r=y(t),i=r[0],s=r[1];e=I(i,s,e),e=S(Math.floor(i/e)*e,Math.floor(s/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,i){var a=[],o=[];return function(n,r,i){var a,o,u,l,c,d=new Array,f=new Array;for(a=o=-1,ja[(u=n[0]>=r)<<1].forEach(h);++a<t-1;)ja[u|(u=n[a+1]>=r)<<1].forEach(h);for(ja[u<<0].forEach(h);++o<e-1;){for(a=-1,ja[(u=n[o*t+t]>=r)<<1|(l=n[o*t]>=r)<<2].forEach(h);++a<t-1;)c=l,ja[u|(u=n[o*t+t+a+1]>=r)<<1|(l=n[o*t+a+1]>=r)<<2|c<<3].forEach(h);ja[u|l<<3].forEach(h)}for(a=-1,ja[(l=n[o*t]>=r)<<2].forEach(h);++a<t-1;)c=l,ja[(l=n[o*t+a+1]>=r)<<2|c<<3].forEach(h);function h(t){var e,n,r=[t[0][0]+a,t[0][1]+o],u=[t[1][0]+a,t[1][1]+o],l=s(r),c=s(u);(e=f[l])?(n=d[c])?(delete f[e.end],delete d[n.start],e===n?(e.ring.push(u),i(e.ring)):d[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(u),f[e.end=c]=e):(e=d[c])?(n=f[l])?(delete d[e.start],delete f[n.end],e===n?(e.ring.push(u),i(e.ring)):d[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(r),d[e.start=l]=e):d[l]=f[c]={start:l,end:c,ring:[r,u]}}ja[l<<3].forEach(h)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?a.push([t]):o.push(t)})),o.forEach((function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==Na((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:a}}function s(e){return 2*e[0]+e[1]*(t+1)*4}function o(n,r,i){n.forEach((function(n){var a,s=n[0],o=n[1],u=0|s,l=0|o,c=r[l*t+u];s>0&&s<t&&u===s&&(n[0]=s+(i-(a=r[l*t+u-1]))/(c-a)-.5),o>0&&o<e&&l===o&&(n[1]=o+(i-(a=r[(l-1)*t+u]))/(c-a)-.5)}))}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0&&a>0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?La(Pa.call(t)):La(t),i):n},i.smooth=function(t){return arguments.length?(r=t?o:Ba,i):r===o},i};function Va(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),s=0;s<i;++s)for(var o=0,u=0;o<r+n;++o)o<r&&(u+=t.data[o+s*r]),o>=n&&(o>=a&&(u-=t.data[o-a+s*r]),e.data[o-n+s*r]=u/Math.min(o+1,r-1+a-o,a))}function Ga(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),s=0;s<r;++s)for(var o=0,u=0;o<i+n;++o)o<i&&(u+=t.data[s+o*r]),o>=n&&(o>=a&&(u-=t.data[s+(o-a)*r]),e.data[s+(o-n)*r]=u/Math.min(o+1,i-1+a-o,a))}function Ha(t){return t[0]}function Ya(t){return t[1]}function za(){return 1}var qa=function(){var t=Ha,e=Ya,n=za,r=960,i=500,a=20,s=2,o=3*a,u=r+2*o>>s,l=i+2*o>>s,c=La(20);function d(r){var i=new Float32Array(u*l),d=new Float32Array(u*l);r.forEach((function(r,a,c){var d=+t(r,a,c)+o>>s,f=+e(r,a,c)+o>>s,h=+n(r,a,c);d>=0&&d<u&&f>=0&&f<l&&(i[d+f*u]+=h)})),Va({width:u,height:l,data:i},{width:u,height:l,data:d},a>>s),Ga({width:u,height:l,data:d},{width:u,height:l,data:i},a>>s),Va({width:u,height:l,data:i},{width:u,height:l,data:d},a>>s),Ga({width:u,height:l,data:d},{width:u,height:l,data:i},a>>s),Va({width:u,height:l,data:i},{width:u,height:l,data:d},a>>s),Ga({width:u,height:l,data:d},{width:u,height:l,data:i},a>>s);var h=c(i);if(!Array.isArray(h)){var p=N(i);h=I(0,p,h),(h=S(0,Math.floor(p/h)*h,h)).shift()}return Ua().thresholds(h).size([u,l])(i).map(f)}function f(t){return t.value*=Math.pow(2,-2*s),t.coordinates.forEach(h),t}function h(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,s)-o,t[1]=t[1]*Math.pow(2,s)-o}function m(){return u=r+2*(o=3*a)>>s,l=i+2*o>>s,d}return d.x=function(e){return arguments.length?(t="function"==typeof e?e:La(+e),d):t},d.y=function(t){return arguments.length?(e="function"==typeof t?t:La(+t),d):e},d.weight=function(t){return arguments.length?(n="function"==typeof t?t:La(+t),d):n},d.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,m()},d.cellSize=function(t){if(!arguments.length)return 1<<s;if(!((t=+t)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(t)/Math.LN2),m()},d.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?La(Pa.call(t)):La(t),d):c},d.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),m()},d},Xa=function(t){return function(){return t}};function Ka(t,e,n,r,i,a,s,o,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=s,this.dx=o,this.dy=u,this._=l}function Wa(){return!le.ctrlKey&&!le.button}function $a(){return this.parentNode}function Qa(t){return null==t?{x:le.x,y:le.y}:t}function Za(){return navigator.maxTouchPoints||"ontouchstart"in this}Ka.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ja=function(){var t,e,n,r,i=Wa,a=$a,s=Qa,o=Za,u={},l=dt("start","drag","end"),c=0,d=0;function f(t){t.on("mousedown.drag",h).filter(o).on("touchstart.drag",m).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){if(!r&&i.apply(this,arguments)){var s=_("mouse",a.apply(this,arguments),Pn,this,arguments);s&&(Se(le.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),xe(le.view),we(),n=!1,t=le.clientX,e=le.clientY,s("start"))}}function p(){if(Ae(),!n){var r=le.clientX-t,i=le.clientY-e;n=r*r+i*i>d}u.mouse("drag")}function g(){Se(le.view).on("mousemove.drag mouseup.drag",null),Ce(le.view,n),Ae(),u.mouse("end")}function m(){if(i.apply(this,arguments)){var t,e,n=le.changedTouches,r=a.apply(this,arguments),s=n.length;for(t=0;t<s;++t)(e=_(n[t].identifier,r,On,this,arguments))&&(we(),e("start"))}}function y(){var t,e,n=le.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(Ae(),e("drag"))}function v(){var t,e,n=le.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(we(),e("end"))}function _(t,e,n,r,i){var a,o,d,h=n(e,t),p=l.copy();if(ge(new Ka(f,"beforestart",a,t,c,h[0],h[1],0,0,p),(function(){return null!=(le.subject=a=s.apply(r,i))&&(o=a.x-h[0]||0,d=a.y-h[1]||0,!0)})))return function s(l){var g,m=h;switch(l){case"start":u[t]=s,g=c++;break;case"end":delete u[t],--c;case"drag":h=n(e,t),g=c}ge(new Ka(f,l,a,t,g,h[0]+o,h[1]+d,h[0]-m[0],h[1]-m[1],p),p.apply,p,[l,r,i])}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:Xa(!!t),f):i},f.container=function(t){return arguments.length?(a="function"==typeof t?t:Xa(t),f):a},f.subject=function(t){return arguments.length?(s="function"==typeof t?t:Xa(t),f):s},f.touchable=function(t){return arguments.length?(o="function"==typeof t?t:Xa(!!t),f):o},f.on=function(){var t=l.on.apply(l,arguments);return t===l?f:t},f.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,f):Math.sqrt(d)},f},ts={},es={};function ns(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function rs(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function is(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}var as=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,s=0,o=0,u=a<=0,l=!1;function c(){if(u)return es;if(l)return l=!1,ts;var e,r,i=s;if(34===t.charCodeAt(i)){for(;s++<a&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=a?u=!0:10===(r=t.charCodeAt(s++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(s)&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<a;){if(10===(r=t.charCodeAt(e=s++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=c())!==es;){for(var d=[];r!==ts&&r!==es;)d.push(r),r=c();e&&null==(d=e(d,o++))||i.push(d)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function a(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?function(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+is(-e,6):e>9999?"+"+is(e,6):is(e,4))+"-"+is(t.getUTCMonth()+1,2)+"-"+is(t.getUTCDate(),2)+(a?"T"+is(n,2)+":"+is(r,2)+":"+is(i,2)+"."+is(a,3)+"Z":i?"T"+is(n,2)+":"+is(r,2)+":"+is(i,2)+"Z":r||n?"T"+is(n,2)+":"+is(r,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ns(t);return function(r,i){return e(n(r),i,t)}}(t,e):ns(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=rs(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=rs(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:s}},ss=as(","),os=ss.parse,us=ss.parseRows,ls=ss.format,cs=ss.formatBody,ds=ss.formatRows,fs=ss.formatRow,hs=ss.formatValue,ps=as("\t"),gs=ps.parse,ms=ps.parseRows,ys=ps.format,vs=ps.formatBody,_s=ps.formatRows,bs=ps.formatRow,Es=ps.formatValue;function Ts(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ss&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var Ss=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function ws(t){return+t}function As(t){return t*t}function xs(t){return t*(2-t)}function Cs(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Ds=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Is=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Rs=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Os=Math.PI,Ps=Os/2;function Ms(t){return 1==+t?1:1-Math.cos(t*Ps)}function Ls(t){return Math.sin(t*Ps)}function Ns(t){return(1-Math.cos(Os*t))/2}function ks(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Fs(t){return ks(1-+t)}function Bs(t){return 1-ks(t)}function js(t){return((t*=2)<=1?ks(1-t):2-ks(t-1))/2}function Us(t){return 1-Math.sqrt(1-t*t)}function Vs(t){return Math.sqrt(1- --t*t)}function Gs(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Hs(t){return 1-Ys(1-t)}function Ys(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+3/4:t<10/11?7.5625*(t-=9/11)*t+15/16:7.5625*(t-=21/22)*t+63/64}function zs(t){return((t*=2)<=1?1-Ys(1-t):Ys(t-1)+1)/2}var qs=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),Xs=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),Ks=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Ws=2*Math.PI,$s=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ws);function i(t){return e*ks(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Ws)},i.period=function(n){return t(e,n)},i}(1,.3),Qs=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ws);function i(t){return 1-e*ks(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Ws)},i.period=function(n){return t(e,n)},i}(1,.3),Zs=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ws);function i(t){return((t=2*t-1)<0?e*ks(-t)*Math.sin((r-t)/n):2-e*ks(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Ws)},i.period=function(n){return t(e,n)},i}(1,.3);function Js(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var to=function(t,e){return fetch(t,e).then(Js)};function eo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var no=function(t,e){return fetch(t,e).then(eo)};function ro(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var io=function(t,e){return fetch(t,e).then(ro)};function ao(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),io(e,n).then((function(e){return t(e,r)}))}}function so(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=as(t);return io(e,n).then((function(t){return i.parse(t,r)}))}var oo=ao(os),uo=ao(gs),lo=function(t,e){return new Promise((function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function co(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}var fo=function(t,e){return fetch(t,e).then(co)};function ho(t){return function(e,n){return io(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var po=ho("application/xml"),go=ho("text/html"),mo=ho("image/svg+xml"),yo=function(t,e){var n;function r(){var r,i,a=n.length,s=0,o=0;for(r=0;r<a;++r)s+=(i=n[r]).x,o+=i.y;for(s=s/a-t,o=o/a-e,r=0;r<a;++r)(i=n[r]).x-=s,i.y-=o}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},vo=function(t){return function(){return t}},_o=function(){return 1e-6*(Math.random()-.5)};function bo(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,s,o,u,l,c,d,f,h=t._root,p={data:r},g=t._x0,m=t._y0,y=t._x1,v=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((l=e>=(a=(g+y)/2))?g=a:y=a,(c=n>=(s=(m+v)/2))?m=s:v=s,i=h,!(h=h[d=c<<1|l]))return i[d]=p,t;if(o=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===o&&n===u)return p.next=h,i?i[d]=p:t._root=p,t;do{i=i?i[d]=new Array(4):t._root=new Array(4),(l=e>=(a=(g+y)/2))?g=a:y=a,(c=n>=(s=(m+v)/2))?m=s:v=s}while((d=c<<1|l)==(f=(u>=s)<<1|o>=a));return i[f]=h,i[d]=p,t}var Eo=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function To(t){return t[0]}function So(t){return t[1]}function wo(t,e,n){var r=new Ao(null==e?To:e,null==n?So:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ao(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function xo(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Co=wo.prototype=Ao.prototype;function Do(t){return t.x+t.vx}function Io(t){return t.y+t.vy}Co.copy=function(){var t,e,n=new Ao(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=xo(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=xo(e));return n},Co.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return bo(this.cover(e,n),e,n,t)},Co.addAll=function(t){var e,n,r,i,a=t.length,s=new Array(a),o=new Array(a),u=1/0,l=1/0,c=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,o[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>d&&(d=i));if(u>c||l>d)return this;for(this.cover(u,l).cover(c,d),n=0;n<a;++n)bo(this,s[n],o[n],t[n]);return this},Co.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var s,o,u=i-n,l=this._root;n>t||t>=i||r>e||e>=a;)switch(o=(e<r)<<1|t<n,(s=new Array(4))[o]=l,l=s,u*=2,o){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Co.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Co.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Co.find=function(t,e,n){var r,i,a,s,o,u,l,c=this._x0,d=this._y0,f=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Eo(g,c,d,f,h)),null==n?n=1/0:(c=t-n,d=e-n,f=t+n,h=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(a=u.y0)>h||(s=u.x1)<c||(o=u.y1)<d))if(g.length){var m=(i+s)/2,y=(a+o)/2;p.push(new Eo(g[3],m,y,s,o),new Eo(g[2],i,y,m,o),new Eo(g[1],m,a,s,y),new Eo(g[0],i,a,m,y)),(l=(e>=y)<<1|t>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);c=t-E,d=e-E,f=t+E,h=e+E,r=g.data}}return r},Co.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,a,s,o,u,l,c,d,f,h=this._root,p=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(o=(p+m)/2))?p=o:m=o,(c=s>=(u=(g+y)/2))?g=u:y=u,e=h,!(h=h[d=c<<1|l]))return this;if(!h.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,f=d)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[d]=i:delete e[d],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[f]=h:this._root=h),this):(this._root=i,this)},Co.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Co.root=function(){return this._root},Co.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Co.visit=function(t){var e,n,r,i,a,s,o=[],u=this._root;for(u&&o.push(new Eo(u,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,s=e.y1)&&u.length){var l=(r+a)/2,c=(i+s)/2;(n=u[3])&&o.push(new Eo(n,l,c,a,s)),(n=u[2])&&o.push(new Eo(n,r,c,l,s)),(n=u[1])&&o.push(new Eo(n,l,i,a,c)),(n=u[0])&&o.push(new Eo(n,r,i,l,c))}return this},Co.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,s=e.x0,o=e.y0,u=e.x1,l=e.y1,c=(s+u)/2,d=(o+l)/2;(a=i[0])&&n.push(new Eo(a,s,o,c,d)),(a=i[1])&&n.push(new Eo(a,c,o,u,d)),(a=i[2])&&n.push(new Eo(a,s,d,c,l)),(a=i[3])&&n.push(new Eo(a,c,d,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Co.x=function(t){return arguments.length?(this._x=t,this):this._x},Co.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ro=function(t){var e,n,r=1,i=1;function a(){for(var t,a,o,u,l,c,d,f=e.length,h=0;h<i;++h)for(a=wo(e,Do,Io).visitAfter(s),t=0;t<f;++t)d=(c=n[(o=e[t]).index])*c,u=o.x+o.vx,l=o.y+o.vy,a.visit(p);function p(t,e,n,i,a){var s=t.data,f=t.r,h=c+f;if(!s)return e>u+h||i<u-h||n>l+h||a<l-h;if(s.index>o.index){var p=u-s.x-s.vx,g=l-s.y-s.vy,m=p*p+g*g;m<h*h&&(0===p&&(m+=(p=_o())*p),0===g&&(m+=(g=_o())*g),m=(h-(m=Math.sqrt(m)))/m*r,o.vx+=(p*=m)*(h=(f*=f)/(d+f)),o.vy+=(g*=m)*h,s.vx-=p*(h=1-h),s.vy-=g*h)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function o(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=vo(null==t?1:+t)),a.initialize=function(t){e=t,o()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:vo(+e),o(),a):t},a};function Oo(t){return t.index}function Po(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Mo=function(t){var e,n,r,i,a,s=Oo,o=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=vo(30),l=1;function c(r){for(var i=0,s=t.length;i<l;++i)for(var o,u,c,d,f,h,p,g=0;g<s;++g)d=(c=(o=t[g]).target).x+c.vx-(u=o.source).x-u.vx||_o(),f=c.y+c.vy-u.y-u.vy||_o(),f*=h=((h=Math.sqrt(d*d+f*f))-n[g])/h*r*e[g],c.vx-=(d*=h)*(p=a[g]),c.vy-=f*p,u.vx+=d*(p=1-p),u.vy+=f*p}function d(){if(r){var o,u,l=r.length,c=t.length,d=Qi(r,s);for(o=0,i=new Array(l);o<c;++o)(u=t[o]).index=o,"object"!=typeof u.source&&(u.source=Po(d,u.source)),"object"!=typeof u.target&&(u.target=Po(d,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(o=0,a=new Array(c);o<c;++o)a[o]=i[(u=t[o]).source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),f(),n=new Array(c),h()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+o(t[n],n,t)}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,d()},c.links=function(e){return arguments.length?(t=e,d(),c):t},c.id=function(t){return arguments.length?(s=t,c):s},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:vo(+t),f(),c):o},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:vo(+t),h(),c):u},c};function Lo(t){return t.x}function No(t){return t.y}var ko=Math.PI*(3-Math.sqrt(5)),Fo=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=Qi(),u=Yn(c),l=dt("tick","end");function c(){d(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function d(r){var u,l,c=t.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(a-n)*i,o.each((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),a=n*ko;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),o.each(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,n){return arguments.length>1?(null==n?o.remove(t):o.set(t,h(n)),e):o.get(t)},find:function(e,n,r){var i,a,s,o,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(s=(i=e-(o=t[l]).x)*i+(a=n-o.y)*a)<r&&(u=o,r=s);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},Bo=function(){var t,e,n,r,i=vo(-30),a=1,s=1/0,o=.81;function u(r){var i,a=t.length,s=wo(t,Lo,No).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],s.visit(d)}function l(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)r[(n=t[e]).index]=+i(n,e,t)}}function c(t){var e,n,i,a,s,o=0,u=0;if(t.length){for(i=a=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(o+=e.value,u+=n,i+=n*e.x,a+=n*e.y);t.x=i/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=r[e.data.index]}while(e=e.next)}t.value=o}function d(t,i,u,l){if(!t.value)return!0;var c=t.x-e.x,d=t.y-e.y,f=l-i,h=c*c+d*d;if(f*f/o<h)return h<s&&(0===c&&(h+=(c=_o())*c),0===d&&(h+=(d=_o())*d),h<a&&(h=Math.sqrt(a*h)),e.vx+=c*t.value*n/h,e.vy+=d*t.value*n/h),!0;if(!(t.length||h>=s)){(t.data!==e||t.next)&&(0===c&&(h+=(c=_o())*c),0===d&&(h+=(d=_o())*d),h<a&&(h=Math.sqrt(a*h)));do{t.data!==e&&(e.vx+=c*(f=r[t.data.index]*n/h),e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:vo(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u},jo=function(t,e,n){var r,i,a,s=vo(.1);function o(t){for(var s=0,o=r.length;s<o;++s){var u=r[s],l=u.x-e||1e-6,c=u.y-n||1e-6,d=Math.sqrt(l*l+c*c),f=(a[s]-d)*i[s]*t/d;u.vx+=l*f,u.vy+=c*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+s(r[e],e,r)}}return"function"!=typeof t&&(t=vo(+t)),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t,u()},o.strength=function(t){return arguments.length?(s="function"==typeof t?t:vo(+t),u(),o):s},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:vo(+e),u(),o):t},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(t){return arguments.length?(n=+t,o):n},o},Uo=function(t){var e,n,r,i=vo(.1);function a(t){for(var i,a=0,s=e.length;a<s;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function s(){if(e){var a,s=e.length;for(n=new Array(s),r=new Array(s),a=0;a<s;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=vo(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:vo(+t),s(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:vo(+e),s(),a):t},a},Vo=function(t){var e,n,r,i=vo(.1);function a(t){for(var i,a=0,s=e.length;a<s;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function s(){if(e){var a,s=e.length;for(n=new Array(s),r=new Array(s),a=0;a<s;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=vo(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:vo(+t),s(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:vo(+e),s(),a):t},a};function Go(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var Ho=function(t){return(t=Go(Math.abs(t)))?t[1]:NaN},Yo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zo(t){if(!(e=Yo.exec(t)))throw new Error("invalid format: "+t);var e;return new qo({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qo(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}zo.prototype=qo.prototype,qo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xo,Ko,Wo,$o,Qo=function(t,e){var n=Go(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Zo={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Qo(100*t,e)},r:Qo,s:function(t,e){var n=Go(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Xo=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Go(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Jo=function(t){return t},tu=Array.prototype.map,eu=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],nu=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Jo:(e=tu.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],s=0,o=e[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),a.push(t.substring(i-=o,i+o)),!((u+=o+1)>r));)o=e[s=(s+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Jo:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(tu.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=zo(t)).fill,n=t.align,d=t.sign,f=t.symbol,h=t.zero,p=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Zo[v]||(void 0===m&&(m=12),y=!0,v="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===f?a:/[%p]/.test(v)?u:"",E=Zo[v],T=/[defgprs%]/.test(v);function S(t){var i,a,u,f=_,S=b;if("c"===v)S=E(t)+S,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:E(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==d&&(w=!1),f=(w?"("===d?d:l:"-"===d||"("===d?"":d)+f,S=("s"===v?eu[8+Xo/3]:"")+S+(w&&"("===d?")":""),T)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){S=(46===u?s+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}g&&!h&&(t=r(t,1/0));var A=f.length+t.length+S.length,x=A<p?new Array(p-A+1).join(e):"";switch(g&&h&&(t=r(x+t,x.length?p-S.length:1/0),x=""),n){case"<":t=f+t+S+x;break;case"=":t=f+x+t+S;break;case"^":t=x.slice(0,A=x.length>>1)+f+t+S+x.slice(A);break;default:t=x+f+t+S}return o(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:d,formatPrefix:function(t,e){var n=d(((t=zo(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ho(e)/3))),i=Math.pow(10,-r),a=eu[8+r/3];return function(t){return n(i*t)+a}}}};function ru(t){return Ko=nu(t),Wo=Ko.format,$o=Ko.formatPrefix,Ko}ru({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var iu=function(t){return Math.max(0,-Ho(Math.abs(t)))},au=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ho(e)/3)))-Ho(Math.abs(t)))},su=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ho(e)-Ho(t))+1},ou=function(){return new uu};function uu(){this.reset()}uu.prototype={constructor:uu,reset:function(){this.s=this.t=0},add:function(t){cu(lu,t,this.t),cu(this,lu.s,this.s),this.s?this.t+=lu.t:this.s=lu.t},valueOf:function(){return this.s}};var lu=new uu;function cu(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var du=Math.PI,fu=du/2,hu=du/4,pu=2*du,gu=180/du,mu=du/180,yu=Math.abs,vu=Math.atan,_u=Math.atan2,bu=Math.cos,Eu=Math.ceil,Tu=Math.exp,Su=(Math,Math.log),wu=Math.pow,Au=Math.sin,xu=Math.sign||function(t){return t>0?1:t<0?-1:0},Cu=Math.sqrt,Du=Math.tan;function Iu(t){return t>1?0:t<-1?du:Math.acos(t)}function Ru(t){return t>1?fu:t<-1?-fu:Math.asin(t)}function Ou(t){return(t=Au(t/2))*t}function Pu(){}function Mu(t,e){t&&Nu.hasOwnProperty(t.type)&&Nu[t.type](t,e)}var Lu={Feature:function(t,e){Mu(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Mu(n[r].geometry,e)}},Nu={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){ku(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ku(n[r],e,0)},Polygon:function(t,e){Fu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Fu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Mu(n[r],e)}};function ku(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Fu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ku(t[n],e,1);e.polygonEnd()}var Bu,ju,Uu,Vu,Gu,Hu=function(t,e){t&&Lu.hasOwnProperty(t.type)?Lu[t.type](t,e):Mu(t,e)},Yu=ou(),zu=ou(),qu={point:Pu,lineStart:Pu,lineEnd:Pu,polygonStart:function(){Yu.reset(),qu.lineStart=Xu,qu.lineEnd=Ku},polygonEnd:function(){var t=+Yu;zu.add(t<0?pu+t:t),this.lineStart=this.lineEnd=this.point=Pu},sphere:function(){zu.add(pu)}};function Xu(){qu.point=Wu}function Ku(){$u(Bu,ju)}function Wu(t,e){qu.point=$u,Bu=t,ju=e,Uu=t*=mu,Vu=bu(e=(e*=mu)/2+hu),Gu=Au(e)}function $u(t,e){var n=(t*=mu)-Uu,r=n>=0?1:-1,i=r*n,a=bu(e=(e*=mu)/2+hu),s=Au(e),o=Gu*s,u=Vu*a+o*bu(i),l=o*r*Au(i);Yu.add(_u(l,u)),Uu=t,Vu=a,Gu=s}var Qu=function(t){return zu.reset(),Hu(t,qu),2*zu};function Zu(t){return[_u(t[1],t[0]),Ru(t[2])]}function Ju(t){var e=t[0],n=t[1],r=bu(n);return[r*bu(e),r*Au(e),Au(n)]}function tl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function el(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function nl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function rl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function il(t){var e=Cu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var al,sl,ol,ul,ll,cl,dl,fl,hl,pl,gl=ou(),ml={point:yl,lineStart:_l,lineEnd:bl,polygonStart:function(){ml.point=El,ml.lineStart=Tl,ml.lineEnd=Sl,gl.reset(),qu.polygonStart()},polygonEnd:function(){qu.polygonEnd(),ml.point=yl,ml.lineStart=_l,ml.lineEnd=bl,Yu<0?(al=-(ol=180),sl=-(ul=90)):gl>1e-6?ul=90:gl<-1e-6&&(sl=-90),pl[0]=al,pl[1]=ol},sphere:function(){al=-(ol=180),sl=-(ul=90)}};function yl(t,e){hl.push(pl=[al=t,ol=t]),e<sl&&(sl=e),e>ul&&(ul=e)}function vl(t,e){var n=Ju([t*mu,e*mu]);if(fl){var r=el(fl,n),i=el([r[1],-r[0],0],r);il(i),i=Zu(i);var a,s=t-ll,o=s>0?1:-1,u=i[0]*gu*o,l=yu(s)>180;l^(o*ll<u&&u<o*t)?(a=i[1]*gu)>ul&&(ul=a):l^(o*ll<(u=(u+360)%360-180)&&u<o*t)?(a=-i[1]*gu)<sl&&(sl=a):(e<sl&&(sl=e),e>ul&&(ul=e)),l?t<ll?wl(al,t)>wl(al,ol)&&(ol=t):wl(t,ol)>wl(al,ol)&&(al=t):ol>=al?(t<al&&(al=t),t>ol&&(ol=t)):t>ll?wl(al,t)>wl(al,ol)&&(ol=t):wl(t,ol)>wl(al,ol)&&(al=t)}else hl.push(pl=[al=t,ol=t]);e<sl&&(sl=e),e>ul&&(ul=e),fl=n,ll=t}function _l(){ml.point=vl}function bl(){pl[0]=al,pl[1]=ol,ml.point=yl,fl=null}function El(t,e){if(fl){var n=t-ll;gl.add(yu(n)>180?n+(n>0?360:-360):n)}else cl=t,dl=e;qu.point(t,e),vl(t,e)}function Tl(){qu.lineStart()}function Sl(){El(cl,dl),qu.lineEnd(),yu(gl)>1e-6&&(al=-(ol=180)),pl[0]=al,pl[1]=ol,fl=null}function wl(t,e){return(e-=t)<0?e+360:e}function Al(t,e){return t[0]-e[0]}function xl(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Cl,Dl,Il,Rl,Ol,Pl,Ml,Ll,Nl,kl,Fl,Bl,jl,Ul,Vl,Gl,Hl=function(t){var e,n,r,i,a,s,o;if(ul=ol=-(al=sl=1/0),hl=[],Hu(t,ml),n=hl.length){for(hl.sort(Al),e=1,a=[r=hl[0]];e<n;++e)xl(r,(i=hl[e])[0])||xl(r,i[1])?(wl(r[0],i[1])>wl(r[0],r[1])&&(r[1]=i[1]),wl(i[0],r[1])>wl(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(s=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)(o=wl(r[1],(i=a[e])[0]))>s&&(s=o,al=i[0],ol=r[1])}return hl=pl=null,al===1/0||sl===1/0?[[NaN,NaN],[NaN,NaN]]:[[al,sl],[ol,ul]]},Yl={sphere:Pu,point:zl,lineStart:Xl,lineEnd:$l,polygonStart:function(){Yl.lineStart=Ql,Yl.lineEnd=Zl},polygonEnd:function(){Yl.lineStart=Xl,Yl.lineEnd=$l}};function zl(t,e){t*=mu;var n=bu(e*=mu);ql(n*bu(t),n*Au(t),Au(e))}function ql(t,e,n){++Cl,Il+=(t-Il)/Cl,Rl+=(e-Rl)/Cl,Ol+=(n-Ol)/Cl}function Xl(){Yl.point=Kl}function Kl(t,e){t*=mu;var n=bu(e*=mu);Ul=n*bu(t),Vl=n*Au(t),Gl=Au(e),Yl.point=Wl,ql(Ul,Vl,Gl)}function Wl(t,e){t*=mu;var n=bu(e*=mu),r=n*bu(t),i=n*Au(t),a=Au(e),s=_u(Cu((s=Vl*a-Gl*i)*s+(s=Gl*r-Ul*a)*s+(s=Ul*i-Vl*r)*s),Ul*r+Vl*i+Gl*a);Dl+=s,Pl+=s*(Ul+(Ul=r)),Ml+=s*(Vl+(Vl=i)),Ll+=s*(Gl+(Gl=a)),ql(Ul,Vl,Gl)}function $l(){Yl.point=zl}function Ql(){Yl.point=Jl}function Zl(){tc(Bl,jl),Yl.point=zl}function Jl(t,e){Bl=t,jl=e,t*=mu,e*=mu,Yl.point=tc;var n=bu(e);Ul=n*bu(t),Vl=n*Au(t),Gl=Au(e),ql(Ul,Vl,Gl)}function tc(t,e){t*=mu;var n=bu(e*=mu),r=n*bu(t),i=n*Au(t),a=Au(e),s=Vl*a-Gl*i,o=Gl*r-Ul*a,u=Ul*i-Vl*r,l=Cu(s*s+o*o+u*u),c=Ru(l),d=l&&-c/l;Nl+=d*s,kl+=d*o,Fl+=d*u,Dl+=c,Pl+=c*(Ul+(Ul=r)),Ml+=c*(Vl+(Vl=i)),Ll+=c*(Gl+(Gl=a)),ql(Ul,Vl,Gl)}var ec=function(t){Cl=Dl=Il=Rl=Ol=Pl=Ml=Ll=Nl=kl=Fl=0,Hu(t,Yl);var e=Nl,n=kl,r=Fl,i=e*e+n*n+r*r;return i<1e-12&&(e=Pl,n=Ml,r=Ll,Dl<1e-6&&(e=Il,n=Rl,r=Ol),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[_u(n,e)*gu,Ru(r/Cu(i))*gu]},nc=function(t){return function(){return t}},rc=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function ic(t,e){return[yu(t)>du?t+Math.round(-t/pu)*pu:t,e]}function ac(t,e,n){return(t%=pu)?e||n?rc(oc(t),uc(e,n)):oc(t):e||n?uc(e,n):ic}function sc(t){return function(e,n){return[(e+=t)>du?e-pu:e<-du?e+pu:e,n]}}function oc(t){var e=sc(t);return e.invert=sc(-t),e}function uc(t,e){var n=bu(t),r=Au(t),i=bu(e),a=Au(e);function s(t,e){var s=bu(e),o=bu(t)*s,u=Au(t)*s,l=Au(e),c=l*n+o*r;return[_u(u*i-c*a,o*n-l*r),Ru(c*i+u*a)]}return s.invert=function(t,e){var s=bu(e),o=bu(t)*s,u=Au(t)*s,l=Au(e),c=l*i-u*a;return[_u(u*i+l*a,o*n+c*r),Ru(c*n-o*r)]},s}ic.invert=ic;var lc=function(t){function e(e){return(e=t(e[0]*mu,e[1]*mu))[0]*=gu,e[1]*=gu,e}return t=ac(t[0]*mu,t[1]*mu,t.length>2?t[2]*mu:0),e.invert=function(e){return(e=t.invert(e[0]*mu,e[1]*mu))[0]*=gu,e[1]*=gu,e},e};function cc(t,e,n,r,i,a){if(n){var s=bu(e),o=Au(e),u=r*n;null==i?(i=e+r*pu,a=e-u/2):(i=dc(s,i),a=dc(s,a),(r>0?i<a:i>a)&&(i+=r*pu));for(var l,c=i;r>0?c>a:c<a;c-=u)l=Zu([s,-o*bu(c),-o*Au(c)]),t.point(l[0],l[1])}}function dc(t,e){(e=Ju(e))[0]-=t,il(e);var n=Iu(-e[1]);return((-e[2]<0?-n:n)+pu-1e-6)%pu}var fc=function(){var t,e,n=nc([0,0]),r=nc(90),i=nc(6),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=gu,n[1]*=gu}};function s(){var s=n.apply(this,arguments),o=r.apply(this,arguments)*mu,u=i.apply(this,arguments)*mu;return t=[],e=ac(-s[0]*mu,-s[1]*mu,0).invert,cc(a,o,u,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(n="function"==typeof t?t:nc([+t[0],+t[1]]),s):n},s.radius=function(t){return arguments.length?(r="function"==typeof t?t:nc(+t),s):r},s.precision=function(t){return arguments.length?(i="function"==typeof t?t:nc(+t),s):i},s},hc=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Pu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},pc=function(t,e){return yu(t[0]-e[0])<1e-6&&yu(t[1]-e[1])<1e-6};function gc(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var mc=function(t,e,n,r,i){var a,s,o=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(pc(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}s[0]+=2e-6}o.push(n=new gc(r,t,null,!0)),u.push(n.o=new gc(r,null,n,!1)),o.push(n=new gc(s,t,null,!1)),u.push(n.o=new gc(s,null,n,!0))}})),o.length){for(u.sort(e),yc(o),yc(u),a=0,s=u.length;a<s;++a)u[a].e=n=!n;for(var l,c,d=o[0];;){for(var f=d,h=!0;f.v;)if((f=f.n)===d)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,s=l.length;a<s;++a)i.point((c=l[a])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(a=(l=f.p.z).length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,h=!h}while(!f.v);i.lineEnd()}}};function yc(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var vc=ou();function _c(t){return yu(t[0])<=du?t[0]:xu(t[0])*((yu(t[0])+du)%pu-du)}var bc=function(t,e){var n=_c(e),r=e[1],i=Au(r),a=[Au(n),-bu(n),0],s=0,o=0;vc.reset(),1===i?r=fu+1e-6:-1===i&&(r=-fu-1e-6);for(var u=0,l=t.length;u<l;++u)if(d=(c=t[u]).length)for(var c,d,f=c[d-1],h=_c(f),p=f[1]/2+hu,g=Au(p),m=bu(p),y=0;y<d;++y,h=_,g=E,m=T,f=v){var v=c[y],_=_c(v),b=v[1]/2+hu,E=Au(b),T=bu(b),S=_-h,w=S>=0?1:-1,A=w*S,x=A>du,C=g*E;if(vc.add(_u(C*w*Au(A),m*T+C*bu(A))),s+=x?S+w*pu:S,x^h>=n^_>=n){var D=el(Ju(f),Ju(v));il(D);var I=el(a,D);il(I);var R=(x^S>=0?-1:1)*Ru(I[2]);(r>R||r===R&&(D[0]||D[1]))&&(o+=x^S>=0?1:-1)}}return(s<-1e-6||s<1e-6&&vc<-1e-6)^1&o},Ec=function(t,e,n,r){return function(i){var a,s,o,u=e(i),l=hc(),c=e(l),d=!1,f={point:h,lineStart:g,lineEnd:m,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=_,s=[],a=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=m,s=B(s);var t=bc(a,r);s.length?(d||(i.polygonStart(),d=!0),mc(s,Sc,t,n,i)):t&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),s=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){f.point=p,u.lineStart()}function m(){f.point=h,u.lineEnd()}function y(t,e){o.push([t,e]),c.point(t,e)}function v(){c.lineStart(),o=[]}function _(){y(o[0][0],o[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),h=f.length;if(o.pop(),a.push(o),o=null,h)if(1&u){if((e=(n=f[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&f.push(f.pop().concat(f.shift())),s.push(f.filter(Tc))}return f}};function Tc(t){return t.length>1}function Sc(t,e){return((t=t.x)[0]<0?t[1]-fu-1e-6:fu-t[1])-((e=e.x)[0]<0?e[1]-fu-1e-6:fu-e[1])}var wc=Ec((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,s){var o=a>0?du:-du,u=yu(a-n);yu(u-du)<1e-6?(t.point(n,r=(r+s)/2>0?fu:-fu),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(o,r),t.point(a,r),e=0):i!==o&&u>=du&&(yu(n-i)<1e-6&&(n-=1e-6*i),yu(a-o)<1e-6&&(a-=1e-6*o),r=function(t,e,n,r){var i,a,s=Au(t-n);return yu(s)>1e-6?vu((Au(e)*(a=bu(r))*Au(n)-Au(r)*(i=bu(e))*Au(t))/(i*a*s)):(e+r)/2}(n,r,a,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(o,r),e=0),t.point(n=a,r=s),i=o},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)r.point(-du,i=n*fu),r.point(0,i),r.point(du,i),r.point(du,0),r.point(du,-i),r.point(0,-i),r.point(-du,-i),r.point(-du,0),r.point(-du,i);else if(yu(t[0]-e[0])>1e-6){var a=t[0]<e[0]?du:-du;r.point(-a,i=n*a/2),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-du,-fu]),Ac=function(t){var e=bu(t),n=6*mu,r=e>0,i=yu(e)>1e-6;function a(t,n){return bu(t)*bu(n)>e}function s(t,n,r){var i=[1,0,0],a=el(Ju(t),Ju(n)),s=tl(a,a),o=a[0],u=s-o*o;if(!u)return!r&&t;var l=e*s/u,c=-e*o/u,d=el(i,a),f=rl(i,l);nl(f,rl(a,c));var h=d,p=tl(f,h),g=tl(h,h),m=p*p-g*(tl(f,f)-1);if(!(m<0)){var y=Cu(m),v=rl(h,(-p-y)/g);if(nl(v,f),v=Zu(v),!r)return v;var _,b=t[0],E=n[0],T=t[1],S=n[1];E<b&&(_=b,b=E,E=_);var w=E-b,A=yu(w-du)<1e-6;if(!A&&S<T&&(_=T,T=S,S=_),A||w<1e-6?A?T+S>0^v[1]<(yu(v[0]-b)<1e-6?T:S):T<=v[1]&&v[1]<=S:w>du^(b<=v[0]&&v[0]<=E)){var x=rl(h,(-p+y)/g);return nl(x,f),[v,Zu(x)]}}}function o(e,n){var i=r?t:du-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Ec(a,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(d,f){var h,p=[d,f],g=a(d,f),m=r?g?0:o(d,f):g?o(d+(d<0?du:-du),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(h=s(e,p))||pc(e,h)||pc(p,h))&&(p[2]=1),g!==u)c=0,g?(t.lineStart(),h=s(p,e),t.point(h[0],h[1])):(h=s(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^g){var y;m&n||!(y=s(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!g||e&&pc(e,p)||t.point(p[0],p[1]),e=p,u=g,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,a){cc(a,t,n,i,e,r)}),r?[0,-t]:[-du,t-du])};function xc(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,o,l){var c=0,d=0;if(null==i||(c=s(i,o))!==(d=s(a,o))||u(i,a)<0^o>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+o+4)%4)!==d);else l.point(a[0],a[1])}function s(r,i){return yu(r[0]-t)<1e-6?i>0?0:3:yu(r[0]-n)<1e-6?i>0?2:1:yu(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function o(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,d,f,h,p,g,m,y,v,_=s,b=hc(),E={point:T,lineStart:function(){E.point=S,l&&l.push(c=[]),y=!0,m=!1,p=g=NaN},lineEnd:function(){u&&(S(d,f),h&&m&&b.rejoin(),u.push(b.result())),E.point=T,m&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,s,o=l[n],u=1,c=o.length,d=o[0],f=d[0],h=d[1];u<c;++u)a=f,s=h,f=(d=o[u])[0],h=d[1],s<=r?h>r&&(f-a)*(r-s)>(h-s)*(t-a)&&++e:h<=r&&(f-a)*(r-s)<(h-s)*(t-a)&&--e;return e}(),n=v&&e,i=(u=B(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),i&&mc(u,o,e,a,s),s.polygonEnd()),_=s,u=l=c=null}};function T(t,e){i(t,e)&&_.point(t,e)}function S(a,s){var o=i(a,s);if(l&&c.push([a,s]),y)d=a,f=s,h=o,y=!1,o&&(_.lineStart(),_.point(a,s));else if(o&&m)_.point(a,s);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],b=[a=Math.max(-1e9,Math.min(1e9,a)),s=Math.max(-1e9,Math.min(1e9,s))];!function(t,e,n,r,i,a){var s,o=t[0],u=t[1],l=0,c=1,d=e[0]-o,f=e[1]-u;if(s=n-o,d||!(s>0)){if(s/=d,d<0){if(s<l)return;s<c&&(c=s)}else if(d>0){if(s>c)return;s>l&&(l=s)}if(s=i-o,d||!(s<0)){if(s/=d,d<0){if(s>c)return;s>l&&(l=s)}else if(d>0){if(s<l)return;s<c&&(c=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=a-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=o+l*d,t[1]=u+l*f),c<1&&(e[0]=o+c*d,e[1]=u+c*f),!0}}}}}(u,b,t,e,n,r)?o&&(_.lineStart(),_.point(a,s),v=!1):(m||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),o||_.lineEnd(),v=!1)}p=a,g=s,m=o}return E}}var Cc,Dc,Ic,Rc=function(){var t,e,n,r=0,i=0,a=960,s=500;return n={stream:function(n){return t&&e===n?t:t=xc(r,i,a,s)(e=n)},extent:function(o){return arguments.length?(r=+o[0][0],i=+o[0][1],a=+o[1][0],s=+o[1][1],t=e=null,n):[[r,i],[a,s]]}}},Oc=ou(),Pc={sphere:Pu,point:Pu,lineStart:function(){Pc.point=Lc,Pc.lineEnd=Mc},lineEnd:Pu,polygonStart:Pu,polygonEnd:Pu};function Mc(){Pc.point=Pc.lineEnd=Pu}function Lc(t,e){Cc=t*=mu,Dc=Au(e*=mu),Ic=bu(e),Pc.point=Nc}function Nc(t,e){t*=mu;var n=Au(e*=mu),r=bu(e),i=yu(t-Cc),a=bu(i),s=r*Au(i),o=Ic*n-Dc*r*a,u=Dc*n+Ic*r*a;Oc.add(_u(Cu(s*s+o*o),u)),Cc=t,Dc=n,Ic=r}var kc=function(t){return Oc.reset(),Hu(t,Pc),+Oc},Fc=[null,null],Bc={type:"LineString",coordinates:Fc},jc=function(t,e){return Fc[0]=t,Fc[1]=e,kc(Bc)},Uc={Feature:function(t,e){return Gc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Gc(n[r].geometry,e))return!0;return!1}},Vc={Sphere:function(){return!0},Point:function(t,e){return Hc(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hc(n[r],e))return!0;return!1},LineString:function(t,e){return Yc(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Yc(n[r],e))return!0;return!1},Polygon:function(t,e){return zc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(zc(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Gc(n[r],e))return!0;return!1}};function Gc(t,e){return!(!t||!Vc.hasOwnProperty(t.type))&&Vc[t.type](t,e)}function Hc(t,e){return 0===jc(t,e)}function Yc(t,e){for(var n,r,i,a=0,s=t.length;a<s;a++){if(0===(r=jc(t[a],e)))return!0;if(a>0&&(i=jc(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function zc(t,e){return!!bc(t.map(qc),Xc(e))}function qc(t){return(t=t.map(Xc)).pop(),t}function Xc(t){return[t[0]*mu,t[1]*mu]}var Kc=function(t,e){return(t&&Uc.hasOwnProperty(t.type)?Uc[t.type]:Gc)(t,e)};function Wc(t,e,n){var r=S(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function $c(t,e,n){var r=S(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Qc(){var t,e,n,r,i,a,s,o,u,l,c,d,f=10,h=f,p=90,g=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return S(Eu(r/p)*p,n,p).map(c).concat(S(Eu(o/g)*g,s,g).map(d)).concat(S(Eu(e/f)*f,t,f).filter((function(t){return yu(t%p)>1e-6})).map(u)).concat(S(Eu(a/h)*h,i,h).filter((function(t){return yu(t%g)>1e-6})).map(l))}return y.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(d(s).slice(1),c(n).reverse().slice(1),d(o).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(o=+t[0][1],s=+t[1][1],(r=+t[0][0])>(n=+t[1][0])&&(t=r,r=n,n=t),o>s&&(t=o,o=s,s=t),y.precision(m)):[[r,o],[n,s]]},y.extentMinor=function(n){return arguments.length?(a=+n[0][1],i=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),y.precision(m)):[[e,a],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],y):[p,g]},y.stepMinor=function(t){return arguments.length?(f=+t[0],h=+t[1],y):[f,h]},y.precision=function(f){return arguments.length?(m=+f,u=Wc(a,i,90),l=$c(e,t,m),c=Wc(o,s,90),d=$c(r,n,m),y):m},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Zc(){return Qc()()}var Jc,td,ed,nd,rd=function(t,e){var n=t[0]*mu,r=t[1]*mu,i=e[0]*mu,a=e[1]*mu,s=bu(r),o=Au(r),u=bu(a),l=Au(a),c=s*bu(n),d=s*Au(n),f=u*bu(i),h=u*Au(i),p=2*Ru(Cu(Ou(a-r)+s*u*Ou(i-n))),g=Au(p),m=p?function(t){var e=Au(t*=p)/g,n=Au(p-t)/g,r=n*c+e*f,i=n*d+e*h,a=n*o+e*l;return[_u(i,r)*gu,_u(a,Cu(r*r+i*i))*gu]}:function(){return[n*gu,r*gu]};return m.distance=p,m},id=function(t){return t},ad=ou(),sd=ou(),od={point:Pu,lineStart:Pu,lineEnd:Pu,polygonStart:function(){od.lineStart=ud,od.lineEnd=dd},polygonEnd:function(){od.lineStart=od.lineEnd=od.point=Pu,ad.add(yu(sd)),sd.reset()},result:function(){var t=ad/2;return ad.reset(),t}};function ud(){od.point=ld}function ld(t,e){od.point=cd,Jc=ed=t,td=nd=e}function cd(t,e){sd.add(nd*t-ed*e),ed=t,nd=e}function dd(){cd(Jc,td)}var fd,hd,pd,gd,md=od,yd=1/0,vd=yd,_d=-yd,bd=_d,Ed={point:function(t,e){t<yd&&(yd=t),t>_d&&(_d=t),e<vd&&(vd=e),e>bd&&(bd=e)},lineStart:Pu,lineEnd:Pu,polygonStart:Pu,polygonEnd:Pu,result:function(){var t=[[yd,vd],[_d,bd]];return _d=bd=-(vd=yd=1/0),t}},Td=0,Sd=0,wd=0,Ad=0,xd=0,Cd=0,Dd=0,Id=0,Rd=0,Od={point:Pd,lineStart:Md,lineEnd:kd,polygonStart:function(){Od.lineStart=Fd,Od.lineEnd=Bd},polygonEnd:function(){Od.point=Pd,Od.lineStart=Md,Od.lineEnd=kd},result:function(){var t=Rd?[Dd/Rd,Id/Rd]:Cd?[Ad/Cd,xd/Cd]:wd?[Td/wd,Sd/wd]:[NaN,NaN];return Td=Sd=wd=Ad=xd=Cd=Dd=Id=Rd=0,t}};function Pd(t,e){Td+=t,Sd+=e,++wd}function Md(){Od.point=Ld}function Ld(t,e){Od.point=Nd,Pd(pd=t,gd=e)}function Nd(t,e){var n=t-pd,r=e-gd,i=Cu(n*n+r*r);Ad+=i*(pd+t)/2,xd+=i*(gd+e)/2,Cd+=i,Pd(pd=t,gd=e)}function kd(){Od.point=Pd}function Fd(){Od.point=jd}function Bd(){Ud(fd,hd)}function jd(t,e){Od.point=Ud,Pd(fd=pd=t,hd=gd=e)}function Ud(t,e){var n=t-pd,r=e-gd,i=Cu(n*n+r*r);Ad+=i*(pd+t)/2,xd+=i*(gd+e)/2,Cd+=i,Dd+=(i=gd*t-pd*e)*(pd+t),Id+=i*(gd+e),Rd+=3*i,Pd(pd=t,gd=e)}var Vd=Od;function Gd(t){this._context=t}Gd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,pu)}},result:Pu};var Hd,Yd,zd,qd,Xd,Kd=ou(),Wd={point:Pu,lineStart:function(){Wd.point=$d},lineEnd:function(){Hd&&Qd(Yd,zd),Wd.point=Pu},polygonStart:function(){Hd=!0},polygonEnd:function(){Hd=null},result:function(){var t=+Kd;return Kd.reset(),t}};function $d(t,e){Wd.point=Qd,Yd=qd=t,zd=Xd=e}function Qd(t,e){Kd.add(Cu((qd-=t)*qd+(Xd-=e)*Xd)),qd=t,Xd=e}var Zd=Wd;function Jd(){this._string=[]}function tf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Jd.prototype={_radius:4.5,_circle:tf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=tf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var ef=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Hu(t,n(r))),r.result()}return a.area=function(t){return Hu(t,n(md)),md.result()},a.measure=function(t){return Hu(t,n(Zd)),Zd.result()},a.bounds=function(t){return Hu(t,n(Ed)),Ed.result()},a.centroid=function(t){return Hu(t,n(Vd)),Vd.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,id):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Jd):new Gd(e=t),"function"!=typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)},nf=function(t){return{stream:rf(t)}};function rf(t){return function(e){var n=new af;for(var r in t)n[r]=t[r];return n.stream=e,n}}function af(){}function sf(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Hu(n,t.stream(Ed)),e(Ed.result()),null!=r&&t.clipExtent(r),t}function of(t,e,n){return sf(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,o=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([s,o])}),n)}function uf(t,e,n){return of(t,[[0,0],e],n)}function lf(t,e,n){return sf(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];t.scale(150*i).translate([a,s])}),n)}function cf(t,e,n){return sf(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,s])}),n)}af.prototype={constructor:af,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var df=bu(30*mu),ff=function(t,e){return+e?function(t,e){function n(r,i,a,s,o,u,l,c,d,f,h,p,g,m){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*e&&g--){var b=s+f,E=o+h,T=u+p,S=Cu(b*b+E*E+T*T),w=Ru(T/=S),A=yu(yu(T)-1)<1e-6||yu(a-d)<1e-6?(a+d)/2:_u(E,b),x=t(A,w),C=x[0],D=x[1],I=C-r,R=D-i,O=v*I-y*R;(O*O/_>e||yu((y*I+v*R)/_-.5)>.3||s*f+o*h+u*p<df)&&(n(r,i,a,s,o,u,C,D,A,b/=S,E/=S,T,g,m),m.point(C,D),n(C,D,A,b,E,T,l,c,d,f,h,p,g,m))}}return function(e){var r,i,a,s,o,u,l,c,d,f,h,p,g={point:m,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var a=Ju([r,i]),s=t(r,i);n(c,d,l,f,h,p,c=s[0],d=s[1],l=r,f=a[0],h=a[1],p=a[2],16,e),e.point(c,d)}function _(){g.point=m,e.lineEnd()}function b(){y(),g.point=E,g.lineEnd=T}function E(t,e){v(r=t,e),i=c,a=d,s=f,o=h,u=p,g.point=v}function T(){n(c,d,l,f,h,p,i,a,r,s,o,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return rf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},hf=rf({point:function(t,e){this.stream.point(t*mu,e*mu)}});function pf(t,e,n,r,i){function a(a,s){return[e+t*(a*=r),n-t*(s*=i)]}return a.invert=function(a,s){return[(a-e)/t*r,(n-s)/t*i]},a}function gf(t,e,n,r,i,a){var s=bu(a),o=Au(a),u=s*t,l=o*t,c=s/t,d=o/t,f=(o*n-s*e)/t,h=(o*e+s*n)/t;function p(t,a){return[u*(t*=r)-l*(a*=i)+e,n-l*t-u*a]}return p.invert=function(t,e){return[r*(c*t-d*e+f),i*(h-d*t-c*e)]},p}function mf(t){return yf((function(){return t}))()}function yf(t){var e,n,r,i,a,s,o,u,l,c,d=150,f=480,h=250,p=0,g=0,m=0,y=0,v=0,_=0,b=1,E=1,T=null,S=wc,w=null,A=id,x=.5;function C(t){return u(t[0]*mu,t[1]*mu)}function D(t){return(t=u.invert(t[0],t[1]))&&[t[0]*gu,t[1]*gu]}function I(){var t=gf(d,0,0,b,E,_).apply(null,e(p,g)),r=(_?gf:pf)(d,f-t[0],h-t[1],b,E,_);return n=ac(m,y,v),o=rc(e,r),u=rc(n,o),s=ff(o,x),R()}function R(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=hf(function(t){return rf({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(S(s(A(c=t)))))},C.preclip=function(t){return arguments.length?(S=t,T=void 0,R()):S},C.postclip=function(t){return arguments.length?(A=t,w=r=i=a=null,R()):A},C.clipAngle=function(t){return arguments.length?(S=+t?Ac(T=t*mu):(T=null,wc),R()):T*gu},C.clipExtent=function(t){return arguments.length?(A=null==t?(w=r=i=a=null,id):xc(w=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),R()):null==w?null:[[w,r],[i,a]]},C.scale=function(t){return arguments.length?(d=+t,I()):d},C.translate=function(t){return arguments.length?(f=+t[0],h=+t[1],I()):[f,h]},C.center=function(t){return arguments.length?(p=t[0]%360*mu,g=t[1]%360*mu,I()):[p*gu,g*gu]},C.rotate=function(t){return arguments.length?(m=t[0]%360*mu,y=t[1]%360*mu,v=t.length>2?t[2]%360*mu:0,I()):[m*gu,y*gu,v*gu]},C.angle=function(t){return arguments.length?(_=t%360*mu,I()):_*gu},C.reflectX=function(t){return arguments.length?(b=t?-1:1,I()):b<0},C.reflectY=function(t){return arguments.length?(E=t?-1:1,I()):E<0},C.precision=function(t){return arguments.length?(s=ff(o,x=t*t),R()):Cu(x)},C.fitExtent=function(t,e){return of(C,t,e)},C.fitSize=function(t,e){return uf(C,t,e)},C.fitWidth=function(t,e){return lf(C,t,e)},C.fitHeight=function(t,e){return cf(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&D,I()}}function vf(t){var e=0,n=du/3,r=yf(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*mu,n=t[1]*mu):[e*gu,n*gu]},i}function _f(t,e){var n=Au(t),r=(n+Au(e))/2;if(yu(r)<1e-6)return function(t){var e=bu(t);function n(t,n){return[t*e,Au(n)/e]}return n.invert=function(t,n){return[t/e,Ru(n*e)]},n}(t);var i=1+n*(2*r-n),a=Cu(i)/r;function s(t,e){var n=Cu(i-2*r*Au(e))/r;return[n*Au(t*=r),a-n*bu(t)]}return s.invert=function(t,e){var n=a-e,s=_u(t,yu(n))*xu(n);return n*r<0&&(s-=du*xu(t)*xu(n)),[s/r,Ru((i-(t*t+n*n)*r*r)/(2*r))]},s}var bf=function(){return vf(_f).scale(155.424).center([0,33.6442])},Ef=function(){return bf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Tf=function(){var t,e,n,r,i,a,s=Ef(),o=bf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=bf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],s=t[1];return a=null,n.point(e,s),a||(r.point(e,s),a)||(i.point(e,s),a)}function d(){return t=e=null,c}return c.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:s).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[s.stream(e=n),o.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),d()):s.precision()},c.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),c.translate(s.translate())):s.scale()},c.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),a=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=o.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+1e-6,c+.12*e+1e-6],[a-.214*e-1e-6,c+.234*e-1e-6]]).stream(l),i=u.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+1e-6,c+.166*e+1e-6],[a-.115*e-1e-6,c+.234*e-1e-6]]).stream(l),d()},c.fitExtent=function(t,e){return of(c,t,e)},c.fitSize=function(t,e){return uf(c,t,e)},c.fitWidth=function(t,e){return lf(c,t,e)},c.fitHeight=function(t,e){return cf(c,t,e)},c.scale(1070)};function Sf(t){return function(e,n){var r=bu(e),i=bu(n),a=t(r*i);return[a*i*Au(e),a*Au(n)]}}function wf(t){return function(e,n){var r=Cu(e*e+n*n),i=t(r),a=Au(i),s=bu(i);return[_u(e*a,r*s),Ru(r&&n*a/r)]}}var Af=Sf((function(t){return Cu(2/(1+t))}));Af.invert=wf((function(t){return 2*Ru(t/2)}));var xf=function(){return mf(Af).scale(124.75).clipAngle(179.999)},Cf=Sf((function(t){return(t=Iu(t))&&t/Au(t)}));Cf.invert=wf((function(t){return t}));var Df=function(){return mf(Cf).scale(79.4188).clipAngle(179.999)};function If(t,e){return[t,Su(Du((fu+e)/2))]}If.invert=function(t,e){return[t,2*vu(Tu(e))-fu]};var Rf=function(){return Of(If).scale(961/pu)};function Of(t){var e,n,r,i=mf(t),a=i.center,s=i.scale,o=i.translate,u=i.clipExtent,l=null;function c(){var a=du*s(),o=i(lc(i.rotate()).invert([0,0]));return u(null==l?[[o[0]-a,o[1]-a],[o[0]+a,o[1]+a]]:t===If?[[Math.max(o[0]-a,l),e],[Math.min(o[0]+a,n),r]]:[[l,Math.max(o[1]-a,e)],[n,Math.min(o[1]+a,r)]])}return i.scale=function(t){return arguments.length?(s(t),c()):s()},i.translate=function(t){return arguments.length?(o(t),c()):o()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Pf(t){return Du((fu+t)/2)}function Mf(t,e){var n=bu(t),r=t===e?Au(t):Su(n/bu(e))/Su(Pf(e)/Pf(t)),i=n*wu(Pf(t),r)/r;if(!r)return If;function a(t,e){i>0?e<1e-6-fu&&(e=1e-6-fu):e>fu-1e-6&&(e=fu-1e-6);var n=i/wu(Pf(e),r);return[n*Au(r*t),i-n*bu(r*t)]}return a.invert=function(t,e){var n=i-e,a=xu(r)*Cu(t*t+n*n),s=_u(t,yu(n))*xu(n);return n*r<0&&(s-=du*xu(t)*xu(n)),[s/r,2*vu(wu(i/a,1/r))-fu]},a}var Lf=function(){return vf(Mf).scale(109.5).parallels([30,30])};function Nf(t,e){return[t,e]}Nf.invert=Nf;var kf=function(){return mf(Nf).scale(152.63)};function Ff(t,e){var n=bu(t),r=t===e?Au(t):(n-bu(e))/(e-t),i=n/r+t;if(yu(r)<1e-6)return Nf;function a(t,e){var n=i-e,a=r*t;return[n*Au(a),i-n*bu(a)]}return a.invert=function(t,e){var n=i-e,a=_u(t,yu(n))*xu(n);return n*r<0&&(a-=du*xu(t)*xu(n)),[a/r,i-xu(r)*Cu(t*t+n*n)]},a}var Bf=function(){return vf(Ff).scale(131.154).center([0,13.9389])},jf=1.340264,Uf=-.081106,Vf=893e-6,Gf=.003796,Hf=Cu(3)/2;function Yf(t,e){var n=Ru(Hf*Au(e)),r=n*n,i=r*r*r;return[t*bu(n)/(Hf*(jf+3*Uf*r+i*(7*Vf+9*Gf*r))),n*(jf+Uf*r+i*(Vf+Gf*r))]}Yf.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,s=0;s<12&&(a=(i=(r-=n=(r*(jf+Uf*i+a*(Vf+Gf*i))-e)/(jf+3*Uf*i+a*(7*Vf+9*Gf*i)))*r)*i*i,!(yu(n)<1e-12));++s);return[Hf*t*(jf+3*Uf*i+a*(7*Vf+9*Gf*i))/bu(r),Ru(Au(r)/Hf)]};var zf=function(){return mf(Yf).scale(177.158)};function qf(t,e){var n=bu(e),r=bu(t)*n;return[n*Au(t)/r,Au(e)/r]}qf.invert=wf(vu);var Xf=function(){return mf(qf).scale(144.049).clipAngle(60)},Kf=function(){var t,e,n,r,i,a,s,o=1,u=0,l=0,c=1,d=1,f=0,h=null,p=1,g=1,m=rf({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),y=id;function v(){return p=o*c,g=o*d,a=s=null,_}function _(n){var r=n[0]*p,i=n[1]*g;if(f){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+u,i+l]}return _.invert=function(n){var r=n[0]-u,i=n[1]-l;if(f){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/g]},_.stream=function(t){return a&&s===t?a:a=m(y(s=t))},_.postclip=function(t){return arguments.length?(y=t,h=n=r=i=null,v()):y},_.clipExtent=function(t){return arguments.length?(y=null==t?(h=n=r=i=null,id):xc(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==h?null:[[h,n],[r,i]]},_.scale=function(t){return arguments.length?(o=+t,v()):o},_.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],v()):[u,l]},_.angle=function(n){return arguments.length?(e=Au(f=n%360*mu),t=bu(f),v()):f*gu},_.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},_.reflectY=function(t){return arguments.length?(d=t?-1:1,v()):d<0},_.fitExtent=function(t,e){return of(_,t,e)},_.fitSize=function(t,e){return uf(_,t,e)},_.fitWidth=function(t,e){return lf(_,t,e)},_.fitHeight=function(t,e){return cf(_,t,e)},_};function Wf(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Wf.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,s=a*a;r-=n=(r*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-e)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(yu(n)>1e-6&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};var $f=function(){return mf(Wf).scale(175.295)};function Qf(t,e){return[bu(e)*Au(t),Au(e)]}Qf.invert=wf(Ru);var Zf=function(){return mf(Qf).scale(249.5).clipAngle(90.000001)};function Jf(t,e){var n=bu(e),r=1+bu(t)*n;return[n*Au(t)/r,Au(e)/r]}Jf.invert=wf((function(t){return 2*vu(t)}));var th=function(){return mf(Jf).scale(250).clipAngle(142)};function eh(t,e){return[Su(Du((fu+e)/2)),-t]}eh.invert=function(t,e){return[-e,2*vu(Tu(t))-fu]};var nh=function(){var t=Of(eh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function rh(t,e){return t.parent===e.parent?1:2}function ih(t,e){return t+e.x}function ah(t,e){return Math.max(t,e.y)}var sh=function(){var t=rh,e=1,n=1,r=!1;function i(i){var a,s=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(ih,0)/t.length}(n),e.y=function(t){return 1+t.reduce(ah,0)}(n)):(e.x=a?s+=t(e,a):0,e.y=0,a=e)}));var o=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=o.x-t(o,u)/2,c=u.x+t(u,o)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function oh(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function uh(t,e){var n,r,i,a,s,o=new fh(t),u=+t.value&&(o.value=t.value),l=[o];for(null==e&&(e=lh);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(s=i.length))for(n.children=new Array(s),a=s-1;a>=0;--a)l.push(r=n.children[a]=new fh(i[a])),r.parent=n,r.depth=n.depth+1;return o.eachBefore(dh)}function lh(t){return t.children}function ch(t){t.data=t.data.data}function dh(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function fh(t){this.data=t,this.depth=this.height=0,this.parent=null}fh.prototype=uh.prototype={constructor:fh,count:function(){return this.eachAfter(oh)},each:function(t){var e,n,r,i,a=this,s=[a];do{for(e=s.reverse(),s=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)s.push(n[r])}while(s.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],s=[];i=a.pop();)if(s.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=s.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return uh(this).eachBefore(ch)}};var hh=Array.prototype.slice,ph=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(hh.call(t))).length,a=[];r<i;)e=t[r],n&&yh(n,e)?++r:(n=_h(a=gh(a,e)),r=0);return n};function gh(t,e){var n,r;if(vh(e,t))return[e];for(n=0;n<t.length;++n)if(mh(e,t[n])&&vh(bh(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(mh(bh(t[n],t[r]),e)&&mh(bh(t[n],e),t[r])&&mh(bh(t[r],e),t[n])&&vh(Eh(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function mh(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function yh(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function vh(t,e){for(var n=0;n<e.length;++n)if(!yh(t,e[n]))return!1;return!0}function _h(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return bh(t[0],t[1]);case 3:return Eh(t[0],t[1],t[2])}}function bh(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,s=e.y,o=e.r,u=a-n,l=s-r,c=o-i,d=Math.sqrt(u*u+l*l);return{x:(n+a+u/d*c)/2,y:(r+s+l/d*c)/2,r:(d+i+o)/2}}function Eh(t,e,n){var r=t.x,i=t.y,a=t.r,s=e.x,o=e.y,u=e.r,l=n.x,c=n.y,d=n.r,f=r-s,h=r-l,p=i-o,g=i-c,m=u-a,y=d-a,v=r*r+i*i-a*a,_=v-s*s-o*o+u*u,b=v-l*l-c*c+d*d,E=h*p-f*g,T=(p*b-g*_)/(2*E)-r,S=(g*m-p*y)/E,w=(h*_-f*b)/(2*E)-i,A=(f*y-h*m)/E,x=S*S+A*A-1,C=2*(a+T*S+w*A),D=T*T+w*w-a*a,I=-(x?(C+Math.sqrt(C*C-4*x*D))/(2*x):D/C);return{x:r+T+S*I,y:i+w+A*I,r:I}}function Th(t,e,n){var r,i,a,s,o=t.x-e.x,u=t.y-e.y,l=o*o+u*u;l?(i=e.r+n.r,s=t.r+n.r,(i*=i)>(s*=s)?(r=(l+s-i)/(2*l),a=Math.sqrt(Math.max(0,s/l-r*r)),n.x=t.x-r*o-a*u,n.y=t.y-r*u+a*o):(r=(l+i-s)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*o-a*u,n.y=e.y+r*u+a*o)):(n.x=e.x+n.r,n.y=e.y)}function Sh(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function wh(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Ah(t){this._=t,this.next=null,this.previous=null}function xh(t){if(!(i=t.length))return 0;var e,n,r,i,a,s,o,u,l,c,d;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Th(n,e,r=t[2]),e=new Ah(e),n=new Ah(n),r=new Ah(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(o=3;o<i;++o){Th(e._,n._,r=t[o]),r=new Ah(r),u=n.next,l=e.previous,c=n._.r,d=e._.r;do{if(c<=d){if(Sh(u._,r._)){e.next=n=u,n.previous=e,--o;continue t}c+=u._.r,u=u.next}else{if(Sh(l._,r._)){(e=l).next=n,n.previous=e,--o;continue t}d+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=wh(e);(r=r.next)!==n;)(s=wh(r))<a&&(e=r,a=s);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=ph(e),o=0;o<i;++o)(e=t[o]).x-=r.x,e.y-=r.y;return r.r}var Ch=function(t){return xh(t),t};function Dh(t){return null==t?null:Ih(t)}function Ih(t){if("function"!=typeof t)throw new Error;return t}function Rh(){return 0}var Oh=function(t){return function(){return t}};function Ph(t){return Math.sqrt(t.value)}var Mh=function(){var t=null,e=1,n=1,r=Rh;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Lh(t)).eachAfter(Nh(r,.5)).eachBefore(kh(1)):i.eachBefore(Lh(Ph)).eachAfter(Nh(Rh,1)).eachAfter(Nh(r,i.r/Math.min(e,n))).eachBefore(kh(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Dh(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Oh(+t),i):r},i};function Lh(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Nh(t,e){return function(n){if(r=n.children){var r,i,a,s=r.length,o=t(n)*e||0;if(o)for(i=0;i<s;++i)r[i].r+=o;if(a=xh(r),o)for(i=0;i<s;++i)r[i].r-=o;n.r=a+o}}}function kh(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Fh=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Bh=function(t,e,n,r,i){for(var a,s=t.children,o=-1,u=s.length,l=t.value&&(r-e)/t.value;++o<u;)(a=s[o]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l},jh=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&Bh(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,s=r.x1-n,o=r.y1-n;s<i&&(i=s=(i+s)/2),o<a&&(a=o=(a+o)/2),r.x0=i,r.y0=a,r.x1=s,r.y1=o}}(e,a)),r&&i.eachBefore(Fh),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},Uh={depth:-1},Vh={};function Gh(t){return t.id}function Hh(t){return t.parentId}var Yh=function(){var t=Gh,e=Hh;function n(n){var r,i,a,s,o,u,l,c=n.length,d=new Array(c),f={};for(i=0;i<c;++i)o=d[i]=new fh(r=n[i]),null!=(u=t(r,i,n))&&(u+="")&&(f[l="$"+(o.id=u)]=l in f?Vh:o);for(i=0;i<c;++i)if(o=d[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(s=f["$"+u]))throw new Error("missing: "+u);if(s===Vh)throw new Error("ambiguous: "+u);s.children?s.children.push(o):s.children=[o],o.parent=s}else{if(a)throw new Error("multiple roots");a=o}if(!a)throw new Error("no root");if(a.parent=Uh,a.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(dh),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=Ih(e),n):t},n.parentId=function(t){return arguments.length?(e=Ih(t),n):e},n};function zh(t,e){return t.parent===e.parent?1:2}function qh(t){var e=t.children;return e?e[0]:t.t}function Xh(t){var e=t.children;return e?e[e.length-1]:t.t}function Kh(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Wh(t,e,n){return t.a.parent===e.parent?t.a:n}function $h(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}$h.prototype=Object.create(fh.prototype);var Qh=function(){var t=zh,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,s=new $h(t,0),o=[s];e=o.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)o.push(n=e.children[i]=new $h(r[i],i)),n.parent=e;return(s.parent=new $h(null,0)).children=[s],s}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(s),r)i.eachBefore(o);else{var l=i,c=i,d=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>d.depth&&(d=t)}));var f=l===c?1:t(l,c)/2,h=f-l.x,p=e/(c.x+f+h),g=n/(d.depth||1);i.eachBefore((function(t){t.x=(t.x+h)*p,t.y=t.depth*g}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,s=e,o=n,u=a.parent.children[0],l=a.m,c=s.m,d=o.m,f=u.m;o=Xh(o),a=qh(a),o&&a;)u=qh(u),(s=Xh(s)).a=e,(i=o.z+d-a.z-l+t(o._,a._))>0&&(Kh(Wh(o,e,r),e,i),l+=i,c+=i),d+=o.m,l+=a.m,f+=u.m,c+=s.m;o&&!Xh(s)&&(s.t=o,s.m+=d-c),a&&!qh(u)&&(u.t=a,u.m+=l-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},Zh=function(t,e,n,r,i){for(var a,s=t.children,o=-1,u=s.length,l=t.value&&(i-n)/t.value;++o<u;)(a=s[o]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l},Jh=(1+Math.sqrt(5))/2;function tp(t,e,n,r,i,a){for(var s,o,u,l,c,d,f,h,p,g,m,y=[],v=e.children,_=0,b=0,E=v.length,T=e.value;_<E;){u=i-n,l=a-r;do{c=v[b++].value}while(!c&&b<E);for(d=f=c,m=c*c*(g=Math.max(l/u,u/l)/(T*t)),p=Math.max(f/m,m/d);b<E;++b){if(c+=o=v[b].value,o<d&&(d=o),o>f&&(f=o),m=c*c*g,(h=Math.max(f/m,m/d))>p){c-=o;break}p=h}y.push(s={value:c,dice:u<l,children:v.slice(_,b)}),s.dice?Bh(s,n,r,i,T?r+=l*c/T:a):Zh(s,n,r,T?n+=u*c/T:i,a),T-=c,_=b}return y}var ep=function t(e){function n(t,n,r,i,a){tp(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jh),np=function(){var t=ep,e=!1,n=1,r=1,i=[0],a=Rh,s=Rh,o=Rh,u=Rh,l=Rh;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(d),i=[0],e&&t.eachBefore(Fh),t}function d(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,d=e.x1-n,f=e.y1-n;d<r&&(r=d=(r+d)/2),f<c&&(c=f=(c+f)/2),e.x0=r,e.y0=c,e.x1=d,e.y1=f,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=s(e)-n,(d-=o(e)-n)<r&&(r=d=(r+d)/2),(f-=u(e)-n)<c&&(c=f=(c+f)/2),t(e,r,c,d,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Ih(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Oh(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:Oh(+t),c):s},c.paddingRight=function(t){return arguments.length?(o="function"==typeof t?t:Oh(+t),c):o},c.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Oh(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Oh(+t),c):l},c},rp=function(t,e,n,r,i){var a,s,o=t.children,u=o.length,l=new Array(u+1);for(l[0]=s=a=0;a<u;++a)l[a+1]=s+=o[a].value;!function t(e,n,r,i,a,s,u){if(e>=n-1){var c=o[e];return c.x0=i,c.y0=a,c.x1=s,void(c.y1=u)}for(var d=l[e],f=r/2+d,h=e+1,p=n-1;h<p;){var g=h+p>>>1;l[g]<f?h=g+1:p=g}f-l[h-1]<l[h]-f&&e+1<h&&--h;var m=l[h]-d,y=r-m;if(s-i>u-a){var v=(i*y+s*m)/r;t(e,h,m,i,a,v,u),t(h,n,y,v,a,s,u)}else{var _=(a*y+u*m)/r;t(e,h,m,i,a,s,_),t(h,n,y,i,_,s,u)}}(0,u,t.value,e,n,r,i)},ip=function(t,e,n,r,i){(1&t.depth?Zh:Bh)(t,e,n,r,i)},ap=function t(e){function n(t,n,r,i,a){if((s=t._squarify)&&s.ratio===e)for(var s,o,u,l,c,d=-1,f=s.length,h=t.value;++d<f;){for(u=(o=s[d]).children,l=o.value=0,c=u.length;l<c;++l)o.value+=u[l].value;o.dice?Bh(o,n,r,i,r+=(a-r)*o.value/h):Zh(o,n,r,n+=(i-n)*o.value/h,a),h-=o.value}else t._squarify=s=tp(e,t,n,r,i,a),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jh),sp=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},op=function(t,e){var n=cn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},up=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},lp=Math.SQRT2;function cp(t){return((t=Math.exp(t))+1/t)/2}var dp=function(t,e){var n,r,i=t[0],a=t[1],s=t[2],o=e[2],u=e[0]-i,l=e[1]-a,c=u*u+l*l;if(c<1e-12)r=Math.log(o/s)/lp,n=function(t){return[i+t*u,a+t*l,s*Math.exp(lp*t*r)]};else{var d=Math.sqrt(c),f=(o*o-s*s+4*c)/(2*s*2*d),h=(o*o-s*s-4*c)/(2*o*2*d),p=Math.log(Math.sqrt(f*f+1)-f),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/lp,n=function(t){var e,n=t*r,o=cp(p),c=s/(2*d)*(o*(e=lp*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+c*u,a+c*l,s*o/cp(lp*n+p)]}}return n.duration=1e3*r,n};function fp(t){return function(e,n){var r=t((e=en(e)).h,(n=en(n)).h),i=dn(e.s,n.s),a=dn(e.l,n.l),s=dn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=s(t),e+""}}}var hp=fp(cn),pp=fp(dn);function gp(t,e){var n=dn((t=pa(t)).l,(e=pa(e)).l),r=dn(t.a,e.a),i=dn(t.b,e.b),a=dn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function mp(t){return function(e,n){var r=t((e=Ta(e)).h,(n=Ta(n)).h),i=dn(e.c,n.c),a=dn(e.l,n.l),s=dn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=s(t),e+""}}}var yp=mp(cn),vp=mp(dn);function _p(t){return function e(n){function r(e,r){var i=t((e=Ra(e)).h,(r=Ra(r)).h),a=dn(e.s,r.s),s=dn(e.l,r.l),o=dn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=s(Math.pow(t,n)),e.opacity=o(t),e+""}}return n=+n,r.gamma=e,r}(1)}var bp=_p(cn),Ep=_p(dn);function Tp(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var Sp=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},wp=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)a+=(e=i)[1]*(i=t[n])[0]-e[0]*i[1];return a/2},Ap=function(t){for(var e,n,r=-1,i=t.length,a=0,s=0,o=t[i-1],u=0;++r<i;)u+=n=(e=o)[0]*(o=t[r])[1]-o[0]*e[1],a+=(e[0]+o[0])*n,s+=(e[1]+o[1])*n;return[a/(u*=3),s/u]},xp=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function Cp(t,e){return t[0]-e[0]||t[1]-e[1]}function Dp(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&xp(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var Ip=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Cp),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=Dp(r),s=Dp(i),o=s[0]===a[0],u=s[s.length-1]===a[a.length-1],l=[];for(e=a.length-1;e>=0;--e)l.push(t[r[a[e]][2]]);for(e=+o;e<s.length-u;++e)l.push(t[r[s[e]][2]]);return l},Rp=function(t,e){for(var n,r,i=t.length,a=t[i-1],s=e[0],o=e[1],u=a[0],l=a[1],c=!1,d=0;d<i;++d)n=(a=t[d])[0],(r=a[1])>o!=l>o&&s<(u-n)*(o-r)/(l-r)+n&&(c=!c),u=n,l=r;return c},Op=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],s=a[0],o=a[1],u=0;++r<i;)e=s,n=o,e-=s=(a=t[r])[0],n-=o=a[1],u+=Math.sqrt(e*e+n*n);return u},Pp=function(){return Math.random()},Mp=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Pp),Lp=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Pp),Np=function t(e){function n(){var t=Lp.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Pp),kp=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Pp),Fp=function t(e){function n(t){var n=kp.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Pp),Bp=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Pp);function jp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Up(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Vp=Array.prototype,Gp=Vp.map,Hp=Vp.slice,Yp={name:"implicit"};function zp(){var t=Qi(),e=[],n=[],r=Yp;function i(i){var a=i+"",s=t.get(a);if(!s){if(r!==Yp)return r;t.set(a,s=e.push(i))}return n[(s-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Qi();for(var r,a,s=-1,o=n.length;++s<o;)t.has(a=(r=n[s])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=Hp.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return zp(e,n).unknown(r)},jp.apply(i,arguments),i}function qp(){var t,e,n=zp().unknown(void 0),r=n.domain,i=n.range,a=[0,1],s=!1,o=0,u=0,l=.5;function c(){var n=r().length,c=a[1]<a[0],d=a[c-0],f=a[1-c];t=(f-d)/Math.max(1,n-o+2*u),s&&(t=Math.floor(t)),d+=(f-d-t*(n-o))*l,e=t*(1-o),s&&(d=Math.round(d),e=Math.round(e));var h=S(n).map((function(e){return d+t*e}));return i(c?h.reverse():h)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],s=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,c()):s},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.copy=function(){return qp(r(),a).round(s).paddingInner(o).paddingOuter(u).align(l)},jp.apply(c(),arguments)}function Xp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Xp(e())},t}function Kp(){return Xp(qp.apply(null,arguments).paddingInner(1))}var Wp=function(t){return+t},$p=[0,1];function Qp(t){return t}function Zp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Jp(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function tg(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Zp(i,r),a=n(s,a)):(r=Zp(r,i),a=n(a,s)),function(t){return a(r(t))}}function eg(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Zp(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=l(t,e,1,r)-1;return a[n](i[n](e))}}function ng(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rg(){var t,e,n,r,i,a,s=$p,o=$p,u=Dn,l=Qp;function c(){return r=Math.min(s.length,o.length)>2?eg:tg,i=a=null,d}function d(e){return isNaN(e=+e)?n:(i||(i=r(s.map(t),o,u)))(t(l(e)))}return d.invert=function(n){return l(e((a||(a=r(o,s.map(t),Sn)))(n)))},d.domain=function(t){return arguments.length?(s=Gp.call(t,Wp),l===Qp||(l=Jp(s)),c()):s.slice()},d.range=function(t){return arguments.length?(o=Hp.call(t),c()):o.slice()},d.rangeRound=function(t){return o=Hp.call(t),u=up,c()},d.clamp=function(t){return arguments.length?(l=t?Jp(s):Qp,d):l!==Qp},d.interpolate=function(t){return arguments.length?(u=t,c()):u},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,r){return t=n,e=r,c()}}function ig(t,e){return rg()(t,e)}var ag=function(t,e,n,r){var i,a=I(t,e,n);switch((r=zo(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=au(a,s))||(r.precision=i),$o(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=su(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=iu(a))||(r.precision=i-2*("%"===r.type))}return Wo(r)};function sg(t){var e=t.domain;return t.ticks=function(t){var n=e();return C(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ag(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,s=i.length-1,o=i[a],u=i[s];return u<o&&(r=o,o=u,u=r,r=a,a=s,s=r),(r=D(o,u,n))>0?r=D(o=Math.floor(o/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=D(o=Math.ceil(o*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(o/r)*r,i[s]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(o*r)/r,i[s]=Math.floor(u*r)/r,e(i)),t},t}function og(){var t=ig(Qp,Qp);return t.copy=function(){return ng(t,og())},jp.apply(t,arguments),sg(t)}function ug(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Gp.call(e,Wp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ug(t).unknown(e)},t=arguments.length?Gp.call(t,Wp):[0,1],sg(n)}var lg=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],s=t[i];return s<a&&(n=r,r=i,i=n,n=a,a=s,s=n),t[r]=e.floor(a),t[i]=e.ceil(s),t};function cg(t){return Math.log(t)}function dg(t){return Math.exp(t)}function fg(t){return-Math.log(-t)}function hg(t){return-Math.exp(-t)}function pg(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gg(t){return function(e){return-t(-e)}}function mg(t){var e,n,r=t(cg,dg),i=r.domain,a=10;function s(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?pg:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=gg(e),n=gg(n),t(fg,hg)):t(cg,dg),r}return r.base=function(t){return arguments.length?(a=+t,s()):a},r.domain=function(t){return arguments.length?(i(t),s()):i()},r.ticks=function(t){var r,s=i(),o=s[0],u=s[s.length-1];(r=u<o)&&(f=o,o=u,u=f);var l,c,d,f=e(o),h=e(u),p=null==t?10:+t,g=[];if(!(a%1)&&h-f<p){if(f=Math.round(f)-1,h=Math.round(h)+1,o>0){for(;f<h;++f)for(c=1,l=n(f);c<a;++c)if(!((d=l*c)<o)){if(d>u)break;g.push(d)}}else for(;f<h;++f)for(c=a-1,l=n(f);c>=1;--c)if(!((d=l*c)<o)){if(d>u)break;g.push(d)}}else g=C(f,h,Math.min(h-f,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=Wo(i)),t===1/0)return i;null==t&&(t=10);var s=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=s?i(t):""}},r.nice=function(){return i(lg(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function yg(){var t=mg(rg()).domain([1,10]);return t.copy=function(){return ng(t,yg()).base(t.base())},jp.apply(t,arguments),t}function vg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _g(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bg(t){var e=1,n=t(vg(e),_g(e));return n.constant=function(n){return arguments.length?t(vg(e=+n),_g(e)):e},sg(n)}function Eg(){var t=bg(rg());return t.copy=function(){return ng(t,Eg()).constant(t.constant())},jp.apply(t,arguments)}function Tg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wg(t){return t<0?-t*t:t*t}function Ag(t){var e=t(Qp,Qp),n=1;function r(){return 1===n?t(Qp,Qp):.5===n?t(Sg,wg):t(Tg(n),Tg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},sg(e)}function xg(){var t=Ag(rg());return t.copy=function(){return ng(t,xg()).exponent(t.exponent())},jp.apply(t,arguments),t}function Cg(){return xg.apply(null,arguments).exponent(.5)}function Dg(){var t,e=[],n=[],r=[];function a(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=P(e,t/i);return s}function s(e){return isNaN(e=+e)?t:n[l(r,e)]}return s.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,s=t.length;r<s;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),a()},s.range=function(t){return arguments.length?(n=Hp.call(t),a()):n.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return r.slice()},s.copy=function(){return Dg().domain(e).range(n).unknown(t)},jp.apply(s,arguments)}function Ig(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function s(e){return e<=e?a[l(i,e,0,r)]:t}function o(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],o()):[e,n]},s.range=function(t){return arguments.length?(r=(a=Hp.call(t)).length-1,o()):a.slice()},s.invertExtent=function(t){var s=a.indexOf(t);return s<0?[NaN,NaN]:s<1?[e,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return Ig().domain([e,n]).range(a).unknown(t)},jp.apply(sg(s),arguments)}function Rg(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[l(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Hp.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Hp.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Rg().domain(e).range(n).unknown(t)},jp.apply(i,arguments)}var Og=new Date,Pg=new Date;function Mg(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var s,o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do{o.push(s=new Date(+n)),e(n,a),t(n)}while(s<n&&n<r);return o},i.filter=function(n){return Mg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Og.setTime(+e),Pg.setTime(+r),t(Og),t(Pg),Math.floor(n(Og,Pg))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Lg=Mg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Lg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Ng=Lg,kg=Lg.range,Fg=Mg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Bg=Fg,jg=Fg.range;function Ug(t){return Mg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Vg=Ug(0),Gg=Ug(1),Hg=Ug(2),Yg=Ug(3),zg=Ug(4),qg=Ug(5),Xg=Ug(6),Kg=Vg.range,Wg=Gg.range,$g=Hg.range,Qg=Yg.range,Zg=zg.range,Jg=qg.range,tm=Xg.range,em=Mg((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),nm=em,rm=em.range,im=Mg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),am=im,sm=im.range,om=Mg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),um=om,lm=om.range,cm=Mg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),dm=cm,fm=cm.range,hm=Mg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));hm.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Mg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):hm:null};var pm=hm,gm=hm.range;function mm(t){return Mg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var ym=mm(0),vm=mm(1),_m=mm(2),bm=mm(3),Em=mm(4),Tm=mm(5),Sm=mm(6),wm=ym.range,Am=vm.range,xm=_m.range,Cm=bm.range,Dm=Em.range,Im=Tm.range,Rm=Sm.range,Om=Mg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Pm=Om,Mm=Om.range,Lm=Mg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Lm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Nm=Lm,km=Lm.range;function Fm(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bm(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Um(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,u=t.shortMonths,l=Zm(i),c=Jm(i),d=Zm(a),f=Jm(a),h=Zm(s),p=Jm(s),g=Zm(o),m=Jm(o),y=Zm(u),v=Jm(u),_={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:by,e:by,f:Ay,g:ky,G:By,H:Ey,I:Ty,j:Sy,L:wy,m:xy,M:Cy,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ov,s:uv,S:Dy,u:Iy,U:Ry,V:Py,w:My,W:Ly,x:null,X:null,y:Ny,Y:Fy,Z:jy,"%":sv},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Uy,e:Uy,f:zy,g:nv,G:iv,H:Vy,I:Gy,j:Hy,L:Yy,m:qy,M:Xy,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ov,s:uv,S:Ky,u:Wy,U:$y,V:Zy,w:Jy,W:tv,x:null,X:null,y:ev,Y:rv,Z:av,"%":sv},E={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return w(t,e,n,r)},d:cy,e:cy,f:my,g:sy,G:ay,H:fy,I:fy,j:dy,L:gy,m:ly,M:hy,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:uy,Q:vy,s:_y,S:py,u:ey,U:ny,V:ry,w:ty,W:iy,x:function(t,e,r){return w(t,n,e,r)},X:function(t,e,n){return w(t,r,e,n)},y:sy,Y:ay,Z:oy,"%":yy};function T(t,e){return function(n){var r,i,a,s=[],o=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++o<l;)37===t.charCodeAt(o)&&(s.push(t.slice(u,o)),null!=(i=qm[r=t.charAt(++o)])?r=t.charAt(++o):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),s.push(r),u=o+1);return s.push(t.slice(u,o)),s.join("")}}function S(t,e){return function(n){var r,i,a=jm(1900,void 0,1);if(w(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Bm(jm(a.y,0,1))).getUTCDay(),r=i>4||0===i?vm.ceil(r):vm(r),r=Pm.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Fm(jm(a.y,0,1))).getDay(),r=i>4||0===i?Gg.ceil(r):Gg(r),r=nm.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Bm(jm(a.y,0,1)).getUTCDay():Fm(jm(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Bm(a)):Fm(a)}}function w(t,e,n,r){for(var i,a,s=0,o=e.length,u=n.length;s<o;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(a=E[i in qm?e.charAt(s++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=T(n,_),_.X=T(r,_),_.c=T(e,_),b.x=T(n,b),b.X=T(r,b),b.c=T(e,b),{format:function(t){var e=T(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=T(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}var Vm,Gm,Hm,Ym,zm,qm={"-":"",_:" ",0:"0"},Xm=/^\s*\d+/,Km=/^%/,Wm=/[\\^$*+?|[\]().{}]/g;function $m(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Qm(t){return t.replace(Wm,"\\$&")}function Zm(t){return new RegExp("^(?:"+t.map(Qm).join("|")+")","i")}function Jm(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ty(t,e,n){var r=Xm.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ey(t,e,n){var r=Xm.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ny(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ry(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function iy(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ay(t,e,n){var r=Xm.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function sy(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function oy(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uy(t,e,n){var r=Xm.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ly(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function cy(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dy(t,e,n){var r=Xm.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fy(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hy(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function py(t,e,n){var r=Xm.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gy(t,e,n){var r=Xm.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function my(t,e,n){var r=Xm.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yy(t,e,n){var r=Km.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function vy(t,e,n){var r=Xm.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _y(t,e,n){var r=Xm.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function by(t,e){return $m(t.getDate(),e,2)}function Ey(t,e){return $m(t.getHours(),e,2)}function Ty(t,e){return $m(t.getHours()%12||12,e,2)}function Sy(t,e){return $m(1+nm.count(Ng(t),t),e,3)}function wy(t,e){return $m(t.getMilliseconds(),e,3)}function Ay(t,e){return wy(t,e)+"000"}function xy(t,e){return $m(t.getMonth()+1,e,2)}function Cy(t,e){return $m(t.getMinutes(),e,2)}function Dy(t,e){return $m(t.getSeconds(),e,2)}function Iy(t){var e=t.getDay();return 0===e?7:e}function Ry(t,e){return $m(Vg.count(Ng(t)-1,t),e,2)}function Oy(t){var e=t.getDay();return e>=4||0===e?zg(t):zg.ceil(t)}function Py(t,e){return t=Oy(t),$m(zg.count(Ng(t),t)+(4===Ng(t).getDay()),e,2)}function My(t){return t.getDay()}function Ly(t,e){return $m(Gg.count(Ng(t)-1,t),e,2)}function Ny(t,e){return $m(t.getFullYear()%100,e,2)}function ky(t,e){return $m((t=Oy(t)).getFullYear()%100,e,2)}function Fy(t,e){return $m(t.getFullYear()%1e4,e,4)}function By(t,e){var n=t.getDay();return $m((t=n>=4||0===n?zg(t):zg.ceil(t)).getFullYear()%1e4,e,4)}function jy(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$m(e/60|0,"0",2)+$m(e%60,"0",2)}function Uy(t,e){return $m(t.getUTCDate(),e,2)}function Vy(t,e){return $m(t.getUTCHours(),e,2)}function Gy(t,e){return $m(t.getUTCHours()%12||12,e,2)}function Hy(t,e){return $m(1+Pm.count(Nm(t),t),e,3)}function Yy(t,e){return $m(t.getUTCMilliseconds(),e,3)}function zy(t,e){return Yy(t,e)+"000"}function qy(t,e){return $m(t.getUTCMonth()+1,e,2)}function Xy(t,e){return $m(t.getUTCMinutes(),e,2)}function Ky(t,e){return $m(t.getUTCSeconds(),e,2)}function Wy(t){var e=t.getUTCDay();return 0===e?7:e}function $y(t,e){return $m(ym.count(Nm(t)-1,t),e,2)}function Qy(t){var e=t.getUTCDay();return e>=4||0===e?Em(t):Em.ceil(t)}function Zy(t,e){return t=Qy(t),$m(Em.count(Nm(t),t)+(4===Nm(t).getUTCDay()),e,2)}function Jy(t){return t.getUTCDay()}function tv(t,e){return $m(vm.count(Nm(t)-1,t),e,2)}function ev(t,e){return $m(t.getUTCFullYear()%100,e,2)}function nv(t,e){return $m((t=Qy(t)).getUTCFullYear()%100,e,2)}function rv(t,e){return $m(t.getUTCFullYear()%1e4,e,4)}function iv(t,e){var n=t.getUTCDay();return $m((t=n>=4||0===n?Em(t):Em.ceil(t)).getUTCFullYear()%1e4,e,4)}function av(){return"+0000"}function sv(){return"%"}function ov(t){return+t}function uv(t){return Math.floor(+t/1e3)}function lv(t){return Vm=Um(t),Gm=Vm.format,Hm=Vm.parse,Ym=Vm.utcFormat,zm=Vm.utcParse,Vm}function cv(t){return new Date(t)}function dv(t){return t instanceof Date?+t:+new Date(+t)}function fv(t,e,n,r,i,s,o,u,l){var c=ig(Qp,Qp),d=c.invert,f=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y"),E=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[s,1,6e4],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function T(a){return(o(a)<a?h:s(a)<a?p:i(a)<a?g:r(a)<a?m:e(a)<a?n(a)<a?y:v:t(a)<a?_:b)(a)}function S(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var s=Math.abs(r-n)/e,o=a((function(t){return t[2]})).right(E,s);o===E.length?(i=I(n/31536e6,r/31536e6,e),e=t):o?(i=(o=E[s/E[o-1][2]<E[o][2]/s?o-1:o])[1],e=o[0]):(i=Math.max(I(n,r,e),1),e=u)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(d(t))},c.domain=function(t){return arguments.length?f(Gp.call(t,dv)):f().map(cv)},c.ticks=function(t,e){var n,r=f(),i=r[0],a=r[r.length-1],s=a<i;return s&&(n=i,i=a,a=n),n=(n=S(t,i,a,e))?n.range(i,a+1):[],s?n.reverse():n},c.tickFormat=function(t,e){return null==e?T:l(e)},c.nice=function(t,e){var n=f();return(t=S(t,n[0],n[n.length-1],e))?f(lg(n,t)):c},c.copy=function(){return ng(c,fv(t,e,n,r,i,s,o,u,l))},c}lv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var hv=function(){return jp.apply(fv(Ng,Bg,Vg,nm,am,um,dm,pm,Gm).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},pv=Mg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),gv=pv,mv=pv.range,yv=Mg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),vv=yv,_v=yv.range,bv=Mg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),Ev=bv,Tv=bv.range,Sv=function(){return jp.apply(fv(Nm,gv,ym,Pm,vv,Ev,dm,pm,Ym).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function wv(){var t,e,n,r,i,a=0,s=1,o=Qp,u=!1;function l(e){return isNaN(e=+e)?i:o(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return l.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(s=+i[1]),n=t===e?0:1/(e-t),l):[a,s]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(o=t,l):o},l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(a),e=i(s),n=t===e?0:1/(e-t),l}}function Av(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xv(){var t=sg(wv()(Qp));return t.copy=function(){return Av(t,xv())},Up.apply(t,arguments)}function Cv(){var t=mg(wv()).domain([1,10]);return t.copy=function(){return Av(t,Cv()).base(t.base())},Up.apply(t,arguments)}function Dv(){var t=bg(wv());return t.copy=function(){return Av(t,Dv()).constant(t.constant())},Up.apply(t,arguments)}function Iv(){var t=Ag(wv());return t.copy=function(){return Av(t,Iv()).exponent(t.exponent())},Up.apply(t,arguments)}function Rv(){return Iv.apply(null,arguments).exponent(.5)}function Ov(){var t=[],e=Qp;function n(n){if(!isNaN(n=+n))return e((l(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,a=0,s=e.length;a<s;++a)null==(r=e[a])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ov(e).domain(t)},Up.apply(n,arguments)}function Pv(){var t,e,n,r,i,a,s,o=0,u=.5,l=1,c=Qp,d=!1;function f(t){return isNaN(t=+t)?s:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(d?Math.max(0,Math.min(1,t)):t))}return f.domain=function(s){return arguments.length?(t=a(o=+s[0]),e=a(u=+s[1]),n=a(l=+s[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f):[o,u,l]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(c=t,f):c},f.unknown=function(t){return arguments.length?(s=t,f):s},function(s){return a=s,t=s(o),e=s(u),n=s(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f}}function Mv(){var t=sg(Pv()(Qp));return t.copy=function(){return Av(t,Mv())},Up.apply(t,arguments)}function Lv(){var t=mg(Pv()).domain([.1,1,10]);return t.copy=function(){return Av(t,Lv()).base(t.base())},Up.apply(t,arguments)}function Nv(){var t=bg(Pv());return t.copy=function(){return Av(t,Nv()).constant(t.constant())},Up.apply(t,arguments)}function kv(){var t=Ag(Pv());return t.copy=function(){return Av(t,kv()).exponent(t.exponent())},Up.apply(t,arguments)}function Fv(){return kv.apply(null,arguments).exponent(.5)}var Bv=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},jv=Bv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uv=Bv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vv=Bv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gv=Bv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Hv=Bv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Yv=Bv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zv=Bv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qv=Bv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Xv=Bv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Kv=Bv("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Wv=function(t){return pn(t[t.length-1])},$v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Bv),Qv=Wv($v),Zv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Bv),Jv=Wv(Zv),t_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Bv),e_=Wv(t_),n_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Bv),r_=Wv(n_),i_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Bv),a_=Wv(i_),s_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Bv),o_=Wv(s_),u_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Bv),l_=Wv(u_),c_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Bv),d_=Wv(c_),f_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Bv),h_=Wv(f_),p_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Bv),g_=Wv(p_),m_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Bv),y_=Wv(m_),v_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Bv),__=Wv(v_),b_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Bv),E_=Wv(b_),T_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Bv),S_=Wv(T_),w_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Bv),A_=Wv(w_),x_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Bv),C_=Wv(x_),D_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Bv),I_=Wv(D_),R_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Bv),O_=Wv(R_),P_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Bv),M_=Wv(P_),L_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Bv),N_=Wv(L_),k_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Bv),F_=Wv(k_),B_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Bv),j_=Wv(B_),U_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Bv),V_=Wv(U_),G_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Bv),H_=Wv(G_),Y_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Bv),z_=Wv(Y_),q_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Bv),X_=Wv(q_),K_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Bv),W_=Wv(K_),$_=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},Q_=Ep(Ra(300,.5,0),Ra(-240,.5,1)),Z_=Ep(Ra(-100,.75,.35),Ra(80,1.5,.8)),J_=Ep(Ra(260,.75,.35),Ra(80,1.5,.8)),tb=Ra(),eb=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return tb.h=360*t-100,tb.s=1.5-1.5*e,tb.l=.8-.9*e,tb+""},nb=Ke(),rb=Math.PI/3,ib=2*Math.PI/3,ab=function(t){var e;return t=(.5-t)*Math.PI,nb.r=255*(e=Math.sin(t))*e,nb.g=255*(e=Math.sin(t+rb))*e,nb.b=255*(e=Math.sin(t+ib))*e,nb+""},sb=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function ob(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var ub=ob(Bv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),lb=ob(Bv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cb=ob(Bv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),db=ob(Bv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),fb=function(t){return Se(re(t).call(document.documentElement))},hb=0;function pb(){return new gb}function gb(){this._="@"+(++hb).toString(36)}gb.prototype=pb.prototype={constructor:gb,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var mb=function(t){return"string"==typeof t?new be([document.querySelectorAll(t)],[document.documentElement]):new be([null==t?[]:t],_e)},yb=function(t,e){null==e&&(e=In().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Rn(t,e[n]);return i},vb=function(t){return function(){return t}},_b=Math.abs,bb=Math.atan2,Eb=Math.cos,Tb=Math.max,Sb=Math.min,wb=Math.sin,Ab=Math.sqrt,xb=Math.PI,Cb=xb/2,Db=2*xb;function Ib(t){return t>1?0:t<-1?xb:Math.acos(t)}function Rb(t){return t>=1?Cb:t<=-1?-Cb:Math.asin(t)}function Ob(t){return t.innerRadius}function Pb(t){return t.outerRadius}function Mb(t){return t.startAngle}function Lb(t){return t.endAngle}function Nb(t){return t&&t.padAngle}function kb(t,e,n,r,i,a,s,o){var u=n-t,l=r-e,c=s-i,d=o-a,f=d*u-c*l;if(!(f*f<1e-12))return[t+(f=(c*(e-a)-d*(t-i))/f)*u,e+f*l]}function Fb(t,e,n,r,i,a,s){var o=t-n,u=e-r,l=(s?a:-a)/Ab(o*o+u*u),c=l*u,d=-l*o,f=t+c,h=e+d,p=n+c,g=r+d,m=(f+p)/2,y=(h+g)/2,v=p-f,_=g-h,b=v*v+_*_,E=i-a,T=f*g-p*h,S=(_<0?-1:1)*Ab(Tb(0,E*E*b-T*T)),w=(T*_-v*S)/b,A=(-T*v-_*S)/b,x=(T*_+v*S)/b,C=(-T*v+_*S)/b,D=w-m,I=A-y,R=x-m,O=C-y;return D*D+I*I>R*R+O*O&&(w=x,A=C),{cx:w,cy:A,x01:-c,y01:-d,x11:w*(i/E-1),y11:A*(i/E-1)}}var Bb=function(){var t=Ob,e=Pb,n=vb(0),r=null,i=Mb,a=Lb,s=Nb,o=null;function u(){var u,l,c=+t.apply(this,arguments),d=+e.apply(this,arguments),f=i.apply(this,arguments)-Cb,h=a.apply(this,arguments)-Cb,p=_b(h-f),g=h>f;if(o||(o=u=Gi()),d<c&&(l=d,d=c,c=l),d>1e-12)if(p>Db-1e-12)o.moveTo(d*Eb(f),d*wb(f)),o.arc(0,0,d,f,h,!g),c>1e-12&&(o.moveTo(c*Eb(h),c*wb(h)),o.arc(0,0,c,h,f,g));else{var m,y,v=f,_=h,b=f,E=h,T=p,S=p,w=s.apply(this,arguments)/2,A=w>1e-12&&(r?+r.apply(this,arguments):Ab(c*c+d*d)),x=Sb(_b(d-c)/2,+n.apply(this,arguments)),C=x,D=x;if(A>1e-12){var I=Rb(A/c*wb(w)),R=Rb(A/d*wb(w));(T-=2*I)>1e-12?(b+=I*=g?1:-1,E-=I):(T=0,b=E=(f+h)/2),(S-=2*R)>1e-12?(v+=R*=g?1:-1,_-=R):(S=0,v=_=(f+h)/2)}var O=d*Eb(v),P=d*wb(v),M=c*Eb(E),L=c*wb(E);if(x>1e-12){var N,k=d*Eb(_),F=d*wb(_),B=c*Eb(b),j=c*wb(b);if(p<xb&&(N=kb(O,P,B,j,k,F,M,L))){var U=O-N[0],V=P-N[1],G=k-N[0],H=F-N[1],Y=1/wb(Ib((U*G+V*H)/(Ab(U*U+V*V)*Ab(G*G+H*H)))/2),z=Ab(N[0]*N[0]+N[1]*N[1]);C=Sb(x,(c-z)/(Y-1)),D=Sb(x,(d-z)/(Y+1))}}S>1e-12?D>1e-12?(m=Fb(B,j,O,P,d,D,g),y=Fb(k,F,M,L,d,D,g),o.moveTo(m.cx+m.x01,m.cy+m.y01),D<x?o.arc(m.cx,m.cy,D,bb(m.y01,m.x01),bb(y.y01,y.x01),!g):(o.arc(m.cx,m.cy,D,bb(m.y01,m.x01),bb(m.y11,m.x11),!g),o.arc(0,0,d,bb(m.cy+m.y11,m.cx+m.x11),bb(y.cy+y.y11,y.cx+y.x11),!g),o.arc(y.cx,y.cy,D,bb(y.y11,y.x11),bb(y.y01,y.x01),!g))):(o.moveTo(O,P),o.arc(0,0,d,v,_,!g)):o.moveTo(O,P),c>1e-12&&T>1e-12?C>1e-12?(m=Fb(M,L,k,F,c,-C,g),y=Fb(O,P,B,j,c,-C,g),o.lineTo(m.cx+m.x01,m.cy+m.y01),C<x?o.arc(m.cx,m.cy,C,bb(m.y01,m.x01),bb(y.y01,y.x01),!g):(o.arc(m.cx,m.cy,C,bb(m.y01,m.x01),bb(m.y11,m.x11),!g),o.arc(0,0,c,bb(m.cy+m.y11,m.cx+m.x11),bb(y.cy+y.y11,y.cx+y.x11),g),o.arc(y.cx,y.cy,C,bb(y.y11,y.x11),bb(y.y01,y.x01),!g))):o.arc(0,0,c,E,b,g):o.lineTo(M,L)}else o.moveTo(0,0);if(o.closePath(),u)return o=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-xb/2;return[Eb(r)*n,wb(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:vb(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:vb(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:vb(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:vb(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:vb(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:vb(+t),u):a},u.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:vb(+t),u):s},u.context=function(t){return arguments.length?(o=null==t?null:t,u):o},u};function jb(t){this._context=t}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ub=function(t){return new jb(t)};function Vb(t){return t[0]}function Gb(t){return t[1]}var Hb=function(){var t=Vb,e=Gb,n=vb(!0),r=null,i=Ub,a=null;function s(s){var o,u,l,c=s.length,d=!1;for(null==r&&(a=i(l=Gi())),o=0;o<=c;++o)!(o<c&&n(u=s[o],o,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(u,o,s),+e(u,o,s));if(l)return a=null,l+""||null}return s.x=function(e){return arguments.length?(t="function"==typeof e?e:vb(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:vb(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:vb(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s},Yb=function(){var t=Vb,e=null,n=vb(0),r=Gb,i=vb(!0),a=null,s=Ub,o=null;function u(u){var l,c,d,f,h,p=u.length,g=!1,m=new Array(p),y=new Array(p);for(null==a&&(o=s(h=Gi())),l=0;l<=p;++l){if(!(l<p&&i(f=u[l],l,u))===g)if(g=!g)c=l,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=l-1;d>=c;--d)o.point(m[d],y[d]);o.lineEnd(),o.areaEnd()}g&&(m[l]=+t(f,l,u),y[l]=+n(f,l,u),o.point(e?+e(f,l,u):m[l],r?+r(f,l,u):y[l]))}if(h)return o=null,h+""||null}function l(){return Hb().defined(i).curve(s).context(a)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:vb(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:vb(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:vb(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:vb(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:vb(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:vb(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:vb(!!t),u):i},u.curve=function(t){return arguments.length?(s=t,null!=a&&(o=s(a)),u):s},u.context=function(t){return arguments.length?(null==t?a=o=null:o=s(a=t),u):a},u},zb=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},qb=function(t){return t},Xb=function(){var t=qb,e=zb,n=null,r=vb(0),i=vb(Db),a=vb(0);function s(s){var o,u,l,c,d,f=s.length,h=0,p=new Array(f),g=new Array(f),m=+r.apply(this,arguments),y=Math.min(Db,Math.max(-Db,i.apply(this,arguments)-m)),v=Math.min(Math.abs(y)/f,a.apply(this,arguments)),_=v*(y<0?-1:1);for(o=0;o<f;++o)(d=g[p[o]=o]=+t(s[o],o,s))>0&&(h+=d);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(s[t],s[e])})),o=0,l=h?(y-f*_)/h:0;o<f;++o,m=c)g[u=p[o]]={data:s[u],index:o,value:d=g[u],startAngle:m,endAngle:c=m+(d>0?d*l:0)+_,padAngle:v};return g}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:vb(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:vb(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:vb(+t),s):i},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:vb(+t),s):a},s},Kb=$b(Ub);function Wb(t){this._curve=t}function $b(t){function e(e){return new Wb(t(e))}return e._curve=t,e}function Qb(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e($b(t)):e()._curve},t}Wb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Zb=function(){return Qb(Hb().curve(Kb))},Jb=function(){var t=Yb().curve(Kb),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Qb(n())},delete t.lineX0,t.lineEndAngle=function(){return Qb(r())},delete t.lineX1,t.lineInnerRadius=function(){return Qb(i())},delete t.lineY0,t.lineOuterRadius=function(){return Qb(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e($b(t)):e()._curve},t},tE=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},eE=Array.prototype.slice;function nE(t){return t.source}function rE(t){return t.target}function iE(t){var e=nE,n=rE,r=Vb,i=Gb,a=null;function s(){var s,o=eE.call(arguments),u=e.apply(this,o),l=n.apply(this,o);if(a||(a=s=Gi()),t(a,+r.apply(this,(o[0]=u,o)),+i.apply(this,o),+r.apply(this,(o[0]=l,o)),+i.apply(this,o)),s)return a=null,s+""||null}return s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(n=t,s):n},s.x=function(t){return arguments.length?(r="function"==typeof t?t:vb(+t),s):r},s.y=function(t){return arguments.length?(i="function"==typeof t?t:vb(+t),s):i},s.context=function(t){return arguments.length?(a=null==t?null:t,s):a},s}function aE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function sE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function oE(t,e,n,r,i){var a=tE(e,n),s=tE(e,n=(n+i)/2),o=tE(r,n),u=tE(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(s[0],s[1],o[0],o[1],u[0],u[1])}function uE(){return iE(aE)}function lE(){return iE(sE)}function cE(){var t=iE(oE);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var dE={draw:function(t,e){var n=Math.sqrt(e/xb);t.moveTo(n,0),t.arc(0,0,n,0,Db)}},fE={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hE=Math.sqrt(1/3),pE=2*hE,gE={draw:function(t,e){var n=Math.sqrt(e/pE),r=n*hE;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},mE=Math.sin(xb/10)/Math.sin(7*xb/10),yE=Math.sin(Db/10)*mE,vE=-Math.cos(Db/10)*mE,_E={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=yE*n,i=vE*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var s=Db*a/5,o=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-o*n),t.lineTo(o*r-u*i,u*r+o*i)}t.closePath()}},bE={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},EE=Math.sqrt(3),TE={draw:function(t,e){var n=-Math.sqrt(e/(3*EE));t.moveTo(0,2*n),t.lineTo(-EE*n,-n),t.lineTo(EE*n,-n),t.closePath()}},SE=Math.sqrt(3)/2,wE=1/Math.sqrt(12),AE=3*(wE/2+1),xE={draw:function(t,e){var n=Math.sqrt(e/AE),r=n/2,i=n*wE,a=r,s=n*wE+n,o=-a,u=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,u),t.lineTo(-.5*r-SE*i,SE*r+-.5*i),t.lineTo(-.5*a-SE*s,SE*a+-.5*s),t.lineTo(-.5*o-SE*u,SE*o+-.5*u),t.lineTo(-.5*r+SE*i,-.5*i-SE*r),t.lineTo(-.5*a+SE*s,-.5*s-SE*a),t.lineTo(-.5*o+SE*u,-.5*u-SE*o),t.closePath()}},CE=[dE,fE,gE,bE,_E,TE,xE],DE=function(){var t=vb(dE),e=vb(64),n=null;function r(){var r;if(n||(n=r=Gi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:vb(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:vb(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},IE=function(){};function RE(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function OE(t){this._context=t}OE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:RE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var PE=function(t){return new OE(t)};function ME(t){this._context=t}ME.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var LE=function(t){return new ME(t)};function NE(t){this._context=t}NE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:RE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var kE=function(t){return new NE(t)};function FE(t,e){this._basis=new OE(t),this._beta=e}FE.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],s=t[n]-i,o=e[n]-a,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(r=u/n)*s),this._beta*e[u]+(1-this._beta)*(a+r*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var BE=function t(e){function n(t){return 1===e?new OE(t):new FE(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function jE(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function UE(t,e){this._context=t,this._k=(1-e)/6}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:jE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var VE=function t(e){function n(t){return new UE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function GE(t,e){this._context=t,this._k=(1-e)/6}GE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:jE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var HE=function t(e){function n(t){return new GE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function YE(t,e){this._context=t,this._k=(1-e)/6}YE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zE=function t(e){function n(t){return new YE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function qE(t,e,n){var r=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,s,t._x2,t._y2)}function XE(t,e){this._context=t,this._alpha=e}XE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var KE=function t(e){function n(t){return e?new XE(t,e):new UE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function WE(t,e){this._context=t,this._alpha=e}WE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $E=function t(e){function n(t){return e?new WE(t,e):new GE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function QE(t,e){this._context=t,this._alpha=e}QE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ZE=function t(e){function n(t){return e?new QE(t,e):new YE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function JE(t){this._context=t}JE.prototype={areaStart:IE,areaEnd:IE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var tT=function(t){return new JE(t)};function eT(t){return t<0?-1:1}function nT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(eT(a)+eT(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function rT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function iT(t,e,n){var r=t._x0,i=t._x1,a=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,t._y0+s*e,i-s,a-s*n,i,a)}function aT(t){this._context=t}function sT(t){this._context=new oT(t)}function oT(t){this._context=t}function uT(t){return new aT(t)}function lT(t){return new sT(t)}function cT(t){this._context=t}function dT(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)a[e]-=n=i[e]/a[e-1],s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}aT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iT(this,this._t0,rT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iT(this,rT(this,n=nT(this,t,e)),n);break;default:iT(this,this._t0,n=nT(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(sT.prototype=Object.create(aT.prototype)).point=function(t,e){aT.prototype.point.call(this,e,t)},oT.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},cT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=dT(t),i=dT(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var fT=function(t){return new cT(t)};function hT(t,e){this._context=t,this._t=e}hT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var pT=function(t){return new hT(t,.5)};function gT(t){return new hT(t,0)}function mT(t){return new hT(t,1)}var yT=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,s=t[e[0]],o=s.length;a<i;++a)for(r=s,s=t[e[a]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},vT=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function _T(t,e){return t[e]}var bT=function(){var t=vb([]),e=vT,n=yT,r=_T;function i(i){var a,s,o=t.apply(this,arguments),u=i.length,l=o.length,c=new Array(l);for(a=0;a<l;++a){for(var d,f=o[a],h=c[a]=new Array(u),p=0;p<u;++p)h[p]=d=[0,+r(i[p],f,p,i)],d.data=i[p];h.key=f}for(a=0,s=e(c);a<l;++a)c[s[a]].index=a;return n(c,s),c}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:vb(eE.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:vb(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?vT:"function"==typeof t?t:vb(eE.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?yT:t,i):n},i},ET=function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,s=t[0].length;a<s;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}yT(t,e)}},TT=function(t,e){if((o=t.length)>0)for(var n,r,i,a,s,o,u=0,l=t[e[0]].length;u<l;++u)for(a=s=0,n=0;n<o;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=s,r[0]=s+=i):(r[0]=0,r[1]=i)},ST=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var s=0,o=0;s<n;++s)o+=t[s][r][1]||0;i[r][1]+=i[r][0]=-o/2}yT(t,e)}},wT=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,s=1;s<r;++s){for(var o=0,u=0,l=0;o<i;++o){for(var c=t[e[o]],d=c[s][1]||0,f=(d-(c[s-1][1]||0))/2,h=0;h<o;++h){var p=t[e[h]];f+=(p[s][1]||0)-(p[s-1][1]||0)}u+=d,l+=f*d}n[s-1][1]+=n[s-1][0]=a,u&&(a-=l/u)}n[s-1][1]+=n[s-1][0]=a,yT(t,e)}},AT=function(t){var e=t.map(xT);return vT(t).sort((function(t,n){return e[t]-e[n]}))};function xT(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}var CT=function(t){var e=t.map(DT);return vT(t).sort((function(t,n){return e[t]-e[n]}))};function DT(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var IT=function(t){return CT(t).reverse()},RT=function(t){var e,n,r=t.length,i=t.map(DT),a=AT(t),s=0,o=0,u=[],l=[];for(e=0;e<r;++e)n=a[e],s<o?(s+=i[n],u.push(n)):(o+=i[n],l.push(n));return l.reverse().concat(u)},OT=function(t){return vT(t).reverse()},PT=Date.prototype.toISOString?function(t){return t.toISOString()}:Ym("%Y-%m-%dT%H:%M:%S.%LZ"),MT=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:zm("%Y-%m-%dT%H:%M:%S.%LZ"),LT=function(t,e,n){var r=new Hn,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Vn():+n,r.restart((function a(s){s+=i,r.restart(a,i+=e,n),t(s)}),e,n),r)},NT=function(t){return function(){return t}};function kT(t){return t[0]}function FT(t){return t[1]}function BT(){this._=null}function jT(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function UT(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function VT(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function GT(t){for(;t.L;)t=t.L;return t}BT.prototype={constructor:BT,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=GT(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(UT(this,n),n=(t=n).U),n.C=!1,r.C=!0,VT(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(VT(this,n),n=(t=n).U),n.C=!1,r.C=!0,UT(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,s=t.R;if(n=a?s?GT(s):a:s,i?i.L===t?i.L=n:i.R=n:this._=n,a&&s?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==s?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,UT(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,VT(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,UT(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,VT(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,UT(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,VT(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var HT=BT;function YT(t,e,n,r){var i=[null,null],a=pS.push(i)-1;return i.left=t,i.right=e,n&&qT(i,t,e,n),r&&qT(i,e,t,r),fS[t.index].halfedges.push(a),fS[e.index].halfedges.push(a),i}function zT(t,e,n){var r=[e,n];return r.left=t,r}function qT(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function XT(t,e,n,r,i){var a,s=t[0],o=t[1],u=s[0],l=s[1],c=0,d=1,f=o[0]-u,h=o[1]-l;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<d&&(d=a)}else if(f>0){if(a>d)return;a>c&&(c=a)}if(a=r-u,f||!(a<0)){if(a/=f,f<0){if(a>d)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<d&&(d=a)}if(a=n-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<d&&(d=a)}else if(h>0){if(a>d)return;a>c&&(c=a)}if(a=i-l,h||!(a<0)){if(a/=h,h<0){if(a>d)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<d&&(d=a)}return!(c>0||d<1)||(c>0&&(t[0]=[u+c*f,l+c*h]),d<1&&(t[1]=[u+d*f,l+d*h]),!0)}}}}}function KT(t,e,n,r,i){var a=t[1];if(a)return!0;var s,o,u=t[0],l=t.left,c=t.right,d=l[0],f=l[1],h=c[0],p=c[1],g=(d+h)/2;if(p===f){if(g<e||g>=r)return;if(d>h){if(u){if(u[1]>=i)return}else u=[g,n];a=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];a=[g,n]}}else if(o=(f+p)/2-(s=(d-h)/(p-f))*g,s<-1||s>1)if(d>h){if(u){if(u[1]>=i)return}else u=[(n-o)/s,n];a=[(i-o)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-o)/s,i];a=[(n-o)/s,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,s*e+o];a=[r,s*r+o]}else{if(u){if(u[0]<e)return}else u=[r,s*r+o];a=[e,s*e+o]}return t[0]=u,t[1]=a,!0}function WT(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $T(t,e){return e[+(e.left!==t.site)]}function QT(t,e){return e[+(e.left===t.site)]}var ZT,JT=[];function tS(){jT(this),this.x=this.y=this.arc=this.site=this.cy=null}function eS(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var s=i[0],o=i[1],u=r[0]-s,l=r[1]-o,c=a[0]-s,d=a[1]-o,f=2*(u*d-l*c);if(!(f>=-mS)){var h=u*u+l*l,p=c*c+d*d,g=(d*h-l*p)/f,m=(u*p-c*h)/f,y=JT.pop()||new tS;y.arc=t,y.site=i,y.x=g+s,y.y=(y.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,_=hS._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}hS.insert(v,y),v||(ZT=y)}}}}function nS(t){var e=t.circle;e&&(e.P||(ZT=e.N),hS.remove(e),JT.push(e),jT(e),t.circle=null)}var rS=[];function iS(){jT(this),this.edge=this.site=this.circle=null}function aS(t){var e=rS.pop()||new iS;return e.site=t,e}function sS(t){nS(t),dS.remove(t),rS.push(t),jT(t)}function oS(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,s=t.N,o=[t];sS(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<gS&&Math.abs(r-u.circle.cy)<gS;)a=u.P,o.unshift(u),sS(u),u=a;o.unshift(u),nS(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<gS&&Math.abs(r-l.circle.cy)<gS;)s=l.N,o.push(l),sS(l),l=s;o.push(l),nS(l);var c,d=o.length;for(c=1;c<d;++c)qT((l=o[c]).edge,(u=o[c-1]).site,l.site,i);(l=o[d-1]).edge=YT((u=o[0]).site,l.site,null,i),eS(u),eS(l)}function uS(t){for(var e,n,r,i,a=t[0],s=t[1],o=dS._;o;)if((r=lS(o,s)-a)>gS)o=o.L;else{if(!((i=a-cS(o,s))>gS)){r>-gS?(e=o.P,n=o):i>-gS?(e=o,n=o.N):e=n=o;break}if(!o.R){e=o;break}o=o.R}!function(t){fS[t.index]={site:t,halfedges:[]}}(t);var u=aS(t);if(dS.insert(e,u),e||n){if(e===n)return nS(e),n=aS(e.site),dS.insert(u,n),u.edge=n.edge=YT(e.site,u.site),eS(e),void eS(n);if(n){nS(e),nS(n);var l=e.site,c=l[0],d=l[1],f=t[0]-c,h=t[1]-d,p=n.site,g=p[0]-c,m=p[1]-d,y=2*(f*m-h*g),v=f*f+h*h,_=g*g+m*m,b=[(m*v-h*_)/y+c,(f*_-g*v)/y+d];qT(n.edge,l,p,b),u.edge=YT(l,t,null,b),n.edge=YT(t,p,null,b),eS(e),eS(n)}else u.edge=YT(e.site,u.site)}}function lS(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var s=t.P;if(!s)return-1/0;var o=(n=s.site)[0],u=n[1],l=u-e;if(!l)return o;var c=o-r,d=1/a-1/l,f=c/l;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*l)-u+l/2+i-a/2)))/d+r:(r+o)/2}function cS(t,e){var n=t.N;if(n)return lS(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var dS,fS,hS,pS,gS=1e-6,mS=1e-12;function yS(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function vS(t,e){return e[1]-t[1]||e[0]-t[0]}function _S(t,e){var n,r,i,a=t.sort(vS).pop();for(pS=[],fS=new Array(t.length),dS=new HT,hS=new HT;;)if(i=ZT,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(uS(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;oS(i.arc)}if(function(){for(var t,e,n,r,i=0,a=fS.length;i<a;++i)if((t=fS[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),o=new Array(r);for(n=0;n<r;++n)s[n]=n,o[n]=WT(t,pS[e[n]]);for(s.sort((function(t,e){return o[e]-o[t]})),n=0;n<r;++n)o[n]=e[s[n]];for(n=0;n<r;++n)e[n]=o[n]}}(),e){var s=+e[0][0],o=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=pS.length;a--;)KT(i=pS[a],t,e,n,r)&&XT(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>gS||Math.abs(i[0][1]-i[1][1])>gS)||delete pS[a]}(s,o,u,l),function(t,e,n,r){var i,a,s,o,u,l,c,d,f,h,p,g,m=fS.length,y=!0;for(i=0;i<m;++i)if(a=fS[i]){for(s=a.site,o=(u=a.halfedges).length;o--;)pS[u[o]]||u.splice(o,1);for(o=0,l=u.length;o<l;)p=(h=QT(a,pS[u[o]]))[0],g=h[1],d=(c=$T(a,pS[u[++o%l]]))[0],f=c[1],(Math.abs(p-d)>gS||Math.abs(g-f)>gS)&&(u.splice(o,0,pS.push(zT(s,h,Math.abs(p-t)<gS&&r-g>gS?[t,Math.abs(d-t)<gS?f:r]:Math.abs(g-r)<gS&&n-p>gS?[Math.abs(f-r)<gS?d:n,r]:Math.abs(p-n)<gS&&g-e>gS?[n,Math.abs(d-n)<gS?f:e]:Math.abs(g-e)<gS&&p-t>gS?[Math.abs(f-e)<gS?d:t,e]:null))-1),++l);l&&(y=!1)}if(y){var v,_,b,E=1/0;for(i=0,y=null;i<m;++i)(a=fS[i])&&(b=(v=(s=a.site)[0]-t)*v+(_=s[1]-e)*_)<E&&(E=b,y=a);if(y){var T=[t,e],S=[t,r],w=[n,r],A=[n,e];y.halfedges.push(pS.push(zT(s=y.site,T,S))-1,pS.push(zT(s,S,w))-1,pS.push(zT(s,w,A))-1,pS.push(zT(s,A,T))-1)}}for(i=0;i<m;++i)(a=fS[i])&&(a.halfedges.length||delete fS[i])}(s,o,u,l)}this.edges=pS,this.cells=fS,dS=hS=pS=fS=null}_S.prototype={constructor:_S,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return $T(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,s,o=n.site,u=-1,l=e[i[a-1]],c=l.left===o?l.right:l.left;++u<a;)s=c,c=(l=e[i[u]]).left===o?l.right:l.left,s&&c&&r<s.index&&r<c.index&&yS(o,s,c)<0&&t.push([o.data,s.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,s=a._found||0,o=a.cells.length;!(i=a.cells[s]);)if(++s>=o)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=a.edges[n],o=r.left;if(o!==i.site&&o||(o=r.right)){var u=t-o[0],l=e-o[1],d=u*u+l*l;d<c&&(c=d,s=o.index)}}))}while(null!==s);return a._found=r,null==n||c<=n*n?i.site:null}};var bS=function(){var t=kT,e=FT,n=null;function r(r){return new _S(r.map((function(n,i){var a=[Math.round(t(n,i,r)/gS)*gS,Math.round(e(n,i,r)/gS)*gS];return a.index=i,a.data=n,a})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:NT(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:NT(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},ES=function(t){return function(){return t}};function TS(t,e,n){this.target=t,this.type=e,this.transform=n}function SS(t,e,n){this.k=t,this.x=e,this.y=n}SS.prototype={constructor:SS,scale:function(t){return 1===t?this:new SS(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new SS(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wS=new SS(1,0,0);function AS(t){for(;!t.__zoom;)if(!(t=t.parentNode))return wS;return t.__zoom}function xS(){le.stopImmediatePropagation()}AS.prototype=SS.prototype;var CS=function(){le.preventDefault(),le.stopImmediatePropagation()};function DS(){return!le.ctrlKey&&!le.button}function IS(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function RS(){return this.__zoom||wS}function OS(){return-le.deltaY*(1===le.deltaMode?.05:le.deltaMode?1:.002)}function PS(){return navigator.maxTouchPoints||"ontouchstart"in this}function MS(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}var LS=function(){var t,e,n=DS,r=IS,i=MS,a=OS,s=PS,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,c=dp,d=dt("start","zoom","end"),f=0;function h(t){t.property("__zoom",RS).on("wheel.zoom",b).on("mousedown.zoom",E).on("dblclick.zoom",T).filter(s).on("touchstart.zoom",S).on("touchmove.zoom",w).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new SS(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new SS(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n){t.on("start.zoom",(function(){v(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){v(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,a=v(t,i),s=r.apply(t,i),o=null==n?m(s):"function"==typeof n?n.apply(t,i):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,d="function"==typeof e?e.apply(t,i):e,f=c(l.invert(o).concat(u/l.k),d.invert(o).concat(u/d.k));return function(t){if(1===t)t=d;else{var e=f(t),n=u/e[2];t=new SS(n,o[0]-e[0]*n,o[1]-e[1]*n)}a.zoom(null,t)}}))}function v(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function b(){if(n.apply(this,arguments)){var t=v(this,arguments),e=this.__zoom,r=Math.max(o[0],Math.min(o[1],e.k*Math.pow(2,a.apply(this,arguments)))),s=Pn(this);if(t.wheel)t.mouse[0][0]===s[0]&&t.mouse[0][1]===s[1]||(t.mouse[1]=e.invert(t.mouse[0]=s)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[s,e.invert(s)],sr(this),t.start()}CS(),t.wheel=setTimeout(l,150),t.zoom("mouse",i(g(p(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}function l(){t.wheel=null,t.end()}}function E(){if(!e&&n.apply(this,arguments)){var t=v(this,arguments,!0),r=Se(le.view).on("mousemove.zoom",l,!0).on("mouseup.zoom",c,!0),a=Pn(this),s=le.clientX,o=le.clientY;xe(le.view),xS(),t.mouse=[a,this.__zoom.invert(a)],sr(this),t.start()}function l(){if(CS(),!t.moved){var e=le.clientX-s,n=le.clientY-o;t.moved=e*e+n*n>f}t.zoom("mouse",i(g(t.that.__zoom,t.mouse[0]=Pn(t.that),t.mouse[1]),t.extent,u))}function c(){r.on("mousemove.zoom mouseup.zoom",null),Ce(le.view,t.moved),CS(),t.end()}}function T(){if(n.apply(this,arguments)){var t=this.__zoom,e=Pn(this),a=t.invert(e),s=t.k*(le.shiftKey?.5:2),o=i(g(p(t,s),e,a),r.apply(this,arguments),u);CS(),l>0?Se(this).transition().duration(l).call(y,o,e):Se(this).call(h.transform,o)}}function S(){if(n.apply(this,arguments)){var e,r,i,a,s=le.touches,o=s.length,u=v(this,arguments,le.changedTouches.length===o);for(xS(),r=0;r<o;++r)a=[a=On(this,s,(i=s[r]).identifier),this.__zoom.invert(a),i.identifier],u.touch0?u.touch1||u.touch0[2]===a[2]||(u.touch1=a,u.taps=0):(u.touch0=a,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),500)),sr(this),u.start())}}function w(){if(this.__zooming){var e,n,r,a,s=v(this,arguments),o=le.changedTouches,l=o.length;for(CS(),t&&(t=clearTimeout(t)),s.taps=0,e=0;e<l;++e)r=On(this,o,(n=o[e]).identifier),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=r);if(n=s.that.__zoom,s.touch1){var c=s.touch0[0],d=s.touch0[1],f=s.touch1[0],h=s.touch1[1],m=(m=f[0]-c[0])*m+(m=f[1]-c[1])*m,y=(y=h[0]-d[0])*y+(y=h[1]-d[1])*y;n=p(n,Math.sqrt(m/y)),r=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(d[0]+h[0])/2,(d[1]+h[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(g(n,r,a),s.extent,u))}}function A(){if(this.__zooming){var t,n,r=v(this,arguments),i=le.changedTouches,a=i.length;for(xS(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<a;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var s=Se(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return h.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",RS),t!==r?y(t,e,n):r.interrupt().each((function(){v(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},h.scaleBy=function(t,e,n){h.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},h.scaleTo=function(t,e,n){h.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,o=a.invert(s),l="function"==typeof e?e.apply(this,arguments):e;return i(g(p(a,l),s,o),t,u)}),n)},h.translateBy=function(t,e,n){h.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},h.translateTo=function(t,e,n,a){h.transform(t,(function(){var t=r.apply(this,arguments),s=this.__zoom,o=null==a?m(t):"function"==typeof a?a.apply(this,arguments):a;return i(wS.translate(o[0],o[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),a)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){ge(new TS(h,t,this.that.__zoom),d.apply,d,[t,this.that,this.args])}},h.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:ES(+t),h):a},h.filter=function(t){return arguments.length?(n="function"==typeof t?t:ES(!!t),h):n},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:ES(!!t),h):s},h.extent=function(t){return arguments.length?(r="function"==typeof t?t:ES([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),h):r},h.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],h):[o[0],o[1]]},h.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],h):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},h.constrain=function(t){return arguments.length?(i=t,h):i},h.duration=function(t){return arguments.length?(l=+t,h):l},h.interpolate=function(t){return arguments.length?(c=t,h):c},h.on=function(){var t=d.on.apply(d,arguments);return t===d?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}},XkjI:function(t,e,n){t.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),n=t((function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)})),r=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},a=function(t){try{return!!t()}catch(e){return!0}},s=!a((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),o=e.document,u=r(o)&&r(o.createElement),l=!s&&!a((function(){return 7!=Object.defineProperty(u?o.createElement("div"):{},"a",{get:function(){return 7}}).a})),c=Object.defineProperty,d={f:s?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if("function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e),i(n),l)try{return c(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},f=s?function(t,e,n){return d.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,n))}:function(t,e,n){return t[e]=n,t},h={}.hasOwnProperty,p=function(t,e){return h.call(t,e)},g=0,m=Math.random(),y=t((function(t){var r=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),v=t((function(t){var r="Symbol(".concat("src",")_",(++g+m).toString(36)),i=(""+y).split("toString");n.inspectSource=function(t){return y.call(t)},(t.exports=function(t,n,a,s){var o="function"==typeof a;o&&(p(a,"name")||f(a,"name",n)),t[n]!==a&&(o&&(p(a,r)||f(a,r,t[n]?""+t[n]:i.join(String(n)))),t===e?t[n]=a:s?t[n]?t[n]=a:f(t,n,a):(delete t[n],f(t,n,a)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||y.call(this)}))})),_=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},b=function(t,r,i){var a,s,o,u,l=t&b.F,c=t&b.G,d=t&b.P,h=t&b.B,p=c?e:t&b.S?e[r]||(e[r]={}):(e[r]||{}).prototype,g=c?n:n[r]||(n[r]={}),m=g.prototype||(g.prototype={});for(a in c&&(i=r),i)o=((s=!l&&p&&void 0!==p[a])?p:i)[a],u=h&&s?_(o,e):d&&"function"==typeof o?_(Function.call,o):o,p&&v(p,a,o,t&b.U),g[a]!=o&&f(g,a,u),d&&m[a]!=o&&(m[a]=o)};e.core=n,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var E=b,T=Math.ceil,S=Math.floor,w=function(t){return isNaN(t=+t)?0:(t>0?S:T)(t)},A=function(t,e){var n,r,i=String(function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}(t)),a=w(e),s=i.length;return a<0||a>=s?void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===s||(r=i.charCodeAt(a+1))<56320||r>57343?n:r-56320+(n-55296<<10)+65536};E(E.P,"String",{codePointAt:function(t){return A(this,t)}});var x=Math.max,C=Math.min,D=function(t,e){return(t=w(t))<0?x(t+e,0):C(t,e)},I=String.fromCharCode,R=String.fromCodePoint;E(E.S+E.F*(!!R&&1!=R.length),"String",{fromCodePoint:function(t){for(var e,n=arguments,r=[],i=arguments.length,a=0;i>a;){if(e=+n[a++],D(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?I(e):I(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}});var O,P,M,L,N,k,F,B,j,U,V,G,H,Y,z={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},q=function(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||"$"===t||"_"===t||z.ID_Start.test(t))},X=function(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"$"===t||"_"===t||"\u200c"===t||"\u200d"===t||z.ID_Continue.test(t))},K=function(t){return"string"==typeof t&&/[0-9]/.test(t)},W=function(t){return"string"==typeof t&&/[0-9A-Fa-f]/.test(t)};function $(){for(U="default",V="",G=!1,H=1;;){Y=Q();var t=J[U]();if(t)return t}}function Q(){if(O[L])return String.fromCodePoint(O.codePointAt(L))}function Z(){var t=Q();return"\n"===t?(N++,k=0):t?k+=t.length:k++,t&&(L+=t.length),t}var J={default:function(){switch(Y){case"\t":case"\v":case"\f":case" ":case"\xa0":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void Z();case"/":return Z(),void(U="comment");case void 0:return Z(),tt("eof")}if(!function(t){return"string"==typeof t&&z.Space_Separator.test(t)}(Y))return J[P]();Z()},comment:function(){switch(Y){case"*":return Z(),void(U="multiLineComment");case"/":return Z(),void(U="singleLineComment")}throw st(Z())},multiLineComment:function(){switch(Y){case"*":return Z(),void(U="multiLineCommentAsterisk");case void 0:throw st(Z())}Z()},multiLineCommentAsterisk:function(){switch(Y){case"*":return void Z();case"/":return Z(),void(U="default");case void 0:throw st(Z())}Z(),U="multiLineComment"},singleLineComment:function(){switch(Y){case"\n":case"\r":case"\u2028":case"\u2029":return Z(),void(U="default");case void 0:return Z(),tt("eof")}Z()},value:function(){switch(Y){case"{":case"[":return tt("punctuator",Z());case"n":return Z(),et("ull"),tt("null",null);case"t":return Z(),et("rue"),tt("boolean",!0);case"f":return Z(),et("alse"),tt("boolean",!1);case"-":case"+":return"-"===Z()&&(H=-1),void(U="sign");case".":return V=Z(),void(U="decimalPointLeading");case"0":return V=Z(),void(U="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return V=Z(),void(U="decimalInteger");case"I":return Z(),et("nfinity"),tt("numeric",1/0);case"N":return Z(),et("aN"),tt("numeric",NaN);case'"':case"'":return G='"'===Z(),V="",void(U="string")}throw st(Z())},identifierNameStartEscape:function(){if("u"!==Y)throw st(Z());Z();var t=nt();switch(t){case"$":case"_":break;default:if(!q(t))throw ut()}V+=t,U="identifierName"},identifierName:function(){switch(Y){case"$":case"_":case"\u200c":case"\u200d":return void(V+=Z());case"\\":return Z(),void(U="identifierNameEscape")}if(!X(Y))return tt("identifier",V);V+=Z()},identifierNameEscape:function(){if("u"!==Y)throw st(Z());Z();var t=nt();switch(t){case"$":case"_":case"\u200c":case"\u200d":break;default:if(!X(t))throw ut()}V+=t,U="identifierName"},sign:function(){switch(Y){case".":return V=Z(),void(U="decimalPointLeading");case"0":return V=Z(),void(U="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return V=Z(),void(U="decimalInteger");case"I":return Z(),et("nfinity"),tt("numeric",H*(1/0));case"N":return Z(),et("aN"),tt("numeric",NaN)}throw st(Z())},zero:function(){switch(Y){case".":return V+=Z(),void(U="decimalPoint");case"e":case"E":return V+=Z(),void(U="decimalExponent");case"x":case"X":return V+=Z(),void(U="hexadecimal")}return tt("numeric",0*H)},decimalInteger:function(){switch(Y){case".":return V+=Z(),void(U="decimalPoint");case"e":case"E":return V+=Z(),void(U="decimalExponent")}if(!K(Y))return tt("numeric",H*Number(V));V+=Z()},decimalPointLeading:function(){if(K(Y))return V+=Z(),void(U="decimalFraction");throw st(Z())},decimalPoint:function(){switch(Y){case"e":case"E":return V+=Z(),void(U="decimalExponent")}return K(Y)?(V+=Z(),void(U="decimalFraction")):tt("numeric",H*Number(V))},decimalFraction:function(){switch(Y){case"e":case"E":return V+=Z(),void(U="decimalExponent")}if(!K(Y))return tt("numeric",H*Number(V));V+=Z()},decimalExponent:function(){switch(Y){case"+":case"-":return V+=Z(),void(U="decimalExponentSign")}if(K(Y))return V+=Z(),void(U="decimalExponentInteger");throw st(Z())},decimalExponentSign:function(){if(K(Y))return V+=Z(),void(U="decimalExponentInteger");throw st(Z())},decimalExponentInteger:function(){if(!K(Y))return tt("numeric",H*Number(V));V+=Z()},hexadecimal:function(){if(W(Y))return V+=Z(),void(U="hexadecimalInteger");throw st(Z())},hexadecimalInteger:function(){if(!W(Y))return tt("numeric",H*Number(V));V+=Z()},string:function(){switch(Y){case"\\":return Z(),void(V+=function(){switch(Q()){case"b":return Z(),"\b";case"f":return Z(),"\f";case"n":return Z(),"\n";case"r":return Z(),"\r";case"t":return Z(),"\t";case"v":return Z(),"\v";case"0":if(Z(),K(Q()))throw st(Z());return"\0";case"x":return Z(),function(){var t="",e=Q();if(!W(e))throw st(Z());if(t+=Z(),e=Q(),!W(e))throw st(Z());return t+=Z(),String.fromCodePoint(parseInt(t,16))}();case"u":return Z(),nt();case"\n":case"\u2028":case"\u2029":return Z(),"";case"\r":return Z(),"\n"===Q()&&Z(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw st(Z())}return Z()}());case'"':return G?(Z(),tt("string",V)):void(V+=Z());case"'":return G?void(V+=Z()):(Z(),tt("string",V));case"\n":case"\r":throw st(Z());case"\u2028":case"\u2029":!function(t){console.warn("JSON5: '"+lt(t)+"' in strings is not valid ECMAScript; consider escaping")}(Y);break;case void 0:throw st(Z())}V+=Z()},start:function(){switch(Y){case"{":case"[":return tt("punctuator",Z())}U="value"},beforePropertyName:function(){switch(Y){case"$":case"_":return V=Z(),void(U="identifierName");case"\\":return Z(),void(U="identifierNameStartEscape");case"}":return tt("punctuator",Z());case'"':case"'":return G='"'===Z(),void(U="string")}if(q(Y))return V+=Z(),void(U="identifierName");throw st(Z())},afterPropertyName:function(){if(":"===Y)return tt("punctuator",Z());throw st(Z())},beforePropertyValue:function(){U="value"},afterPropertyValue:function(){switch(Y){case",":case"}":return tt("punctuator",Z())}throw st(Z())},beforeArrayValue:function(){if("]"===Y)return tt("punctuator",Z());U="value"},afterArrayValue:function(){switch(Y){case",":case"]":return tt("punctuator",Z())}throw st(Z())},end:function(){throw st(Z())}};function tt(t,e){return{type:t,value:e,line:N,column:k}}function et(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(Q()!==r)throw st(Z());Z()}}function nt(){for(var t="",e=4;e-- >0;){var n=Q();if(!W(n))throw st(Z());t+=Z()}return String.fromCodePoint(parseInt(t,16))}var rt={start:function(){if("eof"===F.type)throw ot();it()},beforePropertyName:function(){switch(F.type){case"identifier":case"string":return B=F.value,void(P="afterPropertyName");case"punctuator":return void at();case"eof":throw ot()}},afterPropertyName:function(){if("eof"===F.type)throw ot();P="beforePropertyValue"},beforePropertyValue:function(){if("eof"===F.type)throw ot();it()},beforeArrayValue:function(){if("eof"===F.type)throw ot();"punctuator"!==F.type||"]"!==F.value?it():at()},afterPropertyValue:function(){if("eof"===F.type)throw ot();switch(F.value){case",":return void(P="beforePropertyName");case"}":at()}},afterArrayValue:function(){if("eof"===F.type)throw ot();switch(F.value){case",":return void(P="beforeArrayValue");case"]":at()}},end:function(){}};function it(){var t;switch(F.type){case"punctuator":switch(F.value){case"{":t={};break;case"[":t=[]}break;case"null":case"boolean":case"numeric":case"string":t=F.value}if(void 0===j)j=t;else{var e=M[M.length-1];Array.isArray(e)?e.push(t):e[B]=t}if(null!==t&&"object"==typeof t)M.push(t),P=Array.isArray(t)?"beforeArrayValue":"beforePropertyName";else{var n=M[M.length-1];P=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function at(){M.pop();var t=M[M.length-1];P=null==t?"end":Array.isArray(t)?"afterArrayValue":"afterPropertyValue"}function st(t){return ct(void 0===t?"JSON5: invalid end of input at "+N+":"+k:"JSON5: invalid character '"+lt(t)+"' at "+N+":"+k)}function ot(){return ct("JSON5: invalid end of input at "+N+":"+k)}function ut(){return ct("JSON5: invalid identifier character at "+N+":"+(k-=5))}function lt(t){var e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){var n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function ct(t){var e=new SyntaxError(t);return e.lineNumber=N,e.columnNumber=k,e}return{parse:function(t,e){O=String(t),P="start",M=[],L=0,N=1,k=0,F=void 0,B=void 0,j=void 0;do{F=$(),rt[P]()}while("eof"!==F.type);return"function"==typeof e?function t(e,n,r){var i=e[n];if(null!=i&&"object"==typeof i)for(var a in i){var s=t(i,a,r);void 0===s?delete i[a]:i[a]=s}return r.call(e,n,i)}({"":j},"",e):j},stringify:function(t,e,n){var r,i,a,s=[],o="",u="";if(null==e||"object"!=typeof e||Array.isArray(e)||(n=e.space,a=e.quote,e=e.replacer),"function"==typeof e)i=e;else if(Array.isArray(e)){r=[];for(var l=0,c=e;l<c.length;l+=1){var d=c[l],f=void 0;"string"==typeof d?f=d:("number"==typeof d||d instanceof String||d instanceof Number)&&(f=String(d)),void 0!==f&&r.indexOf(f)<0&&r.push(f)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),u="          ".substr(0,n)):"string"==typeof n&&(u=n.substr(0,10)),function t(e,n){var a=n[e];switch(null!=a&&("function"==typeof a.toJSON5?a=a.toJSON5(e):"function"==typeof a.toJSON&&(a=a.toJSON(e))),i&&(a=i.call(n,e,a)),a instanceof Number?a=Number(a):a instanceof String?a=String(a):a instanceof Boolean&&(a=a.valueOf()),a){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof a?h(a):"number"==typeof a?String(a):"object"==typeof a?Array.isArray(a)?function(e){if(s.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");s.push(e);var n=o;o+=u;for(var r,i=[],a=0;a<e.length;a++){var l=t(String(a),e);i.push(void 0!==l?l:"null")}if(0===i.length)r="[]";else if(""===u)r="["+i.join(",")+"]";else{var c=i.join(",\n"+o);r="[\n"+o+c+",\n"+n+"]"}return s.pop(),o=n,r}(a):function(e){if(s.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");s.push(e);var n=o;o+=u;for(var i,a,l=[],c=0,d=r||Object.keys(e);c<d.length;c+=1){var f=d[c],h=t(f,e);if(void 0!==h){var g=p(f)+":";""!==u&&(g+=" "),l.push(g+=h)}}return 0===l.length?i="{}":""===u?i="{"+(a=l.join(","))+"}":(a=l.join(",\n"+o),i="{\n"+o+a+",\n"+n+"}"),s.pop(),o=n,i}(a):void 0}("",{"":t});function h(t){for(var e={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",i=0;i<t.length;i++){var s=t[i];switch(s){case"'":case'"':e[s]++,r+=s;continue;case"\0":if(K(t[i+1])){r+="\\x00";continue}}if(n[s])r+=n[s];else if(s<" "){var o=s.charCodeAt(0).toString(16);r+="\\x"+("00"+o).substring(o.length)}else r+=s}var u=a||Object.keys(e).reduce((function(t,n){return e[t]<e[n]?t:n}));return u+(r=r.replace(new RegExp(u,"g"),n[u]))+u}function p(t){if(0===t.length)return h(t);var e=String.fromCodePoint(t.codePointAt(0));if(!q(e))return h(t);for(var n=e.length;n<t.length;n++)if(!X(String.fromCodePoint(t.codePointAt(n))))return h(t);return t}}}}()},Y81X:function(t,e,n){"use strict";t.exports=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},Yvhy:function(t,e,n){var r;window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./index.js")}({"./externals/base64.js":function(t,e,n){var r,i,o,u,l,c={};r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){for(var e=0,n=[],i=0|t.length/3;0<i--;){var a=(t[e]<<16)+(t[e+1]<<8)+t[e+2];e+=3,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push(r.charAt(63&a))}return 2==t.length-e?(n.push(r.charAt(63&(a=(t[e]<<16)+(t[e+1]<<8))>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push("=")):1==t.length-e&&(n.push(r.charAt(63&(a=t[e]<<16)>>18)),n.push(r.charAt(63&a>>12)),n.push("==")),n.join("")},o=function(){for(var t=[],e=0;e<r.length;++e)t[r.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}(),u=function(t){for(var e=0,n=[],r=0|t.length/4;0<r--;){var i=(o[t.charCodeAt(e)]<<18)+(o[t.charCodeAt(e+1)]<<12)+(o[t.charCodeAt(e+2)]<<6)+o[t.charCodeAt(e+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),e+=4}return n&&("="==t.charAt(e-2)?(n.pop(),n.pop()):"="==t.charAt(e-1)&&n.pop()),n},l={encode:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},decode:function(t){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}},c.decodeArray=function(t){var e=u(t);return new Uint8Array(e)},c.encodeASCII=function(t){var e=l.encode(t);return i(e)},c.decodeASCII=function(t){var e=u(t);return l.decode(e)},c.encode=function(t){var e=function(t){for(var e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e}(t);return i(e)},c.decode=function(t){return function(t){for(var e=[],n=0;n<t.length;){var r=t[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&t[n++]):r<240?(r=(15&r)<<12,r|=(63&t[n++])<<6,r|=63&t[n++]):(r=(7&r)<<18,r|=(63&t[n++])<<12,r|=(63&t[n++])<<6,r|=63&t[n++])),e.push(String.fromCharCode(r))}return e.join("")}(u(t))},e.decode=c.decode,e.decodeArray=c.decodeArray,e.encode=c.encode,e.encodeASCII=c.encodeASCII},"./externals/cea608-parser.js":function(t,e,n){!function(t){"use strict";var e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(t){var n=t;return e.hasOwnProperty(t)&&(n=e[t]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},s={25:2,26:4,29:6,30:8,31:10,27:13,28:15},o=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseLevel>=this.verboseFilter[t]&&console.log(this.time+" ["+t+"] "+e)}},l=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},c=function(t,e,n,r,i){this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},copy:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var d=function(t,e,n,r,i,a){this.uchar=t||" ",this.penState=new c(e,n,r,i,a)};d.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(t,e){this.uchar=t,this.penState.copy(e)},setPenState:function(t){this.penState.copy(t)},equals:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},copy:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var f=function(){this.chars=[];for(var t=0;t<32;t++)this.chars.push(new d);this.pos=0,this.currPenState=new c};f.prototype={equals:function(t){for(var e=!0,n=0;n<32;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},copy:function(t){for(var e=0;e<32;e++)this.chars[e].copy(t.chars[e])},isEmpty:function(){for(var t=!0,e=0;e<32;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},setCursor:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(t){t>=144&&this.backSpace();var e=n(t);this.pos>=32?u.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},clearFromPos:function(t){var e;for(e=t;e<32;e++)this.chars[e].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var t=[],e=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},setPenStyles:function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}};var h=function(){this.rows=[];for(var t=0;t<15;t++)this.rows.push(new f);this.currRow=14,this.nrRollUpRows=null,this.reset()};h.prototype={reset:function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},equals:function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},copy:function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},isEmpty:function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(t){this.rows[this.currRow].insertChar(t)},setPen:function(t){this.rows[this.currRow].setPenStyles(t)},moveCursor:function(t){this.rows[this.currRow].moveCursor(t)},setCursor:function(t){u.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},setPAC:function(t){u.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.currRow=e;var n=this.rows[this.currRow];if(null!==t.indent){var r=Math.max(t.indent-1,0);n.setCursor(t.indent),t.color=n.chars[r].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},setBkgData:function(t){u.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},setRollUpRows:function(t){this.nrRollUpRows=t},rollUp:function(){if(null!==this.nrRollUpRows){u.log("TEXT",this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")}else u.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(t){t=t||!1;for(var e=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&e.push(t?"Row "+(r+1)+': "'+i+'"':i.trim())}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(t){this.outputFilter=t},setPAC:function(t){this.writeScreen.setPAC(t)},setBkgData:function(t){this.writeScreen.setBkgData(t)},setMode:function(t){t!==this.mode&&(this.mode=t,u.log("INFO","MODE="+t),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},insertChars:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);u.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(t){u.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(t){u.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},cc_MIDROW:function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}u.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},outputDataUpdate:function(){var t=u.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}};var g=function(t,e,n){this.field=t||1,this.outputs=[e,n],this.channels=[new p(1,e),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(t){return this.channels[t].getHandler()},setHandler:function(t,e){this.channels[t].setHandler(e)},addData:function(t,e){var n,r,i,a=!1;this.lastTime=t,u.setTime(t);for(var s=0;s<e.length;s+=2)i=127&e[s+1],(r=127&e[s])>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([r,i])+") is dropped")):0!==r||0!==i?(u.log("DATA","["+l([e[s],e[s+1]])+"] -> ("+l([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):u.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([e[s],e[s+1]])))):this.dataCounters.padding+=2},parseCmd:function(t,e){var n;if(!((20===t||21===t||28===t||29===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35))return!1;var r=this.channels[(n=20===t||21===t||23===t?1:2)-1];return 20===t||21===t||28===t||29===t?32===e?r.cc_RCL():33===e?r.cc_BS():34===e?r.cc_AOF():35===e?r.cc_AON():36===e?r.cc_DER():37===e?r.cc_RU(2):38===e?r.cc_RU(3):39===e?r.cc_RU(4):40===e?r.cc_FON():41===e?r.cc_RDC():42===e?r.cc_TR():43===e?r.cc_RTD():44===e?r.cc_EDM():45===e?r.cc_CR():46===e?r.cc_ENM():47===e&&r.cc_EOC():r.cc_TO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},parseMidrow:function(t,e){var n=null;if((17===t||25===t)&&32<=e&&e<=47){if((n=17===t?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(e),u.log("DEBUG","MIDROW ("+l([t,e])+")"),this.lastCmdA=t,this.lastCmdB=e,!0}return!1},parsePAC:function(t,e){var n;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95))return!1;n=t<=23?1:2;var o=this.interpretPAC(64<=e&&e<=95?1===n?r[t]:a[t]:1===n?i[t]:s[t],e);return this.channels[n-1].setPAC(o),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},interpretPAC:function(t,e){var n,r={color:null,italics:!1,indent:null,underline:!1,row:t};return r.underline=1==(1&(n=e>95?e-96:e-64)),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(t,e){var r,i=null,a=null,s=null;(t>=25?(i=2,s=t-8):(i=1,s=t),17<=s&&s<=19)?(u.log("INFO","Special char '"+n(r=17===s?e+80:18===s?e+112:e+144)+"' in channel "+i),a=[r],this.lastCmdA=t,this.lastCmdB=e):32<=t&&t<=127&&(a=0===e?[t]:[t,e],this.lastCmdA=null,this.lastCmdB=null);if(a){var o=l(a);u.log("DEBUG","Char codes =  "+o.join(","))}return a},parseBackgroundAttributes:function(t,e){var n,r;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(n={},16===t||24===t?(r=Math.floor((e-32)/2),n.background=o[r],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),this.channels[(t<24?1:2)-1].setBkgData(n),this.lastCmdA=t,this.lastCmdB=e,!0)},reset:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}},t.logger=u,t.PenState=c,t.CaptionScreen=h,t.Cea608Parser=g,t.findCea608Nalus=function(t,e,n){for(var r=0,i=e,a=[],s=function(t,e,n,r){if(4!==t||e<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),s=n.getUint32(r+3),o=n.getUint8(r+7);return 181==i&&49==a&&1195456820==s&&3==o};i<e+n;){if(r=t.getUint32(i),6==(31&t.getUint8(i+4)))for(var o=i+5,u=-1;o<i+4+r-1;){u=0;for(var l=255;255===l;)u+=l=t.getUint8(o),o++;var c=0;for(l=255;255===l;)c+=l=t.getUint8(o),o++;s(u,c,t,o)&&a.push([o,c]),o+=c}i+=r+4}return a},t.extractCea608DataFromRange=function(t,e){var n=e[0],r=[[],[]],i=31&t.getUint8(n+=8);n+=2;for(var a=0;a<i;a++){var s=t.getUint8(n),o=4&s,u=3&s;n++;var l=t.getUint8(n);n++;var c=t.getUint8(n);n++,o&&(127&l)+(127&c)!=0&&(0===u?(r[0].push(l),r[0].push(c)):1===u&&(r[1].push(l),r[1].push(c)))}return r}}(e)},"./externals/xml2json.js":function(t,e,n){"use strict";n.r(e),e.default=function(t){function e(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function n(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function r(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(e,n,r))break}return i!=t.length}function i(e,n,i){switch(t.arrayAccessForm){case"property":e[n+"_asArray"]=e[n]instanceof Array?e[n]:[e[n]]}!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0&&r(t.arrayAccessFormPaths,e,n,i)&&(e[n]=[e[n]])}function a(t){var e=t.split(/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),r=e[5].split(".");if(n.setHours(e[3],e[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),e[6]&&e[7]){var i=60*e[6]+Number(e[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(e,n,i,a){return!(1==n&&t.xmlElementsFilter.length>0)||r(t.xmlElementsFilter,e,i,a)}function o(e,r,i,a){var s="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+r;if(null!=i)for(var o=0;o<i.length;o++){var u=i[o],l=e[u];t.escapeMode&&(l=n(l)),s+=" "+u.substr(t.attributePrefix.length)+"=",s+=t.useDoubleQuotes?'"'+l+'"':"'"+l+"'"}return s+(a?"/>":">")}function u(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function l(e,n){return"property"==t.arrayAccessForm&&-1!==(r=n.toString()).indexOf("_asArray",r.length-"_asArray".length)||0==n.toString().indexOf(t.attributePrefix)||0==n.toString().indexOf("__")||e[n]instanceof Function;var r}function c(t){var e=0;if(t instanceof Object)for(var n in t)l(t,n)||e++;return e}function d(e,n,i){return 0==t.jsonPropertiesFilter.length||""==i||r(t.jsonPropertiesFilter,e,n,i)}function f(e){var n=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(t.attributePrefix)&&n.push(r);return n}function h(e){var r="";return e instanceof Object?r+=function(e){var r="";return null!=e.__cdata&&(r+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(r+=t.escapeMode?n(e.__text):e.__text),r}(e):null!=e&&(r+=t.escapeMode?n(e):e),r}function p(t,e){return""===t?e:t+"."+e}function g(t,e,n,r){var i="";if(0==t.length)i+=o(t,e,n,!0);else for(var a=0;a<t.length;a++)i+=o(t[a],e,f(t[a]),!1),i+=m(t[a],p(r,e)),i+=u(t[a],e);return i}function m(t,e){var n="";if(c(t)>0)for(var r in t)if(!l(t,r)&&(""==e||d(t,r,p(e,r)))){var i=t[r],a=f(i);null==i||null==i?n+=o(i,r,a,!0):i instanceof Object?i instanceof Array?n+=g(i,r,a,e):i instanceof Date?(n+=o(i,r,a,!1),n+=i.toISOString(),n+=u(i,r)):c(i)>0||null!=i.__text||null!=i.__cdata?(n+=o(i,r,a,!1),n+=m(i,p(e,r)),n+=u(i,r)):n+=o(i,r,a,!0):(n+=o(i,r,a,!1),n+=h(i),n+=u(i,r))}return n+h(t)}void 0===(t=t||{}).escapeMode&&(t.escapeMode=!0),void 0===t.attributePrefix&&(t.attributePrefix="_"),t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1),t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1),void 0===t.ignoreRoot&&(t.ignoreRoot=!1),this.parseXmlString=function(t){var e;if(window.ActiveXObject||window,void 0===t)return null;if(window.DOMParser){var n=new window.DOMParser;try{(e=n.parseFromString(t,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(e=null)}catch(r){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?a(t):t},this.xml2json=function(n){return function n(o,u){if(9==o.nodeType){for(var l=new Object,c=o.childNodes,d=0;d<c.length;d++)1==(h=c[d]).nodeType&&(t.ignoreRoot?l=n(h):(l={})[p=e(h)]=n(h));return l}if(1==o.nodeType){(l=new Object).__cnt=0;var f=[];for(c=o.childNodes,d=0;d<c.length;d++){var h,p=e(h=c[d]);if(8!=h.nodeType){var g=u+"."+p;if(s(l,h.nodeType,p,g))if(l.__cnt++,null==l[p]){var m=n(h,g);("#text"!=p||/[^\s]/.test(m))&&((y={})[p]=m,f.push(y)),l[p]=m,i(l,p,g)}else{var y;null!=l[p]&&(l[p]instanceof Array||(l[p]=[l[p]],i(l,p,g))),m=n(h,g),("#text"!=p||/[^\s]/.test(m))&&((y={})[p]=m,f.push(y)),l[p][l[p].length]=m}}}l.__children=f;for(var v=e(o),_=0;_<o.attributes.length;_++){var b=o.attributes[_];l.__cnt++;for(var E=b.value,T=0,S=t.matchers.length;T<S;T++){var w=t.matchers[T];w.test(b,v)&&(E=w.converter(b.value))}l[t.attributePrefix+b.name]=E}var A=function(t){return t.prefix}(o);return null!=A&&""!=A&&(l.__cnt++,l.__prefix=A),null!=l["#text"]&&(l.__text=l["#text"],l.__text instanceof Array&&(l.__text=l.__text.join("\n")),t.stripWhitespaces&&(l.__text=l.__text.trim()),delete l["#text"],"property"==t.arrayAccessForm&&delete l["#text_asArray"],l.__text=function(e,n,i){if(t.datetimeAccessFormPaths.length>0){var s=i.split(".#")[0];return r(t.datetimeAccessFormPaths,e,n,s)?a(e):e}return e}(l.__text,p,u+"."+p)),null!=l["#cdata-section"]&&(l.__cdata=l["#cdata-section"],delete l["#cdata-section"],"property"==t.arrayAccessForm&&delete l["#cdata-section_asArray"]),0==l.__cnt&&"text"==t.emptyNodeForm?l="":1==l.__cnt&&null!=l.__text?l=l.__text:1!=l.__cnt||null==l.__cdata||t.keepCData?l.__cnt>1&&null!=l.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==l.__text||""==l.__text.trim())&&delete l.__text:l=l.__cdata,delete l.__cnt,!t.enableToStringFunc||null==l.__text&&null==l.__cdata||(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),l}if(3==o.nodeType||4==o.nodeType)return o.nodeValue}(n)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return m(t,"")},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(t,e,n){"use strict";n.r(e);var r=n("./index_mediaplayerOnly.js");n.d(e,"MediaPlayer",(function(){return r.MediaPlayer}));var i=n("./src/streaming/utils/Capabilities.js");n.d(e,"supportsMediaSource",(function(){return i.supportsMediaSource}));var a=n("./src/streaming/metrics/MetricsReporting.js");n.d(e,"MetricsReporting",(function(){return a.default}));var s=n("./src/streaming/protection/Protection.js");n.d(e,"Protection",(function(){return s.default}));var o=n("./src/streaming/MediaPlayerFactory.js");n.d(e,"MediaPlayerFactory",(function(){return o.default}));var u=n("./src/core/Debug.js");n.d(e,"Debug",(function(){return u.default})),dashjs.Protection=s.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=o.default,dashjs.Debug=u.default,dashjs.supportsMediaSource=i.supportsMediaSource,e.default=dashjs},"./index_mediaplayerOnly.js":function(t,e,n){"use strict";n.r(e),(function(t){var r=n("./src/streaming/MediaPlayer.js");n.d(e,"MediaPlayer",(function(){return r.default}));var i=n("./src/core/FactoryMaker.js");n.d(e,"FactoryMaker",(function(){return i.default}));var a=n("./src/core/Debug.js");n.d(e,"Debug",(function(){return a.default}));var s=n("./src/core/Version.js"),o=(n("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||t),u=o.dashjs;u||(u=o.dashjs={}),u.MediaPlayer=r.default,u.FactoryMaker=i.default,u.Debug=a.default,u.Version=Object(s.getVersionString)(),e.default=u}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],s=n[1],o=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,c=s>0?r-4:r,d=0;d<c;d+=4)e=i[t.charCodeAt(d)]<<18|i[t.charCodeAt(d+1)]<<12|i[t.charCodeAt(d+2)]<<6|i[t.charCodeAt(d+3)],o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(d)]<<2|i[t.charCodeAt(d+1)]>>4,o[u++]=255&e),1===s&&(e=i[t.charCodeAt(d)]<<10|i[t.charCodeAt(d+1)]<<4|i[t.charCodeAt(d+2)]>>2,o[u++]=e>>8&255,o[u++]=255&e),o},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],s=0,o=n-i;s<o;s+=16383)a.push(c(t,s,s+16383>o?o:s+16383));return 1===i?a.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&a.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a=[],s=e;s<n;s+=3)a.push(r[(i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(t,e,n){var r={parseBuffer:function(t){return new i(t).parse()},addBoxProcessor:function(t,e){"string"==typeof t&&"function"==typeof e&&(a.prototype._boxProcessors[t]=e)},createFile:function(){return new i},createBox:function(t,e,n){var r=a.create(t);return e&&e.append(r,n),r},createFullBox:function(t,e,n){var i=r.createBox(t,e,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(t,e){var n=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(t);var r=[],i=0;if("utf-8"===n)for(;i<t.byteLength;){var a=t.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&t.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&t.getUint8(i++))<<6,a|=63&t.getUint8(i++)):(a=(7&a)<<18,a|=(63&t.getUint8(i++))<<12,a|=(63&t.getUint8(i++))<<6,a|=63&t.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<t.byteLength;)r.push(String.fromCharCode(t.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(t){var e,n;if("undefined"!=typeof TextEncoder)e=(new TextEncoder).encode(t);else for(e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e},r.Utils.appendBox=function(t,e,n){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void t.boxes.push(e);r=n.type}for(var a=0;a<t.boxes.length;a++)if(r===t.boxes[a].type){i=a+1;break}}t.boxes.splice(i,0,e)}else t.boxes.push(e)},e.parseBuffer=r.parseBuffer,e.addBoxProcessor=r.addBoxProcessor,e.createFile=r.createFile,e.createBox=r.createBox,e.createFullBox=r.createFullBox,e.Utils=r.Utils,r.Cursor=function(t){this.offset=void 0===t?0:t};var i=function(t){this._cursor=new r.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};i.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},i.prototype.fetchAll=function(t,e){var n=[];return i._sweep.call(this,t,n,e),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=a.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},i._sweep=function(t,e,n){for(var r in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&n)return;i._sweep.call(this.boxes[r],t,e,n)}},i.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},i.prototype.append=function(t,e){r.Utils.appendBox(this,t,e)};var a=function(){this._cursor=new r.Cursor};a.parse=function(t){var e=new a;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},a.create=function(t){var e=new a;return e.type=t,e.boxes=[],e},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(t,e,n){this._parsing?this[t]=this._readField(e,n):this._writeField(e,n,this[t])},a.prototype._procFieldArray=function(t,e,n,r){var i;if(this._parsing)for(this[t]=[],i=0;i<e;i++)this[t][i]=this._readField(n,r);else for(i=0;i<this[t].length;i++)this._writeField(n,r,this[t][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(t,e,n){var r;if(this._parsing)for(this[t]=[],r=0;r<e;r++)this[t].push({}),n.call(this,this[t][r]);else for(r=0;r<e;r++)n.call(this,this[t][r])},a.prototype._procSubEntries=function(t,e,n,r){var i;if(this._parsing)for(t[e]=[],i=0;i<n;i++)t[e].push({}),r.call(this,t[e][i]);else for(i=0;i<n;i++)r.call(this,t[e][i])},a.prototype._procEntryField=function(t,e,n,r){this._parsing?t[e]=this._readField(n,r):this._writeField(n,r,t[e])},a.prototype._procSubBoxes=function(t,e){var n;if(this._parsing)for(this[t]=[],n=0;n<e;n++)this[t].push(a.parse(this));else for(n=0;n<e;n++)this._rawo?this[t][n].write():this.size+=this[t][n].getLength()},a.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return-1===e?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(t){var e=null,n=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(n);break;case 16:e=this._raw.getInt16(n);break;case 32:e=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);e=r*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,e},a.prototype._readUint=function(t){var e,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((e=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:e=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=e*Math.pow(2,32)+n}return this._cursor.offset+=t>>3,r},a.prototype._readString=function(t){for(var e="",n=0;n<t;n++){var r=this._readUint(8);e+=String.fromCharCode(r)}return e},a.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},a.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(0===e)break;t+=String.fromCharCode(e)}return t},a.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,n}return null},a.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e?r.Utils.dataViewToString(e):e},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(t,e){r.Utils.appendBox(this,t,e)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(t,e){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(n,e);break;case 16:this._rawo.setInt16(n,e);break;case 32:this._rawo.setInt32(n,e);break;case 64:var r=Math.floor(e/Math.pow(2,32)),i=e-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=t>>3}else this.size+=t>>3},a.prototype._writeUint=function(t,e){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(i,e);break;case 16:this._rawo.setUint16(i,e);break;case 24:r=255&e,this._rawo.setUint16(i,n=(16776960&e)>>8),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,e);break;case 64:r=e-(n=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=t>>3}else this.size+=t>>3},a.prototype._writeString=function(t,e){for(var n=0;n<t;n++)this._writeUint(8,e.charCodeAt(n))},a.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},a.prototype._writeTemplate=function(t,e){var n=Math.floor(e),r=(e-n)*Math.pow(2,t/2);this._writeUint(t/2,n),this._writeUint(t/2,r)},a.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,n=0;n<t.length;n++)this._rawo.setInt8(e+n,t[n]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},a.prototype._writeUTF8String=function(t){var e=r.Utils.utf8ToByteArray(t);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,e.length),i=0;i<e.length;i++)n.setUint8(i,e[i]);else this.size+=e.length},a.prototype._writeField=function(t,e,n){switch(t){case"uint":this._writeUint(e,n);break;case"int":this._writeInt(e,n);break;case"template":this._writeTemplate(e,n);break;case"string":-1==e?this._writeTerminatedString(n):this._writeString(e,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,(function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,(function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(t,e,n){"use strict";t.exports=n("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(t,e,n){(function(e,n){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=void 0,s=void 0,o=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(s?s(g):b())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<i;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;i=0}var m,y,v,_,b=void 0;function E(t,e){var n=this,r=new this.constructor(w);void 0===r[S]&&L(r);var i=n._state;if(i){var a=arguments[i-1];o((function(){return P(i,r,a,n._result)}))}else R(n,r,t,e);return r}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return x(e,t),e}d?b=function(){return e.nextTick(g)}:c?(y=0,v=new c(g),_=document.createTextNode(""),v.observe(_,{characterData:!0}),b=function(){_.data=y=++y%2}):f?((m=new MessageChannel).port1.onmessage=g,b=function(){return m.port2.postMessage(0)}):b=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(a=t.runOnLoop||t.runOnContext)?function(){a(g)}:h()}catch(e){return h()}}():h();var S=Math.random().toString(36).substring(2);function w(){}function A(e,n,r){n.constructor===e.constructor&&r===E&&n.constructor.resolve===T?function(t,e){1===e._state?D(t,e._result):2===e._state?I(t,e._result):R(e,void 0,(function(e){return x(t,e)}),(function(e){return I(t,e)}))}(e,n):void 0===r?D(e,n):t(r)?function(t,e,n){o((function(t){var r=!1,i=function(n,i,a,s){try{n.call(i,(function(n){r||(r=!0,e!==n?x(t,n):D(t,n))}),(function(e){r||(r=!0,I(t,e))}))}catch(o){return o}}(n,e);!r&&i&&(r=!0,I(t,i))}),t)}(e,n,r):D(e,n)}function x(t,e){if(t===e)I(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=e),null===r||"object"!==i&&"function"!==i)D(t,e);else{var n=void 0;try{n=e.then}catch(a){return void I(t,a)}A(t,e,n)}var r,i}function C(t){t._onerror&&t._onerror(t._result),O(t)}function D(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&o(O,t))}function I(t,e){void 0===t._state&&(t._state=2,t._result=e,o(C,t))}function R(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+1]=n,i[a+2]=r,0===a&&t._state&&o(O,t)}function O(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,a=t._result,s=0;s<e.length;s+=3)i=e[s+n],(r=e[s])?P(n,r,i,a):i(a);t._subscribers.length=0}}function P(e,n,r,i){var a=t(r),s=void 0,o=void 0,u=!0;if(a){try{s=r(i)}catch(l){u=!1,o=l}if(n===s)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else s=i;void 0!==n._state||(a&&u?x(n,s):!1===u?I(n,o):1===e?D(n,s):2===e&&I(n,s))}var M=0;function L(t){t[S]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[S]||L(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&D(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===T){var i=void 0,a=void 0,s=!1;try{i=t.then}catch(u){s=!0,a=u}if(i===E&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===k){var o=new n(w);s?I(o,a):A(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?I(r,n):this._result[e]=n),0===this._remaining&&D(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;R(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),k=function(){function e(t){this[S]=M++,this._result=this._state=void 0,this._subscribers=[],w!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){x(t,e)}),(function(e){I(t,e)}))}catch(n){I(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return k.prototype.then=E,k.all=function(t){return new N(this,t).promise},k.race=function(t){var e=this;return r(t)?new e((function(n,r){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},k.resolve=T,k.reject=function(t){var e=new this(w);return I(e,t),e},k._setScheduler=function(t){s=t},k._setAsap=function(t){o=t},k._asap=o,k.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(i){}if("[object Promise]"===r&&!e.cast)return}t.Promise=k},k.Promise=k,k}()}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var s,o,u,l=r(e),c=r(n);if(l&&c){if((o=e.length)!=n.length)return!1;for(s=o;0!=s--;)if(!t(e[s],n[s]))return!1;return!0}if(l!=c)return!1;var d=e instanceof Date,f=n instanceof Date;if(d!=f)return!1;if(d&&f)return e.getTime()==n.getTime();var h=e instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return e.toString()==n.toString();var g=i(e);if((o=g.length)!==i(n).length)return!1;for(s=o;0!=s--;)if(!a.call(n,g[s]))return!1;for(s=o;0!=s--;)if(!t(e[u=g[s]],n[u]))return!1;return!0}return e!=e&&n!=n}},"./node_modules/ieee754/index.js":function(t,e){e.read=function(t,e,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=o;c>0;a=256*a+t[e+d],d+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+t[e+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),a-=l}return(h?-1:1)*s*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(e*u-1)*Math.pow(2,i),s+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&o,h+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;t[n+h]=255&s,h+=p,s/=256,l-=8);t[n+h-p]|=128*g}},"./node_modules/imsc/src/main/js/doc.js":function(t,e,n){!function(t,e,n,r,i){function a(t,e,n,r){var i=r&&"seq"===r.timeContainer,s=0;r&&(s=i&&n?n.end:r.begin),e.begin=e.explicit_begin?e.explicit_begin+s:s;var o=e.begin,u=null;for(var l in e.sets)a(t,e.sets[l],u,e),o="seq"===e.timeContainer?e.sets[l].end:Math.max(o,e.sets[l].end),u=e.sets[l];if("contents"in e)for(var c in e.contents)a(t,e.contents[c],u,e),o="seq"===e.timeContainer?e.contents[c].end:Math.max(o,e.contents[c].end),u=e.contents[c];else o=i?e.begin:Number.POSITIVE_INFINITY;e.end=null!==e.explicit_end&&null!==e.explicit_dur?Math.min(e.begin+e.explicit_dur,s+e.explicit_end):null===e.explicit_end&&null!==e.explicit_dur?e.begin+e.explicit_dur:null!==e.explicit_end&&null===e.explicit_dur?s+e.explicit_end:o,delete e.explicit_begin,delete e.explicit_dur,delete e.explicit_end,t._registerEvent(e)}function s(t){this.node=t}function o(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function l(){this.styles={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.regions={}}function f(t){this.kind=t}function h(t){this.id=t}function p(t){this.regionID=t}function g(t){this.styleAttrs=t}function m(t){this.sets=t}function y(t){this.contents=t}function v(t,e,n){this.explicit_begin=t,this.explicit_end=e,this.explicit_dur=n}function _(){f.call(this,"body")}function b(){f.call(this,"div")}function E(){f.call(this,"p")}function T(){f.call(this,"span")}function S(){f.call(this,"span")}function w(){f.call(this,"br")}function A(){}function x(){}function C(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function D(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function I(t,e){var n={};if(null!==t)for(var i in t.attributes){var a=t.attributes[i].uri+" "+t.attributes[i].local,s=r.byQName[a];if(void 0!==s){var o=s.parse(t.attributes[i].value);null!==o?(n[a]=o,s===r.byName.zIndex&&N(e,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):k(e,"Cannot parse styling attribute "+a+" --\x3e "+t.attributes[i].value)}}return n}function R(t,e,n){for(var r in t.attributes)if(t.attributes[r].uri===e&&t.attributes[r].local===n)return t.attributes[r].value;return null}function O(t,e,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==e&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/e)),i}function P(t,e,n){for(;e.styleRefs.length>0;){var r=e.styleRefs.pop();r in t.styles?(P(t,t.styles[r],n),L(t.styles[r].styleAttrs,e.styleAttrs)):k(n,"Non-existant style id referenced")}}function M(t,e,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a in t.styles?L(t.styles[a].styleAttrs,n):k(r,"Non-existant style id referenced")}}function L(t,e){for(var n in t)n in e||(e[n]=t[n])}function N(t,e){if(t&&t.warn&&t.warn(e))throw e}function k(t,e){if(t&&t.error&&t.error(e))throw e}function F(t,e){throw t&&t.fatal&&t.fatal(e),e}function B(t,e){for(var n,r=0,i=t.length-1;r<=i;){var a=t[n=Math.floor((r+i)/2)];if(a<e)r=n+1;else{if(!(a>e))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}t.fromXML=function(t,r,i){var f=e.parser(!0,{xmlns:!0}),h=[],p=[],g=[],m=0,y=null;f.onclosetag=function(t){if(h[0]instanceof l)for(var e in h[0].styles)P(h[0],h[0].styles[e],r);else if(h[0]instanceof E||h[0]instanceof T){if(h[0].contents.length>1){var a,o=[h[0].contents[0]];for(a=1;a<h[0].contents.length;a++)h[0].contents[a]instanceof S&&o[o.length-1]instanceof S?o[o.length-1].text+=h[0].contents[a].text:o.push(h[0].contents[a]);h[0].contents=o}h[0]instanceof T&&1===h[0].contents.length&&h[0].contents[0]instanceof S&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else h[0]instanceof s&&(h[0].node.uri===n.ns_tt&&"metadata"===h[0].node.local?m--:m>0&&i&&"onCloseTag"in i&&i.onCloseTag());g.shift(),p.shift(),h.shift()},f.ontext=function(t){if(void 0===h[0]);else if(h[0]instanceof T||h[0]instanceof E){var e=new S;e.initFromText(y,h[0],t,g[0],r),h[0].contents.push(e)}else h[0]instanceof s&&m>0&&i&&"onText"in i&&i.onText(t)},f.onopentag=function(t){var e=t.attributes["xml:space"];g.unshift(e?e.value:0===g.length?"default":g[0]);var a=t.attributes["xml:lang"];if(p.unshift(a?a.value:0===p.length?"":p[0]),t.uri===n.ns_tt)if("tt"===t.local)null!==y&&F(r,"Two <tt> elements at ("+this.line+","+this.column+")"),(y=new o).initFromNode(t,r),h.unshift(y);else if("head"===t.local)h[0]instanceof o||F(r,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==y.head&&F("Second <head> element at ("+this.line+","+this.column+")"),y.head=new u,h.unshift(y.head);else if("styling"===t.local)h[0]instanceof u||F(r,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==y.head.styling&&F("Second <styling> element at ("+this.line+","+this.column+")"),y.head.styling=new l,h.unshift(y.head.styling);else if("style"===t.local){var f;h[0]instanceof l?((f=new c).initFromNode(t,r),f.id?y.head.styling.styles[f.id]=f:k(r,"<style> element missing @id attribute"),h.unshift(f)):h[0]instanceof A?((f=new c).initFromNode(t,r),L(f.styleAttrs,h[0].styleAttrs),h.unshift(f)):F(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===t.local)h[0]instanceof u||F(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==y.head.layout&&F(r,"Second <layout> element at "+this.line+","+this.column+")"),y.head.layout=new d,h.unshift(y.head.layout);else if("region"===t.local){h[0]instanceof d||F(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var v=new A;v.initFromNode(y,t,r),!v.id||v.id in y.head.layout.regions?k(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):y.head.layout.regions[v.id]=v,h.unshift(v)}else if("body"===t.local){h[0]instanceof o||F(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==y.body&&F(r,"Second <body> element at "+this.line+","+this.column+")");var S=new _;S.initFromNode(y,t,r),y.body=S,h.unshift(S)}else if("div"===t.local){h[0]instanceof b||h[0]instanceof _||F(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var C=new b;C.initFromNode(y,h[0],t,r),h[0].contents.push(C),h.unshift(C)}else if("p"===t.local){h[0]instanceof b||F(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var D=new E;D.initFromNode(y,h[0],t,r),h[0].contents.push(D),h.unshift(D)}else if("span"===t.local){h[0]instanceof T||h[0]instanceof E||F(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var I=new T;I.initFromNode(y,h[0],t,g[0],r),h[0].contents.push(I),h.unshift(I)}else if("br"===t.local){h[0]instanceof T||h[0]instanceof E||F(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var R=new w;R.initFromNode(y,h[0],t,r),h[0].contents.push(R),h.unshift(R)}else if("set"===t.local){h[0]instanceof T||h[0]instanceof E||h[0]instanceof b||h[0]instanceof _||h[0]instanceof A||h[0]instanceof w||F(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var O=new x;O.initFromNode(y,h[0],t,r),h[0].sets.push(O),h.unshift(O)}else h.unshift(new s(t));else h.unshift(new s(t));if(h[0]instanceof s)if(t.uri===n.ns_tt&&"metadata"===t.local)m++;else if(m>0&&i&&"onOpenTag"in i){var P=[];for(var M in t.attributes)P[t.attributes[M].uri+" "+t.attributes[M].local]={uri:t.attributes[M].uri,local:t.attributes[M].local,value:t.attributes[M].value};i.onOpenTag(t.uri,t.local,P)}},f.write(t).close(),null!==y.head?delete y.head.styling:y.head=new u,null===y.head.layout&&(y.head.layout=new d);var v=!1;for(var C in y.head.layout.regions){v=!0;break}if(!v){var D=A.prototype.createDefaultRegion();y.head.layout.regions[D.id]=D}for(var I in y.head.layout.regions)a(y,y.head.layout.regions[I],null,null);return y.body&&a(y,y.body,null,null),y},o.prototype.initFromNode=function(t,e){this.cellResolution=function(t,e){var r=R(t,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var s=/(\d+) (\d+)/.exec(r);null!==s?(a=parseInt(s[1]),i=parseInt(s[2])):N(e,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(t,e);var r=function(t,e){var r,i=R(t,n.ns_ttp,"frameRate"),a=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):N(e,"Malformed frame rate attribute (using initial value instead)"));var s=R(t,n.ns_ttp,"frameRateMultiplier"),o=1;null!==s&&(null!==(r=/(\d+) (\d+)/.exec(s))?o=parseInt(r[1])/parseInt(r[2]):N(e,"Malformed frame rate multiplier attribute (using initial value instead)"));var u=o*a,l=1,c=R(t,n.ns_ttp,"tickRate");return null===c?null!==i&&(l=u):null!==(r=/(\d+)/.exec(c))?l=parseInt(r[1]):N(e,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:u,tickRate:l}}(t,e);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=function(t,e){var r=R(t,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var a=/(\d+) (\d+)/.exec(r);if(null!==a){var s=parseInt(a[1]),o=parseInt(a[2]);0!==s&&0!==o?i=s/o:k(e,"Illegal aspectRatio values (ignoring)")}else k(e,"Malformed aspectRatio attribute (ignoring)")}return i}(t,e);var a=R(t,n.ns_ttp,"timeBase");null!==a&&"media"!==a&&F(e,"Unsupported time base");var s=function(t,e){var r=R(t,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return N(e,"Malformed extent (ignoring)"),null;var s=i.parseLength(a[0]),o=i.parseLength(a[1]);return o&&s?{h:o,w:s}:(N(e,"Malformed extent values (ignoring)"),null)}(t,e);null===s?this.pxDimensions={h:480,w:640}:("px"===s.h.unit&&"px"===s.w.unit||F(e,"Extent on TT must be in px or absent"),this.pxDimensions={h:s.h.value,w:s.w.value})},o.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var e=B(this.events,t.begin);if(e.found||this.events.splice(e.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var n=B(this.events,t.end);n.found||this.events.splice(n.index,0,t.end)}}},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(t,e){this.id=C(t),this.styleAttrs=I(t,e),this.styleRefs=D(t)},h.prototype.initFromNode=function(t,e,n,r){this.id=C(n)},p.prototype.initFromNode=function(t,e,n,r){this.regionID=function(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(n)},g.prototype.initFromNode=function(t,e,n,r){this.styleAttrs=I(n,r),null!==t.head&&null!==t.head.styling&&M(t.head.styling,D(n),this.styleAttrs,r)},m.prototype.initFromNode=function(t,e,n,r){this.sets=[]},y.prototype.initFromNode=function(t,e,n,r){this.contents=[]},v.prototype.initFromNode=function(t,e,n,r){var i=function(t,e,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=O(t.tickRate,t.effectiveFrameRate,n.attributes.begin.value))&&N(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=O(t.tickRate,t.effectiveFrameRate,n.attributes.dur.value))&&N(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;return n&&"end"in n.attributes&&null===(s=O(t.tickRate,t.effectiveFrameRate,n.attributes.end.value))&&N(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:s,explicit_dur:a}}(t,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(t,e){var n=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(k(e,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},_.prototype.initFromNode=function(t,e,n){g.prototype.initFromNode.call(this,t,null,e,n),v.prototype.initFromNode.call(this,t,null,e,n),m.prototype.initFromNode.call(this,t,null,e,n),p.prototype.initFromNode.call(this,t,null,e,n),y.prototype.initFromNode.call(this,t,null,e,n)},b.prototype.initFromNode=function(t,e,n,r){g.prototype.initFromNode.call(this,t,e,n,r),v.prototype.initFromNode.call(this,t,e,n,r),m.prototype.initFromNode.call(this,t,e,n,r),p.prototype.initFromNode.call(this,t,e,n,r),y.prototype.initFromNode.call(this,t,e,n,r)},E.prototype.initFromNode=function(t,e,n,r){g.prototype.initFromNode.call(this,t,e,n,r),v.prototype.initFromNode.call(this,t,e,n,r),m.prototype.initFromNode.call(this,t,e,n,r),p.prototype.initFromNode.call(this,t,e,n,r),y.prototype.initFromNode.call(this,t,e,n,r)},T.prototype.initFromNode=function(t,e,n,r,i){g.prototype.initFromNode.call(this,t,e,n,i),v.prototype.initFromNode.call(this,t,e,n,i),m.prototype.initFromNode.call(this,t,e,n,i),p.prototype.initFromNode.call(this,t,e,n,i),y.prototype.initFromNode.call(this,t,e,n,i),this.space=r},S.prototype.initFromText=function(t,e,n,r,i){v.prototype.initFromNode.call(this,t,e,null,i),this.text=n,this.space=r},w.prototype.initFromNode=function(t,e,n,r){p.prototype.initFromNode.call(this,t,e,n,r),v.prototype.initFromNode.call(this,t,e,n,r)},A.prototype.createDefaultRegion=function(){var t=new A;return h.call(t,""),g.call(t,{}),m.call(t,[]),v.call(t,0,Number.POSITIVE_INFINITY,null),t},A.prototype.initFromNode=function(t,e,n){h.prototype.initFromNode.call(this,t,null,e,n),g.prototype.initFromNode.call(this,t,null,e,n),v.prototype.initFromNode.call(this,t,null,e,n),m.prototype.initFromNode.call(this,t,null,e,n),null!==t.head&&null!==t.head.styling&&M(t.head.styling,D(e),this.styleAttrs,n)},x.prototype.initFromNode=function(t,e,n,r){v.prototype.initFromNode.call(this,t,e,n,r);var i=I(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){k(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(e,"undefined"==typeof sax?n("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(t,e,n){!function(t,e,n){function r(t,e,o){var l;if("region"===o.kind?(l=document.createElement("div")).style.position="absolute":"body"===o.kind||"div"===o.kind?l=document.createElement("div"):"p"===o.kind?l=document.createElement("p"):"span"===o.kind?l=document.createElement("span"):"br"===o.kind&&(l=document.createElement("br")),l){for(var c in l.style.margin="0",u){var d=u[c],f=o.styleAttrs[d.qname];void 0!==f&&null!==d.map&&d.map(t,l,o,f)}var h=l;if("region"===o.kind){var p=o.styleAttrs[n.byName.writingMode.qname];"lrtb"===p||"lr"===p?(t.ipd="lr",t.bpd="tb"):"rltb"===p||"rl"===p?(t.ipd="rl",t.bpd="tb"):"tblr"===p?(t.ipd="tb",t.bpd="lr"):"tbrl"!==p&&"tb"!==p||(t.ipd="tb",t.bpd="rl")}var g=o.styleAttrs[n.byName.linePadding.qname];if(g&&g>0){var m=Math.ceil(g*t.h)+"px";"tb"===t.bpd?(h.style.paddingLeft=m,h.style.paddingRight=m):(h.style.paddingTop=m,h.style.paddingBottom=m),t.lp=g}var y=o.styleAttrs[n.byName.multiRowAlign.qname];if(y&&"auto"!==y){var v=document.createElement("span");v.style.display="inline-block",v.style.textAlign=y,l.appendChild(v),h=v,t.mra=y}if(o.styleAttrs[n.byName.fillLineGap.qname]&&(t.flg=!0),"span"===o.kind&&o.text)if(t.lp||t.mra||t.flg)for(var _="",b=0;b<o.text.length;b++){_+=o.text.charAt(b);var E=o.text.charCodeAt(b);if(E<55296||E>56319||b===o.text.length){var T=document.createElement("span");T.textContent=_,l.appendChild(T),_=""}}else l.textContent=o.text;for(var S in e.appendChild(l),o.contents)r(t,h,o.contents[S]);var w=[];if((t.lp||t.mra||t.flg)&&"p"===o.kind&&(s(t,h,w,null),t.mra&&(function(t){for(var e=0;e<t.length-1;e++){var n=t[e].elements.length;if(0!==n&&!1===t[e].br){var r=document.createElement("br"),i=t[e].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(w),t.mra=null),t.lp&&(function(t,e,n){for(var r in t){var i=t[r].elements.length,a=t[r].elements[t[r].start_elem],s=t[r].elements[t[r].end_elem],o=Math.ceil(e)+"px",u="-"+Math.ceil(e)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=o,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=o,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=o,a.node.style.marginTop=u),"lr"===n.ipd?(s.node.style.borderRightColor=s.bgcolor||"#00000000",s.node.style.borderRightStyle="solid",s.node.style.borderRightWidth=o,s.node.style.marginRight=u):"rl"===n.ipd?(s.node.style.borderLeftColor=s.bgcolor||"#00000000",s.node.style.borderLeftStyle="solid",s.node.style.borderLeftWidth=o,s.node.style.marginLeft=u):"tb"===n.ipd&&(s.node.style.borderBottomColor=s.bgcolor||"#00000000",s.node.style.borderBottomStyle="solid",s.node.style.borderBottomWidth=o,s.node.style.marginBottom=u))}}(w,t.lp*t.h,t),t.lp=null),t.flg)){var A=a(h.getBoundingClientRect(),t);!function(t,e,n,r){for(var i=Math.sign(n-e),a=0;a<=t.length;a++){var s,o,u;if(s=0===a?e:a===t.length?n:(t[a].before+t[a-1].after)/2,a>0)for(var l=0;l<t[a-1].elements.length;l++)null!==t[a-1].elements[l].bgcolor&&i*((u=t[a-1].elements[l]).after-s)<0&&(o=Math.ceil(Math.abs(s-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=o:"rl"===r.bpd?u.node.style.paddingLeft=o:"tb"===r.bpd&&(u.node.style.paddingBottom=o));if(a<t.length)for(var c=0;c<t[a].elements.length;c++)null!==(u=t[a].elements[c]).bgcolor&&i*(u.before-s)>0&&(o=Math.ceil(Math.abs(u.before-s))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=o:"rl"===r.bpd?u.node.style.paddingRight=o:"tb"===r.bpd&&(u.node.style.paddingTop=o))}}(w,A.before,A.after,t),t.flg=null}if("region"===o.kind&&(s(t,h,w),"tb"===t.bpd&&t.enableRollUp&&o.contents.length>0&&"after"===o.styleAttrs[n.byName.displayAlign.qname])){var x=new i(""===o.id?"_":o.id,w);if(t.currentISDState[x.id]=x,t.previousISDState&&x.id in t.previousISDState&&t.previousISDState[x.id].plist.length>0&&x.plist.length>1&&x.plist[x.plist.length-2].text===t.previousISDState[x.id].plist[t.previousISDState[x.id].plist.length-1].text){var C=l.firstElementChild,D=x.plist[x.plist.length-1].after-x.plist[x.plist.length-1].before;C.style.bottom="-"+D+"px",C.style.transition="transform 0.4s",C.style.position="relative",C.style.transform="translateY(-"+D+"px)"}}}else!function(t,e){if(t&&t.error&&t.error(e))throw e}(t.errorHandler,"Error processing ISD element kind: "+o.kind)}function i(t,e){this.id=t,this.plist=e}function a(t,e){var n={before:null,after:null,start:null,end:null};return"tb"===e.bpd?(n.before=t.top,n.after=t.bottom,"lr"===e.ipd?(n.start=t.left,n.end=t.right):(n.start=t.right,n.end=t.left)):"lr"===e.bpd?(n.before=t.left,n.after=t.right,n.start=t.top,n.end=t.bottom):"rl"===e.bpd&&(n.before=t.right,n.after=t.left,n.start=t.top,n.end=t.bottom),n}function s(t,e,n,r){var i,o,u,l,c=e.style.backgroundColor||r;if(0===e.childElementCount)if("span"===e.localName){var d=e.getBoundingClientRect();if(0===d.height||0===d.width)return;var f=a(d,t);if(0!==n.length&&(i=f.before,u=n[n.length-1].before,(o=f.after)<(l=n[n.length-1].after)&&i>u||l<=o&&u>=i)){var h=Math.sign(f.after-f.before),p=Math.sign(f.end-f.start);h*(f.before-n[n.length-1].before)<0&&(n[n.length-1].before=f.before),h*(f.after-n[n.length-1].after)>0&&(n[n.length-1].after=f.after),p*(f.start-n[n.length-1].start)<0&&(n[n.length-1].start=f.start,n[n.length-1].start_elem=n[n.length-1].elements.length),p*(f.end-n[n.length-1].end)>0&&(n[n.length-1].end=f.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:f.before,after:f.after,start:f.start,end:f.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});n[n.length-1].text+=e.textContent,n[n.length-1].elements.push({node:e,bgcolor:c,before:f.before,after:f.after})}else"br"===e.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var g=e.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&s(t,g,n,c),g=g.nextSibling}function o(t,e){this.qname=t,this.map=e}t.render=function(t,e,n,i,a,s,o,u,l){var c=i||e.clientHeight,d=a||e.clientWidth;if(null!==t.aspectRatio){var f=c*t.aspectRatio;f>d?c=Math.round(d/t.aspectRatio):d=f}var h=document.createElement("div");h.style.position="relative",h.style.width=d+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:s||!1,isd:t,errorHandler:o,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var g in e.appendChild(h),t.contents)r(p,h,t.contents[g]);return p.currentISDState};var u=[new o("http://www.w3.org/ns/ttml#styling backgroundColor",(function(t,e,n,r){0!==r[3]&&(e.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new o("http://www.w3.org/ns/ttml#styling color",(function(t,e,n,r){e.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new o("http://www.w3.org/ns/ttml#styling direction",(function(t,e,n,r){e.style.direction=r})),new o("http://www.w3.org/ns/ttml#styling display",(function(t,e,n,r){})),new o("http://www.w3.org/ns/ttml#styling displayAlign",(function(t,e,n,r){e.style.display="flex",e.style.flexDirection="column","before"===r?e.style.justifyContent="flex-start":"center"===r?e.style.justifyContent="center":"after"===r&&(e.style.justifyContent="flex-end")})),new o("http://www.w3.org/ns/ttml#styling extent",(function(t,e,n,r){t.regionH=r.h*t.h,t.regionW=r.w*t.w;var i=0,a=0,s=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];s&&(i=(s[0]+s[2])*t.h,a=(s[1]+s[3])*t.w),e.style.height=t.regionH-i+"px",e.style.width=t.regionW-a+"px"})),new o("http://www.w3.org/ns/ttml#styling fontFamily",(function(t,e,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):i.push("proportionalSerif"===r[a]?"serif":r[a]);e.style.fontFamily=i.join(",")})),new o("http://www.w3.org/ns/ttml#styling fontSize",(function(t,e,n,r){e.style.fontSize=r*t.h+"px"})),new o("http://www.w3.org/ns/ttml#styling fontStyle",(function(t,e,n,r){e.style.fontStyle=r})),new o("http://www.w3.org/ns/ttml#styling fontWeight",(function(t,e,n,r){e.style.fontWeight=r})),new o("http://www.w3.org/ns/ttml#styling lineHeight",(function(t,e,n,r){e.style.lineHeight="normal"===r?"normal":r*t.h+"px"})),new o("http://www.w3.org/ns/ttml#styling opacity",(function(t,e,n,r){e.style.opacity=r})),new o("http://www.w3.org/ns/ttml#styling origin",(function(t,e,n,r){e.style.top=r.h*t.h+"px",e.style.left=r.w*t.w+"px"})),new o("http://www.w3.org/ns/ttml#styling overflow",(function(t,e,n,r){e.style.overflow=r})),new o("http://www.w3.org/ns/ttml#styling padding",(function(t,e,n,r){var i=[];i[0]=r[0]*t.h+"px",i[1]=r[3]*t.w+"px",i[2]=r[2]*t.h+"px",i[3]=r[1]*t.w+"px",e.style.padding=i.join(" ")})),new o("http://www.w3.org/ns/ttml#styling showBackground",null),new o("http://www.w3.org/ns/ttml#styling textAlign",(function(t,e,r,i){var a=r.styleAttrs[n.byName.direction.qname];e.style.textAlign="start"===i?"rtl"===a?"right":"left":"end"===i?"rtl"===a?"left":"right":i})),new o("http://www.w3.org/ns/ttml#styling textDecoration",(function(t,e,n,r){e.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new o("http://www.w3.org/ns/ttml#styling textOutline",(function(t,e,n,r){e.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*t.h+"px"})),new o("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(t,e,n,r){e.style.unicodeBidi="bidiOverride"===r?"bidi-override":r})),new o("http://www.w3.org/ns/ttml#styling visibility",(function(t,e,n,r){e.style.visibility=r})),new o("http://www.w3.org/ns/ttml#styling wrapOption",(function(t,e,n,r){e.style.whiteSpace="wrap"===r?"preserve"===n.space?"pre-wrap":"normal":"preserve"===n.space?"pre":"noWrap"})),new o("http://www.w3.org/ns/ttml#styling writingMode",(function(t,e,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?e.style.writingMode="horizontal-tb":"tblr"===r?e.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(e.style.writingMode="vertical-rl")})),new o("http://www.w3.org/ns/ttml#styling zIndex",(function(t,e,n,r){e.style.zIndex=r})),new o("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(t,e,n,r){if(null!==t.imgResolver&&null!==r){var i=document.createElement("img"),a=t.imgResolver(r,i);a&&(i.src=a),i.height=t.regionH,i.width=t.regionW,e.appendChild(i)}})),new o("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(t,e,n,r){t.displayForcedOnlyMode&&!1===r&&(e.style.visibility="hidden")}))],l={};for(var c in u)l[u[c].qname]=u[c]}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(t,e,n){!function(t,e,n){function r(t,e,i,o,u,l,c,d,f){if(e<c.begin||e>=c.end)return null;var h="regionID"in c&&""!==c.regionID?c.regionID:l;if(null!==u&&h!==i.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==h))return null;var p=new a(c);for(var g in c.sets)e<c.sets[g].begin||e>=c.sets[g].end||(p.styleAttrs[c.sets[g].qname]=c.sets[g].value);var m,y={};for(var v in p.styleAttrs)if(y[v]=!0,v===n.byName.writingMode.qname&&!(n.byName.direction.qname in p.styleAttrs)){var _=p.styleAttrs[v];"lrtb"===_||"lr"===_?p.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==_&&"rl"!==_||(p.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==u)for(var b in n.all){var E=n.all[b];if(E.qname===n.byName.textDecoration.qname){var T=u.styleAttrs[E.qname],S=p.styleAttrs[E.qname],w=[];void 0===S?w=T:-1===S.indexOf("none")?((-1===S.indexOf("noUnderline")&&-1!==T.indexOf("underline")||-1!==S.indexOf("underline"))&&w.push("underline"),(-1===S.indexOf("noLineThrough")&&-1!==T.indexOf("lineThrough")||-1!==S.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===S.indexOf("noOverline")&&-1!==T.indexOf("overline")||-1!==S.indexOf("overline"))&&w.push("overline")):w.push("none"),p.styleAttrs[E.qname]=w}else E.inherit&&E.qname in u.styleAttrs&&!(E.qname in p.styleAttrs)&&(p.styleAttrs[E.qname]=u.styleAttrs[E.qname])}for(var A in n.all){var x=n.all[A];x.qname in p.styleAttrs||("region"===p.kind||!1===x.inherit&&null!==x.initial)&&(p.styleAttrs[x.qname]=x.parse(x.initial),y[x.qname]=!0)}for(var C in n.all){var D=n.all[C];if(D.qname in y&&null!==D.compute){var I=D.compute(t,u,p,p.styleAttrs[D.qname],f);null!==I?p.styleAttrs[D.qname]=I:s(d,"Style '"+D.qname+"' on element '"+p.kind+"' cannot be computed")}}if("none"===p.styleAttrs[n.byName.display.qname])return null;for(var R in null===u?m=null===o?[]:[o]:"contents"in c&&(m=c.contents),m){var O=r(t,e,i,o,p,h,m[R],d,f);null!==O&&p.contents.push(O.element)}for(var P in p.styleAttrs)-1===n.byQName[P].applies.indexOf(p.kind)&&delete p.styleAttrs[P];if("span"===p.kind&&p.text&&"default"===p.space){var M=p.text.replace(/\s+/g," ");p.text=M}if("p"===p.kind){var L=[];!function t(e,n){if("contents"in e)for(var r in e.contents)t(e.contents[r],n);else n.push(e)}(p,L);for(var N=0,k="after_br",F=0;;)if("after_br"===k)N>=L.length||"br"===L[N].kind?(k="before_br",F=N,N--):("preserve"!==L[N].space&&(L[N].text=L[N].text.replace(/^\s+/g,"")),L[N].text.length>0?(k="looking_br",N++):L.splice(N,1));else if("before_br"===k)if(N<0||"br"===L[N].kind){if(k="after_br",(N=F+1)>=L.length)break}else if("preserve"!==L[N].space&&(L[N].text=L[N].text.replace(/\s+$/g,"")),L[N].text.length>0){if(k="after_br",(N=F+1)>=L.length)break}else L.splice(N,1),N--;else N>=L.length||"br"===L[N].kind?(k="before_br",F=N,N--):N++;!function t(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var n=e.contents.length;n--;)t(e.contents[n])&&e.contents.splice(n,1);return 0===e.contents.length}}(p)}return"div"===p.kind&&n.byName.backgroundImage.qname in p.styleAttrs||"br"===p.kind||"contents"in p&&p.contents.length>0||"span"===p.kind&&null!==p.text||"region"===p.kind&&"always"===p.styleAttrs[n.byName.showBackground.qname]?{region_id:h,element:p}:null}function i(t){this.contents=[],this.aspectRatio=t.aspectRatio}function a(t){for(var e in this.kind=t.kind||"region",t.id&&(this.id=t.id),this.styleAttrs={},t.styleAttrs)this.styleAttrs[e]=t.styleAttrs[e];"text"in t?this.text=t.text:"br"!==t.kind&&(this.contents=[]),"space"in t&&(this.space=t.space)}function s(t,e){if(t&&t.error&&t.error(e))throw e}t.generateISD=function(t,e,n){var a=new i(t),s={};for(var o in t.head.layout.regions){var u=r(t,e,t.head.layout.regions[o],t.body,null,"",t.head.layout.regions[o],n,s);null!==u&&a.contents.push(u.element)}return a}}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(t,e,n){e.generateISD=n("./node_modules/imsc/src/main/js/isd.js").generateISD,e.fromXML=n("./node_modules/imsc/src/main/js/doc.js").fromXML,e.renderHTML=n("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(t,e,n){!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}(e)},"./node_modules/imsc/src/main/js/styles.js":function(t,e,n){!function(t,e,n){function r(t,e,n,r,i,a,s,o){this.name=e,this.ns=t,this.qname=t+" "+e,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=s,this.compute=o}for(var i in t.all=[new r(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(e.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(e.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"displayAlign","before",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,n,r,i){var a,s;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/t.pxDimensions.h}if("auto"===r)s=1;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/t.pxDimensions.w}return{h:a,w:s}})),new r(e.ns_tts,"fontFamily","default",["span"],!0,!0,(function(t){var e=t.split(","),n=[];for(var r in e)"'"!==e[r].charAt(0)&&'"'!==e[r].charAt(0)?n.push("default"===e[r]?"monospaceSerif":e[r]):n.push(e[r]);return n}),null),new r(e.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(e,n,r,i,a){var s;if("%"===i.unit)s=null!==n?n.styleAttrs[t.byName.fontSize.qname]*i.value/100:i.value/100/e.cellResolution.h;else if("em"===i.unit)s=null!==n?n.styleAttrs[t.byName.fontSize.qname]*i.value:i.value/e.cellResolution.h;else if("c"===i.unit)s=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/e.pxDimensions.h}return s})),new r(e.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(t){return"normal"===t?t:n.parseLength(t)}),(function(e,n,r,i,a){var s;if("normal"===i)s=i;else if("%"===i.unit)s=r.styleAttrs[t.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)s=r.styleAttrs[t.byName.fontSize.qname]*i.value;else if("c"===i.unit)s=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/e.pxDimensions.h}return s})),new r(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(e.ns_tts,"origin","auto",["region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,n,r,i){var a,s;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/t.pxDimensions.h}if("auto"===r)s=0;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/t.pxDimensions.w}return{h:a,w:s}})),new r(e.ns_tts,"overflow","hidden",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"padding","0px",["region"],!1,!0,(function(t){var e=t.split(" ");if(e.length>4)return null;var r=[];for(var i in e){var a=n.parseLength(e[i]);if(!a)return null;r.push(a)}return r}),(function(e,n,r,i,a){var s;if(1===i.length)s=[i[0],i[0],i[0],i[0]];else if(2===i.length)s=[i[0],i[1],i[0],i[1]];else if(3===i.length)s=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;s=[i[0],i[1],i[2],i[3]]}var o=r.styleAttrs[t.byName.writingMode.qname];if("lrtb"===o||"lr"===o)s=[s[0],s[3],s[2],s[1]];else if("rltb"===o||"rl"===o)s=[s[0],s[1],s[2],s[3]];else if("tblr"===o)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==o&&"tb"!==o)return null;s=[s[3],s[2],s[1],s[0]]}var u=[];for(var l in s)if(0===s[l].value)u[l]=0;else if("%"===s[l].unit)u[l]="0"===l||"2"===l?r.styleAttrs[t.byName.extent.qname].h*s[l].value/100:r.styleAttrs[t.byName.extent.qname].w*s[l].value/100;else if("em"===s[l].unit)u[l]=r.styleAttrs[t.byName.fontSize.qname]*s[l].value;else if("c"===s[l].unit)u[l]=s[l].value/e.cellResolution.h;else{if("px"!==s[l].unit)return null;u[l]="0"===l||"2"===l?s[l].value/e.pxDimensions.h:s[l].value/e.pxDimensions.w}return u})),new r(e.ns_tts,"showBackground","always",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"textAlign","start",["p"],!0,!0,(function(t){return t}),(function(t,e,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(e.ns_tts,"textDecoration","none",["span"],!0,!0,(function(t){return t.split(" ")}),null),new r(e.ns_tts,"textOutline","none",["span"],!0,!0,(function(t){if("none"===t)return t;var e={},r=t.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(e.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(e.thickness=a,e):null}),(function(e,n,r,i,a){if("none"===i)return i;var s={};if(s.color=null===i.color?r.styleAttrs[t.byName.color.qname]:i.color,"%"===i.thickness.unit)s.thickness=r.styleAttrs[t.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)s.thickness=r.styleAttrs[t.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)s.thickness=i.thickness.value/e.cellResolution.h;else{if("px"!==i.thickness.unit)return null;s.thickness=i.thickness.value/e.pxDimensions.h}return s})),new r(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"zIndex","auto",["region"],!1,!0,(function(t){var e;return"auto"===t?e=t:(e=parseInt(t),isNaN(e)&&(e=null)),e}),null),new r(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(t,e,n,r,i){return"c"===r.unit?r.value/t.cellResolution.h:null})),new r(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(t){return t}),null),new r(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(t){return t}),null),new r(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(t){return"true"===t}),null),new r(e.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(t){return"true"===t}),null)],t.byQName={},t.all)t.byQName[t.all[i].qname]=t.all[i];for(var a in t.byName={},t.all)t.byName[t.all[a].name]=t.all[a]}(e,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(t,e,n){!function(t){var e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(t){var a,s=null,o=i[t.toLowerCase()];return void 0!==o?s=o:null!==(a=e.exec(t))?s=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(t))?s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(t))&&(s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),s};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;t.parseLength=function(t){var e,n=null;return null!==(e=a.exec(t))&&(n={value:parseFloat(e[1]),unit:e[2]}),n}}(e)},"./node_modules/inherits/inherits_browser.js":function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"./node_modules/isarray/index.js":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(t,e,n){"use strict";(function(t){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),a=n("./node_modules/isarray/index.js");function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=o(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=o(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?o(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(c(e),t=o(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|h(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var a,s=1,o=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(a=n;a<o;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(t,a+f)!==l(e,f)){d=!1;break}if(d)return a}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}function b(t,e,n,r){return V(j(e,t.length-n),t,n,r)}function E(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return V(U(e),t,n,r)}function w(t,e,n,r){return V(function(t,e){for(var n,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function A(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,s,o,u,l=t[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:s=t[i+2],128==(192&(a=t[i+1]))&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:s=t[i+2],o=t[i+3],128==(192&(a=t[i+1]))&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function D(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var a="",s=e;s<n;++s)a+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return a}function R(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,a){return a||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,a){return a||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?o(null,e):void 0!==n?"string"==typeof r?o(null,e).fill(n,r):o(null,e).fill(n):o(null,e)}(0,t,e,n)},u.allocUnsafe=function(t){return d(null,t)},u.allocUnsafeSlow=function(t){return d(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),o=Math.min(a,s),l=this.slice(r,i),c=t.slice(e,n),d=0;d<o;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var a=0,s=1,o=0;for(this[e]=255&t;++a<n&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=u.isBuffer(t)?t:j(new u(t,r).toString()),o=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%o]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}y(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var i,a,s;if(l(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),s=a[e]),void 0===s)s=a[e]=n,++t._eventsCount;else if("function"==typeof s?s=a[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,console&&console.warn&&console.warn(o)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)a(u,this,e);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return d(this,t,e,!1)},o.prototype.prependListener=function(t,e){return d(this,t,e,!0)},o.prototype.once=function(t,e){return l(e),this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,h(this,t,e)),this},o.prototype.off=o.prototype.removeListener=function(t,e){var n,r,i,a,s;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n("./node_modules/setimmediate/setImmediate.js"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var s=a>=0?arguments[a]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var a=e.isAbsolute(t),s="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!a).join("/"))||a||(t="."),t&&s&&(t+="/"),(a?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),s=Math.min(i.length,a.length),o=s,u=0;u<s;u++)if(i[u]!==a[u]){o=u;break}var l=[];for(u=o;u<i.length;u++)l.push("..");return(l=l.concat(a.slice(o))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,s=t.length-1;s>=0;--s){var o=t.charCodeAt(s);if(47!==o)-1===r&&(i=!1,r=s+1),46===o?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(t,e,n){"use strict";(function(e){t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return e.nextTick((function(){t.apply(null,a)}))}}}:e}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var t=o(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++d<e;)u&&u[d].run();d=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(t,e,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=d;var a=n("./node_modules/core-util-is/lib/util.js");a.inherits=n("./node_modules/inherits/inherits_browser.js");var s=n("./node_modules/readable-stream/lib/_stream_readable.js"),o=n("./node_modules/readable-stream/lib/_stream_writable.js");a.inherits(d,s);for(var u=i(o.prototype),l=0;l<u.length;l++){var c=u[l];d.prototype[c]||(d.prototype[c]=o.prototype[c])}function d(t){if(!(this instanceof d))return new d(t);s.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(t,e,n){"use strict";t.exports=a;var r=n("./node_modules/readable-stream/lib/_stream_transform.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(t){if(!(this instanceof a))return new a(t);r.call(this,t)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(a,r),a.prototype._transform=function(t,e,n){n(null,t)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(t,e,n){"use strict";(function(e,r){var i=n("./node_modules/process-nextick-args/index.js");t.exports=_;var a,s=n("./node_modules/isarray/index.js");_.ReadableState=v,n("./node_modules/node-libs-browser/node_modules/events/events.js");var o=function(t,e){return t.listeners(e).length},u=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),l=n("./node_modules/safe-buffer/index.js").Buffer,c=e.Uint8Array||function(){},d=n("./node_modules/core-util-is/lib/util.js");d.inherits=n("./node_modules/inherits/inherits_browser.js");var f=n(0),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,g=n("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),m=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");d.inherits(_,u);var y=["error","close","destroy","pause","resume"];function v(t,e){var r=e instanceof(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var a,s=t._readableState;return null===e?(s.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,s)):(i||(a=function(t,e){var n,r;return l.isBuffer(r=e)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?E(t,s,e,!1):A(t,s)):E(t,s,e,!1))):r||(s.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),A(t,e)}function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(w,t):w(t))}function w(t){h("emit readable"),t.emit("readable"),I(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(x,t,e))}function x(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function C(t){h("readable nexttick read 0"),t.read(0)}function D(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var a=n.data,s=t>a.length?a.length:t;if(i+=s===a.length?a:a.slice(0,t),0==(t-=s)){s===a.length?(++r,e.head=n.next?n.next:e.tail=null):(e.head=n,n.data=a.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var a=r.data,s=t>a.length?a.length:t;if(a.copy(n,n.length-t,0,s),0==(t-=s)){s===a.length?(++i,e.head=r.next?r.next:e.tail=null):(e.head=r,r.data=a.slice(s));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function O(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this},_.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):S(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&O(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(n,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&O(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?v:l;function l(){h("onend"),t.end()}a.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",(function e(r,i){h("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),t.removeListener("close",m),t.removeListener("finish",y),t.removeListener("drain",c),t.removeListener("error",g),t.removeListener("unpipe",e),n.removeListener("end",l),n.removeListener("end",v),n.removeListener("data",p),d=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}));var c=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,I(t))}}(n);t.on("drain",c);var d=!1,f=!1;function p(e){h("ondata"),f=!1,!1!==t.write(e)||f||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==M(a.pipes,t))&&!d&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(e){h("onerror",e),v(),t.removeListener("error",g),0===o(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",y),v()}function y(){h("onfinish"),t.removeListener("close",m),v()}function v(){h("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener("error",n);t._events&&t._events.error?s(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on("error",n)}(t,0,g),t.once("close",m),t.once("finish",y),t.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var s=M(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},_.prototype.addListener=_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(C,this))}return n},_.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(D,t,e))}(this,t)),this},_.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<y.length;a++)t.on(y[a],this.emit.bind(this,y[a]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=R}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(t,e,n){"use strict";t.exports=s;var r=n("./node_modules/readable-stream/lib/_stream_duplex.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},"./node_modules/readable-stream/lib/_stream_writable.js":function(t,e,n){"use strict";(function(e,r,i){var a=n("./node_modules/process-nextick-args/index.js");function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var o,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:a.nextTick;v.WritableState=y;var l=n("./node_modules/core-util-is/lib/util.js");l.inherits=n("./node_modules/inherits/inherits_browser.js");var c,d={deprecate:n("./node_modules/util-deprecate/browser.js")},f=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),h=n("./node_modules/safe-buffer/index.js").Buffer,p=i.Uint8Array||function(){},g=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");function m(){}function y(t,e){o=o||n("./node_modules/readable-stream/lib/_stream_duplex.js");var r=e instanceof o;this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(a.nextTick(i,r),a.nextTick(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),w(t,e))}(t,n,r,e,i);else{var s=T(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?u(b,t,n,s,i):b(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(o=o||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(c.call(v,this)||this instanceof o))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function _(t,e,n,r,i,a,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),w(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=new Array(e.bufferedRequestCount),i=e.corkedRequestsFree;i.entry=n;for(var a=0,o=!0;n;)r[a]=n,n.isBuf||(o=!1),n=n.next,a+=1;r.allBuffers=o,_(t,e,!0,e.length,r,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(_(t,e,!1,e.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),w(t,e)}))}function w(t,e){var n=T(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(v,f),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===v&&t&&t._writableState instanceof y}})):c=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,o=!i.objectMode&&(h.isBuffer(r=t)||r instanceof p);return o&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),a.nextTick(e,n)}(this,n):(o||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),a.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,a){if(!n){var s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n)),e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var o=e.objectMode?1:r.length;e.length+=o;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,o,r,i,a);return u}(this,i,o,t,e,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?a.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(t,e,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=n(1);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(t,e,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js");function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(t,e,n){t.exports=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(t,e,n){(e=t.exports=n("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=e,e.Readable=e,e.Writable=n("./node_modules/readable-stream/lib/_stream_writable.js"),e.Duplex=n("./node_modules/readable-stream/lib/_stream_duplex.js"),e.Transform=n("./node_modules/readable-stream/lib/_stream_transform.js"),e.PassThrough=n("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(t,e,n){t.exports=n("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(t,e,n){var r=n("./node_modules/node-libs-browser/node_modules/buffer/index.js"),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s),a(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"./node_modules/sax/lib/sax.js":function(t,e,n){(function(t){!function(e){e.parser=function(t,e){return new a(t,e)},e.SAXParser=a,e.SAXStream=o,e.createStream=function(t,e){return new o(t,e)},e.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,n){if(!(this instanceof a))return new a(t,n);!function(t){for(var e=0,n=i.length;e<n;e++)t[i[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=A.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=Object.create(this.strictEntities?e.XML_ENTITIES:e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(p)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),C(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),a.prototype={end:function(){P(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return O(this,"Cannot write after close. Assign an onready handler.");if(null===t)return P(this);"object"==typeof t&&(t=t.toString());for(var n=0,r="";r=U(t,n++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case A.BEGIN:if(this.state=A.BEGIN_WHITESPACE,"\ufeff"===r)continue;j(this,r);continue;case A.BEGIN_WHITESPACE:j(this,r);continue;case A.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=n-1;r&&"<"!==r&&"&"!==r;)(r=U(t,n++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(a,n-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(!E(u,r)||this.sawRoot&&!this.closedRoot||M(this,"Text data outside of root node."),"&"===r?this.state=A.TEXT_ENTITY:this.textNode+=r):(this.state=A.OPEN_WAKA,this.startTagPosition=this.position);continue;case A.SCRIPT:"<"===r?this.state=A.SCRIPT_ENDING:this.script+=r;continue;case A.SCRIPT_ENDING:"/"===r?this.state=A.CLOSE_TAG:(this.script+="<"+r,this.state=A.SCRIPT);continue;case A.OPEN_WAKA:"!"===r?(this.state=A.SGML_DECL,this.sgmlDecl=""):b(u,r)||(b(g,r)?(this.state=A.OPEN_TAG,this.tagName=r):"/"===r?(this.state=A.CLOSE_TAG,this.tagName=""):"?"===r?(this.state=A.PROC_INST,this.procInstName=this.procInstBody=""):(M(this,"Unencoded <"),this.startTagPosition+1<this.position&&(r=new Array(this.position-this.startTagPosition).join(" ")+r),this.textNode+="<"+r,this.state=A.TEXT));continue;case A.SGML_DECL:"[CDATA["===(this.sgmlDecl+r).toUpperCase()?(D(this,"onopencdata"),this.state=A.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=A.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+r).toUpperCase()?(this.state=A.DOCTYPE,(this.doctype||this.sawRoot)&&M(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(D(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=A.TEXT):b(d,r)?(this.state=A.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case A.SGML_DECL_QUOTED:r===this.q&&(this.state=A.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case A.DOCTYPE:">"===r?(this.state=A.TEXT,D(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=A.DOCTYPE_DTD:b(d,r)&&(this.state=A.DOCTYPE_QUOTED,this.q=r));continue;case A.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=A.DOCTYPE:b(d,r)&&(this.state=A.DOCTYPE_DTD_QUOTED,this.q=r);continue;case A.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=A.DOCTYPE_DTD,this.q="");continue;case A.COMMENT:"-"===r?this.state=A.COMMENT_ENDING:this.comment+=r;continue;case A.COMMENT_ENDING:"-"===r?(this.state=A.COMMENT_ENDED,this.comment=R(this.opt,this.comment),this.comment&&D(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==r?(M(this,"Malformed comment"),this.comment+="--"+r,this.state=A.COMMENT):this.state=A.TEXT;continue;case A.CDATA:"]"===r?this.state=A.CDATA_ENDING:this.cdata+=r;continue;case A.CDATA_ENDING:"]"===r?this.state=A.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===r?(this.cdata&&D(this,"oncdata",this.cdata),D(this,"onclosecdata"),this.cdata="",this.state=A.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=A.CDATA);continue;case A.PROC_INST:"?"===r?this.state=A.PROC_INST_ENDING:b(u,r)?this.state=A.PROC_INST_BODY:this.procInstName+=r;continue;case A.PROC_INST_BODY:if(!this.procInstBody&&b(u,r))continue;"?"===r?this.state=A.PROC_INST_ENDING:this.procInstBody+=r;continue;case A.PROC_INST_ENDING:">"===r?(D(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=A.TEXT):(this.procInstBody+="?"+r,this.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:b(m,r)?this.tagName+=r:(L(this),">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:(E(u,r)&&M(this,"Invalid character in tag name"),this.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===r?(F(this,!0),B(this)):(M(this,"Forward-slash in opening tag not followed by >"),this.state=A.ATTRIB);continue;case A.ATTRIB:if(b(u,r))continue;">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:b(g,r)?(this.attribName=r,this.attribValue="",this.state=A.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===r?this.state=A.ATTRIB_VALUE:">"===r?(M(this,"Attribute without value"),this.attribValue=this.attribName,k(this),F(this)):b(u,r)?this.state=A.ATTRIB_NAME_SAW_WHITE:b(m,r)?this.attribName+=r:M(this,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=A.ATTRIB_VALUE;else{if(b(u,r))continue;M(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",D(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?F(this):b(g,r)?(this.attribName=r,this.state=A.ATTRIB_NAME):(M(this,"Invalid attribute name"),this.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(b(u,r))continue;b(d,r)?(this.q=r,this.state=A.ATTRIB_VALUE_QUOTED):(M(this,"Unquoted attribute value"),this.state=A.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case A.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=A.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}k(this),this.q="",this.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:b(u,r)?this.state=A.ATTRIB:">"===r?F(this):"/"===r?this.state=A.OPEN_TAG_SLASH:b(g,r)?(M(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=A.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(E(f,r)){"&"===r?this.state=A.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}k(this),">"===r?F(this):this.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(this.tagName)">"===r?B(this):b(m,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=A.SCRIPT):(E(u,r)&&M(this,"Invalid tagname in closing tag"),this.state=A.CLOSE_TAG_SAW_WHITE);else{if(b(u,r))continue;E(g,r)?this.script?(this.script+="</"+r,this.state=A.SCRIPT):M(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case A.CLOSE_TAG_SAW_WHITE:if(b(u,r))continue;">"===r?B(this):M(this,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var s,o;switch(this.state){case A.TEXT_ENTITY:s=A.TEXT,o="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:s=A.ATTRIB_VALUE_QUOTED,o="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:s=A.ATTRIB_VALUE_UNQUOTED,o="attribValue"}";"===r?(this[o]+=(l=void 0,c=void 0,void 0,p=void 0,h=(c=this.entity).toLowerCase(),p="",this.ENTITIES[c]?this.ENTITIES[c]:this.ENTITIES[h]?this.ENTITIES[h]:("#"===(c=h).charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),p=(l=parseInt(c,16)).toString(16)):(c=c.slice(1),p=(l=parseInt(c,10)).toString(10))),c=c.replace(/^0+/,""),p.toLowerCase()!==c?(M(this,"Invalid character entity"),"&"+this.entity+";"):String.fromCodePoint(l))),this.entity="",this.state=s):b(this.entity.length?v:y,r)?this.entity+=r:(M(this,"Invalid character in entity name"),this[o]+="&"+this.entity+r,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}var l,c,h,p;return this.position>=this.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,a=0,s=i.length;a<s;a++){var o=t[i[a]].length;if(o>n)switch(i[a]){case"textNode":I(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:O(t,"Max buffer length exceeded: "+i[a])}r=Math.max(r,o)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-r+t.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){I(this),""!==this.cdata&&(D(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(D(this,"onscript",this.script),this.script="")}};try{r=n("./node_modules/stream-browserify/index.js").Stream}catch(V){r=function(){}}var s=e.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function o(t,e){if(!(this instanceof o))return new o(t,e);r.apply(this),this._parser=new a(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,s.forEach((function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e,e;n.on(t,e)},enumerable:!0,configurable:!1})}))}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var r=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new r("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===s.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var u="\r\n\t ",l="0124356789",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",f=u+">",h="http://www.w3.org/XML/1998/namespace",p={xml:h,xmlns:"http://www.w3.org/2000/xmlns/"};u=_(u),l=_(l),c=_(c);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function _(t){return t.split("").reduce((function(t,e){return t[e]=!0,t}),{})}function b(t,e){return function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!e.match(t):t[e]}function E(t,e){return!b(t,e)}d=_(d),f=_(f);var T,S,w,A=0;for(var x in e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[x]]=x;function C(t,e,n){t[e]&&t[e](n)}function D(t,e,n){t.textNode&&I(t),C(t,e,n)}function I(t){t.textNode=R(t.opt,t.textNode),t.textNode&&C(t,"ontext",t.textNode),t.textNode=""}function R(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function O(t,e){return I(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,C(t,"onerror",e),t}function P(t){return t.sawRoot&&!t.closedRoot&&M(t,"Unclosed root tag"),t.state!==A.BEGIN&&t.state!==A.BEGIN_WHITESPACE&&t.state!==A.TEXT&&O(t,"Unexpected end"),I(t),t.c="",t.closed=!0,C(t,"onend"),a.call(t,t.strict,t.opt),t}function M(t,e){if("object"!=typeof t||!(t instanceof a))throw new Error("bad call to strictFail");t.strict&&O(t,e)}function L(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,D(t,"onopentagstart",n)}function N(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function k(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=N(t.attribName,!0),n=e.local;if("xmlns"===e.prefix)if("xml"===n&&t.attribValue!==h)M(t,"xml: prefix must be bound to "+h+"\nActual: "+t.attribValue);else if("xmlns"===n&&"http://www.w3.org/2000/xmlns/"!==t.attribValue)M(t,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+t.attribValue);else{var r=t.tag,i=t.tags[t.tags.length-1]||t;r.ns===i.ns&&(r.ns=Object.create(i.ns)),r.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,D(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function F(t,e){if(t.opt.xmlns){var n=t.tag,r=N(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(M(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix),n.ns&&(t.tags[t.tags.length-1]||t).ns!==n.ns&&Object.keys(n.ns).forEach((function(e){D(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var i=0,a=t.attribList.length;i<a;i++){var s=t.attribList[i],o=s[0],u=s[1],l=N(o,!0),c=l.prefix,d=""===c?"":n.ns[c]||"",f={name:o,value:u,prefix:c,local:l.local,uri:d};c&&"xmlns"!==c&&!d&&(M(t,"Unbound namespace prefix: "+JSON.stringify(c)),f.uri=c),t.tag.attributes[o]=f,D(t,"onattribute",f)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),D(t,"onopentag",t.tag),e||(t.state=t.noscript||"script"!==t.tagName.toLowerCase()?A.TEXT:A.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function B(t){if(!t.tagName)return M(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=A.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=A.SCRIPT);D(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--&&t.tags[e].name!==r;)M(t,"Unexpected close tag");if(e<0)return M(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=A.TEXT);t.tagName=n;for(var i=t.tags.length;i-- >e;){var a=t.tag=t.tags.pop();t.tagName=t.tag.name,D(t,"onclosetag",t.tagName);var s={};for(var o in a.ns)s[o]=a.ns[o];t.opt.xmlns&&a.ns!==(t.tags[t.tags.length-1]||t).ns&&Object.keys(a.ns).forEach((function(e){D(t,"onclosenamespace",{prefix:e,uri:a.ns[e]})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=A.TEXT}function j(t,e){"<"===e?(t.state=A.OPEN_WAKA,t.startTagPosition=t.position):E(u,e)&&(M(t,"Non-whitespace before first tag."),t.textNode=e,t.state=A.TEXT)}function U(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}A=e.STATE,String.fromCodePoint||(T=String.fromCharCode,S=Math.floor,w=function(){var t=16384,e=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||S(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?e.push(a):e.push(55296+((a-=65536)>>10),a%1024+56320),(n+1===r||e.length>t)&&(i+=T.apply(null,e),e.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(e)}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,a,s,o,u=1,l={},c=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(s="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),r=function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){a.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},f.clearImmediate=h}function h(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(t,e,n){t.exports=i;var r=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function i(){r.call(this)}n("./node_modules/inherits/inherits_browser.js")(i,r),i.Readable=n("./node_modules/readable-stream/readable-browser.js"),i.Writable=n("./node_modules/readable-stream/writable-browser.js"),i.Duplex=n("./node_modules/readable-stream/duplex-browser.js"),i.Transform=n("./node_modules/readable-stream/transform.js"),i.PassThrough=n("./node_modules/readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",u));var s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},"./node_modules/string_decoder/lib/string_decoder.js":function(t,e,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=c,this.end=d,e=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"./node_modules/util-deprecate/browser.js":function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},"./src/core/Debug.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=1,o=2,u=3,l=4,c=5;function d(t){t=t||{};var e,n,a,d,f=this.context,h=Object(r.default)(f).getInstance(),p=t.settings,g=[];function m(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[s,this].concat(e))}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[o,this].concat(e))}function _(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[u,this].concat(e))}function b(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[l,this].concat(e))}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[c,this].concat(e))}function T(t,e){var r="",s=null;n&&(s=(new Date).getTime(),r+="["+(s-d)+"]"),a&&e&&e.getClassName&&(r+="["+e.getClassName()+"]",e.getType&&(r+="["+e.getType()+"]")),r.length>0&&(r+=" ");for(var o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];Array.apply(null,u).forEach((function(t){r+=t+" "})),g[t]&&p.get().debug.logLevel>=t&&g[t](r),p&&p.get().debug.dispatchEvent&&h.trigger(i.default.LOG,{message:r,level:t})}return e={getLogger:function(t){return{fatal:y.bind(t),error:v.bind(t),warn:_.bind(t),info:b.bind(t),debug:E.bind(t)}},setLogTimestampVisible:function(t){n=t},setCalleeNameVisible:function(t){a=t}},n=!0,a=!0,d=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(g[s]=m(window.console.error),g[o]=m(window.console.error),g[u]=m(window.console.warn),g[l]=m(window.console.info),g[c]=m(window.console.debug)),e}d.__dashjs_factory_name="Debug";var f=a.default.getSingletonFactory(d);f.LOG_LEVEL_NONE=0,f.LOG_LEVEL_FATAL=s,f.LOG_LEVEL_ERROR=o,f.LOG_LEVEL_WARNING=u,f.LOG_LEVEL_INFO=l,f.LOG_LEVEL_DEBUG=c,a.default.updateSingletonFactory(d.__dashjs_factory_name,f),e.default=f},"./src/core/EventBus.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/MediaPlayerEvents.js");function a(){var t={};function e(e,n,r){var i=-1;return t[e]?(t[e].some((function(t,e){if(t&&t.callback===n&&(!r||r===t.scope))return i=e,!0})),i):i}return{on:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var s=a.priority||0;if(!(e(n,r,i)>=0)){t[n]=t[n]||[];var o={callback:r,scope:i,priority:s};i&&i.getStreamId&&(o.streamId=i.getStreamId()),i&&i.getType&&(o.mediaType=i.getType()),a&&a.mode&&(o.mode=a.mode);var u=t[n].some((function(e,r){if(e&&s>e.priority)return t[n].splice(r,0,o),!0}));u||t[n].push(o)}},off:function(n,r,i){if(n&&r&&t[n]){var a=e(n,r,i);a<0||(t[n][a]=null)}},trigger:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t[e]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=e,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),t[e].filter((function(t){return!(!t||r.streamId&&t.streamId&&t.streamId!==r.streamId||r.mediaType&&t.mediaType&&t.mediaType!==r.mediaType||r.mode&&t.mode&&t.mode!==r.mode||!t.mode&&r.mode&&r.mode===i.default.EVENT_MODE_ON_RECEIVE)})).forEach((function(t){return t&&t.callback.call(t.scope,n)}))}},reset:function(){t={}}}}a.__dashjs_factory_name="EventBus";var s=r.default.getSingletonFactory(a);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(a.__dashjs_factory_name,s),e.default=s},"./src/core/FactoryMaker.js":function(t,e,n){"use strict";n.r(e);var r=function(){var t,e=[],n={},r={};function i(t,n){for(var r in e){var i=e[r];if(i.context===t&&i.name===n)return i.instance}return null}function a(t,e){return e[t]}function s(t,e,n){t in n&&(n[t]=e)}function o(e,n,r){var i,a=e.__dashjs_factory_name,s=n[a];if(s){var o=s.instance;if(!s.override)return o.apply({context:n,factory:t},r);for(var u in i=e.apply({context:n},r),o=o.apply({context:n,factory:t,parent:i},r))i.hasOwnProperty(u)&&(i[u]=o[u])}else i=e.apply({context:n},r);return i.getClassName=function(){return a},i}return t={extend:function(t,e,n,r){!r[t]&&e&&(r[t]={instance:e,override:n})},getSingletonInstance:i,setSingletonInstance:function(t,n,r){for(var i in e){var a=e[i];if(a.context===t&&a.name===n)return void(e[i].instance=r)}e.push({name:n,context:t,instance:r})},deleteSingletonInstances:function(t){e=e.filter((function(e){return e.context!==t}))},getSingletonFactory:function(t){var r=a(t.__dashjs_factory_name,n);return r||(n[t.__dashjs_factory_name]=r=function(n){var r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,t.__dashjs_factory_name)),r||(r=o(t,n,arguments),e.push({name:t.__dashjs_factory_name,context:n,instance:r})),r}}}),r},getSingletonFactoryByName:function(t){return a(t,n)},updateSingletonFactory:function(t,e){s(t,e,n)},getClassFactory:function(t){var e=a(t.__dashjs_factory_name,r);return e||(r[t.__dashjs_factory_name]=e=function(e){return void 0===e&&(e={}),{create:function(){return o(t,e,arguments)}}}),e},getClassFactoryByName:function(t){return a(t,r)},updateClassFactory:function(t,e){s(t,e,r)}}}();e.default=r},"./src/core/Settings.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Utils.js"),a=n("./src/core/Debug.js"),s=n("./src/streaming/constants/Constants.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(){var t,e,n={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,lowLatencyEnabled:!1,lowLatencyEnabledByManifest:!0,manifestUpdateRetryInterval:100,cacheInitSegments:!1,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0,applyServiceDescription:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{minDrift:.02,maxDrift:12,playbackRate:.5,latencyThreshold:60,playbackBufferMin:.5,enabled:!1,mode:s.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:s.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:s.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:s.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:0,retryIntervals:(t={},l(t,o.HTTPRequest.MPD_TYPE,500),l(t,o.HTTPRequest.XLINK_EXPANSION_TYPE,500),l(t,o.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),l(t,o.HTTPRequest.INIT_SEGMENT_TYPE,1e3),l(t,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),l(t,o.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),l(t,o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),l(t,o.HTTPRequest.LICENSE,1e3),l(t,o.HTTPRequest.OTHER_TYPE,1e3),l(t,"lowLatencyReductionFactor",10),t),retryAttempts:(e={},l(e,o.HTTPRequest.MPD_TYPE,3),l(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,1),l(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,3),l(e,o.HTTPRequest.INIT_SEGMENT_TYPE,3),l(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),l(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,3),l(e,o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),l(e,o.HTTPRequest.LICENSE,3),l(e,o.HTTPRequest.OTHER_TYPE,3),l(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:s.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:s.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:s.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:s.default.CMCD_MODE_QUERY}},errors:{recoverAttempts:{mediaErrorDecode:5}}},r=i.default.clone(n);return{get:function(){return r},update:function(t){"object"===u(t)&&function t(e,n,r){for(var a in e)e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&("object"===u(e[a])&&null!==e[a]?t(e[a],n[a],r.slice()+a+"."):n[a]=i.default.clone(e[a]))}(t,r,"")},reset:function(){r=i.default.clone(n)}}}c.__dashjs_factory_name="Settings";var d=r.default.getSingletonFactory(c);e.default=d},"./src/core/Utils.js":function(t,e,n){"use strict";n.r(e);var r=n("./node_modules/path-browserify/index.js"),i=n.n(r);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"mixin",value:function(e,n,r){var i,s={};if(e)for(var o in n)n.hasOwnProperty(o)&&(i=n[o],o in e&&(e[o]===i||o in s&&s[o]===i)||(e[o]="object"===a(e[o])&&null!==e[o]?t.mixin(e[o],i,r):r(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!==a(e))return e;var n;if(e instanceof Array){n=[];for(var r=0,i=e.length;r<i;++r)r in e&&n.push(t.clone(e[r]))}else n={};return t.mixin(n,e,t.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(t,e){try{if(!e||0===e.length)return t;var n=new URL(t);return e.forEach((function(t){t.key&&t.value&&n.searchParams.set(t.key,t.value)})),n.href}catch(r){return t}}},{key:"parseHttpHeaders",value:function(t){var e={};if(!t)return e;for(var n=t.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],s=a.indexOf(": ");s>0&&(e[a.substring(0,s)]=a.substring(s+2))}return e}},{key:"generateUuid",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}},{key:"getRelativeUrl",value:function(t,e){try{var n=new URL(t),r=new URL(e);if(n.protocol=r.protocol,n.origin!==r.origin)return e;var a=i.a.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),r.pathname.substr(0,r.pathname.lastIndexOf("/"))),s=0===a.length?1:0;return a+=r.pathname.substr(r.pathname.lastIndexOf("/")+s,r.pathname.length-1),r.pathname.length<a.length?r.pathname:a}catch(o){return e}}}])&&s(e,n),t}()},"./src/core/Version.js":function(t,e,n){"use strict";function r(){return"4.2.1"}n.r(e),n.d(e,"getVersionString",(function(){return r}))},"./src/core/errors/Errors.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var o=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,t.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,t.SEGMENT_BASE_LOADER_ERROR_CODE=15,t.TIME_SYNC_FAILED_ERROR_CODE=16,t.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,t.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,t.APPEND_ERROR_CODE=20,t.REMOVE_ERROR_CODE=21,t.DATA_UPDATE_FAILED_ERROR_CODE=22,t.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,t.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,t.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,t.DOWNLOAD_ERROR_ID_SIDX_CODE=26,t.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,t.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,t.DOWNLOAD_ERROR_ID_XLINK_CODE=29,t.MANIFEST_ERROR_ID_PARSE_CODE=31,t.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,t.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,t.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,t.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,t.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",t.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",t.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",t.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",t.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",t.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",t.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",t.APPEND_ERROR_MESSAGE="chunk is not defined",t.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",t.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",t.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",t.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",t.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",t.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",t}return o}(n("./src/core/errors/ErrorsBase.js").default));e.default=o},"./src/core/errors/ErrorsBase.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"extend",value:function(t,e){if(t){var n=!!e&&e.override,r=!!e&&e.publicOnly;for(var i in t)!t.hasOwnProperty(i)||this[i]&&!n||r&&-1===t[i].indexOf("public_")||(this[i]=t[i])}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/core/events/CoreEvents.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/events/EventsBase.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",t.BUFFERING_COMPLETED="bufferingCompleted",t.BUFFER_CLEARED="bufferCleared",t.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",t.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",t.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",t.CURRENT_TRACK_CHANGED="currentTrackChanged",t.DATA_UPDATE_COMPLETED="dataUpdateCompleted",t.INBAND_EVENTS="inbandEvents",t.INITIAL_STREAM_SWITCH="initialStreamSwitch",t.INIT_FRAGMENT_LOADED="initFragmentLoaded",t.INIT_FRAGMENT_NEEDED="initFragmentNeeded",t.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",t.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",t.LOADING_COMPLETED="loadingCompleted",t.LOADING_PROGRESS="loadingProgress",t.LOADING_DATA_PROGRESS="loadingDataProgress",t.LOADING_ABANDONED="loadingAborted",t.MANIFEST_UPDATED="manifestUpdated",t.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",t.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",t.QUOTA_EXCEEDED="quotaExceeded",t.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",t.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",t.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",t.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",t.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",t.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",t.SOURCE_BUFFER_ERROR="sourceBufferError",t.STREAMS_COMPOSED="streamsComposed",t.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",t.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",t.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",t.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",t.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",t.URL_RESOLUTION_FAILED="urlResolutionFailed",t.VIDEO_CHUNK_RECEIVED="videoChunkReceived",t.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",t.XLINK_ELEMENT_LOADED="xlinkElementLoaded",t.XLINK_READY="xlinkReady",t.SEEK_TARGET="seekTarget",t}return i}(r.default)},"./src/core/events/Events.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var u=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function u(){return i(this,u),r.apply(this,arguments)}return u}(n("./src/core/events/CoreEvents.js").default));e.default=u},"./src/core/events/EventsBase.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"extend",value:function(t,e){if(t){var n=!!e&&e.override,r=!!e&&e.publicOnly;for(var i in t)!t.hasOwnProperty(i)||this[i]&&!n||r&&-1===t[i].indexOf("public_")||(this[i]=t[i])}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/DashAdapter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/dash/vo/RepresentationInfo.js"),a=n("./src/dash/vo/MediaInfo.js"),s=n("./src/dash/vo/StreamInfo.js"),o=n("./src/dash/vo/ManifestInfo.js"),u=n("./src/dash/vo/Event.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/dash/models/DashManifestModel.js"),d=n("./src/dash/models/PatchManifestModel.js");function f(){var t,e,n,l,f,h,p,g=this.context;function m(t,n,i){var a=e.getAdaptationsForType(l[0].mpd.manifest,t,n);if(!a||0===a.length)return null;if(a.length>1&&i){var s=_(i,n);if(f[i.id]&&f[i.id][n])for(var o=0,u=a.length;o<u;o++)if(y(f[i.id][n],s[o]))return a[o];for(var c=0,d=a.length;c<d;c++)if(e.getRolesForAdaptation(a[c]).filter((function(t){return t.value===r.default.MAIN}))[0])return a[c]}return a[0]}function y(t,e){if(!t||!e)return!1;var n=t.id===e.id,r=t.codec===e.codec,i=t.viewpoint===e.viewpoint,a=t.lang===e.lang,s=t.roles.toString()===e.roles.toString(),o=t.accessibility.toString()===e.accessibility.toString(),u=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return n&&r&&i&&a&&s&&o&&u}function v(t,n,r,i,a,s){var o,u,l,c,d,f=[];if(!i||0===i.length)return[];var p=e.getAdaptationsForPeriod(n);for(l=0,d=i.length;l<d;l++)if(o=x(p[u=e.getIndexForAdaptation(i[l],t,r.index)]),s){var g=o.accessibility.length;for(c=0;c<g;c++)if(o){var m=o.accessibility[c];if(0===m.indexOf("cea-608:")){var y=m.substring(8).split(";");if("CC"===y[0].substring(0,2))for(c=0;c<y.length;c++)o||(o=x.call(this,p[u])),C(o,y[c].substring(0,3),y[c].substring(4)),f.push(o),o=null;else for(c=0;c<y.length;c++)o||(o=x.call(this,p[u])),C(o,"CC"+(c+1),y[c]),f.push(o),o=null}else 0===m.indexOf("cea-608")&&(C(o,h.CC1,"eng"),f.push(o),o=null)}}else a===h.IMAGE?(o.type=h.IMAGE,f.push(o),o=null):o&&f.push(o);return f}function _(t,n,r){var i=l,a=r,s=[];if(a)I(),i=b(a);else{if(!(l.length>0))return s;a=l[0].mpd.manifest}var o=A(t,i),u=e.getAdaptationsForType(a,t?t.index:null,n);return s=v(a,o,t,u,n),n===h.TEXT&&(u=e.getAdaptationsForType(a,t?t.index:null,h.VIDEO),s=s.concat(v(a,o,t,u,n,!0))),s}function b(t){var n=E(t);return e.getRegularPeriods(n)}function E(t){var n=S(t);return e.getMpd(n)}function T(){l=[],f={}}function S(t){return t||(l.length>0?l[0].mpd.manifest:null)}function w(t){try{var n=A(t.streamInfo,l),r=e.getAdaptationsForPeriod(n);return t&&t.streamInfo&&void 0!==t.streamInfo.id&&r?r[t.index]:null}catch(i){return null}}function A(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];if(t&&t.id===i.id)return i}return null}function x(t){if(!t)return null;var n,r=new a.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];if(r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=D(t.period),r.representationCount=e.getRepresentationCount(i),r.labels=e.getLabelsForAdaptation(i),r.lang=e.getLanguageForAdaptation(i),n=e.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=e.getAccessibilityForAdaptation(i).map((function(t){var e=t.value,n=e;return t.schemeIdUri&&t.schemeIdUri.search("cea-608")>=0&&void 0!==p&&(n=e?"cea-608:"+e:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=e.getAudioChannelConfigurationForAdaptation(i).map((function(t){return t.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(r.audioChannelConfiguration=e.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(t){return t.value}))),r.roles=e.getRolesForAdaptation(i).map((function(t){return t.value})),r.codec=e.getCodec(i),r.mimeType=e.getMimeType(i),r.contentProtection=e.getContentProtectionData(i),r.bitrateList=e.getBitrateListForAdaptation(i),r.selectionPriority=e.getSelectionPriority(i),r.contentProtection){var s=r.contentProtection.map((function(t){return e.getKID(t)})).filter((function(t){return null!==t}));if(s.length){var o=s[0];r.contentProtection.forEach((function(t){t.keyId=o}))}}return r.isText=e.getIsText(i),r.supplementalProperties=e.getSupplementalProperties(i),r.isFragmented=e.getIsFragmented(i),r.isEmbedded=!1,r}function C(t,e,n){t.id=e,t.index=100+parseInt(e.substring(2,3)),t.type=h.TEXT,t.codec="cea-608-in-SEI",t.isEmbedded=!0,t.isFragmented=!1,t.lang=n,t.roles=["caption"]}function D(t){var n,r,i=new s.default;return i.id=t.id,i.index=t.index,i.start=t.start,i.duration=t.duration,i.manifestInfo=(n=t.mpd,(r=new o.default).dvrWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=e.getDuration(n.manifest),r.isDynamic=e.getIsDynamic(n.manifest),r.serviceDescriptions=e.getServiceDescriptions(n.manifest),r.protocol=n.manifest.protocol,r),i.isLast=1===t.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function I(){if(!h)throw new Error("setConfig function has to be called previously")}function R(t){return l.length>0?l[0].mpd.manifest.Period_asArray[t]:null}function O(t,e,n){var r,i,a,s,o;if(t)for(r=t.AdaptationSet_asArray,s=0;s<r.length;s+=1)for(a=r[s].Representation_asArray,o=0;o<a.length;o+=1)if(e===(i=a[o]).id)return n?o:i;return null}return t={getBandwidthForRepresentation:function(t,e){var n;return(n=O(R(e),t))?n.bandwidth:null},getIndexForRepresentation:function(t,e){return function(t,e){var n=O(t,e,!0);return null!==n?n:-1}(R(e),t)},getMaxIndexForBufferType:function(t,n){return function(t,n){var r,i,a,s;if(!t||!n)return-1;for(i=t.AdaptationSet_asArray,s=0;s<i.length;s+=1)if(a=(r=i[s]).Representation_asArray,e.getIsTypeOf(r,n))return a.length;return-1}(R(n),t)},convertRepresentationToRepresentationInfo:function(t){if(t){var n=new i.default,r=e.getRepresentationFor(t.index,t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index]);return n.id=t.id,n.quality=t.index,n.bandwidth=e.getBandwidth(r),n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.mediaInfo=x(t.adaptation),n}return null},getStreamsInfo:function(t,e){var n=[],r=l;if(t&&(I(),r=b(t)),r.length>0){(!e||e>r.length)&&(e=r.length);for(var i=0;i<e;i++)n.push(D(r[i]))}return n},getMediaInfoForType:function(t,n){if(0===l.length||!t)return null;var r=A(t,l);if(!r)return null;var i=e.getAdaptationsForPeriod(r),a=m(t.index,n,t);return a?x(i[e.getIndexForAdaptation(a,l[0].mpd.manifest,t.index)]):null},getAllMediaInfoForType:_,getAdaptationForType:m,getRealAdaptation:function(t,n){var r,i,a=A(t,l);return r=n?n.id:null,l.length>0&&a&&(i=r?e.getAdaptationForId(r,l[0].mpd.manifest,a.index):e.getAdaptationForIndex(n?n.index:null,l[0].mpd.manifest,a.index)),i},getRealPeriodByIndex:function(t){return e.getRealPeriodForIndex(t,l[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(t){try{return e.getEssentialPropertiesForRepresentation(t)}catch(n){return[]}},getVoRepresentations:function(t){var n=w(t);return e.getRepresentationsForAdaptation(n)},getEventsFor:function(t,n){var r=[];if(l.length>0){var o=l[0].mpd.manifest;t instanceof s.default?r=e.getEventsForPeriod(A(t,l)):t instanceof a.default?r=e.getEventStreamForAdaptationSet(o,w(t)):t instanceof i.default&&(r=e.getEventStreamForRepresentation(o,n))}return r},getEvent:function(t,e,n,r){try{if(!t||!e||isNaN(n)||!r)return null;var i=t.scheme_id_uri,a=t.value;if(!e[i+"/"+a])return null;var s,o=new u.default,l=t.timescale||1,c=r.adaptation.period.start,d=e[i+"/"+a],f=isNaN(r.presentationTimeOffset)?isNaN(d.presentationTimeOffset)?0:d.presentationTimeOffset:r.presentationTimeOffset,h=t.presentation_time_delta/l;s=0===t.version?c+n-f+h:c-f+h;var p=t.event_duration,g=t.id,m=t.message_data;return o.eventStream=d,o.eventStream.value=a,o.eventStream.timescale=l,o.duration=p,o.id=g,o.calculatedPresentationTime=s,o.messageData=m,o.presentationTimeDelta=h,o}catch(y){return null}},getMpd:E,setConfig:function(t){t&&(t.constants&&(h=t.constants),t.cea608parser&&(p=t.cea608parser),t.errHandler&&e.setConfig({errHandler:t.errHandler}),t.BASE64&&e.setConfig({BASE64:t.BASE64}))},updatePeriods:function(t){if(!t)return null;I(),l=b(t)},getIsTextTrack:function(t){return e.getIsText(t)},getUTCTimingSources:function(){var t=S();return e.getUTCTimingSources(t)},getSuggestedPresentationDelay:function(){return e.getSuggestedPresentationDelay(l.length>0?l[0].mpd:null)},getAvailabilityStartTime:function(t){var n=E(t);return e.getAvailabilityStartTime(n)},getIsTypeOf:function(t,n){return e.getIsTypeOf(t,n)},getIsDynamic:function(t){var n=S(t);return e.getIsDynamic(n)},getDuration:function(t){var n=S(t);return e.getDuration(n)},getRegularPeriods:b,getLocation:function(t){return e.getLocation(t)},getPatchLocation:function(t){var n=e.getPatchLocation(t),r=e.getPublishTime(t);if(!n||!r)return null;if(n.hasOwnProperty("ttl")&&r){var i=1e3*parseFloat(n.ttl);if(r.getTime()+i<=(new Date).getTime())return null}return n.__text},getManifestUpdatePeriod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getManifestUpdatePeriod(t,n)},getPublishTime:function(t){return e.getPublishTime(t)},getIsDVB:function(t){return e.hasProfile(t,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(t){return n.getIsPatch(t)},getBaseURLsFromElement:function(t){return e.getBaseURLsFromElement(t)},getRepresentationSortFunction:function(){return e.getRepresentationSortFunction()},getCodec:function(t,n,r){return e.getCodec(t,n,r)},getPeriodById:function(t){if(!t||0===l.length)return null;var e=l.filter((function(e){return e.id===t}));return e&&e.length>0?e[0]:null},setCurrentMediaInfo:function(t,e,n){f[t]=f[t]||{},f[t][e]=f[t][e]||{},f[t][e]=n},isPatchValid:function(t,r){var i=e.getId(t),a=n.getMpdId(r),s=e.getPublishTime(t),o=n.getPublishTime(r),u=n.getOriginalPublishTime(r);return!!(i&&a&&i==a&&s&&u&&s.getTime()==u.getTime()&&o&&s.getTime()<o.getTime())},applyPatchToManifest:function(t,e){n.getPatchOperations(e).forEach((function(e){var n=e.getMpdTarget(t);if(null!==n){var r=n.name,i=n.target,a=n.leaf;if(e.xpath.findsAttribute())switch(e.action){case"add":case"replace":i[r]=e.value;break;case"remove":delete i[r]}else{var s=(i[r+"_asArray"]||[]).indexOf(a),o="prepend"===e.position||"before"===e.position;if(("remove"===e.action||"replace"===e.action)&&(delete i[r],-1!=s)){var u=i[r+"_asArray"];u.splice(s,1),u.length>1?i[r]=u:1==u.length?i[r]=u[0]:delete i[r+"_asArray"]}"add"!==e.action&&"replace"!==e.action||Object.keys(e.value).forEach((function(t){var n=e.value[t],a=i[t+"_asArray"]||[];0===a.length&&i[t]&&a.push(i[t]),0===a.length?a=n:a.splice.apply(a,[t==r&&-1!=s?s+(o?0:1)+("replace"==e.action?-1:0):o?0:a.length,0].concat(n)),i[t+"_asArray"]=a,i[t]=1==a.length?a[0]:a}))}}}))},areMediaInfosEqual:y,reset:T},e=Object(c.default)(g).getInstance(),n=Object(d.default)(g).getInstance(),T(),t}f.__dashjs_factory_name="DashAdapter",e.default=l.default.getSingletonFactory(f)},"./src/dash/DashHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/FragmentRequest.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/dash/utils/SegmentsUtils.js"),u=n("./src/dash/constants/DashConstants.js");function l(t){var e,n,a,l,c,d=(t=t||{}).eventBus,f=t.urlUtils,h=t.type,p=t.streamInfo,g=t.segmentsController,m=t.timelineConverter,y=t.baseURLController;function v(){return h}function _(){a=null}function b(t,e,n){var r,i,a=y.resolve(n.path);return a&&e!==a.url&&f.isRelative(e)?(r=a.url,i=a.serviceLocation,e&&(r=f.resolve(e,r))):r=e,!f.isRelative(r)&&(t.url=r,t.serviceLocation=i,!0)}function E(t,e){if(null==e)return null;var n=new r.default,a=e.representation,s=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].bandwidth,u=e.media;return u=Object(o.replaceTokenForTemplate)(u,"Number",e.replacementNumber),u=Object(o.replaceTokenForTemplate)(u,"Time",e.replacementTime),u=Object(o.replaceTokenForTemplate)(u,"Bandwidth",s),u=Object(o.replaceIDForTemplate)(u,a.id),u=Object(o.unescapeDollarsInTemplate)(u),n.mediaType=v(),n.type=i.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=e.mediaRange,n.startTime=e.presentationStartTime,n.mediaStartTime=e.mediaStartTime,n.duration=e.duration,n.timescale=a.timescale,n.availabilityStartTime=e.availabilityStartTime,n.availabilityEndTime=e.availabilityEndTime,n.wallStartTime=e.wallStartTime,n.quality=a.index,n.index=e.index,n.mediaInfo=t,n.adaptationIndex=a.adaptation.index,n.representationId=a.id,b(n,u,a)?n:void 0}function T(t,e,r){var i=null;if(!e||!e.segmentInfoType)return i;var s=g.getSegmentByTime(e,r);return s&&(a=s,n.debug("Index for time "+r+" is "+s.index),i=E(t,s)),i}function S(){n.debug("Dynamic stream complete"),c=!0}return e={initialize:function(t){l=t,c=!1,g.initialize(t)},getStreamId:function(){return p.id},getType:v,getStreamInfo:function(){return p},getInitRequest:function(t,e){return e?function(t,e,n){var a=new r.default,s=e.adaptation.period,u=s.start;if(a.mediaType=n,a.type=i.HTTPRequest.INIT_SEGMENT_TYPE,a.range=e.range,a.availabilityStartTime=m.calcAvailabilityStartTimeFromPresentationTime(u,e,l),a.availabilityEndTime=m.calcAvailabilityEndTimeFromPresentationTime(u+s.duration,e,l),a.quality=e.index,a.mediaInfo=t,a.representationId=e.id,b(a,e.initialization,e))return a.url=Object(o.replaceTokenForTemplate)(a.url,"Bandwidth",e.bandwidth),a}(t,e,v()):null},getSegmentRequestForTime:T,getCurrentIndex:function(){return a?a.index:-1},getNextSegmentRequest:function(t,e){var r=null;if(!e||!e.segmentInfoType)return null;var i=a?a.index+1:0,s=g.getSegmentByIndex(e,i,a?a.mediaStartTime:-1);if(s)r=E(t,s),a=s;else{if(l&&!c)return n.debug(v()+" No segment found at index: "+i+". Wait for next loop"),null;c=!0}return r},isLastSegmentRequested:function(t,e){if(!t||!a)return!1;if(c)return!0;if(!isFinite(t.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>e)return!1;if(t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=t.mediaFinishedInformation.numberOfSegments-1){if(!l||t.segmentInfoType===u.default.SEGMENT_TEMPLATE)return!0;if(l&&t.segmentInfoType===u.default.SEGMENT_LIST&&t.adaptation.period.nextPeriodId)return!0}return!!(l&&t.adaptation.period.nextPeriodId&&t.segmentInfoType===u.default.SEGMENT_TIMELINE&&t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){_(),d.off(s.default.DYNAMIC_TO_STATIC,S,e)},getNextSegmentRequestIdempotent:function(t,e){var n=g.getSegmentByIndex(e,a?a.index+1:0,a?a.mediaStartTime:-1);return n?E(t,n):null},getValidSeekTimeCloseToTargetTime:function(t,e,n,r){try{if(isNaN(t)||!e||!n)return NaN;if(t<0&&(t=0),isNaN(r)&&(r=.5),T(e,n,t))return t;for(var i=n.adaptation.period.start,a=n.adaptation.period.start+n.adaptation.period.duration,s=Math.min(t+r,a),o=Math.max(t-r,i),u=NaN,l=null;s<=a||o>=i;){var c=null,d=null;if(s<=a&&(c=T(e,n,s)),o>=i&&(d=T(e,n,o)),d){u=o,l=d;break}if(c){u=s,l=c;break}s+=r,o-=r}if(l){var f=l.startTime+l.duration;return t>=l.startTime&&f-t>r?t:t<l.startTime?l.startTime:Math.min(f-r,u)}return u}catch(h){return NaN}}},n=t.debug.getLogger(e),_(),d.on(s.default.DYNAMIC_TO_STATIC,S,e),e}l.__dashjs_factory_name="DashHandler",e.default=a.default.getClassFactory(l)},"./src/dash/DashMetrics.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/dash/utils/Round10.js"),u=n("./src/streaming/models/MetricsModel.js"),l=n("./src/core/Utils.js"),c=n("./src/streaming/vo/metrics/PlayList.js");function d(t){var e,n,a,d,f=this.context,h=(t=t||{}).metricsModel;function p(t){var e=h.getMetricsFor(t,!0);if(!e)return null;var n,r=e.HttpList,i=null;if(!r||r.length<=0)return null;for(n=r.length-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function g(t){var e=h.getMetricsFor(t,!0);return e&&e.HttpList?e.HttpList:[]}function m(t,e){if(!t)return null;var n=t[e];return n&&0!==n.length?n[n.length-1]:null}return e={getCurrentRepresentationSwitch:function(t){return m(h.getMetricsFor(t,!0),s.default.TRACK_SWITCH)},getCurrentBufferState:function(t){return m(h.getMetricsFor(t,!0),s.default.BUFFER_STATE)},getCurrentBufferLevel:function(t){var e=m(h.getMetricsFor(t,!0),s.default.BUFFER_LEVEL);return e?o.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:g,getCurrentDroppedFrames:function(){return m(h.getMetricsFor(r.default.VIDEO,!0),s.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(t){return m(h.getMetricsFor(t,!0),s.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(t){return m(t?h.getMetricsFor(t,!0):h.getMetricsFor(r.default.VIDEO,!0)||h.getMetricsFor(r.default.AUDIO,!0),s.default.DVR_INFO)},getCurrentManifestUpdate:function(){return m(h.getMetricsFor(r.default.STREAM),s.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(t,e){if(!e)return null;var n={},r=p(t);r&&(n=l.default.parseHttpHeaders(r._responseHeaders));var i=n[e.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(t){if(!t)return null;var e,n,a,s={};for(a=(e=g(r.default.STREAM)).length-1;a>=0;a--)if((n=e[a]).type===i.HTTPRequest.MPD_TYPE){s=l.default.parseHttpHeaders(n._responseHeaders);break}var o=s[t.toLowerCase()];return void 0===o?null:o},addRepresentationSwitch:function(t,e,n,r,i){h.addRepresentationSwitch(t,e,n,r,i)},addDVRInfo:function(t,e,n,r){h.addDVRInfo(t,e,n,r)},updateManifestUpdateInfo:function(t){var e=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(e,t)},addManifestUpdateStreamInfo:function(t){if(t){var e=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(e,t.id,t.index,t.start,t.duration)}},addManifestUpdateRepresentationInfo:function(t,e){if(t){var n=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(n,t.id,t.index,t.streamIndex,e,t.presentationTimeOffset,t.startNumber,t.fragmentInfoType)}},addManifestUpdate:function(t){h.addManifestUpdate(r.default.STREAM,t.type,t.requestStartDate,t.requestEndDate)},addHttpRequest:function(t,e,n,r,i){h.addHttpRequest(t.mediaType,null,t.type,t.url,t.quality,e,t.serviceLocation||null,t.range||null,t.requestStartDate,t.firstByteDate,t.requestEndDate,n,t.duration,r,i)},addSchedulingInfo:function(t,e){h.addSchedulingInfo(t.mediaType,new Date,t.type,t.startTime,t.availabilityStartTime,t.duration,t.quality,t.range,e)},addRequestsQueue:function(t,e,n){h.addRequestsQueue(t,e,n)},addBufferLevel:function(t,e,n){h.addBufferLevel(t,e,n)},addBufferState:function(t,e,n){h.addBufferState(t,e,n)},addDroppedFrames:function(t){h.addDroppedFrames(r.default.VIDEO,t)},addPlayList:function(){d&&(h.addPlayList(d),d=null)},addDVBErrors:function(t){h.addDVBErrors(t)},createPlaylistMetrics:function(t,e){(d=new c.PlayList).start=new Date,d.mstart=t,d.starttype=e},createPlaylistTraceMetrics:function(t,e,r){!0===n&&(n=!1,(a=new c.PlayListTrace).representationid=t,a.start=new Date,a.mstart=e,a.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(t){if(a)for(var e in a)a[e]=t[e]},pushPlayListTraceMetrics:function(t,e){if(!1===n&&d&&a&&a.start){var r=a.start,i=t.getTime()-r.getTime();a.duration=i,a.stopreason=e,d.trace.push(a),n=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||Object(u.default)(f).getInstance({settings:t.settings}),n=!0,a=null,d=null,e}d.__dashjs_factory_name="DashMetrics",e.default=a.default.getSingletonFactory(d)},"./src/dash/SegmentBaseLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/Segment.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/FragmentRequest.js"),o=n("./src/streaming/net/URLLoader.js");function u(){var t,e,n,a,u,l,c,d,f,h,p,g,m,y=this.context;function v(t,e,n){n({segments:t,representation:e,error:t?void 0:new i.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function _(t){if(t.url){var e=new s.default;return e.setInfo(t),e}}return t={setConfig:function(r){r.baseURLController&&(m=r.baseURLController),r.dashMetrics&&(l=r.dashMetrics),r.mediaPlayerModel&&(c=r.mediaPlayerModel),r.errHandler&&(n=r.errHandler),r.boxParser&&(a=r.boxParser),r.debug&&(e=r.debug.getLogger(t)),r.requestModifier&&(u=r.requestModifier),r.errors&&(f=r.errors),r.urlUtils&&(g=r.urlUtils),r.constants&&(h=r.constants),r.dashConstants&&(p=r.dashConstants)},initialize:function(){d=Object(o.default)(y).create({errHandler:n,dashMetrics:l,mediaPlayerModel:c,requestModifier:u,boxParser:a,errors:f,urlUtils:g,constants:h,dashConstants:p})},loadInitialization:function(t,n){return new Promise((function(r){!function t(n,r,i,s){var o=null,u=n?m.resolve(n.path):null,l=s||{init:!0,url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};e.debug("Start searching for initialization.");var c=_(l);d.load({request:c,success:function(e){if(l.bytesLoaded=l.range.end,!(o=a.findInitRange(e)))return l.range.end=l.bytesLoaded+l.bytesToLoad,t(n,r,i,l);n.range=o,i(n)},error:function(){i(n)}}),e.debug("Perform init search: "+l.url)}(t,n,r)}))},loadSegments:function(t,n,i){return new Promise((function(s){!function t(n,i,s,o,u,l){if(s&&(void 0===s.start||void 0===s.end)){var c=s?s.toString().split("-"):null;s=c?{start:parseFloat(c[0]),end:parseFloat(c[1])}:null}u=u||v;var f=null,h=null,p=!!s,g=n?m.resolve(n.path):null,y={init:!1,url:g?g.url:void 0,range:p?s:{start:0,end:1500},searching:!p,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:i},b=_(y);d.load({request:b,success:function(s){var l=y.bytesToLoad,c=s.byteLength;if(y.bytesLoaded=y.range.end-y.range.start,f=a.parse(s),(h=f.getBox("sidx"))&&h.isComplete){var d,p,g=h.references;if(null!=g&&g.length>0&&(d=1===g[0].reference_type),d){var m,v,_,b;e.debug("Initiate multiple SIDX load."),y.range.end=y.range.start+h.size;var E=[],T=0,S=(h.offset||y.range.start)+h.size,w=function(t){t?(E=E.concat(t),++T>=v&&(E.sort((function(t,e){return t.startTime-e.startTime<0?-1:0})),u(E,n,o))):u(null,n,o)};for(m=0,v=g.length;m<v;m++)_=S,b=S+g[m].referenced_size-1,S+=g[m].referenced_size,t(n,i,{start:_,end:b},o,w,y)}else e.debug("Parsing segments from SIDX. representation "+i+" - id: "+n.id+" for range : "+y.range.start+" - "+y.range.end),p=function(t,e){for(var n,i,a,s=t.references,o=s.length,u=t.timescale,l=t.earliest_presentation_time,c=e.range.start+t.offset+t.first_offset+t.size,d=[],f=0;f<o;f++)i=s[f].subsegment_duration,a=s[f].referenced_size,(n=new r.default).duration=i,n.startTime=l,n.timescale=u,n.mediaRange=c+"-"+(c+a-1),d.push(n),l+=i,c+=a;return d}(h,y),u(p,n,o)}else{if(h)y.range.start=h.offset||y.range.start,y.range.end=y.range.start+(h.size||l);else{if(c<y.bytesLoaded)return void u(null,n,o);var A=f.getLastBox();A&&A.size?(y.range.start=A.offset+A.size,y.range.end=y.range.start+l):y.range.end+=l}t(n,i,y.range,o,null,y)}},error:function(){u(null,n,o)}}),e.debug("Perform SIDX load for type ".concat(i," : ").concat(y.url," with range ").concat(y.range.start," - ").concat(y.range.end))}(t,n,i,s)}))},reset:function(){d&&(d.abort(),d=null)}}}u.__dashjs_factory_name="SegmentBaseLoader",e.default=a.default.getSingletonFactory(u)},"./src/dash/WebmSegmentBaseLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/EBMLParser.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/dash/vo/Segment.js"),o=n("./src/streaming/vo/FragmentRequest.js"),u=n("./src/streaming/net/URLLoader.js"),l=n("./src/streaming/vo/DashJSError.js");function c(){var t,e,n,a,c,d,f,h,p,g,m=this.context;function y(t){var e=new o.default;return e.setInfo(t),e}return t={setConfig:function(n){if(!(n.baseURLController&&n.dashMetrics&&n.mediaPlayerModel&&n.errHandler))throw new Error(i.default.MISSING_CONFIG_ERROR);g=n.baseURLController,d=n.dashMetrics,f=n.mediaPlayerModel,a=n.errHandler,p=n.errors,e=n.debug.getLogger(t),c=n.requestModifier},initialize:function(){h=Object(u.default)(m).create({errHandler:a,dashMetrics:d,mediaPlayerModel:f,requestModifier:c,errors:p})},loadInitialization:function(t,n){return new Promise((function(r){var i=null,a=t?g.resolve(t.path):null,s=t?t.range.split("-"):null,o={range:{start:s?parseFloat(s[0]):null,end:s?parseFloat(s[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:n};e.info("Start loading initialization."),i=y(o),h.load({request:i,success:function(){r(t)},error:function(){r(t)}}),e.debug("Perform init load: "+o.url)}))},loadSegments:function(t,i,a){return new Promise((function(o){var u=null,c=t?g.resolve(t.path):null,d=c?c.url:void 0;u=y({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:u,url:d,init:!1,mediaType:i}),e.debug("Parsing ebml header"),h.load({request:u,success:function(i){!function(t,i,a,o){if(t&&0!==t.byteLength){var u,l,c,d,f=Object(r.default)(m).create({data:t}),p=a?a.split("-"):null,g=null,v={url:i,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:g};for(e.debug("Parse EBML header: "+v.url),f.skipOverElement(n.EBML),f.consumeTag(n.Segment),c=f.getMatroskaCodedNum(),c+=f.getPos(),d=f.getPos();f.moreData()&&!f.consumeTagAndSize(n.Segment.Info,!0);)if(!(f.skipOverElement(n.Segment.SeekHead,!0)||f.skipOverElement(n.Segment.Tracks,!0)||f.skipOverElement(n.Segment.Cues,!0)||f.skipOverElement(n.Void,!0)))throw new Error("no valid top level element found");for(;void 0===u;){var _=f.getMatroskaCodedNum(!0),b=f.getMatroskaCodedNum();switch(_){case n.Segment.Info.Duration.tag:u=f[n.Segment.Info.Duration.parse](b);break;default:f.setPos(f.getPos()+b)}}g=y(v),h.load({request:g,success:function(t){l=function(t,i,a,o){var u,l,c,d,f;for(l=[],d=0,f=(u=function(t){var e,i,a=[],s=Object(r.default)(m).create({data:t});for(s.consumeTagAndSize(n.Segment.Cues);s.moreData()&&s.consumeTagAndSize(n.Segment.Cues.CuePoint,!0);){for((e={}).CueTime=s.parseTag(n.Segment.Cues.CuePoint.CueTime),e.CueTracks=[];s.moreData()&&s.consumeTag(n.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=s.getMatroskaCodedNum(),u=s.getPos();if((i={}).Track=s.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=s.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),e.CueTracks.push(i),s.setPos(u+o)}if(0===e.CueTracks.length)throw new Error("Mandatory cuetrack not found");a.push(e)}if(0===a.length)throw new Error("mandatory cuepoint not found");return a}(t)).length;d<f;d+=1)(c=new s.default).duration=d<u.length-1?u[d+1].CueTime-u[d].CueTime:o-u[d].CueTime,c.startTime=u[d].CueTime,c.timescale=1e3,c.mediaRange=u[d].CueTracks[0].ClusterPosition+i+"-"+(d<u.length-1?u[d+1].CueTracks[0].ClusterPosition+i-1:a-1),l.push(c);return e.debug("Parsed cues: "+l.length+" cues."),l}(t,d,c,u),o(l)},error:function(){e.error("Download Error: Cues "+v.url),o(null)}}),e.debug("Perform cues load: "+v.url+" bytes="+v.range.start+"-"+v.range.end)}else o(null)}(i,d,a,(function(e){o({segments:e,representation:t,error:e?void 0:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){o({representation:t,error:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){h&&(h.abort(),h=null)}},n={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}c.__dashjs_factory_name="WebmSegmentBaseLoader",e.default=a.default.getSingletonFactory(c)},"./src/dash/constants/DashConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/dash/controllers/RepresentationController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/dash/utils/SegmentsUtils.js");function o(t){var e,n,i,o,u,l=(t=t||{}).eventBus,c=t.events,d=t.abrController,f=t.dashMetrics,h=t.playbackController,p=t.timelineConverter,g=t.type,m=t.streamInfo,y=t.dashConstants,v=t.segmentsController,_=t.isDynamic;function b(){return g}function E(){if(!(d&&f&&h&&p))throw new Error(r.default.MISSING_CONFIG_ERROR)}function T(){return i}function S(){return u}function w(){n=null,i=!0,o=[]}function A(t){return new Promise((function(e,n){var r=t.hasInitialization(),i=t.hasSegments(),a=[];a.push(v.updateInitData(t,r)),a.push(v.updateSegmentData(t,i)),Promise.all(a).then((function(n){var r;n[0]&&!n[0].error&&(t=function(t,e){return e&&!e.error&&e.representation?e.representation:t}(t,n[0])),n[1]&&!n[1].error&&(t=function(t,e){if(e&&!e.error){var n,r,i,a,o=e.segments,u=[],l=0;for(n=0,r=o?o.length:0;n<r;n++)i=o[n],(a=Object(s.getTimeBasedSegment)(p,_,t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(u.push(a),a=null,l++);return u.length>0&&(t.segments=u),t}}(t,n[1])),(r=t).mediaFinishedInformation=v.getMediaFinishedInformation(r),function(t){if(T()){var e,n=f.getCurrentManifestUpdate(),r=!1;if(n){for(var i=0;i<n.representationInfo.length;i++)if((e=n.representationInfo[i]).index===t.index&&e.mediaType===b()){r=!0;break}r||f.addManifestUpdateRepresentationInfo(t,b())}if(function(){for(var t=0,e=o.length;t<e;t++){var n=o[t].segmentInfoType;if(!o[t].hasInitialization()||(n===y.SEGMENT_BASE||n===y.BASE_URL)&&!o[t].segments)return!1}return!0}()){d.setPlaybackQuality(g,m,o.indexOf(u));var a=f.getCurrentDVRInfo(g);a&&f.updateManifestUpdateInfo({latency:a.range.end-h.getTime()}),f.getCurrentRepresentationSwitch(S().adaptation.type)||x(),D()}}}(t),e()})).catch((function(t){n(t)}))}))}function x(){E();var t=new Date,e=S(),n=1e3*h.getTime();e&&f.addRepresentationSwitch(e.adaptation.type,t,n,e.id),l.trigger(a.default.REPRESENTATION_SWITCH,{mediaType:g,streamId:m.id,currentRepresentation:e,numberOfRepresentations:o.length},{streamId:m.id,mediaType:g})}function C(t){return null==t||t>=o.length?null:o[t]}function D(t){i=!1,l.trigger(c.DATA_UPDATE_COMPLETED,{data:n,currentRepresentation:u,error:t},{streamId:m.id,mediaType:g})}function I(t){u=t}function R(t){if(t.newDuration){var e=S();e&&e.adaptation.period&&(e.adaptation.period.duration=t.newDuration)}}return e={getStreamId:function(){return m.id},getType:b,getData:function(){return n},isUpdating:T,updateData:function(t,e,a,s,u){if(E(),i=!0,o=e,I(C(u)),n=t,a!==r.default.VIDEO&&a!==r.default.AUDIO&&(a!==r.default.TEXT||!s))return D(),Promise.resolve();for(var l=[],c=0,d=o.length;c<d;c++)l.push(A(o[c]));return Promise.all(l)},getCurrentRepresentation:S,getRepresentationForQuality:C,prepareQualityChange:function(t){I(C(t)),x()},reset:function(){l.off(a.default.MANIFEST_VALIDITY_CHANGED,R,e),w()}},w(),l.on(a.default.MANIFEST_VALIDITY_CHANGED,R,e),e}o.__dashjs_factory_name="RepresentationController",e.default=i.default.getClassFactory(o)},"./src/dash/controllers/SegmentBaseController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/SegmentBaseLoader.js"),a=n("./src/dash/WebmSegmentBaseLoader.js");function s(t){var e,n,r,s=this.context,o=(t=t||{}).eventBus,u=t.events,l=t.dashMetrics,c=t.mediaPlayerModel,d=t.errHandler,f=t.baseURLController,h=t.debug,p=t.boxParser,g=t.requestModifier,m=t.errors;function y(t){return"webm"===(t?t.split("/")[1]:"").toLowerCase()}return e={initialize:function(){n.initialize(),r.initialize()},getSegmentBaseInitSegment:function(t){return y(t.representation.mimeType)?r.loadInitialization(t.representation,t.mediaType):n.loadInitialization(t.representation,t.mediaType)},getSegmentList:function(t){return y(t.mimeType)?r.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null):n.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null)},reset:function(){n.reset(),r.reset()}},n=Object(i.default)(s).getInstance(),r=Object(a.default)(s).getInstance(),n.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:c,errHandler:d,eventBus:o,events:u,errors:m,debug:h,boxParser:p,requestModifier:g}),r.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:c,errHandler:d,eventBus:o,events:u,errors:m,debug:h,requestModifier:g}),e}s.__dashjs_factory_name="SegmentBaseController";var o=r.default.getSingletonFactory(s);e.default=o},"./src/dash/controllers/SegmentsController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/utils/TimelineSegmentsGetter.js"),a=n("./src/dash/utils/TemplateSegmentsGetter.js"),s=n("./src/dash/utils/ListSegmentsGetter.js"),o=n("./src/dash/utils/SegmentBaseGetter.js");function u(t){var e,n,r=this.context,u=(t=t||{}).dashConstants,l=t.type,c=t.segmentBaseController;function d(t){return t?t.segments?n[u.SEGMENT_BASE]:n[t.segmentInfoType]:null}return e={initialize:function(e){n[u.SEGMENT_TIMELINE]=Object(i.default)(r).create(t,e),n[u.SEGMENT_TEMPLATE]=Object(a.default)(r).create(t,e),n[u.SEGMENT_LIST]=Object(s.default)(r).create(t,e),n[u.SEGMENT_BASE]=Object(o.default)(r).create(t,e)},updateInitData:function(t,e){return e?Promise.resolve():c.getSegmentBaseInitSegment({representation:t,mediaType:l})},updateSegmentData:function(t,e){return e?Promise.resolve():c.getSegmentList({mimeType:t.mimeType,representation:t,mediaType:l})},getSegmentByIndex:function(t,e,n){var r=d(t);return r?r.getSegmentByIndex(t,e,n):null},getSegmentByTime:function(t,e){var n=d(t);return n?n.getSegmentByTime(t,e):null},getMediaFinishedInformation:function(t){var e=d(t);return e?e.getMediaFinishedInformation(t):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},e}u.__dashjs_factory_name="SegmentsController";var l=r.default.getClassFactory(u);e.default=l},"./src/dash/models/DashManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/dash/vo/Representation.js"),s=n("./src/dash/vo/AdaptationSet.js"),o=n("./src/dash/vo/Period.js"),u=n("./src/dash/vo/Mpd.js"),l=n("./src/dash/vo/UTCTiming.js"),c=n("./src/dash/vo/Event.js"),d=n("./src/dash/vo/BaseURL.js"),f=n("./src/dash/vo/EventStream.js"),h=n("./src/streaming/utils/ObjectUtils.js"),p=n("./src/streaming/utils/URLUtils.js"),g=n("./src/core/FactoryMaker.js"),m=n("./src/core/Debug.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js"),_=n("./src/streaming/thumbnail/ThumbnailTracks.js");function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return E(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(){var t,e,n,g,E=this.context,T=Object(p.default)(E).getInstance(),S=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function w(t,e){if(!t)throw new Error("adaptation is not defined");if(!e)throw new Error("type is not defined");if(t.Representation_asArray&&t.Representation_asArray.length){var n=M(t.Representation_asArray[0]);if(n&&n.length>0&&_.THUMBNAILS_SCHEME_ID_URIS.indexOf(n[0].schemeIdUri)>=0)return e===r.default.IMAGE}if(t.ContentComponent_asArray&&t.ContentComponent_asArray.length>0){if(t.ContentComponent_asArray.length>1)return e===r.default.MUXED;if(t.ContentComponent_asArray[0].contentType===e)return!0}var a=e===r.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(e);if(t.Representation_asArray&&t.Representation_asArray.length&&a.test(t.Representation_asArray[0].codecs))return!0;if(t.hasOwnProperty(i.default.MIME_TYPE))return a.test(t.mimeType);if(t.Representation_asArray)for(var s,o=0;o<t.Representation_asArray.length;o++)if((s=t.Representation_asArray[o]).hasOwnProperty(i.default.MIME_TYPE))return a.test(s.mimeType);return!1}function A(t){if(!t)throw new Error("adaptation is not defined");if(t.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(i.default.SEGMENT_TIMELINE)||t.hasOwnProperty(i.default.SEGMENT_LIST)||t.hasOwnProperty(i.default.SEGMENT_BASE))return!0;if(t.Representation_asArray&&t.Representation_asArray.length>0){var e=t.Representation_asArray[0];if(e.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(i.default.SEGMENT_TIMELINE)||e.hasOwnProperty(i.default.SEGMENT_LIST)||e.hasOwnProperty(i.default.SEGMENT_BASE))return!0}return!1}function x(t){return w(t,r.default.VIDEO)}function C(t){return w(t,r.default.TEXT)}function D(t){return w(t,r.default.IMAGE)}function I(t){return t&&Array.isArray(t.Representation_asArray)&&t.Representation_asArray.sort((function(t,e){return t.bandwidth-e.bandwidth})),t}function R(t,e){return t&&t.Period_asArray&&S(e)&&t.Period_asArray[e]?t.Period_asArray[e].AdaptationSet_asArray:[]}function O(t){return t&&t.Period_asArray?t.Period_asArray:[]}function P(t){var e=!1;return t&&t.hasOwnProperty("type")&&(e=t.type===i.default.DYNAMIC),e}function M(t){return t&&t.EssentialProperty_asArray&&t.EssentialProperty_asArray.length?t.EssentialProperty_asArray.map((function(t){return{schemeIdUri:t.schemeIdUri,value:t.value}})):null}function L(t){if(!t||!t.S_asArray)return NaN;var e=t.S_asArray[0],n=t.S_asArray[1];return e.hasOwnProperty("d")?e.d:n.t-e.t}function N(t,e){if(!t)throw new Error("Period cannot be null or undefined");var n=o.default.DEFAULT_ID+"_"+e;return t.hasOwnProperty(i.default.ID)&&t.id.length>0&&"__proto__"!==t.id&&(n=t.id),n}function k(t,e){var n,a=[];if(!t)return a;for(n=0;n<t.length;n++){var s=new f.default;if(s.timescale=1,s.representation=e,!t[n].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");s.schemeIdUri=t[n].schemeIdUri,t[n].hasOwnProperty(i.default.TIMESCALE)&&(s.timescale=t[n].timescale),t[n].hasOwnProperty(i.default.VALUE)&&(s.value=t[n].value),a.push(s)}return a}function F(t){var e=[],n=!1;return(t.BaseURL_asArray||[t.baseUri]).some((function(r){if(r){var a=new d.default,s=r.__text||r;return T.isRelative(s)&&(n=!0,t.baseUri&&(s=T.resolve(s,t.baseUri))),a.url=s,a.serviceLocation=r.hasOwnProperty(i.default.SERVICE_LOCATION)&&r.serviceLocation.length?r.serviceLocation:s,r.hasOwnProperty(i.default.DVB_PRIORITY)&&(a.dvb_priority=r[i.default.DVB_PRIORITY]),r.hasOwnProperty(i.default.DVB_WEIGHT)&&(a.dvb_weight=r[i.default.DVB_WEIGHT]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=r[i.default.AVAILABILITY_TIME_OFFSET]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==r[i.default.AVAILABILITY_TIME_COMPLETE]),e.push(a),n}})),e}return t={getIsTypeOf:w,getIsText:C,getIsFragmented:A,getLanguageForAdaptation:function(t){var e="";return t&&t.hasOwnProperty(i.default.LANG)&&(e=t.lang.replace(/[^A-Za-z0-9-]/g,"")),e},getViewpointForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.VIEWPOINT)?t.Viewpoint:null},getRolesForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.ROLE_ASARRAY)?t.Role_asArray:[]},getAccessibilityForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?t.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(t){return t&&t.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(t){return t&&t.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(t,e,n){var r=R(e,n);return r.length>0&&S(t)?r[t]:null},getIndexForAdaptation:function(t,e,n){if(!t)return-1;for(var r=R(e,n),i=0;i<r.length;i++)if(Object(h.default)(E).getInstance().areEqual(r[i],t))return i;return-1},getAdaptationForId:function(t,e,n){var r,a,s=R(e,n);for(r=0,a=s.length;r<a;r++)if(s[r].hasOwnProperty(i.default.ID)&&s[r].id===t)return s[r];return null},getAdaptationsForType:function(t,e,n){var r,i,a=R(t,e),s=[];for(r=0,i=a.length;r<i;r++)w(a[r],n)&&s.push(I(a[r]));return s},getRealPeriods:O,getRealPeriodForIndex:function(t,e){var n=O(e);return n.length>0&&S(t)?n[t]:null},getCodec:function(t,e,n){var r=null;if(t&&t.Representation_asArray&&t.Representation_asArray.length>0){var i=S(e)&&e>=0&&e<t.Representation_asArray.length?t.Representation_asArray[e]:t.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getSelectionPriority:function(t){try{var e=t&&void 0!==t.selectionPriority?parseInt(t.selectionPriority):1;return isNaN(e)?1:e}catch(n){return 1}},getMimeType:function(t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0?t.Representation_asArray[0].mimeType:null},getKID:function(t){return t&&t.hasOwnProperty(i.default.CENC_DEFAULT_KID)?t[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(t){if(!t||!Array.isArray(t.Label_asArray))return[];for(var e=[],n=0;n<t.Label_asArray.length;n++)e.push({lang:t.Label_asArray[n].lang,text:t.Label_asArray[n].__text||t.Label_asArray[n]});return e},getContentProtectionData:function(t){return t&&t.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==t.ContentProtection_asArray.length?t.ContentProtection_asArray:null},getIsDynamic:P,getId:function(t){return t&&t[i.default.ID]||null},hasProfile:function(t,e){var n=!1;return t&&t.profiles&&t.profiles.length>0&&(n=-1!==t.profiles.indexOf(e)),n},getDuration:function(t){return t&&t.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?t.mediaPresentationDuration:t&&"dynamic"==t.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(t){return t&&t.bandwidth?t.bandwidth:NaN},getManifestUpdatePeriod:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return t&&t.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(n=t.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-e,1)},getPublishTime:function(t){return t&&t.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(t[i.default.PUBLISH_TIME]):null},getRepresentationCount:function(t){return t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray.length:0},getBitrateListForAdaptation:function(t){var e=I(t);return(e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map((function(t){return{bandwidth:t.bandwidth,width:t.width||0,height:t.height||0,scanType:t.scanType||null,id:t.id||null}}))},getRepresentationFor:function(t,e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0&&S(t)?e.Representation_asArray[t]:null},getRepresentationsForAdaptation:function(t){var e,n,r,s=[],o=function(t){if(t&&t.period&&S(t.period.index)){var e=t.period.mpd.manifest.Period_asArray[t.period.index];if(e&&e.AdaptationSet_asArray&&S(t.index))return I(e.AdaptationSet_asArray[t.index])}}(t);if(o&&o.Representation_asArray){if(t&&t.period&&S(t.period.index)){var u=F(t.period.mpd.manifest);u&&(n=u[0])}for(var l=0,c=o.Representation_asArray.length;l<c;++l){var d=o.Representation_asArray[l],f=new a.default;if(f.index=l,f.adaptation=t,d.hasOwnProperty(i.default.ID)&&(f.id=d.id),d.hasOwnProperty(i.default.CODECS)&&(f.codecs=d.codecs),d.hasOwnProperty(i.default.MIME_TYPE)&&(f.mimeType=d[i.default.MIME_TYPE]),d.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(f.codecPrivateData=d.codecPrivateData),d.hasOwnProperty(i.default.BANDWITH)&&(f.bandwidth=d.bandwidth),d.hasOwnProperty(i.default.WIDTH)&&(f.width=d.width),d.hasOwnProperty(i.default.HEIGHT)&&(f.height=d.height),d.hasOwnProperty(i.default.SCAN_TYPE)&&(f.scanType=d.scanType),d.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(f.maxPlayoutRate=d.maxPlayoutRate),d.hasOwnProperty(i.default.SEGMENT_BASE)?(e=d.SegmentBase,f.segmentInfoType=i.default.SEGMENT_BASE):d.hasOwnProperty(i.default.SEGMENT_LIST)?f.segmentInfoType=(e=d.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?i.default.SEGMENT_TIMELINE:i.default.SEGMENT_LIST:d.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?(f.segmentInfoType=(e=d.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?i.default.SEGMENT_TIMELINE:i.default.SEGMENT_TEMPLATE,e.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(f.initialization=e.initialization.split("$Bandwidth$").join(d.bandwidth).split("$RepresentationID$").join(d.id))):f.segmentInfoType=i.default.BASE_URL,f.essentialProperties=M(d),e){if(e.hasOwnProperty(i.default.INITIALIZATION)){var h=e.Initialization;h.hasOwnProperty(i.default.SOURCE_URL)&&(f.initialization=h.sourceURL),h.hasOwnProperty(i.default.RANGE)&&(f.range=h.range)}else C(o)&&A(o)&&o.mimeType&&-1===o.mimeType.indexOf("application/mp4")&&(f.range=0);e.hasOwnProperty(i.default.TIMESCALE)&&(f.timescale=e.timescale),e.hasOwnProperty(i.default.DURATION)?f.segmentDuration=e.duration/f.timescale:d.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(e=d.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)&&(f.segmentDuration=L(e.SegmentTimeline)/f.timescale),e.hasOwnProperty(i.default.MEDIA)&&(f.media=e.media),e.hasOwnProperty(i.default.START_NUMBER)&&(f.startNumber=e.startNumber),e.hasOwnProperty(i.default.INDEX_RANGE)&&(f.indexRange=e.indexRange),e.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=e.presentationTimeOffset/f.timescale),e.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?f.availabilityTimeOffset=e.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(f.availabilityTimeOffset=n.availabilityTimeOffset),e.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?f.availabilityTimeComplete="false"!==e.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(f.availabilityTimeComplete=n.availabilityTimeComplete)}f.MSETimeOffset=(r=f).adaptation.period.start-r.presentationTimeOffset,f.path=[t.period.index,t.index,l],s.push(f)}}return s},getAdaptationsForPeriod:function(t){var n,a,o,u=t&&S(t.index)?t.mpd.manifest.Period_asArray[t.index]:null,l=[];if(u&&u.AdaptationSet_asArray)for(o=0;o<u.AdaptationSet_asArray.length;o++)a=u.AdaptationSet_asArray[o],n=new s.default,a.hasOwnProperty(i.default.ID)&&(n.id=a.id),n.index=o,n.period=t,w(a,r.default.MUXED)?n.type=r.default.MUXED:w(a,r.default.AUDIO)?n.type=r.default.AUDIO:x(a)?n.type=r.default.VIDEO:C(a)?n.type=r.default.TEXT:D(a)?n.type=r.default.IMAGE:e.warn("Unknown Adaptation stream type"),l.push(n);return l},getRegularPeriods:function(t){var a,s,u=!!t&&P(t.manifest),l=[],c=null,d=null,f=null,h=null;for(s=0,a=t&&t.manifest&&t.manifest.Period_asArray?t.manifest.Period_asArray.length:0;s<a;s++)(d=t.manifest.Period_asArray[s]).hasOwnProperty(i.default.START)?(h=new o.default).start=d.start:null!==c&&c.hasOwnProperty(i.default.DURATION)&&null!==f?(h=new o.default).start=parseFloat((f.start+f.duration).toFixed(5)):0!==s||u||((h=new o.default).start=0),null!==f&&isNaN(f.duration)&&(null!==h?f.duration=parseFloat((h.start-f.start).toFixed(5)):e.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==h&&(h.id=N(d,s),h.index=s,h.mpd=t,d.hasOwnProperty(i.default.DURATION)&&(h.duration=d.duration),f&&(f.nextPeriodId=h.id),l.push(h),c=d,f=h),d=null,h=null;return 0===l.length||null!==f&&isNaN(f.duration)&&(f.duration=parseFloat((function(t){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var e,i=P(t.mpd.manifest);return t.mpd.manifest.mediaPresentationDuration?e=t.mpd.manifest.mediaPresentationDuration:t.duration?e=t.duration:i?e=Number.POSITIVE_INFINITY:n.error(new y.default(v.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",t)),e}(f)-f.start).toFixed(5))),l},getMpd:function(t){var e=new u.default;return t&&(e.manifest=t,t.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?e.availabilityStartTime=new Date(t.availabilityStartTime.getTime()):t.loadedTime&&(e.availabilityStartTime=new Date(t.loadedTime.getTime())),t.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(e.availabilityEndTime=new Date(t.availabilityEndTime.getTime())),t.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(e.minimumUpdatePeriod=t.minimumUpdatePeriod),t.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(e.mediaPresentationDuration=t.mediaPresentationDuration),t.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)&&(e.suggestedPresentationDelay=t.suggestedPresentationDelay),t.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(e.timeShiftBufferDepth=t.timeShiftBufferDepth),t.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(e.maxSegmentDuration=t.maxSegmentDuration),t.hasOwnProperty(i.default.PUBLISH_TIME)&&(e.publishTime=new Date(t.publishTime))),e},getEventsForPeriod:function(t){var e,n,a=t&&t.mpd&&t.mpd.manifest?t.mpd.manifest:null,s=a?a.Period_asArray:null,o=s&&t&&S(t.index)?s[t.index].EventStream_asArray:null,u=[];if(o)for(e=0;e<o.length;e++){var l=new f.default;if(l.period=t,l.timescale=1,!o[e].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=o[e][r.default.SCHEME_ID_URI],o[e].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=o[e][i.default.TIMESCALE]),o[e].hasOwnProperty(i.default.VALUE)&&(l.value=o[e][i.default.VALUE]),o[e].hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=o[e][i.default.PRESENTATION_TIME_OFFSET]),n=0;o[e].Event_asArray&&n<o[e].Event_asArray.length;n++){var d=o[e].Event_asArray[n],h=new c.default;h.presentationTime=0,h.eventStream=l,d.hasOwnProperty(i.default.PRESENTATION_TIME)&&(h.presentationTime=d.presentationTime,h.calculatedPresentationTime=h.presentationTime/l.timescale+t.start-(l.presentationTimeOffset?l.presentationTimeOffset/l.timescale:0)),d.hasOwnProperty(i.default.DURATION)&&(h.duration=d.duration/l.timescale),d.hasOwnProperty(i.default.ID)&&(h.id=d.id),h.messageData=d.Signal&&d.Signal.Binary?g.decodeArray(d.Signal.Binary.toString()):d.messageData||d.__cdata||d.__text,u.push(h)}}return u},getEssentialPropertiesForRepresentation:M,getEventStreamForAdaptationSet:function(t,e){var n,r,i;return t&&t.Period_asArray&&e&&e.period&&S(e.period.index)&&(r=t.Period_asArray[e.period.index])&&r.AdaptationSet_asArray&&S(e.index)&&(i=r.AdaptationSet_asArray[e.index])&&(n=i.InbandEventStream_asArray),k(n,null)},getEventStreamForRepresentation:function(t,e){var n,r,i,a;return t&&t.Period_asArray&&e&&e.adaptation&&e.adaptation.period&&S(e.adaptation.period.index)&&(r=t.Period_asArray[e.adaptation.period.index])&&r.AdaptationSet_asArray&&S(e.adaptation.index)&&(i=r.AdaptationSet_asArray[e.adaptation.index])&&i.Representation_asArray&&S(e.index)&&(a=i.Representation_asArray[e.index])&&(n=a.InbandEventStream_asArray),k(n,e)},getUTCTimingSources:function(t){var e=P(t),n=!!t&&t.hasOwnProperty(i.default.AVAILABILITY_START_TIME),a=t?t.UTCTiming_asArray:null,s=[];return(e||n)&&a&&a.forEach((function(t){var e=new l.default;t.hasOwnProperty(r.default.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty(i.default.VALUE)&&(e.value=t.value.toString(),s.push(e)))})),s},getBaseURLsFromElement:F,getRepresentationSortFunction:function(){return function(t,e){return t.bandwidth-e.bandwidth}},getLocation:function(t){if(t&&t.hasOwnProperty(r.default.LOCATION))return t.Location=t.Location_asArray[0],t.Location},getPatchLocation:function(t){if(t&&t.hasOwnProperty(i.default.PATCH_LOCATION))return t.PatchLocation=t.PatchLocation_asArray[0],t.PatchLocation},getSuggestedPresentationDelay:function(t){return t&&t.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?t.suggestedPresentationDelay:null},getAvailabilityStartTime:function(t){return t&&t.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==t.availabilityStartTime?t.availabilityStartTime.getTime():null},getServiceDescriptions:function(t){var e=[];if(t&&t.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var n,a=b(t.ServiceDescription_asArray);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=void 0,u=void 0,l=void 0,c=void 0;for(var d in s)s.hasOwnProperty(d)&&(d===i.default.ID?o=s[d]:d===i.default.SERVICE_DESCRIPTION_SCOPE?u=s[d].schemeIdUri:d===i.default.SERVICE_DESCRIPTION_LATENCY?l={target:s[d].target,max:s[d].max,min:s[d].min}:d===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(c={max:s[d].max,min:s[d].min}));u===r.default.SERVICE_DESCRIPTION_LL_SCHEME&&(l||c)&&e.push({id:o,schemeIdUri:u,latency:l,playbackRate:c})}}catch(f){a.e(f)}finally{a.f()}}return e},getSupplementalProperties:function(t){var e={};if(t&&t.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var n,a=b(t.SupplementalProperty_asArray);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.hasOwnProperty(r.default.SCHEME_ID_URI)&&s.hasOwnProperty(i.default.VALUE)&&(e[s[r.default.SCHEME_ID_URI]]=s[i.default.VALUE])}}catch(o){a.e(o)}finally{a.f()}}return e},setConfig:function(t){t&&(t.errHandler&&(n=t.errHandler),t.BASE64&&(g=t.BASE64))}},e=Object(m.default)(E).getInstance().getLogger(t),t}T.__dashjs_factory_name="DashManifestModel",e.default=g.default.getSingletonFactory(T)},"./src/dash/models/PatchManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js"),s=n("./src/dash/vo/SimpleXPath.js"),o=n("./src/dash/vo/PatchOperation.js");function u(){var t,e,n=this.context;return t={getIsPatch:function(t){return t&&t.hasOwnProperty(r.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(t){return t&&t.hasOwnProperty(r.default.PUBLISH_TIME)?new Date(t[r.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(t){return t&&t.hasOwnProperty(r.default.ORIGINAL_PUBLISH_TIME)?new Date(t[r.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(t){return t&&t[r.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(t){return t?(t.__children||[]).map((function(t){var n=Object.keys(t)[0];if("add"!==n&&"remove"!==n&&"replace"!==n)return e.warn("Ignoring node of invalid action: ".concat(n)),null;var r=t[n],i=r.sel;if("add"===n&&r.type){if(!r.type.startsWith("@"))return e.warn("Ignoring add action for prefixed namespace declaration: ".concat(r.type,"=").concat(r.__text)),null;i="".concat(i,"/").concat(r.type)}var a=new s.default(i);if(!a.isValid())return e.warn("Ignoring action with invalid selector: ".concat(n," - ").concat(i)),null;var u=null;a.findsAttribute()?u=r.__text||"":"remove"!==n&&(u=r.__children.reduce((function(t,e){var n=Object.keys(e)[0];return"#text"!==n&&(t[n]=t[n]||[],t[n].push(e[n])),t}),{}));var l=new o.default(n,a,u);return"add"===n&&(l.position=r.pos),l})).filter((function(t){return!!t})):[]}},e=Object(a.default)(n).getInstance().getLogger(t),t}u.__dashjs_factory_name="PatchManifestModel",e.default=i.default.getSingletonFactory(u)},"./src/dash/parser/DashParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/parser/objectiron.js"),a=n("./externals/xml2json.js"),s=n("./src/dash/parser/matchers/StringMatcher.js"),o=n("./src/dash/parser/matchers/DurationMatcher.js"),u=n("./src/dash/parser/matchers/DateTimeMatcher.js"),l=n("./src/dash/parser/matchers/NumericMatcher.js"),c=n("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),d=n("./src/dash/parser/maps/SegmentValuesMap.js");function f(t){var e,n,r,f,h,p=this.context;return e={parse:function(t){var e,r=window.performance.now();if(!(e=f.xml_str2json(t)))throw new Error("parsing the manifest failed");var i=window.performance.now();e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach((function(t){return h.run(t)})),e.replace_asArray&&e.replace_asArray.forEach((function(t){return h.run(t)}))):h.run(e=e.MPD);var a=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e},getMatchers:function(){return r},getIron:function(){return h}},n=(t=t||{}).debug.getLogger(e),r=[new o.default,new u.default,new l.default,new s.default],f=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),h=Object(i.default)(p).create({adaptationset:new c.default,period:new d.default}),e}f.__dashjs_factory_name="DashParser",e.default=r.default.getClassFactory(f)},"./src/dash/parser/maps/CommonProperty.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._merge=(n=e)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}var e;return(e=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/maps/MapNode.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/CommonProperty.js");e.default=function(){function t(e,n,i){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e||"",this._properties=[],this._children=i||[],Array.isArray(n)&&n.forEach((function(t){a._properties.push(new r.default(t))}))}var e;return(e=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,a=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return a.call(this,i.default.ADAPTATION_SET,t,[new r.default(i.default.REPRESENTATION,t,[new r.default(i.default.SUB_REPRESENTATION,t)])])}return l}(r.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,a=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return a.call(this,i.default.PERIOD,t,[new r.default(i.default.ADAPTATION_SET,t,[new r.default(i.default.REPRESENTATION,t)])])}return l}(r.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._test=e,this._converter=n}var e;return(e=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(t){return u.test(t.value)}),(function(t){var e,n=u.exec(t);if(e=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]){var r=60*parseInt(n[9],10)+parseInt(n[10],10);e+=("+"===n[8]?-1:1)*r*60*1e3}return new Date(e)}))}return i}(r.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/constants/DashConstants.js");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,(function(t){for(var e=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],n=e.length,r=0;r<n;r++)if(t.nodeName===e[r])return c.test(t.value);return!1}),(function(t){var e=c.exec(t),n=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return void 0!==e[1]&&(n=-n),n}))}return s}(r.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(t){return u.test(t.value)}),(function(t){return parseFloat(t)}))}return i}(r.default)},"./src/dash/parser/matchers/StringMatcher.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/dash/constants/DashConstants.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r.call(this,(function(t,e){var n,r=(s(n={},i.default.MPD,[i.default.ID,i.default.PROFILES]),s(n,i.default.PERIOD,[i.default.ID]),s(n,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),s(n,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),s(n,i.default.INITIALIZATION,[i.default.RANGE]),s(n,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),s(n,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),s(n,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),s(n,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),s(n,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),s(n,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),s(n,i.default.EVENT_STREAM,[i.default.VALUE]),s(n,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),s(n,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),s(n,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),s(n,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),s(n,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),s(n,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),s(n,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),s(n,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),s(n,i.default.ROLE,[i.default.VALUE,i.default.ID]),s(n,i.default.RATING,[i.default.VALUE,i.default.ID]),s(n,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),s(n,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),s(n,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),s(n,i.default.SUBSET,[i.default.ID]),s(n,i.default.METRICS,[i.default.METRICS_MINUS]),s(n,i.default.REPORTING,[i.default.VALUE,i.default.ID]),n);if(r.hasOwnProperty(e)){var a=r[e];return void 0!==a&&a.indexOf(t.name)>=0}return!1}),(function(t){return String(t)}))}return a}(r.default)},"./src/dash/parser/objectiron.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){function e(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function n(t,n,r){for(var a=0,s=t.length;a<s;++a){var o=t[a];if(n[o.name])if(r[o.name]){if(o.merge){var u=n[o.name],l=r[o.name];"object"===i(u)&&"object"===i(l)?e(u,l):r[o.name]=u+l}}else r[o.name]=n[o.name]}}function r(t,e){for(var i=0,a=t.children.length;i<a;++i){var s=t.children[i],o=e[s.name+"_asArray"];if(o)for(var u=0,l=o.length;u<l;++u){var c=o[u];n(t.properties,e,c),r(s,c)}}}return{run:function(e){if(null===e||"object"!==i(e))return e;if(e.Period_asArray&&"period"in t)for(var n=t.period,a=e.Period_asArray,s=0,o=a.length;s<o;++s){var u=a[s];if(r(n,u),"adaptationset"in t){var l=u.AdaptationSet_asArray;if(l)for(var c=t.adaptationset,d=0,f=l.length;d<f;++d)r(c,l[d])}}return e}}}a.__dashjs_factory_name="ObjectIron";var s=r.default.getClassFactory(a);e.default=s},"./src/dash/utils/ListSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(t,e){var n=(t=t||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(t,i){if(r(),!t)return null;var s=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,o=s.SegmentURL_asArray.length,u=t&&!isNaN(t.startNumber)?t.startNumber:1,l=Math.max(u-1,0),c=Math.max(i-l,0),d=null;if(c<o){var f=s.SegmentURL_asArray[c];(d=Object(a.getIndexBasedSegment)(n,e,t,i))&&(d.replacementTime=(u+i-1)*t.segmentDuration,d.media=f.media?f.media:"",d.mediaRange=f.mediaRange,d.indexRange=f.indexRange)}return d}return{getSegmentByIndex:s,getSegmentByTime:function(t,e){if(r(),!t)return null;var i=t.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return s(t,Math.floor(a/i))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;var n=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,r=t&&!isNaN(t.startNumber)?t.startNumber:1,i=Math.max(r-1,0);return e.numberOfSegments=i+n.SegmentURL_asArray.length,e}}}s.__dashjs_factory_name="ListSegmentsGetter";var o=r.default.getClassFactory(s);e.default=o},"./src/dash/utils/Round10.js":function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,"default",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"round10",value:function(t,e){return function(t,e,n){return void 0===n||0==+n?Math.round(e):(n=+n,null===(e=+e)||isNaN(e)||"number"!=typeof n||n%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+n:n))))}(0,t,e)}}])&&r(e,n),t}()},"./src/dash/utils/SegmentBaseGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js");function a(t){var e=(t=t||{}).timelineConverter;function n(){if(!e||!e.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(t,e){if(n(),!t)return null;var r,i=t.segments?t.segments.length:-1;if(e<i&&(r=t.segments[e])&&r.index===e)return r;for(var a=0;a<i;a++)if((r=t.segments[a])&&r.index===e)return r;return null}return{getSegmentByIndex:r,getSegmentByTime:function(t,e){return n(),r(t,function(t,e){if(!t)return-1;var n,r,i,a,s,o=t.segments,u=o?o.length:null,l=-1;if(o&&u>0)for(s=0;s<u;s++)if(e+(n=(a=(r=o[s]).duration)/2)>=(i=r.presentationStartTime)&&e-n<i+a){l=r.index;break}return l}(t,e))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return t&&t.segments?(e.numberOfSegments=t.segments.length,e):e}}}a.__dashjs_factory_name="SegmentBaseGetter";var s=r.default.getClassFactory(a);e.default=s},"./src/dash/utils/SegmentsUtils.js":function(t,e,n){"use strict";n.r(e),n.d(e,"unescapeDollarsInTemplate",(function(){return a})),n.d(e,"replaceIDForTemplate",(function(){return s})),n.d(e,"replaceTokenForTemplate",(function(){return o})),n.d(e,"getIndexBasedSegment",(function(){return c})),n.d(e,"getTimeBasedSegment",(function(){return d}));var r=n("./src/dash/vo/Segment.js");function i(t,e){for(;t.length<e;)t="0"+t;return t}function a(t){return t?t.split("$$").join("$"):t}function s(t,e){if(!e||!t||-1===t.indexOf("$RepresentationID$"))return t;var n=e.toString();return t.split("$RepresentationID$").join(n)}function o(t,e,n){var r,a,s,o,u,l,c=e.length,d="%0".length;if(!t)return t;for(;;){if((r=t.indexOf("$"+e))<0)return t;if((a=t.indexOf("$",r+c))<0)return t;if((s=t.indexOf("%0",r+c))>r&&s<a)switch(o=t.charAt(a-1),u=parseInt(t.substring(s+d,a-1),10),o){case"d":case"i":case"u":l=i(n.toString(),u);break;case"x":l=i(n.toString(16),u);break;case"X":l=i(n.toString(16),u).toUpperCase();break;case"o":l=i(n.toString(8),u);break;default:return t}else l=n;t=t.substring(0,r)+l+t.substring(a+1)}}function u(t,e,n,i,a,s,o,u){var l=new r.default;return l.representation=t,l.duration=e,l.presentationStartTime=n,l.mediaStartTime=i,l.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(s,t,o),l.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(s+e,t,o),l.wallStartTime=a.calcWallTimeForSegment(l,o),l.replacementNumber=l.representation.startNumber+u,l.index=u,l}function l(t,e,n,r){var i=e.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===e.availabilityTimeOffset)return!0;var a=t.getClientReferenceTime();return n.availabilityStartTime.getTime()<=a&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=a)}return!0}function c(t,e,n,r){var i,a,s;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),s=parseFloat((a+i).toFixed(5));var o=u(n,i,a,t.calcMediaTimeFromPresentationTime(a,n),t,s,e,r);return l(t,n,o,e)?o:null}function d(t,e,n,r,i,a,s,c,d,f){var h,p,g=r/a,m=i/a;return h=t.calcPresentationTimeFromMediaTime(g,n),l(t,n,p=u(n,m,h,g,t,h+m,e,d),e)?(p.replacementTime=f||r,s=o(s,"Number",p.replacementNumber),s=o(s,"Time",p.replacementTime),p.media=s,p.mediaRange=c,p):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(t,e){var n=(t=t||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(t,i){if(r(),!t)return null;var s=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate;i=Math.max(i,0);var o=Object(a.getIndexBasedSegment)(n,e,t,i);if(o){o.replacementTime=Math.round((i-1)*t.segmentDuration*t.timescale,10);var u=s.media;u=Object(a.replaceTokenForTemplate)(u,"Number",o.replacementNumber),u=Object(a.replaceTokenForTemplate)(u,"Time",o.replacementTime),o.media=u}return o}return{getSegmentByIndex:s,getSegmentByTime:function(t,e){if(r(),!t)return null;var i=t.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return s(t,Math.floor(a/i))},getMediaFinishedInformation:function(t){var e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;var n=t.segmentDuration;return e.numberOfSegments=isNaN(n)?1:Math.ceil(t.adaptation.period.duration/n),e}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var o=r.default.getClassFactory(s);e.default=o},"./src/dash/utils/TimelineConverter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/dash/constants/DashConstants.js"),o=n("./src/dash/models/DashManifestModel.js"),u=n("./src/core/Settings.js"),l=n("./src/streaming/constants/Constants.js"),c=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/streaming/constants/ConformanceViolationConstants.js");function f(){var t,e,n,a,f=this.context,h=Object(r.default)(f).getInstance(),p=Object(u.default)(f).getInstance();function g(t){a=t}function m(t,e,n,r){var i,a=e.adaptation.period.mpd,s=a.availabilityStartTime;if(r)i=n&&a.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(s.getTime()+1e3*(t+a.timeShiftBufferDepth)):a.availabilityEndTime;else if(n){var o=e.availabilityTimeOffset;i=new Date(s.getTime()+1e3*(t-o))}else i=s;return i}function y(t,e){return(t.getTime()-e.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function v(t,e){return t+(e.adaptation.period.start-e.presentationTimeOffset)}function _(t){var n={start:NaN,end:NaN},r=t[0].getAdapter().getRegularPeriods()[0],i=y(new Date,r);if(!t||0===t.length)return{range:n,now:i};t.forEach((function(t){var r=t.getAdapter(),a=r.getMediaInfoForType(t.getStreamInfo(),l.default.VIDEO)||r.getMediaInfoForType(t.getStreamInfo(),l.default.AUDIO),o=r.getVoRepresentations(a)[0],u={start:NaN,end:NaN};if(o)if(o.segmentInfoType===s.default.SEGMENT_TIMELINE)u=function(t){var n,r,i,a,s=e.getRepresentationFor(t.index,t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index]),o=s.SegmentTemplate.timescale,u=s.SegmentTemplate.SegmentTimeline.S_asArray,l={start:0,end:0},c=0;for(l.start=v(u[0].t/o,t),i=0,a=u.length;i<a;i++)r=0,(n=u[i]).hasOwnProperty("r")&&(r=n.r),c+=n.d/o*(1+r);return l.end=l.start+c,l}(o);else{var c=o.adaptation.period;u.start=c.start,u.end=Math.max(i,c.start+c.duration)}!isNaN(u.start)&&(isNaN(n.start)||n.start>u.start)&&(n.start=u.start),!isNaN(u.end)&&(isNaN(n.end)||n.end<u.end)&&(n.end=u.end)})),n.end=Math.min(i,n.end);var a=E(t,n.end,!0);return n.end=isNaN(a)?n.end:a,n.start=r&&r.mpd&&r.mpd.timeShiftBufferDepth&&!isNaN(r.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-r.mpd.timeShiftBufferDepth,n.start):n.start,n.start=E(t,n.start),{range:n,now:i}}function b(t,e){n=t-e.end}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var r=0,i=!1,a=NaN;!i&&r<t.length;){var s=t[r].getStreamInfo();s.start<=e&&(!isFinite(s.duration)||s.start+s.duration>=e)?(a=e,i=!0):!n&&s.start>e&&(isNaN(a)||s.start<a)?a=s.start:n&&s.start+s.duration<e&&(isNaN(a)||s.start+s.duration>a)&&(a=s.start+s.duration),r+=1}return a}catch(o){return e}}function T(t){void 0===t.offset||isNaN(t.offset)||g(t.offset/1e3)}function S(){a=0,n=0}function w(){h.off(i.default.UPDATE_TIME_SYNC_OFFSET,T,this),S()}return t={initialize:function(){S(),h.on(i.default.UPDATE_TIME_SYNC_OFFSET,T,this)},getClientTimeOffset:function(){return a},setClientTimeOffset:g,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*a},calcAvailabilityStartTimeFromPresentationTime:function(t,e,n){return m(t,e,n)},calcAvailabilityEndTimeFromPresentationTime:function(t,e,n){return m(t,e,n,!0)},calcPresentationTimeFromWallTime:y,calcPresentationTimeFromMediaTime:v,calcPeriodRelativeTimeFromMpdRelativeTime:function(t,e){return e-t.adaptation.period.start},calcMediaTimeFromPresentationTime:function(t,e){return t-e.adaptation.period.start+e.presentationTimeOffset},calcWallTimeForSegment:function(t,e){var n,r;return e&&(n=t.presentationStartTime+t.representation.adaptation.period.mpd.suggestedPresentationDelay,r=new Date(t.availabilityStartTime.getTime()+1e3*n)),r},calcTimeShiftBufferWindow:function(t,e){if(!e)return function(t){var e={start:NaN,end:NaN},n=0,r=NaN;return t.forEach((function(t){var e=t.getStreamInfo();n+=e.duration,(isNaN(r)||e.start<r)&&(r=e.start)})),e.start=r,e.end=r+n,e}(t);if(p.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var n=_(t);return b(n.now,n.range),n.range}return function(t){var e={start:NaN,end:NaN};if(!t||0===t.length)return e;var n=t[0].getAdapter().getRegularPeriods()[0],r=y(new Date,n),i=n.mpd.timeShiftBufferDepth,a=isNaN(i)?0:r-i;if(e.start=E(t,a),e.end=!isNaN(e.start)&&r<e.start?r:E(t,r,!0),!isNaN(i)&&e.end<r-i&&(e.end=NaN),p.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var s=_(t);if(s.range.end<e.start)return h.trigger(c.default.CONFORMANCE_VIOLATION,{level:d.default.LEVELS.WARNING,event:d.default.EVENTS.INVALID_DVR_WINDOW}),b(s.now,s.range),s.range}return e}(t)},reset:w},e=Object(o.default)(f).getInstance(),w(),t}f.__dashjs_factory_name="TimelineConverter",e.default=a.default.getSingletonFactory(f)},"./src/dash/utils/TimelineSegmentsGetter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(t,e){var n=(t=t||{}).timelineConverter,r=t.dashMetrics;function s(){if(!n)throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(t,e){var n,r,i,a,s,o,l,c=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,d=c.SegmentURL_asArray,f=0,h=0,p=-1;l=t.timescale;var g=!1;for(i=0,a=(n=c.SegmentTimeline.S_asArray).length;i<a&&!g;i++)for(o=0,(r=n[i]).hasOwnProperty("r")&&(o=r.r),r.hasOwnProperty("t")&&(h=(f=r.t)/l),o<0&&(o=u(t,n[i+1],r,l,h)),s=0;s<=o&&!g;s++)(g=e(f,h,c,d,r,l,++p,i))&&(t.segmentDuration=r.d/l),h=(f+=r.d)/l}function u(t,e,i,a,s){var o;if(e&&e.hasOwnProperty("t"))o=e.t/a;else try{var u=0;if(isNaN(t.adaptation.period.start)||isNaN(t.adaptation.period.duration)||!isFinite(t.adaptation.period.duration)){var l=r.getCurrentDVRInfo();u=isNaN(l.end)?0:l.end}else u=t.adaptation.period.start+t.adaptation.period.duration;o=n.calcMediaTimeFromPresentationTime(u,t),t.segmentDuration=i.d/a}catch(c){o=0}return Math.max(Math.ceil((o-s)/(i.d/a))-1,0)}return{getSegmentByIndex:function(t,r,i){if(s(),!t)return null;var u=null,l=!1;return o(t,(function(r,s,o,c,d,f,h,p){if(l||i<0){var g=o.media,m=d.mediaRange;return c&&(g=c[p].media||"",m=c[p].mediaRange),u=Object(a.getTimeBasedSegment)(n,e,t,r,d.d,f,g,m,h,d.tManifest),!0}return s>=i-.5*d.d/f&&(l=!0),!1})),u},getSegmentByTime:function(t,r){if(s(),!t)return null;void 0===r&&(r=null);var i=null,u=n.calcMediaTimeFromPresentationTime(r,t);return o(t,(function(r,s,o,l,c,d,f,h){if(u<s+c.d/d&&u>=s){var p=o.media,g=c.mediaRange;return l&&(p=l[h].media||"",g=l[h].mediaRange),i=Object(a.getTimeBasedSegment)(n,e,t,r,c.d,d,p,g,f,c.tManifest),!0}return!1})),i},getMediaFinishedInformation:function(t){if(!t)return 0;var e,n,r,i,a,s,o,l=0,c=0,d=0;for(o=t.timescale,i=(e=(t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList).SegmentTimeline.S_asArray).length,r=0;r<i;r++)for(s=0,(n=e[r]).hasOwnProperty("r")&&(s=n.r),n.hasOwnProperty("t")&&(c=(l=n.t)/o),s<0&&(s=u(t,e[r+1],n,o,c)),a=0;a<=s;a++)d++,c=(l+=n.d)/o;return{numberOfSegments:d,mediaTimeOfLastSignaledSegment:c}}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var o=r.default.getClassFactory(s);e.default=o},"./src/dash/vo/AdaptationSet.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(t,e,n){"use strict";n.r(e);var r=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.serviceLocation=n||e||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,e.default=r},"./src/dash/vo/Event.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,this.xpath=n,this.value=r,this.position=null}var e;return(e=[{key:"getMpdTarget",value:function(t){return this.xpath.getMpdTarget(t,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/Period.js":function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};r.DEFAULT_ID="defaultId",e.default=r},"./src/dash/vo/Representation.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/constants/DashConstants.js");e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}var e;return(e=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==r.default.BASE_URL&&this.segmentInfoType!==r.default.SEGMENT_BASE&&!this.indexRange}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/RepresentationInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.valid="/"==e[0],this.path=e.split("/").filter((function(t){return 0!==t.length})).map((function(t){var e={name:t},r=t.indexOf("[");if(-1!=r){e.name=t.substring(0,r);var i=t.substring(r+1,t.length-1);n.valid=n.valid&&-1==i.indexOf("[");var a=i.indexOf("=");-1!=a?(e.attribute={name:i.substring(1,a),value:i.substring(a+1)},-1!=["'",'"'].indexOf(e.attribute.value[0])&&(e.attribute.value=e.attribute.value.substring(1,e.attribute.value.length-1))):e.position=parseInt(i,10)-1}return e}))}var e;return(e=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(t,e){for(var n=null,r=t,i=1,a="MPD";i<this.path.length&&null!==r;){n=r;var s=this.path[i];if(a=s.name,i!==this.path.length-1||!a.startsWith("@")){var o=n[a+"_asArray"]||[];0===o.length&&n[a]&&o.push(n[a]),s.position?r=o[s.position]||null:s.attribute?function(){var t=s.attribute;r=o.filter((function(e){return e[t.name]==t.value}))[0]||null}():r=o[0]||null}i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:{name:a,leaf:r,target:e?n:r}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/dash/vo/StreamInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/HeadRequest.js"),s=n("./src/streaming/vo/DashJSError.js"),o=n("./src/core/FactoryMaker.js");function u(t){var e,n,o=this.context,u=(t=t||{}).eventBus,l=t.events,c=t.urlUtils,d=t.errors,f=t.streamId;return e={checkForExistence:function(t){var e=function(e){u.trigger(l.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var r=new a.default(t.url);n.load({request:r,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(t){var r=function(n,r){u.trigger(l.LOADING_COMPLETED,{request:t,response:n||null,error:r||null,sender:e})};t?n.load({request:t,progress:function(n){u.trigger(l.LOADING_PROGRESS,{request:t,stream:n.stream,streamId:f}),n.data&&u.trigger(l.LOADING_DATA_PROGRESS,{request:t,response:n.data||null,error:null,sender:e})},success:function(t){r(t)},error:function(t,e,n){r(void 0,new s.default(d.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,e))},abort:function(t){t&&u.trigger(l.LOADING_ABANDONED,{mediaType:t.mediaType,request:t,sender:e})}}):r(void 0,new s.default(d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){n&&n.abort()},reset:function(){n&&(n.abort(),n=null)}},n=Object(i.default)(o).create({errHandler:t.errHandler,errors:d,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:c,constants:r.default,boxParser:t.boxParser,dashConstants:t.dashConstants,requestTimeout:t.settings.get().streaming.fragmentRequestTimeout}),e}u.__dashjs_factory_name="FragmentLoader",e.default=o.default.getClassFactory(u)},"./src/streaming/ManifestLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/controllers/XlinkController.js"),s=n("./src/streaming/net/URLLoader.js"),o=n("./src/streaming/utils/URLUtils.js"),u=n("./src/streaming/vo/TextRequest.js"),l=n("./src/streaming/vo/DashJSError.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/core/FactoryMaker.js"),g=n("./src/dash/parser/DashParser.js");function m(t){var e,n,p,m,y,v=this.context,_=(t=t||{}).debug,b=Object(d.default)(v).getInstance(),E=Object(o.default)(v).getInstance(),T=t.mssHandler,S=t.errHandler;function w(t){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:t.manifest})}return e={load:function(t){var e=new u.default(t,c.HTTPRequest.MPD_TYPE);p.load({request:e,success:function(e,i,a){var s,o,u;if(m)if(a&&a!==t?(o=E.parseBaseUrl(a),s=a):(E.isRelative(t)&&(t=E.resolve(t,window.location.href)),o=E.parseBaseUrl(t)),"No Content"!=i)if(null===y&&(y=function(t){var e=null;return t.indexOf("SmoothStreamingMedia")>-1?(T&&(e=T.createMssParser(),T.registerEvents()),e):t.indexOf("MPD")>-1||t.indexOf("Patch")>-1?Object(g.default)(v).create({debug:_}):e}(e)),null!==y){m.setMatchers(y.getMatchers()),m.setIron(y.getIron());try{u=y.parse(e)}catch(c){return void b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}u?(u.url=s||t,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(r.default.LOCATION)&&(o=E.parseBaseUrl(u.Location_asArray[0]),n.debug("BaseURI set by Location to: "+o)),u.baseUri=o,u.loadedTime=new Date,m.resolveManifestOnLoad(u),b.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))});else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(e,n,r){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(t,", ").concat(r))})}})},reset:function(){b.off(f.default.XLINK_READY,w,e),T&&T.reset(),m&&(m.reset(),m=null),p&&(p.abort(),p=null)}},n=_.getLogger(e),b.on(f.default.XLINK_READY,w,e),p=Object(s.default)(v).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:E,constants:r.default,dashConstants:i.default,errors:h.default}),m=Object(a.default)(v).create({errHandler:S,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings}),y=null,e}m.__dashjs_factory_name="ManifestLoader";var y=p.default.getClassFactory(m);e.default=y},"./src/streaming/ManifestUpdater.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js"),u=n("./src/core/errors/Errors.js"),l=n("./src/dash/constants/DashConstants.js"),c=n("./src/streaming/utils/URLUtils.js");function d(){var t,e,n,s,d,f,h,p,g,m,y,v,_=this.context,b=Object(r.default)(_).getInstance(),E=Object(c.default)(_).getInstance();function T(){n=NaN,h=!1,d=!0,f=!1,S()}function S(){null!==s&&(clearTimeout(s),s=null)}function w(t){S(),f||(isNaN(t)&&!isNaN(n)&&(t=1e3*n),isNaN(t)||(e.debug("Refresh manifest in "+t+" milliseconds."),s=setTimeout(C,t)))}function A(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h=!0;var e=g.getValue(),n=e.url,r=m.getPatchLocation(e),i=m.getLocation(e);r&&!t?n=r:i&&(n=i),E.isRelative(n)&&(n=E.resolve(n,e.url)),p.load(n)}function x(t){if(t){if(m.getIsPatch(t)){var r=t;t=g.getValue();var a=m.isPatchValid(t,r),s=a;if(a){var o=m.getPublishTime(t);s=m.applyPatchToManifest(t,r);var u=m.getPublishTime(t);s=o.getTime()!=u.getTime()}if(!s)return e.debug("Patch provided is invalid, performing full manifest refresh"),void A(!0);t.loadedTime=new Date}}else(t=g.getValue()).loadedTime=new Date;if(g.getValue()&&g.getValue().type===l.default.DYNAMIC&&t.type===l.default.STATIC)return b.trigger(i.default.DYNAMIC_TO_STATIC),h=!1,void(f=!0);g.setValue(t);var c=new Date,p=(c.getTime()-t.loadedTime.getTime())/1e3;1e3*(n=m.getManifestUpdatePeriod(t,p))>2147483647&&(n=2147483.647),b.trigger(i.default.MANIFEST_UPDATED,{manifest:t}),e.info("Manifest has been refreshed at "+c+"["+c.getTime()/1e3+"] "),d||w()}function C(){d||(h?w(v.get().streaming.manifestUpdateRetryInterval):A())}function D(t){t.error?t.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&y.error(t.error):x(t.manifest)}function I(){d=!1,w()}function R(){(d=!v.get().streaming.scheduling.scheduleWhilePaused)&&S()}function O(){h=!1}return t={initialize:function(){T(),b.on(i.default.STREAMS_COMPOSED,O,this),b.on(a.default.PLAYBACK_STARTED,I,this),b.on(a.default.PLAYBACK_PAUSED,R,this),b.on(i.default.INTERNAL_MANIFEST_LOADED,D,this)},setManifest:function(t){x(t)},refreshManifest:A,getIsUpdating:function(){return h},setConfig:function(t){t&&(t.manifestModel&&(g=t.manifestModel),t.adapter&&(m=t.adapter),t.manifestLoader&&(p=t.manifestLoader),t.errHandler&&(y=t.errHandler),t.settings&&(v=t.settings))},reset:function(){b.off(a.default.PLAYBACK_STARTED,I,this),b.off(a.default.PLAYBACK_PAUSED,R,this),b.off(i.default.STREAMS_COMPOSED,O,this),b.off(i.default.INTERNAL_MANIFEST_LOADED,D,this),T()}},e=Object(o.default)(_).getInstance().getLogger(t),t}d.__dashjs_factory_name="ManifestUpdater",e.default=s.default.getClassFactory(d)},"./src/streaming/MediaPlayer.js":function(t,e,n){"use strict";n.r(e);var r=n("./externals/cea608-parser.js"),i=n.n(r),a=n("./src/streaming/constants/Constants.js"),s=n("./src/dash/constants/DashConstants.js"),o=n("./src/streaming/constants/MetricsConstants.js"),u=n("./src/streaming/controllers/PlaybackController.js"),l=n("./src/streaming/controllers/StreamController.js"),c=n("./src/streaming/controllers/GapController.js"),d=n("./src/streaming/controllers/MediaController.js"),f=n("./src/streaming/controllers/BaseURLController.js"),h=n("./src/streaming/ManifestLoader.js"),p=n("./src/streaming/utils/ErrorHandler.js"),g=n("./src/streaming/utils/Capabilities.js"),m=n("./src/streaming/utils/CapabilitiesFilter.js"),y=n("./src/streaming/utils/RequestModifier.js"),v=n("./src/streaming/models/URIFragmentModel.js"),_=n("./src/streaming/models/ManifestModel.js"),b=n("./src/streaming/models/MediaPlayerModel.js"),E=n("./src/streaming/controllers/AbrController.js"),T=n("./src/streaming/net/SchemeLoaderFactory.js"),S=n("./src/streaming/models/VideoModel.js"),w=n("./src/streaming/models/CmcdModel.js"),A=n("./src/streaming/utils/DOMStorage.js"),x=n("./src/core/Debug.js"),C=n("./src/core/errors/Errors.js"),D=n("./src/core/EventBus.js"),I=n("./src/core/events/Events.js"),R=n("./src/streaming/MediaPlayerEvents.js"),O=n("./src/core/FactoryMaker.js"),P=n("./src/core/Settings.js"),M=n("./src/core/Version.js"),L=n("./src/dash/controllers/SegmentBaseController.js"),N=n("./src/dash/DashAdapter.js"),k=n("./src/dash/DashMetrics.js"),F=n("./src/dash/utils/TimelineConverter.js"),B=n("./src/streaming/vo/metrics/HTTPRequest.js"),j=n("./externals/base64.js"),U=n.n(j),V=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),G=n.n(V),H=n("./src/streaming/vo/DashJSError.js"),Y=n("./src/streaming/utils/SupervisorTools.js"),z=n("./src/streaming/ManifestUpdater.js"),q=n("./src/streaming/utils/URLUtils.js"),X=n("./src/streaming/utils/BoxParser.js"),K=n("./src/streaming/text/TextController.js");function W(){var t,e,n,r,j,V,W,$,Q,Z,J,tt,et,nt,rt,it,at,st,ot,ut,lt,ct,dt,ft,ht,pt,gt,mt,yt,vt,_t,bt,Et,Tt,St,wt,At="You must first call initialize() and set a source before calling this method",xt="You must first call initialize() and set a valid source and view before calling this method",Ct="You must first call attachView() to set the video element before calling this method",Dt=this.context,It=Object(D.default)(Dt).getInstance(),Rt=Object(P.default)(Dt).getInstance(),Ot=Object(x.default)(Dt).getInstance({settings:Rt});function Pt(){qt(null),Ht(null),r=null,et&&(et.reset(),et=null),nt&&(nt.reset(),nt=null),Rt.reset(),it&&(it.reset(),it=null)}function Mt(){return!!n&&!!vt.getElement()}function Lt(){return Object(M.getVersionString)()}function Nt(){if(!W)throw xt;return pt.isPaused()}function kt(t){var e=dt&&dt.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);if(!n)return 0;var r=pt.getLiveDelay(),i=n.range.start+t;return i>n.range.end-r&&(i=n.range.end-r),i}function Ft(t){if(!W)throw xt;var e=Gt().currentTime;if(void 0!==t)e=dt.getTimeRelativeToStreamId(e,t);else if(pt.getIsDynamic()){var n=dt&&dt.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,r=gt.getCurrentDVRInfo(n);e=null===r||0===e?0:Math.max(0,e-r.range.start)}return e}function Bt(){if(!W)throw xt;var t=Gt().duration;if(pt.getIsDynamic()){var e=dt&&dt.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);t=n?n.range.end-n.range.start:0}return t}function jt(t){Object(Y.checkParameterType)(t,"boolean"),$=t}function Ut(){st.restoreDefaultUTCTimingSources()}function Vt(){return gt}function Gt(){if(!vt.getElement())throw Ct;return vt.getElement()}function Ht(t){if(!j)throw"MediaPlayer not initialized!";vt.setElement(t),t&&($t(),function(){if(!nt){var t=dashjs.MetricsReporting;if("function"==typeof t){var e=t(Dt).create();nt=e.createMetricsReporting({debug:Ot,eventBus:It,mediaElement:Gt(),adapter:at,dashMetrics:gt,events:I.default,constants:a.default,metricsConstants:o.default})}}}(),function(){if(!rt){var t=dashjs.MssHandler;"function"==typeof t&&(C.default.extend(t.errors),rt=t(Dt).create({eventBus:It,mediaPlayerModel:st,dashMetrics:gt,manifestModel:mt,playbackController:pt,streamController:dt,protectionController:et,baseURLController:ut,errHandler:ot,events:I.default,constants:a.default,debug:Ot,initSegmentType:B.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:U.a,ISOBoxer:G.a,settings:Rt}))}}(),dt&&dt.switchToVideoElement()),W&&Kt(),Jt()}function Yt(t){if(!V)throw At;var e=dt.getActiveStreamInfo();return e?tt.getTracksFor(t,e.id):[]}function zt(t,e){var n=-1;t.some((function(t,r){if(t===e)return n=r,!0})),n<0||t.splice(n,1)}function qt(t){if(!j)throw"MediaPlayer not initialized!";"string"==typeof t&&_t.initialize(t),n=t,(V||W)&&Kt(),Mt()&&Jt()}function Xt(){if(!V)throw At;var t=dt.getActiveStreamInfo();return t?dt.getStreamById(t.id):null}function Kt(){W=!1,V=!1,at.reset(),dt.reset(),ht.reset(),pt.reset(),Q.reset(),tt.reset(),Et.reset(),et&&(Rt.get().streaming.protection.keepProtectionMediaKeys?et.stop():(et.reset(),et=null,$t())),ft.reset(),yt.reset()}function Wt(){return Object(h.default)(Dt).create({debug:Ot,errHandler:ot,dashMetrics:gt,mediaPlayerModel:st,requestModifier:Object(y.default)(Dt).getInstance(),mssHandler:rt,settings:Rt})}function $t(){if(et)return et;var t=dashjs.Protection;if("function"==typeof t){var e=t(Dt).create();return I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),C.default.extend(t.errors),lt||(lt=Object(g.default)(Dt).getInstance()),(et=e.createProtectionSystem({debug:Ot,errHandler:ot,videoModel:vt,capabilities:lt,eventBus:It,events:I.default,BASE64:U.a,constants:a.default,cmcdModel:yt,settings:Rt}))&&(et.setLicenseRequestFilters(Tt),et.setLicenseResponseFilters(St)),et}return null}function Qt(){if(!j)throw"MediaPlayer not initialized!";if(it)return it;var t=dashjs.OfflineController;if("function"==typeof t){I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),C.default.extend(t.errors);var e=Wt(),n=Object(z.default)(Dt).create();return n.setConfig({manifestModel:mt,adapter:at,manifestLoader:e,errHandler:ot}),it=t(Dt).create({debug:Ot,manifestUpdater:n,baseURLController:ut,manifestLoader:e,manifestModel:mt,mediaPlayerModel:st,abrController:Q,playbackController:pt,adapter:at,errHandler:ot,dashMetrics:gt,timelineConverter:J,segmentBaseController:Et,schemeLoaderFactory:Z,eventBus:It,events:I.default,errors:C.default,constants:a.default,settings:Rt,dashConstants:s.default,urlUtils:Object(q.default)(Dt).getInstance()})}return null}function Zt(t){var e=dt&&dt.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=gt.getCurrentDVRInfo(e);return n?t+(n.manifestInfo.availableFrom.getTime()/1e3+n.range.start):0}function Jt(){var t;it&&it.resetRecords(),!V&&n&&(V=!0,e.info("Streaming Initialized"),t=Wt(),dt||(dt=Object(l.default)(Dt).getInstance()),ft||(ft=Object(K.default)(Dt).create({errHandler:ot,manifestModel:mt,adapter:at,mediaController:tt,videoModel:vt,settings:Rt})),ct.setConfig({capabilities:lt,adapter:at,settings:Rt,manifestModel:mt,errHandler:ot}),ct.setCustomCapabilitiesFilters(wt),dt.setConfig({capabilities:lt,capabilitiesFilter:ct,manifestLoader:t,manifestModel:mt,mediaPlayerModel:st,protectionController:et,textController:ft,adapter:at,dashMetrics:gt,errHandler:ot,timelineConverter:J,videoModel:vt,playbackController:pt,abrController:Q,mediaController:tt,settings:Rt,baseURLController:ut,uriFragmentModel:_t,segmentBaseController:Et}),ht.setConfig({settings:Rt,playbackController:pt,streamController:dt,videoModel:vt,timelineConverter:J,adapter:at}),pt.setConfig({streamController:dt,dashMetrics:gt,mediaPlayerModel:st,adapter:at,videoModel:vt,timelineConverter:J,settings:Rt}),Q.setConfig({streamController:dt,domStorage:bt,mediaPlayerModel:st,dashMetrics:gt,adapter:at,videoModel:vt,settings:Rt}),yt.setConfig({abrController:Q,dashMetrics:gt,playbackController:pt}),Q.initialize(),dt.initialize($,r),ft.initialize(),ht.initialize(),yt.initialize(),Et.initialize(),"string"==typeof n?dt.load(n):dt.loadWithManifest(n)),!W&&Mt()&&(W=!0,e.info("Playback Initialized"))}return t={initialize:function(t,n,r){lt||(lt=Object(g.default)(Dt).getInstance()).setConfig({settings:Rt}),ot||(ot=Object(p.default)(Dt).getInstance()),lt.supportsMediaSource()?(j||(j=!0,J=Object(F.default)(Dt).getInstance(),Q||(Q=Object(E.default)(Dt).getInstance()).setConfig({settings:Rt}),Z||(Z=Object(T.default)(Dt).getInstance()),pt||(pt=Object(u.default)(Dt).getInstance()),tt||(tt=Object(d.default)(Dt).getInstance()),dt||(dt=Object(l.default)(Dt).getInstance()),ht||(ht=Object(c.default)(Dt).getInstance()),ct||(ct=Object(m.default)(Dt).getInstance()),at=Object(N.default)(Dt).getInstance(),mt=Object(_.default)(Dt).getInstance(),yt=Object(w.default)(Dt).getInstance(),gt=Object(k.default)(Dt).getInstance({settings:Rt}),bt=Object(A.default)(Dt).getInstance({settings:Rt}),at.setConfig({constants:a.default,cea608parser:i.a,errHandler:ot,BASE64:U.a}),ut||(ut=Object(f.default)(Dt).create()),ut.setConfig({adapter:at}),Et||(Et=Object(L.default)(Dt).getInstance({dashMetrics:gt,mediaPlayerModel:st,errHandler:ot,baseURLController:ut,events:I.default,eventBus:It,debug:Ot,boxParser:Object(X.default)(Dt).getInstance(),requestModifier:Object(y.default)(Dt).getInstance(),errors:C.default})),tt.setConfig({domStorage:bt,settings:Rt}),Ut(),jt(void 0===r||r),Qt()),t&&Ht(t),n&&qt(n),e.info("[dash.js "+Lt()+"] MediaPlayer has been initialized")):ot.error(new H.default(C.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,C.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(t){t&&(t.capabilities&&(lt=t.capabilities),t.capabilitiesFilter&&(ct=t.capabilitiesFilter),t.streamController&&(dt=t.streamController),t.textController&&(ft=t.textController),t.gapController&&(ht=t.gapController),t.playbackController&&(pt=t.playbackController),t.mediaPlayerModel&&(st=t.mediaPlayerModel),t.abrController&&(Q=t.abrController),t.schemeLoaderFactory&&(Z=t.schemeLoaderFactory),t.mediaController&&(tt=t.mediaController),t.settings&&(Rt=t.settings))},on:function(t,e,n,r){It.on(t,e,n,r)},off:function(t,e,n){It.off(t,e,n)},extend:function(t,e,n){O.default.extend(t,e,n,Dt)},attachView:Ht,attachSource:qt,isReady:Mt,play:function(){if(!W)throw xt;(!$||Nt()&&W)&&pt.play()},isPaused:Nt,pause:function(){if(!W)throw xt;pt.pause()},isSeeking:function(){if(!W)throw xt;return pt.isSeeking()},isDynamic:function(){if(!W)throw xt;return pt.getIsDynamic()},seek:function(t){if(!W)throw xt;if(Object(Y.checkParameterType)(t,"number"),isNaN(t))throw a.default.BAD_ARGUMENT_ERROR;var e=pt.getIsDynamic()?kt(t):t;pt.seek(e)},setPlaybackRate:function(t){Gt().playbackRate=t},getPlaybackRate:function(){return Gt().playbackRate},setMute:function(t){Object(Y.checkParameterType)(t,"boolean"),Gt().muted=t},isMuted:function(){return Gt().muted},setVolume:function(t){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw a.default.BAD_ARGUMENT_ERROR;Gt().volume=t},getVolume:function(){return Gt().volume},time:Ft,duration:Bt,timeAsUTC:function(){if(!W)throw xt;return Ft()<0?NaN:Zt(Ft())},durationAsUTC:function(){if(!W)throw xt;return Zt(Bt())},getActiveStream:Xt,getDVRWindowSize:function(){var t=dt&&dt.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,e=gt.getCurrentDVRInfo(t);return e?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:kt,convertToTimeCode:function(t){t=Math.max(t,0);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return(0===e?"":e<10?"0"+e.toString()+":":e.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*t),a=i.toLocaleDateString(e),s=i.toLocaleTimeString(e,{hour12:n});return r?s+" "+a:s},getVersion:Lt,getDebug:function(){return Ot},getBufferLength:function(t){var n=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT];if(t)return-1!==n.indexOf(t)?Vt().getCurrentBufferLevel(t)||NaN:(e.warn("getBufferLength requested for invalid type"),NaN);var r=n.map((function(t){return Yt(t).length>0?Vt().getCurrentBufferLevel(t):Number.MAX_VALUE})).reduce((function(t,e){return Math.min(t,e)}));return r===Number.MAX_VALUE?NaN:r},getTTMLRenderingDiv:function(){return vt?vt.getTTMLRenderingDiv():null},getVideoElement:Gt,getSource:function(){if(!n)throw"You must first call attachSource() with a valid source before calling this method";return n},getCurrentLiveLatency:function(){if(!j)throw"MediaPlayer not initialized!";return W?pt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(t){if(!V)throw At;return Q.getTopBitrateInfoFor(t)},setAutoPlay:jt,getAutoPlay:function(){return $},getDashMetrics:Vt,getQualityFor:function(t){if(!V)throw At;if(t===a.default.IMAGE){var e=Xt();if(!e)return-1;var n=e.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return Q.getQualityFor(t)},setQualityFor:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!V)throw At;if(t===a.default.IMAGE){var r=Xt();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(e)}Q.setPlaybackQuality(t,dt.getActiveStreamInfo(),e,{forceReplace:n})},updatePortalSize:function(){Q.setElementSize(),Q.setWindowResizeEventCalled(!0)},enableText:function(t){var e=dt.getActiveStreamInfo();return!(!e||!ft)&&ft.enableText(e.id,t)},enableForcedTextStreaming:function(t){return!(!dt.getActiveStreamInfo()||!ft)&&ft.enableForcedTextStreaming(t)},isTextEnabled:function(){var t=dt.getActiveStreamInfo();return!(!t||!ft)&&ft.isTextEnabled(t)},setTextTrack:function(t){if(!W)throw xt;var e=dt.getActiveStreamInfo();e&&ft&&ft.setTextTrack(e.id,t)},getBitrateInfoListFor:function(t){if(!V)throw At;var e=Xt();return e?e.getBitrateListFor(t):[]},getStreamsFromManifest:function(t){if(!V)throw At;return at.getStreamsInfo(t)},getTracksFor:Yt,getTracksForTypeFromManifest:function(t,e,n){if(!V)throw At;return(n=n||at.getStreamsInfo(e,1)[0])?at.getAllMediaInfoForType(n,t,e):[]},getCurrentTrackFor:function(t){if(!V)throw At;var e=dt.getActiveStreamInfo();return tt.getCurrentTrackFor(t,e.id)},setInitialMediaSettingsFor:function(t,e){if(!j)throw"MediaPlayer not initialized!";tt.setInitialSettings(t,e)},getInitialMediaSettingsFor:function(t){if(!j)throw"MediaPlayer not initialized!";return tt.getInitialSettings(t)},setCurrentTrack:function(t){if(!V)throw At;tt.setTrack(t)},addABRCustomRule:function(t,e,n){st.addABRCustomRule(t,e,n)},removeABRCustomRule:function(t){st.removeABRCustomRule(t)},removeAllABRCustomRule:function(){st.removeABRCustomRule()},getAverageThroughput:function(t){var e=Q.getThroughputHistory(),n=pt.getIsDynamic();return e?e.getAverageThroughput(t,n):0},retrieveManifest:function(t,e){var n=Wt(),r=this;It.on(I.default.INTERNAL_MANIFEST_LOADED,(function t(i){i.error?e(null,i.error):e(i.manifest),It.off(I.default.INTERNAL_MANIFEST_LOADED,t,r),n.reset()}),r),_t.initialize(t),n.load(t)},addUTCTimingSource:function(t,e){st.addUTCTimingSource(t,e)},removeUTCTimingSource:function(t,e){st.removeUTCTimingSource(t,e)},clearDefaultUTCTimingSources:function(){st.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ut,setXHRWithCredentialsForType:function(t,e){st.setXHRWithCredentialsForType(t,e)},getXHRWithCredentialsForType:function(t){return st.getXHRWithCredentialsForType(t)},getProtectionController:function(){return $t()},attachProtectionController:function(t){et=t},setProtectionData:function(t){r=t,dt&&dt.setProtectionData(r)},registerLicenseRequestFilter:function(t){Tt.push(t),et&&et.setLicenseRequestFilters(Tt)},registerLicenseResponseFilter:function(t){St.push(t),et&&et.setLicenseResponseFilters(St)},unregisterLicenseRequestFilter:function(t){zt(Tt,t),et&&et.setLicenseRequestFilters(Tt)},unregisterLicenseResponseFilter:function(t){zt(St,t),et&&et.setLicenseResponseFilters(St)},registerCustomCapabilitiesFilter:function(t){wt.push(t),ct&&ct.setCustomCapabilitiesFilters(wt)},unregisterCustomCapabilitiesFilter:function(t){zt(wt,t),ct&&ct.setCustomCapabilitiesFilters(wt)},setCustomInitialTrackSelectionFunction:function(t){tt&&tt.setCustomInitialTrackSelectionFunction(t)},resetCustomInitialTrackSelectionFunction:function(){tt&&tt.setCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(t){if(!vt.getElement())throw Ct;vt.setTTMLRenderingDiv(t)},getCurrentTextTrackIndex:function(){var t=dt.getActiveStreamInfo();if(t&&ft)return ft.getCurrentTrackIdx(t.id)},provideThumbnail:function(t,e){if("function"==typeof e)if(t<0)e(null);else{var n=pt.getIsDynamic()?kt(t):t,r=dt.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i){var a=dt.getTimeRelativeToStreamId(n,r.getId());return i.provide(a,e)}e(null)}else e(null)}},getDashAdapter:function(){return at},getOfflineController:function(){return Qt()},getSettings:function(){return Rt.get()},updateSettings:function(t){Rt.update(t)},resetSettings:function(){Rt.reset()},reset:Pt,destroy:function(){Pt(),Tt=[],St=[],wt=[],O.default.deleteSingletonInstances(Dt)}},e=Ot.getLogger(t),j=!1,W=!1,V=!1,$=!0,et=null,it=null,r=null,at=null,Et=null,I.default.extend(R.default),st=Object(b.default)(Dt).getInstance(),vt=Object(S.default)(Dt).getInstance(),_t=Object(v.default)(Dt).getInstance(),Tt=[],St=[],wt=[],t}W.__dashjs_factory_name="MediaPlayer";var $=O.default.getClassFactory(W);$.events=R.default,$.errors=C.default,O.default.updateClassFactory(W.__dashjs_factory_name,$),e.default=$},"./src/streaming/MediaPlayerEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var o=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).AST_IN_FUTURE="astInFuture",t.BUFFER_EMPTY="bufferStalled",t.BUFFER_LOADED="bufferLoaded",t.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",t.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",t.DYNAMIC_TO_STATIC="dynamicToStatic",t.ERROR="error",t.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",t.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",t.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",t.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",t.LOG="log",t.MANIFEST_LOADED="manifestLoaded",t.METRICS_CHANGED="metricsChanged",t.METRIC_CHANGED="metricChanged",t.METRIC_ADDED="metricAdded",t.METRIC_UPDATED="metricUpdated",t.PERIOD_SWITCH_STARTED="periodSwitchStarted",t.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",t.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",t.QUALITY_CHANGE_RENDERED="qualityChangeRendered",t.TRACK_CHANGE_RENDERED="trackChangeRendered",t.STREAM_INITIALIZING="streamInitializing",t.STREAM_UPDATED="streamUpdated",t.STREAM_ACTIVATED="streamActivated",t.STREAM_DEACTIVATED="streamDeactivated",t.STREAM_INITIALIZED="streamInitialized",t.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",t.TEXT_TRACKS_ADDED="allTextTracksAdded",t.TEXT_TRACK_ADDED="textTrackAdded",t.TTML_PARSED="ttmlParsed",t.TTML_TO_PARSE="ttmlToParse",t.CAPTION_RENDERED="captionRendered",t.CAPTION_CONTAINER_RESIZE="captionContainerResize",t.CAN_PLAY="canPlay",t.CAN_PLAY_THROUGH="canPlayThrough",t.PLAYBACK_ENDED="playbackEnded",t.PLAYBACK_ERROR="playbackError",t.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",t.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",t.PLAYBACK_LOADED_DATA="playbackLoadedData",t.PLAYBACK_PAUSED="playbackPaused",t.PLAYBACK_PLAYING="playbackPlaying",t.PLAYBACK_PROGRESS="playbackProgress",t.PLAYBACK_RATE_CHANGED="playbackRateChanged",t.PLAYBACK_SEEKED="playbackSeeked",t.PLAYBACK_SEEKING="playbackSeeking",t.PLAYBACK_SEEK_ASKED="playbackSeekAsked",t.PLAYBACK_STALLED="playbackStalled",t.PLAYBACK_STARTED="playbackStarted",t.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",t.PLAYBACK_WAITING="playbackWaiting",t.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",t.EVENT_MODE_ON_START="eventModeOnStart",t.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",t.CONFORMANCE_VIOLATION="conformanceViolation",t.REPRESENTATION_SWITCH="representationSwitch",t}return o}(n("./src/core/events/EventsBase.js").default));e.default=o},"./src/streaming/MediaPlayerFactory.js":function(t,e,n){"use strict";n.r(e);var r,i=n("./src/streaming/MediaPlayer.js"),a=function(){var t;function e(e,n,r){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var a,s=e.id||e.name||"video element";if(!(n=n||[].slice.call(e.querySelectorAll("source")).filter((function(t){return"application/dash+xml"==t.type}))[0])&&e.src)(n=document.createElement("source")).src=e.src;else if(!n&&!e.src)return null;return r=r||{},(a=Object(i.default)(r).create()).initialize(e,n.src,e.autoplay),t||(t=a.getDebug().getLogger()),t.debug("Converted "+s+" to dash.js player and added content: "+n.src),e._dashjs_player=a,a}function n(t){return/^VIDEO$/i.test(t.nodeName)?t:n(t.parentNode)}return{create:e,createAll:function(t,r){var i=[];t=t||"[data-dashjs-player]";for(var a=(r=r||document).querySelectorAll(t),s=0;s<a.length;s++){var o=e(a[s],null);i.push(o)}for(var u=r.querySelectorAll('source[type="application/dash+xml"]'),l=0;l<u.length;l++){var c=e(n(u[l]),null);i.push(c)}return i}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():r=window.setInterval((function(){window.dashjs&&(window.clearInterval(r),a.createAll())}),500):window.addEventListener("load",(function t(){window.removeEventListener("load",t),a.createAll()}))),e.default=a},"./src/streaming/SourceBufferSink.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/core/errors/Errors.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/core/events/Events.js");function d(t){var e,n,a,d,f,h,p=this.context,g=Object(o.default)(p).getInstance(),m=t.textController,y=t.eventBus,v=[],_=[],b=!1,E=t.mediaSource,T=null;function S(t){return new Promise((function(e){M((function(){d.changeType&&d.changeType(t),e()}))}))}function w(t){return d=m.getTextSourceBuffer(t),Promise.resolve()}function A(){if("function"==typeof d.addEventListener)try{d.addEventListener("updateend",O,!1),d.addEventListener("error",P,!1),d.addEventListener("abort",P,!1)}catch(t){h=setInterval(O,50)}else h=setInterval(O,50)}function x(t){return new Promise((function(e){d&&g.get().streaming.buffer.useAppendWindow?M((function(){try{if(!d)return void e();var n=E.duration,r=0;t&&!isNaN(t.start)&&!isNaN(t.duration)&&isFinite(t.duration)&&(n=t.start+t.duration),t&&!isNaN(t.start)&&(r=t.start),d.appendWindowEnd===n&&d.appendWindowStart===r||(d.appendWindowStart=0,d.appendWindowEnd=n+.01,d.appendWindowStart=Math.max(r-.1,0),a.debug("Updated append window for ".concat(f.type,". Set start to ").concat(d.appendWindowStart," and end to ").concat(d.appendWindowEnd))),e()}catch(i){a.warn("Failed to set append window"),e()}})):e()}))}function C(t){return new Promise((function(e){d?M((function(){try{d.timestampOffset===t||isNaN(t)||(d.timestampOffset=t,a.debug("Set MSE timestamp offset to ".concat(t))),e()}catch(n){e()}})):e()}))}function D(){return new Promise((function(t){M((function(){var e=d.appendWindowStart,n=d.appendWindowEnd;d&&(d.abort(),d.appendWindowStart=e,d.appendWindowEnd=n),t()}))}))}function I(){if(!b&&_.length>0){b=!0;var t=_[0];_.splice(0,1);var e=function(){b=!1,_.length>0&&I.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==l.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})};try{T=t.request,0===t.data.bytes.byteLength?e.call(this):(d.appendBuffer?d.appendBuffer(t.data.bytes):d.append(t.data.bytes,t.data),M(e.bind(this)))}catch(n){a.fatal('SourceBuffer append failed "'+n+'"'),_.length>0?I():b=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new i.default(n.code,n.message)})}}}function R(){v.length>0&&(d.updating||(v.shift()(),R()))}function O(){d.updating||R()}function P(t){y.trigger(c.default.SOURCE_BUFFER_ERROR,{error:t.target||{},lastRequestAppended:T}||{},{streamId:f.streamInfo.id,mediaType:n})}function M(t){v.push(t),d.updating||R()}return e={getType:function(){return n},getAllBufferRanges:function(){try{return d.buffered}catch(t){return a.error("getAllBufferRanges exception: "+t.message),null}},getBuffer:function(){return d},append:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,a){t?(_.push({data:t,promise:{resolve:r,reject:a},request:n}),M(I.bind(e))):a({chunk:t,error:new i.default(s.default.APPEND_ERROR_CODE,s.default.APPEND_ERROR_MESSAGE)})}))},remove:function(t){return new Promise((function(e,n){var r=t.start,a=t.end;r>=0&&a>r?M((function(){try{d.remove(r,a),M((function(){e({from:r,to:a,unintended:!1}),t.resolve&&t.resolve()}))}catch(o){n({from:r,to:a,unintended:!1,error:new i.default(s.default.REMOVE_ERROR_CODE,s.default.REMOVE_ERROR_MESSAGE)}),t.reject&&t.reject(o)}})):e()}))},abort:function(){return new Promise((function(t){try{_=[],"open"===E.readyState?M((function(){try{d&&d.abort(),t()}catch(e){t()}})):d&&d.setTextTrack&&"ended"===E.readyState?(d.abort(),t()):t()}catch(e){t()}}))},reset:function(){if(d){try{v=[],function(){try{"function"==typeof d.removeEventListener&&(d.removeEventListener("updateend",O,!1),d.removeEventListener("error",P,!1),d.removeEventListener("abort",P,!1)),clearInterval(h)}catch(t){a.error(t)}}(),b=!1,_=[],d.getClassName&&"TextSourceBuffer"===d.getClassName()||(a.debug("Removing sourcebuffer from media source"),E.removeSourceBuffer(d))}catch(t){}d=null}T=null},updateTimestampOffset:C,initializeForStreamSwitch:function(t,e,r){n=(f=t).type;var i=f.codec;!function(t){d=t.getBuffer()}(r),A();var a=[];return a.push(D),a.push(x(f.streamInfo)),a.push(S(i)),e&&void 0!==e.MSETimeOffset&&a.push(C(e.MSETimeOffset)),Promise.all(a)},initializeForFirstUse:function(t,e,r){n=(f=e).type;var i=f.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return w(t);d=E.addSourceBuffer(i),A();var a=[];return a.push(x(f.streamInfo)),r&&void 0!==r.MSETimeOffset&&a.push(C(r.MSETimeOffset)),Promise.all(a)}catch(s){return f.type==u.default.TEXT&&!f.isFragmented||-1!==i.indexOf('codecs="stpp')||-1!==i.indexOf('codecs="vtt')?w(t):Promise.reject(s)}},updateAppendWindow:x,changeType:S},a=Object(r.default)(p).getInstance().getLogger(e),e}d.__dashjs_factory_name="SourceBufferSink";var f=a.default.getClassFactory(d);e.default=f},"./src/streaming/Stream.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/StreamProcessor.js"),s=n("./src/streaming/controllers/FragmentController.js"),o=n("./src/streaming/thumbnail/ThumbnailController.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/Debug.js"),d=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/streaming/vo/DashJSError.js"),p=n("./src/streaming/utils/BoxParser.js"),g=n("./src/streaming/utils/URLUtils.js"),m=n("./src/streaming/controllers/BlacklistController.js"),y=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT,r.default.MUXED,r.default.IMAGE];function v(t){t=t||{};var e,n,f,v,_,b,E,T,S,w,A,x,C,D,I,R,O,P,M=this.context,L=Object(u.default)(M).getInstance(),N=Object(g.default)(M).getInstance(),k=t.manifestModel,F=t.mediaPlayerModel,B=t.dashMetrics,j=t.manifestUpdater,U=t.adapter,V=t.timelineConverter,G=t.capabilities,H=t.errHandler,Y=t.abrController,z=t.playbackController,q=t.eventController,X=t.mediaController,K=t.protectionController,W=t.textController,$=t.videoModel,Q=t.streamInfo,Z=t.settings;function J(e,s){return new Promise((function(u,c){ot(),w=!0,lt();var p,g=$.getElement();y.forEach((function(s){(s!==r.default.VIDEO||!g||g&&/^VIDEO$/i.test(g.nodeName))&&function(e,s){var u,c=U.getAllMediaInfoForType(Q,e),d=[],h=null;if(c&&0!==c.length){e===r.default.VIDEO&&(E=!0),e===r.default.AUDIO&&(T=!0);for(var p=0,g=c.length;p<g;p++)h=c[p],e===r.default.TEXT&&h.isEmbedded&&(W.addEmbeddedTrack(Q,h),d.push(h)),tt(h)&&X.addTrack(h);if(d.length>0&&(X.setInitialMediaSettingsForType(e,Q),W.setInitialSettings(X.getInitialSettings(e)),W.addMediaInfosToBuffer(Q,e,d)),0!==(c=c.filter((function(t){return!t.isEmbedded}))).length)if(e!==r.default.IMAGE){L.trigger(l.default.STREAM_INITIALIZING,{streamInfo:Q,mediaInfo:h}),X.setInitialMediaSettingsForType(e,Q);var m=function(e,n){var i=e&&e.length>0?e[0]:null,s=A.getModel(i?i.type:null),o=i?i.type:null,u=i?i.mimeType:null,l=i?i.isFragmented:null,c=Object(a.default)(M).create({streamInfo:Q,type:o,mimeType:u,timelineConverter:V,adapter:U,manifestModel:k,mediaPlayerModel:F,fragmentModel:s,dashMetrics:t.dashMetrics,baseURLController:t.baseURLController,segmentBaseController:t.segmentBaseController,abrController:Y,playbackController:z,mediaController:X,textController:W,errHandler:H,settings:Z,boxParser:I,segmentBlacklistController:C});c.initialize(n,E,l),f.push(c);for(var d=0;d<e.length;d++)c.addMediaInfo(e[d]);return o===r.default.TEXT&&W.addMediaInfosToBuffer(Q,o,e,s),c}(c,s);(u=X.getCurrentTrackFor(e,Q.id))&&(Y.updateTopQualityIndex(u),m.selectMediaInfo(e===r.default.TEXT&&u.isEmbedded?c[0]:u))}else(x=Object(o.default)(M).create({streamInfo:Q,adapter:U,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:R,eventBus:L,events:l.default,dashConstants:i.default,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController})).initialize()}else n.info("No "+e+" data.")}(s,e)})),(p=s,new Promise((function(t){var e={},n=f.map((function(t){return t.createBufferSinks(p)}));Promise.all(n).then((function(n){n.forEach((function(t){t&&(e[t.getType()]=t)})),t(e)})).catch((function(){t(e)}))}))).then((function(t){if(w=!1,0===f.length){var e="No streams to play.";H.error(new h.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,k.getValue())),n.fatal(e)}else ct();W.createTracks(Q),u(t)})).catch((function(t){c(t)}))}))}function tt(t){var e=t?t.type:null;return e===r.default.MUXED?(n.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),H.error(new h.default(d.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",k.getValue())),!1):!(e!==r.default.TEXT&&e!==r.default.IMAGE&&t.contentProtection&&!G.supportsEncryptedMedia()&&(H.error(new h.default(d.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,d.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function et(t){for(var e=f?f.length:0,n=0;n<e;n++){var r=f[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),f[n].reset(!1,t)}W&&W.deactivateStream(Q),f=[],_=!1,b=!1,bt(!1),rt(!1),L.trigger(l.default.STREAM_DEACTIVATED,{streamInfo:Q})}function nt(t){et(t),v=!1,E=!1,T=!1,S={},w=!1,O=!1,P=[]}function rt(t){O=t}function it(){return Q?Q.start:NaN}function at(){return Q?Q.id:null}function st(){return Q}function ot(){if(!$||!Y)throw new Error(r.default.MISSING_CONFIG_ERROR)}function ut(t){t.error&&(H.error(t.error),n.fatal(t.error.message))}function lt(){if(q){var t=U.getEventsFor(Q);q.addInlineEvents(t)}}function ct(){for(var t=f.length,e=S.audio||S.video?new h.default(d.default.DATA_UPDATE_FAILED_ERROR_CODE,d.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<t;n++)if(f[n].isUpdating()||w)return;if(K){K.clearMediaInfoArray();for(var i=0;i<t&&f[i];i++){var a=f[i].getType(),s=f[i].getMediaInfo();if(a===r.default.AUDIO||a===r.default.VIDEO||a===r.default.TEXT&&s.isFragmented){var o=f[i].getMediaInfo();o&&K.initializeForMedia(o)}}}e?H.error(e):v||(v=!0,$.waitForReadyState(r.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){L.trigger(l.default.STREAM_INITIALIZED,{streamInfo:Q})})))}function dt(){var t=mt(),e=t.length;if(0!==e){for(var i=0;i<e;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===r.default.AUDIO||t[i].getType()===r.default.VIDEO))return void n.debug("onBufferingCompleted - One streamProcessor has finished but",t[i].getType(),"one is not buffering completed");n.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),b=!0,L.trigger(l.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Q},{streamInfo:Q})}else n.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ft(t){S[t.mediaType]=t.error,ct()}function ht(t){q&&q.addInbandEvents(t.events)}function pt(t){return t&&t.type?gt(t.type):null}function gt(t){return t?mt().filter((function(e){return e.getType()===t}))[0]:null}function mt(){for(var t,e,n=[],i=0;i<f.length;i++)(t=(e=f[i]).getType())!==r.default.AUDIO&&t!==r.default.VIDEO&&t!==r.default.TEXT||n.push(e);return n}function yt(t,e){var n=st(),r=e.getStreamInfo();if(!r||!n)return!0;var i=U.getAdaptationForType(r.index,t,r),a=U.getAdaptationForType(n.index,t,n);return i&&a?!(!vt(a)&&vt(i)):!i&&!a}function vt(t){return!!t&&!!(t.ContentProtection||t.Representation&&t.Representation.length>0&&t.Representation[0].ContentProtection)}function _t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t||!t.hasOwnProperty("getStreamInfo"))return!1;var r=t.getStreamInfo(),i=n?n.getStreamInfo():st();if(!r||!i)return!1;var a=U.getAdaptationForType(r.index,e,r),s=U.getAdaptationForType(i.index,e,i);if(!a||!s)return!a&&!s;var o=a&&s&&a.mimeType===s.mimeType,u=s.Representation_asArray.map((function(t){return t.codecs})),l=a.Representation_asArray.map((function(t){return t.codecs})),c=l.some((function(t){return u.indexOf(t)>-1})),d=l.some((function(t){return u.some((function(e){return G.codecRootCompatibleWithCodec(e,t)}))}));return c||d&&o}function bt(t){D=t}function Et(){return D}return e={initialize:function(){L.on(l.default.BUFFERING_COMPLETED,dt,e),L.on(l.default.DATA_UPDATE_COMPLETED,ft,e),L.on(l.default.INBAND_EVENTS,ht,e),K&&(L.on(l.default.KEY_ERROR,ut,e),L.on(l.default.SERVER_CERTIFICATE_UPDATED,ut,e),L.on(l.default.LICENSE_REQUEST_COMPLETE,ut,e),L.on(l.default.KEY_SYSTEM_SELECTED,ut,e),L.on(l.default.KEY_SESSION_CREATED,ut,e),L.on(l.default.KEY_STATUSES_CHANGED,ut,e)),W.initializeForStream(Q),L.trigger(l.default.STREAM_UPDATED,{streamInfo:Q})},getStreamId:function(){return Q?Q.id:null},activate:function(t,e){return new Promise((function(n,r){if(!_)return Et()?(_=!0,L.trigger(l.default.STREAM_ACTIVATED,{streamInfo:Q}),void n(e)):void function(t,e){return J(t,e)}(t,e).then((function(t){_=!0,L.trigger(l.default.STREAM_ACTIVATED,{streamInfo:Q}),n(t)})).catch((function(t){r(t)}));n(e)}))},deactivate:et,getIsActive:function(){return _},getDuration:function(){return Q?Q.duration:NaN},getStartTime:it,getId:at,getStreamInfo:st,getHasAudioTrack:function(){return T},getHasVideoTrack:function(){return E},startPreloading:function(t,e){return new Promise((function(r,i){Et()?i():(n.info("[startPreloading] Preloading next stream with id ".concat(at())),bt(!0),J(t,e).then((function(){for(var t=0;t<f.length&&f[t];t++)f[t].setExplicitBufferingTime(it()),f[t].getScheduleController().startScheduleTimer();r()})).catch((function(){bt(!1),i()})))}))},getThumbnailController:function(){return x},getBitrateListFor:function(t){if(ot(),t===r.default.IMAGE)return x?x.getBitrateList():[];var e=function(t){for(var e=null,n=0;n<f.length;n++)if((e=f[n]).getType()===t)return e.getMediaInfo();return null}(t);return Y.getBitrateList(e)},updateData:function(t){return new Promise((function(e){w=!0,Q=t,q&&lt();for(var n=[],r=0,i=f.length;r<i;r++){var a=f[r],s=a.getMediaInfo();n.push(a.updateStreamInfo(Q));var o=U.getAllMediaInfoForType(Q,a.getType());if(o){a.clearMediaInfoArray();for(var u=0;u<o.length;u++){var c=o[u];a.addMediaInfo(o[u]),U.areMediaInfosEqual(s,c)&&(Y.updateTopQualityIndex(c),n.push(a.selectMediaInfo(c)))}}}Promise.all(n).then((function(){for(n=[];P.length>0;){var t=P.pop(),e=t.newMediaInfo,r=pt(t.oldMediaInfo);if(!r)return;n.push(r.prepareTrackSwitch()),r.selectMediaInfo(e)}return Promise.all(n)})).then((function(){w=!1,ct(),L.trigger(l.default.STREAM_UPDATED,{streamInfo:Q}),e()}))}))},reset:function(t){A&&(A.reset(),A=null),Y&&Q&&Y.clearDataForStream(Q.id),C&&(C.reset(),C=null),nt(t),Q=null,L.off(l.default.DATA_UPDATE_COMPLETED,ft,e),L.off(l.default.BUFFERING_COMPLETED,dt,e),L.off(l.default.INBAND_EVENTS,ht,e),K&&(L.off(l.default.KEY_ERROR,ut,e),L.off(l.default.SERVER_CERTIFICATE_UPDATED,ut,e),L.off(l.default.LICENSE_REQUEST_COMPLETE,ut,e),L.off(l.default.KEY_SYSTEM_SELECTED,ut,e),L.off(l.default.KEY_SESSION_CREATED,ut,e),L.off(l.default.KEY_STATUSES_CHANGED,ut,e))},getProcessors:mt,setMediaSource:function(t){for(var e=0;e<f.length;)tt(f[e].getMediaInfo())?(f[e].setMediaSource(t),e++):(f[e].reset(),f.splice(e,1));if(0===f.length){var r="No streams to play.";H.error(new h.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",k.getValue())),n.fatal(r)}},isMediaCodecCompatible:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _t(t,r.default.VIDEO,e)&&_t(t,r.default.AUDIO,e)},isProtectionCompatible:function(t){return!t||yt(r.default.VIDEO,t)&&yt(r.default.AUDIO,t)},getPreloaded:Et,getIsEndedEventSignaled:function(){return O},setIsEndedEventSignaled:rt,getAdapter:function(){return U},getHasFinishedBuffering:function(){return b},setPreloaded:bt,startScheduleControllers:function(){for(var t=f.length,e=0;e<t&&f[e];e++)f[e].getScheduleController().startScheduleTimer()},prepareTrackChange:function(t){if(_&&Q){b=!1;var e=t.newMediaInfo,i=k.getValue();U.setCurrentMediaInfo(Q.id,e.type,e);var a=pt(e);if(a){var s=z.getTime();n.info("Stream -  Process track changed at current time "+s),i.refreshManifestOnSwitchTrack?(P.push(t),j.getIsUpdating()||(n.debug("Stream -  Refreshing manifest for switch track"),j.refreshManifest())):a.selectMediaInfo(e).then((function(){e.type!==r.default.VIDEO&&e.type!==r.default.AUDIO||Y.updateTopQualityIndex(e),a.prepareTrackSwitch()}))}}},prepareQualityChange:function(t){var e=gt(t.mediaType);e&&e.prepareQualityChange(t)}},function(){try{R=Object(c.default)(M).getInstance(),n=R.getLogger(e),nt(),I=Object(p.default)(M).getInstance(),C=Object(m.default)(M).create({updateEventName:l.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SEGMENT_LOCATION_BLACKLIST_ADD}),A=Object(s.default)(M).create({streamInfo:Q,mediaPlayerModel:F,dashMetrics:B,errHandler:H,settings:Z,boxParser:I,dashConstants:i.default,urlUtils:N})}catch(t){throw t}}(),e}v.__dashjs_factory_name="Stream",e.default=f.default.getClassFactory(v)},"./src/streaming/StreamProcessor.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/controllers/BufferController.js"),u=n("./src/streaming/text/NotFragmentedTextBufferController.js"),l=n("./src/streaming/controllers/ScheduleController.js"),c=n("./src/dash/controllers/RepresentationController.js"),d=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/utils/SupervisorTools.js"),h=n("./src/core/EventBus.js"),p=n("./src/core/events/Events.js"),g=n("./src/dash/DashHandler.js"),m=n("./src/core/errors/Errors.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/Debug.js"),_=n("./src/streaming/utils/RequestModifier.js"),b=n("./src/streaming/utils/URLUtils.js"),E=n("./src/streaming/utils/BoxParser.js"),T=n("./src/streaming/vo/metrics/PlayList.js"),S=n("./src/dash/controllers/SegmentsController.js"),w=n("./src/streaming/vo/metrics/HTTPRequest.js");function A(t){t=t||{};var e,n,d,A,x,C,D,I,R,O,P,M,L,N=this.context,k=Object(h.default)(N).getInstance(),F=t.streamInfo,B=t.type,j=t.errHandler,U=t.mimeType,V=t.timelineConverter,G=t.adapter,H=t.manifestModel,Y=t.mediaPlayerModel,z=t.fragmentModel,q=t.abrController,X=t.playbackController,K=t.mediaController,W=t.textController,$=t.dashMetrics,Q=t.settings,Z=t.boxParser,J=t.segmentBlacklistController;function tt(){return F.id}function et(){return B}function nt(){return G.getIsTextTrack(I.getData())}function rt(){x=[],A=null,L=0,R=!1,O=!1}function it(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.sender)if(X.getIsManifestUpdateInProgress())lt();else if((!nt()||W.isTextEnabled())&&C&&t.representationId&&!C.appendInitSegmentFromCache(t.representationId)){var n=I.getCurrentRepresentation();if(0===n.range)return void at();var r=P?P.getInitRequest(A,n):null;r?z.executeRequest(r):e&&(D.setInitSegmentRequired(!0),lt())}}function at(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(X.getIsManifestUpdateInProgress()||C.getIsPruningInProgress())lt();else{var n=ut();n?(R=!1,st(n)):ot(e)}}function st(t){isNaN(t.startTime+t.duration)||(L=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+D.getTimeToLoadDelay(),D.setTimeToLoadDelay(0),function(t){var e=t.url;return t.range&&(e=e.concat("_",t.range)),J.contains(e)}(t)?(n.warn("Fragment request url ".concat(t.url," for stream id ").concat(F.id," and media type ").concat(B," is on the ignore list and will be skipped")),lt()):(n.debug("Next fragment request url for stream id ".concat(F.id," and media type ").concat(B," is ").concat(t.url)),z.executeRequest(t))}function ot(t){var e=I.getCurrentRepresentation();if(Q.get().streaming.gaps.enableSeekFix&&!d&&R&&(X.isSeeking()||0===X.getTime())){var r=P.getValidSeekTimeCloseToTargetTime(L,A,e,Q.get().streaming.gaps.threshold);if(!isNaN(r))return void X.seek(r,!1,!1)}if(P.isLastSegmentRequested(e,L)){var i=P.getCurrentIndex();return n.debug("Segment requesting for stream ".concat(F.id," has finished")),k.trigger(p.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:i},{streamId:F.id,mediaType:B}),C.segmentRequestingCompleted(i),void D.clearScheduleTimer()}t&&lt()}function ut(){var t,e=St();if(isNaN(L)||et()===r.default.TEXT&&!W.isTextEnabled())return null;var n=R;if(P){var i=I&&e?I.getRepresentationForQuality(e.quality):null;t=n?P.getSegmentRequestForTime(A,i,L):P.getNextSegmentRequest(A,i)}return t}function lt(){D.startScheduleTimer(Q.get().streaming.lowLatencyEnabled?Q.get().streaming.scheduling.lowLatencyTimeout:Q.get().streaming.scheduling.defaultTimeout)}function ct(t){t.error||(D.setCurrentRepresentation(G.convertRepresentationToRepresentationInfo(t.currentRepresentation)),C.getIsBufferingCompleted()||C.updateBufferTimestampOffset(t.currentRepresentation))}function dt(t){$.addBufferState(B,t.state,D.getBufferTarget()),t.state!==a.default.BUFFER_EMPTY||X.isSeeking()||(n.info("Buffer is empty! Stalling!"),$.pushPlayListTraceMetrics(new Date,T.PlayListTrace.REBUFFERING_REASON))}function ft(t){z.syncExecutedRequestsWithBufferedRange(C.getBuffer().getAllBufferRanges(),F.duration),t.quotaExceeded&&t.from>X.getTime()&&It(t.from),t.hasEnoughSpaceToAppend&&t.quotaExceeded&&D.startScheduleTimer()}function ht(t){if(t&&t.lastRequestAppended&&t.lastRequestAppended.url){var e=t.lastRequestAppended.url;t.lastRequestAppended.range&&(e=e.concat("_",t.lastRequestAppended.range)),n.warn("Blacklisting segment with url ".concat(e)),J.add(e)}}function pt(){Ct(),O=!1}function gt(t){n.info("onFragmentLoadingAbandoned request: "+t.request.url+" has been aborted"),X.isSeeking()||D.getSwitchStrack()||O||(n.info("onFragmentLoadingAbandoned request: "+t.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),t.request&&t.request.isInitializationRequest()?D.setInitSegmentRequired(!0):It(t.request.startTime+t.request.duration/2),D.startScheduleTimer(0))}function mt(t){n.info("OnFragmentLoadingCompleted for stream id "+F.id+" and media type "+B+" - Url:",t.request?t.request.url:"undefined",t.request.range?", Range:"+t.request.range:""),nt()&&D.startScheduleTimer(0),t.error&&t.request.serviceLocation&&function(t){n.info("Fragment loading completed with an error"),t&&t.request&&t.request.type&&(t.request.type===w.HTTPRequest.INIT_SEGMENT_TYPE?it({representationId:t.request.representationId,sender:{}},!1):t.request.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE&&(It(t.request.startTime+t.request.duration/2),at({},!1)))}(t)}function yt(){It(X.getTime()),Tt().startScheduleTimer()}function vt(t){var e=t.currentTrackInfo;if(e){var n=x.find((function(t){return t.index===e.index&&t.lang===e.lang}));n&&Et(n).then((function(){C.setIsBufferingCompleted(!1),It(X.getTime()),D.setInitSegmentRequired(!0),D.startScheduleTimer()}))}}function _t(t){It(t.quotaExceededTime),D.clearScheduleTimer()}function bt(){return C?C.getBuffer():null}function Et(t){t===A||t&&A&&t.type!==A.type||(A=t);var e=G.getRealAdaptation(F,A),n=G.getVoRepresentations(A);if(I){var i,a=I.getData(),s=q.getMaxAllowedIndexFor(B,F.id),o=q.getMinAllowedIndexFor(B,F.id),u=null;return null!==a&&a.id===e.id||B===r.default.TEXT?i=q.getQualityFor(B,F.id):(u=q.getThroughputHistory().getAverageThroughput(B,d)||q.getInitialBitrateFor(B,F.id),i=q.getQualityForBitrate(A,u,F.id)),void 0!==o&&i<o&&(i=o),i>s&&(i=s),I.updateData(e,n,B,A.isFragmented,i)}return Promise.resolve()}function Tt(){return D}function St(t){var e;return void 0!==t?(Object(f.checkInteger)(t),e=I?I.getRepresentationForQuality(t):null):e=I?I.getCurrentRepresentation():null,G.convertRepresentationToRepresentationInfo(e)}function wt(){return!!C&&C.getIsBufferingCompleted()}function At(t){var e=t.chunk,n=e.bytes,r=e.quality,i=St(r),a=I&&i?I.getRepresentationForQuality(i.quality):null;if(i&&a){var o=G.getEventsFor(i.mediaInfo),u=G.getEventsFor(i,a);if(o&&o.length>0||u&&u.length>0){var l=function(e,n,r,i){try{for(var a={},s=[],o=r.concat(i),u=0,l=o.length;u<l;u++)a[o[u].schemeIdUri+"/"+o[u].value]=o[u];var c=Object(E.default)(N).getInstance().parse(e),d=c.getBoxes("emsg");if(!d||0===d.length)return s;for(var f=c.getBox("sidx"),h=!f||isNaN(f.earliest_presentation_time)||isNaN(f.timescale)?n&&!isNaN(n.mediaStartTime)?n.mediaStartTime:0:f.earliest_presentation_time/f.timescale,p=Math.max(h,0),g=I.getCurrentRepresentation(),m=0,y=d.length;m<y;m++){var v=G.getEvent(d[m],a,p,g);v&&s.push(v)}return s}catch(t){return[]}}(n,z.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:e.index})[0],o,u);k.trigger(p.default.INBAND_EVENTS,{events:l},{streamId:F.id})}}}function xt(){var t=X.getTime();Q.get().streaming.buffer.flushBufferAtTrackSwitch&&X.seek(t+.001,!1,!0),It(t),C.setSeekTarget(t),D.startScheduleTimer()}function Ct(){var t=X.getTime();It(C.getContinuousBufferTimeForTargetTime(t)),D.startScheduleTimer()}function Dt(t){t&&!isNaN(t.time)&&(It(t.time),C.setSeekTarget(t.time))}function It(t){L=t,R=!0}return e={initialize:function(n,a,s){M=Object(S.default)(N).create({events:p.default,eventBus:k,streamInfo:F,timelineConverter:V,dashConstants:i.default,segmentBaseController:t.segmentBaseController,type:B}),(P=Object(g.default)(N).create({streamInfo:F,type:B,timelineConverter:V,dashMetrics:$,mediaPlayerModel:Y,baseURLController:t.baseURLController,errHandler:j,segmentsController:M,settings:Q,boxParser:Z,events:p.default,eventBus:k,errors:m.default,debug:Object(v.default)(N).getInstance(),requestModifier:Object(_.default)(N).getInstance(),dashConstants:i.default,constants:r.default,urlUtils:Object(b.default)(N).getInstance()})).initialize(d=F.manifestInfo.isDynamic),q.registerStreamType(B,e),I=Object(c.default)(N).create({streamInfo:F,type:B,abrController:q,dashMetrics:$,playbackController:X,timelineConverter:V,dashConstants:i.default,events:p.default,eventBus:k,errors:m.default,isDynamic:d,segmentsController:M}),(C=function(t,e){return t?t!==r.default.TEXT||e?Object(o.default)(N).create({streamInfo:F,type:t,mediaPlayerModel:Y,manifestModel:H,fragmentModel:z,errHandler:j,mediaController:K,representationController:I,adapter:G,textController:W,abrController:q,playbackController:X,settings:Q}):Object(u.default)(N).create({streamInfo:F,type:t,mimeType:U,fragmentModel:z,textController:W,errHandler:j,settings:Q}):(j.error(new y.default(m.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,m.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(B,s))&&C.initialize(n),(D=Object(l.default)(N).create({streamInfo:F,type:B,mimeType:U,adapter:G,dashMetrics:$,mediaPlayerModel:Y,fragmentModel:z,abrController:q,playbackController:X,textController:W,mediaController:K,bufferController:C,settings:Q})).initialize(a),L=0,R=!1},getStreamId:tt,getType:et,isUpdating:function(){return!!I&&I.isUpdating()},getBufferController:function(){return C},getFragmentModel:function(){return z},getScheduleController:Tt,getRepresentationController:function(){return I},getRepresentationInfo:St,getBufferLevel:function(){return C?C.getBufferLevel():0},isBufferingCompleted:wt,createBufferSinks:function(t){var e=bt();return e?Promise.resolve(e):C?C.createBufferSink(A,t):Promise.resolve(null)},updateStreamInfo:function(t){return F=t,wt()?Promise.resolve():C.updateAppendWindow()},getStreamInfo:function(){return F},selectMediaInfo:Et,clearMediaInfoArray:function(){x=[]},addMediaInfo:function(t){-1===x.indexOf(t)&&x.push(t)},prepareTrackSwitch:function(){return new Promise((function(t){n.debug("Preparing track switch for type ".concat(B));var e=B===r.default.TEXT||Q.get().streaming.trackSwitchMode[B]===r.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&X.getTimeToStreamEnd(F)>Q.get().streaming.buffer.stallThreshold;if(C.getIsBufferingCompleted()&&!e)return C.prepareForNonReplacementTrackSwitch(A.codec).then((function(){k.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:B})})).catch((function(){k.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:B})})),void t();D.clearScheduleTimer(),D.setSwitchTrack(!0),e?(k.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:B,streamId:F.id},{mediaType:B,streamId:F.id}),z.abortRequests(),C.prepareForReplacementTrackSwitch(A.codec).then((function(){var t=St();return C.updateBufferTimestampOffset(t)})).then((function(){xt(),t()})).catch((function(){xt(),t()}))):C.prepareForNonReplacementTrackSwitch(A.codec).then((function(){Ct(),t()})).catch((function(){Ct(),t()}))}))},prepareQualityChange:function(t){n.debug("Preparing quality switch for type ".concat(B));var e=t.newQuality;O=!0,D.clearScheduleTimer();var r=St(e);D.setCurrentRepresentation(r),I.prepareQualityChange(e),z.abortRequests(),C.updateBufferTimestampOffset(r).then((function(){t.reason&&t.reason.forceReplace?(k.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:B,streamId:F.id},{mediaType:B,streamId:F.id}),C.prepareForReplacementQualitySwitch().then((function(){xt(),O=!1})).catch((function(){xt(),O=!1}))):Q.get().streaming.buffer.fastSwitchEnabled?function(t){var e=X.getTime(),n=z.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:e+1.5,threshold:0})[0];if(n&&!nt()){var r=C.getBufferLevel(),i=q.getAbandonmentStateFor(F.id,B);n.quality<t.quality&&r>=1.5&&i!==a.default.ABANDON_LOAD?(It(e+1.5),D.setCheckPlaybackQuality(!1),D.startScheduleTimer()):pt()}else D.startScheduleTimer();O=!1}(r):pt(),$.pushPlayListTraceMetrics(new Date,T.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),$.createPlaylistTraceMetrics(r.id,1e3*X.getTime(),X.getPlaybackRate())}))},getMediaInfo:function(){return A},getMediaSource:function(){return C.getMediaSource()},setMediaSource:function(t){C.setMediaSource(t)},getBuffer:bt,setExplicitBufferingTime:It,finalisePlayList:function(t,e){$.pushPlayListTraceMetrics(t,e)},probeNextRequest:function(){var t=St(),e=I&&t?I.getRepresentationForQuality(t.quality):null;return P.getNextSegmentRequestIdempotent(A,e)},prepareInnerPeriodPlaybackSeeking:function(t){return new Promise((function(e){D.clearScheduleTimer(),z.abortRequests(),C.prepareForPlaybackSeek().then((function(){var e=C.getAllRangesWithSafetyFactor(t.seekTime);return C.clearBuffers(e)})).then((function(){var n=C.getContinuousBufferTimeForTargetTime(t.seekTime);if(!isNaN(F.duration)&&isFinite(F.duration)&&n>=F.start+F.duration)C.setIsBufferingCompleted(!0),e();else{It(n),C.setSeekTarget(n);var r=[];r.push(C.updateAppendWindow());var i=St();r.push(C.updateBufferTimestampOffset(i)),Promise.all(r).then((function(){D.setInitSegmentRequired(!0),D.setCheckPlaybackQuality(!1),D.startScheduleTimer(),e()}))}})).catch((function(t){n.error(t)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(t,e){try{D.clearScheduleTimer(),z.abortRequests(),C.prepareForPlaybackSeek().then((function(){return C.pruneAllSafely()})).then((function(){t()}))}catch(n){e(n)}}))},reset:function(t,n){P&&P.reset(),C&&(C.reset(t,n),C=null),D&&(D.reset(),D=null),I&&(I.reset(),I=null),M&&(M=null),q&&q.unRegisterStreamType(tt(),B),k.off(p.default.DATA_UPDATE_COMPLETED,ct,e),k.off(p.default.INIT_FRAGMENT_NEEDED,it,e),k.off(p.default.MEDIA_FRAGMENT_NEEDED,at,e),k.off(p.default.MEDIA_FRAGMENT_LOADED,At,e),k.off(p.default.BUFFER_LEVEL_STATE_CHANGED,dt,e),k.off(p.default.BUFFER_CLEARED,ft,e),k.off(p.default.SEEK_TARGET,Dt,e),k.off(p.default.FRAGMENT_LOADING_ABANDONED,gt,e),k.off(p.default.FRAGMENT_LOADING_COMPLETED,mt,e),k.off(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,yt,e),k.off(p.default.SET_NON_FRAGMENTED_TEXT,vt,e),k.off(p.default.QUOTA_EXCEEDED,_t,e),k.off(p.default.SOURCE_BUFFER_ERROR,ht,e),rt(),B=null,F=null}},n=Object(v.default)(N).getInstance().getLogger(e),rt(),k.on(p.default.DATA_UPDATE_COMPLETED,ct,e,{priority:h.default.EVENT_PRIORITY_HIGH}),k.on(p.default.INIT_FRAGMENT_NEEDED,it,e),k.on(p.default.MEDIA_FRAGMENT_NEEDED,at,e),k.on(p.default.MEDIA_FRAGMENT_LOADED,At,e),k.on(p.default.BUFFER_LEVEL_STATE_CHANGED,dt,e),k.on(p.default.BUFFER_CLEARED,ft,e),k.on(p.default.SEEK_TARGET,Dt,e),k.on(p.default.FRAGMENT_LOADING_ABANDONED,gt,e),k.on(p.default.FRAGMENT_LOADING_COMPLETED,mt,e),k.on(p.default.QUOTA_EXCEEDED,_t,e),k.on(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,yt,e),k.on(p.default.SET_NON_FRAGMENTED_TEXT,vt,e),k.on(p.default.SOURCE_BUFFER_ERROR,ht,e),e}A.__dashjs_factory_name="StreamProcessor",e.default=d.default.getClassFactory(A)},"./src/streaming/XlinkLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/streaming/vo/TextRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/errors/Errors.js");function d(t){t=t||{};var e=this.context,n=Object(o.default)(e).getInstance(),l=Object(i.default)(e).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,errors:c.default});return{load:function(t,e,i){var o=function(a,s){e.resolved=!0,e.resolvedContent=a||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:e,resolveObject:i,error:a||s?null:new r.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+t)})};if("urn:mpeg:dash:resolve-to-zero:2013"===t)o(null,!0);else{var d=new s.default(t,a.HTTPRequest.XLINK_EXPANSION_TYPE);l.load({request:d,success:function(t){o(t)},error:function(){o(null)}})}},reset:function(){l&&(l.abort(),l=null)}}}d.__dashjs_factory_name="XlinkLoader",e.default=l.default.getClassFactory(d)},"./src/streaming/constants/ConformanceViolationConstants.js":function(t,e,n){"use strict";n.r(e),e.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/constants/MetricsConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/constants/ProtectionConstants.js":function(t,e,n){"use strict";n.r(e);var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e;return(e=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());e.default=r},"./src/streaming/controllers/AbrController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/abr/ABRRulesCollection.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/streaming/vo/BitrateInfo.js"),o=n("./src/streaming/models/FragmentModel.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/rules/RulesContext.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/rules/SwitchRequestHistory.js"),p=n("./src/streaming/rules/DroppedFramesHistory.js"),g=n("./src/streaming/rules/ThroughputHistory.js"),m=n("./src/core/Debug.js"),y=n("./src/streaming/vo/metrics/HTTPRequest.js"),v=n("./src/streaming/utils/SupervisorTools.js"),_=n("./src/streaming/MediaPlayerEvents.js");function b(){var t,e,n,c,b,E,T,S,w,A,x,C,D,I,R,O,P,M,L,N,k,F,B,j,U,V=this.context,G=Object(m.default)(V).getInstance(),H=Object(u.default)(V).getInstance();function Y(){b={},E={},S={},T={},M={},k={},F={},B={},void 0===A&&(A=!1),L&&L.reset(),P=void 0,L=void 0,N=void 0,clearTimeout(w),w=null}function z(e){var r=e.request.mediaType,i=e.streamId;if(r&&i&&T[i]&&U.get().streaming.abr.autoSwitchBitrate[r]){var s=T[i][r];if(s){var u=Object(d.default)(V).create({abrController:t,streamProcessor:s,currentRequest:e.request,useBufferOccupancyABR:k[r],useL2AABR:F[r],useLoLPABR:B[r],videoModel:I}),l=n.shouldAbandonFragment(u,i);if(l.quality>f.default.NO_CHANGE){var h=s.getFragmentModel();h.getRequests({state:o.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(h.abortRequests(),S[i][r].state=a.default.ABANDON_LOAD,M[i][r].reset(),M[i][r].push({oldValue:$(r,i),newValue:l.quality,confidence:1,reason:l.reason}),Q(r,c.getActiveStreamInfo(),l.quality,l.reason),clearTimeout(w),w=setTimeout((function(){S[i][r].state=a.default.ALLOW_LOAD,w=null}),U.get().streaming.abandonLoadTimeout))}}}}function q(t){t.mediaType===i.default.VIDEO&&(void 0!==P&&L.push(t.streamId,P,I.getPlaybackQuality()),P=t.newQuality)}function X(t){var n,r;t.metric!==a.default.HTTP_REQUEST||!t.value||t.value.type!==y.HTTPRequest.MEDIA_SEGMENT_TYPE||t.mediaType!==i.default.AUDIO&&t.mediaType!==i.default.VIDEO||N.push(t.mediaType,t.value,U.get().streaming.abr.useDeadTimeLatency),t.metric!==a.default.BUFFER_LEVEL||t.mediaType!==i.default.AUDIO&&t.mediaType!==i.default.VIDEO||(n=t.mediaType,r=.001*t.value.level,U.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_DYNAMIC&&function(t,n){var r=R.getStableBufferTime(),i=k[t],a=n>(i?.5*r:r);k[t]=a,a!==i&&e.info(a?"["+t+"] switching from throughput to buffer occupancy ABR rule (buffer: "+n.toFixed(3)+").":"["+t+"] switching from buffer occupancy to throughput ABR rule (buffer: "+n.toFixed(3)+").")}(n,r))}function K(t,e){try{return b[e]=b[e]||{},b[e].hasOwnProperty(t)||(b[e][t]=0),function(t,e,n){if(e!==i.default.VIDEO||!U.get().streaming.abr.limitBitrateByPortal||!T[n]||!T[n][e])return t;A||et();var r=T[n][e].getStreamInfo(),a=D.getAdaptationForType(r.index,e,r).Representation,s=t;if(x>0&&C>0){for(;s>0&&a[s]&&x<a[s].width&&x-a[s-1].width<a[s].width-x;)s-=1;for(;s<a.length-1&&a[s].width===a[s+1].width;)s+=1}return s}(function(t,e,n){var r=b[n][e],i=U.get().streaming.abr.maxRepresentationRatio[e];return isNaN(i)||i>=1||i<0?t:Math.min(t,Math.round(r*i))}(function(t,e){var n=b[e][t],r=n;if(!T[e]||!T[e][t])return r;var i=W(t,e);void 0!==i&&(r=Math.max(n,i));var a=function(t,e){try{var n=U.get().streaming.abr.maxBitrate[t];return n>-1?J(T[e][t].getMediaInfo(),n,e):void 0}catch(r){return}}(t,e);return void 0!==a&&(r=Math.min(r,a)),r}(t,e),t,e),t,e)}catch(n){return}}function W(t,e){try{return function(t,e){try{var n=U.get().streaming.abr.minBitrate[t];if(n>-1){var r=T[e][t].getMediaInfo(),i=tt(r),a=J(r,n,e);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}return}catch(s){return}}(t,e)}catch(n){return}}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return e||(e=c.getActiveStreamInfo().id),t&&T[e]&&T[e][t]&&e?(E[e]=E[e]||{},E[e].hasOwnProperty(t)||(E[e][t]=0),E[e][t]):0}catch(n){return 0}}function Q(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e&&e.id&&t){var i=e.id,a=$(t,i);Object(v.checkInteger)(n);var s=K(t,i);n!==a&&n>=0&&n<=s&&Z(t,a,n,s,r,i)}}function Z(t,n,r,i,a,s){if(t&&T[s]&&T[s][t]){var o=T[s][t].getStreamInfo(),u=o&&o.manifestInfo&&o.manifestInfo.isDynamic,c=j.getCurrentBufferLevel(t);e.info("Stream ID: "+s+" ["+t+"] switch from "+n+" to "+r+"/"+i+" (buffer: "+c+") "+(a?JSON.stringify(a):".")),E[s]=E[s]||{},E[s][t]=r;var d=function(t,e,n){if(e&&T&&T[t]&&T[t][e]){var r=tt(T[t][e].getMediaInfo());return r[n]?r[n]:null}return null}(s,t,r);H.trigger(l.default.QUALITY_CHANGE_REQUESTED,{oldQuality:n,newQuality:r,reason:a,streamInfo:o,bitrateInfo:d,maxIdx:i,mediaType:t},{streamId:o.id,mediaType:t});var f=N.getAverageThroughput(t,u);isNaN(f)||O.setSavedBitrateSettings(t,f)}}function J(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t&&t.type?T[n][t.type].getRepresentationInfo():null;if(U.get().streaming.abr.useDeadTimeLatency&&r&&i&&i.fragmentDuration){var a=i.fragmentDuration;if((r/=1e3)>a)return 0;var s=r/a;e*=1-s}for(var o=tt(t),u=o.length-1;u>=0;u--){var l=o[u];if(1e3*e>=l.bitrate)return u}return 0}function tt(t){var e=[];if(!t||!t.bitrateList)return e;for(var n,r=t.bitrateList,i=t.type,a=0,o=r.length;a<o;a++)(n=new s.default).mediaType=i,n.qualityIndex=a,n.bitrate=r[a].bandwidth,n.width=r[a].width,n.height=r[a].height,n.scanType=r[a].scanType,e.push(n);return e}function et(){if(I){var t=U.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;x=I.getClientWidth()*t,C=I.getClientHeight()*t}}return e=G.getLogger(t={initialize:function(){L=Object(p.default)(V).create(),N=Object(g.default)(V).create({settings:U}),(n=Object(r.default)(V).create({dashMetrics:j,mediaPlayerModel:R,settings:U})).initialize(),H.on(_.default.QUALITY_CHANGE_RENDERED,q,t),H.on(_.default.METRIC_ADDED,X,t),H.on(l.default.LOADING_PROGRESS,z,t)},isPlayingAtTopQuality:function(t){var e=t?t.id:null,n=$(i.default.AUDIO,e),r=$(i.default.VIDEO,e);return n===K(i.default.AUDIO,e)&&r===K(i.default.VIDEO,e)},updateTopQualityIndex:function(t){var e=t.type,n=t.streamInfo.id,r=t.representationCount-1;return b[n]=b[n]||{},b[n][e]=r,r},clearDataForStream:function(t){L&&L.clearForStream(t),T[t]&&delete T[t],M[t]&&delete M[t],S[t]&&delete S[t]},getThroughputHistory:function(){return N},getBitrateList:tt,getQualityForBitrate:J,getTopBitrateInfoFor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e||(e=c.getActiveStreamInfo().id),t&&T&&T[e]&&T[e][t]){var n=K(t,e),r=tt(T[e][t].getMediaInfo());return r[n]?r[n]:null}return null},getMinAllowedIndexFor:W,getMaxAllowedIndexFor:K,getInitialBitrateFor:function(t,e){if(function(){if(!O||!O.hasOwnProperty("getSavedBitrateSettings"))throw new Error(i.default.MISSING_CONFIG_ERROR)}(),t===i.default.TEXT)return NaN;var n=O.getSavedBitrateSettings(t),r=U.get().streaming.abr.initialBitrate[t],a=U.get().streaming.abr.initialRepresentationRatio[t];if(-1===r)if(a>-1){var s=T[e][t].getStreamInfo(),o=D.getAdaptationForType(s.index,t,s).Representation;r=Array.isArray(o)?o[Math.max(Math.round(o.length*a)-1,0)].bandwidth/1e3:0}else r=isNaN(n)?t===i.default.VIDEO?1e3:100:n;return r},getQualityFor:$,getAbandonmentStateFor:function(t,e){return S[t]&&S[t][e]?S[t][e].state:null},setPlaybackQuality:Q,checkPlaybackQuality:function(e,r){try{if(!(e&&T&&T[r]&&T[r][e]))return!1;if(L){var i=I.getPlaybackQuality();i&&L.push(r,P,i)}if(!U.get().streaming.abr.autoSwitchBitrate[e])return!1;var s=$(e,r),o=Object(d.default)(V).create({abrController:t,switchHistory:M[r][e],droppedFramesHistory:L,streamProcessor:T[r][e],currentValue:s,useBufferOccupancyABR:k[e],useL2AABR:F[e],useLoLPABR:B[e],videoModel:I}),u=W(e,r),l=K(e,r),c=n.getMaxQuality(o),h=c.quality;return void 0!==u&&(h>f.default.NO_CHANGE?h:s)<u&&(h=u),h>l&&(h=l),M[r][e].push({oldValue:s,newValue:h}),h>f.default.NO_CHANGE&&h!==s&&(S[r][e].state===a.default.ALLOW_LOAD||h>s)&&(Z(e,s,h,l,c.reason,r),!0)}catch(p){return!1}},setElementSize:et,setWindowResizeEventCalled:function(t){A=t},registerStreamType:function(t,e){var n=e.getStreamInfo().id;T[n]||(T[n]={}),M[n]||(M[n]={}),S[n]||(S[n]={}),M[n][t]=Object(h.default)(V).create(),T[n][t]=e,S[n][t]={},S[n][t].state=a.default.ALLOW_LOAD,function(t){var e=U.get().streaming.abr.ABRStrategy;e===i.default.ABR_STRATEGY_L2A?(k[t]=!1,B[t]=!1,F[t]=!0):e===i.default.ABR_STRATEGY_LoLP?(k[t]=!1,B[t]=!0,F[t]=!1):e===i.default.ABR_STRATEGY_BOLA?(k[t]=!0,B[t]=!1,F[t]=!1):e===i.default.ABR_STRATEGY_THROUGHPUT?(k[t]=!1,B[t]=!1,F[t]=!1):e===i.default.ABR_STRATEGY_DYNAMIC&&(k[t]=!(!k||!k[t])&&k[t],B[t]=!1,F[t]=!1)}(t),t===i.default.VIDEO&&et()},unRegisterStreamType:function(t,e){try{T[t]&&T[t][e]&&delete T[t][e],M[t]&&M[t][e]&&delete M[t][e],S[t]&&S[t][e]&&delete S[t][e]}catch(n){}},setConfig:function(t){t&&(t.streamController&&(c=t.streamController),t.domStorage&&(O=t.domStorage),t.mediaPlayerModel&&(R=t.mediaPlayerModel),t.dashMetrics&&(j=t.dashMetrics),t.adapter&&(D=t.adapter),t.videoModel&&(I=t.videoModel),t.settings&&(U=t.settings))},reset:function(){Y(),H.off(l.default.LOADING_PROGRESS,z,t),H.off(_.default.QUALITY_CHANGE_RENDERED,q,t),H.off(_.default.METRIC_ADDED,X,t),n&&n.reset()}}),Y(),t}b.__dashjs_factory_name="AbrController";var E=c.default.getSingletonFactory(b);E.QUALITY_DEFAULT=0,c.default.updateSingletonFactory(b.__dashjs_factory_name,E),e.default=E},"./src/streaming/controllers/BaseURLController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/models/BaseURLTreeModel.js"),i=n("./src/streaming/utils/BaseURLSelector.js"),a=n("./src/streaming/utils/URLUtils.js"),s=n("./src/dash/vo/BaseURL.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js");function c(){var t,e,n,o,c=this.context,d=Object(u.default)(c).getInstance(),f=Object(a.default)(c).getInstance();return t={reset:function(){n.reset(),o.reset()},initialize:function(t){var r;n.setConfig({adapter:e}),n.update(r=t),o.chooseSelector(e.getIsDVB(r))},resolve:function(t){var e=n.getForPath(t).reduce((function(t,e){var n=o.select(e);return n?(f.isRelative(n.url)?t.url=f.resolve(n.url,t.url):(t.url=n.url,t.serviceLocation=n.serviceLocation),t.availabilityTimeOffset=n.availabilityTimeOffset,t.availabilityTimeComplete=n.availabilityTimeComplete,t):new s.default}),new s.default);if(!f.isRelative(e.url))return e},setConfig:function(t){t.baseURLTreeModel&&(n=t.baseURLTreeModel),t.baseURLSelector&&(o=t.baseURLSelector),t.adapter&&(e=t.adapter)}},n=Object(r.default)(c).create(),o=Object(i.default)(c).create(),d.on(l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(t){n.invalidateSelectedIndexes(t.entry)}),t),t}c.__dashjs_factory_name="BaseURLController",e.default=o.default.getClassFactory(c)},"./src/streaming/controllers/BlacklistController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js");function a(t){var e;t=t||{};var n=[],r=Object(i.default)(this.context).getInstance(),a=t.updateEventName,s=t.addBlacklistEventName;function o(t){-1===n.indexOf(t)&&(n.push(t),r.trigger(a,{entry:t}))}return e={add:o,contains:function(t){return!!(n.length&&t&&t.length)&&-1!==n.indexOf(t)},reset:function(){n=[]}},s&&r.on(s,(function(t){o(t.entry)}),e),e}a.__dashjs_factory_name="BlackListController",e.default=r.default.getClassFactory(a)},"./src/streaming/controllers/BufferController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/SourceBufferSink.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/Debug.js"),d=n("./src/streaming/utils/InitCache.js"),f=n("./src/streaming/vo/DashJSError.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/streaming/vo/metrics/HTTPRequest.js"),g=n("./src/streaming/MediaPlayerEvents.js");function m(t){t=t||{};var e,n,l,m,y,v,_,b,E,T,S,w,A,x,C,D,I,R,O=this.context,P=Object(o.default)(O).getInstance(),M=t.errHandler,L=t.fragmentModel,N=t.representationController,k=t.adapter,F=t.textController,B=t.abrController,j=t.playbackController,U=t.streamInfo,V=t.type,G=t.settings;function H(t){v=t}function Y(t){return k.convertRepresentationToRepresentationInfo(N.getRepresentationForQuality(t))}function z(t,e,n){var i=Y(n);return e&&e[V]&&(V===r.default.VIDEO||V===r.default.AUDIO)?E.initializeForStreamSwitch(t,i,e[V]):E.initializeForFirstUse(U,t,i)}function q(t){G.get().streaming.cacheInitSegments&&(n.info("Init fragment finished loading saving to",V+"'s init cache"),C.save(t.chunk)),n.debug("Append Init fragment",V," with representationId:",t.chunk.representationId," and quality:",t.chunk.quality,", data size:",t.chunk.bytes.byteLength),K(t.chunk)}function X(t){K(t.chunk,t.request)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E.append(t,e).then((function(t){$(t)})).catch((function(t){$(t)})),t.mediaInfo.type===r.default.VIDEO&&vt(u.default.VIDEO_CHUNK_RECEIVED,{chunk:t})}function W(t){if(t&&t.length>0)for(var e=0,r=t.length;e<r;e++)n.debug("Buffered range: "+t.start(e)+" - "+t.end(e)+", currentTime = ",j.getTime())}function $(t){if(t.error)return 22===t.error.code&&function(){if(x=!0,y=.8*mt(),n.warn("Quota exceeded, Critical Buffer: "+y),y>0){var t=Math.max(.2*y,1),e=y-t,r=Math.min(G.get().streaming.buffer.bufferTimeAtTopQuality,.9*e),i=Math.min(G.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*e),a={streaming:{buffer:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(r.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};G.update(a)}}(),void(22!==t.error.code&&yt()||(n.warn("Clearing playback buffer to overcome quota exceed situation"),vt(u.default.QUOTA_EXCEEDED,{criticalBufferLevel:y,quotaExceededTime:t.chunk.start}),ut(ot())));if(E&&(rt(),x=!1,(S=t.chunk)&&S.endFragment)){S&&!isNaN(S.index)&&(_=Math.max(S.index,_),it());var e=E.getAllBufferRanges();S.segmentType===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&(W(e),J(),function(){if(!isNaN(R))if(V===r.default.AUDIO||V===r.default.VIDEO){var t=j.getTime(),e=nt(R,0);if(t===R&&e)R=NaN;else{var n=N.getCurrentRepresentation().segmentDuration;(e=nt(R,n))&&(G.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(t-R)>n?R<=e.end&&(j.seek(Math.max(R,e.start),!1,!0),R=NaN):t<e.start&&(j.seek(e.start,!1,!0),R=NaN))}}else R=NaN}()),S&&vt(u.default.BYTES_APPENDED_END_FRAGMENT,{quality:S.quality,startTime:S.start,index:S.index,bufferedRanges:e,segmentType:S.segmentType,mediaType:V})}}function Q(){return new Promise((function(t,e){var n=Z();if(!n||0===n.length)return J(),void t();ut(n).then((function(){t()})).catch((function(t){e(t)}))}))}function Z(t){var e=[],n=E.getAllBufferRanges();if(!n||0===n.length)return e;if(!t&&0!==t||isNaN(t))e.push({start:n.start(0),end:n.end(n.length-1)+.5});else{var r=function(t,e){var n=G.get().streaming.buffer.bufferToKeep,r=e.start(0);if(t-r>n){var i=Math.max(0,t-n),s=L.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(s&&(i=Math.min(s.startTime,i)),i>0)return{start:r,end:i}}return null}(t,n),i=function(t,e){var n=e.end(e.length-1)+.5,r=U.manifestInfo.duration>=G.get().streaming.buffer.longFormContentDurationThreshold?G.get().streaming.buffer.bufferTimeAtTopQualityLongForm:G.get().streaming.buffer.bufferTimeAtTopQuality;if(n-t>r){var i=t+r,s=L.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(s&&(i=Math.max(s.startTime+s.duration,i)),i<n)return{start:i,end:n}}return null}(t,n);r&&e.push(r),i&&e.push(i)}return e}function J(){(!I||V===r.default.TEXT&&F.isTextEnabled())&&rt()}function tt(){at()}function et(){at(),R=NaN}function nt(t,e){var n,r,i=E.getAllBufferRanges(),a=0,s=0,o=null,u=null,l=0,c=isNaN(e)?.15:e;if(null!=i){for(r=0,n=i.length;r<n;r++)if(a=i.start(r),s=i.end(r),null===o)l=Math.abs(a-t),(t>=a&&t<s||l<=c)&&(o=a,u=s);else{if(!((l=a-u)<=c))break;u=s}if(null!==o)return{start:o,end:u}}return null}function rt(){if(j){var t=G.get().streaming.gaps.jumpGaps&&!isNaN(G.get().streaming.gaps.smallGapLimit)?G.get().streaming.gaps.smallGapLimit:NaN;m=Math.max(function(t,e){var n;return G.get().streaming.gaps.jumpGaps&&(e=G.get().streaming.gaps.smallGapLimit),null===(n=nt(t,e))?0:n.end-t}(j.getTime()||0,t),0),vt(u.default.BUFFER_LEVEL_UPDATED,{mediaType:V,bufferLevel:m}),at()}}function it(){var t=_>=b-1,e=j.getTimeToStreamEnd(U)-m<=0;!t&&!e||l||(gt(!0),n.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(U.id," and type ").concat(V)))}function at(){V!==r.default.AUDIO&&V!==r.default.VIDEO||((!G.get().streaming.lowLatencyEnabled&&m<G.get().streaming.buffer.stallThreshold||0===m)&&!l?st(i.default.BUFFER_EMPTY):(l||m>=G.get().streaming.buffer.stallThreshold||G.get().streaming.lowLatencyEnabled&&m>0)&&st(i.default.BUFFER_LOADED))}function st(t){T===t||t===i.default.BUFFER_EMPTY&&0===j.getTime()||V===r.default.TEXT&&!F.isTextEnabled()||(T=t,vt(u.default.BUFFER_LEVEL_STATE_CHANGED,{state:t}),vt(t===i.default.BUFFER_LOADED?u.default.BUFFER_LOADED:u.default.BUFFER_EMPTY),n.debug(t===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ot(){var t=[],e=E.getAllBufferRanges();if(!e||0===e.length)return t;var n=j.getTime(),r=Math.max(0,n-G.get().streaming.buffer.bufferToKeep),i=L.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&j.getIsDynamic())return[];if(e.start(0)<=r){for(var s={start:0,end:r},o=0;o<e.length&&e.end(o)<=r;o++)s.end=e.end(o);s.start<s.end&&t.push(s)}return t}function ut(t){return new Promise((function(e,n){if(t&&E&&0!==t.length){var r=[];t.forEach((function(t){r.push(function(t){return new Promise((function(e,n){t.resolve=e,t.reject=n,D.push(t)}))}(t))})),A||lt(),Promise.all(r).then((function(){e()})).catch((function(t){n(t)}))}else e()}))}function lt(){try{if(0===D.length||!E)return n.debug("Nothing to prune, halt pruning"),D=[],void(A=!1);var t=E.getBuffer();if(!t||!t.buffered||0===t.buffered.length)return n.debug("SourceBuffer is empty (or does not exist), halt pruning"),D=[],void(A=!1);var e=D.shift();n.debug("".concat(V,": Removing buffer from: ").concat(e.start," to ").concat(e.end)),A=!0,j.getTime()<e.end&&gt(!1),E.remove(e).then((function(t){ct(t)})).catch((function(t){ct(t)}))}catch(r){A=!1}}function ct(t){n.debug("onRemoved buffer from:",t.from,"to",t.to),W(E.getAllBufferRanges()),0===D.length&&(A=!1,rt()),t.unintended&&(n.warn("Detected unintended removal from:",t.from,"to",t.to,"setting streamprocessor time to",t.from),vt(u.default.SEEK_TARGET,{time:t.from})),A?lt():(I?I=!1:rt(),vt(u.default.BUFFER_CLEARED,{from:t.from,to:t.to,unintended:t.unintended,hasEnoughSpaceToAppend:yt(),quotaExceeded:x}))}function dt(t){return new Promise((function(e){t&&void 0!==t.MSETimeOffset&&E&&E.updateTimestampOffset?E.updateTimestampOffset(t.MSETimeOffset).then((function(){e()})).catch((function(){e()})):e()}))}function ft(){return E&&!l?E.updateAppendWindow(U):Promise.resolve()}function ht(){++w*(G.get().streaming.wallclockTimeUpdateInterval/1e3)>=G.get().streaming.buffer.bufferPruningInterval&&(w=0,E&&V!==r.default.TEXT&&(l||ut(ot())))}function pt(){at()}function gt(t){l!==t&&((l=t)?vt(u.default.BUFFERING_COMPLETED):b=Number.POSITIVE_INFINITY)}function mt(){try{var t,e,n=E.getAllBufferRanges(),r=0;if(!n)return r;for(e=0,t=n.length;e<t;e++)r+=n.end(e)-n.start(e);return r}catch(i){return 0}}function yt(){var t=mt();return isNaN(t)||t<y}function vt(t,e){P.trigger(t,e||{},{streamId:U.id,mediaType:V})}function _t(t,e){y=Number.POSITIVE_INFINITY,T=void 0,b=Number.POSITIVE_INFINITY,_=0,S=null,l=!1,A=!1,x=!1,m=0,w=0,D=[],R=NaN,E&&(t||e?E=null:E.abort().then((function(){E.reset(e),E=null}))),I=!1}return e={initialize:function(t){H(t),P.on(u.default.INIT_FRAGMENT_LOADED,q,e),P.on(u.default.MEDIA_FRAGMENT_LOADED,X,e),P.on(u.default.WALLCLOCK_TIME_UPDATED,ht,e),P.on(g.default.PLAYBACK_PLAYING,et,e),P.on(g.default.PLAYBACK_PROGRESS,J,e),P.on(g.default.PLAYBACK_TIME_UPDATED,J,e),P.on(g.default.PLAYBACK_RATE_CHANGED,pt,e),P.on(g.default.PLAYBACK_STALLED,tt,e)},getStreamId:function(){return U.id},getType:function(){return V},getBufferControllerType:function(){return"BufferController"},createBufferSink:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r,i){if(C&&t&&v){var a=B.getQualityFor(V,U.id);E=Object(s.default)(O).create({mediaSource:v,textController:F,eventBus:P}),z(t,e,a).then((function(){return dt(Y(a))})).then((function(){r(E)})).catch((function(t){n.fatal("Caught error on create SourceBuffer: "+t),M.error(new f.default(h.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,h.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+V)),i(t)}))}else r(null)}))},getBuffer:function(){return E},getBufferLevel:function(){return m},getRangeAt:nt,setMediaSource:H,getMediaSource:function(){return v},appendInitSegmentFromCache:function(t){var e=C.extract(U.id,t);return!!e&&(n.info("Append Init fragment",V," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),K(e),!0)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:gt,getIsPruningInProgress:function(){return A},reset:function(t,e){P.off(u.default.INIT_FRAGMENT_LOADED,q,this),P.off(u.default.MEDIA_FRAGMENT_LOADED,X,this),P.off(u.default.WALLCLOCK_TIME_UPDATED,ht,this),P.off(g.default.PLAYBACK_PLAYING,et,this),P.off(g.default.PLAYBACK_PROGRESS,J,this),P.off(g.default.PLAYBACK_TIME_UPDATED,J,this),P.off(g.default.PLAYBACK_RATE_CHANGED,pt,this),P.off(g.default.PLAYBACK_STALLED,tt,this),_t(t,e)},prepareForPlaybackSeek:function(){return l&&gt(!1),E.abort()},prepareForReplacementTrackSwitch:function(t){return new Promise((function(e,n){E.abort().then((function(){return ft()})).then((function(){return E.changeType(t)})).then((function(){return Q()})).then((function(){gt(!1),e()})).catch((function(t){n(t)}))}))},prepareForNonReplacementTrackSwitch:function(t){return new Promise((function(e,n){ft().then((function(){return E.changeType(t)})).then((function(){e()})).catch((function(t){n(t)}))}))},prepareForReplacementQualitySwitch:function(){return new Promise((function(t,e){E.abort().then((function(){return ft()})).then((function(){return Q()})).then((function(){gt(!1),t()})).catch((function(t){e(t)}))}))},updateAppendWindow:ft,getAllRangesWithSafetyFactor:Z,getContinuousBufferTimeForTargetTime:function(t){try{var e=t,n=E.getAllBufferRanges();if(!n||0===n.length)return t;for(var r=0;e===t&&r<n.length;){var i=n.start(r),a=n.end(r);e>=i&&e<=a&&(e=a),r+=1}return e}catch(s){}},clearBuffers:ut,pruneAllSafely:Q,updateBufferTimestampOffset:dt,setSeekTarget:function(t){R=t},segmentRequestingCompleted:function(t){isNaN(t)||(b=t,it())}},n=Object(c.default)(O).getInstance().getLogger(e),C=Object(d.default)(O).getInstance(),_t(),e}m.__dashjs_factory_name="BufferController",e.default=l.default.getClassFactory(m)},"./src/streaming/controllers/EventController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/streaming/net/XHRLoader.js");function u(){var t,e,n,r,u,l,c,d,f,h,p,g=this.context,m=Object(a.default)(g).getInstance();function y(){if(!c||!d)throw new Error("setConfig function has to be called previously")}function v(){p=!1,n={},r={},u=null,h=!1,l=Date.now()/1e3}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.eventStream.schemeIdUri,i=t.eventStream.value,a=t.id,s="discarded";e[r]||(e[r]=[]);var o=e[r].findIndex((function(t){return(!i||t.eventStream.value&&t.eventStream.value===i)&&t.id===a}));return-1===o?(e[r].push(t),s="added"):n&&(e[r][o]=t,s="updated"),s}function b(t){try{1==t.eventStream.value&&m.trigger(s.default.MANIFEST_VALIDITY_CHANGED,{id:t.id,validUntil:t.calculatedPresentationTime,newDuration:4294967295==t.calculatedPresentationTime?NaN:t.calculatedPresentationTime+t.duration,newManifestValidAfter:NaN},{mode:s.default.EVENT_MODE_ON_START})}catch(e){}}function E(){try{if(!h){h=!0;var t=d.getTime(),e=t-l;e=l>0?Math.max(0,e):0,T(r,e,t),T(n,e,t),l=t,h=!1}}catch(i){h=!1}}function T(t,n,r){try{w(t,(function(i){if(void 0!==i){var a=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=r&&i.calculatedPresentationTime+n+a>=r?A(i,t,s.default.EVENT_MODE_ON_START):(function(t,e,n){try{return t-e>n}catch(r){return!1}}(r,a+n,i.calculatedPresentationTime)||function(t){try{return t.calculatedPresentationTime>t.eventStream.period.start+t.eventStream.period.duration}catch(e){return!1}}(i))&&(e.debug("Deleting event ".concat(i.id," as it is expired or invalid")),x(t,i))}}))}catch(i){}}function S(t){try{var e=d.getTime();w(t,(function(n){var r=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.duration)?n.eventStream.period.duration:NaN,i=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.start)?n.eventStream.period.start:NaN;isNaN(r)||isNaN(i)||Math.abs(n.calculatedPresentationTime-e)<300&&A(n,t,s.default.EVENT_MODE_ON_START)}))}catch(n){}}function w(t,e){try{if(t)for(var n=Object.keys(t),r=0;r<n.length;r++)t[n[r]].forEach((function(t){void 0!==t&&e(t)}))}catch(i){}}function A(t,n,r){try{var i=d.getTime(),a=t.id;if(r===s.default.EVENT_MODE_ON_RECEIVE)return e.debug("Received event ".concat(a)),void m.trigger(t.eventStream.schemeIdUri,{event:t},{mode:r});"urn:mpeg:dash:event:2012"===t.eventStream.schemeIdUri&&1==t.eventStream.value?0===t.duration&&0===t.presentationTimeDelta||(e.debug("Starting manifest refresh event ".concat(a," at ").concat(i)),x(n,t),function(){try{y(),c.refreshManifest()}catch(t){}}()):"urn:mpeg:dash:event:callback:2015"===t.eventStream.schemeIdUri&&1==t.eventStream.value?(e.debug("Starting callback event ".concat(a," at ").concat(i)),x(n,t),function(t){try{Object(o.default)(g).create({}).load({method:"get",url:t,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(t.messageData)):(e.debug("Starting event ".concat(a," at ").concat(i)),x(n,t),m.trigger(t.eventStream.schemeIdUri,{event:t},{mode:r}))}catch(u){}}function x(t,e){var n=e.eventStream.schemeIdUri,r=e.eventStream.value,i=e.id;t[n]=t[n].filter((function(t){return r&&t.eventStream.value&&t.eventStream.value!==r||t.id!==i})),0===t[n].length&&delete t[n]}return t={addInlineEvents:function(t){try{if(y(),t)for(var r=0;r<t.length;r++){var i=t[r],a=_(i,n,!0);"added"===a?(e.debug("Added inline event with id ".concat(i.id)),A(i,t,s.default.EVENT_MODE_ON_RECEIVE)):"updated"===a&&e.debug("Updated inline event with id ".concat(i.id))}}catch(o){throw o}},addInbandEvents:function(t){try{y();for(var n=0;n<t.length;n++){var i=t[n];"added"===_(i,r,!1)?("urn:mpeg:dash:event:2012"===i.eventStream.schemeIdUri&&void 0===r[i.id]&&b(i),e.debug("Added inband event with id "+i.id),A(i,t,s.default.EVENT_MODE_ON_RECEIVE)):e.debug("Inband event with scheme_id_uri ".concat(i.eventStream.schemeIdUri,", value ").concat(i.eventStream.value," and id ").concat(i.id," was ignored because it has been added before."))}E()}catch(a){throw a}},getInbandEvents:function(){return r},getInlineEvents:function(){return n},start:function(){try{y(),e.debug("Start Event Controller");var t=f.get().streaming.eventControllerRefreshDelay;p||isNaN(t)||(p=!0,u=setInterval(E,t))}catch(n){throw n}},setConfig:function(t){try{if(!t)return;t.manifestUpdater&&(c=t.manifestUpdater),t.playbackController&&(d=t.playbackController),t.settings&&(f=t.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==u&&p&&(clearInterval(u),u=null,p=!1,function(){try{S(r),S(n)}catch(t){}}())}catch(t){throw t}})(),v()}},e=Object(i.default)(g).getInstance().getLogger(t),v(),t}u.__dashjs_factory_name="EventController",e.default=r.default.getSingletonFactory(u)},"./src/streaming/controllers/FragmentController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/DataChunk.js"),a=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/FragmentLoader.js"),o=n("./src/streaming/utils/RequestModifier.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/core/Debug.js");function p(t){t=t||{};var e,n,f,p=this.context,g=Object(u.default)(p).getInstance(),m=t.errHandler,y=t.mediaPlayerModel,v=t.dashMetrics,_=Object(h.default)(p).getInstance(),b=t.streamInfo;function E(){return b.id}function T(){for(var t in f)f[t].reset();f={}}function S(t){if(t.sender){var e=t.request,a=t.response,s=e.isInitializationRequest(),o=e.mediaInfo.streamInfo;if(t.error&&(e.mediaType===r.default.AUDIO||e.mediaType===r.default.VIDEO||e.mediaType===r.default.TEXT&&e.mediaInfo.isFragmented)&&g.trigger(l.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:t.request.serviceLocation}),a&&o){var u=function(t,e,n,r){var a=new i.default;return a.streamId=n,a.mediaInfo=e.mediaInfo,a.segmentType=e.type,a.start=e.startTime,a.duration=e.duration,a.end=a.start+a.duration,a.bytes=t,a.index=e.index,a.quality=e.quality,a.representationId=e.representationId,a.endFragment=r,a}(a,e,b.id,t.type!==l.default.FRAGMENT_LOADING_PROGRESS);g.trigger(s?l.default.INIT_FRAGMENT_LOADED:l.default.MEDIA_FRAGMENT_LOADED,{chunk:u,request:e},{streamId:o.id,mediaType:e.mediaType})}else n.warn("No "+e.mediaType+" bytes to push or stream is inactive.")}}return n=_.getLogger(e={getStreamId:E,getModel:function(e){var n=f[e];return n||(n=Object(a.default)(p).create({streamInfo:b,type:e,dashMetrics:v,fragmentLoader:Object(s.default)(p).create({dashMetrics:v,mediaPlayerModel:y,errHandler:m,requestModifier:Object(o.default)(p).getInstance(),settings:t.settings,boxParser:t.boxParser,eventBus:g,events:l.default,errors:d.default,dashConstants:t.dashConstants,urlUtils:t.urlUtils,streamId:E()}),debug:_,eventBus:g,events:l.default}),f[e]=n),n},reset:function(){g.off(c.default.FRAGMENT_LOADING_COMPLETED,S,this),g.off(c.default.FRAGMENT_LOADING_PROGRESS,S,this),T()}}),T(),g.on(c.default.FRAGMENT_LOADING_COMPLETED,S,e),g.on(c.default.FRAGMENT_LOADING_PROGRESS,S,e),e}p.__dashjs_factory_name="FragmentController",e.default=f.default.getClassFactory(p)},"./src/streaming/controllers/GapController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/EventBus.js");function o(){var t,e,n,r,o,u,l,c,d,f,h,p,g=this.context,m=Object(s.default)(g).getInstance();function y(){p.debug("Stopping the gap controller"),o&&(clearInterval(o),o=null),function(){m.off(a.default.WALLCLOCK_TIME_UPDATED,T,this),m.off(a.default.INITIAL_STREAM_SWITCH,E,this),m.off(a.default.PLAYBACK_SEEKING,v,this),m.off(a.default.BUFFER_REPLACEMENT_STARTED,_,t),m.off(a.default.TRACK_CHANGE_RENDERED,b,t)}(),o=null,u=NaN,r=0,f=null,h={}}function v(){f&&(clearTimeout(f),f=null)}function _(t){try{if(t.streamId!==c.getActiveStreamInfo().id||!t.mediaType)return;t.streamId===c.getActiveStreamInfo().id&&(h[t.mediaType]=!0)}catch(t){p.error(t)}}function b(t){t&&t.mediaType&&(h[t.mediaType]=!1)}function E(){o||function(){try{o||(p.debug("Starting the gap controller"),o=setInterval((function(){S()&&x(l.getTime())}),100))}catch(t){}}()}function T(){if(S(n.get().streaming.gaps.enableSeekFix)&&++r>=10){var t=l.getTime();e===t?x(t,!0):(e=t,u=NaN),r=0}}function S(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Object.keys(h).some((function(t){return h[t]})),r=!!t&&w();return!e&&n.get().streaming.gaps.jumpGaps&&c.getActiveStreamProcessors().length>0&&(!l.isSeeking()||r)&&!l.isPaused()&&!c.getIsStreamSwitchInProgress()&&!c.getHasMediaOrInitialisationError()}function w(){var t=c.getActiveStream(),e=parseFloat((t.getStartTime()+t.getDuration()).toFixed(5));return l.getTime()+n.get().streaming.gaps.threshold>=e}function A(t,e){try{if(!t||t.length<=1&&e>0)return NaN;for(var r=NaN,i=0;isNaN(r)&&i<t.length;){var a=i>0?t.end(i-1):0;e<t.start(i)&&a-e<n.get().streaming.gaps.threshold&&(r=i),i+=1}return r}catch(s){return null}}function x(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.get().streaming.gaps.smallGapLimit,a=n.get().streaming.gaps.jumpLargeGaps,s=d.getBufferRange(),o=NaN,h=!1;if(e=A(s,t),!isNaN(e)){var g=s.start(e),m=g-t;m>0&&(m<=i||a)&&(o=g)}var y=l.getTimeToStreamEnd();if(isNaN(o)&&r&&isFinite(y)&&!isNaN(y)&&y<i&&(o=parseFloat(l.getStreamEndTime().toFixed(5)),h=!0),o>0&&u!==o&&o>t&&!f){var v=o-t;if(h){var _=c.getStreamForTime(o),b=_&&!!_.getPreloaded();p.warn("Jumping to end of stream because of gap from ".concat(t," to ").concat(o,". Gap duration: ").concat(v)),l.seek(o,!0,b)}else{var E=l.getIsDynamic(),T=e>0?s.end(e-1):t,S=E?1e3*Math.max(0,v-.1):0;f=window.setTimeout((function(){l.seek(o,!0,!0),p.warn("Jumping gap occuring in period ".concat(c.getActiveStream().getStreamId()," starting at ").concat(T," and ending at ").concat(o,". Jumping by: ").concat(v-S/1e3)),f=null}),S)}u=o}}return t={reset:y,setConfig:function(t){t&&(t.settings&&(n=t.settings),t.playbackController&&(l=t.playbackController),t.streamController&&(c=t.streamController),t.videoModel&&(d=t.videoModel))},initialize:function(){!function(){m.on(a.default.WALLCLOCK_TIME_UPDATED,T,this),m.on(a.default.INITIAL_STREAM_SWITCH,E,this),m.on(a.default.PLAYBACK_SEEKING,v,this),m.on(a.default.BUFFER_REPLACEMENT_STARTED,_,t),m.on(a.default.TRACK_CHANGE_RENDERED,b,t)}()}},p=Object(i.default)(g).getInstance().getLogger(t),y(),t}o.__dashjs_factory_name="GapController",e.default=r.default.getSingletonFactory(o)},"./src/streaming/controllers/MediaController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js");function u(){var t,e,n,s,u,l,c,d,f=this.context,h=Object(a.default)(f).getInstance();function p(t,e){return t&&n[e]&&n[e][t]?n[e][t].list:[]}function g(t,e){return t&&n[e]&&n[e][t]?n[e][t].current:null}function m(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&t.streamInfo){var a=t.type,o=t.streamInfo,u=o.id,d=g(a,u);if(n[u]&&n[u][a]&&!_(t,d)&&(n[u][a].current=t,n[u][a].current&&(a!==r.default.TEXT||a===r.default.TEXT&&t.isFragmented)&&h.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:d,newMediaInfo:t,switchMode:s.get().streaming.trackSwitchMode[a]},{streamId:u}),!e)){var f=E(t);if(!f||!n[u][a].storeLastSettings)return;f.roles&&(f.role=f.roles[0],delete f.roles),f.accessibility&&(f.accessibility=f.accessibility[0]),f.audioChannelConfiguration&&(f.audioChannelConfiguration=f.audioChannelConfiguration[0]),l[a]=f,c.setSavedMediaSettings(a,f)}}}function y(t,e){t&&e&&(u[t]=e)}function v(t){return t?u[t]:null}function _(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var n=t.id===e.id,r=t.viewpoint===e.viewpoint,i=t.lang===e.lang,a=t.codec===e.codec,s=t.roles.toString()===e.roles.toString(),o=t.accessibility.toString()===e.accessibility.toString(),u=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return n&&a&&r&&i&&s&&o&&u}function b(){n={},l={},d=null,u={audio:null,video:null,text:null}}function E(t){var e={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration};return e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0?e:null}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!t.lang||e.lang.match(t.lang),a=null==t.index||e.index===t.index,s=!t.viewpoint||t.viewpoint===e.viewpoint,o=!t.role||!!e.roles.filter((function(e){return e===t.role}))[0],u=!t.accessibility||!!e.accessibility.filter((function(e){return e===t.accessibility}))[0],l=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter((function(e){return e===t.audioChannelConfiguration}))[0];return i&&a&&s&&(o||e.type===r.default.AUDIO&&n)&&u&&l}function S(t){var e,n=0,r=[];return t.forEach((function(t){(e=Math.max.apply(Math,t.bitrateList.map((function(t){return t.bandwidth}))))>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function w(t){var e,n=1/0,r=[];return t.forEach((function(t){var i=t.bitrateList.reduce((function(t,e){var n=Math.max(1,e.width*e.height);return t+e.bandwidth/n}),0);(e=i/t.bitrateList.length)<n?(n=e,r=[t]):e===n&&r.push(t)})),r}function A(t){var e,n=0,r=[];return t.forEach((function(t){(e=t.representationCount)>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function x(t,n){if(t===r.default.TEXT)return n[0];var i,a=s.get().streaming.selectionModeForInitialTrack;if(d&&"function"==typeof d)i=d(n);else switch(a){case r.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=function(t){var e,n,r=(e=0,n=[],t.forEach((function(t){isNaN(t.selectionPriority)||(t.selectionPriority>e?(e=t.selectionPriority,n=[t]):t.selectionPriority===e&&n.push(t))})),n);return r.length>1&&(r=S(r)),r.length>1&&(r=A(r)),r}(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:i=function(t){var e=S(t);return e.length>1&&(e=A(e)),e}(n);break;case r.default.TRACK_SELECTION_MODE_FIRST_TRACK:i=C(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:i=function(t){var e=w(t);return e.length>1&&(e=S(e)),e}(n);break;case r.default.TRACK_SELECTION_MODE_WIDEST_RANGE:i=function(t){var e=A(t);return e.length>1&&(e=S(t)),e}(n);break;default:e.warn("Track selection mode ".concat(a," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),i=C(n)}return i.length>0?i[0]:n[0]}function C(t){return t[0]}return t={setInitialMediaSettingsForType:function(t,e){var n=l[t]||v(t),r=p(t,e.id),i=[];n||(n=c.getSavedMediaSettings(t),y(t,n)),r&&0!==r.length&&(n&&r.forEach((function(e){T(n,e,!!l[t])&&i.push(e)})),0===i.length?m(x(t,r),!0):m(i.length>1?x(t,i):i[0]))},addTrack:function(t){if(t){var e=t.type;if((i=e)===r.default.AUDIO||i===r.default.VIDEO||i===r.default.TEXT||i===r.default.IMAGE){var i,a=t.streamInfo.id;n[a]||(n[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var s=n[a][e].list,o=0,u=s.length;o<u;++o)if(_(s[o],t))return;s.push(t)}}},getTracksFor:p,getCurrentTrackFor:g,isCurrentTrack:function(t){if(!t)return!1;var e=t.type,r=t.streamInfo.id;return n[r]&&n[r][e]&&_(n[r][e].current,t)},setTrack:m,selectInitialTrack:x,setCustomInitialTrackSelectionFunction:function(t){d=t},setInitialSettings:y,getInitialSettings:v,getTracksWithHighestBitrate:S,getTracksWithHighestEfficiency:w,getTracksWithWidestRange:A,isTracksEqual:_,matchSettings:T,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(r.default.TEXT,null)},setConfig:function(t){t&&(t.domStorage&&(c=t.domStorage),t.settings&&(s=t.settings))},reset:b},e=Object(o.default)(f).getInstance().getLogger(t),b(),t}u.__dashjs_factory_name="MediaController";var l=s.default.getSingletonFactory(u);s.default.updateSingletonFactory(u.__dashjs_factory_name,l),e.default=l},"./src/streaming/controllers/MediaSourceController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r=this.context;return t={createMediaSource:function(){var t="WebKitMediaSource"in window;return"MediaSource"in window?e=new MediaSource:t&&(e=new WebKitMediaSource),e},attachMediaSource:function(t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(t){t.setSource(null)},setDuration:function t(r){e&&"open"===e.readyState&&(null===r&&isNaN(r)||e.duration!==r&&(function(t){for(var e=t.sourceBuffers,n=0;n<e.length;n++)if(e[n].updating)return!0;return!1}(e)?setTimeout(t.bind(null,r),50):(n.info("Set MediaSource duration:"+r),e.duration=r)))},setSeekable:function(t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(t){if(t&&"open"===t.readyState){for(var e=t.sourceBuffers,r=0;r<e.length;r++){if(e[r].updating)return;if(0===e[r].buffered.length)return}n.info("call to mediaSource endOfStream"),t.endOfStream()}}},n=Object(i.default)(r).getInstance().getLogger(t),t}a.__dashjs_factory_name="MediaSourceController",e.default=r.default.getSingletonFactory(a)},"./src/streaming/controllers/PlaybackController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/MediaPlayerEvents.js");function c(){var t,e,n,o,c,d,f,h,p,g,m,y,v,_,b,E,T,S,w,A,x,C,D=this.context,I=Object(a.default)(D).getInstance();function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((O(t)-B()).toFixed(5))}function O(t){var e=t||g;return e.start+e.duration}function P(){g&&d&&d.getElement()?d.play():v=!0}function M(){return g&&d?d.isPaused():null}function L(){g&&d&&d.pause()}function N(){return g&&d?d.isSeeking():null}function k(){return g&&d?d.isStalled():null}function F(t,n,r){g&&d&&t!==(isNaN(E)?d.getTime():E)&&((T=!0===r)||(E=t,I.trigger(s.default.PLAYBACK_SEEK_ASKED)),e.info("Requesting seek to time: "+t+(T?" (internal)":"")),d.setCurrentTime(t,n))}function B(){return g&&d?d.getTime():null}function j(){var t=B();if(m&&!isNaN(b)){var e=b/1e3;t>e&&(t-=e)}return t}function U(){return g&&d?d.getPlaybackRate():null}function V(){return g&&d?d.getEnded():null}function G(){return m}function H(){if(!m||isNaN(b))return NaN;var t=j();if(isNaN(t)||0===t)return 0;var e=(new Date).getTime()+1e3*f.getClientTimeOffset();return Math.max(((e-b-1e3*t)/1e3).toFixed(3),0)}function Y(){L(),v=!1,p=0,b=0,x=!1,E=NaN,d&&(I.off(s.default.DATA_UPDATE_COMPLETED,W,t),I.off(s.default.LOADING_PROGRESS,yt,t),I.off(s.default.MANIFEST_UPDATED,Tt,t),I.off(s.default.STREAMS_COMPOSED,St,t),I.off(l.default.BUFFER_LEVEL_STATE_CHANGED,vt,t),I.off(l.default.PLAYBACK_PROGRESS,ft,t),I.off(l.default.PLAYBACK_TIME_UPDATED,ft,t),I.off(l.default.PLAYBACK_ENDED,ct,t),I.off(l.default.STREAM_INITIALIZING,bt,t),I.off(l.default.REPRESENTATION_SWITCH,Et,t),d.setPlaybackRate(1,!0),X(),d.removeEventListener("canplay",$),d.removeEventListener("canplaythrough",Q),d.removeEventListener("play",Z),d.removeEventListener("waiting",J),d.removeEventListener("playing",tt),d.removeEventListener("pause",et),d.removeEventListener("error",dt),d.removeEventListener("seeking",nt),d.removeEventListener("seeked",rt),d.removeEventListener("timeupdate",it),d.removeEventListener("progress",at),d.removeEventListener("ratechange",st),d.removeEventListener("loadedmetadata",ot),d.removeEventListener("loadeddata",ut),d.removeEventListener("stalled",_t),d.removeEventListener("ended",lt)),h=null,d=null,g=null,m=null}function z(t,e){var n=o.getCurrentDVRInfo(e),r=n?n.range:null;return r?t>r.end?Math.max(r.end-p,r.start):t>0&&t+.25<r.start&&Math.abs(t-r.start)<31536e4?C.get().streaming.lowLatencyEnabled?Math.max(r.end-p,r.start):r.start:t:NaN}function q(){null===h&&(h=setInterval((function(){var t;I.trigger(s.default.WALLCLOCK_TIME_UPDATED,{isDynamic:m,time:new Date}),G()&&(n.addDVRMetric(),M()?(t=Date.now(),(!_||t>_+500)&&(_=t,it())):K())}),C.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(h),h=null}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!M()&&m&&0!==d.getReadyState()&&!N()&&!x){t||(t=n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO);var i=j(),a=z(i,t),s=!isNaN(a)&&a!==i;s&&!N()&&(k()||w||1===d.getReadyState())&&(e.debug("UpdateCurrentTime: Seek to actual time: ".concat(a," from currentTime: ").concat(i)),F(a))}}function W(t){var e=c.convertRepresentationToRepresentationInfo(t.currentRepresentation),n=e?e.mediaInfo.streamInfo:null;null!==n&&g.id===n.id&&(g=n)}function $(){I.trigger(s.default.CAN_PLAY)}function Q(){I.trigger(s.default.CAN_PLAY_THROUGH)}function Z(){e.info("Native video element event: play"),K(),q(),I.trigger(s.default.PLAYBACK_STARTED,{startTime:B()})}function J(){e.info("Native video element event: waiting"),I.trigger(s.default.PLAYBACK_WAITING,{playingTime:B()})}function tt(){e.info("Native video element event: playing"),I.trigger(s.default.PLAYBACK_PLAYING,{playingTime:B()})}function et(){e.info("Native video element event: pause"),I.trigger(s.default.PLAYBACK_PAUSED,{ended:V()})}function nt(){if(T)T=!1;else{var t=B();isNaN(E)||E===t||(t=E),E=NaN,e.info("Seeking to: "+t),q(),I.trigger(s.default.PLAYBACK_SEEKING,{seekTime:t,streamId:g.id})}}function rt(){e.info("Native video element event: seeked"),I.trigger(s.default.PLAYBACK_SEEKED)}function it(){g&&I.trigger(s.default.PLAYBACK_TIME_UPDATED,{timeToEnd:R(),time:B(),streamId:g.id})}function at(){I.trigger(s.default.PLAYBACK_PROGRESS,{streamId:g.id})}function st(){var t=U();e.info("Native video element event: ratechange: ",t),I.trigger(s.default.PLAYBACK_RATE_CHANGED,{playbackRate:t})}function ot(){e.info("Native video element event: loadedmetadata"),I.trigger(s.default.PLAYBACK_METADATA_LOADED),q()}function ut(){e.info("Native video element event: loadeddata"),I.trigger(s.default.PLAYBACK_LOADED_DATA)}function lt(){e.info("Native video element event: ended"),L(),X();var t=n?n.getActiveStreamInfo():null;t&&I.trigger(s.default.PLAYBACK_ENDED,{isLast:t.isLast})}function ct(t){if(h&&t.isLast){e.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var n=t.seekTime?t.seekTime:O();d.setCurrentTime(n),L(),X()}}function dt(t){I.trigger(s.default.PLAYBACK_ERROR,{error:(t.target||t.srcElement).error})}function ft(){m&&ht()&&C.get().streaming.liveCatchup.playbackRate>0&&!M()&&!N()&&(function(){try{if(ht()&&C.get().streaming.liveCatchup.playbackRate>0&&B()>0){var t=gt(),e=H(),n=y.getLiveDelay(),i=y.getLiveCatchupLatencyThreshold(),a=C.get().streaming.liveCatchup.minDrift;return t===r.default.LIVE_CATCHUP_MODE_LOLP?function(t,e,n,r,i,a){try{var s=Math.abs(t-e);return(isNaN(a)||t<=a)&&(s>n||r<i)}catch(o){return!1}}(e,n,a,pt(),C.get().streaming.liveCatchup.playbackBufferMin,i):function(t,e,n,r){try{return Math.abs(t-e)>r&&(isNaN(n)||t<=n)}catch(i){return!1}}(e,n,i,a)}}catch(s){return!1}}()?function(){if(d){var t,i=d.getPlaybackRate(),a=C.get().streaming.liveCatchup.playbackRate,s=H(),u=y.getLiveDelay(),l=pt();gt()===r.default.LIVE_CATCHUP_MODE_LOLP?(C.get(),t=function(t,n,r,i,a,s,o){var u,l=t;if(s<a){var c=2*l/(1+Math.pow(Math.E,-5*(s-a)));e.debug("[LoL+ playback control_buffer-based] bufferLevel: "+s+", newRate: "+(u=1-l+c))}else u=Math.abs(n-r)<=.02*r?1:1-l+2*l/(1+Math.pow(Math.E,-5*(n-r))),e.debug("[LoL+ playback control_latency-based] latency: "+n+", newRate: "+u);return w&&s>r/2&&(w=!1),Math.abs(o-u)<=A&&(u=null),{newRate:u}}(a,s,u,0,C.get().streaming.liveCatchup.playbackBufferMin,l,i)):t=function(t,e,n,r,i){var a=e-n,s=1-t+2*t/(1+Math.pow(Math.E,-5*a));return w&&(r>n/2?w=!1:a>0&&(s=1)),Math.abs(i-s)<=A&&(s=null),{newRate:s}}(a,s,u,l,i);var c=t.newRate;c&&d.setPlaybackRate(c);var f=s-u;C.get().streaming.liveCatchup.maxDrift>0&&!S&&f>C.get().streaming.liveCatchup.maxDrift?(e.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,h=n&&n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO,(g=(p=o.getCurrentDVRInfo(h))?p.range:null)&&!isNaN(g.end)&&F(g.end-y.getLiveDelay(),!0,!1)):S=!1}var h,p,g}():mt())}function ht(){return C.get().streaming.liveCatchup.enabled||C.get().streaming.lowLatencyEnabled}function pt(){var t=null;return n.getActiveStreamProcessors().forEach((function(e){var n=e.getBufferLevel();t=null===t?n:Math.min(t,n)})),t}function gt(){var t=C.get().streaming.liveCatchup.playbackBufferMin;return C.get().streaming.liveCatchup.mode!==r.default.LIVE_CATCHUP_MODE_LOLP||null===t||isNaN(t)?r.default.LIVE_CATCHUP_MODE_DEFAULT:r.default.LIVE_CATCHUP_MODE_LOLP}function mt(){d&&d.setPlaybackRate(1)}function yt(t){if(!1===t.stream&&C.get().streaming.lowLatencyEnabled&&!isNaN(t.request.duration)){var n=1.2*t.request.duration;n>y.getLiveDelay()&&(e.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",n.toFixed(2)),C.update({streaming:{delay:{liveDelay:n}}}))}}function vt(t){t.streamId===g.id&&(ht()?t.state!==i.default.BUFFER_EMPTY||N()||w||(w=!0,mt()):C.get().streaming.buffer.setStallState&&d.setStallState(t.mediaType,t.state===i.default.BUFFER_EMPTY))}function _t(t){I.trigger(s.default.PLAYBACK_STALLED,{e:t})}function bt(t){var n;(n=t.mediaInfo)&&n.supplementalProperties&&"true"===n.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(e.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),C.update({streaming:{lowLatencyEnabled:!0}}))}function Et(t){var e=n.getActiveStreamInfo();if(C.get().streaming.lowLatencyEnabledByManifest&&t&&e&&t.currentRepresentation&&t.streamId&&t.streamId===e.id&&t.mediaType&&(t.mediaType===r.default.VIDEO||t.mediaType===r.default.AUDIO)){var i=!t.currentRepresentation.availabilityTimeComplete;i&&C.update({streaming:{lowLatencyEnabled:i}})}}function Tt(){x=!0}function St(){x=!1}return t={initialize:function(e,n){g=e,!0!==n&&function(){d.addEventListener("canplay",$),d.addEventListener("canplaythrough",Q),d.addEventListener("play",Z),d.addEventListener("waiting",J),d.addEventListener("playing",tt),d.addEventListener("pause",et),d.addEventListener("error",dt),d.addEventListener("seeking",nt),d.addEventListener("seeked",rt),d.addEventListener("timeupdate",it),d.addEventListener("progress",at),d.addEventListener("ratechange",st),d.addEventListener("loadedmetadata",ot),d.addEventListener("loadeddata",ut),d.addEventListener("stalled",_t),d.addEventListener("ended",lt),m=g.manifestInfo.isDynamic,S=!1,w=!1,T=!1;var e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",n=/safari/.test(e)&&!/chrome/.test(e);A=n?.25:.02,I.on(s.default.DATA_UPDATE_COMPLETED,W,t),I.on(s.default.LOADING_PROGRESS,yt,t),I.on(s.default.MANIFEST_UPDATED,Tt,t),I.on(s.default.STREAMS_COMPOSED,St,t),I.on(l.default.BUFFER_LEVEL_STATE_CHANGED,vt,t),I.on(l.default.PLAYBACK_PROGRESS,ft,t),I.on(l.default.PLAYBACK_TIME_UPDATED,ft,t),I.on(l.default.PLAYBACK_ENDED,ct,t,{priority:a.default.EVENT_PRIORITY_HIGH}),I.on(l.default.STREAM_INITIALIZING,bt,t),I.on(l.default.REPRESENTATION_SWITCH,Et,t),v&&(v=!1,P())}()},setConfig:function(t){t&&(t.streamController&&(n=t.streamController),t.dashMetrics&&(o=t.dashMetrics),t.mediaPlayerModel&&(y=t.mediaPlayerModel),t.adapter&&(c=t.adapter),t.videoModel&&(d=t.videoModel),t.timelineConverter&&(f=t.timelineConverter),t.settings&&(C=t.settings))},getTimeToStreamEnd:R,getBufferLevel:pt,getTime:B,getNormalizedTime:j,getIsManifestUpdateInProgress:function(){return x},getPlaybackRate:U,getPlayedRanges:function(){return g&&d?d.getPlayedRanges():null},getEnded:V,getIsDynamic:G,getStreamController:function(){return n},computeAndSetLiveDelay:function(t,n){var i,a,s,o=!isNaN(t)&&isFinite(t)?t:NaN,u=c.getSuggestedPresentationDelay();if(C.get().streaming.delay.applyServiceDescription&&isNaN(C.get().streaming.delay.liveDelay)&&isNaN(C.get().streaming.delay.liveDelayFragmentCount)&&function(t){if(t&&t.serviceDescriptions){for(var n=null,i=0;i<t.serviceDescriptions.length;i++){var a=t.serviceDescriptions[i];if(a.schemeIdUri===r.default.SERVICE_DESCRIPTION_LL_SCHEME){n=a;break}}n&&(n.latency&&n.latency.target>0&&(e.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),C.update({streaming:{delay:{liveDelay:n.latency.target/1e3},liveCatchup:{minDrift:(n.latency.target+500)/1e3,maxDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target+500)/1e3:void 0}}})),n.playbackRate&&n.playbackRate.max>1&&(e.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),C.update({streaming:{liveCatchup:{playbackRate:n.playbackRate.max-1}}})))}}(n),i=y.getLiveDelay()?y.getLiveDelay():null===C.get().streaming.delay.liveDelayFragmentCount||isNaN(C.get().streaming.delay.liveDelayFragmentCount)||isNaN(o)?!0===C.get().streaming.delay.useSuggestedPresentationDelay&&null!==u&&!isNaN(u)&&u>0?u:isNaN(o)?n&&!isNaN(n.minBufferTime)?4*n.minBufferTime:4*g.manifestInfo.minBufferTime:4*o:o*C.get().streaming.delay.liveDelayFragmentCount,null!==(s=c.getAvailabilityStartTime())&&(b=s),n&&n.dvrWindowSize>0){var l=Math.max(n.dvrWindowSize-10,n.dvrWindowSize/2);a=Math.min(i,l)}else a=i;return p=a,a},getLiveDelay:function(){return p},getCurrentLiveLatency:H,play:P,isPaused:M,pause:L,isSeeking:N,getStreamEndTime:O,seek:F,reset:Y,updateCurrentTime:K,getAvailabilityStartTime:function(){return b}},e=Object(u.default)(D).getInstance().getLogger(t),Y(),t}c.__dashjs_factory_name="PlaybackController",e.default=o.default.getSingletonFactory(c)},"./src/streaming/controllers/ScheduleController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/models/FragmentModel.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function d(t){t=t||{};var e,n,o,d,f,h,p,g,m,y,v,_,b,E=this.context,T=Object(a.default)(E).getInstance(),S=t.dashMetrics,w=t.mediaPlayerModel,A=t.fragmentModel,x=t.abrController,C=t.playbackController,D=t.textController,I=t.type,R=t.bufferController,O=t.settings;function P(t){if(!R.getIsBufferingCompleted()){M();var e=isNaN(t)?0:t;h=setTimeout(L,e)}}function M(){h&&(clearTimeout(h),h=null)}function L(){try{if(function(){try{return I===r.default.TEXT&&!D.isTextEnabled()||C.isPaused()&&(!C.getStreamController().getInitialPlayback()||!C.getStreamController().getAutoPlay())&&!O.get().streaming.scheduling.scheduleWhilePaused}catch(t){return!1}}())return void M();if(function(){try{return d&&(isNaN(y)||v||(t=x.getMaxAllowedIndexFor(I,n.id),!(!isNaN(m)&&m==t||(o.info("Top quality "+I+" index has changed from "+m+" to "+t),m=t,0)))||!I||!d||S.getCurrentBufferLevel(I)<N())}catch(e){return!1}var t}()){var t=!1;b&&(t=x.checkPlaybackQuality(I,n.id)),t||(_||d.quality!==y||v?(v?(o.debug("Switch track for "+I+", representation id = "+d.id),v=!1):o.debug("Quality has changed, get init request for representationid = "+d.id),T.trigger(s.default.INIT_FRAGMENT_NEEDED,{representationId:d.id,sender:e},{streamId:n.id,mediaType:I}),b=!1,_=!1):(o.debug("Media segment needed for ".concat(I," and stream id ").concat(n.id)),T.trigger(s.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:I}),b=!0))}else P(O.get().streaming.lowLatencyEnabled?O.get().streaming.scheduling.lowLatencyTimeout:O.get().streaming.scheduling.defaultTimeout)}catch(i){P(O.get().streaming.lowLatencyEnabled?O.get().streaming.scheduling.lowLatencyTimeout:O.get().streaming.scheduling.defaultTimeout)}}function N(){var t=NaN;return I&&d?t=I===r.default.TEXT?function(){try{if(D.isTextEnabled()){if(isNaN(d.fragmentDuration)){var t=S.getCurrentSchedulingInfo(l.default.SCHEDULING_INFO);return t?t.duration:0}return d.fragmentDuration}return 0}catch(e){return 0}}():I===r.default.AUDIO&&p?function(){try{var t=S.getCurrentBufferLevel(r.default.VIDEO);return isNaN(d.fragmentDuration)?t+1:Math.max(t+1,d.fragmentDuration)}catch(e){return 0}}():function(){try{var t=d.mediaInfo.streamInfo;return x.isPlayingAtTopQuality(t)?t.manifestInfo.duration>=O.get().streaming.buffer.longFormContentDurationThreshold?O.get().streaming.buffer.bufferTimeAtTopQualityLongForm:O.get().streaming.buffer.bufferTimeAtTopQuality:w.getStableBufferTime()}catch(e){return w.getStableBufferTime()}}():t}function k(){F(!0)}function F(t){if(C&&A){var e=A.getRequests({state:i.default.FRAGMENT_MODEL_EXECUTED,time:C.getTime(),threshold:0})[0];e&&C.getTime()>=e.startTime&&((!g.mediaInfo||e.mediaInfo.type===g.mediaInfo.type&&e.mediaInfo.id!==g.mediaInfo.id)&&t&&T.trigger(s.default.TRACK_CHANGE_RENDERED,{mediaType:I,oldMediaInfo:g.mediaInfo,newMediaInfo:e.mediaInfo,streamId:n.id}),e.quality===g.quality&&e.adaptationIndex===g.adaptationIndex||!t||(o.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(I)),T.trigger(s.default.QUALITY_CHANGE_RENDERED,{mediaType:I,oldQuality:g.quality,newQuality:e.quality,streamId:n.id})),g={mediaInfo:e.mediaInfo,quality:e.quality,adaptationIndex:e.adaptationIndex})}}function B(t){o.debug("Appended bytes for ".concat(t.mediaType," and stream id ").concat(n.id)),(isNaN(t.index)||isNaN(y))&&(y=t.quality,o.info("["+I+"] lastInitializedRepresentationInfo changed to "+t.quality)),P(0)}function j(){A.abortRequests(),M()}function U(){O.get().streaming.scheduling.scheduleWhilePaused||P()}function V(t){S.updatePlayListTraceMetrics({playbackspeed:t.playbackRate.toString()})}function G(){b=!0,f=0,y=NaN,g={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},m=NaN,v=!1,_=!1}return e={initialize:function(t){p=t,T.on(s.default.BYTES_APPENDED_END_FRAGMENT,B,e),T.on(s.default.URL_RESOLUTION_FAILED,j,e),T.on(c.default.PLAYBACK_STARTED,U,e),T.on(c.default.PLAYBACK_RATE_CHANGED,V,e),T.on(c.default.PLAYBACK_TIME_UPDATED,k,e)},getType:function(){return I},getStreamId:function(){return n.id},setCurrentRepresentation:function(t){d=t},setTimeToLoadDelay:function(t){f=t},getTimeToLoadDelay:function(){return f},setSwitchTrack:function(t){v=t},getSwitchStrack:function(){return v},startScheduleTimer:P,clearScheduleTimer:M,reset:function(){T.off(s.default.BYTES_APPENDED_END_FRAGMENT,B,e),T.off(s.default.URL_RESOLUTION_FAILED,j,e),T.off(c.default.PLAYBACK_STARTED,U,e),T.off(c.default.PLAYBACK_RATE_CHANGED,V,e),T.off(c.default.PLAYBACK_TIME_UPDATED,k,e),M(),F(!1),G(),n=null},getBufferTarget:N,getPlaybackController:function(){return C},setCheckPlaybackQuality:function(t){b=t},setInitSegmentRequired:function(t){_=t}},o=Object(u.default)(E).getInstance().getLogger(e),G(),n=t.streamInfo,e}d.__dashjs_factory_name="ScheduleController",e.default=o.default.getClassFactory(d)},"./src/streaming/controllers/StreamController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/Stream.js"),s=n("./src/streaming/ManifestUpdater.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/metrics/PlayList.js"),d=n("./src/core/Debug.js"),f=n("./src/streaming/utils/InitCache.js"),h=n("./src/streaming/utils/URLUtils.js"),p=n("./src/streaming/MediaPlayerEvents.js"),g=n("./src/streaming/controllers/TimeSyncController.js"),m=n("./src/streaming/controllers/MediaSourceController.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js"),_=n("./src/streaming/controllers/EventController.js"),b=n("./src/streaming/constants/ConformanceViolationConstants.js");function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(){var t,e,n,l,T,S,w,A,x,C,D,I,R,O,P,M,L,N,k,F,B,j,U,V,G,H,Y,z,q,X,K,W,$,Q,Z,J,tt,et,nt,rt,it,at,st,ot,ut=this.context,lt=Object(o.default)(ut).getInstance();function ct(){!function(){try{var t=A.getStreamsInfo();if(!U&&0===t.length)throw new Error("There are no streams");U&&x.updateManifestUpdateInfo({currentTime:$.getTime(),buffered:W.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:B.getClientTimeOffset()}),j.length>0&&function(t){j=j.filter((function(n){var r=t.filter((function(t){return t.id===n.getId()})).length>0||n.getId()===U.getId();return r||(e.debug("Removing stream ".concat(n.getId())),n.reset(!0)),r}))}(t);for(var n=[],i=0,a=t.length;i<a;i++){var s=t[i];n.push(ft(s)),x.addManifestUpdateStreamInfo(s)}Promise.all(n).then((function(){U||function t(n){St();var i=x.getCurrentDVRInfo().range;if(i.end<i.start){st&&clearTimeout(st);var a=Math.min(1e3*(-1*(i.end-i.start)+2),2147483647);return e.debug("Waiting for ".concat(a," ms before playback can start")),lt.trigger(u.default.AST_IN_FUTURE,{delay:a}),void(st=setTimeout((function(){t(n)}),a))}if(A.getIsDynamic()&&j.length){var s=n[0].manifestInfo,o=function(t,e){try{var n=NaN;if(e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration))return e.maxFragmentDuration;if(t&&1===t.length){var i=t[0],a=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT].reduce((function(t,e){var n=A.getMediaInfoForType(i,e);return n&&!1!==n.isFragmented&&t.push(n),t}),[]).reduce((function(t,e){var n=A.getVoRepresentations(e);return n&&n.length>0&&n.forEach((function(e){e&&t.push(e)})),t}),[]).reduce((function(t,e){var n=A.convertRepresentationToRepresentationInfo(e);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&t.push(n.fragmentDuration),t}),[]);n=Math.max.apply(Math,function(t){if(Array.isArray(t))return E(t)}(s=a)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return E(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,void 0):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(n)?n:NaN}catch(o){return NaN}var s}(n,s);$.computeAndSetLiveDelay(o,s)}var l=function(){var t;if(A.getIsDynamic()){var n=x.getCurrentDVRInfo();t=(n&&n.range?n.range.end:0)-$.getLiveDelay();var r=n?n.range:null;if(r){var i=Nt(!0);if(!isNaN(i)){e.info("Start time from URI parameters: "+i);var a=it.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;t=Math.max(Math.min(t,i),r.start+a)}}}else{t=Wt()[0].getStreamInfo().start;var s=Nt(!1);isNaN(s)||(e.info("Start time from URI parameters: "+s),t=Math.max(t,s))}return t}(),c=Tt(l),d=null!==c?c:j[0];lt.trigger(u.default.INITIAL_STREAM_SWITCH,{startTime:l}),ht(d,null,l),tt||(tt=setInterval((function(){!z&&$.getTimeToStreamEnd()<=0&&!$.isSeeking()&&lt.trigger(u.default.PLAYBACK_ENDED,{isLast:Gt().isLast})}),200))}(t),lt.trigger(u.default.STREAMS_COMPOSED),Rt()})).catch((function(t){throw t}))}catch(o){F.error(new y.default(v.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,o.message+"nostreamscomposed",w.getValue())),X=!0,Xt()}}()}function dt(){at=!0}function ft(t){var e=Ht(t.id);return e?e.updateData(t):(e=Object(a.default)(ut).create({manifestModel:w,mediaPlayerModel:Q,dashMetrics:x,manifestUpdater:T,adapter:A,timelineConverter:B,capabilities:n,capabilitiesFilter:l,errHandler:F,baseURLController:I,segmentBaseController:R,textController:G,abrController:P,playbackController:$,eventController:L,mediaController:M,protectionController:V,videoModel:W,streamInfo:t,settings:it}),j.push(e),e.initialize(),Promise.resolve())}function ht(t,n,r){try{if(z||!t||n===t&&t.getIsActive())return;z=!0,lt.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:t.getStreamInfo()});var i=!1;U=t,n&&(i=bt(t,n),n.deactivate(i)),r=isNaN(r)?!i&&n?t.getStreamInfo().start:NaN:r,e.info("Switch to stream ".concat(t.getId(),". Seektime is ").concat(r,", current playback time is ").concat($.getTime(),". Seamless period switch is set to ").concat(i)),nt=nt.filter((function(t){return t.getId()!==U.getId()})),$.initialize(Gt(),!!n),W.getElement()&&pt(r,i)}catch(a){z=!1}}function pt(t,n){var r;function i(){if(K&&"open"===K.readyState){e.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),K.removeEventListener("sourceopen",i),K.removeEventListener("webkitsourceopen",i),Lt();var a=x.getCurrentDVRInfo();C.setSeekable(a.range.start,a.range.end),gt(t,n)}}function a(){K.addEventListener("sourceopen",i,!1),K.addEventListener("webkitsourceopen",i,!1),r=C.attachMediaSource(W),e.debug("MediaSource attached to element.  Waiting on open...")}K?n?gt(t,n):(C.detachMediaSource(W),a()):(K=C.createMediaSource(),a())}function gt(t,e){U.activate(K,e?et:void 0,t).then((function(e){if(e){var n=Object.keys(e);n.length>0&&e[n[0]].getBuffer().changeType&&(rt=!0),et=e}isNaN(t)||(lt.trigger(u.default.SEEK_TARGET,{time:t},{streamId:U.getId()}),$.seek(t,!1,!0),U.startScheduleControllers()),z=!1,lt.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Gt()})}))}function mt(t){$.getTime();var e=t.seekTime,n=Tt(e);n&&n!==U?n&&n!==U&&(yt(),function(t,e){var n=t&&!isNaN(t.seekTime)?t.seekTime:NaN,r=U.getProcessors().map((function(e){return e.prepareOuterPeriodPlaybackSeeking(t)}));Promise.all(r).then((function(){ht(e,U,n)})).catch((function(t){F.error(t)}))}(t,n)):(yt(),function(t){U.getProcessors().forEach((function(e){return e.prepareInnerPeriodPlaybackSeeking(t)})),jt(c.PlayListTrace.USER_REQUEST_STOP_REASON)}(t)),Ut(c.PlayList.SEEK_START_REASON)}function yt(t,e){vt()}function vt(){nt&&nt.length>0&&(nt.forEach((function(t){t.deactivate(!0)})),nt=[])}function _t(t){t.newMediaInfo.streamInfo.id===U.getId()&&(vt(),U.prepareTrackChange(t))}function bt(t,e){try{return it.get().streaming.buffer.reuseExistingSourceBuffers&&(e.isProtectionCompatible(t)||at)&&(rt||e.isMediaCodecCompatible(t,e))}catch(n){return!1}}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(K&&!t.getPreloaded()){var n=bt(t,e);n&&t.startPreloading(K,et).then((function(){nt.push(t)}))}}function Tt(t){if(isNaN(t))return null;for(var e=j.length,n=0;n<e;n++){var r=j[n];if(t<parseFloat((r.getStartTime()+r.getDuration()).toFixed(5)))return r}return null}function St(){try{var t=A.getIsDynamic(),e=A.getStreamsInfo()[0].manifestInfo,n=$.getTime(),i=B.calcTimeShiftBufferWindow(j,t),a=Pt();if(void 0===i.start||void 0===i.end)return;a&&0!==a.length?a.forEach((function(t){x.addDVRInfo(t.getType(),n,e,i)})):x.addDVRInfo(r.default.VIDEO,n,e,i)}catch(s){}}function wt(t){if(J&&Y){var e=Q.getInitialBufferLevel();(isNaN(e)||e<=$.getBufferLevel()||A.getIsDynamic()&&e>$.getLiveDelay())&&(J=!1,Ut(c.PlayList.INITIAL_PLAYOUT_START_REASON),$.play())}t&&t.mediaType&&x.addBufferLevel(t.mediaType,new Date,1e3*t.bufferLevel)}function At(t){t.streamInfo.id===U.getId()&&t.reason&&t.reason.forceReplace&&vt(),Ht(t.streamInfo.id).prepareQualityChange(t)}function xt(){if(Ft()){var t=W.getPlaybackQuality();t&&x.addDroppedFrames(t)}}function Ct(){e.debug("[onPlaybackStarted]"),!J&&Z&&Ut(c.PlayList.RESUME_FROM_PAUSE_START_REASON),J&&(J=!1),Z=!1}function Dt(t){e.debug("[onPlaybackPaused]"),t.ended||(Z=!0,jt(c.PlayListTrace.USER_REQUEST_STOP_REASON))}function It(t){e.debug("Stream with id ".concat(t.streamInfo.id," finished buffering")),K&&t.streamInfo.isLast?(e.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),C.signalEndOfStream(K)):Rt()}function Rt(){if(U&&U.getHasFinishedBuffering())for(var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var e=t||U||null;if(e){var n=e.getStreamInfo();return j.filter((function(t){var e=t.getStreamInfo();return e.start>n.start&&n.id!==e.id}))}}catch(r){return[]}}(U),e=0;e<t.length;){var n=t[e],r=0===e?U:t[e-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&K&&Et(n,r),e+=1}}function Ot(){tt&&(clearInterval(tt),tt=null)}function Pt(){return U?U.getProcessors():[]}function Mt(t){if(U&&!U.getIsEndedEventSignaled()){U.setIsEndedEventSignaled(!0);var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||U||null;if(!e)return null;for(var n=e.getStreamInfo(),r=n.start,i=0,a=-1,s=NaN;i<j.length;){var o=j[i],u=o.getStreamInfo(),l=u.start-r;l>0&&(isNaN(s)||l<s)&&n.id!==u.id&&(s=l,a=i),i+=1}return a>=0?j[a]:null}();n?(e.debug("StreamController onEnded, found next stream with id ".concat(n.getStreamInfo().id,". Switching from ").concat(U.getStreamInfo().id," to ").concat(n.getStreamInfo().id)),ht(n,U,NaN)):(e.debug("StreamController no next stream found"),U.setIsEndedEventSignaled(!1)),jt(n?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON)}t&&t.isLast&&Ot()}function Lt(t){var e=t||Gt().manifestInfo.duration;C.setDuration(e)}function Nt(t){var e=O.getURIFragmentData();if(!e||!e.t)return NaN;var n=Wt()[0].getStreamInfo().start;e.t=e.t.split(",")[0];var r=-1!==e.t.indexOf("posix:")?"now"===e.t.substring(6)?Date.now()/1e3:parseInt(e.t.substring(6)):NaN;return t&&!isNaN(r)?r-$.getAvailabilityStartTime()/1e3:parseInt(e.t)+n}function kt(t){if(t.error)X=!0,Xt();else{e.info("Manifest updated... updating data system wide.");var n=t.manifest;A.updatePeriods(n);var r=A.getUTCTimingSources();!A.getIsDynamic()||r&&0!==r.length||lt.trigger(p.default.CONFORMANCE_VIOLATION,{level:b.default.LEVELS.WARNING,event:b.default.EVENTS.NO_UTC_TIMING_ELEMENT});var i=A.getIsDynamic()?r.concat(Q.getUTCTimingSources()):r,a=k.isHTTPS(t.manifest.url);i.forEach((function(t){t.value.replace(/.*?:\/\//g,"")===Q.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(t.value=t.value.replace(a?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),a?"https://":"http://"),e.debug("Matching default timing source protocol to manifest protocol: ",t.value))})),l.filterUnsupportedFeatures(n).then((function(){I.initialize(n),D.attemptSync(i,A.getIsDynamic())}))}}function Ft(){return!!U&&U.getHasVideoTrack()}function Bt(){return!!U&&U.getHasAudioTrack()}function jt(t,e){e=e||new Date,Pt().forEach((function(n){n.finalisePlayList(e,t)})),x.addPlayList()}function Ut(t){x.createPlaylistMetrics(1e3*$.getTime(),t)}function Vt(t){if(t.error){var n="";switch(t.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",ot.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&it.get().errors.recoverAttempts.mediaErrorDecode>=ot.counts.mediaErrorDecode?function(){e.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var t=$.getTime();U.deactivate(!1),e.warn("MediaSource has been resetted. Resuming playback from time ".concat(t)),pt(t,!1)}():(q=!0,t.error.message&&(n+=" ("+t.error.message+")"),t.error.msExtendedCode&&(n+=" (0x"+(t.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),e.fatal("Video Element Error: "+n),t.error&&e.fatal(t.error),F.error(new y.default(t.error.code,n)),Xt())}}function Gt(){return U?U.getStreamInfo():null}function Ht(t){for(var e=0,n=j.length;e<n;e++)if(j[e].getId()===t)return j[e];return null}function Yt(){if(!(S&&S.hasOwnProperty("load")&&B&&B.hasOwnProperty("initialize")&&B.hasOwnProperty("reset")&&B.hasOwnProperty("getClientTimeOffset")&&w&&F&&x&&$))throw new Error(r.default.MISSING_CONFIG_ERROR)}function zt(t){isNaN(t.newDuration)||Lt(t.newDuration)}function qt(){j=[],V=null,z=!1,U=null,q=!1,X=!1,J=!0,Z=!1,Y=!0,tt=null,at=!1,rt=!1,nt=[],st=null,ot={counts:{mediaErrorDecode:0}}}function Xt(){Yt(),D.reset(),jt(q||X?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,n=j?j.length:0;e<n;e++)j[e].reset(q);lt.off(p.default.PLAYBACK_TIME_UPDATED,xt,t),lt.off(p.default.PLAYBACK_SEEKING,mt,t),lt.off(p.default.PLAYBACK_ERROR,Vt,t),lt.off(p.default.PLAYBACK_STARTED,Ct,t),lt.off(p.default.PLAYBACK_PAUSED,Dt,t),lt.off(p.default.PLAYBACK_ENDED,Mt,t),lt.off(p.default.METRIC_ADDED,Kt,t),lt.off(p.default.MANIFEST_VALIDITY_CHANGED,zt,t),lt.off(p.default.BUFFER_LEVEL_UPDATED,wt,t),lt.off(p.default.QUALITY_CHANGE_REQUESTED,At,t),u.default.KEY_SESSION_UPDATED&&lt.off(u.default.KEY_SESSION_UPDATED,dt,t),lt.off(u.default.MANIFEST_UPDATED,kt,t),lt.off(u.default.STREAM_BUFFERING_COMPLETED,It,t),lt.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,ct,t),lt.off(u.default.CURRENT_TRACK_CHANGED,_t,t),I.reset(),T.reset(),L.reset(),x.clearAllCurrentMetrics(),w.setValue(null),S.reset(),B.reset(),N.reset(),K&&(C.detachMediaSource(W),K=null),W=null,V&&(V=null,H=null,w.getValue()&&lt.trigger(u.default.PROTECTION_DESTROYED,{data:w.getValue().url})),Ot(),lt.trigger(u.default.STREAM_TEARDOWN_COMPLETE),qt()}function Kt(t){if(t.metric===i.default.DVR_INFO){var e=Bt()?r.default.AUDIO:r.default.VIDEO;t.mediaType===e&&C.setSeekable(t.value.range.start,t.value.range.end)}}function Wt(){return j}return t={initialize:function(e,n){Yt(),Y=e,H=n,B.initialize(),(T=Object(s.default)(ut).create()).setConfig({manifestModel:w,adapter:A,manifestLoader:S,errHandler:F,settings:it}),T.initialize(),(L=Object(_.default)(ut).getInstance()).setConfig({manifestUpdater:T,playbackController:$,settings:it}),L.start(),D.setConfig({dashMetrics:x,baseURLController:I,errHandler:F,settings:it}),D.initialize(),V&&(lt.trigger(u.default.PROTECTION_CREATED,{controller:V}),V.setMediaElement(W.getElement()),H&&V.setProtectionData(H)),lt.on(p.default.PLAYBACK_TIME_UPDATED,xt,t),lt.on(p.default.PLAYBACK_SEEKING,mt,t),lt.on(p.default.PLAYBACK_ERROR,Vt,t),lt.on(p.default.PLAYBACK_STARTED,Ct,t),lt.on(p.default.PLAYBACK_PAUSED,Dt,t),lt.on(p.default.PLAYBACK_ENDED,Mt,t),lt.on(p.default.METRIC_ADDED,Kt,t),lt.on(p.default.MANIFEST_VALIDITY_CHANGED,zt,t),lt.on(p.default.BUFFER_LEVEL_UPDATED,wt,t),lt.on(p.default.QUALITY_CHANGE_REQUESTED,At,t),u.default.KEY_SESSION_UPDATED&&lt.on(u.default.KEY_SESSION_UPDATED,dt,t),lt.on(u.default.MANIFEST_UPDATED,kt,t),lt.on(u.default.STREAM_BUFFERING_COMPLETED,It,t),lt.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,ct,t),lt.on(u.default.CURRENT_TRACK_CHANGED,_t,t)},getActiveStreamInfo:Gt,addDVRMetric:St,hasVideoTrack:Ft,hasAudioTrack:Bt,getStreamById:Ht,getStreamForTime:Tt,getTimeRelativeToStreamId:function(t,e){for(var n=null,r=0,i=0,a=null,s=0;s<j.length;s++){if(i=(n=j[s]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===e)return t-r;Number.isFinite(a)&&(r+=a)}return null},load:function(t){Yt(),S.load(t)},loadWithManifest:function(t){!function(){if(!T||!T.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),T.setManifest(t)},getActiveStreamProcessors:Pt,setConfig:function(t){t&&(t.capabilities&&(n=t.capabilities),t.capabilitiesFilter&&(l=t.capabilitiesFilter),t.manifestLoader&&(S=t.manifestLoader),t.manifestModel&&(w=t.manifestModel),t.mediaPlayerModel&&(Q=t.mediaPlayerModel),t.protectionController&&(V=t.protectionController),t.adapter&&(A=t.adapter),t.dashMetrics&&(x=t.dashMetrics),t.errHandler&&(F=t.errHandler),t.timelineConverter&&(B=t.timelineConverter),t.videoModel&&(W=t.videoModel),t.playbackController&&($=t.playbackController),t.textController&&(G=t.textController),t.abrController&&(P=t.abrController),t.mediaController&&(M=t.mediaController),t.settings&&(it=t.settings),t.baseURLController&&(I=t.baseURLController),t.uriFragmentModel&&(O=t.uriFragmentModel),t.segmentBaseController&&(R=t.segmentBaseController))},setProtectionData:function(t){H=t,V&&V.setProtectionData(H)},getIsStreamSwitchInProgress:function(){return z},switchToVideoElement:function(t){U&&($.initialize(Gt()),pt(t,!1))},getHasMediaOrInitialisationError:function(){return q||X},getStreams:Wt,getActiveStream:function(){return U},getInitialPlayback:function(){return J},getAutoPlay:function(){return Y},reset:Xt},e=Object(d.default)(ut).getInstance().getLogger(t),D=Object(g.default)(ut).getInstance(),C=Object(m.default)(ut).getInstance(),N=Object(f.default)(ut).getInstance(),k=Object(h.default)(ut).getInstance(),qt(),t}T.__dashjs_factory_name="StreamController",e.default=l.default.getSingletonFactory(T)},"./src/streaming/controllers/TimeSyncController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/errors/Errors.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/utils/URLUtils.js");function d(){var t,e,n,u,d,f,h,p,g,m,y,v,_,b,E,T,S=this.context,w=Object(a.default)(S).getInstance(),A=Object(c.default)(S).getInstance();function x(){p=[],g=[],m=null,y=null,_=null,v=NaN,n=!1,u=!1,b=d.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function C(){d.get().streaming.utcSynchronization.enabled&&!n&&!u&&_&&_.value&&_.schemeIdUri&&!isNaN(v)&&!isNaN(d.get().streaming.utcSynchronization.backgroundAttempts)&&(y&&(Date.now()-y)/1e3<30||(p=[],u=!0,function t(e){try{if(e<=0)return void j();var n=Date.now();f[_.schemeIdUri](_.value,(function(r){var i=Date.now(),a=D(n,i,r);p.push(a),t(e-1)}),(function(){j()}))}catch(r){j()}}(isNaN(d.get().streaming.utcSynchronization.backgroundAttempts)?2:d.get().streaming.utcSynchronization.backgroundAttempts)))}function D(t,e,n){return n-(e-(e-t)/2)}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=isNaN(t);e&&d.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?F():B(e,t)}function R(t){var e=Date.parse(t);return isNaN(e)&&(e=function(t){var e,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t);return e=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),e+=("+"===r[8]?-1:1)*n*60*1e3),new Date(e).getTime()}(t)),e}function O(t){return Date.parse(t)}function P(t){return Date.parse(t)}function M(t,e,n){n()}function L(t,e,n){var r=R(t);isNaN(r)?n():e(r)}function N(t,e,n,r,a){var s,o,u=!1,l=new XMLHttpRequest,c=a?i.HTTPRequest.HEAD:i.HTTPRequest.GET,d=e.match(/\S+/g);if(e=d.shift(),s=function(){u||(u=!0,d.length?N(t,d.join(" "),n,r,a):r())},o=function(){var e,r;200===l.status&&(e=a?l.getResponseHeader("Date"):l.response,r=t(e),isNaN(r)||(n(r),u=!0))},A.isRelative(e)){var f=T.resolve();f&&(e=A.resolve(e,f.url))}l.open(c,e),l.timeout=5e3,l.onload=o,l.onloadend=s,l.send()}function k(t,e,n){N(P,t,e,n,!0)}function F(){var t=h.getLatestMPDRequestHeaderValueByID("Date"),e=null!==t?new Date(t).getTime():Number.NaN;isNaN(e)?B(!0):B(!1,e-Date.now())}function B(t,i){if(isNaN(v)||isNaN(i)||t||function(t){try{var n,r=U(t),i=isNaN(b)?30:b,a=isNaN(d.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:d.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(d.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:d.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,o=isNaN(d.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:d.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;r?(n=Math.min(i*a,s),e.debug("Increasing timeBetweenSyncAttempts to ".concat(n))):(n=Math.max(i/a,o),e.debug("Decreasing timeBetweenSyncAttempts to ".concat(n))),b=n}catch(u){}}(i),!t&&!isNaN(i)){m=Date.now(),n=!1;var a=isNaN(v);v=i,a&&C(),e.debug("Completed UTC sync. Setting client - server offset to ".concat(i))}t&&(_=null,n=!1,E.error(new r.default(o.default.TIME_SYNC_FAILED_ERROR_CODE,o.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),w.trigger(s.default.UPDATE_TIME_SYNC_OFFSET,{offset:i}),w.trigger(s.default.TIME_SYNCHRONIZATION_COMPLETED)}function j(){if(p&&0!==p.length){var t=p.reduce((function(t,e){return t+e}),0)/p.length;U(t)?e.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(e.debug("Completed background UTC sync. Setting client - server offset to ".concat(t)),w.trigger(s.default.UPDATE_TIME_SYNC_OFFSET,{offset:v=t})),u=!1,y=Date.now()}}function U(t){try{if(isNaN(v))return!0;var e=d.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(d.get().streaming.utcSynchronization.maximumAllowedDrift)?d.get().streaming.utcSynchronization.maximumAllowedDrift:100;return t>=v-e&&t<=v+e}catch(n){return!0}}return t={initialize:function(){x(),f={"urn:mpeg:dash:utc:http-head:2014":k,"urn:mpeg:dash:utc:http-xsdate:2014":N.bind(null,R),"urn:mpeg:dash:utc:http-iso:2014":N.bind(null,O),"urn:mpeg:dash:utc:direct:2014":L,"urn:mpeg:dash:utc:http-head:2012":k,"urn:mpeg:dash:utc:http-xsdate:2012":N.bind(null,R),"urn:mpeg:dash:utc:http-iso:2012":N.bind(null,O),"urn:mpeg:dash:utc:direct:2012":L,"urn:mpeg:dash:utc:http-ntp:2014":M,"urn:mpeg:dash:utc:ntp:2014":M,"urn:mpeg:dash:utc:sntp:2014":M}},attemptSync:function(t,e){g=t,n||(function(t){try{if(!t||!d.get().streaming.utcSynchronization.enabled)return!1;var e=isNaN(b)?30:b;return!(m&&e&&!isNaN(e))||(Date.now()-m)/1e3>=e}catch(n){return!0}}(e)?(n=!0,function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e||0;if(!g||0===g.length||n>=g.length)I();else{var r=g[n];if(r)if(f.hasOwnProperty(r.schemeIdUri)){var i=(new Date).getTime();f[r.schemeIdUri](r.value,(function(t){var e=(new Date).getTime(),n=D(i,e,t);_=r,I(n)}),(function(){t(n+1)}))}else t(n+1);else I()}}()):w.trigger(s.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(t){t&&(t.dashMetrics&&(h=t.dashMetrics),t.baseURLController&&(T=t.baseURLController),t.errHandler&&(E=t.errHandler),t.settings&&(d=t.settings))},reset:function(){x(),w.off(s.default.ATTEMPT_BACKGROUND_SYNC,C,t)}},e=Object(l.default)(S).getInstance().getLogger(t),w.on(s.default.ATTEMPT_BACKGROUND_SYNC,C,t),t}d.__dashjs_factory_name="TimeSyncController";var f=u.default.getSingletonFactory(d);f.HTTP_TIMEOUT_MS=5e3,u.default.updateSingletonFactory(d.__dashjs_factory_name,f),e.default=f},"./src/streaming/controllers/XlinkController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/XlinkLoader.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/FactoryMaker.js"),o=n("./externals/xml2json.js"),u=n("./src/streaming/utils/URLUtils.js"),l=n("./src/dash/constants/DashConstants.js");function c(t){t=t||{};var e,n,s,c,d,f,h=this.context,p=Object(i.default)(h).getInstance(),g=Object(u.default)(h).getInstance();function m(t,e,n){var r,i,a={};a.elements=t,a.type=e,a.resolveType=n,0===a.elements.length&&v(a);for(var s=0;s<a.elements.length;s++)i=g.isHTTPURL((r=a.elements[s]).url)?r.url:r.originalContent.BaseURL+r.url,f.load(i,r,a)}function y(t){var e,n,r="";if(n=t.resolveObject,(e=t.element).resolvedContent){var i=0;0===e.resolvedContent.indexOf("<?xml")&&(i=e.resolvedContent.indexOf("?>")+2),r=e.resolvedContent.substr(0,i)+"<response>"+e.resolvedContent.substr(i)+"</response>",e.resolvedContent=d.xml_str2json(r)}(function(t){var e;for(e=0;e<t.elements.length;e++)if(!1===t.elements[e].resolved)return!1;return!0})(n)&&v(n)}function v(t){var e,n,r=[];if(function(t){var e,n,r,i,a,o=[];for(r=t.elements.length-1;r>=0;r--){if(n=(e=t.elements[r]).type+"_asArray",e.resolvedContent){if(e.resolvedContent)for(i=0;i<e.resolvedContent[n].length;i++)o.push(e.resolvedContent[n][i])}else delete e.originalContent["xlink:actuate"],delete e.originalContent["xlink:href"],o.push(e.originalContent);for(e.parentElement[n].splice(e.index,1),a=0;a<o.length;a++)e.parentElement[n].splice(e.index+a,0,o[a]);o=[]}t.elements.length>0&&s.run(c)}(t),"onActuate"===t.resolveType&&p.trigger(a.default.XLINK_READY,{manifest:c}),"onLoad"===t.resolveType)switch(t.type){case l.default.PERIOD:for(e=0;e<c[l.default.PERIOD+"_asArray"].length;e++)(n=c[l.default.PERIOD+"_asArray"][e]).hasOwnProperty(l.default.ADAPTATION_SET+"_asArray")&&(r=r.concat(_(n[l.default.ADAPTATION_SET+"_asArray"],n,l.default.ADAPTATION_SET,"onLoad"))),n.hasOwnProperty(l.default.EVENT_STREAM+"_asArray")&&(r=r.concat(_(n[l.default.EVENT_STREAM+"_asArray"],n,l.default.EVENT_STREAM,"onLoad")));m(r,l.default.ADAPTATION_SET,"onLoad");break;case l.default.ADAPTATION_SET:p.trigger(a.default.XLINK_READY,{manifest:c})}}function _(t,e,n,r){var i,a,s,o=[];for(a=t.length-1;a>=0;a--)(i=t[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&t.splice(a,1);for(a=0;a<t.length;a++)(i=t[a]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(s=b(i["xlink:href"],e,n,a,r,i),o.push(s));return o}function b(t,e,n,r,i,a){return{url:t,parentElement:e,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return e={resolveManifestOnLoad:function(t){d=new o.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(c=t).Period_asArray?m(_(c.Period_asArray,c,l.default.PERIOD,"onLoad"),l.default.PERIOD,"onLoad"):p.trigger(a.default.XLINK_READY,{manifest:c})},setMatchers:function(t){t&&(n=t)},setIron:function(t){t&&(s=t)},reset:function(){p.off(a.default.XLINK_ELEMENT_LOADED,y,e),f&&(f.reset(),f=null)}},p.on(a.default.XLINK_ELEMENT_LOADED,y,e),f=Object(r.default)(h).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings}),e}c.__dashjs_factory_name="XlinkController",e.default=s.default.getClassFactory(c)},"./src/streaming/metrics/MetricsReporting.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js"),a=n("./src/streaming/metrics/controllers/MetricsCollectionController.js"),s=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),o=n("./src/streaming/metrics/reporting/ReportingFactory.js");function u(){var t=this.context;return{createMetricsReporting:function(e){return Object(r.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialise(),Object(a.default)(t).create(e)},getReportingFactory:function(){return Object(o.default)(t).getInstance()},getMetricsHandlerFactory:function(){return Object(s.default)(t).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var l=dashjs.FactoryMaker.getClassFactory(u);l.events=i.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,l),e.default=l},"./src/streaming/metrics/MetricsReportingEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var o=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",t.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",t.CMCD_DATA_GENERATED="cmcdDataGenerated",t}return o}(n("./src/core/events/EventsBase.js").default));e.default=o},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/controllers/MetricsController.js"),i=n("./src/streaming/metrics/utils/ManifestParsing.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js");function s(t){var e,n={},s=this.context,o=(t=t||{}).eventBus,u=t.events;function l(e){if(!e.error){var u=Object.keys(n);Object(i.default)(s).getInstance({adapter:t.adapter,constants:t.constants}).getMetrics(e.manifest).forEach((function(i){var a=JSON.stringify(i);if(n.hasOwnProperty(a))u.splice(a,1);else try{var o=Object(r.default)(s).create(t);o.initialize(i),n[a]=o}catch(e){}})),u.forEach((function(t){n[t].reset(),delete n[t]})),o.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function c(){Object.keys(n).forEach((function(t){n[t].reset()})),n={}}return e={reset:function(){o.off(u.MANIFEST_UPDATED,l,e),o.off(u.STREAM_TEARDOWN_COMPLETE,c,e)}},o.on(u.MANIFEST_UPDATED,l,e),o.on(u.STREAM_TEARDOWN_COMPLETE,c,e),e}s.__dashjs_factory_name="MetricsCollectionController",e.default=dashjs.FactoryMaker.getClassFactory(s)},"./src/streaming/metrics/controllers/MetricsController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/controllers/RangeController.js"),i=n("./src/streaming/metrics/controllers/ReportingController.js"),a=n("./src/streaming/metrics/controllers/MetricsHandlersController.js");function s(t){var e,n,s;t=t||{};var o=this.context;function u(){e&&e.reset(),n&&n.reset(),s&&s.reset()}return{initialize:function(l){try{(s=Object(r.default)(o).create({mediaElement:t.mediaElement})).initialize(l.Range),(n=Object(i.default)(o).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(l.Reporting,s),(e=Object(a.default)(o).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(l.metrics,n)}catch(c){throw u(),c}},reset:u}}s.__dashjs_factory_name="MetricsController",e.default=dashjs.FactoryMaker.getClassFactory(s)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function i(t){var e,n=[],i=this.context,a=(t=t||{}).eventBus,s=t.events,o=Object(r.default)(i).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function u(t){n.forEach((function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)}))}return e={initialize:function(t,r){t.split(",").forEach((function(t,e,i){var a;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){var s=i[e+1];s&&-1===s.indexOf("(")&&-1!==s.indexOf(")")&&(t+=","+s,delete i[e+1])}(a=o.create(t,r))&&n.push(a)})),a.on(s.METRIC_ADDED,u,e),a.on(s.METRIC_UPDATED,u,e)},reset:function(){a.off(s.METRIC_ADDED,u,e),a.off(s.METRIC_UPDATED,u,e),n.forEach((function(t){return t.reset()})),n=[]}}}i.__dashjs_factory_name="MetricsHandlersController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/RangeController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/CustomTimeRanges.js");function i(t){var e,n,i=!1,a=this.context,s=(t=t||{}).mediaElement;return e={initialize:function(t){t&&t.length&&(t.forEach((function(t){var e=t.starttime;n.add(e,e+t.duration)})),i=!!t[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){var t,e=n.length;if(!e)return!0;t=i?(new Date).getTime()/1e3:s.currentTime;for(var r=0;r<e;r+=1){var a=n.start(r),o=n.end(r);if(a<=t&&t<o)return!0}return!1}},n=Object(r.default)(a).create(),e}i.__dashjs_factory_name="RangeController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/reporting/ReportingFactory.js");function i(t){var e=[],n=Object(r.default)(this.context).getInstance(t);return{initialize:function(t,r){t.some((function(t){var i=n.create(t,r);if(i)return e.push(i),!0}))},reset:function(){e.forEach((function(t){return t.reset()})),e=[]},report:function(t,n){e.forEach((function(e){return e.report(t,n)}))}}}i.__dashjs_factory_name="ReportingController",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),i=n("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),a=n("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),s=n("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function o(t){var e=(t=t||{}).debug?t.debug.getLogger(void 0):{},n=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,u={BufferLevel:r.default,DVBErrors:i.default,HttpList:a.default,PlayList:s.default,RepSwitchList:s.default,TcpList:s.default};return{create:function(r,i){var a,s=r.match(n);if(s){try{(a=u[s[1]](o).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(s[1],i,s[3],s[5])}catch(l){a=null,e.error("MetricsHandlerFactory: Could not create handler for type ".concat(s[1]," with args ").concat(s[3],", ").concat(s[5]," (").concat(l.message,")"))}return a}},register:function(t,e){u[t]=e},unregister:function(t){delete u[t]}}}o.__dashjs_factory_name="MetricsHandlerFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(t){var e,n,i,a,s;t=t||{};var o=this.context,u=Object(r.default)(o).getInstance(),l=[],c=t.metricsConstants;function d(){var t=function(){try{return Object.keys(l).map((function(t){return l[t]})).reduce((function(t,e){return t.level<e.level?t:e}))}catch(t){return}}();t&&s!==t.t&&(s=t.t,e.report(i,t))}return{initialize:function(t,r,s){r&&(n=u.validateN(s),e=r,i=u.reconstructFullMetricName(t,s),a=setInterval(d,n))},reset:function(){clearInterval(a),a=null,n=0,e=null,s=null},handleNewMetric:function(t,e,n){t===c.BUFFER_LEVEL&&(l[n]=e)}}}i.__dashjs_factory_name="BufferLevelHandler",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/MetricsReportingEvents.js");e.default=dashjs.FactoryMaker.getClassFactory((function(t){var e,n=(t=t||{}).eventBus,i=t.metricsConstants;function a(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(t,i){i&&(e=i,n.on(r.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){e=null},handleNewMetric:function(t,n){t===i.DVB_ERRORS&&e&&e.report(t,n)}}}))},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(t,e,n){"use strict";function r(){var t,e;return{initialize:function(n,r){t=n,e=r},reset:function(){e=null,t=void 0},handleNewMetric:function(n,r){n===t&&e&&e.report(t,r)}}}n.r(e),r.__dashjs_factory_name="GenericMetricHandler",e.default=dashjs.FactoryMaker.getClassFactory(r)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(t){var e,n,i,a,s;t=t||{};var o=[],u=Object(r.default)(this.context).getInstance(),l=t.metricsConstants;function c(){o.length&&e&&e.report(a,o),o=[]}return{initialize:function(t,r,o,l){r&&(n=u.validateN(o),e=r,l&&l.length&&(i=l),a=u.reconstructFullMetricName(t,o,l),s=setInterval(c,n))},reset:function(){clearInterval(s),s=null,n=null,i=null,o=[],e=null},handleNewMetric:function(t,e){t===l.HTTP_REQUEST&&(i&&i!==e.type||o.push(e))}}}i.__dashjs_factory_name="HttpListHandler",e.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function i(t){var e={"urn:dvb:dash:reporting:2014":r.default},n=this.context,i=(t=t||{}).debug?t.debug.getLogger(void 0):{},a=t.metricsConstants;return{create:function(t,r){var s;try{(s=e[t.schemeIdUri](n).create({metricsConstants:a})).initialize(t,r)}catch(o){s=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(t.schemeIdUri," (").concat(o.message,")"))}return s},register:function(t,n){e[t]=n},unregister:function(t){delete e[t]}}}i.__dashjs_factory_name="ReportingFactory",e.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/utils/MetricSerialiser.js"),i=n("./src/streaming/metrics/utils/RNG.js");function a(t){var e,n,a,s,o,u,l,c=this.context,d=[],f=(t=t||{}).metricsConstants;function h(){s=!1,o=!1,u=null,l=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),o&&l.isEnabled()&&e.forEach((function(e){var r=n.serialise(e);t!==f.DVB_ERRORS&&(r="metricname=".concat(t,"&").concat(r)),function(t,e,n){var r=new XMLHttpRequest,i=function(){var t=d.indexOf(r);-1!==t&&(d.splice(t,1),!(r.status>=200&&r.status<300)&&n&&n())};d.push(r);try{r.open("GET",t),r.onloadend=i,r.onerror=i,r.send()}catch(a){r.onerror()}}(r="".concat(u,"?").concat(r),0,(function(){o=!1}))}))},initialize:function(t,e){var n;if(l=e,!(u=t.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");s||((n=t.dvb_probability)&&(1e3===n||n/1e3>=a.random())&&(o=!0),s=!0)},reset:function(){h()}},n=Object(r.default)(c).getInstance(),a=Object(i.default)(c).getInstance(),h(),e}a.__dashjs_factory_name="DVBReporting",e.default=dashjs.FactoryMaker.getClassFactory(a)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/vo/DVBErrors.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js");function a(t){var e,n,a=(t=t||{}).eventBus,s=t.dashMetrics,o=t.metricsConstants,u=t.events;function l(t){var e=new r.default;if(n){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.mpdurl||(e.mpdurl=n.originalUrl||n.url),e.terror||(e.terror=new Date),s.addDVBErrors(e)}}function c(t){t.error||(n=t.manifest)}function d(t){l({errorcode:r.default.BASE_URL_CHANGED,servicelocation:t.entry})}function f(){l({errorcode:r.default.BECAME_REPORTER})}function h(t){switch(t.metric){case o.HTTP_REQUEST:(0===(e=t.value).responsecode||null==e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&l({errorcode:e.responsecode||r.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}var e}function p(t){var e;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:e=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:e=r.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:e})}return e={initialise:function(){a.on(u.MANIFEST_UPDATED,c,e),a.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,e),a.on(u.METRIC_ADDED,h,e),a.on(u.METRIC_UPDATED,h,e),a.on(u.PLAYBACK_ERROR,p,e),a.on(i.default.BECAME_REPORTING_PLAYER,f,e)},reset:function(){a.off(u.MANIFEST_UPDATED,c,e),a.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,e),a.off(u.METRIC_ADDED,h,e),a.off(u.METRIC_UPDATED,h,e),a.off(u.PLAYBACK_ERROR,p,e),a.off(i.default.BECAME_REPORTING_PLAYER,f,e)}}}a.__dashjs_factory_name="DVBErrorsTranslator",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(t,e,n){"use strict";function r(){return{reconstructFullMetricName:function(t,e,n){var r=t;return e&&(r+="("+e,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}n.r(e),r.__dashjs_factory_name="HandlerHelpers",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/ManifestParsing.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/metrics/vo/Metrics.js"),i=n("./src/streaming/metrics/vo/Range.js"),a=n("./src/streaming/metrics/vo/Reporting.js");function s(t){var e=(t=t||{}).adapter,n=t.constants;return{getMetrics:function(t){var s=[];return t&&t.Metrics_asArray&&t.Metrics_asArray.forEach((function(o){var u=new r.default,l=e.getIsDynamic(t);o.hasOwnProperty("metrics")&&(u.metrics=o.metrics,o.Range_asArray&&o.Range_asArray.forEach((function(r){var a=new i.default;a.starttime=function(t,r,i){var a,s,o=0;return r?o=e.getAvailabilityStartTime(t)/1e3:(a=e.getRegularPeriods(t)).length&&(o=a[0].start),s=o,i&&i.hasOwnProperty(n.START_TIME)&&(s+=i.starttime),s}(t,l,r),a.duration=r.hasOwnProperty("duration")?r.duration:e.getDuration(t),a._useWallClockTime=l,u.Range.push(a)})),o.Reporting_asArray&&(o.Reporting_asArray.forEach((function(t){var e=new a.default;t.hasOwnProperty(n.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty("value")&&(e.value=t.value),t.hasOwnProperty(n.DVB_REPORTING_URL)&&(e.dvb_reportingUrl=t[n.DVB_REPORTING_URL]),t.hasOwnProperty(n.DVB_PROBABILITY)&&(e.dvb_probability=t[n.DVB_PROBABILITY]),u.Reporting.push(e))})),s.push(u)))})),s}}}s.__dashjs_factory_name="ManifestParsing",e.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(t,e,n){"use strict";function r(){return{serialise:function t(e){var n,r,i=[],a=[];for(n in e)if(e.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(r=e[n])&&(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach((function(e){var n="Object"!==Object.prototype.toString.call(e).slice(8,-1);a.push(n?e:t(e))})),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}n.r(e),r.__dashjs_factory_name="MetricSerialiser",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/RNG.js":function(t,e,n){"use strict";function r(){var t,e,n,r=window.crypto||window.msCrypto,i=Uint32Array,a=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function s(){r&&(t||(t=new i(10)),r.getRandomValues(t),e=0)}return n={random:function(n,i){var o;return n||(n=0),i||(i=1),r?(e===t.length&&s(),o=t[e]/a,e+=1):o=Math.random(),o*(i-n)+n}},s(),n}n.r(e),r.__dashjs_factory_name="RNG",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/vo/DVBErrors.js":function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",e.default=r},"./src/streaming/metrics/vo/Metrics.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/utils/ObjectUtils.js"),i=n("./src/core/FactoryMaker.js"),a=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={baseUrls:e||null,selectedIdx:n||NaN},this.children=[]};function s(){var t,e,n,i=this.context,s=Object(r.default)(i).getInstance();function o(t,e,r){var i=n.getBaseURLsFromElement(r);t[e]?s.areEqual(i,t[e].data.baseUrls)||(t[e].data.baseUrls=i,t[e].data.selectedIdx=NaN):t[e]=new a(i)}function u(){e=new a}return t={reset:u,update:function(t){!function(t){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(t);s.areEqual(r,e.data.baseUrls)||(e.data.baseUrls=r,e.data.selectedIdx=NaN),t&&t.Period_asArray&&t.Period_asArray.forEach((function(t,r){o(e.children,r,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach((function(t,i){o(e.children[r].children,i,t),t.Representation_asArray&&t.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(t,n){o(e.children[r].children[i].children,n,t)}))}))}))}(t)},getForPath:function(t){var n=e,r=[n.data];return t&&t.forEach((function(t){(n=n.children[t])&&r.push(n.data)})),r.filter((function(t){return t.baseUrls.length}))},invalidateSelectedIndexes:function(t){!function t(n,r){var i=r||e;n(i.data),i.children&&i.children.forEach((function(e){return t(n,e)}))}((function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)}))},setConfig:function(t){t.adapter&&(n=t.adapter)}},u(),t}s.__dashjs_factory_name="BaseURLTreeModel",e.default=i.default.getClassFactory(s)},"./src/streaming/models/CmcdModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/streaming/MediaPlayerEvents.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/dash/models/DashManifestModel.js"),d=n("./src/core/Utils.js");function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(){var t,e,n,s,h,p,g,m,y,v,_=this.context,b=Object(r.default)(_).getInstance(),E=Object(o.default)(_).getInstance();function T(){n={pr:1,nor:null,st:null,sf:null,sid:"".concat(d.default.generateUuid()),cid:null},y={},m={},v={},w()}function S(){w()}function w(){if(p){var t=p.getStreamController();if(t&&"function"==typeof t.getActiveStream){var e=t.getActiveStream();e&&(g=e.getProcessors())}}}function A(t,e){var n,r={},i=f(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t[a]&&(r[a]=t[a])}}catch(s){i.e(s)}finally{i.f()}return r}function x(t){try{return t.type===l.HTTPRequest.MPD_TYPE?((r=C()).ot="m",r):t.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(v.hasOwnProperty(e=t.mediaType)||(v[e]=!1),m.hasOwnProperty(e)||(m[e]=!1),y.hasOwnProperty(e)||(y[e]=!1),function(t){var e,r=C(),i=function(t){try{return parseInt(t.mediaInfo.bitrateList[t.quality].bandwidth/1e3)}catch(e){return null}}(t),a=function(t){try{return isNaN(t.duration)?null:Math.round(1e3*t.duration)}catch(e){return null}}(t),o=function(t){try{return 100*parseInt(s.getThroughputHistory().getSafeAverageThroughput(t)/100)}catch(e){return null}}(t.mediaType),l=function(t){try{var e=n.pr,r=h.getCurrentBufferLevel(t);return isNaN(e)||isNaN(r)?null:100*parseInt(r/e*10)}catch(i){return null}}(t.mediaType),c=D(t.mediaType),_=function(t){try{var e=s.getTopBitrateInfoFor(t);return Math.round(e.bitrate/1e3)}catch(n){return null}}(t.mediaType),b=n.pr,T=function(t){if(g&&0!==g.length){var e,n=f(g);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.getType()===t)return r.probeNextRequest()}}catch(i){n.e(i)}finally{n.f()}}}(t.mediaType);t.mediaType===u.default.VIDEO&&(e="v"),t.mediaType===u.default.AUDIO&&(e="a"),t.mediaType===u.default.TEXT&&(e="application/mp4"===t.mediaInfo.mimeType?"tt":"c");var S=E.get().streaming.cmcd.rtp;return S||(S=function(t){var e=p.getPlaybackRate();e||(e=1);var n=t.quality,r=t.mediaInfo,i=t.duration,a=D(t.mediaType);0===a&&(a=500);var s=r.bitrateList[n].bandwidth*i/1e3/(a/e/1e3),o=E.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(E.get().streaming.cmcd.rtpSafetyFactor)?E.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(s*o/100)+1)}(t)),r.rtp=S,T&&(t.url!==T.url?r.nor=encodeURIComponent(d.default.getRelativeUrl(t.url,T.url)):T.range&&(r.nrr=T.range)),i&&(r.br=i),e&&(r.ot=e),isNaN(a)||(r.d=a),isNaN(o)||(r.mtp=o),isNaN(l)||(r.dl=l),isNaN(c)||(r.bl=c),isNaN(_)||(r.tb=_),isNaN(b)||1===b||(r.pr=b),y[t.mediaType]&&(r.bs=!0,y[t.mediaType]=!1),!m[t.mediaType]&&v[t.mediaType]||(r.su=!0,m[t.mediaType]=!1,v[t.mediaType]=!0),r}(t)):t.type===l.HTTPRequest.INIT_SEGMENT_TYPE?function(){var t=C();return t.ot="i",t.su=!0,t}():t.type===l.HTTPRequest.OTHER_TYPE||t.type===l.HTTPRequest.XLINK_EXPANSION_TYPE?function(){var t=C();return t.ot="o",t}():t.type===l.HTTPRequest.LICENSE?function(t){var e=C();return e.ot="k",e}():null}catch(i){return null}var e,r}function C(){var t={},e=E.get().streaming.cmcd.cid?E.get().streaming.cmcd.cid:n.cid;return t.v=1,t.sid=E.get().streaming.cmcd.sid?E.get().streaming.cmcd.sid:n.sid,t.sid="".concat(t.sid),e&&(t.cid="".concat(e)),isNaN(n.pr)||1===n.pr||null===n.pr||(t.pr=n.pr),n.st&&(t.st=n.st),n.sf&&(t.sf=n.sf),t}function D(t){try{var e=h.getCurrentBufferLevel(t);return isNaN(e)?null:100*parseInt(10*e)}catch(n){return null}}function I(t){try{n.pr=t.playbackRate}catch(e){}}function R(e){try{var r=t.getIsDynamic(e.data),i=e.protocol&&"MSS"===e.protocol?"s":"d";n.st="".concat(r?"l":"v"),n.sf="".concat(i)}catch(a){}}function O(t){try{t.state&&t.mediaType&&t.state===i.default.BUFFER_EMPTY&&(y[t.mediaType]||(y[t.mediaType]=!0),m[t.mediaType]||(m[t.mediaType]=!0))}catch(e){}}function P(){for(var t in y)y.hasOwnProperty(t)&&(y[t]=!0);for(var e in m)m.hasOwnProperty(e)&&(m[e]=!0)}function M(t){try{if(!t)return null;var e=Object.keys(t).sort((function(t,e){return t.localeCompare(e)})),n=e.length,r=e.reduce((function(e,r,i){if("v"===r&&1===t[r])return e;if("string"==typeof t[r]&&"ot"!==r&&"sf"!==r&&"st"!==r){var a=t[r].replace(/"/g,'"');e+="".concat(r,'="').concat(a,'"')}else e+="".concat(r,"=").concat(t[r]);return i<n-1&&(e+=","),e}),"");return(r=r.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(i){return null}}return e={getQueryParameter:function(t){try{if(E.get().streaming.cmcd&&E.get().streaming.cmcd.enabled){var e=x(t),n=M(e);return b.trigger(a.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(r){return null}},getHeaderParameters:function(t){try{if(E.get().streaming.cmcd&&E.get().streaming.cmcd.enabled){var e=x(t),n=A(e,["br","d","ot","tb"]),r=A(e,["bl","dl","mtp","nor","nrr","su"]),i=A(e,["bs","rtp"]),s=A(e,["cid","pr","sf","sid","st","v"]),o={"CMCD-Object":M(n),"CMCD-Request":M(r),"CMCD-Status":M(i),"CMCD-Session":M(s)};return b.trigger(a.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,headers:o}),o}return null}catch(u){return null}},setConfig:function(t){t&&(t.abrController&&(s=t.abrController),t.dashMetrics&&(h=t.dashMetrics),t.playbackController&&(p=t.playbackController))},reset:function(){b.off(i.default.PLAYBACK_RATE_CHANGED,I,this),b.off(i.default.MANIFEST_LOADED,R,this),b.off(i.default.BUFFER_LEVEL_STATE_CHANGED,O,e),b.off(i.default.PLAYBACK_SEEKED,P,e),T()},initialize:function(){b.on(i.default.PLAYBACK_RATE_CHANGED,I,e),b.on(i.default.MANIFEST_LOADED,R,e),b.on(i.default.BUFFER_LEVEL_STATE_CHANGED,O,e),b.on(i.default.PLAYBACK_SEEKED,P,e),b.on(i.default.PERIOD_SWITCH_COMPLETED,S,e)}},t=Object(c.default)(_).getInstance(),T(),e}p.__dashjs_factory_name="CmcdModel",e.default=s.default.getSingletonFactory(p)},"./src/streaming/models/FragmentModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/vo/FragmentRequest.js");function a(t){var e,n,r,a,s=(t=t||{}).eventBus,o=t.events,u=t.dashMetrics,l=t.fragmentLoader,c=t.streamInfo,d=t.type;function f(t){var e;return!!t&&(e=!1,r.some((function(n){if(r=t,a=n,!isNaN(r.index)&&r.startTime===a.startTime&&r.adaptationIndex===a.adaptationIndex&&r.type===a.type||function(t,e){return isNaN(t.index)&&isNaN(e.index)&&t.quality===e.quality}(t,n)||function(t,e){return t.action===i.default.ACTION_COMPLETE&&t.action===e.action}(t,n))return e=!0;var r,a})),e)}function h(t){return isNaN(t.duration)?.25:Math.min(t.duration/8,.5)}function p(t){r=r.filter((function(e){var n=h(e);return isNaN(e.startTime)||void 0!==t&&e.startTime>=t-n}))}function g(t,e){e<=t+.5||(r=r.filter((function(n){var r=h(n);return isNaN(n.startTime)||n.startTime>=e-r||isNaN(n.duration)||n.startTime+n.duration<=t+r})))}function m(t,e,n){for(var r=t.length-1;r>=0;r--){var i=t[r],a=i.startTime,s=a+i.duration;if(n=isNaN(n)?h(i):n,!isNaN(a)&&!isNaN(s)&&e+n>=a&&e-n<s||isNaN(a)&&isNaN(e))return i}return null}function y(t,e){u.addSchedulingInfo(t,e),u.addRequestsQueue(t.mediaType,a,r)}function v(t){t.sender===l&&(a.splice(a.indexOf(t.request),1),t.response&&!t.error&&r.push(t.request),y(t.request,t.error?"failed":"executed"),s.trigger(o.FRAGMENT_LOADING_COMPLETED,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:c.id,mediaType:d}))}function _(t){t.sender===l&&s.trigger(o.FRAGMENT_LOADING_PROGRESS,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:c.id,mediaType:d})}function b(t){t.sender===l&&s.trigger(o.FRAGMENT_LOADING_ABANDONED,{request:t.request},{streamId:c.id,mediaType:d})}function E(){r=[],a=[]}return e={getStreamId:function(){return c.id},getType:function(){return d},getRequests:function(t){var e=[];return(t?t.state instanceof Array?t.state:[t.state]:[]).forEach((function(n){var i=function(t){var e;switch(t){case"loading":e=a;break;case"executed":e=r;break;default:e=[]}return e}(n);e=e.concat(function(t,e){return e.hasOwnProperty("time")?[m(t,e.time,e.threshold)]:t.filter((function(t){for(var n in e)if("state"!==n&&e.hasOwnProperty(n)&&t[n]!=e[n])return!1;return!0}))}(i,t))})),e},isFragmentLoaded:f,isFragmentLoadedOrPending:function(t){var e,n=!1,r=0;if(!(n=f(t)))for(r=0;r<a.length;r++)t.url===(e=a[r]).url&&t.startTime===e.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:p,removeExecutedRequestsAfterTime:function(t){r=r.filter((function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t}))},syncExecutedRequestsWithBufferedRange:function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=t.length;r<i;r++)g(n,t.start(r)),n=t.end(r);e>0&&g(n,e)}else p()},abortRequests:function(){n.debug("abort requests"),l.abort(),a=[]},executeRequest:function(t){switch(t.action){case i.default.ACTION_DOWNLOAD:y(t,"loading"),a.push(t),function(t){s.trigger(o.FRAGMENT_LOADING_STARTED,{request:t},{streamId:c.id,mediaType:d}),l.load(t)}(t);break;default:n.warn("Unknown request action.")}},reset:function(){s.off(o.LOADING_COMPLETED,v,this),s.off(o.LOADING_DATA_PROGRESS,_,this),s.off(o.LOADING_ABANDONED,b,this),l&&l.reset(),E()},resetInitialSettings:E,addExecutedRequest:function(t){r.push(t)}},n=t.debug.getLogger(e),E(),s.on(o.LOADING_COMPLETED,v,e),s.on(o.LOADING_DATA_PROGRESS,_,e),s.on(o.LOADING_ABANDONED,b,e),e}a.__dashjs_factory_name="FragmentModel";var s=r.default.getClassFactory(a);s.FRAGMENT_MODEL_LOADING="loading",s.FRAGMENT_MODEL_EXECUTED="executed",s.FRAGMENT_MODEL_CANCELED="canceled",s.FRAGMENT_MODEL_FAILED="failed",r.default.updateClassFactory(a.__dashjs_factory_name,s),e.default=s},"./src/streaming/models/LowLatencyThroughputModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js");function a(){var t,e,n=this.context,i={};function a(){e=Object(r.default)(n).getInstance().getLogger(t)}function s(t){for(var e={},n=0,r=0,i=0,a=0,s=t.length,o=0;o<s;++o)n+=t[o].chunkDownloadTimeRelativeMS,r+=t[o].bufferLevel,i+=t[o].chunkDownloadTimeRelativeMS*t[o].bufferLevel,a+=t[o].chunkDownloadTimeRelativeMS*t[o].chunkDownloadTimeRelativeMS;return e.m=(i-n*r/s)/(a-n*n/s),e.b=r/s-e.m*n/s,function(t){return e.m*t+e.b}}function o(t){var e,n=!0,r=t.reduce((function(t,e){return t+e.bufferLevelAtSegmentEnd}),0)/t.length;return t.forEach((function(t){Math.abs(t.bufferLevelAtSegmentEnd/t.bufferLevelAtSegmentStart)<.95&&(n=!1),t.bufferLevelAtSegmentEnd/r<.8&&(n=!1),e?e>t.bitrate&&(n=!1):e=t.bitrate})),n}return t={setup:a,addMeasurement:function(t,e,n,r,a){t&&t.mediaType&&!i[t.mediaType]&&(i[t.mediaType]=[]);var o=t.mediaInfo.bitrateList.find((function(e){return e.id===t.representationId}));i[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:r,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:n.reduce((function(t,e){return t+e.chunkDownloadDurationMS}),0),segmentBytes:n.reduce((function(t,e){return t+e.chunkBytes}),0),bitrate:o&&o.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:e,throughputCapacityDelayMS:a,getEstimatedBufferLevel:s(n.slice(1))}),i[t.mediaType].length>10&&i[t.mediaType].shift()},getThroughputCapacityDelayMS:function(t,e){var n=i[t.mediaType]&&i[t.mediaType].slice(-3);return!n||n.length<3?0:o(n)?e/4>250?250:e/4:0},getEstimatedDownloadDurationMS:function(t){var n=i[t.mediaType].slice(-1).pop(),r=i[t.mediaType].slice(-3),a=n.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;n.bufferLevelAtSegmentStart=n.getEstimatedBufferLevel(a/2),n.bufferLevelAtSegmentEnd=n.getEstimatedBufferLevel(a);var s=o(r),u=s?.6:.8;if(n.isBufferStable&&1.05*n.segDurationMS<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS;if(!s||n.segDurationMS<n.fetchDownloadDurationMS)return.8*n.fetchDownloadDurationMS;if(n.adjustedAvailabilityStartTimeMS<=n.requestTimeMS+n.throughputCapacityDelayMS-n.segDurationMS)return.8*n.fetchDownloadDurationMS;for(var l=n.requestTimeMS+n.throughputCapacityDelayMS-n.adjustedAvailabilityStartTimeMS,c=0,d=0,f=0,h=0;h<n.chunkMeasurements.length;h++){var p=n.chunkMeasurements[h];if(l<d+p.chunkDownloadDurationMS)break;d+=p.chunkDownloadDurationMS,c+=p.chunkBytes,f++}if(l<0&&e.warn("request time was before adjusted availibitly start time"),c&&d&&f>.2*n.chunkMeasurements.length){var g=n.segmentBytes/(c/d);return n.fetchDownloadDurationMS<g?n.fetchDownloadDurationMS*u:g*u}var m=n.bitrate;return n.bitrateList.some((function(t){if(t.bandwidth>n.bitrate)return m=t.bandwidth,!0})),m===n.bitrate?n.fetchDownloadDurationMS*u:u*n.segmentBytes*8*1e3/m}},a(),t}a.__dashjs_factory_name="LowLatencyThroughputModel",e.default=i.default.getSingletonFactory(a)},"./src/streaming/models/ManifestModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function s(){var t,e=this.context,n=Object(r.default)(e).getInstance();return{getValue:function(){return t},setValue:function(e){t=e,e&&n.trigger(i.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",e.default=a.default.getSingletonFactory(s)},"./src/streaming/models/MediaPlayerModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/UTCTiming.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/rules/abr/ABRRulesCollection.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/utils/SupervisorTools.js");function l(){var t,e,n,i,l=this.context,c=Object(o.default)(l).getInstance();function d(t){var e;for(e=0;e<i.length;e++)if(i[e].rulename===t)return e;return-1}function f(){if(c.get().streaming.lowLatencyEnabled)return h();var t=c.get().streaming.buffer.stableBufferTime;return t>0?t:c.get().streaming.buffer.fastSwitchEnabled?20:12}function h(){return c.get().streaming.lowLatencyEnabled?c.get().streaming.delay.liveDelay||3:c.get().streaming.delay.liveDelay}function p(t,n){g(t,n);var i=new r.default;i.schemeIdUri=t,i.value=n,e.push(i)}function g(t,n){Object(u.checkParameterType)(t,"string"),Object(u.checkParameterType)(n,"string"),e.forEach((function(r,i){r.schemeIdUri===t&&r.value===n&&e.splice(i,1)}))}return t={getABRCustomRules:function(){return i},addABRCustomRule:function(t,e,n){if("string"!=typeof t||t!==s.default.ABANDON_FRAGMENT_RULES&&t!==s.default.QUALITY_SWITCH_RULES||"string"!=typeof e)throw a.default.BAD_ARGUMENT_ERROR;var r=d(e);-1===r?i.push({type:t,rulename:e,rule:n}):(i[r].type=t,i[r].rule=n)},removeABRCustomRule:function(t){if(t){var e=d(t);-1!==e&&i.splice(e,1)}else i=[]},getStableBufferTime:f,getInitialBufferLevel:function(){var t=c.get().streaming.buffer.initialBufferLevel;return isNaN(t)||t<0?0:Math.min(f(),t)},getRetryAttemptsForType:function(t){var e=isNaN(c.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:c.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryAttempts[t]*e:c.get().streaming.retryAttempts[t]},getRetryIntervalsForType:function(t){var e=isNaN(c.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:c.get().streaming.retryIntervals.lowLatencyReductionFactor;return c.get().streaming.lowLatencyEnabled?c.get().streaming.retryIntervals[t]/e:c.get().streaming.retryIntervals[t]},getLiveDelay:h,getLiveCatchupLatencyThreshold:function(){try{var t=c.get().streaming.liveCatchup.latencyThreshold,e=h();if(null!==t&&!isNaN(t))return Math.max(t,e);var n=c.get().streaming.liveCatchup.minDrift,r=!isNaN(e)&&e?isNaN(n)?h():c.get().streaming.liveCatchup.minDrift+h():NaN;return r&&!isNaN(r)?Math.max(4*r,5):NaN}catch(i){return NaN}},addUTCTimingSource:p,removeUTCTimingSource:g,getUTCTimingSources:function(){return e},clearDefaultUTCTimingSources:function(){e=[]},restoreDefaultUTCTimingSources:function(){var t=c.get().streaming.utcSynchronization.defaultTimingSource;p(t.scheme,t.value)},setXHRWithCredentialsForType:function t(e,r){e?n[e]=!!r:Object.keys(n).forEach((function(e){t(e,r)}))},getXHRWithCredentialsForType:function(t){var e=n[t];return void 0===e?n.default:e},getDefaultUtcTimingSource:function(){return c.get().streaming.utcSynchronization.defaultTimingSource},reset:function(){}},e=[],n={default:!1},i=[],t}l.__dashjs_factory_name="MediaPlayerModel",e.default=i.default.getSingletonFactory(l)},"./src/streaming/models/MetricsModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/vo/MetricsList.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/streaming/vo/metrics/RepresentationSwitch.js"),u=n("./src/streaming/vo/metrics/BufferLevel.js"),l=n("./src/streaming/vo/metrics/BufferState.js"),c=n("./src/streaming/vo/metrics/DVRInfo.js"),d=n("./src/streaming/vo/metrics/DroppedFrames.js"),f=n("./src/streaming/vo/metrics/ManifestUpdate.js"),h=n("./src/streaming/vo/metrics/SchedulingInfo.js"),p=n("./src/core/EventBus.js"),g=n("./src/streaming/vo/metrics/RequestsQueue.js"),m=n("./src/core/events/Events.js"),y=n("./src/core/FactoryMaker.js");function v(t){var e,n,y=(t=t||{}).settings,v=this.context,_=Object(p.default)(v).getInstance();function b(){_.trigger(m.default.METRICS_CHANGED)}function E(t){_.trigger(m.default.METRIC_CHANGED,{mediaType:t}),b()}function T(t,e,n){_.trigger(m.default.METRIC_UPDATED,{mediaType:t,metric:e,value:n}),E(t)}function S(t,e,n){_.trigger(m.default.METRIC_ADDED,{mediaType:t,metric:e,value:n}),E(t)}function w(t,e){var r=null;return t?(n.hasOwnProperty(t)?r=n[t]:e||(r=new a.default,n[t]=r),r):r}function A(t,e,n){var r=w(t);null!==r&&(r[e].push(n),r[e].length>y.get().streaming.metrics.maxListDepth&&r[e].shift())}function x(t,e,n){A(t,e,n),S(t,e,n)}return e={clearCurrentMetricsForType:function(t){delete n[t],E(t)},clearAllCurrentMetrics:function(){n={},b()},getMetricsFor:w,addHttpRequest:function t(e,n,r,a,o,u,l,c,d,f,h,p,g,m,y){var v=new s.HTTPRequest;u&&u!==a&&(t(e,null,r,a,o,null,null,c,d,null,null,null,g,null,null),v.actualurl=u),v.tcpid=n,v.type=r,v.url=a,v.range=c,v.trequest=d,v.tresponse=f,v.responsecode=p,v._tfinish=h,v._stream=e,v._mediaduration=g,v._quality=o,v._responseHeaders=m,v._serviceLocation=l,y?y.forEach((function(t){!function(t,e,n,r,i){var a=new s.HTTPRequestTrace;a.s=e,a.d=n,a.b=r,a.t=i,t.trace.push(a),t.interval||(t.interval=0),t.interval+=n}(v,t.s,t.d,t.b,t.t)})):(delete v.interval,delete v.trace),x(e,i.default.HTTP_REQUEST,v)},addRepresentationSwitch:function(t,e,n,r,a){var s=new o.default;s.t=e,s.mt=n,s.to=r,a?s.lto=a:delete s.lto,x(t,i.default.TRACK_SWITCH,s)},addBufferLevel:function(t,e,n){var r=new u.default;r.t=e,r.level=n,x(t,i.default.BUFFER_LEVEL,r)},addBufferState:function(t,e,n){var r=new l.default;r.target=n,r.state=e,x(t,i.default.BUFFER_STATE,r)},addDVRInfo:function(t,e,n,r){var a=new c.default;a.time=e,a.range=r,a.manifestInfo=n,x(t,i.default.DVR_INFO,a)},addDroppedFrames:function(t,e){var n=new d.default,r=w(t).DroppedFrames;e&&(n.time=e.creationTime,n.droppedFrames=e.droppedVideoFrames,r.length>0&&r[r.length-1]==n||x(t,i.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(t,e,n,r,a,s,o,u,l){var c=new h.default;c.mediaType=t,c.t=e,c.type=n,c.startTime=r,c.availabilityStartTime=a,c.duration=s,c.quality=o,c.range=u,c.state=l,x(t,i.default.SCHEDULING_INFO,c)},addRequestsQueue:function(t,e,n){var r=new g.default;r.loadingRequests=e,r.executedRequests=n,w(t).RequestsQueue=r,S(t,i.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(t,e,n,a,s,o,u,l,c,d){var h=new f.ManifestUpdate;h.mediaType=t,h.type=e,h.requestTime=n,h.fetchTime=a,h.availabilityStartTime=s,h.presentationStartTime=o,h.clientTimeOffset=u,h.currentTime=l,h.buffered=c,h.latency=d,A(r.default.STREAM,i.default.MANIFEST_UPDATE,h),S(t,i.default.MANIFEST_UPDATE,h)},updateManifestUpdateInfo:function(t,e){if(t){for(var n in e)t[n]=e[n];T(t.mediaType,i.default.MANIFEST_UPDATE,t)}},addManifestUpdateStreamInfo:function(t,e,n,r,a){if(t){var s=new f.ManifestUpdateStreamInfo;s.id=e,s.index=n,s.start=r,s.duration=a,t.streamInfo.push(s),T(t.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,t)}},addManifestUpdateRepresentationInfo:function(t,e,n,r,a,s,o,u){if(t&&t.representationInfo){var l=new f.ManifestUpdateRepresentationInfo;l.id=e,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=o,l.fragmentInfoType=u,l.presentationTimeOffset=s,t.representationInfo.push(l),T(t.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,t)}},addPlayList:function(t){t.trace&&Array.isArray(t.trace)?t.trace.forEach((function(t){t.hasOwnProperty("subreplevel")&&!t.subreplevel&&delete t.subreplevel})):delete t.trace,x(r.default.STREAM,i.default.PLAY_LIST,t)},addDVBErrors:function(t){x(r.default.STREAM,i.default.DVB_ERRORS,t)}},n={},e}v.__dashjs_factory_name="MetricsModel",e.default=y.default.getSingletonFactory(v)},"./src/streaming/models/URIFragmentModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/URIFragmentData.js"),i=n("./src/core/FactoryMaker.js");function a(){var t;return{initialize:function(e){if(t=new r.default,!e)return null;var n=e.indexOf("#");if(-1!==n)for(var i=e.substr(n+1).split("&"),a=0,s=i.length;a<s;++a){var o=i[a],u=o.indexOf("=");if(-1!==u){var l=o.substring(0,u);t.hasOwnProperty(l)&&(t[l]=o.substr(u+1))}}},getURIFragmentData:function(){return t}}}a.__dashjs_factory_name="URIFragmentModel",e.default=i.default.getSingletonFactory(a)},"./src/streaming/models/VideoModel.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/Debug.js"),o=n("./src/streaming/constants/Constants.js"),u=new Map([[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function l(){var t,e,n,r,l=this.context,c=Object(i.default)(l).getInstance(),d=[];function f(){n&&(n.playbackRate=1,n.removeEventListener("canplay",f))}function h(){return d.length>0}function p(){if(n&&h()&&0===n.playbackRate){var t=document.createEvent("Event");t.initEvent("waiting",!0,!1),n.dispatchEvent(t)}}function g(t,e){n&&n.addEventListener(t,e)}function m(t,e){n&&n.removeEventListener(t,e)}function y(){return n?n.readyState:NaN}function v(){return n?n.buffered:null}function _(t,e,r,i,a){if(n)for(var s=0;s<n.textTracks.length;s++)if(n.textTracks[s].kind===t&&(!e||n.textTracks[s].label==e)&&n.textTracks[s].language===r&&n.textTracks[s].isTTML===i&&n.textTracks[s].isEmbedded===a)return n.textTracks[s];return null}function b(t,e){t===o.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||y()>=t?e():function(t,e){g(t,(function n(){m(t,n),e(t)}))}(u.get(t),e)}return t={initialize:function(){c.on(a.default.PLAYBACK_PLAYING,p,this)},setCurrentTime:function(t,e){b(o.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(n){if(n.currentTime===t)return;try{t=e?function(t){var e=v(),n=t,r=9999999999;if(e)for(var i=0;i<e.length;i++){var a=e.start(i),s=e.end(i),o=Math.abs(a-t),u=Math.abs(s-t);if(t>=a&&t<=s)return t;o<r&&(r=o,n=a),u<r&&(r=u,n=s)}return n}(t):t,n.currentTime=t}catch(r){0===n.readyState&&r.code===r.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=t}),400)}}}))},play:function(){if(n){n.autoplay=!0;var t=n.play();t&&t.catch&&"undefined"!=typeof Promise&&t.catch((function(t){"NotAllowedError"===t.name&&c.trigger(a.default.PLAYBACK_NOT_ALLOWED),e.warn("Caught pending play exception - continuing (".concat(t,")"))}))}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:h,isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(!e&&n.readyState<=2&&t>0?n.addEventListener("canplay",f):n.playbackRate=t)},getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(t,e){!function(t,e){e?function(t){null!==t&&n&&!n.seeking&&-1===d.indexOf(t)&&d.push(t)}(t):function(t){var e=d.indexOf(t);null!==t&&-1!==e&&d.splice(e,1)}(t)}(t,e)},getElement:function(){return n},setElement:function(t){if(!(null==t||t&&/^(VIDEO|AUDIO)$/i.test(t.nodeName)))throw"element is not video or audio DOM type!";(n=t)&&(n.preload="auto")},setSource:function(t){n&&(t?n.src=t:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return r},setTTMLRenderingDiv:function(t){(r=t).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},getPlaybackQuality:function(){if(!n)return null;var t="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,e=null;return"getVideoPlaybackQuality"in n?e=n.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),e},addEventListener:g,removeEventListener:m,getReadyState:y,getBufferRange:v,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:_,addTextTrack:function(t,e,r,i,a){if(!n)return null;var s=_(t,e,r,i,a);return s||((s=n.addTextTrack(t,e,r)).isEmbedded=a,s.isTTML=i),s},appendChild:function(t){n&&(n.appendChild(t),void 0!==t.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=t.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function(t){n&&n.removeChild(t)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var t=n.parentNode.host||n.parentNode;return t?n.getBoundingClientRect().top-t.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var t=n.parentNode.host||n.parentNode;return t?n.getBoundingClientRect().left-t.getBoundingClientRect().left:NaN},waitForReadyState:b,reset:function(){c.off(a.default.PLAYBACK_PLAYING,p,this)}},e=Object(s.default)(l).getInstance().getLogger(t),t}l.__dashjs_factory_name="VideoModel",e.default=r.default.getSingletonFactory(l)},"./src/streaming/net/FetchLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Settings.js"),a=n("./src/streaming/constants/Constants.js");function s(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e,n=this.context,r=(t=t||{}).requestModifier,o=t.lowLatencyThroughputModel,u=t.boxParser,l=Object(i.default)(n).getInstance();function c(t,e){t.reader.read().then(e).catch((function(e){t.onerror&&200===t.response.status&&t.onerror(e)}))}function d(t,e){try{if((t=t.filter((function(n){return n.bytes>e/4/t.length}))).length>1){var n=0,r=(t[t.length-1].ts-t[0].ts)/t.length;return t.forEach((function(e,i){var a=t[i+1];if(a){var s=a.ts-e.ts;n+=s<r?s:0}})),n}return null}catch(i){return null}}return{load:function(t){var n,i=new Date,f=t.request,h=new Headers;if(f.range&&h.append("Range","bytes="+f.range),t.headers)for(var p in t.headers){var g=t.headers[p];g&&h.append(p,g)}f.requestStartDate||(f.requestStartDate=i),r&&r.modifyRequestHeader({setRequestHeader:function(t,e){h.append(t,e)}}),"function"==typeof window.AbortController&&(n=new AbortController,t.abortController=n,n.signal.onabort=t.onabort);var m={method:t.method,headers:h,credentials:t.withCredentials?"include":void 0,signal:n?n.signal:void 0},y=l.get().streaming.abr.fetchThroughputCalculationMode,v=Date.now(),_=0;new Promise((function(t){if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&o&&(_=o.getThroughputCapacityDelayMS(f,1e3*e.getCurrentBufferLevel(f.mediaType))))return setTimeout(t,_);t()})).then((function(){var n=Date.now();fetch(t.url,m).then((function(r){t.response||(t.response={}),t.response.status=r.status,t.response.statusText=r.statusText,t.response.responseURL=r.url,r.ok||t.onerror();var i,l="",h=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(r.headers.keys());try{for(h.s();!(i=h.n()).done;){var p=i.value;l+=p+": "+r.headers.get(p)+"\r\n"}}catch(L){h.e(L)}finally{h.f()}if(t.response.responseHeaders=l,!r.body)return r.arrayBuffer().then((function(e){t.response.response=e,t.progress({loaded:e.byteLength,total:e.byteLength,stream:!1}),t.onload(),t.onend()}));var g,m,b,E=parseInt(r.headers.get("Content-Length"),10),T=0,S=!1,w=new Uint8Array,A=0;if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&o){var x=n,C=0,D=(2,function(t){if(Array.isArray(t))return t}(b=r.body.tee())||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),2!==n.length);r=!0);}catch(L){i=!0,a=L}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}(b)||s(b,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),I=D[1];g=D[0].getReader(),m=[],g.read().then((function r(i){var a=i.value,s=i.done;if(C=Date.now(),a&&a.length){var u=C-x,c=a.length;m.push({chunkDownloadTimeRelativeMS:C-n,chunkDownloadDurationMS:u,chunkBytes:c,kbps:Math.round(8*c/(u/1e3)),bufferLevel:e.getCurrentBufferLevel(f.mediaType)})}if(s){var d=C-n,h=m.reduce((function(t,e){return t+e.chunkBytes}),0);return o.addMeasurement(f,d,m,v,_,l),void t.progress({loaded:h,total:h,lengthComputable:!0,time:o.getEstimatedDownloadDurationMS(f),stream:!0})}return x=Date.now(),g.read().then(r)})),t.reader=I.getReader()}else t.reader=r.body.getReader();var R=[],O=[],P=[],M=!0;c(t,(function e(n){var r=n.value;if(n.done){if(w){if(y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null;y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(i=function(t,e){try{var n,r;n=t.filter((function(e,n){return n<t.length-1})),r=e.filter((function(t,n){return n<e.length-1}));var i=[];if(n.length>1){for(var a=0,s=0,o=0;o<n.length;o++)if(n[o]&&r[o]){var u=r[o].ts-n[o].ts;if(u>1)i.push(8*r[o].bytes/u);else{0===s&&(s=n[o].ts);var l=r[o].ts-s;l>1?(i.push(8*a/l),a=0,s=0):a+=r[o].bytes}}if(i.length>0)return i.reduce((function(t,e){return t+e}),0)/i.length}return null}catch(c){return null}}(O,P)),t.progress({loaded:T,total:isNaN(E)?T:E,lengthComputable:!0,time:d(R,T),throughput:i,stream:!0})}t.response.response=w.buffer}return t.onload(),void t.onend()}if(r&&r.length>0){w=function(t,e){if(0===t.length)return e;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}(w,r),T+=r.length,R.push({ts:Date.now(),bytes:r.length}),y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&M&&u.findLastTopIsoBoxCompleted(["moof"],w,A).found&&(M=!1,O.push({ts:performance.now(),bytes:r.length}));var s=u.findLastTopIsoBoxCompleted(["moov","mdat"],w,A);if(s.found){var o,l=s.lastCompletedOffset+s.size;y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||M||(M=!0,P.push({ts:performance.now(),bytes:w.length})),l===w.length?(o=w,w=new Uint8Array):(o=new Uint8Array(w.subarray(0,l)),w=w.subarray(l)),t.progress({data:o.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=s.lastCompletedOffset,S||(t.progress({lengthComputable:!1,noTrace:!0}),S=!0)}c(t,e)}))})).catch((function(e){t.onerror&&t.onerror(e)}))}))},abort:function(t){if(t.abortController)t.abortController.abort();else if(t.reader)try{t.reader.cancel(),t.onabort()}catch(e){}},calculateDownloadedTime:d,setup:function(t){e=t.dashMetrics}}}u.__dashjs_factory_name="FetchLoader";var l=r.default.getClassFactory(u);e.default=l},"./src/streaming/net/HTTPLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/net/XHRLoader.js"),i=n("./src/streaming/net/FetchLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/models/CmcdModel.js"),l=n("./src/core/Utils.js"),c=n("./src/core/Debug.js"),d=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/Settings.js"),p=n("./src/streaming/constants/Constants.js"),g=n("./src/streaming/models/LowLatencyThroughputModel.js");function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e,n,s,y,v,_,b,E,T,S=this.context,w=(t=t||{}).errHandler,A=t.dashMetrics,x=t.mediaPlayerModel,C=t.requestModifier,D=t.boxParser,I=t.errors,R=t.requestTimeout||0,O=Object(d.default)(S).getInstance(),P=Object(h.default)(S).getInstance();return e={load:function(t){t.request?function t(e,u){var c,d=e.request,h=[],g=!0,m=!0,T=new Date,I=T,M=0;if(!C||!A||!w)throw new Error("config object is not correct or missing");var L,N=function(t){if(m=!1,d.requestStartDate=T,d.requestEndDate=new Date,d.firstByteDate=d.firstByteDate||T,!d.checkExistenceOnly){var e=c.response?c.response.responseURL:null,n=c.response?c.response.status:null,r=c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:[];A.addHttpRequest(d,e,n,r,t?h:null),d.type===a.HTTPRequest.MPD_TYPE&&A.addManifestUpdate(d)}},k=function(){if(-1!==n.indexOf(c)&&(n.splice(n.indexOf(c),1),m))if(N(!1),u>0){try{P.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&d.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&x.getRetryAttemptsForType(a.HTTPRequest.MEDIA_SEGMENT_TYPE)===u&&O.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch(i){}u--;var r={config:e};y.push(r),r.timeout=setTimeout((function(){-1!==y.indexOf(r)&&(y.splice(y.indexOf(r),1),t(e,u))}),x.getRetryIntervalsForType(d.type))}else{if(d.type===a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;w.error(new o.default(v[d.type],d.url+" is not available",{request:d,response:c.response})),e.error&&e.error(d,"error",c.response.statusText),e.complete&&e.complete(d,c.response.statusText)}};P.get().streaming.lowLatencyEnabled&&window.fetch&&"arraybuffer"===d.responseType&&d.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?(L=Object(i.default)(S).create({requestModifier:C,lowLatencyThroughputModel:b,boxParser:D})).setup({dashMetrics:A}):L=Object(r.default)(S).create({requestModifier:C});var F=null,B=C.modifyRequestURL(d.url);if(P.get().streaming.cmcd&&P.get().streaming.cmcd.enabled){var j=P.get().streaming.cmcd.mode;if(j===p.default.CMCD_MODE_QUERY){var U=function(t){try{var e=[],n=_.getQueryParameter(t);return n&&e.push(n),e}catch(r){return[]}}(d);B=l.default.addAditionalQueryParameterToUrl(B,U)}else j===p.default.CMCD_MODE_HEADER&&(F=_.getHeaderParameters(d))}d.url=B;var V=d.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,G=x.getXHRWithCredentialsForType(d.type);c={url:B,method:V,withCredentials:G,request:d,onload:function(){c.response.status>=200&&c.response.status<=299&&(N(!0),e.success&&e.success(c.response.response,c.response.statusText,c.response.responseURL),e.complete&&e.complete(d,c.response.statusText))},onend:k,onerror:k,progress:function(t){var n=new Date;g&&(g=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(d.firstByteDate=n)),t.lengthComputable&&(d.bytesLoaded=t.loaded,d.bytesTotal=t.total),t.noTrace||(h.push({s:I,d:t.time?t.time:n.getTime()-I.getTime(),b:[t.loaded?t.loaded-M:0],t:t.throughput}),I=n,M=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(d)},ontimeout:function(t){var e;e=t.lengthComputable?"Request timeout: loaded: "+t.loaded+", out of: "+t.total+" : "+(t.loaded/t.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",E.warn(e)},loader:L,timeout:R,headers:F};var H=(new Date).getTime();if(isNaN(d.delayLoadingTime)||H>=d.delayLoadingTime)n.push(c),L.load(c);else{var Y={httpRequest:c};s.push(Y),Y.delayTimeout=setTimeout((function(){if(-1!==s.indexOf(Y)){s.splice(s.indexOf(Y),1);try{T=new Date,I=T,n.push(Y.httpRequest),L.load(Y.httpRequest)}catch(t){Y.httpRequest.onerror()}}}),d.delayLoadingTime-H)}}(t,x.getRetryAttemptsForType(t.request.type)):t.error&&t.error(t.request,"error")},abort:function(){y.forEach((function(t){clearTimeout(t.timeout),t.config.request&&t.config.abort&&t.config.abort(t.config.request)})),y=[],s.forEach((function(t){return clearTimeout(t.delayTimeout)})),s=[],n.forEach((function(t){t.request.type!==a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(t.onloadend=t.onerror=t.onprogress=void 0,t.loader.abort(t))})),n=[]}},E=Object(c.default)(S).getInstance().getLogger(e),n=[],s=[],y=[],_=Object(u.default)(S).getInstance(),b=Object(g.default)(S).getInstance(),m(T={},a.HTTPRequest.MPD_TYPE,I.DOWNLOAD_ERROR_ID_MANIFEST_CODE),m(T,a.HTTPRequest.XLINK_EXPANSION_TYPE,I.DOWNLOAD_ERROR_ID_XLINK_CODE),m(T,a.HTTPRequest.INIT_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),m(T,a.HTTPRequest.MEDIA_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),m(T,a.HTTPRequest.INDEX_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),m(T,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),m(T,a.HTTPRequest.OTHER_TYPE,I.DOWNLOAD_ERROR_ID_CONTENT_CODE),v=T,e}y.__dashjs_factory_name="HTTPLoader";var v=s.default.getClassFactory(y);e.default=v},"./src/streaming/net/SchemeLoaderFactory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/HTTPLoader.js");function a(){var t;function e(){t={}}function n(){e()}return n(),{getLoader:function(e){for(var n in t)if(t.hasOwnProperty(n)&&e.startsWith(n))return t[n];return i.default},registerLoader:function(e,n){t[e]=n},unregisterLoader:function(e){t[e]&&delete t[e]},unregisterAllLoader:e,reset:n}}a.__dashjs_factory_name="SchemeLoaderFactory";var s=r.default.getSingletonFactory(a);e.default=s},"./src/streaming/net/URLLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/SchemeLoaderFactory.js");function a(t){t=t||{};var e,n,r=this.context;return e=Object(i.default)(r).getInstance(),{load:function(i){if(!n){var a=e.getLoader(i&&i.request?i.request.url:null);n=a(r).create({errHandler:t.errHandler,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,dashMetrics:t.dashMetrics,boxParser:t.boxParser?t.boxParser:null,constants:t.constants?t.constants:null,dashConstants:t.dashConstants?t.dashConstants:null,urlUtils:t.urlUtils?t.urlUtils:null,requestTimeout:isNaN(t.requestTimeout)?0:t.requestTimeout,errors:t.errors})}n.load(i)},abort:function(){n&&n.abort()}}}a.__dashjs_factory_name="URLLoader";var s=r.default.getClassFactory(a);e.default=s},"./src/streaming/net/XHRLoader.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).requestModifier;return{load:function(t){var n=new Date,r=t.request,i=new XMLHttpRequest;if(i.open(t.method,t.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),e&&(i=e.modifyRequestHeader(i)),t.headers)for(var a in t.headers){var s=t.headers[a];s&&i.setRequestHeader(a,s)}i.withCredentials=t.withCredentials,i.onload=t.onload,i.onloadend=t.onend,i.onerror=t.onerror,i.onprogress=t.progress,i.onabort=t.onabort,i.ontimeout=t.ontimeout,i.timeout=t.timeout,i.send(),t.response=i},abort:function(t){var e=t.response;e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}i.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(i);e.default=a},"./src/streaming/protection/CommonEncryption.js":function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var i={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};e.default=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"findCencContentProtection",value:function(t){for(var e=null,n=0;n<t.length;++n){var r=t[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(e=r)}return e}},{key:"getPSSHData",value:function(t){var e=8,n=new DataView(t),r=n.getUint8(e);return e+=20,r>0&&(e+=4+16*n.getUint32(e)),t.slice(e+=4)}},{key:"getPSSHForKeySystem",value:function(e,n){var r=t.parsePSSHList(n);return e&&r.hasOwnProperty(e.uuid.toLowerCase())?r[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(t,e){return"pssh"in t?(t.pssh.__text=t.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),e.decodeArray(t.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(t){if(null==t)return[];for(var e=new DataView(t.buffer||t),n={},r=0;;){var i,a,s=void 0,o=r;if(r>=e.buffer.byteLength)break;if(i=r+e.getUint32(r),1886614376===e.getUint32(r+=4))if(0===(a=e.getUint8(r+=4))||1===a){r++,r+=3,s="";var u=void 0,l=void 0;for(u=0;u<4;u++)s+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,s+="-",u=0;u<2;u++)s+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<6;u++)s+=1===(l=e.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,r+=4,n[s=s.toLowerCase()]=e.buffer.slice(o,i),r=i}else r=i;else r=i}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(t,e){try{if(!t||0===t.length)return null;for(var n=0,r=null;n<t.length&&!r;){var a=t[n];if(a&&a.contentProtection&&a.contentProtection.length>0){var s=a.contentProtection.filter((function(t){return t.schemeIdUri&&t.schemeIdUri===e}));if(s&&s.length>0)for(var o=0;o<s.length&&!r;){for(var u=s[o],l=0;l<i.attributes.length&&!r;){for(var c=0,d=i.attributes[l];c<i.prefixes.length&&!r;)u[d]&&u[d].__prefix&&u[d].__prefix===i.prefixes[c]&&u[d].__text&&(r=u[d].__text),c+=1;l+=1}o+=1}}n+=1}return r}catch(f){return null}}}])&&r(e,n),t}()},"./src/streaming/protection/Protection.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionController.js"),i=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),a=n("./src/streaming/protection/ProtectionEvents.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),u=n("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),l=n("./src/streaming/protection/models/ProtectionModel_01b.js"),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],d=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function f(){var t,e=this.context;function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];if("function"==typeof t[r[Object.keys(r)[0]]])return r}return null}return t={createProtectionSystem:function(a){var s=null,f=Object(i.default)(e).getInstance();f.setConfig({debug:a.debug,BASE64:a.BASE64}),f.initialize();var h=function(r){var i=r.debug,a=i.getLogger(t),s=r.eventBus,f=r.errHandler,h=r.videoModel?r.videoModel.getElement():null;return h&&void 0===h.onencrypted||h&&void 0===h.mediaKeys?n(h,d)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(u.default)(e).create({debug:i,eventBus:s,events:r.events,api:n(h,d)})):n(h,c)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(l.default)(e).create({debug:i,eventBus:s,errHandler:f,events:r.events,api:n(h,c)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(o.default)(e).create({debug:i,eventBus:s,events:r.events}))}(a);return!s&&h&&(s=Object(r.default)(e).create({protectionModel:h,protectionKeyController:f,eventBus:a.eventBus,debug:a.debug,events:a.events,BASE64:a.BASE64,constants:a.constants,cmcdModel:a.cmcdModel,settings:a.settings}),a.capabilities.setEncryptedMediaSupported(!0)),s}}}f.__dashjs_factory_name="Protection";var h=dashjs.FactoryMaker.getClassFactory(f);h.events=a.default,h.errors=s.default,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,h),e.default=h},"./src/streaming/protection/ProtectionEvents.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var o=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",t.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",t.KEY_ADDED="public_keyAdded",t.KEY_ERROR="public_keyError",t.KEY_MESSAGE="public_keyMessage",t.KEY_SESSION_CLOSED="public_keySessionClosed",t.KEY_SESSION_CREATED="public_keySessionCreated",t.KEY_SESSION_REMOVED="public_keySessionRemoved",t.KEY_STATUSES_CHANGED="public_keyStatusesChanged",t.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",t.KEY_SYSTEM_SELECTED="public_keySystemSelected",t.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",t.LICENSE_REQUEST_SENDING="public_licenseRequestSending",t.NEED_KEY="needkey",t.PROTECTION_CREATED="public_protectioncreated",t.PROTECTION_DESTROYED="public_protectiondestroyed",t.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",t.TEARDOWN_COMPLETE="protectionTeardownComplete",t.VIDEO_ELEMENT_SELECTED="videoElementSelected",t.KEY_SESSION_UPDATED="public_keySessionUpdated",t}return o}(n("./src/core/events/EventsBase.js").default));e.default=o},"./src/streaming/protection/controllers/ProtectionController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/vo/MediaCapability.js"),a=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/protection/vo/LicenseRequest.js"),l=n("./src/streaming/protection/vo/LicenseResponse.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/core/Utils.js"),f=n("./src/streaming/constants/Constants.js"),h=n("./src/core/FactoryMaker.js");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){var e,n,h,g,m,y,v,_,b,E,T,S=(t=t||{}).protectionKeyController,w=t.protectionModel,A=t.eventBus,x=t.events,C=t.BASE64,D=t.constants,I=[],R=t.cmcdModel,O=t.settings;function P(){if(!(A&&A.hasOwnProperty("on")&&S&&S.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function M(t,e){b?h.push(t):_?_&&function(t){var e=t.findIndex((function(t){return t.ks===_})),n=t[e];-1!==e&&n.initData&&L(n)}(t):function(t,e){b=!0;var r,i=[];h.push(t);for(var a=0;a<t.length;a++){var u=U(t[a]);i.push({ks:t[a].ks,configs:[u]})}w.requestKeySystemAccess(i).then((function(t){return n.info("DRM: KeySystem Access Granted ("+(r=t.data).keySystem.systemString+")!  Selecting key system..."),w.selectKeySystem(r)})).then((function(t){if(_=t,b=!1,w){A.trigger(x.KEY_SYSTEM_SELECTED,{data:r});var e,n=F(_);n&&n.serverCertificate&&n.serverCertificate.length>0&&w.setServerCertificate(C.decodeArray(n.serverCertificate).buffer);for(var i=0;i<h.length;i++)for(e=0;e<h[i].length;e++)if(_===h[i][e].ks){L(h[i][e]);break}}})).catch((function(t){_=null,b=!1,e||A.trigger(x.KEY_SYSTEM_SELECTED,{data:null,error:new o.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)})}))}(t,e)}function L(t){if(S.isClearKey(_)&&t.protData&&t.protData.hasOwnProperty("clearkeys")){var e={kids:Object.keys(t.protData.clearkeys)};t.initData=(new TextEncoder).encode(JSON.stringify(e))}t.sessionId?N(t):null!==t.initData&&k(t)}function N(t){P(),w.loadKeySession(t)}function k(t){var e=r.default.getPSSHForKeySystem(_,t?t.initData:null);if(e){if(function(t){if(!t)return!1;try{for(var e=w.getSessions(),n=0;n<e.length;n++)if(e[n].getKeyId()===t)return!0;return!1}catch(r){return!1}}(t.keyId))return;if(B(e))return;try{t.initData=e,w.createKeySession(t)}catch(n){A.trigger(x.KEY_SESSION_CREATED,{data:null,error:new o.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+n.message)})}}else t&&t.initData?w.createKeySession(t):A.trigger(x.KEY_SESSION_CREATED,{data:null,error:new o.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(_?_.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function F(t){if(t){var e=t.systemString;if(m)return e in m?m[e]:null}return null}function B(t){if(!t)return!1;try{for(var e=w.getAllInitData(),r=0;r<e.length;r++)if(S.initDataEquals(t,e[r]))return n.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(i){return!1}}function j(t){P(),t?(w.setMediaElement(t),A.on(x.NEED_KEY,X,e)):null===t&&(w.setMediaElement(t),A.off(x.NEED_KEY,X,e))}function U(t){var e=t.protData,n=[],r=[],s=e&&e.audioRobustness&&e.audioRobustness.length>0?e.audioRobustness:v,o=e&&e.videoRobustness&&e.videoRobustness.length>0?e.videoRobustness:v,u=t.sessionType,l=e&&e.distinctiveIdentifier?e.distinctiveIdentifier:"optional",c=e&&e.persistentState?e.persistentState:"temporary"===u?"optional":"required";return g.forEach((function(t){t.type===D.AUDIO?n.push(new i.default(t.codec,s)):t.type===D.VIDEO&&r.push(new i.default(t.codec,o))})),new a.default(n,r,l,c,[u])}function V(t){t.error?A.trigger(x.KEY_STATUSES_CHANGED,{data:null,error:t.error}):n.debug("DRM: key status = "+t.status)}function G(t){n.debug("DRM: onKeyMessage");var e=t.data;A.trigger(x.KEY_MESSAGE,{data:e});var i=e.messageType?e.messageType:"license-request",a=e.message,h=e.sessionToken,m=F(_),y=S.getLicenseServerModelInstance(_,m,i),v={sessionToken:h,messageType:i};if(a&&0!==a.byteLength){if(!y)return n.debug("DRM: License server request not required for this message (type = "+t.data.messageType+").  Session ID = "+h.getSessionId()),void H(v);if(S.isClearKey(_)){var b=S.processClearKeyLicenseRequest(_,m,a);if(b)return n.debug("DRM: ClearKey license request handled by application!"),H(v),void w.updateKeySession(h,b)}!function(t,e,i){var a=t.sessionToken,h=t.messageType?t.messageType:"license-request",m={sessionToken:a,messageType:h},y=_?_.systemString:null,v=function(t,e,n,i,a){var s=null,o=i.message;if(t&&t.serverURL){var u=t.serverURL;"string"==typeof u&&""!==u?s=u:"object"===p(u)&&u.hasOwnProperty(e)&&(s=u[e])}else if(t&&t.laURL&&""!==t.laURL)s=t.laURL;else if(!(s=r.default.getLicenseServerUrlFromMediaInfo(g,_.schemeIdURI))&&!S.isClearKey(_)){var l=r.default.getPSSHData(n.initData);(s=_.getLicenseServerURLFromInitData(l))||(s=i.laURL)}return a.getServerURLFromMessage(s,o,e)}(i,h,a,t,e);if(v){var b={},C=!1;i&&Y(b,i.httpRequestHeaders);var D=t.message;Y(b,_.getRequestHeadersFromMessage(D)),Object.keys(b).forEach((function(t){"authorization"===t.toLowerCase()&&(C=!0)})),i&&"boolean"==typeof i.withCredentials&&(C=i.withCredentials);var I=function(t){if(w)if(t.status>=200&&t.status<=299){var n=d.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),r=new l.default(t.responseURL,n,t.response);q(T,r).then((function(){var n=e.getLicenseMessage(r.data,y,h);null!==n?(H(m),w.updateKeySession(a,n)):z(t,m,y,h,e)}))}else z(t,m,y,h,e)},P=function(t){H(m,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR aborted. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},M=function(t){H(m,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR error. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},L=_.getLicenseRequestFromMessage(D),N=e.getHTTPMethod(h),k=e.getResponseType(y,h),F=i&&!isNaN(i.httpTimeout)?i.httpTimeout:8e3,B=a.getSessionId()||null,j=new u.default(v,N,k,b,C,h,B,L),U=isNaN(O.get().streaming.retryAttempts[c.HTTPRequest.LICENSE])?3:O.get().streaming.retryAttempts[c.HTTPRequest.LICENSE];q(E,j).then((function(){!function t(e,r,i,a,s,o){var u=new XMLHttpRequest;if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled&&O.get().streaming.cmcd.mode===f.default.CMCD_MODE_QUERY){var l=R.getQueryParameter({url:e.url,type:c.HTTPRequest.LICENSE});l&&(e.url=d.default.addAditionalQueryParameterToUrl(e.url,[l]))}for(var h in u.open(e.method,e.url,!0),u.responseType=e.responseType,u.withCredentials=e.withCredentials,i>0&&(u.timeout=i),e.headers)u.setRequestHeader(h,e.headers[h]);if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled&&O.get().streaming.cmcd.mode===f.default.CMCD_MODE_HEADER){var p=R.getHeaderParameters({url:e.url,type:c.HTTPRequest.LICENSE});if(p)for(var g in p){var m=p[g];m&&u.setRequestHeader(g,m)}}var y=function(){r--;var n=isNaN(O.get().streaming.retryIntervals[c.HTTPRequest.LICENSE])?1e3:O.get().streaming.retryIntervals[c.HTTPRequest.LICENSE];setTimeout((function(){t(e,r,i,a,s,o)}),n)};u.onload=function(){this.status>=200&&this.status<=299||r<=0?a(this):(n.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+r),y())},u.ontimeout=u.onerror=function(){r<=0?o(this):(n.warn("License request network request failed . Retrying it... Pending retries: "+r),y())},u.onabort=function(){s(this)},A.trigger(x.LICENSE_REQUEST_SENDING,{url:e.url,headers:e.headers,payload:e.data,sessionId:e.sessionId}),u.send(e.data)}(j,U,F,I,P,M)}))}else H(m,new o.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(e,y,m)}else H(v,new o.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function H(t,e){A.trigger(x.LICENSE_REQUEST_COMPLETE,{data:t,error:e})}function Y(t,e){if(e)for(var n in e)t[n]=e[n]}function z(t,e,n,r,i){var a=t.response?i.getErrorResponse(t.response,n,r):"NONE";H(e,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState+".  Response is "+a))}function q(t,e){return t?t.reduce((function(t,n){return t.then((function(){return n(e)}))}),Promise.resolve()):Promise.resolve()}function X(t,e){if(!O.get().streaming.protection.ignoreEmeEncryptedEvent){if(n.debug("DRM: onNeedKey"),"cenc"!==t.key.initDataType)return void n.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+t.key.initDataType);if(0===g.length&&(n.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(e=void 0===e?1:e+1)<5))return void I.push(setTimeout((function(){X(t,e)}),500));var i=t.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),_){var a=r.default.getPSSHForKeySystem(_,i);if(a&&B(a))return}n.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var s=S.getSupportedKeySystemsFromSegmentPssh(i,m,y);if(0===s.length)return void n.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");M(s,!1)}}return n=t.debug.getLogger(e={initializeForMedia:function(t){if(!t)throw new Error("mediaInfo can not be null or undefined");P(),g.push(t);var e=S.getSupportedKeySystemsFromContentProtection(t.contentProtection,m,y);(e=e.sort((function(t,n){return(m&&m[t.ks.systemString]&&m[t.ks.systemString].priority>=0?m[t.ks.systemString].priority:e.length)-(m&&m[n.ks.systemString]&&m[n.ks.systemString].priority>=0?m[n.ks.systemString].priority:e.length)})))&&e.length>0&&M(e,!0)},clearMediaInfoArray:function(){g=[]},createKeySession:k,loadKeySession:N,removeKeySession:function(t){P(),w.removeKeySession(t)},closeKeySession:function(t){P(),w.closeKeySession(t)},setServerCertificate:function(t){P(),w.setServerCertificate(t)},setMediaElement:j,setSessionType:function(t){y=t},setRobustnessLevel:function(t){v=t},setProtectionData:function(t){m=t,S.setProtectionData(t)},getSupportedKeySystemsFromContentProtection:function(t){return P(),S.getSupportedKeySystemsFromContentProtection(t,m,y)},getKeySystems:function(){return S?S.getKeySystems():[]},setKeySystems:function(t){S&&S.setKeySystems(t)},setLicenseRequestFilters:function(t){E=t},setLicenseResponseFilters:function(t){T=t},stop:function(){w&&w.stop()},reset:function(){A.off(x.INTERNAL_KEY_MESSAGE,G,e),A.off(x.INTERNAL_KEY_STATUS_CHANGED,V,e),P(),E=[],T=[],j(null),_=null,b=!1,w&&(w.reset(),w=null),I.forEach((function(t){return clearTimeout(t)})),I=[],g=[],h=[]}}),h=[],g=[],y="temporary",v="",E=[],T=[],A.on(x.INTERNAL_KEY_MESSAGE,G,e),A.on(x.INTERNAL_KEY_STATUS_CHANGED,V,e),e}g.__dashjs_factory_name="ProtectionController",e.default=h.default.getClassFactory(g)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/drm/KeySystemClearKey.js"),a=n("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),s=n("./src/streaming/protection/drm/KeySystemWidevine.js"),o=n("./src/streaming/protection/drm/KeySystemPlayReady.js"),u=n("./src/streaming/protection/servers/DRMToday.js"),l=n("./src/streaming/protection/servers/PlayReady.js"),c=n("./src/streaming/protection/servers/Widevine.js"),d=n("./src/streaming/protection/servers/ClearKey.js"),f=n("./src/streaming/constants/ProtectionConstants.js");function h(){var t,e,n,h,p,g,m,y=this.context;function v(t,e){return e&&t in e?e[t]:null}function _(t,e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}function b(t,e){return t&&t.sessionType?t.sessionType:e}return t={initialize:function(){var t;h=[],t=Object(o.default)(y).getInstance({BASE64:p}),h.push(t),t=Object(s.default)(y).getInstance({BASE64:p}),h.push(t),t=Object(i.default)(y).getInstance({BASE64:p}),h.push(t),g=t,t=Object(a.default)(y).getInstance({BASE64:p,debug:e}),h.push(t),m=t},setProtectionData:function(t){for(var e,n,r=0;r<h.length;r++){var i=h[r];i.hasOwnProperty("init")&&i.init((e=i.systemString,n=void 0,n=null,t&&(n=e in t?t[e]:null),n))}},isClearKey:function(t){return t===g||t===m},initDataEquals:function(t,e){if(t.byteLength===e.byteLength){for(var n=new Uint8Array(t),r=new Uint8Array(e),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getKeySystems:function(){return h},setKeySystems:function(t){h=t},getKeySystemBySystemString:function(t){for(var e=0;e<h.length;e++)if(h[e].systemString===t)return h[e];return null},getSupportedKeySystemsFromContentProtection:function(t,e,n){var i,a,s,o,u=[];if(t){var l=r.default.findCencContentProtection(t);for(s=0;s<h.length;++s){var c=v((a=h[s]).systemString,e);for(o=0;o<t.length;++o)if((i=t[o]).schemeIdUri.toLowerCase()===a.schemeIdURI){var d=a.getInitData(i,l);u.push({ks:h[s],keyId:i.keyId,initData:d,protData:c,cdmData:a.getCDMData(c?c.cdmData:null),sessionId:_(c,i),sessionType:b(c,n)})}}}return u},getSupportedKeySystemsFromSegmentPssh:function(t,e,n){for(var i,a=[],s=r.default.parsePSSHList(t),o=0;o<h.length;++o){var u=v((i=h[o]).systemString,e);i.uuid in s&&a.push({ks:i,initData:s[i.uuid],protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:_(u),sessionType:b(u,n)})}return a},getLicenseServerModelInstance:function(t,e,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return e&&e.hasOwnProperty("drmtoday")?r=Object(u.default)(y).getInstance({BASE64:p}):t.systemString===f.default.WIDEVINE_KEYSTEM_STRING?r=Object(c.default)(y).getInstance():t.systemString===f.default.PLAYREADY_KEYSTEM_STRING?r=Object(l.default)(y).getInstance():t.systemString===f.default.CLEARKEY_KEYSTEM_STRING&&(r=Object(d.default)(y).getInstance()),r},processClearKeyLicenseRequest:function(t,e,r){try{return t.getClearKeysFromProtectionData(e,r)}catch(i){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(n=(e=r.debug).getLogger(t)),r.BASE64&&(p=r.BASE64))}}}h.__dashjs_factory_name="ProtectionKeyController",e.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),s=n("./src/streaming/constants/ProtectionConstants.js").default.CLEARKEY_KEYSTEM_STRING;function o(t){var e=(t=t||{}).BASE64;return{uuid:"e2719d58-a985-b3c9-781a-b030af78d30e",schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:s,getInitData:function(t,n){try{var r=a.default.parseInitDataFromContentProtection(t,e);if(!r&&n){var i={kids:[function(t){try{var e=t.replace(/-/g,"");return(e=btoa(e.match(/\w{2}/g).map((function(t){return String.fromCharCode(parseInt(t,16))})).join(""))).replace(/=/g,"")}catch(n){return null}}(n["cenc:default_KID"])]};r=(new TextEncoder).encode(JSON.stringify(i))}return r}catch(s){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(t){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){var n=null;if(t){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),s=[],o=0;o<a.kids.length;o++){var u=a.kids[o],l=t.clearkeys&&t.clearkeys.hasOwnProperty(u)?t.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new r.default(u,l))}n=new i.default(s)}return n}}}o.__dashjs_factory_name="KeySystemClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js").default.PLAYREADY_KEYSTEM_STRING;function a(t){var e="utf-16",n=(t=t||{}).BASE64;function a(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:i,getInitData:function(t){var e,i,s,o,u,l=new Uint8Array([112,115,115,104,0,0,0,0]),c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),d=0,f=null;if(a(),!t)return null;if("pssh"in t)return r.default.parseInitDataFromContentProtection(t,n);if("pro"in t)f=n.decodeArray(t.pro.__text);else{if(!("prheader"in t))return null;f=n.decodeArray(t.prheader.__text)}return i=4+l.length+c.length+4+(e=f.length),s=new ArrayBuffer(i),o=new Uint8Array(s),(u=new DataView(s)).setUint32(d,i),o.set(l,d+=4),o.set(c,d+=l.length),u.setUint32(d+=c.length,e),o.set(f,d+=4),d+=e,o.buffer},getRequestHeadersFromMessage:function(t){var n,r,i={},a=new DOMParser,s="utf-16"===e?new Uint16Array(t):new Uint8Array(t);n=String.fromCharCode.apply(null,s);for(var o=(r=a.parseFromString(n,"application/xml")).getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<o.length;l++)i[o[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset=utf-8"),i},getLicenseRequestFromMessage:function(t){var r=null,i=new DOMParser,s="utf-16"===e?new Uint16Array(t):new Uint8Array(t);a();var o=String.fromCharCode.apply(null,s),u=i.parseFromString(o,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return t;var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return l&&(r=n.decode(l)),r},getLicenseServerURLFromInitData:function(t){if(t)for(var e=new DataView(t),n=e.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var s=e.getUint16(r,!0),o=e.getUint16(r+=2,!0);if(r+=2,1===s){var u=t.slice(r,r+o),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var f=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=o}return null},getCDMData:function(t){var e,r,i,s;if(a(),!t)return null;for(e=[],s=0;s<t.length;++s)e.push(t.charCodeAt(s)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),i=[],s=0;s<r.length;++s)i.push(r.charCodeAt(s)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(t){if("utf-8"!==t&&"utf-16"!==t)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');e=t}}}a.__dashjs_factory_name="KeySystemPlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),s=n("./src/streaming/constants/ProtectionConstants.js").default.CLEARKEY_KEYSTEM_STRING;function o(t){var e=t.BASE64,n=t.debug.getLogger(void 0);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:s,getInitData:function(t){return a.default.parseInitDataFromContentProtection(t,e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){var a=null;if(t){for(var s=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),o=[],u=0;u<s.kids.length;u++){var l=s.kids[u],c=t.clearkeys&&t.clearkeys.hasOwnProperty(l)?t.clearkeys[l]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");o.push(new r.default(l,c))}a=new i.default(o),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return a}}}o.__dashjs_factory_name="KeySystemW3CClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js").default.WIDEVINE_KEYSTEM_STRING;function a(t){var e=(t=t||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:i,getInitData:function(t){return r.default.parseInitDataFromContentProtection(t,e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}a.__dashjs_factory_name="KeySystemWidevine",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/errors/ProtectionErrors.js":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var o=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).MEDIA_KEYERR_CODE=100,t.MEDIA_KEYERR_UNKNOWN_CODE=101,t.MEDIA_KEYERR_CLIENT_CODE=102,t.MEDIA_KEYERR_SERVICE_CODE=103,t.MEDIA_KEYERR_OUTPUT_CODE=104,t.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,t.MEDIA_KEYERR_DOMAIN_CODE=106,t.MEDIA_KEY_MESSAGE_ERROR_CODE=107,t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,t.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,t.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,t.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,t.KEY_SESSION_CREATED_ERROR_CODE=113,t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,t.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",t.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",t.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",t.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",t.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",t.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",t.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",t.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",t.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",t.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",t.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",t}return o}(n("./src/core/errors/ErrorsBase.js").default));e.default=o},"./src/streaming/protection/models/ProtectionModel_01b.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),o=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/protection/errors/ProtectionErrors.js");function c(t){var e,n,c,d,f,h,p,g,m,y=this.context,v=(t=t||{}).eventBus,_=t.events,b=t.api,E=t.errHandler;function T(){c&&A();for(var t=0;t<p.length;t++)S(p[t]);v.trigger(_.TEARDOWN_COMPLETE)}function S(t){try{c[b.cancelKeyRequest](d.systemString,t.sessionId)}catch(e){v.trigger(_.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function w(t,e){if(e&&t){for(var n=t.length,r=0;r<n;r++)if(t[r].sessionId==e)return t[r];return null}return null}function A(){c.removeEventListener(b.keyerror,m),c.removeEventListener(b.needkey,m),c.removeEventListener(b.keymessage,m),c.removeEventListener(b.keyadded,m)}return n=t.debug.getLogger(e={getAllInitData:function(){for(var t=[],e=0;e<h.length;e++)t.push(h[e].initData);for(var n=0;n<p.length;n++)t.push(p[n].initData);return t},getSessions:function(){return p.concat(h)},requestKeySystemAccess:function(t){return new Promise((function(e,n){var r=c;r||(r=document.createElement("video"));for(var i=!1,a=0;a<t.length;a++)for(var s=t[a].ks.systemString,l=t[a].configs,d=null,h=0;h<l.length;h++){var p=l[h].videoCapabilities;if(p&&0!==p.length){d=[];for(var g=0;g<p.length;g++)""!==r.canPlayType(p[g].contentType,s)&&d.push(p[g])}if(d&&(!d||0!==d.length)){i=!0;var m=new o.default(null,d),y=f.getKeySystemBySystemString(s),b=new u.default(y,m);v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:b}),e({data:b});break}}if(!i){var E="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:E}),n({error:E})}}))},selectKeySystem:function(t){return d=t.keySystem,Promise.resolve(d)},setMediaElement:function(t){if(c!==t){if(c){A();for(var e=0;e<p.length;e++)S(p[e]);p=[]}(c=t)&&(c.addEventListener(b.keyerror,m),c.addEventListener(b.needkey,m),c.addEventListener(b.keymessage,m),c.addEventListener(b.keyadded,m),v.trigger(_.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(t){if(!d)throw new Error("Can not create sessions until you have selected a key system");if(g||0===p.length){var e={sessionId:null,keyId:t.keyId,initData:t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return h.push(e),c[b.generateKeyRequest](d.systemString,new Uint8Array(t.initData)),e}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(t,e){var n=t.sessionId;if(f.isClearKey(d))for(var r=0;r<e.keyPairs.length;r++)c[b.addKey](d.systemString,e.keyPairs[r].key,e.keyPairs[r].keyID,n);else c[b.addKey](d.systemString,new Uint8Array(e),new Uint8Array(t.initData),n);v.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:T,reset:T}),c=null,d=null,h=[],p=[],f=Object(r.default)(y).getInstance(),m={handleEvent:function(t){var e=null;switch(t.type){case b.needkey:var r=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;v.trigger(_.NEED_KEY,{key:new i.default(r,"cenc")});break;case b.keyerror:if((e=w(p,t.sessionId))||(e=w(h,t.sessionId)),e){var o=l.default.MEDIA_KEYERR_CODE,u="";switch(t.errorCode.code){case 1:o=l.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+l.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:o=l.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+l.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:o=l.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+l.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:o=l.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+l.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:o=l.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+l.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:o=l.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+l.default.MEDIA_KEYERR_DOMAIN_MESSAGE}v.trigger(_.KEY_ERROR,{error:new a.default(o,u+="  System Code = "+t.systemCode,e)})}else n.error("No session token found for key error");break;case b.keyadded:(e=w(p,t.sessionId))||(e=w(h,t.sessionId)),e?(n.debug("DRM: Key added."),v.trigger(_.KEY_ADDED,{data:e})):n.debug("No session token found for key added");break;case b.keymessage:if((g=null!=t.sessionId)?!(e=w(p,t.sessionId))&&h.length>0&&(e=h.shift(),p.push(e),e.sessionId=t.sessionId,v.trigger(_.KEY_SESSION_CREATED,{data:e})):h.length>0&&(e=h.shift(),p.push(e),0!==h.length&&E.error(new a.default(l.default.MEDIA_KEY_MESSAGE_ERROR_CODE,l.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),e){var c=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;e.keyMessage=c,v.trigger(_.INTERNAL_KEY_MESSAGE,{data:new s.default(e,c,t.defaultURL)})}else n.warn("No session token found for key message")}}},e}c.__dashjs_factory_name="ProtectionModel_01b",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/constants/ProtectionConstants.js");function c(t){var e,n,c,d,f,h,p,g,m=this.context,y=(t=t||{}).eventBus,v=t.events;function _(t){var e=t.session;return e.removeEventListener("keystatuseschange",t),e.removeEventListener("message",t),e.close()}function b(t){for(var e=0;e<h.length;e++)if(h[e]===t){h.splice(e,1);break}}function E(t){var e,n;return t&&t.length>0&&(t[0]&&("string"==typeof t[0]?e=t[0]:n=t[0]),t[1]&&("string"==typeof t[1]?e=t[1]:n=t[1])),{status:e,keyId:n}}function T(t,e){var r={session:t,keyId:e.keyId,initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,handleEvent:function(t){switch(t.type){case"keystatuseschange":y.trigger(v.KEY_STATUSES_CHANGED,{data:this}),t.target.keyStatuses.forEach((function(){var t=E(arguments);switch(t.status){case"expired":y.trigger(v.INTERNAL_KEY_STATUS_CHANGED,{error:new s.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:y.trigger(v.INTERNAL_KEY_STATUS_CHANGED,t)}}));break;case"message":var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;y.trigger(v.INTERNAL_KEY_MESSAGE,{data:new o.default(this,e,void 0,t.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach((function(){var t=E(arguments);"usable"===t.status&&(e=!0)})),e}};return t.addEventListener("keystatuseschange",r),t.addEventListener("message",r),t.closed.then((function(){b(r),n.debug("DRM: Session closed.  SessionID = "+r.getSessionId()),y.trigger(v.KEY_SESSION_CLOSED,{data:r.getSessionId()})})),h.push(r),r}return e={getAllInitData:function(){for(var t=[],e=0;e<h.length;e++)h[e].initData&&t.push(h[e].initData);return t},getSessions:function(){return h},requestKeySystemAccess:function(t){return new Promise((function(e,n){!function t(e,n,r,i){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var a="Insecure origins are not allowed";return y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:a}),void i({error:a})}var s=e[n].ks,o=e[n].configs,c=s.systemString;c===l.default.PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(c+=".recommendation"),navigator.requestMediaKeySystemAccess(c,o).then((function(t){var e="function"==typeof t.getConfiguration?t.getConfiguration():null,n=new u.default(s,e);n.mksa=t,y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{data:n}),r({data:n})})).catch((function(a){n+1<e.length?t(e,n+1,r,i):(y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+a.message}),i({error:"Key system access denied! "+a.message}))}))}(t,0,e,n)}))},selectKeySystem:function(t){return new Promise((function(e,n){t.mksa.createMediaKeys().then((function(e){return c=t.keySystem,f=e,d?d.setMediaKeys(f):Promise.resolve()})).then((function(){e(c)})).catch((function(){n({error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(t){d!==t&&(d&&(d.removeEventListener("encrypted",p),d.setMediaKeys&&d.setMediaKeys(null)),(d=t)&&(d.addEventListener("encrypted",p),d.setMediaKeys&&f&&d.setMediaKeys(f)))},setServerCertificate:function(t){if(!c||!f)throw new Error("Can not set server certificate until you have selected a key system");f.setServerCertificate(t).then((function(){n.info("DRM: License server certificate successfully updated."),y.trigger(v.SERVER_CERTIFICATE_UPDATED)})).catch((function(t){y.trigger(v.SERVER_CERTIFICATE_UPDATED,{error:new s.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+t.name)})}))},createKeySession:function(t){if(!c||!f)throw new Error("Can not create sessions until you have selected a key system");var e=f.createSession(t.sessionType),r=T(e,t);e.generateRequest(c.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(t.initData||t.protData&&t.protData.clearkeys)?l.default.INITIALIZATION_DATA_TYPE_KEYIDS:l.default.INITIALIZATION_DATA_TYPE_CENC,t.initData).then((function(){n.debug("DRM: Session created.  SessionID = "+r.getSessionId()),y.trigger(v.KEY_SESSION_CREATED,{data:r})})).catch((function(t){b(r),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+t.name)})}))},updateKeySession:function(t,e){var n=t.session;g.isClearKey(c)&&(e=e.toJWK()),n.update(e).then((function(){y.trigger(v.KEY_SESSION_UPDATED)})).catch((function(e){y.trigger(v.KEY_ERROR,{error:new s.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})}))},loadKeySession:function(t){if(!c||!f)throw new Error("Can not load sessions until you have selected a key system");for(var e=t.sessionId,r=0;r<h.length;r++)if(e===h[r].sessionId)return void n.warn("DRM: Ignoring session ID because we have already seen it!");var i=f.createSession(t.sessionType),o=T(i,t);i.load(e).then((function(t){t?(n.debug("DRM: Session loaded.  SessionID = "+o.getSessionId()),y.trigger(v.KEY_SESSION_CREATED,{data:o})):(b(o),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){b(o),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(t){t.session.remove().then((function(){n.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),y.trigger(v.KEY_SESSION_REMOVED,{data:t.getSessionId()})}),(function(e){y.trigger(v.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})}))},closeKeySession:function(t){_(t).catch((function(e){b(t),y.trigger(v.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})}))},stop:function(){for(var t,e=0;e<h.length;e++)(t=h[e]).getUsable()||_(t).catch((function(){b(t)}))},reset:function(){var t,e=h.length;0!==e?function(){for(var n=function(t){b(t),0===h.length&&(d?(d.removeEventListener("encrypted",p),d.setMediaKeys(null).then((function(){y.trigger(v.TEARDOWN_COMPLETE)}))):y.trigger(v.TEARDOWN_COMPLETE))},r=0;r<e;r++)!function(e){t.session.closed.then((function(){n(e)})),_(t).catch((function(){n(e)}))}(t=h[r])}():y.trigger(v.TEARDOWN_COMPLETE)}},n=t.debug.getLogger(e),c=null,d=null,f=null,h=[],g=Object(r.default)(m).getInstance(),p={handleEvent:function(t){switch(t.type){case"encrypted":if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;y.trigger(v.NEED_KEY,{key:new i.default(e,t.initDataType)})}}}},e}c.__dashjs_factory_name="ProtectionModel_21Jan2015",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),l=n("./src/streaming/protection/vo/KeySystemAccess.js");function c(t){var e,n,c,d,f,h,p,g,m,y=this.context,v=(t=t||{}).eventBus,_=t.events,b=t.api;function E(){try{for(var t=0;t<p.length;t++)T(p[t]);c&&c.removeEventListener(b.needkey,g),v.trigger(_.TEARDOWN_COMPLETE)}catch(e){v.trigger(_.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function T(t){var e=t.session;e.removeEventListener(b.error,t),e.removeEventListener(b.message,t),e.removeEventListener(b.ready,t),e.removeEventListener(b.close,t);for(var n=0;n<p.length;n++)if(p[n]===t){p.splice(n,1);break}e[b.release]()}function S(){var t=null,e=function(){c.removeEventListener("loadedmetadata",t),c[b.setMediaKeys](f),v.trigger(_.VIDEO_ELEMENT_SELECTED)};c.readyState>=1?e():(t=e.bind(this),c.addEventListener("loadedmetadata",t))}return e={getAllInitData:function(){for(var t=[],e=0;e<p.length;e++)t.push(p[e].initData);return t},getSessions:function(){return p},requestKeySystemAccess:function(t){return new Promise((function(e,n){for(var r=!1,i=0;i<t.length;i++)for(var a=t[i].ks.systemString,s=t[i].configs,o=null,c=null,d=0;d<s.length;d++){var f=s[d].audioCapabilities,h=s[d].videoCapabilities;if(f&&0!==f.length){o=[];for(var p=0;p<f.length;p++)window[b.MediaKeys].isTypeSupported(a,f[p].contentType)&&o.push(f[p])}if(h&&0!==h.length){c=[];for(var g=0;g<h.length;g++)window[b.MediaKeys].isTypeSupported(a,h[g].contentType)&&c.push(h[g])}if(!(!o&&!c||o&&0===o.length||c&&0===c.length)){r=!0;var y=new u.default(o,c),E=m.getKeySystemBySystemString(a),T=new l.default(E,y);v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:T}),e({data:T});break}}if(!r){var S="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:S}),n({error:S})}}))},selectKeySystem:function(t){return new Promise((function(e,n){try{f=t.mediaKeys=new window[b.MediaKeys](t.keySystem.systemString),d=t.keySystem,h=t,c&&S(),e(d)}catch(r){n({error:"Error selecting keys system ("+d.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(t){c!==t&&(c&&c.removeEventListener(b.needkey,g),(c=t)&&(c.addEventListener(b.needkey,g),f&&S()))},createKeySession:function(t){if(!d||!f||!h)throw new Error("Can not create sessions until you have selected a key system");var e=null;if(h.ksConfiguration.videoCapabilities&&h.ksConfiguration.videoCapabilities.length>0&&(e=h.ksConfiguration.videoCapabilities[0]),null===e&&h.ksConfiguration.audioCapabilities&&h.ksConfiguration.audioCapabilities.length>0&&(e=h.ksConfiguration.audioCapabilities[0]),null===e)throw new Error("Can not create sessions for unknown content types.");var r=f.createSession(e.contentType,new Uint8Array(t.initData),t.cdmData?new Uint8Array(t.cdmData):null),i=function(t,e){return{session:t,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(t){switch(t.type){case b.error:v.trigger(_.KEY_ERROR,{error:new a.default(s.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case b.message:var e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;v.trigger(_.INTERNAL_KEY_MESSAGE,{data:new o.default(this,e,t.destinationURL)});break;case b.ready:n.debug("DRM: Key added."),v.trigger(_.KEY_ADDED);break;case b.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),v.trigger(_.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(r,t);r.addEventListener(b.error,i),r.addEventListener(b.message,i),r.addEventListener(b.ready,i),r.addEventListener(b.close,i),p.push(i),n.debug("DRM: Session created.  SessionID = "+i.getSessionId()),v.trigger(_.KEY_SESSION_CREATED,{data:i})},updateKeySession:function(t,e){var n=t.session;m.isClearKey(d)?n.update(new Uint8Array(e.toJWK())):n.update(new Uint8Array(e)),v.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:T,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:E,reset:E},n=t.debug.getLogger(e),c=null,d=null,f=null,h=null,p=[],m=Object(r.default)(y).getInstance(),g={handleEvent:function(t){switch(t.type){case b.needkey:if(t.initData){var e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;v.trigger(_.NEED_KEY,{key:new i.default(e,"cenc")})}}}},e}c.__dashjs_factory_name="ProtectionModel_3Feb2014",e.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/servers/ClearKey.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js");function a(){return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(t){if(!t.hasOwnProperty("keys"))return null;for(var e=[],n=0;n<t.keys.length;n++){var a=t.keys[n],s=a.kid.replace(/=/g,""),o=a.k.replace(/=/g,"");e.push(new r.default(s,o))}return new i.default(e)},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}a.__dashjs_factory_name="ClearKey",e.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/servers/DRMToday.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/ProtectionConstants.js");function i(t){var e=(t=t||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(t){return e.decodeArray(t.license)},getErrorResponse:function(t){return t}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return n[t].responseType},getLicenseMessage:function(t,r){return function(){if(!e||!e.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(t)},getErrorResponse:function(t,e){return n[e].getErrorResponse(t)}}}i.__dashjs_factory_name="DRMToday",e.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/servers/PlayReady.js":function(t,e,n){"use strict";function r(){var t="http://schemas.xmlsoap.org/soap/envelope/";function e(t){var e=String.fromCharCode.apply(null,new Uint8Array(t));return decodeURIComponent(escape(e))}function n(n){if(window.DOMParser){var r=e(n),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(t,"Envelope")[0]:null,s=a?a.getElementsByTagNameNS(t,"Body")[0]:null;if(s&&s.getElementsByTagNameNS(t,"Fault")[0])return null}return n}function r(n){var r="",i="",a="",s=-1,o=-1;if(window.DOMParser){var u=e(n),l=(new window.DOMParser).parseFromString(u,"text/xml"),c=l?l.getElementsByTagNameNS(t,"Envelope")[0]:null,d=c?c.getElementsByTagNameNS(t,"Body")[0]:null,f=d?d.getElementsByTagNameNS(t,"Fault")[0]:null,h=f?f.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,g=null;if(null===f)return u;r=(g=f.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(i=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,s=(a=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,o=a?a.indexOf("]"):-1,a=a?a.substring(s,o):"")}var m="code: ".concat(i,", name: ").concat(r);return a&&(m+=", message: ".concat(a)),m}return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return n.call(this,t)},getErrorResponse:function(t){return r.call(this,t)}}}n.r(e),r.__dashjs_factory_name="PlayReady",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/servers/Widevine.js":function(t,e,n){"use strict";function r(){return{getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}n.r(e),r.__dashjs_factory_name="Widevine",e.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=n}var e;return(e=[{key:"toJWK",value:function(){var t,e=this.keyPairs.length,n={keys:[]};for(t=0;t<e;t++)n.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[t].keyID,k:this.keyPairs[t].key});this.type&&(n.type=this.type);var r=JSON.stringify(n),i=r.length,a=new ArrayBuffer(i),s=new Uint8Array(a);for(t=0;t<i;t++)s[t]=r.charCodeAt(t);return a}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/streaming/protection/vo/KeyMessage.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionToken=e,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyID=e,this.key=n}},"./src/streaming/protection/vo/KeySystemAccess.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keySystem=e,this.ksConfiguration=n}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a}},"./src/streaming/protection/vo/LicenseRequest.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r,i,a,s,o,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.method=n,this.responseType=r,this.headers=i,this.withCredentials=a,this.messageType=s,this.sessionId=o,this.data=u}},"./src/streaming/protection/vo/LicenseResponse.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.headers=n,this.data=r}},"./src/streaming/protection/vo/MediaCapability.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentType=e,this.robustness=n}},"./src/streaming/protection/vo/NeedKey.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initData=e,this.initDataType=n}},"./src/streaming/rules/DroppedFramesHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t={},e={},n={};return{push:function(r,i,a){if(i){t[r]||(t[r]=[],e[r]=0,n[r]=0);var s=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,o=a&&a.totalVideoFrames?a.totalVideoFrames:0,u=s-e;e[r]=s;var l=o-n;n[r]=o;var c=t[r];isNaN(i)||(c[i]?(c[i].droppedVideoFrames+=u,c[i].totalVideoFrames+=l):c[i]={droppedVideoFrames:u,totalVideoFrames:l})}},getFrameHistory:function(e){return t[e]},clearForStream:function(r){try{delete t[r],delete e[r],delete n[r]}catch(i){}},reset:function(){t={},e={},n={}}}}i.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(i);e.default=a},"./src/streaming/rules/RulesContext.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).abrController,n=t.switchHistory,r=t.droppedFramesHistory,i=t.currentRequest,a=t.useBufferOccupancyABR,s=t.useL2AABR,o=t.useLoLPABR,u=t.streamProcessor?t.streamProcessor.getScheduleController():null,l=t.streamProcessor?t.streamProcessor.getRepresentationInfo():null,c=t.videoModel?t.videoModel:null;function d(){return l?l.mediaInfo:null}return{getMediaType:function(){var t=d();return t?t.type:null},getMediaInfo:d,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var t=d();return t?t.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return e},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return s},useLoLPABR:function(){return o},getVideoModel:function(){return c}}}i.__dashjs_factory_name="RulesContext",e.default=r.default.getClassFactory(i)},"./src/streaming/rules/SwitchRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i={DEFAULT:.5,STRONG:1,WEAK:0};function a(t,e,n){return{quality:void 0===t?-1:t,reason:void 0===e?null:e,priority:function(t){var e=i.DEFAULT;return t!==i.DEFAULT&&t!==i.STRONG&&t!==i.WEAK||(e=t),e}(n)}}a.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(a);s.NO_CHANGE=-1,s.PRIORITY=i,r.default.updateClassFactory(a.__dashjs_factory_name,s),e.default=s},"./src/streaming/rules/SwitchRequestHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js");function a(){var t=[],e=[];return{push:function(n){n.newValue===i.default.NO_CHANGE&&(n.newValue=n.oldValue),t[n.oldValue]||(t[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,a=r<0?1:0,s=a?-r:0,o=a?0:1;if(t[n.oldValue].drops+=a,t[n.oldValue].dropSize+=s,t[n.oldValue].noDrops+=o,e.push({idx:n.oldValue,noDrop:o,drop:a,dropSize:s}),e.length>8){var u=e.shift();t[u.idx].drops-=u.drop,t[u.idx].dropSize-=u.dropSize,t[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return t},reset:function(){t=[],e=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";var s=r.default.getClassFactory(a);e.default=s},"./src/streaming/rules/ThroughputHistory.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js");function a(t){var e,n,i,a,s,o=(t=t||{}).settings;function u(t,e,n,r){var i=Math.pow(.5,n/r.fast);t.fastEstimate=(1-i)*e+i*t.fastEstimate;var a=Math.pow(.5,n/r.slow);t.slowEstimate=(1-a)*e+a*t.slowEstimate,t.totalWeight+=n}function l(t,u,l){return o.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(t,e){var n=t?s.throughputHalfLife:s.latencyHalfLife,r=t?i[e]:a[e];if(!r||r.totalWeight<=0)return NaN;var o=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),u=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return t?Math.min(o,u):Math.max(o,u)}(t,u):function(t,r,i){var a=function(t,r,i){var a,s;if(t?(a=e[r],s=i?3:4):(a=n[r],s=4),a){if(s>=a.length)s=a.length;else if(t)for(var o=1;o<s;++o){var u=a[a.length-o]/a[a.length-o-1];if((u>=1.3||u<=1/1.3)&&(s+=1)===a.length)break}}else s=0;return s}(t,r,i),s=(t?e:n)[r];return 0!==a&&s&&0!==s.length?(s=s.slice(-a)).reduce((function(t,e){return t+e}))/s.length:NaN}(t,u,l)}function c(t,e){return l(!0,t,e)}function d(t){e[t]=e[t]||[],n[t]=n[t]||[],i[t]=i[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[t]=a[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function f(){e={},n={},i={},a={}}var h={push:function(t,l,c){if(l.trace&&l.trace.length){var f=l.tresponse.getTime()-l.trequest.getTime()||1,h=l._tfinish.getTime()-l.tresponse.getTime()||1,p=l.trace.reduce((function(t,e){return t+e.b[0]}),0),g=0,m=0;if(o.get().streaming.lowLatencyEnabled){if(o.get().streaming.abr.fetchThroughputCalculationMode===r.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var y=l.trace.reduce((function(t,e){return t+e.t}),0);m=Math.round(y/l.trace.length)}0===m&&(g=l.trace.reduce((function(t,e){return t+e.d}),0))}else g=c?h:f+h;if(0!==g&&(m=Math.round(8*p/g)),d(t),function(t,e,n){return t===r.default.VIDEO?n<o.get().streaming.cacheLoadThresholds[r.default.VIDEO]:t===r.default.AUDIO?n<o.get().streaming.cacheLoadThresholds[r.default.AUDIO]:void 0}(t,0,h)){if(e[t].length>0&&!e[t].hasCachedEntries)return;e[t].hasCachedEntries=!0}else e[t]&&e[t].hasCachedEntries&&function(t){delete e[t],delete n[t],delete i[t],delete a[t],d(t)}(t);e[t].push(m),e[t].length>20&&e[t].shift(),n[t].push(f),n[t].length>20&&n[t].shift(),u(i[t],m,.001*h,s.throughputHalfLife),u(a[t],f,1,s.latencyHalfLife)}},getAverageThroughput:c,getSafeAverageThroughput:function(t,e){var n=c(t,e);return isNaN(n)||(n*=o.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(t){return l(!1,t)},reset:f};return s={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},f(),h}a.__dashjs_factory_name="ThroughputHistory",e.default=i.default.getClassFactory(a)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/abr/ThroughputRule.js"),i=n("./src/streaming/rules/abr/InsufficientBufferRule.js"),a=n("./src/streaming/rules/abr/AbandonRequestsRule.js"),s=n("./src/streaming/rules/abr/DroppedFramesRule.js"),o=n("./src/streaming/rules/abr/SwitchHistoryRule.js"),u=n("./src/streaming/rules/abr/BolaRule.js"),l=n("./src/streaming/rules/abr/L2ARule.js"),c=n("./src/streaming/rules/abr/lolp/LoLpRule.js"),d=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/constants/Constants.js");function p(t){var e,n,d=this.context,p=(t=t||{}).mediaPlayerModel,g=t.dashMetrics,m=t.settings;function y(t){return t.filter((function(t){return t.quality>f.default.NO_CHANGE}))}function v(t){var e,n,r,i,a,s={},o=null;if(0!==t.length){for(s[f.default.PRIORITY.STRONG]={quality:f.default.NO_CHANGE,reason:null},s[f.default.PRIORITY.WEAK]={quality:f.default.NO_CHANGE,reason:null},s[f.default.PRIORITY.DEFAULT]={quality:f.default.NO_CHANGE,reason:null},e=0,n=t.length;e<n;e+=1)(r=t[e]).quality!==f.default.NO_CHANGE&&(s[r.priority].quality===f.default.NO_CHANGE||s[r.priority].quality>r.quality)&&(s[r.priority].quality=r.quality,s[r.priority].reason=r.reason||null);return s[f.default.PRIORITY.WEAK].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.WEAK]),s[f.default.PRIORITY.DEFAULT].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.DEFAULT]),s[f.default.PRIORITY.STRONG].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.STRONG]),o&&(i=o.quality,a=o.reason),Object(f.default)(d).create(i,a)}}return{initialize:function(){e=[],n=[],m.get().streaming.abr.useDefaultABRRules&&(m.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_L2A?e.push(Object(l.default)(d).create({dashMetrics:g,mediaPlayerModel:p,settings:m})):m.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_LoLP?e.push(Object(c.default)(d).create({dashMetrics:g})):(e.push(Object(u.default)(d).create({dashMetrics:g,mediaPlayerModel:p,settings:m})),e.push(Object(r.default)(d).create({dashMetrics:g})),m.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&e.push(Object(i.default)(d).create({dashMetrics:g,settings:m})),m.get().streaming.abr.additionalAbrRules.switchHistoryRule&&e.push(Object(o.default)(d).create()),m.get().streaming.abr.additionalAbrRules.droppedFramesRule&&e.push(Object(s.default)(d).create()),m.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push(Object(a.default)(d).create({dashMetrics:g,mediaPlayerModel:p,settings:m})))),p.getABRCustomRules().forEach((function(t){"qualitySwitchRules"===t.type&&e.push(t.rule(d).create()),"abandonFragmentRules"===t.type&&n.push(t.rule(d).create())}))},reset:function(){[e,n].forEach((function(t){t&&t.length&&t.forEach((function(t){return t.reset&&t.reset()}))})),e=[],n=[]},getMaxQuality:function(t){return v(y(e.map((function(e){return e.getMaxIndex(t)}))))||Object(f.default)(d).create()},getMinSwitchRequest:v,shouldAbandonFragment:function(t,e){return v(y(n.map((function(n){return n.shouldAbandon(t,e)}))))||Object(f.default)(d).create()},getQualitySwitchRules:function(){return e}}}p.__dashjs_factory_name="ABRRulesCollection";var g=d.default.getClassFactory(p);g.QUALITY_SWITCH_RULES="qualitySwitchRules",g.ABANDON_FRAGMENT_RULES="abandonFragmentRules",d.default.updateSingletonFactory(p.__dashjs_factory_name,g),e.default=g},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/rules/SwitchRequest.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js");function s(t){var e,n,i,o,u,l=this.context,c=(t=t||{}).mediaPlayerModel,d=t.dashMetrics,f=t.settings;function h(){i={},o={},u=[]}return e={shouldAbandon:function(t){var e=Object(r.default)(l).create(r.default.NO_CHANGE,{name:s.__dashjs_factory_name});if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getCurrentRequest")&&t.hasOwnProperty("getRepresentationInfo")&&t.hasOwnProperty("getAbrController")))return e;var a,h,p=t.getMediaInfo(),g=t.getMediaType(),m=t.getStreamInfo(),y=m?m.id:null,v=t.getCurrentRequest();if(!isNaN(v.index)){h=v.index,i[a=g]=i[a]||{},i[a][h]=i[a][h]||{};var _=c.getStableBufferTime();if(d.getCurrentBufferLevel(g)>_)return e;var b=i[g][v.index];if(null===b||null===v.firstByteDate||o.hasOwnProperty(b.id))return e;if(void 0===b.firstByteTime&&(u[g]=[],b.firstByteTime=v.firstByteDate.getTime(),b.segmentDuration=v.duration,b.bytesTotal=v.bytesTotal,b.id=v.index),b.bytesLoaded=v.bytesLoaded,b.elapsedTime=(new Date).getTime()-b.firstByteTime,b.bytesLoaded>0&&b.elapsedTime>0&&function(t,e){u[t]=u[t]||[],u[t].push(e)}(g,Math.round(8*b.bytesLoaded/b.elapsedTime)),u[g].length>=5&&b.elapsedTime>500&&b.bytesLoaded<b.bytesTotal){var E=u[g].reduce((function(t,e){return t+e}),0);if(b.measuredBandwidthInKbps=Math.round(E/u[g].length),b.estimatedTimeOfDownload=+(8*b.bytesTotal/b.measuredBandwidthInKbps/1e3).toFixed(2),b.estimatedTimeOfDownload<1.8*b.segmentDuration||0===t.getRepresentationInfo().quality)return e;if(!o.hasOwnProperty(b.id)){var T=t.getAbrController(),S=b.bytesTotal-b.bytesLoaded,w=T.getBitrateList(p),A=T.getQualityForBitrate(p,b.measuredBandwidthInKbps*f.get().streaming.abr.bandwidthSafetyFactor,y),x=T.getMinAllowedIndexFor(g,y),C=void 0!==x?Math.max(x,A):A;S>b.bytesTotal*w[C].bitrate/w[T.getQualityFor(g,y)].bitrate&&(e.quality=C,e.reason.throughput=b.measuredBandwidthInKbps,e.reason.fragmentID=b.id,o[b.id]=b,n.debug("["+g+"] frag id",b.id," is asking to abandon and switch to quality to ",C," measured bandwidth was",b.measuredBandwidthInKbps),delete i[g][b.id])}}else b.bytesLoaded===b.bytesTotal&&delete i[g][b.id]}return e},reset:h},n=Object(a.default)(l).getInstance().getLogger(e),h(),e}s.__dashjs_factory_name="AbandonRequestsRule",e.default=i.default.getClassFactory(s)},"./src/streaming/rules/abr/BolaRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/MediaPlayerEvents.js");function d(t){var e,n,a,d=this.context,f=(t=t||{}).dashMetrics,h=t.mediaPlayerModel,p=Object(o.default)(d).getInstance();function g(t,e,n){var r=n.reduce((function(t,e,r){return e>n[t]?r:t}),0);if(0===r)return null;var i=Math.max(t,10+2*e.length),a=(n[r]-1)/(i/10-1);return{gp:a,Vp:10/a}}function m(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function y(t,e){var n=h.getStableBufferTime();if(t.stableBufferTime!==n){var r=g(n,t.bitrates,t.utilities);if(r.Vp!==t.Vp||r.gp!==t.gp){var i=f.getCurrentBufferLevel(e),a=i+t.placeholderBuffer;a-=10,a*=r.Vp/t.Vp,a+=10,t.stableBufferTime=n,t.Vp=r.Vp,t.gp=r.gp,t.placeholderBuffer=Math.max(0,a-i)}}}function v(t,e){return t.Vp*(t.utilities[e]+t.gp)}function _(t,e){for(var n=t.bitrates[e],r=t.utilities[e],i=0,a=e-1;a>=0;--a)if(t.utilities[a]<t.utilities[e]){var s=t.bitrates[a];i=Math.max(i,t.Vp*(t.gp+(n*t.utilities[a]-s*r)/(n-s)))}return i}function b(){for(var t in a)a.hasOwnProperty(t)&&2===a[t].state&&(a[t].placeholderBuffer=0)}function E(){for(var t in a)if(a.hasOwnProperty(t)){var e=a[t];0!==e.state&&(e.state=1,m(e))}}function T(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=a[t.chunk.mediaInfo.type];if(e&&0!==e.state){var n=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||n>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=n,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=n,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,w(e,t.chunk.mediaInfo.type)}}}function S(t){if(t&&t.metric===r.default.HTTP_REQUEST&&t.value&&t.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=a[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),w(e,t.mediaType))}}function w(t,e){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=.99,!isNaN(t.lastSegmentFinishTimeMs)){var n=f.getCurrentBufferLevel(e)+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),r=v(t,t.lastQuality),i=Math.max(0,r-n);t.placeholderBuffer=Math.min(i,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function A(t){if(t){var e=a[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function x(t){if(t){var e=a[t.mediaType];if(e&&0!==e.state){var n,r=f.getCurrentBufferLevel(t.mediaType);n=e.abrQuality>0?_(e,e.abrQuality):10;var i=Math.max(0,n-r);e.placeholderBuffer=Math.min(e.placeholderBuffer,i)}}}function C(){a={}}return e={getMaxIndex:function(t){var e=Object(i.default)(d).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useBufferOccupancyABR")))return e;var r=t.getMediaInfo(),s=t.getMediaType(),o=t.getScheduleController(),u=t.getStreamInfo(),l=t.getAbrController(),c=l.getThroughputHistory(),p=u?u.id:null,b=u&&u.manifestInfo&&u.manifestInfo.isDynamic,E=t.useBufferOccupancyABR();if(e.reason=e.reason||{},!E)return e;o.setTimeToLoadDelay(0);var T=function(t){var e=t.getMediaType(),n=a[e];return n?0!==n.state&&y(n,e):(n=function(t){var e={},n=t.getMediaInfo().bitrateList.map((function(t){return t.bandwidth})),r=function(t){return t.map((function(t){return Math.log(t)}))}(n);r=r.map((function(t){return t-r[0]+1}));var i=h.getStableBufferTime(),a=g(i,n,r);return a?(e.state=1,e.bitrates=n,e.utilities=r,e.stableBufferTime=i,e.Vp=a.Vp,e.gp=a.gp,e.lastQuality=0,m(e)):e.state=0,e}(t),a[e]=n),n}(t);if(0===T.state)return e;var S,w=f.getCurrentBufferLevel(s),A=c.getAverageThroughput(s,b),x=c.getSafeAverageThroughput(s,b),C=c.getAverageLatency(s);if(e.reason.state=T.state,e.reason.throughput=A,e.reason.latency=C,isNaN(A))return e;switch(T.state){case 1:S=l.getQualityForBitrate(r,x,p,C),e.quality=S,e.reason.throughput=x,T.placeholderBuffer=Math.max(0,_(T,S)-w),T.lastQuality=S,!isNaN(T.lastSegmentDurationS)&&w>=T.lastSegmentDurationS&&(T.state=2);break;case 2:!function(t,e){var n=Date.now();isNaN(t.lastSegmentFinishTimeMs)?isNaN(t.lastCallTimeMs)||(t.placeholderBuffer+=Math.max(0,.001*(n-t.lastCallTimeMs))):t.placeholderBuffer+=Math.max(0,.001*(n-t.lastSegmentFinishTimeMs)),t.lastCallTimeMs=n,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,y(t,e)}(T,s),S=function(t,e){for(var n=t.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var s=(t.Vp*(t.utilities[a]+t.gp)-e)/t.bitrates[a];(isNaN(i)||s>=i)&&(i=s,r=a)}return r}(T,w+T.placeholderBuffer);var D=l.getQualityForBitrate(r,x,p,C);S>T.lastQuality&&S>D&&(S=Math.max(D,T.lastQuality));var I=Math.max(0,w+T.placeholderBuffer-v(T,S));I<=T.placeholderBuffer?(T.placeholderBuffer-=I,I=0):(I-=T.placeholderBuffer,T.placeholderBuffer=0,S<l.getMaxAllowedIndexFor(s,p)?o.setTimeToLoadDelay(1e3*I):I=0),e.quality=S,e.reason.throughput=A,e.reason.latency=C,e.reason.bufferLevel=w,e.reason.placeholderBuffer=T.placeholderBuffer,e.reason.delay=I,T.lastQuality=S;break;default:n.debug("BOLA ABR rule invoked in bad state."),e.quality=l.getQualityForBitrate(r,x,p,C),e.reason.state=T.state,e.reason.throughput=x,e.reason.latency=C,T.state=1,m(T)}return e},reset:function(){C(),p.off(c.default.BUFFER_EMPTY,b,e),p.off(c.default.PLAYBACK_SEEKING,E,e),p.off(c.default.METRIC_ADDED,S,e),p.off(c.default.QUALITY_CHANGE_REQUESTED,A,e),p.off(c.default.FRAGMENT_LOADING_ABANDONED,x,e),p.off(u.default.MEDIA_FRAGMENT_LOADED,T,e)}},n=Object(l.default)(d).getInstance().getLogger(e),C(),p.on(c.default.BUFFER_EMPTY,b,e),p.on(c.default.PLAYBACK_SEEKING,E,e),p.on(c.default.METRIC_ADDED,S,e),p.on(c.default.QUALITY_CHANGE_REQUESTED,A,e),p.on(c.default.FRAGMENT_LOADING_ABANDONED,x,e),p.on(u.default.MEDIA_FRAGMENT_LOADED,T,e),e}d.__dashjs_factory_name="BolaRule",e.default=a.default.getClassFactory(d)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/Debug.js");function s(){var t,e,n=this.context;return t={getMaxIndex:function(t){var r=Object(i.default)(n).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return r;var a=t.getDroppedFramesHistory(),s=t.getStreamInfo().id;if(a){var o=a.getFrameHistory(s);if(!o||0===o.length)return r;for(var u=0,l=0,c=i.default.NO_CHANGE,d=1;d<o.length;d++)if(o[d]&&(u=o[d].droppedVideoFrames,(l=o[d].totalVideoFrames)>375&&u/l>.15)){e.debug("index: "+(c=d-1)+" Dropped Frames: "+u+" Total Frames: "+l);break}return Object(i.default)(n).create(c,{droppedFrames:u})}return r}},e=Object(a.default)(n).getInstance().getLogger(t),t}s.__dashjs_factory_name="DroppedFramesRule",e.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js"),o=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function d(t){t=t||{};var e,n,a,d=this.context,f=Object(r.default)(d).getInstance(),h=t.dashMetrics,p=t.settings;function g(){(a={})[u.default.VIDEO]={ignoreCount:2},a[u.default.AUDIO]={ignoreCount:2}}function m(){g()}function y(t){isNaN(t.startTime)||t.mediaType!==u.default.AUDIO&&t.mediaType!==u.default.VIDEO||a[t.mediaType].ignoreCount>0&&a[t.mediaType].ignoreCount--}return e={getMaxIndex:function(t){var e=Object(o.default)(d).create();if(!t||!t.hasOwnProperty("getMediaType"))return e;!function(){if(!h||!h.hasOwnProperty("getCurrentBufferLevel")||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r=t.getMediaType(),i=h.getCurrentBufferState(r),s=t.getRepresentationInfo().fragmentDuration,c=t.getStreamInfo(),f=c?c.id:null,g=c&&c.manifestInfo&&c.manifestInfo.isDynamic;if(function(t){return!p.get().streaming.lowLatencyEnabled&&a[t].ignoreCount>0}(r)||!s)return e;if(i&&i.state===l.default.BUFFER_EMPTY)n.debug("["+r+"] Switch to index 0; buffer is empty."),e.quality=0,e.reason="InsufficientBufferRule: Buffer is empty";else{var m=t.getMediaInfo(),y=t.getAbrController(),v=y.getThroughputHistory(),_=h.getCurrentBufferLevel(r),b=v.getAverageThroughput(r,g),E=v.getAverageLatency(r);e.quality=y.getQualityForBitrate(m,b*(_/s)*.5,f,E),e.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return e},reset:function(){g(),f.off(c.default.PLAYBACK_SEEKING,m,e),f.off(i.default.BYTES_APPENDED_END_FRAGMENT,y,e)}},n=Object(s.default)(d).getInstance().getLogger(e),g(),f.on(c.default.PLAYBACK_SEEKING,m,e),f.on(i.default.BYTES_APPENDED_END_FRAGMENT,y,e),e}d.__dashjs_factory_name="InsufficientBufferRule",e.default=a.default.getClassFactory(d)},"./src/streaming/rules/abr/L2ARule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/constants/Constants.js");function d(t){var e,n,a,d,f=this.context,h=(t=t||{}).dashMetrics,p=Object(o.default)(f).getInstance();function g(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function m(){for(var t in n)if(n.hasOwnProperty(t)){var e=n[t];0!==e.state&&(e.state=1,g(e))}}function y(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=n[t.chunk.mediaInfo.type],r=a[t.chunk.mediaInfo.type];if(e&&0!==e.state){var i=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||i>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=i,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=i,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,_(e,r)}}}function v(t){if(t&&t.metric===r.default.HTTP_REQUEST&&t.value&&t.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=n[t.mediaType],i=a[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),_(e,i))}}function _(t,e){isNaN(t.lastSegmentStart)||isNaN(t.lastSegmentRequestTimeMs)||(e.segment_request_start_s=.001*t.lastSegmentRequestTimeMs,e.segment_download_finish_s=.001*t.lastSegmentFinishTimeMs,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN)}function b(t){if(t&&t.mediaType){var e=n[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function E(t,e){if(t.length!==e.length)return-1;for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function T(){n={},a={}}return e={getMaxIndex:function(t){var e,r=Object(i.default)(f).create(),s=Math.pow(4,.99),o=Math.max(Math.pow(4,1),s*Math.sqrt(4)),u=t.getMediaInfo(),l=t.getMediaType(),p=u.bitrateList.map((function(t){return t.bandwidth})),m=p.length,y=t.getScheduleController(),v=t.getStreamInfo(),_=t.getAbrController(),b=_.getThroughputHistory(),T=v&&v.manifestInfo&&v.manifestInfo.isDynamic,S=t.useL2AABR(),w=h.getCurrentBufferLevel(l,!0),A=b.getSafeAverageThroughput(l,T),x=b.getAverageThroughput(l,T),C=b.getAverageLatency(l),D=t.getVideoModel().getPlaybackRate();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!S||l===c.default.AUDIO)return r;y.setTimeToLoadDelay(0);var I=function(t){var e=t.getMediaType(),r=n[e];return r||(r=function(t){var e={},n=t.getMediaInfo(),r=n.bitrateList.map((function(t){return t.bandwidth/1e3}));return e.state=1,e.bitrates=r,e.lastQuality=0,function(t){t&&t.type&&(a[t.type]={},a[t.type].w=[],a[t.type].prev_w=[],a[t.type].Q=0,a[t.type].segment_request_start_s=0,a[t.type].segment_download_finish_s=0,a[t.type].B_target=1.5)}(n),g(e),e}(t),n[e]=r),r}(t);if(0===I.state)return r;var R=a[l];if(!R)return r;if(r.reason.state=I.state,r.reason.throughput=x,r.reason.latency=C,isNaN(x))return r;switch(I.state){case 1:if(e=_.getQualityForBitrate(u,A,v.id,C),r.quality=e,r.reason.throughput=A,I.lastQuality=e,!isNaN(I.lastSegmentDurationS)&&w>=R.B_target){I.state=2,R.Q=s;for(var O=0;O<m;++O)R.prev_w[O]=O===I.lastQuality?1:0}break;case 2:var P=[],M=h.getCurrentHttpRequest(l).trace.reduce((function(t,e){return t+e.d}),0),L=h.getCurrentHttpRequest(l).trace.reduce((function(t,e){return t+e.b[0]}),0),N=Math.round(8*L/M);N<1&&(N=1);for(var k=I.lastSegmentDurationS,F=1,B=0;B<m;++B)p[B]=p[B]/1e3,D*p[B]>N&&(F=-1),R.w[B]=R.prev_w[B]+F*(k/(2*o))*((R.Q+s)*(D*p[B]/N));R.w=function(t){for(var e=t.length,n=!1,r=[],i=0;i<e;++i)r[i]=t[i];for(var a=t.sort((function(t,e){return e-t})),s=0,o=0,u=[],l=0;l<e-1;++l)if((o=((s+=a[l])-1)/(l+1))>=a[l+1]){n=!0;break}n||(o=(s+a[e-1]-1)/e);for(var c=0;c<e;++c)u[c]=Math.max(r[c]-o,0);return u}(R.w);for(var j=0;j<m;++j)P[j]=R.w[j]-R.prev_w[j],R.prev_w[j]=R.w[j];R.Q=Math.max(0,R.Q-k+k*D*((E(p,R.prev_w)+E(p,P))/N));for(var U=[],V=0;V<m;++V)U[V]=Math.abs(p[V]-E(R.w,p));(e=U.indexOf(Math.min.apply(Math,U)))>I.lastQuality&&p[I.lastQuality+1]<=N&&(e=I.lastQuality+1),p[e]>=N&&(R.Q=2*Math.max(s,R.Q)),r.quality=e,r.reason.throughput=x,r.reason.latency=C,r.reason.bufferLevel=w,I.lastQuality=r.quality;break;default:d.debug("L2A ABR rule invoked in bad state."),r.quality=_.getQualityForBitrate(u,A,v.id,C),r.reason.state=I.state,r.reason.throughput=A,r.reason.latency=C,I.state=1,g(I)}return r},reset:function(){T(),p.off(u.default.PLAYBACK_SEEKING,m,e),p.off(u.default.MEDIA_FRAGMENT_LOADED,y,e),p.off(u.default.METRIC_ADDED,v,e),p.off(u.default.QUALITY_CHANGE_REQUESTED,b,e)}},d=Object(l.default)(f).getInstance().getLogger(e),T(),p.on(u.default.PLAYBACK_SEEKING,m,e),p.on(u.default.MEDIA_FRAGMENT_LOADED,y,e),p.on(u.default.METRIC_ADDED,v,e),p.on(u.default.QUALITY_CHANGE_REQUESTED,b,e),e}d.__dashjs_factory_name="L2ARule",e.default=a.default.getClassFactory(d)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/rules/SwitchRequest.js");function s(){var t,e,n=this.context;return t={getMaxIndex:function(t){for(var r=t?t.getSwitchHistory():null,i=r?r.getSwitchRequests():[],s=0,o=0,u=0,l=Object(a.default)(n).create(),c=0;c<i.length;c++)if(void 0!==i[c]&&(u+=i[c].dropSize,(s+=i[c].drops)+(o+=i[c].noDrops)>=6&&s/o>.075)){l.quality=c>0&&i[c].drops>0?c-1:c,l.reason={index:l.quality,drops:s,noDrops:o,dropSize:u},e.debug("Switch history rule index: "+l.quality+" samples: "+(s+o)+" drops: "+s);break}return l}},e=Object(i.default)(n).getInstance().getLogger(t),t}s.__dashjs_factory_name="SwitchHistoryRule",e.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/ThroughputRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/constants/MetricsConstants.js");function o(t){var e=this.context,n=(t=t||{}).dashMetrics;return{getMaxIndex:function(t){var r=Object(i.default)(e).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("useBufferOccupancyABR")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var o=t.getMediaInfo(),u=t.getMediaType(),l=n.getCurrentBufferState(u),c=t.getScheduleController(),d=t.getAbrController(),f=t.getStreamInfo(),h=f?f.id:null,p=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,g=d.getThroughputHistory(),m=g.getSafeAverageThroughput(u,p),y=g.getAverageLatency(u),v=t.useBufferOccupancyABR();return isNaN(m)||!l||v||d.getAbandonmentStateFor(h,u)!==s.default.ABANDON_LOAD&&(l.state===s.default.BUFFER_LOADED||p)&&(r.quality=d.getQualityForBitrate(o,m,h,y),c.setTimeToLoadDelay(0),r.reason={throughput:m,latency:y}),r},reset:function(){}}}o.__dashjs_factory_name="ThroughputRule",e.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r,a,s,o,u,l,c=this.context;function d(){n=null,r=1,a=100,s=0,o=null,u=null,l="dynamic_weight_selection"}function f(){var t=0;if(n)for(var e=0;e<n.length;e++){var r=n[e];r.state.throughput>t&&(t=r.state.throughput)}return t}function h(t,e,n){var r=t.map((function(t,r){return n[r]*Math.pow(t-e[r],2)})).reduce((function(t,e){return t+e}));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function p(t,e){return h([t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1])}function g(t,e,n){for(var r=0;r<e.length;r++){var i=e[r],a=p(i,t);m(i,n,Math.exp(-1*Math.pow(a,2)/(2*Math.pow(.1,2))))}}function m(t,e,n){var r=t.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(e[0]-r.throughput)*i[0]*n,r.latency=r.latency+(e[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(e[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(e[3]-r.switch)*i[3]*n}function y(t,e,n,r,i,a,s){o||(o=u[u.length-1]);var l=t.findWeightVector(e,n,r,i,a,s);null!==l&&-1!==l&&(o=l)}return t={getNextQuality:function(t,i,c,d,p,m,v){var _=c,b=d,E=i,T=function(t){if(!n){n=[];var e=t.bitrateList,i=[];s=e[0].bandwidth,e.forEach((function(t){i.push(t.bandwidth),t.bandwidth<s&&(s=t.bandwidth)})),o=i.map((function(t){return Math.pow(t,2)})).reduce((function(t,e){return t+e})),r=Math.sqrt(o);for(var a=0;a<e.length;a++)n.push({qualityIndex:a,bitrate:e[a].bandwidth,state:{throughput:e[a].bandwidth/r,latency:0,rebuffer:0,switch:0}});u=function(t){var e=[],n=function(t){for(var e=[],n=0;n<t;n++){var r=[Math.random()*f(),Math.random(),Math.random(),Math.random()];e.push(r)}return e}(Math.pow(t.length,2));e.push(n[0]);for(var r=[1,1,1,1],i=1;i<t.length;i++){for(var a=null,s=null,o=0;o<n.length;o++){for(var u=n[o],l=null,c=0;c<e.length;c++){var d=h(u,e[c],r);(null===l||d<l)&&(l=d)}(null===s||l>s)&&(a=u,s=l)}e.push(a)}for(var p=null,g=null,m=0;m<e.length;m++){for(var y=0,v=0;v<e.length;v++)m!==v&&(y+=h(e[m],e[v],r));(null===p||y>p)&&(p=y,g=m)}var _=[];for(_.push(e[g]),e.splice(g,1);e.length>0;){for(var b=null,E=null,T=0;T<e.length;T++){var S=h(_[0],e[T],r);(null===b||S<b)&&(b=S,E=T)}_.push(e[E]),e.splice(E,1)}return _}(n)}var o;return n}(t),S=i/r;S>1&&(S=f()),c/=a,e.debug("getNextQuality called throughput:".concat(S," latency:").concat(c," bufferSize:").concat(d," currentQualityIndex:").concat(m," playbackRate:").concat(p));var w=T[m],A=w.bitrate*v.getSegmentDuration()/E,x=Math.max(0,A-b);if(b-A<v.getMinBuffer())return e.debug("Buffer is low for bitrate= ".concat(w.bitrate," downloadTime=").concat(A," currentBuffer=").concat(b," rebuffer=").concat(x)),function(t,e){var r=0,i=t;if(n)for(var a=0;a<n.length;a++){var s=n[a];s.bitrate<t.bitrate&&s.bitrate>r&&e>s.bitrate&&(r=s.bitrate,i=s)}return i}(w,E).qualityIndex;switch(l){case"manual_weight_selection":o=[.4,.4,.4,.4];break;case"random_weight_selection":!function(t){o=function(t,e){for(var n=[],r=Math.sqrt(2/t),i=0;i<4;i++)n.push(Math.random()*r);return o=n}(t.length)}(T);break;case"dynamic_weight_selection":y(v,T,_,b,x,E,p);break;default:y(v,T,_,b,x,E,p)}for(var C=null,D=null,I=null,R=0;R<T.length;R++){var O=T[R],P=O.state,M=[P.throughput,P.latency,P.rebuffer,P.switch],L=o.slice(),N=v.getNextBufferWithBitrate(O.bitrate,b,E),k=N<v.getMinBuffer();k&&e.debug("Buffer is low for bitrate=".concat(O.bitrate," downloadTime=").concat(A," currentBuffer=").concat(b," nextBuffer=").concat(N)),(O.bitrate>i-1e4||k)&&O.bitrate!==s&&(L[0]=100);var F=h(M,[S,0,0,0],L);(null===C||F<C)&&(C=F,D=O.qualityIndex,I=O)}var B=Math.abs(w.bitrate-I.bitrate)/r;return g(w,T,[S,c,x,B]),g(I,T,[S,0,0,B]),D},reset:function(){d()}},e=Object(i.default)(c).getInstance().getLogger(t),d(),t}a.__dashjs_factory_name="LearningAbrController",e.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/abr/lolp/QoeInfo.js");function a(){var t,e,n,r,a;function s(){e=null,n=null,r=null,a=null}function o(t,e,n,r){var a=new i.default;return a.type=t,a.weights.bitrateReward=e||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=r||200,a}function u(t,e,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*t,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(t-i.lastBitrate)),i.lastBitrate=t,i.rebufferWSum+=i.weights.rebufferPenalty*e;for(var a=0;a<i.weights.latencyPenalty.length;a++){var s=i.weights.latencyPenalty[a];if(n<=s.threshold){i.latencyWSum+=s.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return t={setupPerSegmentQoe:function(t,i,s){e=o("segment",t,i,s),n=t,r=i,a=s},logSegmentMetrics:function(t,n,r,i){e&&u(t,n,r,i,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(t,e,i,s){var l=null;return n&&r&&a&&(l=o("segment",n,r,a)),l?(u(t,e,i,s,l),l.totalQoe):0},reset:function(){s()}},s(),t}a.__dashjs_factory_name="LoLpQoeEvaluator",e.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/rules/abr/lolp/LearningAbrController.js"),s=n("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),o=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/MetricsConstants.js"),l=n("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),c=n("./src/streaming/constants/Constants.js");function d(t){var e,n,i,d,f=(t=t||{}).dashMetrics,h=this.context;return n={getMaxIndex:function(t){try{var n=Object(o.default)(h).create(),r=t.getMediaInfo().type,a=t.getAbrController(),s=t.getStreamInfo(),p=a.getQualityFor(r,s.id),g=t.getMediaInfo(),m=f.getCurrentBufferState(r),y=t.getScheduleController(),v=f.getCurrentBufferLevel(r,!0),_=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,b=y.getPlaybackController(),E=b.getCurrentLiveLatency();if(!t.useLoLPABR()||r===c.default.AUDIO)return n;E||(E=0);var T=b.getPlaybackRate(),S=a.getThroughputHistory().getSafeAverageThroughput(r,_);if(e.debug("Throughput ".concat(Math.round(S)," kbps")),isNaN(S)||!m)return n;if(a.getAbandonmentStateFor(s.id,r)===u.default.ABANDON_LOAD)return n;for(var w=g.bitrateList,A=t.getRepresentationInfo().fragmentDuration,x=w[0].bandwidth/1e3,C=w[w.length-1].bandwidth/1e3,D=0;D<w.length;D++){var I=w[D].bandwidth/1e3;I>C?C=I:I<x&&(x=I)}var R=w[p].bandwidth/1e3,O=f.getCurrentHttpRequest(r,!0),P=(O.tresponse.getTime()-O.trequest.getTime())/1e3,M=P>A?P-A:0;d.setupPerSegmentQoe(A,C,x),d.logSegmentMetrics(R,M,E,T);var L=Object(l.default)(h).create({targetLatency:1.5,bufferMin:.3,segmentDuration:A,qoeEvaluator:d});return n.quality=i.getNextQuality(g,1e3*S,E,v,T,p,L),n.reason={throughput:S,latency:E},n.priority=o.default.PRIORITY.STRONG,y.setTimeToLoadDelay(0),n.quality!==p&&console.log("[TgcLearningRule]["+r+"] requesting switch to index: ",n.quality,"Average throughput",Math.round(S),"kbps"),n}catch(N){throw N}},reset:function(){i.reset(),d.reset()}},e=Object(r.default)(h).getInstance().getLogger(n),i=Object(a.default)(h).create(),d=Object(s.default)(h).create(),n}d.__dashjs_factory_name="LoLPRule",e.default=i.default.getClassFactory(d)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e,n,r,i,a=t.targetLatency,s=t.bufferMin,o=t.segmentDuration,u=t.qoeEvaluator;function l(){return o}function c(t,e){var n=l();return e>n?t-n:t+n-e}return e={getMinBuffer:function(){return s},getSegmentDuration:l,getNextBufferWithBitrate:function(t,e,n){return c(e,t*o/n)},getNextBuffer:c,findWeightVector:function(t,e,i,l,d,f){var h=null,p=null,g=null,m=Math.abs(e-r);return t.forEach((function(t){n.forEach((function(n){var r=n[1],l=n[2],y=t.bitrate*o/d,v=c(i,y),_=Math.max(1e-5,y-v),b=u.calculateSingleUseQoe(t.bitrate,(0===l?10:1/l)*_,(0===r?10:1/r)*t.state.latency,f);(null===h||b>h)&&function(t,e,n){return!(t>a+n)&&e>=s}(e,v,m)&&(h=b,p=n,g=t.bitrate)}))})),null===p&&null===g&&(p=-1),r=e,p}},n=function t(e,n,r){if(r===n)return e;for(var a=e.length,s=0;s<a;s++)for(var o=e.shift(),u=0;u<i.length;u++)e.push(o.concat(i[u]));return t(e,n,r+1)}((i=[.2,.4,.6,.8,1]).map((function(t){return[t]})),4,1),r=0,e}i.__dashjs_factory_name="LoLpWeightSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t=0;function e(t){for(var e="",n=0;n<t.length;++n)e+=t[n].uchar;return e.length-e.replace(/^\s+/,"").length}function n(t){return"left: "+3.125*t.x+"%; top: "+6.66*t.y1+"%; width: "+(100-3.125*t.x)+"%; height: "+6.66*Math.max(t.y2-1-t.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(t){return"red"===t?"rgb(255, 0, 0)":"green"===t?"rgb(0, 255, 0)":"blue"===t?"rgb(0, 0, 255)":"cyan"===t?"rgb(0, 255, 255)":"magenta"===t?"rgb(255, 0, 255)":"yellow"===t?"rgb(255, 255, 0)":"white"===t?"rgb(255, 255, 255)":"black"===t?"rgb(0, 0, 0)":t}function i(t,e){var n=t.videoHeight/15;return e?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(e.foreground?r(e.foreground):"rgb(255, 255, 255)")+"; font-style: "+(e.italics?"italic":"normal")+"; text-decoration: "+(e.underline?"underline":"none")+"; white-space: pre; background-color: "+(e.background?r(e.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(t){return t.replace(/^\s+/g,"")}function s(t){return t.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,o,u,l){var c,d,f=null,h=!1,p=-1,g={start:o,end:u,spans:[]},m="style_cea608_white_black",y={},v={},_=[];for(c=0;c<15;++c){var b=l.rows[c],E="",T=null;if(!1===b.isEmpty()){var S=e(b.chars);null===f&&(f={x:S,y1:c,y2:c+1,p:[]}),S!==p&&h&&(f.p.push(g),g={start:o,end:u,spans:[]},f.y2=c,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f={x:S,y1:c,y2:c+1,p:[]});for(var w=0;w<b.chars.length;++w){var A=b.chars[w],x=A.penState;if(null===T||!x.equals(T)){E.trim().length>0&&(g.spans.push({name:m,line:E,row:c}),E="");var C="style_cea608_"+x.foreground+"_"+x.background;x.underline&&(C+="_underline"),x.italics&&(C+="_italics"),v.hasOwnProperty(C)||(v[C]=JSON.parse(JSON.stringify(x))),T=x,m=C}E+=A.uchar}E.trim().length>0&&g.spans.push({name:m,line:E,row:c}),h=!0,p=S}else h=!1,p=-1,f&&(f.p.push(g),g={start:o,end:u,spans:[]},f.y2=c,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f=null)}f&&(f.p.push(g),f.y2=c+1,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f=null);var D=[];for(c=0;c<_.length;++c){var I=_[c],R="sub_cea608_"+t++,O=document.createElement("div");O.id=R;var P=n(I);O.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+P;var M=document.createElement("div");M.className="paragraph bodyStyle",M.style.cssText=i(r);var L=document.createElement("div");L.className="cueUniWrapper",L.style.cssText="unicode-bidi: normal; direction: ltr;";for(var N=0;N<I.p.length;++N){var k=I.p[N],F=0;for(d=0;d<k.spans.length;++d){var B=k.spans[d];if(B.line.length>0){if(0!==d&&F!=B.row){var j=document.createElement("br");j.className="lineBreak",L.appendChild(j)}var U=!1;F===B.row&&(U=!0),F=B.row;var V=v[B.name],G=document.createElement("span");G.className="spanPadding "+B.name+" customSpanColor",G.style.cssText=i(r,V),G.textContent=0!==d&&U?d===k.spans.length-1?s(B.line):B.line:k.spans.length>1&&d<k.spans.length-1&&B.row===k.spans[d+1].row?a(B.line):B.line.trim(),L.appendChild(G)}}}M.appendChild(L),O.appendChild(M);var H={bodyStyle:["%",90]};for(var Y in v)v.hasOwnProperty(Y)&&(H[Y]=["%",90]);D.push({type:"html",start:o,end:u,cueHTMLElement:O,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:H,lineHeight:{},linePadding:{}})}return D}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",e.default=r.default.getSingletonFactory(i)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/utils/InitCache.js"),o=n("./src/streaming/SourceBufferSink.js"),u=n("./src/streaming/vo/DashJSError.js"),l=n("./src/core/errors/Errors.js");function c(t){t=t||{};var e,n,a,c,d,f,h=this.context,p=Object(r.default)(h).getInstance(),g=t.textController,m=t.errHandler,y=t.streamInfo,v=t.type;function _(t){c=t}function b(t){n!==t&&(n=t)&&p.trigger(i.default.BUFFERING_COMPLETED,{},{streamId:y.id,mediaType:v})}function E(t){t.chunk.bytes&&!n&&(f.save(t.chunk),d.append(t.chunk),b(!0))}return e={initialize:function(t){_(t)},getStreamId:function(){return y.id},getType:function(){return v},getBufferControllerType:function(){return"NotFragmentedTextBufferController"},createBufferSink:function(t){return new Promise((function(e,n){try{(d=Object(o.default)(h).create({mediaSource:c,textController:g,eventBus:p})).initializeForFirstUse(y,t),a||(d.getBuffer()&&"function"==typeof d.getBuffer().initialize&&d.getBuffer().initialize(),a=!0),e(d)}catch(r){m.error(new u.default(l.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,l.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+v)),n(r)}}))},getBuffer:function(){return d},getBufferLevel:function(){return 0},getRangeAt:function(){return null},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:_,getMediaSource:function(){return c},appendInitSegmentFromCache:function(t){return null!==f.extract(y.id,t)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:b,getIsPruningInProgress:function(){return!1},reset:function(t){p.off(i.default.INIT_FRAGMENT_LOADED,E,e),!t&&d&&(d.abort(),d.reset(),d=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},a=!1,c=null,n=!1,f=Object(s.default)(h).getInstance(),p.on(i.default.INIT_FRAGMENT_LOADED,E,e),e}c.__dashjs_factory_name="NotFragmentedTextBufferController",e.default=a.default.getClassFactory(c)},"./src/streaming/text/TextController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/text/TextSourceBuffer.js"),s=n("./src/streaming/text/TextTracks.js"),o=n("./src/streaming/utils/VTTParser.js"),u=n("./src/streaming/utils/TTMLParser.js"),l=n("./src/core/EventBus.js"),c=n("./src/core/events/Events.js"),d=n("./src/streaming/MediaPlayerEvents.js"),f=n("./src/streaming/utils/SupervisorTools.js");function h(t){var e,n,i,h,p,g,m,y,v,_,b,E,T,S=this.context,w=t.adapter,A=t.errHandler,x=t.manifestModel,C=t.mediaController,D=t.videoModel,I=t.settings;function R(t){var e=t.tracks,r=t.index,i=t.streamId;!1===I.get().streaming.text.defaultEnabled&&!P()||T?M(i,-1):(y&&e.some((function(t,e){if(C.matchSettings(y,t))return M(i,e),r=e,!0})),_=!1),n[i].lastEnabledIndex=r,m.trigger(d.default.TEXT_TRACKS_ADDED,{enabled:P(),index:r,tracks:e,streamId:i}),E=!0}function O(t){if(!v&&t&&t.newMediaInfo){var e=t.newMediaInfo;e.type===r.default.TEXT&&(y={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]})}}function P(){var t=!0;return _&&!b&&(t=!1),t}function M(t,e){(_=-1===e)&&C&&C.saveTextSettingsDisabled();var n=L(t);if(n!==e&&h[t]){h[t].setModeForTrackIdx(n,r.default.TEXT_HIDDEN),h[t].setCurrentTrackIdx(e),h[t].setModeForTrackIdx(e,r.default.TEXT_SHOWING);var a=h[t].getCurrentTrackInfo();a&&a.isFragmented&&!a.isEmbedded?function(t,e,n){if(i[t])for(var a=i[t].getConfig().fragmentedTracks,s=0;s<a.length;s++){var o=a[s];if(e.lang===o.lang&&(o.id?e.id===o.id:e.index===o.index)){var u=C.getCurrentTrackFor(r.default.TEXT,t);(o.id?u.id!==o.id:u.index!==o.index)?(h[t].deleteCuesFromTrackIdx(n),i[t].setCurrentFragmentedTrackIdx(s)):-1===n&&m.trigger(c.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:t,mediaType:r.default.TEXT})}}}(t,a,n):a&&!a.isFragmented&&function(t,e){m.trigger(c.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:e},{streamId:t,mediaType:r.default.TEXT})}(t,a),C.setTrack(a)}}function L(t){return h[t].getCurrentTrackIdx()}function N(){i={},h={},n={},_=!0,E=!1,T=!1}return e={deactivateStream:function(t){if(t){var e=t.id;i[e]&&i[e].resetMediaInfos(),h[e]&&h[e].deleteAllTextTracks()}},initialize:function(){m.on(c.default.CURRENT_TRACK_CHANGED,O,e),m.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,e)},initializeForStream:function(t){var e=t.id,r=Object(s.default)(S).create({videoModel:D,streamInfo:t});r.initialize(),h[e]=r;var o=Object(a.default)(S).create({errHandler:A,adapter:w,manifestModel:x,mediaController:C,videoModel:D,textTracks:r,vttParser:p,ttmlParser:g,streamInfo:t});o.initialize(),i[e]=o,n[e]={},n[e].lastEnabledIndex=-1},createTracks:function(t){var e=t.id;h[e]&&h[e].createTracks()},getTextSourceBuffer:function(t){var e=t.id;if(i&&i[e])return i[e]},getAllTracksAreDisabled:function(){return _},addEmbeddedTrack:function(t,e){var n=t.id;i[n]&&i[n].addEmbeddedTrack(e)},setInitialSettings:function(t){y=t,v=!0},enableText:function(t,e){Object(f.checkParameterType)(e,"boolean"),P()!==e&&(e&&M(t,n[t].lastEnabledIndex),e||(n[t].lastEnabledIndex=L(t),E?M(t,-1):T=!0))},isTextEnabled:P,setTextTrack:M,getCurrentTrackIdx:L,enableForcedTextStreaming:function(t){Object(f.checkParameterType)(t,"boolean"),b=t},addMediaInfosToBuffer:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.id;i[a]&&i[a].addMediaInfos(e,n,r)},reset:function(){N(),m.off(c.default.CURRENT_TRACK_CHANGED,O,e),m.off(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,e),Object.keys(i).forEach((function(t){i[t].resetEmbedded(),i[t].reset()}))}},y=null,b=!1,E=!1,v=!1,T=!1,p=Object(o.default)(S).getInstance(),g=Object(u.default)(S).getInstance(),m=Object(l.default)(S).getInstance(),N(),e}h.__dashjs_factory_name="TextController",e.default=i.default.getClassFactory(h)},"./src/streaming/text/TextSourceBuffer.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/streaming/vo/TextTrackInfo.js"),s=n("./src/streaming/utils/BoxParser.js"),o=n("./src/streaming/utils/CustomTimeRanges.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/text/EmbeddedTextHtmlRender.js"),d=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),f=n.n(d),h=n("./externals/cea608-parser.js"),p=n.n(h),g=n("./src/core/EventBus.js"),m=n("./src/core/events/Events.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js");function _(t){var e,n,u,d,h,_,b,E,T,S,w,A,x,C,D,I,R=t.errHandler,O=t.manifestModel,P=t.mediaController,M=t.videoModel,L=t.textTracks,N=t.vttParser,k=t.ttmlParser,F=t.streamInfo,B=this.context,j=Object(g.default)(B).getInstance(),U=!1;function V(){_=null,E=NaN,T=[],S=null,b=!1,h=[],d=null}function G(t){var e=new a.default;for(var n in t)e[n]=t[n];e.labels=t.labels,e.defaultTrack=function(t){var e=!1;return A.length>1&&t.isEmbedded?e=t.id&&t.id===r.default.CC1:1===A.length?t.id&&"string"==typeof t.id&&"CC"===t.id.substring(0,2)&&(e=!0):0===A.length&&(e=t.index===h[0].index),e}(t),e.isFragmented=t.isFragmented,e.isEmbedded=!!t.isEmbedded,e.isTTML=function(t){return t.codec&&t.codec.search(r.default.STPP)>=0||t.mimeType&&t.mimeType.search(r.default.TTML)>=0}(t),e.kind=function(t,e){var n=t.roles&&t.roles.length>0?e[t.roles[0]]:e.caption;return n===e.caption||n===e.subtitle?n:e.caption}(t,{subtitle:"subtitles",caption:"captions"}),L.addTextTrack(e)}function H(t){var e=t.chunk;e.mediaInfo.embeddedCaptions&&z(e.bytes,e)}function Y(t){w=t}function z(t,a){var s=a.mediaInfo,o=s.type,l=s.codec||s.mimeType;l?-1!==s.codec.indexOf("application/mp4")?function(t,i,a){var s;if("InitializationSegment"===i.segmentType)b=!0,E=u.getMediaTimescaleFromMoov(t);else{if(!b)return;(s=u.getSamplesInfo(t).sampleList).length>0&&(S=s[0].cts-i.start*E),a.search(r.default.STPP)>=0?function(t,i,a){var s,o;for(d=null!==d?d:K(a),s=0;s<i.length;s++){var u=i[s],l=u.cts,c=X(),h=c+l/E;e.buffered.add(h,h+u.duration/E);var p=new DataView(t,u.offset,u.subSizes[0]),g=f.a.Utils.dataViewToString(p,r.default.UTF8),m=[],y=u.offset+u.subSizes[0];for(o=1;o<u.subSizes.length;o++){var v=new Uint8Array(t,y,u.subSizes[o]),b=String.fromCharCode.apply(null,v);m.push(b),y+=u.subSizes[o]}try{var T=O.getValue(),S=d.parse(g,T.ttmlTimeIsRelative?l/E:0,l/E,(l+u.duration)/E,m);L.addCaptions(w,c,S)}catch(A){_.removeExecutedRequestsBeforeTime(),this.remove(),n.error("TTML parser error: "+A.message)}}}(t,s,a):function(t,r){var i,a,s,o=[];for(i=0;i<r.length;i++){var u=r[i];u.cts-=S;var l=X()+u.cts/E;e.buffered.add(l,l+u.duration/E);var c=t.slice(u.offset,u.offset+u.size),d=f.a.parseBuffer(c);for(a=0;a<d.boxes.length;a++){var h=d.boxes[a];if(n.debug("VTT box1: "+h.type),"vtte"!==h.type&&"vttc"===h.type)for(n.debug("VTT vttc boxes.length = "+h.boxes.length),s=0;s<h.boxes.length;s++){var p=h.boxes[s];if(n.debug("VTT box2: "+p.type),"payl"===p.type){var g=p.cue_text;n.debug("VTT cue_text = "+g);var m=u.cts/E,y=(u.cts+u.duration)/E;o.push({start:m,end:y,data:g,styles:{}}),n.debug("VTT "+m+"-"+y+" : "+g)}}}}o.length>0&&L.addCaptions(w,0,o)}(t,s)}}(t,a,l):o===r.default.VIDEO?function(t,e){var r,a;if(e.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE)0===x&&(x=u.getMediaTimescaleFromMoov(t));else if(e.segmentType===i.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===x)return void n.warn("CEA-608: No timescale for embeddedTextTrack yet");var s=(a=u.getSamplesInfo(t)).lastSequenceNumber;if(D[0]||D[1]||function(){for(var t,e=0;e<A.length;e++){if(-1===(t=L.getTrackIdxForId(A[e].id)))return void n.warn("CEA-608: data before track is ready.");var r=q(t);D[e]=new p.a.Cea608Parser(e+1,{newCue:r},null)}}(),x){if(null!==C&&s!==C+a.numSequences)for(r=0;r<D.length;r++)D[r]&&D[r].reset();for(var o=function(t,e){if(0===e.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(t),i=0;i<e.length;i++)for(var a=e[i],s=p.a.findCea608Nalus(r,a.offset,a.size),o=null,u=0,l=0;l<s.length;l++)for(var c=p.a.extractCea608DataFromRange(r,s[l]),d=0;d<2;d++)if(c[d].length>0){a.cts!==o?u=0:u+=1;var f=X();n.fields[d].push([a.cts+f*x,c[d],u]),o=a.cts}return n.fields.forEach((function(t){t.sort((function(t,e){return t[0]===e[0]?t[2]-e[2]:t[0]-e[0]}))})),n}(t,a.sampleList),l=0;l<D.length;l++){var c=o.fields[l],d=D[l];if(d)for(r=0;r<c.length;r++)d.addData(c[r][0]/x,c[r][1])}C=s}}}(t,a):function(t,n,i){var a,s,o=new DataView(t,0,t.byteLength);s=f.a.Utils.dataViewToString(o,r.default.UTF8);try{a=K(i).parse(s,0),L.addCaptions(L.getCurrentTrackIdx(),0,a),e.buffered&&e.buffered.add(n.start,n.end)}catch(u){R.error(new y.default(v.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,v.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+u.message,s))}}(t,a,l):n.error("No text type defined")}function q(t){return function(e,n,r){var i;(i=M.getTTMLRenderingDiv()?I.createHTMLCaptionsFromScreen(M.getElement(),e,n,r):[{start:e,end:n,data:r.getDisplayText(),styles:{}}])&&L.addCaptions(t,0,i)}}function X(){return isNaN(e.timestampOffset)?0:e.timestampOffset}function K(t){var e;return t.search(r.default.VTT)>=0?e=N:(t.search(r.default.TTML)>=0||t.search(r.default.STPP)>=0)&&(e=k),e}function W(t){A.forEach((function(e){var n=L.getTrackIdxForId(e.id);n>=0&&L.deleteCuesFromTrackIdx(n,t.from,t.to)}))}return e={initialize:function(){U||(A=[],w=null,x=0,D=[],C=null,U=!0,I=Object(c.default)(B).getInstance(),j.on(m.default.VIDEO_CHUNK_RECEIVED,H,e),j.on(m.default.BUFFER_CLEARED,W,e))},addMediaInfos:function(t,n,i){if(h=h.concat(n),t===r.default.TEXT&&n[0].isFragmented&&!n[0].isEmbedded){_=i,e.buffered=Object(o.default)(B).create(),T=P.getTracksFor(r.default.TEXT,F.id).filter((function(t){return t.isFragmented}));for(var a=P.getCurrentTrackFor(r.default.TEXT,F.id),s=0;s<T.length;s++)if(T[s]===a){Y(s);break}}for(var u=0;u<n.length;u++)G(n[u])},resetMediaInfos:function(){h=[]},getStreamId:function(){return F.id},append:z,abort:function(){},addEmbeddedTrack:function(t){if(U&&t)if(t.id===r.default.CC1||t.id===r.default.CC3){for(var e=0;e<A.length;e++)if(A[e].id===t.id)return;A.push(t)}else n.warn("Embedded track "+t.id+" not supported!")},resetEmbedded:function(){j.off(m.default.VIDEO_CHUNK_RECEIVED,H,e),j.off(m.default.BUFFER_CLEARED,W,e),L&&L.deleteAllTextTracks(),U=!1,A=[],D=[null,null],C=null},getConfig:function(){return{fragmentModel:_,fragmentedTracks:T,videoModel:M}},setCurrentFragmentedTrackIdx:Y,remove:function(t,n){void 0===t&&t===n&&(t=e.buffered.start(0),n=e.buffered.end(e.buffered.length-1)),e.buffered.remove(t,n),L.deleteCuesFromTrackIdx(w,t,n)},reset:function(){V(),h=[],u=null}},n=Object(l.default)(B).getInstance().getLogger(e),u=Object(s.default)(B).getInstance(),V(),e}_.__dashjs_factory_name="TextSourceBuffer",e.default=u.default.getClassFactory(_)},"./src/streaming/text/TextTracks.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./node_modules/imsc/src/main/js/main.js");function c(t){var e,n,o,c,d,f,h,p,g,m,y,v,_,b,E,T,S,w=this.context,A=Object(i.default)(w).getInstance(),x=t.videoModel,C=t.streamInfo;function D(t,e,n,r,i,a){var s=0,o=0;t/e>n/r?s=(o=e)/r*n:o=(s=t)/n*r;var u,l,c=0,d=0;return s/o>i?(d=o,c=o*i):(c=s,d=s/i),u=(t-c)/2,l=(e-d)/2,a?{x:u+.1*c,y:l+.1*d,w:.8*c,h:.8*d}:{x:u,y:l,w:c,h:d}}function I(t,e){var n=x.getClientWidth(),r=x.getClientHeight(),i=x.getVideoWidth(),a=x.getVideoHeight(),o=x.getVideoRelativeOffsetTop(),u=x.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var l=i/a,c=!1;t.isFromCEA608&&(l=3.5/3,c=!0);var d=D.call(this,n,r,i,a,l,c),f=d.w,v=d.h,E=d.x,S=d.y;if(f!=g||v!=m||E!=h||S!=p||e){if(h=E+u,p=S+o,g=f,m=v,y){var w=y.style;w&&(w.left=h+"px",w.top=p+"px",w.width=g+"px",w.height=m+"px",w.zIndex=_&&document[_]||b?T:null,A.trigger(s.default.CAPTION_CONTAINER_RESIZE))}var C=t.activeCues;if(C)for(var I=C.length,R=0;R<I;++R){var O=C[R];O.scaleCue(O)}}}}function R(t){var e,n,r,i,a;if(t.cellResolution){var s=[g/t.cellResolution[0],m/t.cellResolution[1]];if(t.linePadding)for(e in t.linePadding)if(t.linePadding.hasOwnProperty(e)){n=(t.linePadding[e]*s[0]).toString();for(var o=document.getElementsByClassName("spanPadding"),u=0;u<o.length;u++)o[u].style.cssText=o[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),o[u].style.cssText=o[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(t.fontSize){for(e in t.fontSize)if(t.fontSize.hasOwnProperty(e)){"%"===t.fontSize[e][0]?r=t.fontSize[e][1]/100:"c"===t.fontSize[e][0]&&(r=t.fontSize[e][1]),n=(r*s[1]).toString(),a="defaultFontSize"!==e?document.getElementsByClassName(e):document.getElementsByClassName("paragraph");for(var l=0;l<a.length;l++)a[l].style.cssText=a[l].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(t.lineHeight)for(e in t.lineHeight)if(t.lineHeight.hasOwnProperty(e)){"%"===t.lineHeight[e][0]?i=t.lineHeight[e][1]/100:"c"===t.fontSize[e][0]&&(i=t.lineHeight[e][1]),n=(i*s[1]).toString(),a=document.getElementsByClassName(e);for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}}if(t.isd){var d=document.getElementById(t.cueID);d&&y.removeChild(d),O(t)}}function O(t){if(y){var e=document.createElement("div");y.appendChild(e),E=Object(l.renderHTML)(t.isd,e,(function(e){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(e)){var i=n.exec(e),a=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(t.images[a])}if(r.test(e)){var s=r.exec(e);return"data:image/png;base64,"+t.embeddedImages[s[1]]}return null}),y.clientHeight,y.clientWidth,!1,(function(t){n.info("renderCaption :",t)}),E,!0),e.id=t.cueID,A.trigger(s.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:f})}}function P(t,e,i){var a=M(t),u=this;if(a&&Array.isArray(i)&&0!==i.length)for(var l=0;l<i.length;l++){var c=void 0,d=i[l];a.cellResolution=d.cellResolution,a.isFromCEA608=d.isFromCEA608,"html"!==d.type||!y||isNaN(d.start)||isNaN(d.end)?!d.data||isNaN(d.start)||isNaN(d.end)||(c=new o(d.start-e,d.end-e,d.data),d.styles&&(void 0!==d.styles.align&&"align"in c&&(c.align=d.styles.align),void 0!==d.styles.line&&"line"in c&&(c.line=d.styles.line),void 0!==d.styles.position&&"position"in c&&(c.position=d.styles.position),void 0!==d.styles.size&&"size"in c&&(c.size=d.styles.size)),c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&A.trigger(s.default.CAPTION_RENDERED,{currentTrackIdx:f})}):((c=new o(d.start+e,d.end+e,"")).cueHTMLElement=d.cueHTMLElement,c.isd=d.isd,c.images=d.images,c.embeddedImages=d.embeddedImages,c.cueID=d.cueID,c.scaleCue=R.bind(u),c.cellResolution=d.cellResolution,c.lineHeight=d.lineHeight,c.linePadding=d.linePadding,c.fontSize=d.fontSize,y.style.left=h+"px",y.style.top=p+"px",y.style.width=g+"px",y.style.height=m+"px",c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&(this.isd?(O(this),n.debug("Cue enter id:"+this.cueID)):(y.appendChild(this.cueHTMLElement),R.call(u,this),A.trigger(s.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},c.onexit=function(){if(y)for(var t=y.childNodes,e=0;e<t.length;++e)t[e].id===this.cueID&&(n.debug("Cue exit id:"+t[e].id),y.removeChild(t[e]),--e)});try{c?k(a,c)||a.addCue(c):n.error("impossible to display subtitles.")}catch(v){throw B(a),a.addCue(c),v}}}function M(t){return t>=0&&c[t]?x.getTextTrack(c[t].kind,c[t].id,c[t].lang,c[t].isTTML,c[t].isEmbedded):null}function L(t){var e=this;if(t!==f){var n=M(f=t);N.call(this,n),v&&(clearInterval(v),v=null),n&&"html"===n.renderingType&&(I.call(this,n,!0),window.ResizeObserver?(S=new window.ResizeObserver((function(){I.call(e,n,!0)}))).observe(x.getElement()):v=setInterval(I.bind(this,n),500))}}function N(t){V.call(this),t&&"html"===t.renderingType?j.call(this):U.call(this)}function k(t,e){if(!t.cues)return!1;for(var n=0;n<t.cues.length;n++)if(t.cues[n].startTime===e.startTime&&t.cues[n].endTime===e.endTime)return!0;return!1}function F(t,e,n){return(isNaN(e)||t.startTime>=e)&&(isNaN(n)||t.endTime<=n)}function B(t,e,n){if(t.cues)for(var r=t.cues,i=r.length-1;i>=0;i--)F(r[i],e,n)&&(r[i].onexit&&r[i].onexit(),t.removeCue(r[i]))}function j(){var t=document.getElementById("native-cue-style");if(!t){(t=document.createElement("style")).id="native-cue-style",document.head.appendChild(t);var e=t.sheet,r=x.getElement();try{r&&e.insertRule(r.id?"#"+r.id+"::cue {background: transparent}":0!==r.classList.length?"."+r.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(i){n.info(""+i.message)}}}function U(){var t=document.getElementById("native-cue-style");t&&document.head.removeChild(t)}function V(){if(y)for(;y.firstChild;)y.removeChild(y.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(o=window.VTTCue||window.TextTrackCue,c=[],d=[],f=-1,h=0,p=0,g=0,m=0,y=null,v=null,b=!1,T=2147483647,E=null,void 0!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(t){c.push(t)},addCaptions:P,createTracks:function(){c.sort((function(t,e){return t.index-e.index})),y=x.getTTMLRenderingDiv();for(var t,e=-1,n=0;n<c.length;n++){var i=x.addTextTrack((t=c[n]).kind,void 0!==t.id?t.id:t.lang,t.lang,t.isTTML,t.isEmbedded);d.push(i),c[n].defaultTrack&&(i.default=!0,e=n);var o=M(n);o&&(o.mode=r.default.TEXT_SHOWING,o.renderingType=y&&(c[n].isTTML||c[n].isEmbedded)?"html":"default"),P(n,0,c[n].captionData),A.trigger(s.default.TEXT_TRACK_ADDED)}if(L.call(this,e),e>=0){A.on(s.default.PLAYBACK_METADATA_LOADED,(function t(){var n=M(e);n&&"html"===n.renderingType&&I.call(this,n,!0),A.off(s.default.PLAYBACK_METADATA_LOADED,t,this)}),this);for(var u=0;u<c.length;u++){var l=M(u);l&&(l.mode=u===e?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}A.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:c,streamId:C.id})},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:L,getTrackIdxForId:function(t){for(var e=-1,n=0;n<c.length;n++)if(c[n].id===t){e=n;break}return e},getCurrentTrackInfo:function(){return c[f]},setModeForTrackIdx:function(t,e){var n=M(t);n&&n.mode!==e&&(n.mode=e)},deleteCuesFromTrackIdx:function(t,e,n){var r=M(t);r&&B(r,e,n)},deleteAllTextTracks:function(){for(var t=d?d.length:0,e=0;e<t;e++){var n=M(e);n&&B.call(this,n,C.start,C.start+C.duration)}d=[],c=[],v&&(clearInterval(v),v=null),S&&x&&(S.unobserve(x.getElement()),S=null),f=-1,V.call(this)},deleteTextTrack:function(t){x.removeChild(d[t]),d.splice(t,1)}},n=Object(u.default)(w).getInstance().getLogger(e),e}c.__dashjs_factory_name="TextTracks",e.default=o.default.getClassFactory(c)},"./src/streaming/thumbnail/ThumbnailController.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/vo/Thumbnail.js"),s=n("./src/streaming/thumbnail/ThumbnailTracks.js"),o=n("./src/streaming/vo/BitrateInfo.js"),u=n("./src/dash/utils/SegmentsUtils.js");function l(t){var e,n,r=this.context,l=t.streamInfo;function c(t){n.setTrackByIndex(t)}function d(){n&&n.reset()}return e={getStreamId:function(){return l.id},initialize:function(){n.addTracks();var t=n.getTracks();t&&t.length>0&&c(0)},provide:function(t,e){if("function"==typeof e){var r,i=n.getCurrentTrack();if(!i||i.segmentDuration<=0||null==t)e(null);else{(r=n.getThumbnailRequestForTime(t))&&(i.segmentDuration=r.duration);var s=Math.floor(t%i.segmentDuration*i.tilesHor*i.tilesVert/i.segmentDuration),o=new a.default;if(o.width=Math.floor(i.widthPerTile),o.height=Math.floor(i.heightPerTile),o.x=Math.floor(s%i.tilesHor)*i.widthPerTile,o.y=Math.floor(s/i.tilesHor)*i.heightPerTile,"readThumbnail"in i)return i.readThumbnail(t,(function(t){o.url=t,e(o)}));if(r)o.url=r.url,i.segmentDuration=NaN;else{var l=Math.floor(t/i.segmentDuration);o.url=function(t,e){var n=e+t.startNumber,r=Object(u.replaceTokenForTemplate)(t.templateUrl,"Number",n);return r=Object(u.replaceTokenForTemplate)(r,"Time",(n-1)*t.segmentDuration*t.timescale),r=Object(u.replaceTokenForTemplate)(r,"Bandwidth",t.bandwidth),Object(u.unescapeDollarsInTemplate)(r)}(i,l)}e(o)}}},setTrackByIndex:c,getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var t=n.getTracks(),e=0;return t.map((function(t){var n=new o.default;return n.mediaType=i.default.IMAGE,n.qualityIndex=e++,n.bitrate=t.bitrate,n.width=t.width,n.height=t.height,n}))},reset:d},d(),n=Object(s.default)(r).create({streamInfo:l,adapter:t.adapter,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:t.debug,eventBus:t.eventBus,events:t.events,dashConstants:t.dashConstants,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController}),e}l.__dashjs_factory_name="ThumbnailController",e.default=r.default.getClassFactory(l)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(t,e,n){"use strict";n.r(e),n.d(e,"THUMBNAILS_SCHEME_ID_URIS",(function(){return h}));var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/ThumbnailTrackInfo.js"),o=n("./src/streaming/utils/URLUtils.js"),u=n("./src/dash/utils/SegmentsUtils.js"),l=n("./src/streaming/utils/BoxParser.js"),c=n("./src/streaming/net/XHRLoader.js"),d=n("./src/dash/DashHandler.js"),f=n("./src/dash/controllers/SegmentsController.js"),h=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(t){var e,n,a,p,g,m,y,v,_=this.context,b=t.adapter,E=t.baseURLController,T=t.streamInfo,S=t.timelineConverter,w=t.debug,A=t.eventBus,x=t.events,C=t.dashConstants,D=Object(o.default)(_).getInstance();function I(t,e){var r=new s.default;r.id=t.id,r.bitrate=t.bandwidth,r.width=t.width,r.height=t.height,r.tilesHor=1,r.tilesVert=1,t.essentialProperties&&t.essentialProperties.forEach((function(t){if(h.indexOf(t.schemeIdUri)>=0&&t.value){var e=t.value.split("x");2!==e.length||isNaN(e[0])||isNaN(e[1])||(r.tilesHor=parseInt(e[0],10),r.tilesVert=parseInt(e[1],10))}})),e?m.updateSegmentData(t).then((function(e){!function(t,e,n){var r=[],i=function(t,e){var n,r,i,a,s=[],o=0;for(n=0,r=t.segments.length;n<r;n++)i=t.segments[n],(a=Object(u.getTimeBasedSegment)(S,b.getIsDynamic(),e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,o))&&(s.push(a),a=null,o++);return s}(n,e);e.segments=i,t.segmentDuration=e.segments[0].duration,t.readThumbnail=function(t,n){var i=null;r.some((function(e){if(e.start<=t&&e.end>t)return i=e.url,!0})),i?n(i):e.segments.some((function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var a=E.resolve(e.path);return y.load({method:"get",url:a.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(t){var e=v.getSamplesInfo(t.target.response),a=new Blob([t.target.response.slice(e.sampleList[0].offset,e.sampleList[0].offset+e.sampleList[0].size)],{type:"image/jpeg"}),s=window.URL.createObjectURL(a);r.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:s}),n&&n(s)}}),!0}}))}}(r,t,e)})):(r.startNumber=t.startNumber,r.segmentDuration=t.segmentDuration,r.timescale=t.timescale,r.templateUrl=function(t){var e=D.isRelative(t.media)?D.resolve(t.media,E.resolve(t.path).url):t.media;return e?Object(u.replaceIDForTemplate)(e,t.id):""}(t)),r.tilesHor>0&&r.tilesVert>0&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,n.push(r))}function R(){n=[],p=-1,g=null}return e={getTracks:function(){return n},addTracks:function(){if(T&&b&&(g=b.getMediaInfoForType(T,r.default.IMAGE))){var t=b.getVoRepresentations(g);t&&t.length>0&&t.forEach((function(t){(t.segmentInfoType===i.default.SEGMENT_TEMPLATE&&t.segmentDuration>0&&t.media||t.segmentInfoType===i.default.SEGMENT_TIMELINE)&&I(t),t.segmentInfoType===i.default.SEGMENT_BASE&&I(t,!0)})),n.length>0&&n.sort((function(t,e){return t.bitrate-e.bitrate}))}},reset:R,setTrackByIndex:function(t){n&&0!==n.length&&(t>=n.length&&(t=n.length-1),p=t)},getCurrentTrack:function(){return p<0?null:n[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(t){for(var e,r=b.getVoRepresentations(g),i=0;i<r.length;i++)if(n[p].id===r[i].id){e=r[i];break}return a.getSegmentRequestForTime(g,e,t)}},R(),y=Object(c.default)(_).create({}),v=Object(l.default)(_).getInstance(),m=Object(f.default)(_).create({events:x,eventBus:A,streamInfo:T,timelineConverter:S,dashConstants:C,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController,type:r.default.IMAGE}),(a=Object(d.default)(_).create({streamInfo:T,type:r.default.IMAGE,timelineConverter:S,segmentsController:m,baseURLController:E,debug:w,eventBus:A,events:x,dashConstants:C,urlUtils:D})).initialize(!!b&&b.getIsDynamic()),e}p.__dashjs_factory_name="ThumbnailTracks",e.default=a.default.getClassFactory(p)},"./src/streaming/utils/BaseURLSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/errors/Errors.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/streaming/controllers/BlacklistController.js"),o=n("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),u=n("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/DashJSError.js"),d=n("./src/streaming/utils/SupervisorTools.js");function f(){var t,e,n,l,f,h=this.context,p=Object(i.default)(h).getInstance();function g(){e.reset()}return t={chooseSelector:function(t){Object(d.checkParameterType)(t,"boolean"),f=t?l:n},select:function(t){if(t){var e=t.baseUrls,i=t.selectedIdx;if(!isNaN(i))return e[i];var s=f.select(e);return s?(t.selectedIdx=e.indexOf(s),s):(p.trigger(a.default.URL_RESOLUTION_FAILED,{error:new c.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(f===n&&g()))}},reset:g,setConfig:function(t){t.selector&&(f=t.selector)}},e=Object(s.default)(h).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),n=Object(u.default)(h).create({blacklistController:e}),l=Object(o.default)(h).create({blacklistController:e}),f=n,t}f.__dashjs_factory_name="BaseURLSelector",e.default=l.default.getClassFactory(f)},"./src/streaming/utils/BoxParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/Debug.js"),i=n("./src/streaming/utils/IsoFile.js"),a=n("./src/core/FactoryMaker.js"),s=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),o=n.n(s),u=n("./src/streaming/vo/IsoBoxSearchInfo.js");function l(){var t,e,n=this.context;function a(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);var e=o.a.parseBuffer(t),r=Object(i.default)(n).create();return r.setData(e),r}function s(t,e){return t[e+3]>>>0|t[e+2]<<8>>>0|t[e+1]<<16>>>0|t[e]<<24>>>0}function l(t,e){return String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e])}return e={parse:a,findLastTopIsoBoxCompleted:function(t,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new u.default(0,!1);for(var r,i=e instanceof ArrayBuffer?new Uint8Array(e):e,a=0;n<i.byteLength;){var o=s(i,n),c=l(i,n+4);if(0===o)break;n+o<=i.byteLength&&(t.indexOf(c)>=0?r=new u.default(n,!0,o):a=n+o),n+=o}return r||new u.default(a,!1)},getMediaTimescaleFromMoov:function(t){var e=a(t),n=e?e.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var e,n,r,i,s,o,u,l,c,d,f,h,p,g,m,y,v=a(t),_=v.getBoxes("moof"),b=v.getBoxes("mfhd");m=v.getBoxes("moof").length,g=b[b.length-1].sequence_number,n=0,s=[];var E=-1,T=-1;for(d=0;d<_.length;d++){var S=_[d],w=S.getChildBoxes("traf");for(l=0;l<w.length;l++){var A=w[l],x=A.getChildBox("tfhd"),C=A.getChildBox("tfdt");i=C.baseMediaDecodeTime;var D=A.getChildBoxes("trun"),I=A.getChildBoxes("subs");for(c=0;c<D.length;c++){var R=D[c];for(n=R.sample_count,p=(x.base_data_offset||0)+(R.data_offset||0),u=0;u<n;u++){var O={dts:i,cts:i+(void 0!==(o=R.samples[u]).sample_composition_time_offset?o.sample_composition_time_offset:0),duration:e=void 0!==o.sample_duration?o.sample_duration:x.default_sample_duration,offset:S.offset+p,size:r=void 0!==o.sample_size?o.sample_size:x.default_sample_size,subSizes:[r]};if(I)for(f=0;f<I.length;f++){var P=I[f];if(E<P.entry_count-1&&u>T&&(E++,T+=P.entries[E].sample_delta),u==T){O.subSizes=[];var M=P.entries[E];for(h=0;h<M.subsample_count;h++)O.subSizes.push(M.subsamples[h].subsample_size)}}s.push(O),p+=r,i+=e}}y=i-C.baseMediaDecodeTime}}return{sampleList:s,lastSequenceNumber:g,totalDuration:y,numSequences:m}},findInitRange:function(e){var n=null,r=a(e);if(!r)return n;var i=r.getBox("ftyp"),s=r.getBox("moov");return t.debug("Searching for initialization."),s&&s.isComplete&&t.debug("Found the initialization.  Range: "+(n=(i?i.offset:s.offset)+"-"+(s.offset+s.size-1))),n},parsePayload:function(t,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new u.default(0,!1);for(var r,i=e instanceof ArrayBuffer?new Uint8Array(e):e,a=0;n<i.byteLength;){var o=s(i,n),c=l(i,n+4);if(0===o)break;n+o<=i.byteLength&&(t.indexOf(c)>=0?r=new u.default(n,!0,o,c):a=n+o),n+=o}return r||new u.default(a,!1)}},t=Object(r.default)(n).getInstance().getLogger(e),e}l.__dashjs_factory_name="BoxParser",e.default=a.default.getSingletonFactory(l)},"./src/streaming/utils/Capabilities.js":function(t,e,n){"use strict";n.r(e),n.d(e,"supportsMediaSource",(function(){return o}));var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/thumbnail/ThumbnailTracks.js"),a=n("./src/streaming/constants/Constants.js"),s=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function o(){var t="WebKitMediaSource"in window,e="MediaSource"in window;return t||e}function u(){var t,e,n;return t={setConfig:function(t){t&&t.settings&&(e=t.settings)},supportsMediaSource:o,supportsEncryptedMedia:function(){return n},supportsCodec:function(t,n){return n!==a.default.AUDIO&&n!==a.default.VIDEO?Promise.resolve(!0):function(t,n){return e.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(t.codec&&n===a.default.AUDIO||n===a.default.VIDEO&&t.codec&&t.width&&t.height&&t.bitrate&&t.framerate)}(t,n)?function(t,e){return new Promise((function(n){if(t&&t.codec){var r={type:"media-source"};r[e]={},r[e].contentType=t.codec,r[e].width=t.width,r[e].height=t.height,r[e].bitrate=parseInt(t.bitrate),r[e].framerate=parseFloat(t.framerate),navigator.mediaCapabilities.decodingInfo(r).then((function(t){n(t.supported)})).catch((function(){n(!1)}))}else n(!1)}))}(t,n):function(t){return new Promise((function(e){if(t&&t.codec){var n=t.codec;t.width&&t.height&&(n+=';width="'+t.width+'";height="'+t.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(n)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(n)?e(!0):e(!1)}else e(!1)}))}(t)},setEncryptedMediaSupported:function(t){n=t},supportsEssentialProperty:function(t){try{return-1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(t.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(t,e){for(var n,r=t.split(".")[0],i=0===e.indexOf(r),a=0;a<s.length;a++)if(s[a].codec===r){n=s[a];break}return n?i||n.compatibleCodecs.some((function(t){return 0===e.indexOf(t)})):i}},n=!1,t}u.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(u)},"./src/streaming/utils/CapabilitiesFilter.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js");function s(){var t,e,n,r,s,o,u=this.context;function l(t,r){if(!r||!r.Period_asArray||0===r.Period_asArray.length)return Promise.resolve();var i=[];return r.Period_asArray.forEach((function(r){i.push(function(t,r){return new Promise((function(i){if(t&&t.AdaptationSet_asArray&&0!==t.AdaptationSet_asArray.length){var o=[];t.AdaptationSet_asArray.forEach((function(t){e.getIsTypeOf(t,r)&&o.push(function(t,r){return new Promise((function(i){if(t.Representation_asArray&&0!==t.Representation_asArray.length){var o=[],u=[];t.Representation_asArray.forEach((function(i,s){var l=e.getCodec(t,s,!1),c=function(t,e,n){switch(t){case a.default.VIDEO:return function(t,e){return{codec:e,width:t.width||null,height:t.height||null,framerate:t.frameRate||null,bitrate:t.bandwidth||null}}(e,n);case a.default.AUDIO:return function(t,e){return{codec:e,bitrate:t.bandwidth||null,samplerate:t.audioSamplingRate||null}}(e,n);default:return null}}(r,i,l);u.push(c),o.push(n.supportsCodec(c,r))})),Promise.all(o).then((function(e){t.Representation_asArray=t.Representation_asArray.filter((function(t,n){return e[n]||s.debug("[Stream] Codec ".concat(u[n].codec," not supported ")),e[n]})),i()})).catch((function(){i()}))}else i()}))}(t,r))})),Promise.all(o).then((function(){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){var e=t.Representation_asArray&&t.Representation_asArray.length>0;return e||s.warn("AdaptationSet has been removed because of no supported Representation"),e})),i()})).catch((function(){i()}))}else i()}))}(r,t))})),Promise.all(i)}return t={setConfig:function(t){t&&(t.adapter&&(e=t.adapter),t.capabilities&&(n=t.capabilities),t.settings&&(r=t.settings))},filterUnsupportedFeatures:function(t){return new Promise((function(i){var u=[];u.push(l(a.default.VIDEO,t)),u.push(l(a.default.AUDIO,t)),Promise.all(u).then((function(){r.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(t){t&&t.Period_asArray&&0!==t.Period_asArray.length&&t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){var r=e.getEssentialPropertiesForRepresentation(t);if(r&&r.length>0)for(var i=0;i<r.length;){if(!n.supportsEssentialProperty(r[i]))return s.debug("[Stream] EssentialProperty not supported: "+r[i].schemeIdUri),!1;i+=1}return!0})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),function(t){o&&0!==o.length&&t&&t.Period_asArray&&0!==t.Period_asArray.length&&t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){return!o.some((function(e){return!e(t)}))})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),i()})).catch((function(){i()}))}))},setCustomCapabilitiesFilters:function(t){o=t}},s=Object(i.default)(u).getInstance().getLogger(t),t}s.__dashjs_factory_name="CapabilitiesFilter",e.default=r.default.getSingletonFactory(s)},"./src/streaming/utils/CustomTimeRanges.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/SupervisorTools.js");function a(){return{customTimeRangeArray:[],length:0,add:function(t,e){var n=0;for(n=0;n<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:t,end:e}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(t,e){for(var n=0;n<this.customTimeRangeArray.length;n++)if(t<=this.customTimeRangeArray[n].start&&e>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(t>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:e,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=t;break}t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=t:e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=e)}this.length=this.customTimeRangeArray.length},mergeRanges:function(t,e){var n=this.customTimeRangeArray[t],r=this.customTimeRangeArray[e];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(e,1),!0)},start:function(t){return Object(i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return Object(i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}a.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(a)},"./src/streaming/utils/DOMStorage.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}];function o(t){var e,n,r,o=this.context,u=(t=t||{}).settings;function l(t){if(void 0!==r)return r;var e;r=!1;try{"undefined"!=typeof window&&(e=window[t])}catch(i){return n.warn("DOMStorage access denied: "+i.message),r}if(!e||"localStorage"!==t&&"sessionStorage"!==t)return r;try{e.setItem("1","1"),e.removeItem("1"),r=!0}catch(i){n.warn("DOMStorage is supported, but cannot be used: "+i.message)}return r}function c(){return 6e5*Math.round((new Date).getTime()/6e5)}function d(t,e){return l(t)&&u.get().streaming[e+"CachingInfo"].enabled}function f(){if(!u)throw new Error(a.default.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(t){var e=NaN;if(f(),d("localStorage","lastBitrate")){var r="dashjs_?_bitrate".replace(/\?/,t);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=u.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(i.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(e=s,n.debug("Last saved bitrate for "+t+" was "+s))}catch(o){return null}}return e},setSavedBitrateSettings:function(t,e){if(d("localStorage","lastBitrate")&&e){var r="dashjs_?_bitrate".replace(/\?/,t);try{localStorage.setItem(r,JSON.stringify({bitrate:e.toFixed(3),timestamp:c()}))}catch(i){n.error(i.message)}}},getSavedMediaSettings:function(t){var e=null;if(f(),d("localStorage","lastMediaSettings")){var n="dashjs_?_settings".replace(/\?/,t);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=u.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;e=r.settings,i&&(localStorage.removeItem(n),e=null)}catch(a){return null}}return e},setSavedMediaSettings:function(t,e){if(d("localStorage","lastMediaSettings")){var r="dashjs_?_settings".replace(/\?/,t);try{localStorage.setItem(r,JSON.stringify({settings:e,timestamp:c()}))}catch(i){n.error(i.message)}}}},n=Object(i.default)(o).getInstance().getLogger(e),l("localStorage")&&s.forEach((function(t){var e=localStorage.getItem(t.oldKey);if(e){localStorage.removeItem(t.oldKey);try{localStorage.setItem(t.newKey,e)}catch(r){n.error(r.message)}}})),e}o.__dashjs_factory_name="DOMStorage";var u=r.default.getSingletonFactory(o);e.default=u},"./src/streaming/utils/DefaultURLUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t,e=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,a=function(t,e){try{return new window.URL(t,e).toString()}catch(n){return t}},s=function(t,e){var n=o;if(!e)return t;if(!c(t))return t;d(t)&&(n=u),f(t)&&(n=l);var r=n(e),i="/"!==r.charAt(r.length-1)&&"/"!==t.charAt(0)?"/":"";return[r,t].join(i)};function o(t){var e=t.indexOf("/"),n=t.lastIndexOf("/");return-1!==e?n===e+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,n+1)):""}function u(t){var e=t.match(i);return e?e[1]:""}function l(t){var n=t.match(e);return n?n[0]:""}function c(t){return!e.test(t)}function d(t){return c(t)&&"/"===t.charAt(0)}function f(t){return 0===t.indexOf("//")}return function(){try{new window.URL("x","http://y"),t=a}catch(e){}finally{t=t||s}}(),{parseBaseUrl:o,parseOrigin:u,parseScheme:l,isRelative:c,isPathAbsolute:d,isSchemeRelative:f,isHTTPURL:function(t){return n.test(t)},isHTTPS:function(t){return r.test(t)},removeHostname:function(t){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t)[2].substring(1)},resolve:function(e,n){return t(e,n)}}}i.__dashjs_factory_name="DefaultURLUtils",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/EBMLParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e;t=t||{};var n=new DataView(t.data),r=0;function i(t,e){var i=!0,a=0;if(void 0===e&&(e=!1),t.tag>16777215?(n.getUint32(r)!==t.tag&&(i=!1),a=4):t.tag>65535?(256*n.getUint16(r)+n.getUint8(r+2)!==t.tag&&(i=!1),a=3):t.tag>255?(n.getUint16(r)!==t.tag&&(i=!1),a=2):(n.getUint8(r)!==t.tag&&(i=!1),a=1),!i&&t.required&&!e)throw new Error("required tag not found");return i&&(r+=a),i}function a(t){var e=1,i=128,a=-1,s=0,o=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((o&i)===i){s=void 0===t?o&~i:o,a=u;break}i>>=1}for(u=0;u<a;u+=1,e+=1)s=s<<8|255&n.getUint8(r+e);return r+=e,s}return e={getPos:function(){return r},setPos:function(t){r=t},consumeTag:i,consumeTagAndSize:function(t,e){var n=i(t,e);return n&&a(),n},parseTag:function(t){var n;return i(t),n=a(),e[t.parse](n)},skipOverElement:function(t,e){var n,s=i(t,e);return s&&(n=a(),r+=n),s},getMatroskaCodedNum:a,getMatroskaFloat:function(t){var e;switch(t){case 4:e=n.getFloat32(r),r+=4;break;case 8:e=n.getFloat64(r),r+=8}return e},getMatroskaUint:function(t){for(var e=0,i=0;i<t;i+=1)e<<=8,e|=255&n.getUint8(r+i);return r+=t,e},moreData:function(){return r<n.byteLength}}}i.__dashjs_factory_name="EBMLParser",e.default=r.default.getClassFactory(i)},"./src/streaming/utils/ErrorHandler.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function s(){var t=this.context,e=Object(r.default)(t).getInstance();return{error:function(t){e.trigger(i.default.ERROR,{error:t})}}}s.__dashjs_factory_name="ErrorHandler",e.default=a.default.getSingletonFactory(s)},"./src/streaming/utils/InitCache.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){var t={};return{save:function(e){var n=e.streamId,r=e.representationId;t[n]=t[n]||{},t[n][r]=e},extract:function(e,n){return t&&t[e]&&t[e][n]?t[e][n]:null},reset:function(){t={}}}}i.__dashjs_factory_name="InitCache",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/IsoFile.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/IsoBox.js"),i=n("./src/core/FactoryMaker.js");function a(){var t;function e(e){var r=[];if(!e||!t||"function"!=typeof t.fetchAll)return r;for(var i,a=t.fetchAll(e),s=0,o=a.length;s<o;s++)(i=n(a[s]))&&r.push(i);return r}function n(t){if(!t)return null;var e=new r.default(t);return t.hasOwnProperty("_incomplete")&&(e.isComplete=!t._incomplete),e}return{getBox:function(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"==typeof t.fetch?n(t.fetch(e)):null},getBoxes:e,setData:function(e){t=e},getLastBox:function(){if(!t||!t.boxes||!t.boxes.length)return null;var n=e(t.boxes[t.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}a.__dashjs_factory_name="IsoFile",e.default=i.default.getClassFactory(a)},"./src/streaming/utils/ObjectUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./node_modules/fast-deep-equal/index.js"),a=n.n(i);function s(){return{areEqual:function(t,e){return a()(t,e)}}}s.__dashjs_factory_name="ObjectUtils",e.default=r.default.getSingletonFactory(s)},"./src/streaming/utils/RequestModifier.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(){return{modifyRequestURL:function(t){return t},modifyRequestHeader:function(t){return t}}}i.__dashjs_factory_name="RequestModifier",e.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/SupervisorTools.js":function(t,e,n){"use strict";n.r(e),n.d(e,"checkParameterType",(function(){return a})),n.d(e,"checkInteger",(function(){return s})),n.d(e,"checkRange",(function(){return o})),n.d(e,"checkIsVideoOrAudioType",(function(){return u}));var r=n("./src/streaming/constants/Constants.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(i(t)!==e)throw r.default.BAD_ARGUMENT_ERROR}function s(t){if(null===t||isNaN(t)||t%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function o(t,e,n){if(t<e||t>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(t){if("string"!=typeof t||t!==r.default.AUDIO&&t!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./node_modules/imsc/src/main/js/main.js"),u=n("./src/streaming/MediaPlayerEvents.js"),l=n("./src/streaming/constants/ConformanceViolationConstants.js");function c(){var t,e,n=this.context,r=Object(a.default)(n).getInstance(),c=0;return t={parse:function(t,n,i,a,d){var f,h,p,g="",m=[],y={},v={},_="",b="",E={onOpenTag:function(t,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(r.trigger(u.default.CONFORMANCE_VIOLATION,{level:l.default.LEVELS.ERROR,event:l.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===t||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===t)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void e.warn("smpte-tt imageType != PNG. Discarded");_=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){_&&(v[_]=b.trim()),b="",_=""},onText:function(t){_&&(b+=t)}};if(!t)throw g="no ttml data to parse",new Error(g);y.data=t,r.trigger(s.default.TTML_TO_PARSE,y);var T=Object(o.fromXML)(y.data,(function(t){g=t}),E);r.trigger(s.default.TTML_PARSED,{ttmlString:y.data,ttmlDoc:T});var S,w=T.getMediaTimeEvents();for(p=0;p<w.length;p++){var A=Object(o.generateISD)(T,w[p],(function(t){g=t}));A.contents.some((function(t){return t.contents.length}))&&(f=w[p]+n<i?i:w[p]+n)<(h=w[p+1]+n>a?a:w[p+1]+n)&&m.push({start:f,end:h,type:"html",cueID:(S="cue_TTML_"+c,c++,S),isd:A,images:d,embeddedImages:v})}if(""!==g)throw e.error(g),new Error(g);return m}},e=Object(i.default)(n).getInstance().getLogger(t),t}c.__dashjs_factory_name="TTMLParser",e.default=r.default.getSingletonFactory(c)},"./src/streaming/utils/URLUtils.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/DefaultURLUtils.js");function a(){var t,e=[],n=this.context;function r(n,r,i){var a=function(n){var r;for(r=0;r<e.length;r++)if(e[r].regex.test(n))return e[r].utils;return t}(i||r);return a&&"function"==typeof a[n]?a[n](r,i):t[n](r,i)}return t=Object(i.default)(n).getInstance(),{registerUrlRegex:function(t,n){e.push({regex:t,utils:n})},parseBaseUrl:function(t){return r("parseBaseUrl",t)},parseOrigin:function(t){return r("parseOrigin",t)},parseScheme:function(t){return r("parseScheme",t)},isRelative:function(t){return r("isRelative",t)},isPathAbsolute:function(t){return r("isPathAbsolute",t)},isSchemeRelative:function(t){return r("isSchemeRelative",t)},isHTTPURL:function(t){return r("isHTTPURL",t)},isHTTPS:function(t){return r("isHTTPS",t)},removeHostname:function(t){return r("removeHostname",t)},resolve:function(t,e){return r("resolve",t,e)}}}a.__dashjs_factory_name="URLUtils";var s=r.default.getSingletonFactory(a);e.default=s},"./src/streaming/utils/VTTParser.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var t,e,n,r,a,s,o=this.context;function u(t){var e=t.split(":"),n=e.length-1;return t=60*parseInt(e[n-1],10)+parseFloat(e[n]),2===n&&(t+=3600*parseInt(e[0],10)),t}function l(t){var e=t.split(r),n=e[1].split(s);return n.shift(),e[1]=n[0],n.shift(),{cuePoints:e,styles:c(n)}}function c(t){var e={};return t.forEach((function(t){if(t.split(/:/).length>1){var n=t.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(t.match(/align/)||t.match(/A/))&&(e.align=n),(t.match(/line/)||t.match(/L/))&&(e.line=n),(t.match(/position/)||t.match(/P/))&&(e.position=n),(t.match(/size/)||t.match(/S/))&&(e.size=n)}})),e}function d(t,e){for(var n,i=e,a="",s="";""!==t[i]&&i<t.length;)i++;if((n=i-e)>1)for(var o=0;o<n;o++){if((s=t[e+o]).match(r)){a="";break}a+=s,o!==n-1&&(a+="\n")}else(s=t[e]).match(r)||(a=s);return a}return t={parse:function(t){var i,s,o=[];if(!t)return o;i=(t=t.split(n)).length,s=-1;for(var c=0;c<i;c++){var f=t[c];if(f.length>0&&"WEBVTT"!==f&&f.match(r)){var h=l(f),p=h.cuePoints,g=h.styles,m=d(t,c+1),y=u(p[0].replace(a,"")),v=u(p[1].replace(a,""));!isNaN(y)&&!isNaN(v)&&y>=s&&v>y?""!==m?(s=y,o.push({start:y,end:v,data:m,styles:g})):e.error("Skipping cue due to empty/malformed cue text"):e.error("Skipping cue due to incorrect cue timing")}}return o}},e=Object(i.default)(o).getInstance().getLogger(t),n=/(?:\r\n|\r|\n)/gm,r=/-->/,a=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,t}a.__dashjs_factory_name="VTTParser",e.default=r.default.getSingletonFactory(a)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).blacklistController;return{select:function(t){var n,r=0;return t&&t.some((function(t,n){return r=n,!e.contains(t.serviceLocation)}))&&(n=t[r]),n}}}i.__dashjs_factory_name="BasicSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/FactoryMaker.js");function i(t){var e=(t=t||{}).blacklistController;return{select:function(t){return t&&function(t){var e,n,r=0,i=[],a=0;if((n=t.sort((function(t,e){var n=t.dvb_priority-e.dvb_priority;return isNaN(n)?0:n})).filter((function(t,e,n){return!e||n[0].dvb_priority&&t.dvb_priority&&n[0].dvb_priority===t.dvb_priority}))).length)return n.length>1&&(n.forEach((function(t){i.push(r+=t.dvb_weight)})),e=Math.floor(Math.random()*(r-1)),i.every((function(t,n){return a=n,!(e<t)}))),n[a]}((n=[],t.filter((function(t){return!e.contains(t.serviceLocation)||(t.dvb_priority&&n.push(t.dvb_priority),!1)})).filter((function(t){return!n.length||!t.dvb_priority||-1===n.indexOf(t.dvb_priority)}))));var n}}}i.__dashjs_factory_name="DVBSelector",e.default=r.default.getClassFactory(i)},"./src/streaming/vo/BitrateInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=e||null,this.message=n||null,this.data=r||null}},"./src/streaming/vo/DataChunk.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/metrics/HTTPRequest.js");var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=t.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var e;return(e=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(t){this.type=t&&t.init?r.HTTPRequest.INIT_SEGMENT_TYPE:r.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=t&&t.url?t.url:null,this.range=t&&t.range?t.range.start+"-"+t.range.end:null,this.mediaType=t&&t.mediaType?t.mediaType:null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",e.default=i},"./src/streaming/vo/HeadRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/vo/FragmentRequest.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).checkForExistenceOnly=!0,e}return i}(r.default)},"./src/streaming/vo/IsoBox.js":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var n=0;n<e.boxes.length;n++)this.boxes.push(new t(e.boxes[n]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var r=0;r<e.references.length;r++)this.references.push({reference_type:e.references[r].reference_type,referenced_size:e.references[r].referenced_size,subsegment_duration:e.references[r].subsegment_duration})}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var i=0,a=e.samples.length;i<a;i++)this.samples.push({sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset})}}}var e;return(e=[{key:"getChildBox",value:function(t){for(var e=0;e<this.boxes.length;e++)if(this.boxes[e].type===t)return this.boxes[e]}},{key:"getChildBoxes",value:function(t){for(var e=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===t&&e.push(this.boxes[n]);return e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastCompletedOffset=e,this.found=n,this.size=r}},"./src/streaming/vo/MetricsList.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/FragmentRequest.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(a,t);var e,n,i=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).url=t||null,n.type=e||null,n.mediaType=r.default.STREAM,n.responseType="",n}return a}(i.default)},"./src/streaming/vo/TextTrackInfo.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/dash/vo/MediaInfo.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.default=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).captionData=null,t.label=null,t.defaultTrack=!1,t.kind=null,t.isFragmented=!1,t.isEmbedded=!1,t.isTTML=null,t}return i}(r.default)},"./src/streaming/vo/Thumbnail.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/streaming/constants/MetricsConstants.js");e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=null,this.state=r.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"HTTPRequest",(function(){return i})),n.d(e,"HTTPRequestTrace",(function(){return a}));var i=function t(){r(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null},a=function t(){r(this,t),this.s=null,this.d=null,this.b=[],this.t=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.LICENSE="license",i.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"ManifestUpdate",(function(){return i})),n.d(e,"ManifestUpdateStreamInfo",(function(){return a})),n.d(e,"ManifestUpdateRepresentationInfo",(function(){return s}));var i=function t(){r(this,t),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},a=function t(){r(this,t),this.id=null,this.index=null,this.start=null,this.duration=null},s=function t(){r(this,t),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,"PlayList",(function(){return i})),n.d(e,"PlayListTrace",(function(){return a}));var i=function t(){r(this,t),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function t(){r(this,t),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(t,e,n){"use strict";n.r(e),e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(t,e){},1:function(t,e){}}).default},t.exports=r()},"c4+4":function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var r=n(5),i=n(1),a=i.toHex,s=i.ceilHeapSize,o=n(6),u=function(t){for(t+=9;t%64>0;t+=1);return t},l=function(t,e){var n=new Int32Array(t,e+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=e,this._padMaxChunkLen=u(e),this._heap=new ArrayBuffer(s(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new r({Int32Array},{},this._heap)}return t.prototype._initState=function(t,e){this._offset=0;var n=new Int32Array(t,e+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},t.prototype._padChunk=function(t,e){var n=u(t),r=new Int32Array(this._heap,0,n>>2);return function(t,e){var n=new Uint8Array(t.buffer),r=e%4,i=e-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var a=1+(e>>2);a<t.length;a++)t[a]=0}(r,t),function(t,e,n){t[e>>2]|=128<<24-(e%4<<3),t[14+(2+(e>>2)&-16)]=n/(1<<29)|0,t[15+(2+(e>>2)&-16)]=n<<3}(r,t,e),n},t.prototype._write=function(t,e,n,r){o(t,this._h8,this._h32,e,n,r||0)},t.prototype._coreCall=function(t,e,n,r,i){var a=n;this._write(t,e,n),i&&(a=this._padChunk(n,r)),this._core.hash(a,this._padMaxChunkLen)},t.prototype.rawDigest=function(t){var e=t.byteLength||t.length||t.size||0;this._initState(this._heap,this._padMaxChunkLen);var n=0,r=this._maxChunkLen;for(n=0;e>n+r;n+=r)this._coreCall(t,n,r,e,!1);return this._coreCall(t,n,e-n,e,!0),l(this._heap,this._padMaxChunkLen)},t.prototype.digest=function(t){return a(this.rawDigest(t).buffer)},t.prototype.digestFromString=function(t){return this.digest(t)},t.prototype.digestFromBuffer=function(t){return this.digest(t)},t.prototype.digestFromArrayBuffer=function(t){return this.digest(t)},t.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},t.prototype.append=function(t){var e=0,n=t.byteLength||t.length||t.size||0,r=this._offset%this._maxChunkLen,i=void 0;for(this._offset+=n;e<n;)i=Math.min(n-e,this._maxChunkLen-r),this._write(t,e,i,r),e+=i,(r+=i)===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),r=0);return this},t.prototype.getState=function(){var t=void 0;if(this._offset%this._maxChunkLen)t=this._heap.slice(0);else{var e=new Int32Array(this._heap,this._padMaxChunkLen+320,5);t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}return{offset:this._offset,heap:t}},t.prototype.setState=function(t){return this._offset=t.offset,20===t.heap.byteLength?new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(t.heap)):this._h32.set(new Int32Array(t.heap)),this},t.prototype.rawEnd=function(){var t=this._offset,e=this._padChunk(t%this._maxChunkLen,t);this._core.hash(e,this._padMaxChunkLen);var n=l(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),n},t.prototype.end=function(){return a(this.rawEnd().buffer)},t}();t.exports=c,t.exports._core=r},function(t,e){for(var n=new Array(256),r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);t.exports.toHex=function(t){for(var e=new Uint8Array(t),r=new Array(t.byteLength),i=0;i<r.length;i++)r[i]=n[e[i]];return r.join("")},t.exports.ceilHeapSize=function(t){var e=0;if(t<=65536)return 65536;if(t<16777216)for(e=1;e<t;e<<=1);else for(e=16777216;e<t;e+=16777216);return e},t.exports.isDedicatedWorkerScope=function(t){return"WorkerGlobalScope"in t&&t instanceof t.WorkerGlobalScope&&!("SharedWorkerGlobalScope"in t&&t instanceof t.SharedWorkerGlobalScope)&&!("ServiceWorkerGlobalScope"in t&&t instanceof t.ServiceWorkerGlobalScope)}},function(t,e,n){t.exports=function(){var t=n(0),e=function(t,n,r,i,a){var s=new self.FileReader;s.onloadend=function(){if(s.error)return a(s.error);var o=s.result;n+=s.result.byteLength;try{t.append(o)}catch(u){return void a(u)}n<i.size?e(t,n,r,i,a):a(null,t.end())},s.readAsArrayBuffer(i.slice(n,n+r))},r=!0;return self.onmessage=function(n){if(r){var i=n.data.data,a=n.data.file,s=n.data.id;if(void 0!==s&&(a||i)){var o=n.data.blockSize||4194304,u=new t(o);u.resetState();var l=function(t,e){t?self.postMessage({id:s,error:t.name}):self.postMessage({id:s,hash:e})};i&&function(t,e,n){try{n(null,t.digest(e))}catch(r){return n(r)}}(u,i,l),a&&e(u,0,o,a,l)}}},function(){r=!1}}},function(t,e,n){var r=n(4),i=n(0),a=n(7),s=n(2),o=n(1),u="undefined"!=typeof self&&(0,o.isDedicatedWorkerScope)(self);i.disableWorkerBehaviour=u?s():function(){},i.createWorker=function(){var t=r(2),e=t.terminate;return t.terminate=function(){URL.revokeObjectURL(t.objectURL),e.call(t)},t},i.createHash=a,t.exports=i},function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,r){var a={};a[r]=[];var s=e.toString(),o=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return a;for(var u,l=o[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(s);)"dll-reference"!==u[3]&&a[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(s);)t[u[2]]||(a[r].push(u[1]),t[u[2]]=n(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);return a}function s(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){var i={main:n.m},o=(e=e||{}).all?{main:Object.keys(i)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};s(n);)for(var o=Object.keys(n),u=0;u<o.length;u++){var l=o[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var d=a(t,t[l][c],l),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return r}(i,t),u="";Object.keys(o).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"})(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},function(t,e){t.exports=function(t,e,n){"use asm";var r=new t.Int32Array(n);function i(t,e){t=t|0;e=e|0;var n=0,i=0,a=0,s=0,o=0,u=0,l=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0;a=r[e+320>>2]|0;o=r[e+324>>2]|0;l=r[e+328>>2]|0;d=r[e+332>>2]|0;h=r[e+336>>2]|0;for(n=0;(n|0)<(t|0);n=n+64|0){s=a;u=o;c=l;f=d;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;g=((a<<5|a>>>27)+(o&l|~o&d)|0)+((m+h|0)+1518500249|0)|0;h=d;d=l;l=o<<30|o>>>2;o=a;a=g;r[t+i>>2]=m}for(i=t+64|0;(i|0)<(t+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(o&l|~o&d)|0)+((m+h|0)+1518500249|0)|0;h=d;d=l;l=o<<30|o>>>2;o=a;a=g;r[i>>2]=m}for(i=t+80|0;(i|0)<(t+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(o^l^d)|0)+((m+h|0)+1859775393|0)|0;h=d;d=l;l=o<<30|o>>>2;o=a;a=g;r[i>>2]=m}for(i=t+160|0;(i|0)<(t+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(o&l|o&d|l&d)|0)+((m+h|0)-1894007588|0)|0;h=d;d=l;l=o<<30|o>>>2;o=a;a=g;r[i>>2]=m}for(i=t+240|0;(i|0)<(t+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;g=((a<<5|a>>>27)+(o^l^d)|0)+((m+h|0)-899497514|0)|0;h=d;d=l;l=o<<30|o>>>2;o=a;a=g;r[i>>2]=m}a=a+s|0;o=o+u|0;l=l+c|0;d=d+f|0;h=h+p|0}r[e+320>>2]=a;r[e+324>>2]=o;r[e+328>>2]=l;r[e+332>>2]=d;r[e+336>>2]=h}return{hash:i}}},function(t,e){var n=this,r=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(r=new self.FileReaderSync);var i=function(t,e,n,r,i,a){var s=void 0,o=a%4,u=(i+o)%4,l=i-u;switch(o){case 0:e[a]=t[r+3];case 1:e[a+1-(o<<1)|0]=t[r+2];case 2:e[a+2-(o<<1)|0]=t[r+1];case 3:e[a+3-(o<<1)|0]=t[r]}if(!(i<u+(4-o))){for(s=4-o;s<l;s=s+4|0)n[a+s>>2|0]=t[r+s]<<24|t[r+s+1]<<16|t[r+s+2]<<8|t[r+s+3];switch(u){case 3:e[a+l+1|0]=t[r+l+2];case 2:e[a+l+2|0]=t[r+l+1];case 1:e[a+l+3|0]=t[r+l]}}};t.exports=function(t,e,a,s,o,u){if("string"==typeof t)return function(t,e,n,r,i,a){var s=void 0,o=a%4,u=(i+o)%4,l=i-u;switch(o){case 0:e[a]=t.charCodeAt(r+3);case 1:e[a+1-(o<<1)|0]=t.charCodeAt(r+2);case 2:e[a+2-(o<<1)|0]=t.charCodeAt(r+1);case 3:e[a+3-(o<<1)|0]=t.charCodeAt(r)}if(!(i<u+(4-o))){for(s=4-o;s<l;s=s+4|0)n[a+s>>2]=t.charCodeAt(r+s)<<24|t.charCodeAt(r+s+1)<<16|t.charCodeAt(r+s+2)<<8|t.charCodeAt(r+s+3);switch(u){case 3:e[a+l+1|0]=t.charCodeAt(r+l+2);case 2:e[a+l+2|0]=t.charCodeAt(r+l+1);case 1:e[a+l+3|0]=t.charCodeAt(r+l)}}}(t,e,a,s,o,u);if(t instanceof Array)return i(t,e,a,s,o,u);if(n&&n.Buffer&&n.Buffer.isBuffer(t))return i(t,e,a,s,o,u);if(t instanceof ArrayBuffer)return i(new Uint8Array(t),e,a,s,o,u);if(t.buffer instanceof ArrayBuffer)return i(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e,a,s,o,u);if(t instanceof Blob)return function(t,e,n,i,a,s){var o=void 0,u=s%4,l=(a+u)%4,c=a-l,d=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));switch(u){case 0:e[s]=d[3];case 1:e[s+1-(u<<1)|0]=d[2];case 2:e[s+2-(u<<1)|0]=d[1];case 3:e[s+3-(u<<1)|0]=d[0]}if(!(a<l+(4-u))){for(o=4-u;o<c;o=o+4|0)n[s+o>>2|0]=d[o]<<24|d[o+1]<<16|d[o+2]<<8|d[o+3];switch(l){case 3:e[s+c+1|0]=d[c+2];case 2:e[s+c+2|0]=d[c+1];case 1:e[s+c+3|0]=d[c]}}}(t,e,a,s,o,u);throw new Error("Unsupported data type.")}},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=n(1).toHex,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rusha=new i,this._rusha.resetState()}return t.prototype.update=function(t){return this._rusha.append(t),this},t.prototype.digest=function(t){var e=this._rusha.rawEnd().buffer;if(!t)return e;if("hex"===t)return a(e);throw new Error("unsupported digest encoding")},r(t,[{key:"state",get:function(){return this._rusha.getState()},set:function(t){this._rusha.setState(t)}}]),t}();t.exports=function(){return new s}}])},t.exports=r()},cIfH:function(t,e,n){"use strict";const r=n("4abu"),i={allowBooleanAttributes:!1},a=["allowBooleanAttributes"];function s(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var r=t.substr(n,e-n);if(e>5&&"xml"===r)return f("InvalidXml","XML declaration allowed only at the start of the document.",p(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function o(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function u(t,e){let n="",r="",i=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===r)r=t[e];else{if(r!==t[e])continue;r=""}else if(">"===t[e]&&""===r){i=!0;break}n+=t[e]}return""===r&&{value:n,index:e,tagClosed:i}}e.validate=function(t,e){e=r.buildOptions(e,i,a);const n=[];let l=!1,h=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let i=0;i<t.length;i++){if("<"!==t[i]){if(" "===t[i]||"\t"===t[i]||"\n"===t[i]||"\r"===t[i])continue;return f("InvalidChar","char '"+t[i]+"' is not expected.",p(t,i))}if(i++,"?"===t[i]){if(i=s(t,++i),i.err)return i}else{if("!"===t[i]){i=o(t,i);continue}{let a=!1;"/"===t[i]&&(a=!0,i++);let s="";for(;i<t.length&&">"!==t[i]&&" "!==t[i]&&"\t"!==t[i]&&"\n"!==t[i]&&"\r"!==t[i];i++)s+=t[i];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),i--),!r.isName(s)){let e;return e=0===s.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+s+"' is an invalid name.",f("InvalidTag",e,p(t,i))}const g=u(t,i);if(!1===g)return f("InvalidAttr","Attributes for '"+s+"' have open quote.",p(t,i));let m=g.value;if(i=g.index,"/"===m[m.length-1]){m=m.substring(0,m.length-1);const n=c(m,e);if(!0!==n)return f(n.err.code,n.err.msg,p(t,i-m.length+n.err.line));l=!0}else if(a){if(!g.tagClosed)return f("InvalidTag","Closing tag '"+s+"' doesn't have proper closing.",p(t,i));if(m.trim().length>0)return f("InvalidTag","Closing tag '"+s+"' can't have attributes or invalid starting.",p(t,i));{const e=n.pop();if(s!==e)return f("InvalidTag","Closing tag '"+e+"' is expected inplace of '"+s+"'.",p(t,i));0==n.length&&(h=!0)}}else{const r=c(m,e);if(!0!==r)return f(r.err.code,r.err.msg,p(t,i-m.length+r.err.line));if(!0===h)return f("InvalidXml","Multiple possible root nodes found.",p(t,i));n.push(s),l=!0}for(i++;i<t.length;i++){if("<"===t[i]){if("!"===t[i+1]){i++,i=o(t,i);continue}break}if("&"===t[i]){const e=d(t,i);if(-1==e)return f("InvalidChar","char '&' is not expected.",p(t,i));i=e}}"<"===t[i]&&i--}}}return l?!(n.length>0)||f("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):f("InvalidXml","Start tag expected.",1)};const l=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function c(t,e){const n=r.getAllMatches(t,l),i={};for(let r=0;r<n.length;r++){if(0===n[r][1].length)return f("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",g(t,n[r][0]));if(void 0===n[r][3]&&!e.allowBooleanAttributes)return f("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",g(t,n[r][0]));const a=n[r][2];if(!h(a))return f("InvalidAttr","Attribute '"+a+"' is an invalid name.",g(t,n[r][0]));if(i.hasOwnProperty(a))return f("InvalidAttr","Attribute '"+a+"' is repeated.",g(t,n[r][0]));i[a]=1}return!0}function d(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function f(t,e,n){return{err:{code:t,msg:e,line:n}}}function h(t){return r.isName(t)}function p(t,e){return t.substring(0,e).split(/\r?\n/).length}function g(t,e){return t.indexOf(e)+e.length}},elGS:function(t,e,n){"use strict";const r=n("j/LU"),i=n("E1E9"),a=n("E1E9"),s=n("4abu").buildOptions,o=n("cIfH");e.parse=function(t,e,n){if(n){!0===n&&(n={});const e=o.validate(t,n);if(!0!==e)throw Error(e.err.msg)}e=s(e,a.defaultOptions,a.props);const u=i.getTraversalObj(t,e);return r.convertToJson(u,e)},e.convertTonimn=n("vtNb").convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=r.convertToJson,e.convertToJsonString=n("t6xR").convertToJsonString,e.validate=o.validate,e.j2xParser=n("p1mf"),e.parseToNimn=function(t,n,r){return e.convertTonimn(e.getTraversalObj(t,r),n,r)}},"j/LU":function(t,e,n){"use strict";const r=n("4abu"),i=function(t,e){const n={};if(!(t.child&&!r.isEmptyObject(t.child)||t.attrsMap&&!r.isEmptyObject(t.attrsMap)))return r.isExist(t.val)?t.val:"";r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(n[e.textNodeName]="strict"===e.arrayMode?[t.val]:t.val),r.merge(n,t.attrsMap,e.arrayMode);const a=Object.keys(t.child);for(let r=0;r<a.length;r++){var s=a[r];if(t.child[s]&&t.child[s].length>1)for(var o in n[s]=[],t.child[s])n[s].push(i(t.child[s][o],e));else if(!0===e.arrayMode){const r=i(t.child[s][0],e);n[s]="object"==typeof r?[r]:r}else n[s]="strict"===e.arrayMode?[i(t.child[s][0],e)]:i(t.child[s][0],e)}return n};e.convertToJson=i},kiQV:function(t){t.exports=JSON.parse('{"a":"0.1.1"}')},kyqF:function(t,e,n){!function(){"use strict";var t;function e(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0}function r(t,n,r){for(var i=!1,a=0;a<t.length;a++)t[a].updateOptions({drawCallback:function(a,s){if(!i&&!s){i=!0;var o={dateWindow:a.xAxisRange()};n.range&&(o.valueRange=a.yAxisRange());for(var u=0;u<t.length;u++)t[u]!=a?e(o.dateWindow,t[u].getOption("dateWindow"))&&e(o.valueRange,t[u].getOption("valueRange"))||t[u].updateOptions(o):r[u]&&r[u].drawCallback&&r[u].drawCallback.apply(this,arguments);i=!1}}},!0)}function i(t,e){for(var n=!1,r=0;r<t.length;r++)t[r].updateOptions({highlightCallback:function(r,i,a,s,o){if(!n){n=!0;for(var u=this,l=0;l<t.length;l++)if(u!=t[l]){var c=t[l].getRowForX(i);null!==c&&t[l].setSelection(c,o)}else e[l]&&e[l].highlightCallback&&e[l].highlightCallback.apply(this,arguments);n=!1}},unhighlightCallback:function(r){if(!n){n=!0;for(var i=this,a=0;a<t.length;a++)i!=t[a]?t[a].clearSelection():e[a]&&e[a].unhighlightCallback&&e[a].unhighlightCallback.apply(this,arguments);n=!1}}},!0)}(t=window.Dygraph?window.Dygraph:n("Cnnb")).synchronize=function(){if(0===arguments.length)throw"Invalid invocation of Dygraph.synchronize(). Need >= 1 argument.";var e=["selection","zoom","range"],n={selection:!0,zoom:!0,range:!0},a=[],s=[],o=function(t){if(!(t instanceof Object))throw"Last argument must be either Dygraph or Object.";for(var r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}};if(arguments[0]instanceof t){for(var u=0;u<arguments.length&&arguments[u]instanceof t;u++)a.push(arguments[u]);if(u<arguments.length-1)throw"Invalid invocation of Dygraph.synchronize(). All but the last argument must be Dygraph objects.";u==arguments.length-1&&o(arguments[arguments.length-1])}else{if(!arguments[0].length)throw"Invalid invocation of Dygraph.synchronize(). First parameter must be either Dygraph or list of Dygraphs.";for(u=0;u<arguments[0].length;u++)a.push(arguments[0][u]);if(2==arguments.length)o(arguments[1]);else if(arguments.length>2)throw"Invalid invocation of Dygraph.synchronize(). Expected two arguments: array and optional options argument."}if(a.length<2)throw"Invalid invocation of Dygraph.synchronize(). Need two or more dygraphs to synchronize.";var l=a.length;for(u=0;u<a.length;u++){var c=a[u];c.ready((function(){if(0==--l){for(var t=["drawCallback","highlightCallback","unhighlightCallback"],e=0;e<a.length;e++){s[e]||(s[e]={});for(var o=t.length-1;o>=0;o--)s[e][t[o]]=a[e].getFunctionOption(t[o])}n.zoom&&r(a,n,s),n.selection&&i(a,s)}}))}return{detach:function(){for(var t=0;t<a.length;t++){var e=a[t];n.zoom&&e.updateOptions({drawCallback:s[t].drawCallback}),n.selection&&e.updateOptions({highlightCallback:s[t].highlightCallback,unhighlightCallback:s[t].unhighlightCallback})}a=null,n=null,s=null}}}}()},p1mf:function(t,e,n){"use strict";const r=n("4abu").buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},a=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function s(t){this.options=r(t,i,a),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.isCDATA=this.options.cdataTagName?g:function(){return!1},this.replaceCDATAstr=o,this.replaceCDATAarr=u,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=f,this.buildObjNode=c):(this.buildTextNode=d,this.buildObjNode=l),this.buildTextValNode=d,this.buildObjectNode=l}function o(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function u(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[n]+"]]>");return t+this.newLine}function l(t,e,n,r){return n&&!t.includes("<")?this.indentate(r)+"<"+e+n+">"+t+"</"+e+this.tagEndChar:this.indentate(r)+"<"+e+n+this.tagEndChar+t+this.indentate(r)+"</"+e+this.tagEndChar}function c(t,e,n,r){return""!==t?this.buildObjectNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function d(t,e,n,r){return this.indentate(r)+"<"+e+n+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function f(t,e,n,r){return""!==t?this.buildTextValNode(t,e,n,r):this.indentate(r)+"<"+e+n+"/"+this.tagEndChar}function h(t){return this.options.indentBy.repeat(t)}function p(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function g(t){return t===this.options.cdataTagName}s.prototype.parse=function(t){return this.j2x(t,0).val},s.prototype.j2x=function(t,e){let n="",r="";const i=Object.keys(t),a=i.length;for(let s=0;s<a;s++){const a=i[s];if(void 0===t[a]);else if(null===t[a])r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)r+=this.buildTextNode(t[a],a,"",e);else if("object"!=typeof t[a]){const i=this.isAttribute(a);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+t[a])+'"':this.isCDATA(a)?r+=this.replaceCDATAstr(t[this.options.textNodeName]?t[this.options.textNodeName]:"",t[a]):a===this.options.textNodeName?t[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+t[a])):r+=this.buildTextNode(t[a],a,"",e)}else if(Array.isArray(t[a]))if(this.isCDATA(a))r+=this.indentate(e),r+=this.replaceCDATAarr(t[this.options.textNodeName]?t[this.options.textNodeName]:"",t[a]);else{const n=t[a].length;for(let i=0;i<n;i++){const n=t[a][i];if(void 0===n);else if(null===n)r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if("object"==typeof n){const t=this.j2x(n,e+1);r+=this.buildObjNode(t.val,a,t.attrStr,e)}else r+=this.buildTextNode(n,a,"",e)}}else if(this.options.attrNodeName&&a===this.options.attrNodeName){const e=Object.keys(t[a]),r=e.length;for(let i=0;i<r;i++)n+=" "+e[i]+'="'+this.options.attrValueProcessor(""+t[a][e[i]])+'"'}else{const n=this.j2x(t[a],e+1);r+=this.buildObjNode(n.val,a,n.attrStr,e)}}return{attrStr:n,val:r}},t.exports=s},t6xR:function(t,e,n){"use strict";const r=n("4abu"),i=n("4abu").buildOptions,a=n("E1E9"),s=function(t,e,n){let i="{";const a=Object.keys(t.child);for(let r=0;r<a.length;r++){var o=a[r];if(t.child[o]&&t.child[o].length>1){for(var u in i+='"'+o+'" : [ ',t.child[o])i+=s(t.child[o][u],e)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+o+'" : '+s(t.child[o][0],e)+" ,"}return r.merge(i,t.attrsMap),r.isEmptyObject(i)?r.isExist(t.val)?t.val:"":(r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(i+='"'+e.textNodeName+'" : '+(!0!==(l=t.val)&&!1!==l&&isNaN(l)?'"'+l+'"':l)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var l};e.convertToJsonString=function(t,e){return(e=i(e,a.defaultOptions,a.props)).indentBy=e.indentBy||"",s(t,e,0)}},tcQk:function(t){t.exports=JSON.parse('{"hls":{"VOD":[{"name":"Big Buck Bunny","url":"https://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8"},{"name":"HD World","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"CCTV","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/cctv/cctv_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Sintel","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/sintel/sintel-hd_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"}],"LIVE":[{"name":"Eight","url":"https://moctobpltc-i.akamaihd.net/hls/live/571329/eight/playlist.m3u8"},{"name":"MSL HLS test stream","url":"https://cph-msl.akamaized.net/hls/live/2000341/test/master.m3u8"}]},"dash":{"VOD":[{"name":"Segment Base, ondemand profile","url":"https://dash.akamaized.net/dash264/TestCases/1a/sony/SNE_DASH_SD_CASE1A_REVISED.mpd"},{"name":"SegmentTimeline/Time","url":"https://demo.unified-streaming.com/video/ateam/ateam.ism/ateam.mpd"},{"name":"SegmentTemplate, live profile","url":"https://dash.akamaized.net/envivio/EnvivioDash3/manifest.mpd"},{"name":"SegmentTemplate/Number, live profile, 250kbps up to 15Mbps@4k","url":"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd"}],"LIVE":[{"name":"MSL DASH test stream / SegmentTemplate","url":"https://cph-msl.akamaized.net/dash/live/2003285/test/manifest.mpd"},{"name":"MSL DASH test stream / SegmentTemplate with Token Authentication","url":"https://cph-msl-ta.akamaized.net/dash/live/2003285/test/manifest.mpd?hdnts=st=1576841519~exp=1892201519~acl=/*~hmac=2cd04fd6efa7c852ac45aa0866366879e485319f68cca2cf7ecfcc1463d8db0d"}]}}')},uHMj:function(t){t.exports=JSON.parse('{"streams":[{"name":"Big Buck Bunny (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8"},{"name":"HD World (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"CCTV (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/cctv/cctv_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Sintel (VOD)","url":"https://multiplatform-f.akamaihd.net/i/multi/april11/sintel/sintel-hd_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8"},{"name":"Parkour (VOD)","url":"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8"},{"name":"Encrypted stream (VOD)","url":"https://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes.m3u8"},{"name":"Eight (Live)","url":"https://moctobpltc-i.akamaihd.net/hls/live/571329/eight/playlist.m3u8"},{"name":"Tears of Steel (Live)","url":"https://cph-msl.akamaized.net/hls/live/2000341/test/master.m3u8"},{"name":"Tears of Steel (Live, token authentication)","url":"https://cph-msl-ta.akamaized.net/hls/live/2000341/test/master.m3u8?hdnts=st=1576841519~exp=1892201519~acl=/*~hmac=2cd04fd6efa7c852ac45aa0866366879e485319f68cca2cf7ecfcc1463d8db0d"},{"name":"Akamai (Live)","url":"https://l2voddemo.akamaized.net/hls/live/644624/l2vc/master.m3u8"}]}')},ulZh:function(t,e,n){var r;"undefined"!=typeof window&&(r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new s(n,r||t,a),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=this._events[i?i+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,a=new Array(r);n<r;n++)a[n]=e[n].fn;return a},l.prototype.listenerCount=function(t){var e=this._events[i?i+t:t];return e?e.fn?1:e.length:0},l.prototype.emit=function(t,e,n,r,a,s){var o=i?i+t:t;if(!this._events[o])return!1;var u,l,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,s),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||u(this,a);else{for(var o=0,l=[],c=s.length;o<c;o++)(s[o].fn!==e||r&&!s[o].once||n&&s[o].context!==n)&&l.push(s[o]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(t){var e;return t?this._events[e=i?i+t:t]&&u(this,e):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,n){var r,i,a,s,o;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t.exports=o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=i.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}}},"./node_modules/webworkify-webpack/index.js":function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,r){var a={};a[r]=[];var s=e.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return a;for(var u,l=o[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(s);)"dll-reference"!==u[3]&&a[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(s);)t[u[2]]||(a[r].push(u[1]),t[u[2]]=n(u[1]).m),a[u[2]]=a[u[2]]||[],a[u[2]].push(u[4]);for(var d=Object.keys(a),f=0;f<d.length;f++)for(var h=0;h<a[d[f]].length;h++)isNaN(1*a[d[f]][h])||(a[d[f]][h]=1*a[d[f]][h]);return a}function s(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){var i={main:n.m},o=(e=e||{}).all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};s(n);)for(var o=Object.keys(n),u=0;u<o.length;u++){var l=o[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&t[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var d=a(t,t[l][c],l),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return r}(i,t),u="";Object.keys(o).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(e.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"hlsDefaultConfig",(function(){return S})),n.d(e,"mergeConfig",(function(){return w})),n.d(e,"enableStreamingMode",(function(){return A}));var r=n("./src/controller/abr-controller.ts"),i=n("./src/controller/audio-stream-controller.ts"),a=n("./src/controller/audio-track-controller.ts"),s=n("./src/controller/subtitle-stream-controller.ts"),o=n("./src/controller/subtitle-track-controller.ts"),u=n("./src/controller/buffer-controller.ts"),l=n("./src/controller/timeline-controller.ts"),c=n("./src/controller/cap-level-controller.ts"),d=n("./src/controller/fps-controller.ts"),f=n("./src/controller/eme-controller.ts"),h=n("./src/controller/cmcd-controller.ts"),p=n("./src/utils/xhr-loader.ts"),g=n("./src/utils/fetch-loader.ts"),m=n("./src/utils/cues.ts"),y=n("./src/utils/mediakeys-helper.ts"),v=n("./src/utils/logger.ts");function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=E(E({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:p.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r.default,bufferController:u.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:y.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:m.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:s.SubtitleStreamController,subtitleTrackController:o.default,timelineController:l.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:f.default,cmcdController:h.default});function w(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return _({},t,e)}function A(t){var e=t.loader;e!==g.default&&e!==p.default?(v.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Object(g.fetchSupported)()&&(t.loader=g.default,t.progressive=!0,t.enableSoftwareAES=!0,v.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/ewma-bandwidth-estimator.ts"),a=n("./src/events.ts"),s=n("./src/utils/buffer-helper.ts"),o=n("./src/errors.ts"),u=n("./src/types/loader.ts"),l=n("./src/utils/logger.ts");e.default=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new i.default(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,n=t.prototype;return n.registerListeners=function(){var t=this.hls;t.on(a.Events.FRAG_LOADING,this.onFragLoading,this),t.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){var t=this.hls;t.off(a.Events.FRAG_LOADING,this.onFragLoading,this),t.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.ERROR,this.onError,this)},n.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},n.onFragLoading=function(t,e){var n,r=e.frag;r.type===u.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=r,this.partCurrent=null!=(n=e.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},n.onLevelLoaded=function(t,e){var n=this.hls.config;e.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},n._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,o=n.config,u=n.media;if(t&&u){var c=e?e.stats:t.stats,d=e?e.duration:t.duration;if(c.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!u.paused&&u.playbackRate&&u.readyState){var f=performance.now()-c.loading.start,h=Math.abs(u.playbackRate);if(!(f<=500*d/h)){var p=n.levels,g=n.minAutoLevel,m=c.total||Math.max(c.loaded,Math.round(d*p[t.level].maxBitrate/8)),y=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/f),v=(m-c.loaded)/y,_=u.currentTime,b=(s.BufferHelper.bufferInfo(u,_,o.maxBufferHole).end-_)/h;if(!(b>=2*d/h||v<=b)){var E,T=Number.POSITIVE_INFINITY;for(E=t.level-1;E>g&&!((T=d*p[E].maxBitrate/(6.4*y))<b);E--);if(!(T>=v)){var S=this.bwEstimator.getEstimate();l.logger.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+E+"\n      Current BW estimate: "+(Object(r.isFiniteNumber)(S)?(S/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+v.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+b.toFixed(3)+" s"),n.nextLoadLevel=E,this.bwEstimator.sample(f,c.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:c})}}}}}},n.onFragLoaded=function(t,e){var n=e.frag,i=e.part;if(n.type===u.PlaylistLevelType.MAIN&&Object(r.isFiniteNumber)(n.sn)){var s=i?i.stats:n.stats,o=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[n.level],c=(l.loaded?l.loaded.bytes:0)+s.loaded,d=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:c,duration:d},l.realBitrate=Math.round(8*c/d)}n.bitrateTest&&(this.onFragBuffered(a.Events.FRAG_BUFFERED,{stats:s,frag:n,part:i,id:n.type}),n.bitrateTest=!1)}},n.onFragBuffered=function(t,e){var n=e.frag,r=e.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===u.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=n.bitrateTest?a/1e3:0}},n.onError=function(t,e){switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},n.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,o=n.media,u=e?e.duration:t?t.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(s.BufferHelper.bufferInfo(o,c,i.maxBufferHole).end-c)/d,p=this.findBestLevel(f,a,r,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var g=u?Math.min(u,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(!h){var v=this.bitrateTestDelay;v&&(g=(u?Math.min(u,i.maxLoadingDelay):i.maxLoadingDelay)-v,l.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),m=y=1)}return p=this.findBestLevel(f,a,r,h+g,m,y),Math.max(p,0)},n.findBestLevel=function(t,e,n,r,i,a){for(var s,o=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,f=d[c],h=!(null==f||null===(s=f.details)||void 0===s||!s.live),p=null==f?void 0:f.codecSet,g=u?u.duration:o?o.duration:0,m=n;m>=e;m--){var y=d[m];if(y&&(!p||y.codecSet===p)){var v,_=y.details,b=(u?null==_?void 0:_.partTarget:null==_?void 0:_.averagetargetduration)||g,E=d[m].maxBitrate,T=E*b/(v=m<=c?i*t:a*t);if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+m+"/"+Math.round(v)+"/"+E+"/"+b+"/"+r+"/"+T),v>E&&(!T||h&&!this.bitrateTestDelay||T<r))return m}}return-1},(e=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this.getNextABRAutoLevel();return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/audio-stream-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/events.ts"),s=n("./src/utils/buffer-helper.ts"),o=n("./src/controller/fragment-tracker.ts"),u=n("./src/types/level.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),d=n("./src/demux/chunk-cache.ts"),f=n("./src/demux/transmuxer-interface.ts"),h=n("./src/types/transmuxer.ts"),p=n("./src/controller/fragment-finders.ts"),g=n("./src/utils/discontinuities.ts"),m=n("./src/errors.ts"),y=n("./src/utils/logger.ts");function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.default=function(t){var e,n;function b(e,n){var r;return(r=t.call(this,e,n,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r._registerListeners(),r}n=t,(e=b).prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n);var E=b.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(a.Events.ERROR,this.onError,this),t.on(a.Events.BUFFER_RESET,this.onBufferReset,this),t.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(a.Events.ERROR,this.onError,this),t.off(a.Events.BUFFER_RESET,this.onBufferReset,this),t.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(t,e){var n=e.frag,r=e.initPTS;if("main"===e.id){var a=n.cc;this.initPTS[n.cc]=r,this.log("InitPTS for cc: "+a+" found from main: "+r),this.videoTrackCC=a,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=i.State.STOPPED);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},E.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var e,n=this.levels,r=null==n||null===(e=n[this.trackId])||void 0===e?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,o=performance.now(),u=this.retryDate;(!u||o>=u||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var l=this.waitingData;if(l){var c=l.frag,d=l.part,f=l.cache,h=l.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var g={frag:c,part:d,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),h&&t.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)y.logger.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),v=s.BufferHelper.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);Object(p.fragmentWithinToleranceTest)(v.end,this.config.maxFragLookUpTolerance,c)<0&&(y.logger.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},E.onTickEnd=function(){var t=this.media;t&&t.readyState&&(!this.loadedmetadata&&(this.mediaBuffer?this.mediaBuffer:t).buffered.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime)},E.doTickIdle=function(){var t,e,n=this.hls,r=this.levels,s=this.media,o=this.trackId;if(r&&r[o]&&(s||!this.startFragRequested&&n.config.startFragPrefetch)){var u=r[o].details;if(!u||u.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(u))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,l.PlaylistLevelType.AUDIO));var d=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,l.PlaylistLevelType.AUDIO);if(null!==d){var f=d.len,h=this.getMaxBufferLength(),p=this.audioSwitch;if(!(f>=h)||p){if(!p&&this._streamEnded(d,u))return n.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var g=u.fragments[0].start,m=d.end;if(p){var y=this.getLoadPosition();m=y,u.PTSKnown&&y<g&&(d.end>g||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=g+.05)}var v=this.getNextFragment(m,u);v?"identity"!==(null===(t=v.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=v.decryptdata)&&void 0!==e&&e.key?this.loadFragment(v,u,m):this.loadKey(v,u):this.bufferFlushed=!0}}}}},E.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,l.PlaylistLevelType.MAIN);return null===n?e:Math.max(e,n.len)},E.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(t,e){var n=e.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(t){return new u.Level(t)}))},E.onAudioTrackSwitching=function(t,e){var n=!!e.url;this.trackId=e.id;var r=this.fragCurrent;null!=r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(t,e){this.mainDetails=e.details},E.onAudioTrackLoaded=function(t,e){var n,r=this.levels,a=e.details,s=e.id;if(r){this.log("Track "+s+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var o=r[s],u=0;if(a.live||null!==(n=o.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!l)return;!o.details&&a.hasProgramDateTime&&l.hasProgramDateTime?(Object(g.alignMediaPlaylistByPDT)(a,l),u=a.fragments[0].start):u=this.alignPlaylists(a,o.details)}o.details=a,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(o.details,u),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+s)},E._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,a=t.payload,s=this.config,o=this.trackId,u=this.levels;if(u){var c=u[o];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var g=s.defaultAudioCodec||c.audioCodec||"mp4a.40.2",m=this.transmuxer;m||(m=this.transmuxer=new f.default(this.hls,l.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var v=this.initPTS[n.cc],_=null===(e=n.initSegment)||void 0===e?void 0:e.data;if(void 0!==v){var b=r?r.index:-1,E=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,-1!==b);m.push(a,_,g,"",n,r,p.totalduration,!1,E,v)}else y.logger.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:n,part:r,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(t,e){var n=e.tracks.audio;n&&(this.mediaBuffer=n.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},E.onFragBuffered=function(t,e){var n=e.frag,r=e.part;n.type===l.PlaylistLevelType.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,r)))},E.onError=function(e,n){switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.AUDIO,n);break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=n.fatal?i.State.ERROR:i.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case m.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,a=this.getFwdBufferInfo(this.mediaBuffer,l.PlaylistLevelType.AUDIO);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},E.onBufferFlushed=function(t,e){e.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},E._handleTransmuxComplete=function(t){var e,n="audio",r=this.hls,s=t.remuxResult,o=t.chunkMeta,u=this.getCurrentContext(o);if(!u)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var l=u.frag,d=u.part,f=s.audio,h=s.text,p=s.id3,g=s.initSegment;if(!this.fragContextChanged(l)){if(this.state=i.State.PARSING,this.audioSwitch&&f&&this.completeAudioSwitch(),null!=g&&g.tracks&&(this._bufferInitSegment(g.tracks,l,o),r.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:n,tracks:g.tracks})),f){var m=f.startPTS,y=f.endPTS,_=f.startDTS,b=f.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:m,endPTS:y,startDTS:_,endDTS:b}),l.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,m,y,_,b),this.bufferFragmentData(f,l,d,o)}if(null!=p&&null!==(e=p.samples)&&void 0!==e&&e.length){var E=v({frag:l,id:n},p);r.trigger(a.Events.FRAG_PARSING_METADATA,E)}if(h){var T=v({frag:l,id:n},h);r.trigger(a.Events.FRAG_PARSING_USERDATA,T)}}},E._bufferInitSegment=function(t,e,n){if(this.state===i.State.PARSING){t.video&&delete t.video;var r=t.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,t);var s=r.initSegment;null!=s&&s.byteLength&&this.hls.trigger(a.Events.BUFFER_APPENDING,{type:"audio",frag:e,part:null,chunkMeta:n,parent:e.type,data:s}),this.tick()}}},E.loadFragment=function(e,n,a){var s=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||s===o.FragmentState.NOT_LOADED||s===o.FragmentState.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):n.live&&!Object(r.isFiniteNumber)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,a)))},E.completeAudioSwitch=function(){var e=this.hls,n=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:n})},b}(i.default)},"./src/controller/audio-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/controller/base-playlist-controller.ts"),s=n("./src/types/loader.ts");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.default=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var u,l=a.prototype;return l.registerListeners=function(){var t=this.hls;t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},l.onAudioTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.tracksInGroup[n];if(i){var a=i.details;i.details=e.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,a))}else this.warn("Invalid audio track id "+n)},l.onLevelLoading=function(t,e){this.switchLevel(e.level)},l.onLevelSwitching=function(t,e){this.switchLevel(e.level)},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(t){return!n||t.groupId===n}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},l.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},l.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=e[this.trackId];this.log("Now switching to audio-track index "+t);var i=e[t],a=i.id,s=i.groupId,o=void 0===s?"":s,u=i.name,l=i.type,c=i.url;if(this.trackId=t,this.trackName=u,this.selectDefaultTrack=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:o,name:u,type:l,url:c}),!i.details||i.details.live){var d=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},l.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var t=this.findTrackId(this.trackName)||this.findTrackId();-1!==t?this.setAudioTrack(t):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.Events.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},(u=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,u),a}(a.default)},"./src/controller/base-playlist-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var r=n("./src/polyfills/number.ts"),i=n("./src/types/level.ts"),a=n("./src/controller/level-helper.ts"),s=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),u=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=s.logger.log.bind(s.logger,e+":"),this.warn=s.logger.warn.bind(s.logger,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===o.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var n=null==e?void 0:e.renditionReports;if(n)for(var a=0;a<n.length;a++){var s=n[a],o=""+s.URI;if(o===t.substr(-o.length)){var u=parseInt(s["LAST-MSN"]),l=parseInt(s["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&c>e.partTarget&&(l+=1)}if(Object(r.isFiniteNumber)(u))return new i.HlsUrlParameters(u,Object(r.isFiniteNumber)(l)?l:void 0,i.HlsSkip.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,n){var r=this,i=e.details,s=e.stats,o=s.loading.end?Math.max(0,self.performance.now()-s.loading.end):0;if(i.advancedDateTime=Date.now()-o,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+t+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&Object(a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var u,l=void 0,c=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var d=this.hls.config.lowLatencyMode,f=i.lastPartSn,h=i.endSN,p=i.lastPartIndex,g=f===h;-1!==p?(l=g?h+1:f,c=g?d?0:p:p+1):l=h+1;var m=i.age,y=Math.min(m+i.ageHeader-i.partTarget,1.5*i.targetduration);if(y>0){if(n&&y>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+y+" with playlist age: "+i.age),y=0;else{var v=Math.floor(y/i.targetduration);l+=v,void 0!==c&&(c+=Math.round(y%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+y+" skip sn "+v+" to part "+c)}i.tuneInGoal=y}if(u=this.getDeliveryDirectives(i,e.deliveryDirectives,l,c),d||!g)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(i,e.deliveryDirectives,l,c);var _=Object(a.computeReloadInterval)(i,s);void 0!==l&&i.canBlockReload&&(_-=i.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(_)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(u)}),_)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,n,r){var a=Object(i.getSkipValue)(t,n);return null!=e&&e.skip&&t.deltaUpdateFailed&&(n=e.msn,r=e.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},e.retryLoadingOrFail=function(t){var e,n=this,r=this.hls.config,i=this.retryCount<r.levelLoadingMaxRetry;if(i)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return i},t}()},"./src/controller/base-stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"State",(function(){return b})),n.d(e,"default",(function(){return E}));var r=n("./src/polyfills/number.ts"),i=n("./src/task-loop.ts"),a=n("./src/controller/fragment-tracker.ts"),s=n("./src/utils/buffer-helper.ts"),o=n("./src/utils/logger.ts"),u=n("./src/events.ts"),l=n("./src/errors.ts"),c=n("./src/types/transmuxer.ts"),d=n("./src/utils/mp4-tools.ts"),f=n("./src/utils/discontinuities.ts"),h=n("./src/controller/fragment-finders.ts"),p=n("./src/controller/level-helper.ts"),g=n("./src/loader/fragment-loader.ts"),m=n("./src/crypt/decrypter.ts"),y=n("./src/utils/time-ranges.ts"),v=n("./src/types/loader.ts");function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},E=function(t){var e,n;function i(e,n,r){var i;return(i=t.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=b.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=o.logger.log.bind(o.logger,r+":"),i.warn=o.logger.warn.bind(o.logger,r+":"),i.hls=e,i.fragmentLoader=new g.default(e.config),i.fragmentTracker=n,i.config=e.config,i.decrypter=new m.default(e,e.config),e.on(u.Events.KEY_LOADED,i.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n);var E,T=i.prototype;return T.doTick=function(){this.onTickEnd()},T.onTickEnd=function(){},T.startLoad=function(t){},T.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=b.STOPPED},T._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&n&&n.sn>=e.endSN&&!t.nextStart){var i=e.partList;if(null!=i&&i.length){var o=i[i.length-1];return s.BufferHelper.isBuffered(this.media,o.start+o.duration/2)}var u=r.getState(n);return u===a.FragmentState.PARTIAL||u===a.FragmentState.OK}return!1},T.onMediaAttached=function(t,e){var n=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===b.STOPPED&&this.startLoad(r.startPosition)},T.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},T.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,n=this.media,i=this.state,a=n?n.currentTime:0,o=s.BufferHelper.bufferInfo(this.mediaBuffer||n,a,t.maxBufferHole);if(this.log("media seeking to "+(Object(r.isFiniteNumber)(a)?a.toFixed(3):a)+", state: "+i),i===b.ENDED)this.resetLoadingState();else if(e&&!o.len){var u=t.maxFragLookUpTolerance,l=a>e.start+e.duration+u;(a<e.start-u||l)&&(l&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},T.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},T.onKeyLoaded=function(t,e){if(this.state===b.KEY_LOADING&&e.frag===this.fragCurrent&&this.levels){this.state=b.IDLE;var n=this.levels[e.frag.level].details;n&&this.loadFragment(e.frag,n,e.frag.start)}},T.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},T.onHandlerDestroyed=function(){this.state=b.STOPPED,this.hls.off(u.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},T.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=b.KEY_LOADING,this.fragCurrent=t,this.hls.trigger(u.Events.KEY_LOADING,{frag:t})},T.loadFragment=function(t,e,n){this._loadFragForPlayback(t,e,n)},T._loadFragForPlayback=function(t,e,n){var r=this;this._doFragLoad(t,e,n,(function(e){if(r.fragContextChanged(t))return r.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void r.fragmentTracker.removeFragment(t);t.stats.chunkCount++,r._handleFragmentLoadProgress(e)})).then((function(e){if(e){r.fragLoadError=0;var n=r.state;if(!r.fragContextChanged(t))return"payload"in e&&(r.log("Loaded fragment "+t.sn+" of level "+t.level),r.hls.trigger(u.Events.FRAG_LOADED,e),r.state===b.BACKTRACKING)?(r.fragmentTracker.backtrack(t,e),void r.resetFragmentLoading(t)):void r._handleFragmentLoadComplete(e);(n===b.FRAG_LOADING||n===b.BACKTRACKING||!r.fragCurrent&&n===b.PARSING)&&(r.fragmentTracker.removeFragment(t),r.state=b.IDLE)}})).catch((function(e){r.warn(e),r.resetFragmentLoading(t)}))},T.flushMainBuffer=function(t,e,n){if(void 0===n&&(n=null),t-e){var r={startOffset:t,endOffset:e,type:n};this.fragLoadError=0,this.hls.trigger(u.Events.BUFFER_FLUSHING,r)}},T._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(n){if(!n||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return n})).then((function(n){var r=e.hls,i=n.payload,a=t.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(e){var i=self.performance.now();return r.trigger(u.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:s,tdecrypt:i}}),n.payload=e,n}))}return n})).then((function(n){var r=e.fragCurrent,i=e.hls,a=e.levels;if(!a)throw new Error("init load aborted, missing levels");console.assert(a[t.level].details,"Level details are defined when init segment is loaded");var s=t.stats;e.state=b.IDLE,e.fragLoadError=0,t.data=new Uint8Array(n.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),n.frag===r&&i.trigger(u.Events.FRAG_BUFFERED,{stats:s,frag:r,part:null,id:t.type}),e.tick()})).catch((function(n){e.warn(n),e.resetFragmentLoading(t)}))},T.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},T.fragBufferedComplete=function(t,e){this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+y.default.toString(s.BufferHelper.getBuffered(this.mediaBuffer?this.mediaBuffer:this.media))),this.state=b.IDLE,this.tick()},T._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var n=t.frag,r=t.part,i=t.partsLoaded,a=!i||0===i.length||i.some((function(t){return!t})),s=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);e.flush(s)}},T._handleFragmentLoadProgress=function(t){},T._doFragLoad=function(t,e,n,i){var a=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(t.start,n||0),this.config.lowLatencyMode&&e){var s=e.partList;if(s&&i){n>t.end&&e.fragmentHint&&(t=e.fragmentHint);var o=this.getNextPart(s,t,n);if(o>-1){var l=s[o];return this.log("Loading part sn: "+t.sn+" p: "+l.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+o+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=b.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:t,part:s[o],targetBufferTime:n}),this.doFragPartsLoad(t,s,o,i).catch((function(t){return a.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(s,n))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),Object(r.isFiniteNumber)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=b.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:t,targetBufferTime:n}),this.fragmentLoader.load(t,i).catch((function(t){return a.handleFragLoadError(t)}))},T.doFragPartsLoad=function(t,e,n,r){var i=this;return new Promise((function(a,s){var o=[];!function n(l){var c=e[l];i.fragmentLoader.loadPart(t,c,r).then((function(r){o[c.index]=r;var s=r.part;i.hls.trigger(u.Events.FRAG_LOADED,r);var d=e[l+1];if(!d||d.fragment!==t)return a({frag:t,part:s,partsLoaded:o});n(l+1)})).catch(s)}(n)}))},T.handleFragLoadError=function(t){var e=t.data;return e&&e.details===l.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(u.Events.ERROR,e),null},T._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===b.PARSING){var n=e.frag,r=e.part,i=e.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,t.partial)}else this.fragCurrent||(this.state=b.IDLE)},T.getCurrentContext=function(t){var e=this.levels,n=t.level,r=t.sn,i=t.part;if(!e||!e[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=e[n],s=i>-1?Object(p.getPartWith)(a,r,i):null,o=s?s.fragment:Object(p.getFragmentWithSN)(a,r,this.fragCurrent);return o?{frag:o,part:s,level:a}:null},T.bufferFragmentData=function(t,e,n,r){if(t&&this.state===b.PARSING){var i=t.data1,a=t.data2,s=i;i&&a&&(s=Object(d.appendUint8Array)(i,a)),s&&s.length&&(this.hls.trigger(u.Events.BUFFER_APPENDING,{type:t.type,frag:e,part:n,chunkMeta:r,parent:e.type,data:s}),t.dropped&&t.independent&&!n&&this.flushBufferGap(e))}},T.flushBufferGap=function(t){var e=this.media;if(e)if(s.BufferHelper.isBuffered(e,e.currentTime)){var n=e.currentTime,r=s.BufferHelper.bufferInfo(e,n,0),i=Math.min(2*this.config.maxFragLookUpTolerance,.25*t.duration),a=Math.max(Math.min(t.start-i,r.end-i),n+i);t.start-a>i&&this.flushMainBuffer(a,t.start)}else this.flushMainBuffer(0,t.start)},T.getFwdBufferInfo=function(t,e){var n=this.config,i=this.getLoadPosition();if(!Object(r.isFiniteNumber)(i))return null;var a=s.BufferHelper.bufferInfo(t,i,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var o=this.fragmentTracker.getBufferedFrag(i,e);if(o&&a.nextStart<o.end)return s.BufferHelper.bufferInfo(t,i,Math.max(a.nextStart,n.maxBufferHole))}return a},T.getMaxBufferLength=function(t){var e,n=this.config;return e=t?Math.max(8*n.maxBufferSize/t,n.maxBufferLength):n.maxBufferLength,Math.min(e,n.maxMaxBufferLength)},T.reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=(t||e.maxBufferLength)&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},T.getNextFragment=function(t,e){var n,r,i=e.fragments,a=i.length;if(!a)return null;var s,o=this.config,u=i[0].start;if(e.live){var l=o.initialLiveManifestSize;if(a<l)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+l+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(e,i),this.startPosition=s?this.hls.liveSyncPosition||s.start:t)}else t<=u&&(s=i[0]);return s||(s=this.getFragmentAtPosition(t,o.lowLatencyMode?e.partEnd:e.fragmentEnd,e)),null===(n=s)||void 0===n||!n.initSegment||null!==(r=s)&&void 0!==r&&r.initSegment.data||this.bitrateTest||(s=s.initSegment),s},T.getNextPart=function(t,e,n){for(var r=-1,i=!1,a=!0,s=0,o=t.length;s<o;s++){var u=t[s];if(a=a&&!u.independent,r>-1&&n<u.start)break;var l=u.loaded;!l&&(i||u.independent||a)&&u.fragment===e&&(r=s),i=l}return r},T.loadedEndOfParts=function(t,e){var n=t[t.length-1];return n&&e>n.start&&n.loaded},T.getInitialLiveFragment=function(t,e){var n=this.fragPrevious,r=null;if(n){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=Object(h.findFragmentByPDT)(e,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=t.startSN&&i<=t.endSN){var a=e[i-t.startSN];n.cc===a.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(r=a).sn)}r||(r=Object(h.findFragWithCC)(e,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var s=this.hls.liveSyncPosition;null!==s&&(r=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return r},T.getFragmentAtPosition=function(t,e,n){var r,i=this.config,s=this.fragPrevious,o=n.fragments,u=n.endSN,l=n.fragmentHint,c=i.maxFragLookUpTolerance,d=!!(i.lowLatencyMode&&n.partList&&l);if(d&&l&&!this.bitrateTest&&(o=o.concat(l),u=l.sn),t<e){var f=t>e-c?0:c;r=Object(h.findFragmentByPTS)(s,o,t,f)}else r=o[o.length-1];if(r){var p=r.sn-n.startSN,g=s&&r.level===s.level,m=o[p+1];if(this.fragmentTracker.getState(r)===a.FragmentState.BACKTRACKED){r=null;for(var y=p;o[y]&&this.fragmentTracker.getState(o[y])===a.FragmentState.BACKTRACKED;)r=s?o[y--]:o[--y];r||(r=m)}else s&&r.sn===s.sn&&!d&&g&&(r.sn<u&&this.fragmentTracker.getState(m)!==a.FragmentState.OK?(this.log("SN "+r.sn+" just loaded, load next one: "+m.sn),r=m):r=null)}return r},T.synchronizeToLiveEdge=function(t){var e=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=t.edge,s=i>=t.fragments[0].start-e.maxFragLookUpTolerance&&i<=a;null!==r&&n.duration>r&&(i<r||!s)&&(!s&&n.readyState<4||i<a-(void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+a+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}},T.alignPlaylists=function(t,e){var n=this.levelLastLoaded,i=this.fragPrevious,a=null!==n?this.levels[n]:null,s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var o=t.fragments[0].start,u=!e,l=t.alignedSliding&&Object(r.isFiniteNumber)(o);if(u||!l&&!o){Object(f.alignStream)(i,a,t);var c=t.fragments[0].start;return this.log("Live playlist sliding: "+c.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+s),c}return o},T.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},T.setStartPosition=function(t,e){var n=this.startPosition;if(n<e&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=t.startTimeOffset;Object(r.isFiniteNumber)(i)?(n=e+i,i<0&&(n+=t.totalduration),n=Math.min(Math.max(e,n),e+t.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):t.live?n=this.hls.liveSyncPosition||e:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},T.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},T.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},T.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=b.IDLE)},T.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var n=e.frag;if(n&&n.type===t){var r=this.fragCurrent;console.assert(r&&n.sn===r.sn&&n.level===r.level&&n.urlId===r.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+t+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=b.FRAG_LOADING_WAITING_RETRY}else e.levelRetry?(t===v.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=b.IDLE):(o.logger.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=b.ERROR)}}},T.afterBufferFlushed=function(t,e,n){if(t){var r=s.BufferHelper.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,r,n),this.state===b.ENDED&&this.resetLoadingState()}},T.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=b.IDLE},T.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},T.updateLevelTiming=function(t,e,n,r){var i=this,a=n.details;console.assert(!!a,"level.details must be defined"),Object.keys(t.elementaryStreams).reduce((function(e,s){var o=t.elementaryStreams[s];if(o){var l=o.endPTS-o.startPTS;if(l<=0)return i.warn("Could not parse fragment "+t.sn+" "+s+" duration reliably ("+l+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),e||!1;var c=r?0:Object(p.updateFragPTSDTS)(a,t,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return i.hls.trigger(u.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:s,frag:t,start:o.startPTS,end:o.endPTS}),!0}return e}),!1)?(this.state=b.PARSED,this.hls.trigger(u.Events.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},T.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},(E=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,E),i}(i.default)},"./src/controller/buffer-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),o=n("./src/utils/buffer-helper.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./src/loader/fragment.ts"),c=n("./src/controller/buffer-operation-queue.ts"),d=Object(u.getMediaSource)(),f=/([ha]vc.)(?:\.[^.,]+)+/,h=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,n=e.media,r=e.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(e.updateMediaElementDuration(),t.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.Events.BUFFER_RESET,this.onBufferReset,this),t.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.Events.BUFFER_EOS,this.onBufferEos,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.Events.FRAG_PARSED,this.onFragParsed,this),t.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.Events.BUFFER_RESET,this.onBufferReset,this),t.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.Events.BUFFER_EOS,this.onBufferEos,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.Events.FRAG_PARSED,this.onFragParsed,this),t.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var n=2;(e.audio&&!e.video||!e.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var n=this.media=e.media;if(n&&d){var r=this.mediaSource=new d;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,n=this._objectUrl;if(e){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(r){a.logger.warn("[buffer-controller]: onMediaDetaching: "+r.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(n&&self.URL.revokeObjectURL(n),t.src===n?(t.removeAttribute("src"),t.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var n=t.sourceBuffer[e];try{n&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(n),t.sourceBuffer[e]=void 0)}catch(r){a.logger.warn("[buffer-controller]: Failed to reset the "+e+" buffer",r)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var n=this,r=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(r){var i=n.tracks[t];if(i&&"function"==typeof i.buffer.changeType){var a=e[t],s=a.codec,o=a.levelCodec,u=a.container;(i.levelCodec||i.codec).replace(f,"$1")!==(o||s).replace(f,"$1")&&n.appendChangeType(t,u+";codecs="+(o||s))}}else n.pendingTracks[t]=e[t]})),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[t];i&&(a.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),i.changeType(e)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){a.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};r.append(i,t)},e.onBufferAppending=function(t,e){var n=this,r=this.hls,u=this.operationQueue,l=this.tracks,c=e.data,d=e.type,f=e.frag,h=e.part,p=e.chunkMeta,g=p.buffering[d],m=self.performance.now();g.start=m;var y=f.stats.buffering,v=h?h.stats.buffering:null;0===y.start&&(y.start=m),v&&0===v.start&&(v.start=m);var _=l.audio,b="audio"===d&&1===p.id&&"audio/mpeg"===(null==_?void 0:_.container);u.append({execute:function(){if(g.executeStart=self.performance.now(),b){var t=n.sourceBuffer[d];if(t){var e=f.start-t.timestampOffset;Math.abs(e)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+f.start+" (delta: "+e+") sn: "+f.sn+")"),t.timestampOffset=f.start)}}n.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var t=self.performance.now();g.executeEnd=g.end=t,0===y.first&&(y.first=t),v&&0===v.first&&(v.first=t);var e=n.sourceBuffer,r={};for(var a in e)r[a]=o.BufferHelper.getBuffered(e[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:d,frag:f,part:h,chunkMeta:p,parent:f.type,timeRanges:r})},onError:function(t){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",t);var e={type:s.ErrorTypes.MEDIA_ERROR,parent:f.type,details:s.ErrorDetails.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=s.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,e.details=s.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),r.trigger(i.Events.ERROR,e)}},d)},e.onBufferFlushing=function(t,e){var n=this,r=this.operationQueue,s=function(t){return{execute:n.removeExecutor.bind(n,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:t})},onError:function(e){a.logger.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?r.append(s(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){r.append(s(t),t)}))},e.onFragParsed=function(t,e){var n=this,r=e.frag,s=e.part,o=[],u=s?s.elementaryStreams:r.elementaryStreams;u[l.ElementaryStreamTypes.AUDIOVIDEO]?o.push("audiovideo"):(u[l.ElementaryStreamTypes.AUDIO]&&o.push("audio"),u[l.ElementaryStreamTypes.VIDEO]&&o.push("video")),0===o.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers((function(){var t=self.performance.now();r.stats.buffering.end=t,s&&(s.stats.buffering.end=t),n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:s,stats:s?s.stats:r.stats,id:r.type})}),o)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var n=this;this.getSourceBufferTypes().reduce((function(t,r){var i=n.sourceBuffer[r];return e.type&&e.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),t&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var t=n.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var n=e.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==e){var s=this.getSourceBufferTypes();if(s.length){var u=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(r.isFiniteNumber)(u)&&!(u<0)){var l=n.currentTime,c=e.levelTargetDuration,d=Math.max(u,c),f=Math.floor(l/c)*c-d;s.forEach((function(n){var r=a[n];if(r){var s=o.BufferHelper.getBuffered(r);s.length>0&&f>s.start(0)&&(t.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:f}),e.live&&t.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:f}),t.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:f,type:n}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,n=this.mediaSource,i=t.fragments[0].start+t.totalduration,s=this.media.duration,o=Object(r.isFiniteNumber)(n.duration)?n.duration:0;t.live&&e.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(t)):(i>o&&i>s||!Object(r.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),n.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,n=t.fragments;if(n.length&&t.live&&null!=e&&e.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+t.totalduration);e.setLiveSeekableRange(r,i)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!t||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var o in t)if(!e[o]){var u=t[o];if(!u)throw Error("source buffer exists for track "+o+", however track does not");var l=u.levelCodec||u.codec,c=u.container+";codecs="+l;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=e[o]=n.addSourceBuffer(c),f=o;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[o]={buffer:d,codec:l,container:u.container,levelCodec:u.levelCodec,id:u.id},r++}catch(h){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+h.message),this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,mimeType:c})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){a.logger.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(t);n&&n.onError(e)},e.removeExecutor=function(t,e,n){var i=this.media,s=this.mediaSource,o=this.operationQueue,u=this.sourceBuffer[t];if(!i||!s||!u)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void o.shiftAndExecuteNext(t);var l=Object(r.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(r.isFiniteNumber)(s.duration)?s.duration:1/0,d=Math.max(0,e),f=Math.min(n,l,c);f>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+f+"] from the "+t+" SourceBuffer"),console.assert(!u.updating,t+" sourceBuffer must not be updating"),u.remove(d,f)):o.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var n=this.operationQueue,r=this.sourceBuffer[e];if(!r)return a.logger.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(e);r.ended=!1,console.assert(!r.updating,e+" sourceBuffer must not be updating"),r.appendBuffer(t)},e.blockBuffers=function(t,e){var n=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var r=this.operationQueue,i=e.map((function(t){return r.appendBlocker(t)}));Promise.all(i).then((function(){t(),e.forEach((function(t){var e=n.sourceBuffer[t];e&&e.updating||r.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,n){var r=this.sourceBuffer[t];if(r){var i=n.bind(this,t);this.listeners[t].push({event:e,listener:i}),r.addEventListener(e,i)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}()},"./src/controller/buffer-operation-queue.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));var r=n("./src/utils/logger.ts"),i=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var n=this.queues[e];n.push(t),1===n.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,n=new Promise((function(t){e=t}));return this.append({execute:e,onStart:function(){},onComplete:function(){},onError:function(){}},t),n},e.executeNext=function(t){var e=this.buffers[t],n=this.queues[t];if(n.length){var i=n[0];try{i.execute()}catch(a){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(a),e&&e.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}()},"./src/controller/cap-level-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.default=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,n,a,s=t.prototype;return s.setStreamController=function(t){this.streamController=t},s.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},s.registerListeners=function(){var t=this.hls;t.on(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.unregisterListener=function(){var t=this.hls;t.off(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.onFpsDropLevelCapping=function(e,n){t.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},s.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},s.onManifestParsed=function(t,e){var n=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,n.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},s.getMaxLevel=function(e){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter((function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,n){if(!t||!t.length)return-1;for(var r,i,a=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=n)&&(r=o,!(i=t[s+1])||r.width!==i.width||r.height!==i.height)){a=s;break}}return a},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(e){}return t}}],(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&i(e.prototype,n),a&&i(e,a),t}()},"./src/controller/cmcd-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n("./src/events.ts"),i=n("./src/types/cmcd.ts"),a=n("./src/utils/buffer-helper.ts"),s=n("./src/utils/logger.ts");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var f=function(){function t(e){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(t){try{n.apply(t,{ot:i.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(e){s.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(t){try{var e=t.frag,r=n.hls.levels[e.level],a=n.getObjectType(e),o={d:1e3*e.duration,ot:a};a!==i.CMCDObjectType.VIDEO&&a!==i.CMCDObjectType.AUDIO&&a!=i.CMCDObjectType.MUXED||(o.br=r.bitrate/1e3,o.tb=n.getTopBandwidth(a)/1e3,o.bl=n.getBufferLength(a)),n.apply(t,o)}catch(u){s.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=e;var r=this.config=e.config,a=r.cmcd;null!=a&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||t.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.on(r.Events.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.off(r.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},e.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var n,r;this.audioBuffer=null===(n=e.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(r=e.tracks.video)||void 0===r?void 0:r.buffer},e.createData=function(){var t;return{v:i.CMCDVersion,sf:i.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,n){if(void 0===n&&(n={}),d(n,this.createData()),this.starved&&(n.ot===i.CMCDObjectType.INIT||n.ot===i.CMCDObjectType.VIDEO||n.ot===i.CMCDObjectType.MUXED)&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var r=t.toHeaders(n);if(!Object.keys(r).length)return;e.headers||(e.headers={}),d(e.headers,r)}else{var a=t.toQuery(n);if(!a)return;e.url=t.appendQueryToUri(e.url,a)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?i.CMCDObjectType.TIMED_TEXT:"initSegment"===t.sn?i.CMCDObjectType.INIT:"audio"===e?i.CMCDObjectType.AUDIO:"main"===e?this.hls.audioTracks.length?i.CMCDObjectType.VIDEO:i.CMCDObjectType.MUXED:void 0},e.getTopBandwidth=function(t){var e,n=0,r=this.hls;if(t===i.CMCDObjectType.AUDIO)e=r.audioTracks;else{var a=r.maxAutoLevel;e=r.levels.slice(0,a>-1?a+1:r.levels.length)}for(var s,o=l(e);!(s=o()).done;){var u=s.value;u.bitrate>n&&(n=u.bitrate)}return n>0?n:NaN},e.getBufferLength=function(t){var e=this.hls.media,n=t===i.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&e?1e3*a.BufferHelper.bufferInfo(n,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.applyPlaylistData,e=this.config.pLoader||this.config.loader;return function(){function n(t){this.loader=void 0,this.loader=new e(t)}var r=n.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},u(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n}()},e.createFragmentLoader=function(){var t=this.applyFragmentData,e=this.config.fLoader||this.config.loader;return function(){function n(t){this.loader=void 0,this.loader=new e(t)}var r=n.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},u(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,n=[],r=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},i=function(t){return Math.round(t)},a=function(t){return 100*i(t/100)},s={br:i,d:i,bl:a,dl:a,mtp:a,nor:function(t){return encodeURIComponent(t)},rtp:a,tb:i},o=l(Object.keys(t||{}).sort());!(e=o()).done;){var u=e.value,c=t[u];if(r(c)&&!("v"===u&&1===c||"pr"==u&&1===c)){var d=s[u];d&&(c=d(c));var f,h=typeof c;f="ot"===u||"sf"===u||"st"===u?u+"="+c:"boolean"===h?u:"number"===h?u+"="+c:u+"="+JSON.stringify(c),n.push(f)}}return n.join(",")},t.toHeaders=function(e){for(var n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(e);s<o.length;s++){var u=o[s];i[null!=a[u]?a[u]:1][u]=e[u]}for(var l=0;l<i.length;l++){var c=t.serialize(i[l]);c&&(n["CMCD-"+r[l]]=c)}return n},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var n=t.includes("?")?"&":"?";return""+t+n+e},t}()},"./src/controller/eme-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),s=n("./src/utils/mediakeys-helper.ts");e.default=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,n=t.prototype;return n.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},n._registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},n._unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},n.getLicenseServerUrl=function(t){switch(t){case s.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},n._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n,r){switch(t){case s.KeySystems.WIDEVINE:return function(t,e,n){var r={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[r]}(e,n,r);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var o=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=o.then((function(e){return r._onMediaKeySystemAccessObtained(t,e)})),o.catch((function(e){a.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},n._onMediaKeySystemAccessObtained=function(t,e){var n=this;a.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return r.mediaKeys=e,a.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return i.catch((function(t){a.logger.error("Failed to create media-keys:",t)})),i},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},n._onNewMediaKeySession=function(t){var e=this;a.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},n._onKeySessionMessage=function(t,e){a.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){a.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},n.onMediaEncrypted=function(t){var e=this;if(a.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){e._media&&(e._attemptSetMediaKeys(n),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(n).catch(n)},n._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(t,e){var n=this,s=this._mediaKeysList[0];if(!s)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(s.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var o=s.mediaKeysSession;if(!o)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+t+'" init data type'),s.mediaKeysSessionInitialized=!0,o.generateRequest(t,e).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(t){a.logger.error("Error generating key-session request:",t),n.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},n._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,t),i=void 0}catch(s){a.logger.error(s)}try{r.readyState||r.open("POST",t,!0),i&&i.call(this.hls,r,t)}catch(s){throw new Error("issue setting up KeySystem license XHR "+s)}return r},n._onLicenseRequestReadyStageChange=function(t,e,n,s){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var o=t.response,u=this._licenseResponseCallback;if(u)try{o=u.call(this.hls,t,e)}catch(l){a.logger.error(l)}s(o)}else{if(a.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});a.logger.warn("Retrying license request, "+(3-this._requestLicenseFailureCount+1)+" attempts left"),this._requestLicense(n,s)}}},n._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case s.KeySystems.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},n._requestLicense=function(t,e){a.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var s=this.getLicenseServerUrl(n.mediaKeySystemDomain),o=this._createLicenseXhr(s,t,e);a.logger.log("Sending license request to URL: "+s);var u=this._generateLicenseRequestChallenge(n,t);o.send(u)}catch(l){a.logger.error("Failure requesting DRM license: "+l),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(t,e){if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},n.onManifestParsed=function(t,e){if(this._emeEnabled){var n=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),r=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(s.KeySystems.WIDEVINE,n,r)}},(e=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/fps-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/logger.ts");e.default=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,n){var a=performance.now();if(e){if(this.lastTime){var s=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,u=1e3*s/(a-this.lastTime),l=this.hls;if(l.trigger(r.Events.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:n}),u>0&&s>l.config.fpsDroppedMonitoringThreshold*o){var c=l.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(l.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:c-=1,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}()},"./src/controller/fragment-finders.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"findFragmentByPDT",(function(){return a})),n.d(e,"findFragmentByPTS",(function(){return s})),n.d(e,"fragmentWithinToleranceTest",(function(){return o})),n.d(e,"pdtWithinToleranceTest",(function(){return u})),n.d(e,"findFragWithCC",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/binary-search.ts");function a(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(r.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(u(e,n,a))return a}return null}function s(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=null;return t?a=e[t.sn-e[0].sn+1]||null:0===n&&0===e[0].start&&(a=e[0]),a&&0===o(n,r,a)?a:i.default.search(e,o.bind(null,n,r))||a}function o(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function u(t,e,n){var r=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>t}function l(t,e){return i.default.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}},"./src/controller/fragment-tracker.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"FragmentState",(function(){return r})),n.d(e,"FragmentTracker",(function(){return s}));var r,i=n("./src/events.ts"),a=n("./src/types/loader.ts");!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(r||(r={}));var s=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===a.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var s=r[i],o=s?s.end:n.appendedPTS;if(s.start<=t&&void 0!==o&&t<=o)return i>9&&(this.activeParts=r.slice(i-9)),s}else if(n.start<=t&&void 0!==n.appendedPTS&&t<=n.appendedPTS)return n}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null==a?void 0:a.body.type)===e&&a.buffered){var s=a.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a)if(a.buffered){var s=a.range[t];s&&s.time.some((function(t){var n=!r.isTimeBuffered(t.startPTS,t.endPTS,e);return n&&r.removeFragment(a.body),n}))}else a.body.type===n&&r.removeFragment(a.body)}))},e.detectPartialFragments=function(t){var e=this,n=this.timeRanges,r=t.frag,i=t.part;if(n&&"initSegment"!==r.sn){var a=u(r),s=this.fragments[a];s&&(Object.keys(n).forEach((function(t){var a=r.elementaryStreams[t];a&&(s.range[t]=e.getBufferedTimes(r,i,null!==i||!0===a.partial,n[t]))})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},e.fragBuffered=function(t){var e=u(t),n=this.fragments[e];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},e.getBufferedTimes=function(t,e,n,r){for(var i={time:[],partial:n},a=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,u=t.maxStartPTS||a,l=0;l<r.length;l++){var c=r.start(l)-this.bufferPadding,d=r.end(l)+this.bufferPadding;if(u>=c&&o<=d){i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(s,r.end(l))});break}if(a<d&&s>c)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(s,r.end(l))});else if(s<=c)break}return i},e.getPartialFragment=function(t){var e,n,r,i=null,a=0,s=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach((function(l){var c=u[l];c&&o(c)&&(r=c.body.end+s,t>=(n=c.body.start-s)&&t<=r&&(e=Math.min(t-n,r-t),a<=e&&(i=c.body,a=e)))})),i},e.getState=function(t){var e=u(t),n=this.fragments[e];return n?n.buffered?o(n)?r.PARTIAL:r.OK:n.backtrack?r.BACKTRACKED:r.APPENDING:r.NOT_LOADED},e.backtrack=function(t,e){var n=u(t),r=this.fragments[n];if(!r||r.backtrack)return null;var i=r.backtrack=e||r.loaded;return r.loaded=null,i},e.getBacktrackData=function(t){var e=u(t),n=this.fragments[e];if(n){var r,i=n.backtrack;if(null!=i&&null!==(r=i.payload)&&void 0!==r&&r.byteLength)return i;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,t>=r&&e<=i)return!0;if(e<=r)return!1}return!1},e.onFragLoaded=function(t,e){var n=e.frag;if("initSegment"!==n.sn&&!n.bitrateTest&&!e.part){var r=u(n);this.fragments[r]={body:n,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var n=this,r=e.frag,i=e.part,s=e.timeRanges;if(r.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(i)}else this.activeParts=null;this.timeRanges=s,Object.keys(s).forEach((function(t){var e=s[t];if(n.detectEvictedFragments(t,e),!i)for(var a=0;a<e.length;a++)r.appendedPTS=Math.max(e.end(a),r.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=u(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var s=a.body;s.type===n&&s.start<e&&s.end>t&&r.removeFragment(s)}}))},e.removeFragment=function(t){var e=u(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function o(t){var e,n;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(n=t.range.audio)||void 0===n?void 0:n.partial))}function u(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}},"./src/controller/gap-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"STALL_MINIMUM_DURATION_MS",(function(){return o})),n.d(e,"MAX_START_GAP_JUMP",(function(){return u})),n.d(e,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return l})),n.d(e,"SKIP_BUFFER_RANGE_START",(function(){return c})),n.d(e,"default",(function(){return d}));var r=n("./src/utils/buffer-helper.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts"),s=n("./src/utils/logger.ts"),o=250,u=2,l=.1,c=.05,d=function(){function t(t,e,n,r){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,n=this.media,i=this.stalled,a=n.currentTime,l=n.seeking,c=this.seeking&&!l,d=!this.seeking&&l;if(this.seeking=l,a===t){if((d||c)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&r.BufferHelper.getBuffered(n).length){var f=r.BufferHelper.bufferInfo(n,a,0),h=f.nextStart||0;if(f.len>0||h){if(l){var p=f.len>u,g=!h||h-a>u&&!this.fragmentTracker.getPartialFragment(a);if(p||g)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var m,y=Math.max(h,f.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,_=null==v||null===(m=v.details)||void 0===m?void 0:m.live;if(y>0&&y<=(_?2*v.details.targetduration:u))return void this._trySkipBufferHole(null)}var b=self.performance.now();if(null!==i){var E=b-i;!l&&E>=o&&this._reportStall(f.len);var T=r.BufferHelper.bufferInfo(n,a,e.maxBufferHole);this._tryFixBufferStall(T,E)}else this.stalled=b}}}else if(this.moved=!0,null!==i){if(this.stallReported){var S=self.performance.now()-i;s.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker.getPartialFragment(this.media.currentTime);r&&this._trySkipBufferHole(r)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(s.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,s.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,o=this.media,u=o.currentTime,d=0,f=r.BufferHelper.getBuffered(o),h=0;h<f.length;h++){var p=f.start(h);if(u+e.maxBufferHole>=d&&u<p){var g=Math.max(p+c,o.currentTime+l);return s.logger.warn("skipping hole, adjusting currentTime from "+u+" to "+g),this.moved=!0,this.stalled=null,o.currentTime=g,t&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+u+" to "+g,frag:t}),g}d=f.end(h)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,o=(this.nudgeRetry||0)+1;if(this.nudgeRetry=o,o<t.nudgeMaxRetry){var u=r+o*t.nudgeOffset;s.logger.warn("Nudging 'currentTime' from "+r+" to "+u),n.currentTime=u,e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}()},"./src/controller/id3-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/demux/id3.ts");e.default=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Object(i.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var n=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,s=0;s<r.length;s++){var o=a.getID3Frames(r[s].data);if(o){var u=r[s].pts,l=s<r.length-1?r[s+1].pts:n.end;l-u<=0&&(l=u+.25);for(var c=0;c<o.length;c++){var d=o[c];if(!a.isTimeStampFrame(d)){var f=new i(u,l,"");f.value=d,this.id3Track.addCue(f)}}}}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,a=e.type;if(!a||"audio"===a){var s=this.id3Track;s&&Object(i.removeCuesInRange)(s,n,r)}},t}()},"./src/controller/latency-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var r=n("./src/errors.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts");var s=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,n=t.prototype;return n.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},n.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},n.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},n.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},n.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},n.onLevelUpdated=function(t,e){var n=e.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},n.onError=function(t,e){e.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},n.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.maxLiveSyncPlaybackRate;if(r.lowLatencyMode&&1!==i){var a=this.targetLatency;if(null!==a){var s=n-a,o=Math.min(this.maxLatency,a+e.targetduration);if(e.live&&s<o&&s>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,i)),l=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,l))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},n.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},n.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},(e=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.targetduration,n=this.config,r=n.liveSyncDuration,i=this.hls.userConfig,a=n.lowLatencyMode&&t.partHoldBack||t.holdBack;return(i.liveSyncDuration||i.liveSyncDurationCount||0===a)&&(a=void 0!==r?r:n.liveSyncDurationCount*e),a+Math.min(1*this.stallCount,e)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,n=this.levelDetails;if(null===t||null===e||null===n)return null;var r=n.edge,i=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(r-n.totalduration,t-e-this.edgeStalled),i)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;return null===t?0:Math.max(t.age-3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var n=t.buffered.length;return n?t.buffered.end(n-1):e.edge-this.currentTime}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/controller/level-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n("./src/types/level.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/utils/codecs.ts"),o=n("./src/controller/level-helper.ts"),u=n("./src/controller/base-playlist-controller.ts"),l=n("./src/types/loader.ts");function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=function(t){var e,n;function u(e){var n;return(n=t.call(this,e,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=t,(e=u).prototype=Object.create(n.prototype),e.prototype.constructor=e,d(e,n);var h,p=u.prototype;return p._registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.ERROR,this.onError,this)},p._unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.ERROR,this.onError,this)},p.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},p.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},p.onManifestLoaded=function(t,e){var n,u,l=[],c=[],d=[],h={},p=!1,g=!1,m=!1;if(e.levels.forEach((function(t){var e=t.attrs;p=p||!(!t.width||!t.height),g=g||!!t.videoCodec,m=m||!!t.audioCodec,f&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var n=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(u=h[n])?u.url.push(t.url):(u=new r.Level(t),h[n]=u,l.push(u)),e&&(e.AUDIO&&Object(o.addGroupId)(u,"audio",e.AUDIO),e.SUBTITLES&&Object(o.addGroupId)(u,"text",e.SUBTITLES))})),(p||g)&&m&&(l=l.filter((function(t){return!!t.videoCodec||!(!t.width||!t.height)}))),l=l.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||Object(s.isCodecSupportedInMp4)(e,"audio"))&&(!n||Object(s.isCodecSupportedInMp4)(n,"video"))})),e.audioTracks&&(c=e.audioTracks.filter((function(t){return!t.audioCodec||Object(s.isCodecSupportedInMp4)(t.audioCodec,"audio")})),Object(o.assignTrackIdsByGroup)(c)),e.subtitles&&(d=e.subtitles,Object(o.assignTrackIdsByGroup)(d)),l.length>0){n=l[0].bitrate,l.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=l;for(var y=0;y<l.length;y++)if(l[y].bitrate===n){this._firstLevel=y,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+n);break}var v={levels:l,audioTracks:c,subtitleTracks:d,firstLevel:this._firstLevel,stats:e.stats,audio:m,video:g,altAudio:!(m&&!g)&&c.some((function(t){return!!t.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,v),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},p.onError=function(e,n){if(t.prototype.onError.call(this,e,n),!n.fatal){var r=n.context,i=this._levels[this.currentLevelIndex];if(r&&(r.type===l.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&r.groupId===i.audioGroupIds[i.urlId]||r.type===l.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&r.groupId===i.textGroupIds[i.urlId]))this.redundantFailover(this.currentLevelIndex);else{var s,o=!1,u=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var c=this._levels[n.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(s=n.frag.level)):s=n.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(u=!1),s=r.level),o=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:s=n.level,o=!0}void 0!==s&&this.recoverLevel(n,s,o,u)}}},p.recoverLevel=function(t,e,n,r){var i=t.details,a=this._levels[e];if(a.loadError++,n){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(r){var s=a.url.length;if(s>1&&a.loadError<s)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var o=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(i+": switch to "+o),t.levelRetry=!0,this.hls.nextAutoLevel=o)}}},p.redundantFailover=function(t){var e=this._levels[t],n=e.url.length;if(n>1){var r=(e.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach((function(t){t.urlId=r})),this.level=t}},p.onFragLoaded=function(t,e){var n=e.frag;if(void 0!==n&&n.type===l.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},p.onLevelLoaded=function(t,e){var n,r,i=e.level,a=e.details,s=this._levels[i];if(!s)return this.warn("Invalid level index "+i),void(null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(i,e,s.details)):null!==(n=e.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},p.onAudioTrackSwitched=function(t,e){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[e.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},p.loadPlaylist=function(t){var e=this.currentLevelIndex,n=this._levels[e];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,a=n.url[r];if(t)try{a=t.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+r+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:e,id:r,deliveryDirectives:t||null})}},p.removeLevel=function(t,e){var n=function(t,n){return n!==e},r=this._levels.filter((function(r,i){return i!==t||r.url.length>1&&void 0!==e&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)})).map((function(t,e){var n=t.details;return null!=n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=r,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:r})},(h=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==t||null===(e=n[t])||void 0===e||!e.details)){if(t<0||t>=n.length){var r=t<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:r,reason:"invalid level idx"}),r)return;t=Math.min(t,n.length-1)}this.clearTimer();var s=this.currentLevelIndex,o=n[s],u=n[t];this.log("switching to level "+t+" from "+s),this.currentLevelIndex=t;var l=c({},u,{level:t,maxBitrate:u.maxBitrate,uri:u.uri,urlId:u.urlId});delete l._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,l);var d=u.details;if(!d||d.live){var f=this.switchParams(u.uri,null==o?void 0:o.details);this.loadPlaylist(f)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,h),u}(u.default)},"./src/controller/level-helper.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"addGroupId",(function(){return a})),n.d(e,"assignTrackIdsByGroup",(function(){return s})),n.d(e,"updatePTS",(function(){return o})),n.d(e,"updateFragPTSDTS",(function(){return l})),n.d(e,"mergeDetails",(function(){return c})),n.d(e,"mapPartIntersection",(function(){return d})),n.d(e,"mapFragmentIntersection",(function(){return f})),n.d(e,"adjustSliding",(function(){return h})),n.d(e,"addSliding",(function(){return p})),n.d(e,"computeReloadInterval",(function(){return g})),n.d(e,"getFragmentWithSN",(function(){return m})),n.d(e,"getPartWith",(function(){return y}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts");function a(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function s(t){var e={};t.forEach((function(t){var n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++}))}function o(t,e,n){u(t[e],t[n])}function u(t,e){var n=e.startPTS;if(Object(r.isFiniteNumber)(n)){var i,a=0;e.sn>t.sn?(a=n-t.start,i=t):(a=t.start-n,i=e),i.duration!==a&&(i.duration=a)}else e.start=e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?t.start+(t.minEndPTS-t.start):t.start+t.duration:Math.max(t.start-e.duration,0)}function l(t,e,n,a,s,o){a-n<=0&&(i.logger.warn("Fragment should have a positive duration",e),a=n+e.duration,o=s+e.duration);var l=n,c=a,d=e.startPTS,f=e.endPTS;if(Object(r.isFiniteNumber)(d)){var h=Math.abs(d-n);e.deltaPTS=Object(r.isFiniteNumber)(e.deltaPTS)?Math.max(h,e.deltaPTS):h,l=Math.max(n,d),n=Math.min(n,d),s=Math.min(s,e.startDTS),c=Math.min(a,f),a=Math.max(a,f),o=Math.max(o,e.endDTS)}e.duration=a-n;var p=n-e.start;e.appendedPTS=a,e.start=e.startPTS=n,e.maxStartPTS=l,e.startDTS=s,e.endPTS=a,e.minEndPTS=c,e.endDTS=o;var g,m=e.sn;if(!t||m<t.startSN||m>t.endSN)return 0;var y=m-t.startSN,v=t.fragments;for(v[y]=e,g=y;g>0;g--)u(v[g],v[g-1]);for(g=y;g<v.length-1;g++)u(v[g],v[g+1]);return t.fragmentHint&&u(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,p}function c(t,e){for(var n=null,a=t.fragments,s=a.length-1;s>=0;s--){var o=a[s].initSegment;if(o){n=o;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var u,c=0;if(f(t,e,(function(t,i){t.relurl&&(c=t.cc-i.cc),Object(r.isFiniteNumber)(t.startPTS)&&Object(r.isFiniteNumber)(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.appendedPTS=t.appendedPTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(u=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment&&(i.initSegment=t.initSegment,n=t.initSegment)})),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null===(e=n)||void 0===e?void 0:e.relurl)||(t.initSegment=n)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=e.skippedSegments;p--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var g=e.fragments;if(c){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var m=0;m<g.length;m++)g[m].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),d(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),u?l(e,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS):h(t,e),g.length&&(e.totalduration=e.edge-g[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var y=e.advancedDateTime;if(e.advanced&&y){var v=e.edge;e.driftStart||(e.driftStartTime=y,e.driftStart=v),e.driftEndTime=y,e.driftEnd=v}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function d(t,e,n){if(t&&e)for(var r=0,i=0,a=t.length;i<=a;i++){var s=t[i],o=e[i+r];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):r--}}function f(t,e,n){for(var r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=i;l<=a;l++){var c=u[s+l],d=o[l];r&&!d&&l<r&&(d=e.fragments[l]=c),c&&d&&n(c,d)}}function h(t,e){var n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||p(e,r[n].start)}function p(t,e){if(e){for(var n=t.fragments,r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function g(t,e){var n,r=1e3*t.levelTargetDuration,i=r/2,a=t.age,s=a>0&&a<3*r,o=e.loading.end-e.loading.start,u=t.availabilityDelay;if(!1===t.updated)if(s){var l=333*t.misses;n=Math.max(Math.min(i,2*o),l),t.availabilityDelay=(t.availabilityDelay||0)+n}else n=i;else s?(u=Math.min(u||r/2,a),t.availabilityDelay=u,n=u+r-a):n=r-o;return Math.round(n)}function m(t,e,n){if(!t||!t.details)return null;var r=t.details,i=r.fragments[e-r.startSN];return i||((i=r.fragmentHint)&&i.sn===e?i:e<r.startSN&&n&&n.sn===e?n:null)}function y(t,e,n){if(!t||!t.details)return null;var r=t.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===e)return a}return null}},"./src/controller/stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y}));var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/is-supported.ts"),s=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),d=n("./src/demux/transmuxer-interface.ts"),f=n("./src/types/transmuxer.ts"),h=n("./src/controller/gap-controller.ts"),p=n("./src/errors.ts"),g=n("./src/utils/logger.ts");function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){var e,n;function y(e,n){var r;return(r=t.call(this,e,n,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.stalled=!1,r.couldBacktrack=!1,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=t,(e=y).prototype=Object.create(n.prototype),e.prototype.constructor=e,m(e,n);var v,_=y.prototype;return _._registerListeners=function(){var t=this.hls;t.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(s.Events.ERROR,this.onError,this),t.on(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(s.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var t=this.hls;t.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(s.Events.ERROR,this.onError,this),t.off(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(s.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},_.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},_.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},_.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var t,e=this.levels,n=null==e||null===(t=e[this.level])||void 0===t?void 0:t.details;if(n&&(!n.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(n))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var r,a=self.performance.now(),s=this.retryDate;(!s||a>=s||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},_.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},_.doTickIdle=function(){var t,e,n=this.hls,r=this.levels,a=this.media,o=n.nextLoadLevel;if(null!==this.levelLastLoaded&&(a||!this.startFragRequested&&n.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&r&&r[o]){var d=r[o];this.level=n.nextLoadLevel=o;var f=d.details;if(!f||this.state===i.State.WAITING_LEVEL||f.live&&this.levelLastLoaded!==o)this.state=i.State.WAITING_LEVEL;else{var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:a,l.PlaylistLevelType.MAIN);if(null!==h&&!(h.len>=this.getMaxBufferLength(d.maxBitrate))){if(this._streamEnded(h,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(s.Events.BUFFER_EOS,p),void(this.state=i.State.ENDED)}var g=h.end,m=this.getNextFragment(g,f);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn){var y=m.sn-f.startSN;y>1&&this.fragmentTracker.removeFragment(m=f.fragments[y-1])}m&&this.fragmentTracker.getState(m)===u.FragmentState.OK&&this.nextLoadPosition>g&&(this.afterBufferFlushed(a,this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO,l.PlaylistLevelType.MAIN),m=this.getNextFragment(this.nextLoadPosition,f)),m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),"identity"!==(null===(t=m.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=m.decryptdata)&&void 0!==e&&e.key?this.loadFragment(m,f,g):this.loadKey(m,f))}}}},_.loadFragment=function(e,n,r){var i,a=this.fragmentTracker.getState(e);if(this.fragCurrent=e,a===u.FragmentState.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);a=u.FragmentState.NOT_LOADED}a===u.FragmentState.NOT_LOADED||a===u.FragmentState.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,r)):a===u.FragmentState.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},_.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,l.PlaylistLevelType.MAIN);return e&&"fragment"in e?e.fragment:e},_.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,l.PlaylistLevelType.MAIN)},_.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},_.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},_.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var n,r=this.getAppendedFrag(e.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!e.paused&&t){var i=this.fragLastKbps;n=i&&this.fragCurrent?this.fragCurrent.duration*t[this.hls.nextLoadLevel].maxBitrate/(1e3*i)+1:0}else n=0;var a=this.getBufferedFrag(e.currentTime+n);if(a){var s=this.followingBufferedFrag(a);if(s){this.abortCurrentFrag();var o=s.duration,u=Math.max(a.end,(s.maxStartPTS?s.maxStartPTS:s.start)+Math.min(Math.max(o-this.config.maxFragLookUpTolerance,.5*o),.75*o));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},_.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},_.flushMainBuffer=function(e,n){t.prototype.flushMainBuffer.call(this,e,n,this.altAudio?"video":null)},_.onMediaAttached=function(e,n){t.prototype.onMediaAttached.call(this,e,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new h.default(this.config,r,this.fragmentTracker,this.hls)},_.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},_.onMediaPlaying=function(){this.tick()},_.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(r.isFiniteNumber)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},_.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(s.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},_.onManifestParsed=function(t,e){var n,r=!1,i=!1;e.levels.forEach((function(t){(n=t.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i&&!Object(a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},_.onLevelLoading=function(t,e){var n=this.levels;if(n&&this.state===i.State.IDLE){var r=n[e.level];(!r.details||r.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(r.details))&&(this.state=i.State.WAITING_LEVEL)}},_.onLevelLoaded=function(t,e){var n,r=this.levels,a=e.level,o=e.details;if(r){this.log("Level "+a+" loaded ["+o.startSN+","+o.endSN+"], cc ["+o.startCC+", "+o.endCC+"] duration:"+o.totalduration);var u=this.fragCurrent;!u||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||u.level!==e.level&&u.loader&&(this.state=i.State.IDLE,u.loader.abort());var l=r[a],c=0;if(o.live||null!==(n=l.details)&&void 0!==n&&n.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,l.details)}if(l.details=o,this.levelLastLoaded=a,this.hls.trigger(s.Events.LEVEL_UPDATED,{details:o,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=i.State.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}else this.warn("Levels were reset while loading level "+a)},_._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,i=t.payload,a=this.levels;if(a){var s=a[n.level],o=s.details;if(o){var u=s.videoCodec,c=o.PTSKnown||!o.live,h=null===(e=n.initSegment)||void 0===e?void 0:e.data,p=this._getAudioCodec(s),g=this.transmuxer=this.transmuxer||new d.default(this.hls,l.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,y=new f.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,m,-1!==m);g.push(i,h,p,u,n,r,o.totalduration,c,y,this.initPTS[n.cc])}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},_.onAudioTrackSwitching=function(t,e){var n=this.altAudio,r=e.id;if(!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;null!=i&&i.loader&&(this.log("Switching to main audio track, cancel main fragment load"),i.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var a=this.hls;n&&a.trigger(s.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(s.Events.AUDIO_TRACK_SWITCHED,{id:r})}},_.onAudioTrackSwitched=function(t,e){var n=!!this.hls.audioTracks[e.id].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},_.onBufferCreated=function(t,e){var n,r,i=e.tracks,a=!1;for(var s in i){var o=i[s];if("main"===o.id){if(r=s,n=o,"video"===s){var u=i[s];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},_.onFragBuffered=function(t,e){var n=e.frag,r=e.part;if(!n||n.type===l.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},_.onError=function(t,e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.MAIN,e);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(e.fatal?(this.warn(""+e.details),this.state=i.State.ERROR):e.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},_.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var n=o.BufferHelper.getBuffered(t);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},_.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},_.onBufferFlushed=function(t,e){var n=e.type;(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,n,l.PlaylistLevelType.MAIN)},_.onLevelsUpdated=function(t,e){this.levels=e.levels},_.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},_.seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(n>=0&&e<n){if(t.seeking)return void g.logger.log("could not seek to "+n+", already seeking at "+e);var r=o.BufferHelper.getBuffered(t),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(g.logger.log("adjusting start position by "+i+" to match buffer start"),this.startPosition=n+=i),this.log("seek to target start position "+n+" from current time "+e),t.currentTime=n}},_._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},_._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(n){var r=e.hls;if(n&&!r.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=i.State.IDLE,e.startFragRequested=!1,e.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(s.Events.FRAG_LOADED,n)}}))},_._handleTransmuxComplete=function(t){var e,n="main",a=this.hls,o=t.remuxResult,u=t.chunkMeta,l=this.getCurrentContext(u);if(!l)return this.warn("The loading context changed while buffering fragment "+u.sn+" of level "+u.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(u.level);var d=l.frag,f=l.part,h=l.level,p=o.video,g=o.text,m=o.id3,y=o.initSegment,v=this.altAudio?void 0:o.audio;if(!this.fragContextChanged(d)){if(this.state=i.State.PARSING,y){y.tracks&&(this._bufferInitSegment(h,y.tracks,d,u),a.trigger(s.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:y.tracks}));var _=y.initPTS,b=y.timescale;Object(r.isFiniteNumber)(_)&&(this.initPTS[d.cc]=_,a.trigger(s.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:_,timescale:b}))}if(p&&!1!==o.independent){if(h.details){var E=p.startPTS,T=p.endPTS,S=p.startDTS,w=p.endDTS;if(f)f.elementaryStreams[p.type]={startPTS:E,endPTS:T,startDTS:S,endDTS:w};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<E)return void this.backtrack(d);d.setElementaryStreamInfo(p.type,d.start,T,d.start,w,!0)}d.setElementaryStreamInfo(p.type,E,T,S,w),this.bufferFragmentData(p,d,f,u)}}else if(!1===o.independent)return void this.backtrack(d);if(v){var A=v.startPTS,x=v.endPTS,C=v.startDTS,D=v.endDTS;f&&(f.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:A,endPTS:x,startDTS:C,endDTS:D}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,A,x,C,D),this.bufferFragmentData(v,d,f,u)}null!=m&&null!==(e=m.samples)&&void 0!==e&&e.length&&a.trigger(s.Events.FRAG_PARSING_METADATA,{frag:d,id:n,samples:m.samples}),g&&a.trigger(s.Events.FRAG_PARSING_USERDATA,{frag:d,id:n,samples:g.samples})}},_._bufferInitSegment=function(t,e,n,r){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var o=e.audio,u=e.video,l=e.audiovideo;if(o){var c=t.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==o.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==o.container&&this.log("Android: force audio codec to "+(c="mp4a.40.2")),t.audioCodec&&t.audioCodec!==c&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+c+'"'),o.levelCodec=c,o.id="main",this.log("Init audio buffer, container:"+o.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(t.audioCodec||"")+"/"+o.codec+"]")}u&&(u.levelCodec=t.videoCodec,u.id="main",this.log("Init video buffer, container:"+u.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+u.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(s.Events.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var i=e[t].initSegment;null!=i&&i.byteLength&&a.hls.trigger(s.Events.BUFFER_APPENDING,{type:t,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}},_.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=i.State.BACKTRACKING},_.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var n=t.currentTime;if(o.BufferHelper.isBuffered(t,n)?e=this.getAppendedFrag(n):o.BufferHelper.isBuffered(t,n+.1)&&(e=this.getAppendedFrag(n+.1)),e){var r=this.fragPlaying,i=e.level;r&&e.sn===r.sn&&r.level===i&&e.urlId===r.urlId||(this.hls.trigger(s.Events.FRAG_CHANGED,{frag:e}),r&&r.level===i||this.hls.trigger(s.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=e)}}},(v=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(y.prototype,v),y}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"SubtitleStreamController",(function(){return h}));var r=n("./src/events.ts"),i=n("./src/utils/buffer-helper.ts"),a=n("./src/controller/fragment-finders.ts"),s=n("./src/utils/discontinuities.ts"),o=n("./src/controller/level-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/controller/base-stream-controller.ts"),c=n("./src/types/loader.ts"),d=n("./src/types/level.ts");function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){var e,n;function h(e,n){var r;return(r=t.call(this,e,n,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=t,(e=h).prototype=Object.create(n.prototype),e.prototype.constructor=e,f(e,n);var p,g=h.prototype;return g.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},g._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(r.Events.ERROR,this.onError,this),t.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},g._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(r.Events.ERROR,this.onError,this),t.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},g.startLoad=function(){this.stopLoad(),this.state=l.State.IDLE,this.setInterval(500),this.tick()},g.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},g.onLevelLoaded=function(t,e){this.mainDetails=e.details},g.onSubtitleFragProcessed=function(t,e){var n=e.frag,r=e.success;if(this.fragPrevious=n,this.state=l.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,s=n.start,o=0;o<i.length;o++)if(s>=i[o].start&&s<=i[o].end){a=i[o];break}var u=n.start+n.duration;a?a.end=u:i.push(a={start:s,end:u}),this.fragmentTracker.fragBuffered(n)}}},g.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var s=r-a[i].details.targetduration;if(s<=0)return;e.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=s)t.shift();else{if(!(t[e].start<s))break;t[e].start=s,e++}})),this.fragmentTracker.removeFragmentsInRange(n,s,c.PlaylistLevelType.SUBTITLE)}},g.onError=function(t,e){var n,r=e.frag;r&&r.type===c.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=l.State.IDLE)},g.onSubtitleTracksUpdated=function(t,e){var n=this,r=e.subtitleTracks;this.tracksBuffered=[],this.levels=r.map((function(t){return new d.Level(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){n.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},g.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];this.mediaBuffer=null!=n&&n.details?this.mediaBufferTimeRanges:null,n&&this.setInterval(500)}else this.clearInterval()},g.onSubtitleTrackLoaded=function(t,e){var n,r=e.details,i=e.id,u=this.currentTrackId,c=this.levels;if(c.length){var d=c[u];if(!(i>=c.length||i!==u)&&d){if(this.mediaBuffer=this.mediaBufferTimeRanges,r.live||null!==(n=d.details)&&void 0!==n&&n.live){var f=this.mainDetails;if(r.deltaUpdateFailed||!f)return;var h=f.fragments[0];d.details?0===this.alignPlaylists(r,d.details)&&h&&Object(o.addSliding)(r,h.start):r.hasProgramDateTime&&f.hasProgramDateTime?Object(s.alignMediaPlaylistByPDT)(r,f):h&&Object(o.addSliding)(r,h.start)}d.details=r,this.levelLastLoaded=i,this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===l.State.IDLE&&(Object(a.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},g._handleFragmentLoadComplete=function(t){var e=t.frag,n=t.payload,i=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(t){var n=performance.now();a.trigger(r.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:s,tdecrypt:n}})}))}},g.doTick=function(){if(this.media){if(this.state===l.State.IDLE){var t,e=this.currentTrackId,n=this.levels;if(!n.length||!n[e]||!n[e].details)return;var r=n[e].details,s=r.targetduration,o=this.config,c=i.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,this.media.currentTime-s,o.maxBufferHole),d=c.end;if(c.len>this.getMaxBufferLength()+s)return;console.assert(r,"Subtitle track details are defined on idle subtitle stream controller tick");var f,h=r.fragments,p=h.length,g=this.fragPrevious;if(d<r.edge){var m=o.maxFragLookUpTolerance;!(f=Object(a.findFragmentByPTS)(g,h,d,m))&&g&&g.start<h[0].start&&(f=h[0])}else f=h[p-1];null!==(t=f)&&void 0!==t&&t.encrypted?this.loadKey(f,r):f&&this.fragmentTracker.getState(f)===u.FragmentState.NOT_LOADED&&this.loadFragment(f,r,d)}}else this.state=l.State.IDLE},g.loadFragment=function(e,n,r){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,n,r)},(p=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(h.prototype,p),h}(l.default)},"./src/controller/subtitle-track-controller.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/controller/base-playlist-controller.ts"),s=n("./src/types/loader.ts");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}e.default=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var l,c=a.prototype;return c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},c.registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},c.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},c.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},c.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),u(this.media.textTracks).forEach((function(t){Object(i.clearCurrentCues)(t)})),this.subtitleTrack=-1,this.media=null)},c.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},c.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},c.onSubtitleTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.tracksInGroup[this.trackId];if(i){var a=i.details;i.details=e.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,a))}else this.warn("Invalid subtitle track id "+n)},c.onLevelLoading=function(t,e){this.switchLevel(e.level)},c.onLevelSwitching=function(t,e){this.switchLevel(e.level)},c.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var n=e.textGroupIds[e.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(t){return!n||t.groupId===n}));this.tracksInGroup=a;var s=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n;var o={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,i)}}},c.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},c.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},c.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},c.toggleTrackModes=function(t){var e=this,n=this.media,r=this.subtitleDisplay,i=this.trackId;if(n){var a=u(n.textTracks),s=a.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(a).forEach((function(t){t.mode="disabled"}));else{var o=s[i];o&&(o.mode="disabled")}var l=s[t];l&&(l.mode=r?"showing":"hidden")}},c.setSubtitleTrack=function(t,e){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(n=i[t])&&void 0!==n&&n.details)||t<-1||t>=i.length)){this.clearTimer();var a=i[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,a){var s=a.groupId;this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:a.id,groupId:void 0===s?"":s,name:a.name,type:a.type,url:a.url});var o=this.switchParams(a.url,null==e?void 0:e.details);this.loadPlaylist(o)}else this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},c.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=u(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},(l=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,l),a}(a.default)},"./src/controller/timeline-controller.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"TimelineController",(function(){return f}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/cea-608-parser.ts"),s=n("./src/utils/output-filter.ts"),o=n("./src/utils/webvtt-parser.ts"),u=n("./src/utils/texttrack-utils.ts"),l=n("./src/utils/imsc1-ttml-parser.ts"),c=n("./src/types/loader.ts"),d=n("./src/utils/logger.ts"),f=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new s.default(this,"textTrack1"),n=new s.default(this,"textTrack2"),r=new s.default(this,"textTrack3"),o=new s.default(this,"textTrack4");this.cea608Parser1=new a.default(1,e,n),this.cea608Parser2=new a.default(3,r,o)}t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.Events.FRAG_LOADING,this.onFragLoading,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.Events.FRAG_LOADING,this.onFragLoading,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,n,r,a){for(var s,o,u=!1,l=a.length;l--;){var c=a[l],d=(s=c[0],o=e,Math.min(c[1],n)-Math.max(s,o));if(d>=0&&(c[0]=Math.min(c[0],e),c[1]=Math.max(c[1],n),u=!0,d/(n-e)>.5))return}if(u||a.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,r);else{var f=this.Cues.newCue(null,e,n,r);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:f,track:t})}},e.onInitPtsFound=function(t,e){var n=this,r=e.frag,a=e.timescale,s=this.unparsedVttFrags;"main"===e.id&&(this.initPTS[r.cc]=e.initPTS,this.timescale[r.cc]=a),s.length&&(this.unparsedVttFrags=[],s.forEach((function(t){n.onFragLoaded(i.Events.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsTracks,n=this.media,r=this.captionsProperties[t],i=r.label,a=r.languageCode,s=this.getExistingTrack(t);if(s)e[t]=s,Object(u.clearCurrentCues)(e[t]),Object(u.sendAddTrackEvent)(e[t],n);else{var o=this.createTextTrack("captions",i,a);o&&(o[t]=!0,e[t]=o)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},e.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Object(u.clearCurrentCues)(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Object(u.clearCurrentCues)(e[n])}},e.onSubtitleTracksUpdated=function(t,e){var n=this;this.textTracks=[];var r=e.subtitleTracks||[],a=r.some((function(t){return t.textCodec===l.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=r||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var r;if(e<o.length){for(var i=null,a=0;a<o.length;a++)if(h(o[a],t)){i=o[a];break}i&&(r=i)}r?Object(u.clearCurrentCues)(r):(r=n.createTextTrack("subtitles",t.name,t.lang))&&(r.mode="disabled"),r&&(r.groupId=t.groupId,n.textTracks.push(r))}))}else if(!s&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},e.onManifestLoaded=function(t,e){var n=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var r=n.captionsProperties["textTrack"+e[1]];r&&(r.label=t.name,t.lang&&(r.languageCode=t.lang),r.media=t)}}))},e.onFragLoading=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn;if(this.enabled&&n&&r&&e.frag.type===c.PlaylistLevelType.MAIN){var a,s,o=e.frag.sn,u=null!=(a=null==e||null===(s=e.part)||void 0===s?void 0:s.index)?a:-1;o===i+1||o===i&&u===this.lastPartIndex+1||(n.reset(),r.reset()),this.lastSn=o,this.lastPartIndex=u}},e.onFragLoaded=function(t,e){var n=e.frag,a=e.payload,s=this.initPTS,o=this.unparsedVttFrags;if(n.type===c.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!Object(r.isFiniteNumber)(s[n.cc]))return o.push(e),void(s.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var u=n.decryptdata;if(null==u||null==u.key||"AES-128"!==u.method||"stats"in e){var d=this.tracks[n.level],f=this.vttCCs;f[n.cc]||(f[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),d&&d.textCodec===l.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,f)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var n=this,r=this.hls;Object(l.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){n._appendCues(e,t.level),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){d.logger.log("Failed to parse IMSC1: "+e),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,n){var r=this,a=this.hls;Object(o.parseWebVTT)(e,this.initPTS[t.cc],this.timescale[t.cc],n,t.cc,t.start,(function(e){r._appendCues(e,t.level),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(n){r._fallbackToIMSC1(t,e),d.logger.log("Failed to parse VTT cue: "+n),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:n})}))},e._fallbackToIMSC1=function(t,e){var n=this,r=this.tracks[t.level];r.textCodec||Object(l.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){r.textCodec=l.IMSC1_CODEC,n._parseIMSC1(t,e)}),(function(){r.textCodec="wvtt"}))},e._appendCues=function(t,e){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[e];if("disabled"===r.mode)return;t.forEach((function(t){return Object(u.addCueToTrack)(r,t)}))}else n.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:t,track:this.tracks[e].default?"default":"subtitles"+e})},e.onFragDecrypted=function(t,e){var n=e.frag;if(n.type===c.PlaylistLevelType.SUBTITLE){if(!Object(r.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.Events.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r)for(var i=0;i<e.samples.length;i++){var a=e.samples[i].bytes;if(a){var s=this.extractCea608Data(a);n.addData(e.samples[i].pts,s[0]),r.addData(e.samples[i].pts,s[1])}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,i=e.endOffsetSubtitles,a=e.type,s=this.media;if(s&&!(s.currentTime<r)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(t){return Object(u.removeCuesInRange)(o[t],n,r)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach((function(t){return Object(u.removeCuesInRange)(l[t],n,i)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],n=2,r=[[],[]],i=0;i<e;i++){var a=t[n++],s=127&t[n++],o=127&t[n++],u=3&a;0===s&&0===o||0!=(4&a)&&(0!==u&&1!==u||(r[u].push(s),r[u].push(o)))}return r},t}();function h(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}},"./src/crypt/aes-crypto.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}()},"./src/crypt/aes-decryptor.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"removePadding",(function(){return i})),n.d(e,"default",(function(){return a}));var r=n("./src/utils/typed-array.ts");function i(t){var e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Object(r.sliceUint8)(t,0,e-n):t}var a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],s=n[3],o=this.invSubMix,u=o[0],l=o[1],c=o[2],d=o[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;t[h]=m=m>>>8^255&m^99,e[m]=h;var y=f[h],v=f[y],_=f[v],b=257*f[m]^16843008*m;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,s[h]=b,u[m]=(b=16843009*_^65537*v^257*y^16843008*h)<<24|b>>>8,l[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,h?(h=y^f[f[f[_^y]]],p^=f[f[p]]):h=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,s,o,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],m=p[1],y=p[2],v=p[3];for(a=0;a<l;a++)a<i?o=c[a]=e[a]:(u=o,a%i==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=h[a/i|0]<<24):i>6&&a%i==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[a]=o=(c[a-i]^u)>>>0);for(s=0;s<l;s++)a=l-s,u=3&s?c[a]:c[a-4],d[s]=s<4||a<=4?u:g[f[u>>>24]]^m[f[u>>>16&255]]^y[f[u>>>8&255]]^v[f[255&u]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n){for(var r,i,a,s,o,u,l,c,d,f,h,p,g,m=this.keySize+6,y=this.invKeySchedule,v=this.invSBox,_=this.invSubMix,b=_[0],E=_[1],T=_[2],S=_[3],w=this.uint8ArrayToUint32Array_(n),A=w[0],x=w[1],C=w[2],D=w[3],I=new Int32Array(t),R=new Int32Array(I.length),O=this.networkToHostOrderSwap;e<I.length;){for(c=O(I[e]),d=O(I[e+1]),f=O(I[e+2]),h=O(I[e+3]),s=c^y[0],o=h^y[1],u=f^y[2],l=d^y[3],p=4,g=1;g<m;g++)r=b[o>>>24]^E[u>>16&255]^T[l>>8&255]^S[255&s]^y[p+1],i=b[u>>>24]^E[l>>16&255]^T[s>>8&255]^S[255&o]^y[p+2],a=b[l>>>24]^E[s>>16&255]^T[o>>8&255]^S[255&u]^y[p+3],s=b[s>>>24]^E[o>>16&255]^T[u>>8&255]^S[255&l]^y[p],o=r,u=i,l=a,p+=4;r=v[o>>>24]<<24^v[u>>16&255]<<16^v[l>>8&255]<<8^v[255&s]^y[p+1],i=v[u>>>24]<<24^v[l>>16&255]<<16^v[s>>8&255]<<8^v[255&o]^y[p+2],a=v[l>>>24]<<24^v[s>>16&255]<<16^v[o>>8&255]<<8^v[255&u]^y[p+3],R[e]=O(v[s>>>24]<<24^v[o>>16&255]<<16^v[u>>8&255]<<8^v[255&l]^y[p]^A),R[e+1]=O(a^x),R[e+2]=O(i^C),R[e+3]=O(r^D),A=c,x=d,C=f,D=h,e+=4}return R.buffer},t}()},"./src/crypt/decrypter.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n("./src/crypt/aes-crypto.ts"),i=n("./src/crypt/fast-aes-key.ts"),a=n("./src/crypt/aes-decryptor.ts"),s=n("./src/utils/logger.ts"),o=n("./src/utils/mp4-tools.ts"),u=n("./src/utils/typed-array.ts"),l=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(s){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(e):e}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,n).then(r)},e.softwareDecrypt=function(t,e,n){var r=this.currentIV,i=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(t=Object(o.appendUint8Array)(s,t),this.remainderData=null);var l=this.getValidChunk(t);if(!l.length)return null;r&&(n=r);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(e);var d=i;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=Object(u.sliceUint8)(l,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,n){var a=this,s=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new i.default(s,e)),this.fastAesKey.expandKey().then((function(e){return s?new r.default(s,n).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return a.onWebCryptoError(r,t,e,n)}))},e.onWebCryptoError=function(t,e,n,r){return s.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r)},e.getValidChunk=function(t){var e=t,n=t.length-t.length%16;return n!==t.length&&(e=Object(u.sliceUint8)(t,0,n),this.remainderData=Object(u.sliceUint8)(t,n)),e},e.logOnce=function(t){this.logEnabled&&(s.logger.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},"./src/crypt/fast-aes-key.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}()},"./src/demux/aacdemuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/adts.ts"),a=n("./src/utils/logger.ts"),s=n("./src/demux/id3.ts");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function r(e,n){var r;return(r=t.call(this)||this).observer=void 0,r.config=void 0,r.observer=e,r.config=n,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var u=r.prototype;return u.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(s.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(i.probe(t,e))return a.logger.log("ADTS sync word found !"),!0;return!1},u.canParse=function(t,e){return i.canParse(t,e)},u.appendFrame=function(t,e,n){i.initTrackConfig(t,this.observer,e,n,t.manifestCodec);var r=i.appendFrame(t,e,n,this.initPTS,this.frameIndex);if(r&&0===r.missing)return r},r}(r.default);u.minProbeByteLength=9,e.default=u},"./src/demux/adts.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"getAudioConfig",(function(){return s})),n.d(e,"isHeaderPattern",(function(){return o})),n.d(e,"getHeaderLength",(function(){return u})),n.d(e,"getFullFrameLength",(function(){return l})),n.d(e,"canGetFrameLength",(function(){return c})),n.d(e,"isHeader",(function(){return d})),n.d(e,"canParse",(function(){return f})),n.d(e,"probe",(function(){return h})),n.d(e,"initTrackConfig",(function(){return p})),n.d(e,"getFrameDuration",(function(){return g})),n.d(e,"parseFrameHeader",(function(){return m})),n.d(e,"appendFrame",(function(){return y}));var r=n("./src/utils/logger.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts");function s(t,e,n,s){var o,u,l,c,d=navigator.userAgent.toLowerCase(),f=s,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&e[n+2])>>>6);var p=(60&e[n+2])>>>2;if(!(p>h.length-1))return l=(1&e[n+2])<<2,l|=(192&e[n+3])>>>6,r.logger.log("manifest codec:"+s+", ADTS type:"+o+", samplingIndex:"+p),/firefox/i.test(d)?p>=6?(o=5,c=new Array(4),u=p-3):(o=2,c=new Array(2),u=p):-1!==d.indexOf("android")?(o=2,c=new Array(2),u=p):(o=5,c=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&p>=6?u=p-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(d))||!s&&1===l)&&(o=2,c=new Array(2)),u=p)),c[0]=o<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=l<<3,5===o&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+o,manifestCodec:f};t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function o(t,e){return 255===t[e]&&240==(246&t[e+1])}function u(t,e){return 1&t[e+1]?7:9}function l(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function c(t,e){return e+5<t.length}function d(t,e){return e+1<t.length&&o(t,e)}function f(t,e){return c(t,e)&&o(t,e)&&l(t,e)<=t.length-e}function h(t,e){if(d(t,e)){var n=u(t,e);if(e+n>=t.length)return!1;var r=l(t,e);if(r<=n)return!1;var i=e+r;return i===t.length||d(t,i)}return!1}function p(t,e,n,i,a){if(!t.samplerate){var o=s(e,n,i,a);if(!o)return;t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,r.logger.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function g(t){return 9216e4/t}function m(t,e,n,r,i){var a=u(t,e),s=l(t,e);if((s-=a)>0)return{headerLength:a,frameLength:s,stamp:n+r*i}}function y(t,e,n,r,i){var a=m(e,n,r,i,g(t.samplerate));if(a){var s,o=a.headerLength,u=a.stamp,l=o+a.frameLength,c=Math.max(0,n+l-e.length);c?(s=new Uint8Array(l-o)).set(e.subarray(n+o,e.length),0):s=e.subarray(n+o,n+l);var d={unit:s,pts:u};return c||t.samples.push(d),{sample:d,length:l,missing:c}}}},"./src/demux/base-audio-demuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"initPTSFn",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/demux/id3.ts"),a=n("./src/demux/dummy-demuxed-track.ts"),s=n("./src/utils/mp4-tools.ts"),o=n("./src/utils/typed-array.ts"),u=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,n){},e.demux=function(t,e){this.cachedData&&(t=Object(s.appendUint8Array)(this.cachedData,t),this.cachedData=null);var n,r,u=i.getID3Data(t,0),c=u?u.length:0,d=this._audioTrack,f=this._id3Track,h=u?i.getTimeStamp(u):void 0,p=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=l(h,e)),u&&u.length>0&&f.samples.push({pts:this.initPTS,dts:this.initPTS,data:u}),r=this.initPTS;c<p;){if(this.canParse(t,c)){var g=this.appendFrame(d,t,c);g?(this.frameIndex++,r=g.sample.pts,n=c+=g.length):c=p}else i.canParse(t,c)?(u=i.getID3Data(t,c),f.samples.push({pts:r,dts:r,data:u}),n=c+=u.length):c++;if(c===p&&n!==p){var m=Object(o.sliceUint8)(t,n);this.cachedData=this.cachedData?Object(s.appendUint8Array)(this.cachedData,m):m}}return{audioTrack:d,avcTrack:Object(a.dummyTrack)(),id3Track:f,textTrack:Object(a.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},e.destroy=function(){},t}(),l=function(t,e){return Object(r.isFiniteNumber)(t)?90*t:9e4*e};e.default=u},"./src/demux/chunk-cache.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks;return e.length?(t=1===e.length?e[0]:function(t,e){for(var n=new Uint8Array(e),r=0,i=0;i<t.length;i++){var a=t[i];n.set(a,r),r+=a.length}return n}(e,this.dataLength),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},"./src/demux/dummy-demuxed-track.ts":function(t,e,n){"use strict";function r(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}n.r(e),n.d(e,"dummyTrack",(function(){return r}))},"./src/demux/exp-golomb.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.ts");e.default=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,n=8,r=0;r<t;r++)0!==n&&(n=(e+this.readEG()+256)%256),e=0===n?e:n},e.readSPS=function(){var t,e,n,r=0,i=0,a=0,s=0,o=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();var g=o();if(u(5),d(3),o(),h(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var m=l();if(3===m&&d(1),h(),h(),d(1),c())for(e=3!==m?8:12,n=0;n<e;n++)c()&&p(n<6?16:64)}h();var y=l();if(0===y)l();else if(1===y)for(d(1),f(),f(),t=l(),n=0;n<t;n++)f();h(),d(1);var v=l(),_=l(),b=u(1);0===b&&d(1),d(1),c()&&(r=l(),i=l(),a=l(),s=l());var E=[1,1];if(c()&&c())switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(v+1)-2*r-2*i),height:(2-b)*(_+1)*16-(b?2:4)*(a+s),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}()},"./src/demux/id3.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isHeader",(function(){return i})),n.d(e,"isFooter",(function(){return a})),n.d(e,"getID3Data",(function(){return s})),n.d(e,"canParse",(function(){return u})),n.d(e,"getTimeStamp",(function(){return l})),n.d(e,"isTimeStampFrame",(function(){return c})),n.d(e,"getID3Frames",(function(){return f})),n.d(e,"decodeFrame",(function(){return h})),n.d(e,"utf8ArrayToStr",(function(){return v})),n.d(e,"testables",(function(){return _}));var r,i=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},a=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s=function(t,e){for(var n=e,r=0;i(t,e);)r+=10,r+=o(t,e+6),a(t,e+10)&&(r+=10),e+=r;if(r>0)return t.subarray(n,n+r)},o=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,(n|=(127&t[e+2])<<7)|127&t[e+3]},u=function(t,e){return i(t,e)&&o(t,e+6)+10<=t.length-e},l=function(t){for(var e=f(t),n=0;n<e.length;n++){var r=e[n];if(c(r))return y(r)}},c=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=o(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}},f=function(t){for(var e=0,n=[];i(t,e);){for(var r=o(t,e+6),s=(e+=10)+r;e+8<s;){var u=d(t.subarray(e)),l=h(u);l&&n.push(l),e+=u.size+10}a(t,e)&&(e+=10)}return n},h=function(t){return"PRIV"===t.type?p(t):"W"===t.type[0]?m(t):g(t)},p=function(t){if(!(t.size<2)){var e=v(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}},g=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,n=v(t.data.subarray(e),!0),r=v(t.data.subarray(e+=n.length+1));return{key:t.type,info:n,data:r}}var i=v(t.data.subarray(1));return{key:t.type,data:i}}},m=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,n=v(t.data.subarray(e),!0),r=v(t.data.subarray(e+=n.length+1));return{key:t.type,info:n,data:r}}var i=v(t.data);return{key:t.type,data:i}},y=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,1&e[3]&&(n+=47721858.84),Math.round(n)}},v=function(t,e){void 0===e&&(e=!1);var n=b();if(n){var r=n.decode(t);if(e){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,s,o,u=t.length,l="",c=0;c<u;){if(0===(a=t[c++])&&e)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:s=t[c++],l+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[c++],o=t[c++],l+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return l},_={decodeTextFrame:g};function b(){return r||void 0===self.TextDecoder||(r=new self.TextDecoder("utf-8")),r}},"./src/demux/mp3demuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/id3.ts"),a=n("./src/utils/logger.ts"),s=n("./src/demux/mpegaudio.ts");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var u=r.prototype;return u.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(i.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(s.probe(t,e))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},u.canParse=function(t,e){return s.canParse(t,e)},u.appendFrame=function(t,e,n){if(null!==this.initPTS)return s.appendFrame(t,e,n,this.initPTS,this.frameIndex)},r}(r.default);u.minProbeByteLength=4,e.default=u},"./src/demux/mp4demuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/mp4-tools.ts"),i=n("./src/demux/dummy-demuxed-track.ts"),a=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(r.findBox)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,n=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(e=Object(r.appendUint8Array)(this.remainderData,t));var a=Object(r.segmentValidRange)(e);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=e;return{audioTrack:Object(i.dummyTrack)(),avcTrack:n,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.flush=function(){var t=Object(i.dummyTrack)();return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:t,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();a.minProbeByteLength=1024,e.default=a},"./src/demux/mpegaudio.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"appendFrame",(function(){return u})),n.d(e,"parseHeader",(function(){return l})),n.d(e,"isHeaderPattern",(function(){return c})),n.d(e,"isHeader",(function(){return d})),n.d(e,"canParse",(function(){return f})),n.d(e,"probe",(function(){return h}));var r=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],o=[0,1,1,4];function u(t,e,n,r,i){if(!(n+24>e.length)){var a=l(e,n);if(a&&n+a.frameLength<=e.length){var s=r+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:e.subarray(n,n+a.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function l(t,e){var n=t[e+1]>>3&3,u=t[e+1]>>1&3,l=t[e+2]>>4&15,c=t[e+2]>>2&3;if(1!==n&&0!==l&&15!==l&&3!==c){var d=t[e+3]>>6,f=1e3*i[14*(3===n?3-u:3===u?3:4)+l-1],h=a[3*(3===n?0:2===n?1:2)+c],p=3===d?1:2,g=s[n][u],m=o[u],y=8*g*m,v=Math.floor(g*f/h+(t[e+2]>>1&1))*m;if(null===r){var _=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);r=_?parseInt(_[1]):0}return!!r&&r<=87&&2===u&&f>=224e3&&0===d&&(t[e+3]=128|t[e+3]),{sampleRate:h,channelCount:p,frameLength:v,samplesPerFrame:y}}}function c(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function d(t,e){return e+1<t.length&&c(t,e)}function f(t,e){return c(t,e)&&4<=t.length-e}function h(t,e){if(e+1<t.length&&c(t,e)){var n=l(t,e),r=4;null!=n&&n.frameLength&&(r=n.frameLength);var i=e+r;return i===t.length||d(t,i)}return!1}},"./src/demux/sample-aes.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/crypt/decrypter.ts"),i=n("./src/demux/tsdemuxer.ts");e.default=function(){function t(t,e,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,(function(a){var s=new Uint8Array(a);i.set(s,16),r||o.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){for(var n=new Uint8Array(e),r=0,i=32;i<t.length-16;i+=160,r+=16)t.set(n.subarray(r,r+16),i);return t},e.decryptAvcSample=function(t,e,n,r,a,s){var o=Object(i.discardEPB)(a.data),u=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(u.buffer,(function(i){a.data=l.getAvcDecryptedUnit(o,i),s||l.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,s),!s)return}}}},t}()},"./src/demux/transmuxer-interface.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.ts"),a=n("./src/demux/transmuxer.ts"),s=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./node_modules/eventemitter3/index.js"),c=Object(u.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function t(t,e,n,u){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=n,this.onFlush=u;var f=t.config,h=function(e,n){(n=n||{}).frag=d.frag,n.id=d.id,t.trigger(e,n)};this.observer=new l.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,h),this.observer.on(i.Events.ERROR,h);var p={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(f.enableWorker&&"undefined"!=typeof Worker){var m;s.logger.log("demuxing in webworker");try{m=this.worker=r("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(e){t.trigger(i.Events.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},m.postMessage({cmd:"init",typeSupported:p,vendor:g,id:e,config:JSON.stringify(f)})}catch(y){s.logger.warn("Error in worker:",y),s.logger.error("Error while initializing DemuxerWorker, fallback to inline"),m&&self.URL.revokeObjectURL(m.objectURL),this.transmuxer=new a.default(this.observer,p,f,g,e),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,f,g,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},e.push=function(t,e,n,r,i,o,u,l,c,d){var f,h,p=this;c.transmuxing.start=self.performance.now();var g=this.transmuxer,m=this.worker,y=o?o.start:i.start,v=i.decryptdata,_=this.frag,b=!(_&&i.cc===_.cc),E=!(_&&c.level===_.level),T=_?c.sn-_.sn:-1,S=this.part?c.part-this.part.index:1,w=!E&&(1===T||0===T&&1===S),A=self.performance.now();(E||T||0===i.stats.parsing.start)&&(i.stats.parsing.start=A),!o||!S&&w||(o.stats.parsing.start=A);var x=!(_&&(null===(f=i.initSegment)||void 0===f?void 0:f.url)===(null===(h=_.initSegment)||void 0===h?void 0:h.url)),C=new a.TransmuxState(b,w,l,E,y,x);if(!w||b||x){s.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+E+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+y+"\n        initSegmentChange: "+x);var D=new a.TransmuxConfig(n,r,e,u,d);this.configureTransmuxer(D)}if(this.frag=i,this.part=o,m)m.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:c,state:C},t instanceof ArrayBuffer?[t]:[]);else if(g){var I=g.push(t,v,c,C);Object(a.isPromise)(I)?I.then((function(t){p.handleTransmuxComplete(t)})):this.handleTransmuxComplete(I)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:t});else if(n){var i=n.flush(t);Object(a.isPromise)(i)?i.then((function(n){e.handleFlushResult(n,t)})):this.handleFlushResult(i,t)}},e.handleFlushResult=function(t,e){var n=this;t.forEach((function(t){n.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,n=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):n&&n.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}()},"./src/demux/transmuxer-worker.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n("./src/demux/transmuxer.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),s=n("./node_modules/eventemitter3/index.js");function o(t){var e=new s.EventEmitter,n=function(e,n){t.postMessage({event:e,data:n})};e.on(i.Events.FRAG_DECRYPTED,n),e.on(i.Events.ERROR,n),t.addEventListener("message",(function(i){var s=i.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.transmuxer=new r.default(e,s.typeSupported,o,s.vendor,s.id),Object(a.enableLogs)(o.debug),n("init",null);break;case"configure":t.transmuxer.configure(s.config);break;case"demux":var l=t.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(r.isPromise)(l)?l.then((function(e){u(t,e)})):u(t,l);break;case"flush":var d=s.chunkMeta,f=t.transmuxer.flush(d);Object(r.isPromise)(f)?f.then((function(e){c(t,e,d)})):c(t,f,d)}}))}function u(t,e){if((n=e.remuxResult).audio||n.video||n.text||n.id3||n.initSegment){var n,r=[],i=e.remuxResult,a=i.audio,s=i.video;a&&l(r,a),s&&l(r,s),t.postMessage({event:"transmuxComplete",data:e},r)}}function l(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function c(t,e,n){e.forEach((function(e){u(t,e)})),t.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v})),n.d(e,"isPromise",(function(){return b})),n.d(e,"TransmuxConfig",(function(){return E})),n.d(e,"TransmuxState",(function(){return T}));var r,i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/crypt/decrypter.ts"),o=n("./src/demux/aacdemuxer.ts"),u=n("./src/demux/mp4demuxer.ts"),l=n("./src/demux/tsdemuxer.ts"),c=n("./src/demux/mp3demuxer.ts"),d=n("./src/remux/mp4-remuxer.ts"),f=n("./src/remux/passthrough-remuxer.ts"),h=n("./src/demux/chunk-cache.ts"),p=n("./src/utils/mp4-tools.ts"),g=n("./src/utils/logger.ts");try{r=self.performance.now.bind(self.performance)}catch(S){g.logger.debug("Unable to use Performance API on this environment"),r=self.Date.now}var m=[{demux:l.default,remux:d.default},{demux:u.default,remux:f.default},{demux:o.default,remux:d.default},{demux:c.default,remux:d.default}],y=1024;m.forEach((function(t){y=Math.max(y,t.demux.minProbeByteLength)}));var v=function(){function t(t,e,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new h.default,this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r,this.id=i}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,n,i){var a=this,s=n.transmuxing;s.executeStart=r();var o=new Uint8Array(t),u=this.cache,l=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var f=function(t,e){var n=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(n=e),n}(o,e);if(f&&"AES-128"===f.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(o,f.key.buffer,f.iv.buffer).then((function(t){var e=a.push(t,null,n);return a.decryptionPromise=null,e})),this.decryptionPromise;var g=h.softwareDecrypt(o,f.key.buffer,f.iv.buffer);if(!g)return s.executeEnd=r(),_(n);o=new Uint8Array(g)}var m=i||c,y=m.contiguous,v=m.discontinuity,b=m.trackSwitch,E=m.accurateTimeOffset,T=m.timeOffset,S=m.initSegmentChange,w=d.defaultInitPts;if((v||b||S)&&this.resetInitSegment(d.initSegmentData,d.audioCodec,d.videoCodec,d.duration),(v||S)&&this.resetInitialTimestamp(w),y||this.resetContiguity(),this.needsProbing(o,v,b)){if(u.dataLength){var A=u.flush();o=Object(p.appendUint8Array)(A,o)}this.configureTransmuxer(o,d)}var x=this.transmux(o,f,T,E,n),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,s.executeEnd=r(),x},e.flush=function(t){var e=this,n=t.transmuxing;n.executeStart=r();var s=this.decrypter,o=this.cache,u=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var c=[],d=u.timeOffset;if(s){var f=s.flush();f&&c.push(this.push(f,null,t))}var h=o.dataLength;o.reset();var p=this.demuxer;if(!p||!this.remuxer)return h>=y&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=r(),[_(t)];var g=p.flush(d);return b(g)?g.then((function(n){return e.flushRemux(c,n,t),c})):(this.flushRemux(c,g,t),c)},e.flushRemux=function(t,e,n){var i=e.audioTrack,a=e.avcTrack,s=e.id3Track,o=e.textTrack,u=this.currentTransmuxState,l=u.accurateTimeOffset,c=u.timeOffset;g.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(i,a,s,o,c,l,!0,this.id);t.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=r()},e.resetInitialTimestamp=function(t){var e=this.demuxer,n=this.remuxer;e&&n&&(e.resetTimeStamp(t),n.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(e,n,r),a.resetInitSegment(t,e,n))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,n,r,i){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,n,r,i):this.transmuxUnencrypted(t,n,r,i)},e.transmuxUnencrypted=function(t,e,n,r){var i=this.demuxer.demux(t,e,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i.audioTrack,i.avcTrack,i.id3Track,i.textTrack,e,n,!1,this.id),chunkMeta:r}},e.transmuxSampleAes=function(t,e,n,r,i){var a=this;return this.demuxer.demuxSampleAes(t,e,n).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,n,r,!1,a.id),chunkMeta:i}}))},e.configureTransmuxer=function(t,e){for(var n,r=this.config,i=this.observer,a=this.typeSupported,s=this.vendor,o=e.audioCodec,l=e.defaultInitPts,c=e.duration,d=e.initSegmentData,h=e.videoCodec,p=0,y=m.length;p<y;p++)if(m[p].demux.probe(t)){n=m[p];break}n||(g.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:u.default,remux:f.default});var v=this.demuxer,_=this.remuxer,b=n.remux,E=n.demux;_&&_ instanceof b||(this.remuxer=new b(i,r,a,s)),v&&v instanceof E||(this.demuxer=new E(i,r,a),this.probe=E.probe),this.resetInitSegment(d,o,h,c),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,n){return!this.demuxer||!this.remuxer||e||n},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new s.default(this.observer,this.config)),t},t}(),_=function(t){return{remuxResult:{},chunkMeta:t}};function b(t){return"then"in t&&t.then instanceof Function}var E=function(t,e,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},T=function(t,e,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"discardEPB",(function(){return b}));var r=n("./src/demux/adts.ts"),i=n("./src/demux/mpegaudio.ts"),a=n("./src/demux/exp-golomb.ts"),s=n("./src/demux/id3.ts"),o=n("./src/demux/sample-aes.ts"),u=n("./src/events.ts"),l=n("./src/utils/mp4-tools.ts"),c=n("./src/utils/logger.ts"),d=n("./src/errors.ts"),f={video:1,audio:2,id3:3,text:4},h=function(){function t(t,e,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=n}t.probe=function(e){var n=t.syncOffset(e);return!(n<0||(n&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:f[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=r},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,n=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,n,r,i){var a;void 0===r&&(r=!1),void 0===i&&(i=!1),r||(this.sampleAes=null);var s=this._avcTrack,o=this._audioTrack,f=this._id3Track,h=s.pid,p=s.pesData,v=o.pid,_=f.pid,b=o.pesData,E=f.pesData,T=!1,S=this.pmtParsed,w=this._pmtId,A=e.length;if(this.remainderData&&(A=(e=Object(l.appendUint8Array)(this.remainderData,e)).length,this.remainderData=null),A<188&&!i)return this.remainderData=e,{audioTrack:o,avcTrack:s,id3Track:f,textTrack:this._txtTrack};var x=Math.max(0,t.syncOffset(e));(A-=(A+x)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));for(var C=0,D=x;D<A;D+=188)if(71===e[D]){var I=!!(64&e[D+1]),R=((31&e[D+1])<<8)+e[D+2],O=void 0;if((48&e[D+3])>>4>1){if((O=D+5+e[D+4])===D+188)continue}else O=D+4;switch(R){case h:I&&(p&&(a=y(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(e.subarray(O,D+188)),p.size+=D+188-O);break;case v:I&&(b&&(a=y(b))&&(o.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),b={data:[],size:0}),b&&(b.data.push(e.subarray(O,D+188)),b.size+=D+188-O);break;case _:I&&(E&&(a=y(E))&&this.parseID3PES(a),E={data:[],size:0}),E&&(E.data.push(e.subarray(O,D+188)),E.size+=D+188-O);break;case 0:I&&(O+=e[O]+1),w=this._pmtId=g(e,O);break;case w:I&&(O+=e[O]+1);var P=m(e,O,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);(h=P.avc)>0&&(s.pid=h),(v=P.audio)>0&&(o.pid=v,o.isAAC=P.isAAC),(_=P.id3)>0&&(f.pid=_),T&&!S&&(c.logger.log("reparse from beginning"),T=!1,D=x-188),S=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0}}else C++;C>0&&this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+C+" TS packet/s that do not start with 0x47"}),s.pesData=p,o.pesData=b,f.pesData=E;var M={audioTrack:o,avcTrack:s,id3Track:f,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(M),M},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,n=t.audioTrack,r=t.avcTrack,i=t.id3Track,a=r.pesData,s=n.pesData,o=i.pesData;a&&(e=y(a))?(this.parseAVCPES(e,!0),r.pesData=null):r.pesData=a,s&&(e=y(s))?(n.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),n.pesData=null):(null!=s&&s.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s),o&&(e=y(o))?(this.parseID3PES(e),i.pesData=null):i.pesData=o},e.demuxSampleAes=function(t,e,n){var r=this.demux(t,n,!0,!this.config.progressive),i=this.sampleAes=new o.default(this.observer,this.config,e);return this.decrypt(r,i)},e.decrypt=function(t,e){return new Promise((function(n){var r=t.audioTrack,i=t.avcTrack;r.samples&&r.isAAC?e.decryptAacSamples(r.samples,0,(function(){i.samples?e.decryptAvcSamples(i.samples,0,0,(function(){n(t)})):n(t)})):i.samples&&e.decryptAvcSamples(i.samples,0,0,(function(){n(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var n,r=this,i=this._avcTrack,o=this.parseAVCNALu(t.data),u=this.avcSample,l=!1;t.data=null,u&&o.length&&!i.audFound&&(v(u,i),u=this.avcSample=p(!1,t.pts,t.dts,"")),o.forEach((function(e){switch(e.type){case 1:n=!0,u||(u=r.avcSample=p(!0,t.pts,t.dts,"")),u.frame=!0;var o=e.data;if(l&&o.length>4){var c=new a.default(o).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u.key=!0)}break;case 5:n=!0,u||(u=r.avcSample=p(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0;var d=new a.default(b(e.data));d.readUByte();for(var f=0,h=0,g=!1,m=0;!g&&d.bytesAvailable>1;){f=0;do{f+=m=d.readUByte()}while(255===m);h=0;do{h+=m=d.readUByte()}while(255===m);if(4===f&&0!==d.bytesAvailable){if(g=!0,181===d.readUByte()&&49===d.readUShort()&&1195456820===d.readUInt()&&3===d.readUByte()){for(var y=d.readUByte(),E=31&y,T=[y,d.readUByte()],S=0;S<E;S++)T.push(d.readUByte()),T.push(d.readUByte()),T.push(d.readUByte());_(r._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}else if(5===f&&0!==d.bytesAvailable){if(g=!0,h>16){for(var w=[],A=0;A<16;A++)w.push(d.readUByte().toString(16)),3!==A&&5!==A&&7!==A&&9!==A||w.push("-");for(var x=h-16,C=new Uint8Array(x),D=0;D<x;D++)C[D]=d.readUByte();_(r._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:w.join(""),userData:Object(s.utf8ArrayToStr)(C),userDataBytes:C})}}else if(h<d.bytesAvailable)for(var I=0;I<h;I++)d.readUByte()}break;case 7:if(n=!0,l=!0,!i.sps){var R=new a.default(e.data).readSPS();i.width=R.width,i.height=R.height,i.pixelRatio=R.pixelRatio,i.sps=[e.data],i.duration=r._duration;for(var O=e.data.subarray(1,4),P="avc1.",M=0;M<3;M++){var L=O[M].toString(16);L.length<2&&(L="0"+L),P+=L}i.codec=P}break;case 8:n=!0,i.pps||(i.pps=[e.data]);break;case 9:n=!1,i.audFound=!0,u&&v(u,i),u=r.avcSample=p(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}u&&n&&u.units.push(e)})),e&&u&&(v(u,i),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,n=this.avcSample;if(!n||0===n.units.length){var r=this._avcTrack.samples;n=r[r.length-1]}if(null!==(t=n)&&void 0!==t&&t.units){var i=n.units;e=i[i.length-1]}return e},e.parseAVCNALu=function(t){var e,n,r=t.byteLength,i=this._avcTrack,a=i.naluState||0,s=a,o=[],u=0,l=-1,c=0;for(-1===a&&(l=0,c=31&t[0],a=0,u=1);u<r;)if(e=t[u++],a)if(1!==a)if(e)if(1===e){if(l>=0){var d={data:t.subarray(l,u-a-1),type:c};o.push(d)}else{var f=this.getLastNalUnit();if(f&&(s&&u<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),(n=u-a-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(t.subarray(0,n),f.data.byteLength),f.data=h,f.state=0}}u<r?(l=u,c=31&t[u],a=0):a=-1}else a=0;else a=3;else a=e?0:2;else a=e?0:1;if(l>=0&&a>=0){var p={data:t.subarray(l,r),type:c,state:a};o.push(p)}if(0===o.length){var g=this.getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+t.byteLength);m.set(g.data,0),m.set(t,g.data.byteLength),g.data=m}}return i.naluState=a,o},e.parseAACPES=function(t){var e,n,i,a,s,o=0,l=this._audioTrack,f=this.aacOverFlow,h=t.data;if(f){this.aacOverFlow=null;var p=f.sample.unit.byteLength,g=Math.min(f.missing,p),m=p-g;f.sample.unit.set(h.subarray(0,g),m),l.samples.push(f.sample),o=f.missing}for(e=o,n=h.length;e<n-1&&!r.isHeader(h,e);e++);if(e===o||(e<n-1?(i="AAC PES did not start with ADTS header,offset:"+e,a=!1):(i="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+i),this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:i}),!a)){if(r.initTrackConfig(l,this.observer,h,e,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!f)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var y=r.getFrameDuration(l.samplerate);s=f.sample.pts+y}for(var v=0;e<n;){if(r.isHeader(h,e)){if(e+5<n){var _=r.appendFrame(l,h,e,s,v);if(_){if(!_.missing){e+=_.length,v++;continue}this.aacOverFlow=_}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,n=e.length,r=0,a=0,s=t.pts;if(void 0!==s)for(;a<n;)if(i.isHeader(e,a)){var o=i.appendFrame(this._audioTrack,e,a,s,r);if(!o)break;a+=o.length,r++}else a++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function p(t,e,n,r){return{key:t,frame:!1,pts:e,dts:n,units:[],debug:r,length:0}}function g(t,e){return(31&t[e+10])<<8|t[e+11]}function m(t,e,n,r){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var s=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!r){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=s);break;case 21:-1===i.id3&&(i.id3=s);break;case 219:if(!r){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=s);break;case 3:case 4:n?-1===i.audio&&(i.audio=s,i.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return i}function y(t){var e,n,r,i,a,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var u=new Uint8Array(o[0].length+o[1].length);u.set(o[0]),u.set(o[1],o[0].length),o[0]=u,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;var l=e[7];192&l&&(i=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?i-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(c.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var d=(r=e[8])+9;if(t.size<=d)return null;t.size-=d;for(var f=new Uint8Array(t.size),h=0,p=o.length;h<p;h++){var g=(e=o[h]).byteLength;if(d){if(d>g){d-=g;continue}e=e.subarray(d),g-=d,d=0}f.set(e,s),s+=g}return n&&(n-=r+3),{data:f,pts:i,dts:a,len:n}}return null}function v(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var n=e.samples,r=n.length;if(!r)return void e.dropped++;var i=n[r-1];t.pts=i.pts,t.dts=i.dts}e.samples.push(t)}t.debug.length&&c.logger.log(t.pts+"/"+t.dts+":"+t.debug)}function _(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)}function b(t){for(var e=t.byteLength,n=[],r=1;r<e-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;var i=e-n.length,a=new Uint8Array(i),s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=t[s];return a}h.minProbeByteLength=188,e.default=h},"./src/errors.ts":function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return i})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(r||(r={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":function(t,e,n){"use strict";var r;n.r(e),n.d(e,"Events",(function(){return r})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(r||(r={}))},"./src/hls.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/playlist-loader.ts"),a=n("./src/loader/key-loader.ts"),s=n("./src/controller/id3-track-controller.ts"),o=n("./src/controller/latency-controller.ts"),u=n("./src/controller/level-controller.ts"),l=n("./src/controller/fragment-tracker.ts"),c=n("./src/controller/stream-controller.ts"),d=n("./src/is-supported.ts"),f=n("./src/utils/logger.ts"),h=n("./src/config.ts"),p=n("./node_modules/eventemitter3/index.js"),g=n("./src/events.ts"),m=n("./src/errors.ts");function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=Object(h.mergeConfig)(t.DefaultConfig,e);this.userConfig=e,Object(f.enableLogs)(n.debug),this._autoLevelCapping=-1,n.progressive&&Object(h.enableStreamingMode)(n);var r=n.bufferController,d=n.capLevelController,g=n.fpsController,m=this.abrController=new(0,n.abrController)(this),y=this.bufferController=new r(this),v=this.capLevelController=new d(this),_=new g(this),b=new i.default(this),E=new a.default(this),T=new s.default(this),S=this.levelController=new u.default(this),w=new l.FragmentTracker(this),A=this.streamController=new c.default(this,w);v.setStreamController(A),_.setStreamController(A);var x=[S,A];this.networkControllers=x;var C=[b,E,m,y,v,_,T,w];this.audioTrackController=this.createController(n.audioTrackController,null,x),this.createController(n.audioStreamController,w,x),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,x),this.createController(n.subtitleStreamController,w,x),this.createController(n.timelineController,null,C),this.emeController=this.createController(n.emeController,null,C),this.cmcdController=this.createController(n.cmcdController,null,C),this.latencyController=this.createController(o.default,null,C),this.coreComponents=C}t.isSupported=function(){return Object(d.isSupported)()};var e,n,v,_=t.prototype;return _.createController=function(t,e,n){if(t){var r=e?new t(this,e):new t(this);return n&&n.push(r),r}return null},_.on=function(t,e,n){void 0===n&&(n=this),this._emitter.on(t,e,n)},_.once=function(t,e,n){void 0===n&&(n=this),this._emitter.once(t,e,n)},_.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},_.off=function(t,e,n,r){void 0===n&&(n=this),this._emitter.off(t,e,n,r)},_.listeners=function(t){return this._emitter.listeners(t)},_.emit=function(t,e,n){return this._emitter.emit(t,e,n)},_.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(n){f.logger.error("An internal error happened while handling event "+t+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.trigger(g.Events.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,error:n})}return!1},_.listenerCount=function(t){return this._emitter.listenerCount(t)},_.destroy=function(){f.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},_.attachMedia=function(t){f.logger.log("attachMedia"),this._media=t,this.trigger(g.Events.MEDIA_ATTACHING,{media:t})},_.detachMedia=function(){f.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},_.loadSource=function(t){this.stopLoad();var e=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});f.logger.log("loadSource:"+i),e&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(g.Events.MANIFEST_LOADING,{url:t})},_.startLoad=function(t){void 0===t&&(t=-1),f.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},_.stopLoad=function(){f.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},_.swapAudioCodec=function(){f.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},_.recoverMediaError=function(){f.logger.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},_.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,v=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:h.hlsDefaultConfig},set:function(e){t.defaultConfig=e}}],(n=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){f.logger.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){f.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){f.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){f.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){f.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(f.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var n=t.length,r=0;r<n;r++)if(t[r].maxBitrate>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&y(e.prototype,n),v&&y(e,v),t}();v.defaultConfig=void 0},"./src/is-supported.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isSupported",(function(){return a})),n.d(e,"changeTypeSupported",(function(){return s}));var r=n("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var t=Object(r.getMediaSource)();if(!t)return!1;var e=i();return!(!t||"function"!=typeof t.isTypeSupported||!t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||e&&(!e.prototype||"function"!=typeof e.prototype.appendBuffer||"function"!=typeof e.prototype.remove))}function s(){var t,e=i();return"function"==typeof(null==e||null===(t=e.prototype)||void 0===t?void 0:t.changeType)}},"./src/loader/fragment-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d})),n.d(e,"LoadError",(function(){return h}));var r=n("./src/polyfills/number.ts"),i=n("./src/errors.ts");function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function s(t,e,n){return(s=o()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=Math.pow(2,17),d=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var n=this,r=t.url;if(!r)return Promise.reject(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(r,u){n.loader&&n.loader.destroy();var l=n.loader=t.loader=s?new s(a):new o(a),d=f(t),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=l.stats,l.load(d,p,{onSuccess:function(e,i,a,s){n.resetLoader(t,l),r({frag:t,part:null,payload:e.data,networkDetails:s})},onError:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:a}))},onAbort:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:a}))},onTimeout:function(e,r,a){n.resetLoader(t,l),u(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:a}))},onProgress:function(n,r,i,a){e&&e({frag:t,part:null,payload:i,networkDetails:a})}})}))},e.loadPart=function(t,e,n){var r=this;this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(u,l){r.loader&&r.loader.destroy();var d=r.loader=t.loader=s?new s(a):new o(a),p=f(t,e),g={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};e.stats=d.stats,d.load(p,g,{onSuccess:function(i,a,s,o){r.resetLoader(t,d),r.updateStatsFromPart(t,e);var l={frag:t,part:e,payload:i.data,networkDetails:o};n(l),u(l)},onError:function(n,a,s){r.resetLoader(t,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:n,networkDetails:s}))},onAbort:function(n,a,s){t.stats.aborted=e.stats.aborted,r.resetLoader(t,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:s}))},onTimeout:function(n,a,s){r.resetLoader(t,d),l(new h({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:s}))}})}))},e.updateStatsFromPart=function(t,e){var n=t.stats,r=e.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(t.duration/e.duration),s=Math.min(Math.round(n.loaded/i),a),o=(a-s)*Math.round(n.loaded/s);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);var u=n.loading,l=r.loading;u.start?u.first+=l.first-l.start:(u.start=l.start,u.first=l.first),u.end=l.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function f(t,e){void 0===e&&(e=null);var n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,s=n.byteRangeEndOffset;return Object(r.isFiniteNumber)(a)&&Object(r.isFiniteNumber)(s)&&(i.rangeStart=a,i.rangeEnd=s),i}var h=function(t){var e,n;function r(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).data=void 0,n.data=e,n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n),r}(a(Error))},"./src/loader/fragment.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"ElementaryStreamTypes",(function(){return r})),n.d(e,"BaseSegment",(function(){return f})),n.d(e,"Fragment",(function(){return h})),n.d(e,"Part",(function(){return p}));var r,i=n("./src/polyfills/number.ts"),a=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/utils/logger.ts"),o=n("./src/loader/level-key.ts"),u=n("./src/loader/load-stats.ts");function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(r||(r={}));var f=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var n=t.split("@",2),r=[];r[0]=1===n.length?e?e.byteRangeEndOffset:0:parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},d(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),h=function(t){function e(e,n){var r;return(r=t.call(this,n)||this)._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new u.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=e,r}l(e,t);var n=e.prototype;return n.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},n.setDecryptDataFromLevelKey=function(t,e){var n=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=o.LevelKey.fromURI(t.uri)).method=t.method,n.iv=this.createInitializationVector(e),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(t,e,n,r,i,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):s[t]={startPTS:e,endPTS:n,startDTS:r,endDTS:i,partial:a}},n.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null},d(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(i.isFiniteNumber)(this.programDateTime))return null;var t=Object(i.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(f),p=function(t){function e(e,n,r,i,a){var s;(s=t.call(this,r)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new u.LoadStats,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=n,s.index=i;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return l(e,t),d(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(f)},"./src/loader/key-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),s=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var n=e.frag,i=n.type,s=this.loaders[i];if(n.decryptdata){var o=n.decryptdata.uri;if(o!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;if(s&&(a.logger.warn("abort previous key loader for type:"+i),s.abort()),!o)return void a.logger.warn("key uri is falsy");var l=n.loader=this.loaders[i]=new(0,u.loader)(u);this.decrypturl=o,this.decryptkey=null;var c={url:o,frag:n,responseType:"arraybuffer"},d={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(c,d,f)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},e.loadtimeout=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}()},"./src/loader/level-details.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LevelDetails",(function(){return i}));var r=n("./src/polyfills/number.ts");var i=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,n=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!n||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&n>0,this.misses=this.updated||this.advanced?Math.floor(.6*t.misses):t.misses+1,this.availabilityDelay=t.availabilityDelay},(e=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(r.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/loader/level-key.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LevelKey",(function(){return i}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js");var i=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(r.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e;return t.fromURL=function(e,n){return new t(e,n)},t.fromURI=function(e){return new t(e)},(e=[{key:"uri",get:function(){return this._uri}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/loader/load-stats.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"LoadStats",(function(){return r}));var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var r=n("./src/polyfills/number.ts"),i=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/loader/fragment.ts"),s=n("./src/loader/level-details.ts"),o=n("./src/loader/level-key.ts"),u=n("./src/utils/attr-list.ts"),l=n("./src/utils/logger.ts"),c=n("./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),g=/\.(mp4|m4s|m4v|m4a)$/i,m=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var n=e.shift()+".";return(n+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[],a={},s=!1;for(d.lastIndex=0;null!=(r=d.exec(e));)if(r[1]){var o=new u.AttrList(r[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(r[2],n)},c=o.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),y((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(r[3]){var f=new u.AttrList(r[3]);f["DATA-ID"]&&(s=!0,a[f["DATA-ID"]]=f)}return{levels:i,sessionData:s?a:null}},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var s=[],o=0;for(f.lastIndex=0;null!==(a=f.exec(e));){var l=new u.AttrList(a[1]);if(l.TYPE===r){var c={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:r,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,n):""};if(i.length){var d=t.findGroup(i,c.groupId)||i[0];v(c,d,"audioCodec"),v(c,d,"textCodec")}s.push(c)}}return s},t.parseLevelPlaylist=function(t,e,n,c,d){var f,m,y,v=new s.LevelDetails(e),b=v.fragments,E=null,T=0,S=0,w=0,A=0,x=null,C=new a.Fragment(c,e),D=-1,I=!1;for(h.lastIndex=0,v.m3u8=t;null!==(f=h.exec(t));){I&&(I=!1,(C=new a.Fragment(c,e)).start=w,C.sn=T,C.cc=A,C.level=n,E&&(C.initSegment=E,C.rawProgramDateTime=E.rawProgramDateTime));var R=f[1];if(R){C.duration=parseFloat(R);var O=(" "+f[2]).slice(1);C.title=O||null,C.tagList.push(O?["INF",R,O]:["INF",R])}else if(f[3])Object(r.isFiniteNumber)(C.duration)&&(C.start=w,y&&(C.levelkey=y),C.sn=T,C.level=n,C.cc=A,C.urlId=d,b.push(C),C.relurl=(" "+f[3]).slice(1),_(C,x),x=C,w+=C.duration,T++,S=0,I=!0);else if(f[4]){var P=(" "+f[4]).slice(1);x?C.setByteRange(P,x):C.setByteRange(P)}else if(f[5])C.rawProgramDateTime=(" "+f[5]).slice(1),C.tagList.push(["PROGRAM-DATE-TIME",C.rawProgramDateTime]),-1===D&&(D=b.length);else{if(!(f=f[0].match(p))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(m=1;m<f.length&&void 0===f[m];m++);var M=(" "+f[m]).slice(1),L=(" "+f[m+1]).slice(1),N=f[m+2]?(" "+f[m+2]).slice(1):"";switch(M){case"PLAYLIST-TYPE":v.type=L.toUpperCase();break;case"MEDIA-SEQUENCE":T=v.startSN=parseInt(L);break;case"SKIP":var k=new u.AttrList(L),F=k.decimalInteger("SKIPPED-SEGMENTS");if(Object(r.isFiniteNumber)(F)){v.skippedSegments=F;for(var B=F;B--;)b.unshift(null);T+=F}var j=k.enumeratedString("RECENTLY-REMOVED-DATERANGES");j&&(v.recentlyRemovedDateranges=j.split("\t"));break;case"TARGETDURATION":v.targetduration=parseFloat(L);break;case"VERSION":v.version=parseInt(L);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(L||N)&&C.tagList.push(N?[L,N]:[L]);break;case"DIS":A++;case"GAP":C.tagList.push([M]);break;case"BITRATE":C.tagList.push([M,L]);break;case"DISCONTINUITY-SEQ":A=parseInt(L);break;case"KEY":var U,V=new u.AttrList(L),G=V.enumeratedString("METHOD"),H=V.URI,Y=V.hexadecimalInteger("IV"),z=V.enumeratedString("KEYFORMATVERSIONS"),q=V.enumeratedString("KEYID"),X=null!=(U=V.enumeratedString("KEYFORMAT"))?U:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(X)>-1){l.logger.warn("Keyformat "+X+" is not supported from the manifest");continue}if("identity"!==X)continue;G&&(y=o.LevelKey.fromURL(e,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(y.method=G,y.keyFormat=X,q&&(y.keyID=q),z&&(y.keyFormatVersions=z),y.iv=Y));break;case"START":var K=new u.AttrList(L).decimalFloatingPoint("TIME-OFFSET");Object(r.isFiniteNumber)(K)&&(v.startTimeOffset=K);break;case"MAP":var W=new u.AttrList(L);C.relurl=W.URI,W.BYTERANGE&&C.setByteRange(W.BYTERANGE),C.level=n,C.sn="initSegment",y&&(C.levelkey=y),C.initSegment=null,E=C,I=!0;break;case"SERVER-CONTROL":var $=new u.AttrList(L);v.canBlockReload=$.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=$.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&$.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=$.optionalFloat("PART-HOLD-BACK",0),v.holdBack=$.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Q=new u.AttrList(L);v.partTarget=Q.decimalFloatingPoint("PART-TARGET");break;case"PART":var Z=v.partList;Z||(Z=v.partList=[]);var J=S>0?Z[Z.length-1]:void 0,tt=S++,et=new a.Part(new u.AttrList(L),C,e,tt,J);Z.push(et),C.duration+=et.duration;break;case"PRELOAD-HINT":var nt=new u.AttrList(L);v.preloadHint=nt;break;case"RENDITION-REPORT":var rt=new u.AttrList(L);v.renditionReports=v.renditionReports||[],v.renditionReports.push(rt);break;default:l.logger.warn("line parsed but not handled: "+f)}}}x&&!x.relurl?(b.pop(),w-=x.duration,v.partList&&(v.fragmentHint=x)):v.partList&&(_(C,x),C.cc=A,v.fragmentHint=C);var it=b.length,at=b[0],st=b[it-1];if((w+=v.skippedSegments*v.targetduration)>0&&it&&st){v.averagetargetduration=w/it;var ot=st.sn;v.endSN="initSegment"!==ot?ot:0,at&&(v.startCC=at.cc,at.initSegment||v.fragments.every((function(t){return t.relurl&&g.test(null!=(e=null===(n=i.parseURL(t.relurl))||void 0===n?void 0:n.path)?e:"");var e,n}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(C=new a.Fragment(c,e)).relurl=st.relurl,C.level=n,C.sn="initSegment",at.initSegment=C,v.needSidxRanges=!0))}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(w+=v.fragmentHint.duration),v.totalduration=w,v.endCC=A,D>0&&function(t,e){for(var n=t[e],r=e;r--;){var i=t[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(b,D),v},t}();function y(t,e){["video","audio","text"].forEach((function(n){var r=t.filter((function(t){return Object(c.isCodecType)(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}function v(t,e,n){var r=e[n];r&&(t[n]=r)}function _(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(r.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/utils/logger.ts"),o=n("./src/utils/mp4-tools.ts"),u=n("./src/loader/m3u8-parser.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/attr-list.ts");function d(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n}e.default=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,n=new(e.pLoader||e.loader)(e);return t.loader=n,this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:e.url,deliveryDirectives:null})},e.onLevelLoading=function(t,e){this.load({id:e.id,groupId:null,level:e.level,responseType:"text",type:l.PlaylistContextType.LEVEL,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.onAudioTrackLoading=function(t,e){this.load({id:e.id,groupId:e.groupId,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.onSubtitleTrackLoading=function(t,e){this.load({id:e.id,groupId:e.groupId,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:e.url,deliveryDirectives:e.deliveryDirectives})},e.load=function(t){var e,n,r,i,a,o,u=this.hls.config,c=this.getInternalLoader(t);if(c){var d=c.context;if(d&&d.url===t.url)return void s.logger.trace("[playlist-loader]: playlist request ongoing");s.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),c.abort()}switch(t.type){case l.PlaylistContextType.MANIFEST:n=u.manifestLoadingMaxRetry,r=u.manifestLoadingTimeOut,i=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:n=0,r=u.levelLoadingTimeOut;break;default:n=u.levelLoadingMaxRetry,r=u.levelLoadingTimeOut,i=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===l.PlaylistContextType.LEVEL&&null!==t.level?o=this.hls.levels[t.level].details:t.type===l.PlaylistContextType.AUDIO_TRACK&&null!==t.id?o=this.hls.audioTracks[t.id].details:t.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==t.id&&(o=this.hls.subtitleTracks[t.id].details),o)){var f=o.partTarget,h=o.targetduration;f&&h&&(r=Math.min(1e3*Math.max(3*f,.8*h),r))}var p={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:a,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(t,p,g)},e.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(t,n),void this.handlePlaylistLoaded(t,e,n,r);this.resetInternalLoader(n.type);var i=t.data;0===i.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,n,r):this.handleMasterPlaylist(t,e,n,r)):this.handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},e.loaderror=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!1,t)},e.loadtimeout=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!0)},e.handleMasterPlaylist=function(t,e,n,r){var a=this.hls,o=t.data,l=d(t,n),f=u.default.parseMasterPlaylist(o,l),h=f.levels,p=f.sessionData;if(h.length){var g=h.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),m=h.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),y=u.default.parseMasterPlaylistMedia(o,l,"AUDIO",g),v=u.default.parseMasterPlaylistMedia(o,l,"SUBTITLES",m),_=u.default.parseMasterPlaylistMedia(o,l,"CLOSED-CAPTIONS");y.length&&(y.some((function(t){return!t.url}))||!h[0].audioCodec||h[0].attrs.AUDIO||(s.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:h,audioTracks:y,subtitles:v,captions:_,url:l,stats:e,networkDetails:r,sessionData:p})}else this.handleManifestParsingError(t,n,"no level found in manifest",r)},e.handleTrackOrLevelPlaylist=function(t,e,n,s){var o=this.hls,f=n.id,h=n.level,p=n.type,g=d(t,n),m=Object(r.isFiniteNumber)(f)?f:0,y=Object(r.isFiniteNumber)(h)?h:m,v=function(t){switch(t.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(n),_=u.default.parseLevelPlaylist(t.data,g,y,v,m);if(_.fragments.length){if(p===l.PlaylistContextType.MANIFEST){var b={attrs:new c.AttrList({}),bitrate:0,details:_,name:"",url:g};o.trigger(i.Events.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:g,stats:e,networkDetails:s,sessionData:null})}if(e.parsing.end=performance.now(),_.needSidxRanges){var E,T=null===(E=_.fragments[0].initSegment)||void 0===E?void 0:E.url;this.load({url:T,isSidxRequest:!0,type:p,level:h,levelDetails:_,id:f,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=_,this.handlePlaylistLoaded(t,e,n,s)}else o.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},e.handleSidxRequest=function(t,e){var n=Object(o.parseSegmentIndex)(new Uint8Array(t.data));if(n){var r=e.levelDetails;n.references.forEach((function(t,e){var i=t.info,a=r.fragments[e];0===a.byteRange.length&&a.setByteRange(String(1+i.end-i.start)+"@"+String(i.start)),a.initSegment&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,n,r){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:e.type===l.PlaylistContextType.MANIFEST,url:t.url,reason:n,response:t,context:e,networkDetails:r})},e.handleNetworkError=function(t,e,n,r){void 0===n&&(n=!1),s.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var o=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(t);switch(t.type){case l.PlaylistContextType.MANIFEST:o=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:o=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:o=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:o=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(t.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:u,url:t.url,loader:c,context:t,networkDetails:e};r&&(d.response=r),this.hls.trigger(i.Events.ERROR,d)},e.handlePlaylistLoaded=function(t,e,n,r){var a=n.type,s=n.level,o=n.id,u=n.groupId,c=n.loader,d=n.levelDetails,f=n.deliveryDirectives;if(null!=d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:e,networkDetails:r,deliveryDirectives:f});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:u||"",stats:e,networkDetails:r,deliveryDirectives:f});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:u||"",stats:e,networkDetails:r,deliveryDirectives:f})}}else this.handleManifestParsingError(t,n,"invalid target duration",r)},t}()},"./src/polyfills/number.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return r})),n.d(e,"MAX_SAFE_INTEGER",(function(){return i}));var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}()},"./src/remux/mp4-generator.ts":function(t,e,n){"use strict";n.r(e);var r=Math.pow(2,32)-1,i=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,u,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,s=a;a--;)e+=r[a].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),a=0,e=8;a<s;a++)o.set(r[a],e),e+=r[a].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return t.box(t.types.minf,"audio"===e.type?t.box(t.types.smhd,t.SMHD):t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,s)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)a[n+4]=(r=i[n].flags).dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],s=[];for(n=0;n<e.sps.length;n++)a.push((i=(r=e.sps[n]).byteLength)>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)s.push((i=(r=e.pps[n]).byteLength)>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(r));var o=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(s))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return t.box(t.types.stsd,t.STSD,"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.mp4a(e):t.mp3(e):t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,a=e.width,s=e.height,o=Math.floor(i/(r+1)),u=Math.floor(i%(r+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),a=e.id,s=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,s,o,u,l=e.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,(n+=8+d)>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)f.set([(a=(i=l[r]).duration)>>>24&255,a>>>16&255,a>>>8&255,255&a,(s=i.size)>>>24&255,s>>>16&255,s>>>8&255,255&s,(o=i.flags).isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,(u=i.cts)>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var n=t.moov(e),r=new Uint8Array(t.FTYP.byteLength+n.byteLength);return r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,e.default=i},"./src/remux/mp4-remuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g})),n.d(e,"normalizePts",(function(){return m}));var r=n("./src/polyfills/number.ts"),i=n("./src/remux/aac-helper.ts"),a=n("./src/remux/mp4-generator.ts"),s=n("./src/events.ts"),o=n("./src/errors.ts"),u=n("./src/utils/logger.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/timescale-conversion.ts");function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var f=null,h=null,p=!1,g=function(){function t(t,e,n,r){if(void 0===r&&(r=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===f){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);f=i?parseInt(i[1]):0}if(null===h){var a=navigator.userAgent.match(/Safari\/(\d+)/i);h=a?parseInt(a[1]):0}p=!!f&&f<75||!!h&&h<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){u.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){u.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){u.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var r=n.pts-t;return r<-4294967296?(e=!0,m(t,n.pts)):r>0?t:n.pts}),t[0].pts);return e&&u.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,r,i,a,s,o){var c,d,f,h,p,g,y=i,v=i,_=e.pid>-1,b=e.samples.length,E=t.samples.length>0,T=b>1;if((!(t.pid>-1)||E)&&(!_||T)||this.ISGenerated||s){this.ISGenerated||(f=this.generateIS(t,e,i));var S=this.isVideoContiguous,w=-1;if(T&&(w=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!S&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,w>0){u.logger.warn("[mp4-remuxer]: Dropped "+w+" out of "+b+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(w),e.dropped+=w,v+=(e.samples[0].pts-A)/(e.timescale||9e4)}else-1===w&&(u.logger.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),g=!1);if(this.ISGenerated){if(E&&T){var x=this.getVideoStartPts(e.samples),C=(m(t.samples[0].pts,x)-x)/e.inputTimeScale;y+=Math.max(0,C),v+=Math.max(0,-C)}if(E){if(t.samplerate||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(t,e,i)),d=this.remuxAudio(t,y,this.isAudioContiguous,a,_||T||o===l.PlaylistLevelType.AUDIO?v:void 0),T){var D=d?d.endPTS-d.startPTS:0;e.inputTimeScale||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(t,e,i)),c=this.remuxVideo(e,v,S,D)}}else T&&(c=this.remuxVideo(e,v,S,0));c&&(c.firstKeyFrame=w,c.independent=-1!==w)}}return this.ISGenerated&&(n.samples.length&&(p=this.remuxID3(n,i)),r.samples.length&&(h=this.remuxText(r,i))),{audio:d,video:c,initSegment:f,independent:g,text:h,id3:p}},e.generateIS=function(t,e,n){var i,s,o,u=t.samples,l=e.samples,c=this.typeSupported,d={},f=!Object(r.isFiniteNumber)(this._initPTS),h="audio/mp4";if(f&&(i=s=1/0),t.config&&u.length&&(t.timescale=t.samplerate,t.isAAC||(c.mpeg?(h="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:h,codec:t.codec,initSegment:!t.isAAC&&c.mpeg?new Uint8Array(0):a.default.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(o=t.inputTimeScale,i=s=u[0].pts-Math.round(o*n))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:a.default.initSegment([e]),metadata:{width:e.width,height:e.height}},f)){o=e.inputTimeScale;var p=this.getVideoStartPts(l),g=Math.round(o*n);s=Math.min(s,m(l[0].dts,p)-g),i=Math.min(i,p-g)}if(Object.keys(d).length)return this.ISGenerated=!0,f&&(this._initPTS=i,this._initDTS=s),{tracks:d,initPTS:i,timescale:o}},e.remuxVideo=function(t,e,n,r){var i,l,h,g=t.inputTimeScale,v=t.samples,_=[],b=v.length,E=this._initPTS,T=this.nextAvcDts,S=8,w=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,x=0,C=!1;n&&null!==T||(T=e*g-(v[0].pts-m(v[0].dts,v[0].pts)));for(var D=0;D<b;D++){var I=v[D];I.pts=m(I.pts-E,T),I.dts=m(I.dts-E,T),I.dts>I.pts&&(x=Math.max(Math.min(x,I.pts-I.dts),-18e3)),I.dts<v[D>0?D-1:D].dts&&(C=!0)}C&&v.sort((function(t,e){return t.dts-e.dts||t.pts-e.pts})),l=v[0].dts,h=v[v.length-1].dts;var R=Math.round((h-l)/(b-1));if(x<0){if(x<-2*R){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-R,!0)+" ms");for(var O=x,P=0;P<b;P++)v[P].dts=O=Math.max(O,v[P].pts-R),v[P].pts=Math.max(O,v[P].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(x,!0)+" ms to overcome this issue");for(var M=0;M<b;M++)v[M].dts=v[M].dts+x}l=v[0].dts}if(n){var L=l-T,N=L>R;if(N||L<-1){u.logger.warn(N?"AVC: "+Object(c.toMsFromMpegTsClock)(L,!0)+" ms ("+L+"dts) hole between fragments detected, filling it":"AVC: "+Object(c.toMsFromMpegTsClock)(-L,!0)+" ms ("+L+"dts) overlapping between fragments detected");var k=v[0].pts-L;v[0].dts=l=T,v[0].pts=k,u.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(k,!0)+"/"+Object(c.toMsFromMpegTsClock)(l,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(L,!0)+" ms")}}p&&(l=Math.max(0,l));for(var F=0,B=0,j=0;j<b;j++){for(var U=v[j],V=U.units,G=V.length,H=0,Y=0;Y<G;Y++)H+=V[Y].data.length;B+=H,F+=G,U.length=H,U.dts=Math.max(U.dts,l),U.pts=Math.max(U.pts,U.dts,0),w=Math.min(U.pts,w),A=Math.max(U.pts,A)}h=v[b-1].dts;var z,q=B+4*F+8;try{z=new Uint8Array(q)}catch(ct){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating video mdat "+q})}var X=new DataView(z.buffer);X.setUint32(0,q),z.set(a.default.types.mdat,4);for(var K=0;K<b;K++){for(var W=v[K],$=W.units,Q=0,Z=0,J=$.length;Z<J;Z++){var tt=$[Z],et=tt.data,nt=tt.data.byteLength;X.setUint32(S,nt),z.set(et,S+=4),S+=nt,Q+=4+nt}if(K<b-1)i=v[K+1].dts-W.dts;else{var rt=this.config,it=W.dts-v[K>0?K-1:K].dts;if(rt.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(rt.maxBufferHole*g),st=(r?w+r*g:this.nextAudioPts)-W.pts;st>at?((i=st-it)<0&&(i=it),u.logger.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=it}else i=it}var ot=Math.round(W.pts-W.dts);_.push(new y(W.key,i,Q,ot))}if(_.length&&f&&f<70){var ut=_[0].flags;ut.dependsOn=2,ut.isNonSync=0}console.assert(void 0!==i,"mp4SampleDuration must be computed"),this.nextAvcDts=T=h+i,this.isVideoContiguous=!0;var lt={data1:a.default.moof(t.sequenceNumber++,l,d({},t,{samples:_})),data2:z,startPTS:w/g,endPTS:(A+i)/g,startDTS:l/g,endDTS:T/g,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:t.dropped};return t.samples=[],t.dropped=0,console.assert(z.length,"MDAT length must not be zero"),lt},e.remuxAudio=function(t,e,n,r,l){var c=t.inputTimeScale,f=c/(t.samplerate?t.samplerate:c),h=t.isAAC?1024:1152,p=h*f,g=this._initPTS,v=!t.isAAC&&this.typeSupported.mpeg,_=[],b=t.samples,E=v?0:8,T=this.nextAudioPts||-1,S=e*c;if(this.isAudioContiguous=n=n||b.length&&T>0&&(r&&Math.abs(S-T)<9e3||Math.abs(m(b[0].pts-g,S)-T)<20*p),b.forEach((function(t){t.pts=m(t.pts-g,S)})),!n||T<0){if(!(b=b.filter((function(t){return t.pts>=0}))).length)return;T=0===l?0:r?Math.max(0,S):b[0].pts}if(t.isAAC)for(var w=void 0!==l,A=this.config.maxAudioFramesDrift,x=0,C=T;x<b.length;x++){var D=b[x],I=D.pts,R=I-C,O=Math.abs(1e3*R/c);if(R<=-A*p&&w)0===x&&(u.logger.warn("Audio frame @ "+(I/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/c)+" ms."),this.nextAudioPts=T=C=I);else if(R>=A*p&&O<1e4&&w){var P=Math.round(R/p);(C=I-P*p)<0&&(P--,C+=p),0===x&&(this.nextAudioPts=T=C),u.logger.warn("[mp4-remuxer]: Injecting "+P+" audio frame @ "+(C/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var M=0;M<P;M++){var L=Math.max(C,0),N=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);N||(u.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),N=D.unit.subarray()),b.splice(x,0,{unit:N,pts:L}),C+=p,x++}}D.pts=C,C+=p}for(var k,F=null,B=null,j=0,U=b.length;U--;)j+=b[U].unit.byteLength;for(var V=0,G=b.length;V<G;V++){var H=b[V],Y=H.unit,z=H.pts;if(null!==B)_[V-1].duration=Math.round((z-B)/f);else{if(n&&t.isAAC&&(z=T),F=z,!(j>0))return;j+=E;try{k=new Uint8Array(j)}catch(Z){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}v||(new DataView(k.buffer).setUint32(0,j),k.set(a.default.types.mdat,4))}k.set(Y,E);var q=Y.byteLength;E+=q,_.push(new y(!0,h,q,0)),B=z}var X=_.length;if(X){this.nextAudioPts=T=B+f*_[_.length-1].duration;var K=v?new Uint8Array(0):a.default.moof(t.sequenceNumber++,F/f,d({},t,{samples:_}));t.samples=[];var W=F/c,$=T/c,Q={data1:K,data2:k,startPTS:W,endPTS:$,startDTS:W,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:X};return this.isAudioContiguous=!0,console.assert(k.length,"MDAT length must not be zero"),Q}},e.remuxEmptyAudio=function(t,e,n,r){var a=t.inputTimeScale,s=this.nextAudioPts,o=(null!==s?s:r.startDTS*a)+this._initDTS,l=a/(t.samplerate?t.samplerate:a)*1024,c=Math.ceil((r.endDTS*a+this._initDTS-o)/l),d=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(u.logger.warn("[mp4-remuxer]: remux empty Audio"),d){for(var f=[],h=0;h<c;h++){var p=o+h*l;f.push({unit:d,pts:p,dts:p})}return t.samples=f,this.remuxAudio(t,e,n,!1)}u.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=this._initDTS,s=0;s<n;s++){var o=t.samples[s];o.pts=m(o.pts-i,e*r)/r,o.dts=m(o.dts-a,e*r)/r}var u=t.samples;return t.samples=[],{samples:u}}},e.remuxText=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=0;a<n;a++){var s=t.samples[a];s.pts=m(s.pts-i,e*r)/r}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}},t}();function m(t,e){var n;if(null===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}var y=function(t,e,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=n,this.cts=r,this.flags=new v(t)},v=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},"./src/remux/passthrough-remuxer.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/mp4-tools.ts"),a=n("./src/loader/fragment.ts"),s=n("./src/utils/logger.ts"),o=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,n){this.audioCodec=e,this.videoCodec=n,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,n=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var r=this.initData=Object(i.parseInitSegment)(t);e||(e=l(r.audio,a.ElementaryStreamTypes.AUDIO)),n||(n=l(r.video,a.ElementaryStreamTypes.VIDEO));var o={};r.audio&&r.video?o.audiovideo={container:"video/mp4",codec:e+","+n,initSegment:t,id:"main"}:r.audio?o.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:r.video?o.video={container:"video/mp4",codec:n,initSegment:t,id:"main"}:s.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=o},e.remux=function(t,e,n,a,o){var l=this.initPTS,c=this.lastEndDTS,d={audio:void 0,video:void 0,text:a,id3:n,initSegment:void 0};Object(r.isFiniteNumber)(c)||(c=this.lastEndDTS=o||0);var f=e.samples;if(!f||!f.length)return d;var h={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(f),p=this.initData),!p||!p.length)return s.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(r.isFiniteNumber)(l)||(this.initPTS=h.initPTS=l=u(p,f,c));var g=Object(i.getDuration)(f,p),m=c,y=g+m;Object(i.offsetStartDTS)(p,f,l),g>0?this.lastEndDTS=y:(s.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var v=!!p.audio,_=!!p.video,b="";v&&(b+="audio"),_&&(b+="video");var E={data1:f,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:b,hasAudio:v,hasVideo:_,nb:1,dropped:0};return d.audio="audio"===E.type?E:void 0,d.video="audio"!==E.type?E:void 0,d.text=a,d.id3=n,d.initSegment=h,d},t}(),u=function(t,e,n){return Object(i.getStartDTS)(t,e)-n};function l(t,e){var n=null==t?void 0:t.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||e===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}e.default=o},"./src/task-loop.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}()},"./src/types/cmcd.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"CMCDVersion",(function(){return s})),n.d(e,"CMCDObjectType",(function(){return r})),n.d(e,"CMCDStreamingFormat",(function(){return i})),n.d(e,"CMCDStreamType",(function(){return a}));var r,i,a,s=1;!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(r||(r={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(i||(i={})),function(t){t.VOD="v",t.LIVE="l"}(a||(a={}))},"./src/types/level.ts":function(t,e,n){"use strict";var r;function i(t,e){var n=t.canSkipUntil;return n&&(void 0!==e?e-t.endSN:0)<n?t.canSkipDateRanges?r.v2:r.Yes:r.No}n.r(e),n.d(e,"HlsSkip",(function(){return r})),n.d(e,"getSkipValue",(function(){return i})),n.d(e,"HlsUrlParameters",(function(){return a})),n.d(e,"Level",(function(){return s})),function(t){t.No="",t.Yes="YES",t.v2="v2"}(r||(r={}));var a=function(){function t(t,e,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=n}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),s=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e;return(e=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"./src/types/loader.ts":function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,"PlaylistContextType",(function(){return r})),n.d(e,"PlaylistLevelType",(function(){return i})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"ChunkMetadata",(function(){return r}));var r=function(t,e,n,r,i,a){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=n,this.size=r,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"AttrList",(function(){return a}));var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var n=this[t];return n?parseFloat(n):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(i.lastIndex=0;null!==(e=i.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}()},"./src/utils/binary-search.ts":function(t,e,n){"use strict";n.r(e),e.default={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var s=e(a=t[i=(n+r)/2|0]);if(s>0)n=i+1;else{if(!(s<0))return a;r=i-1}}return null}}},"./src/utils/buffer-helper.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"BufferHelper",(function(){return a}));var r=n("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function t(){}return t.isBuffered=function(e,n){try{if(e)for(var r=t.getBuffered(e),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(a){}return!1},t.bufferInfo=function(e,n,r){try{if(e){var i,a=t.getBuffered(e),s=[];for(i=0;i<a.length;i++)s.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(s,n,r)}}catch(o){}return{len:0,start:n,end:n,nextStart:void 0}},t.bufferedInfo=function(t,e,n){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var r=[];if(n)for(var i=0;i<t.length;i++){var a=r.length;if(a){var s=r[a-1].end;t[i].start-s<n?t[i].end>s&&(r[a-1].end=t[i].end):r.push(t[i])}else r.push(t[i])}else r=t;for(var o,u=0,l=e,c=e,d=0;d<r.length;d++){var f=r[d].start,h=r[d].end;if(e+n>=f&&e<h)l=f,u=(c=h)-e;else if(e+n<f){o=f;break}}return{len:u,start:l||0,end:c||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(e){return r.logger.log("failed to get media.buffered",e),i}},t}()},"./src/utils/cea-608-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"Row",(function(){return m})),n.d(e,"CaptionScreen",(function(){return y}));var r,i=n("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(t){var e=t;return a.hasOwnProperty(t)&&(e=a[t]),String.fromCharCode(e)},o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(r||(r={}));var f=function(){function t(){this.time=null,this.verboseLevel=r.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&i.logger.log(this.time+" ["+t+"] "+e)},t}(),h=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},p=function(){function t(t,e,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),g=function(){function t(t,e,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new p(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),m=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new g);this.logger=t,this.pos=0,this.currPenState=new p}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<100;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(r.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(r.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=s(t);this.pos>=100?this.logger.log(r.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),y=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new m(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(r.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(r.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[i].cueStartTime,o=this.logger.time;if(s&&null!==o&&s<o)for(var u=0;u<this.nrRollUpRows;u++)this.rows[e-this.nrRollUpRows+u+1].copy(a.rows[i+u])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var c=Math.max(t.indent-1,0);l.setCursor(t.indent),t.color=l.chars[c].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},e.setBkgData=function(t){this.logger.log(r.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(r.TEXT,this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(r.INFO,"Rolling up")}else this.logger.log(r.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&e.push(t?"Row "+(r+1)+": '"+i+"'":i.trim())}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),v=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new y(n),this.nonDisplayedMemory=new y(n),this.lastOutputScreen=new y(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(r.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);this.logger.log(r.INFO,(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(r.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(r.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(r.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(r.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(r.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(r.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(r.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(r.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(r.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(r.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(r.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(r.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(r.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(r.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(r.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(r.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function _(t,e,n){n.a=t,n.b=e}function b(t,e,n){return n.a===t&&n.b===e}e.default=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new f;this.channels=[null,new v(t,e,r),new v(t+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,i,a,s=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(a=127&e[o+1],0!=(i=127&e[o])||0!==a){if(this.logger.log(r.DATA,"["+h([e[o],e[o+1]])+"] -> ("+h([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(s=this.parseChars(i,a))){var u=this.currentChannel;u&&u>0?this.channels[u].insertChars(s):this.logger.log(r.WARNING,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(r.WARNING,"Couldn't parse cleaned data "+h([i,a])+" orig: "+h([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(b(t,e,n))return _(null,null,n),this.logger.log(r.DEBUG,"Repeated command ("+h([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,a=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),_(t,e,n),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(r.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(e),this.logger.log(r.DEBUG,"MIDROW ("+h([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(b(t,e,n))return _(null,null,n),!0;var r=t<=23?1:2,i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(e>=64&&e<=95?1===r?o[t]:l[t]:1===r?u[t]:c[t],e)),_(t,e,n),this.currentChannel=r,!0)},e.interpretPAC=function(t,e){var n,r={color:null,italics:!1,indent:null,underline:!1,row:t};return r.underline=1==(1&(n=e>95?e-96:e-64)),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n,i,a=null,o=null;if(t>=25?(n=2,o=t-8):(n=1,o=t),o>=17&&o<=19?(this.logger.log(r.INFO,"Special char '"+s(i=17===o?e+80:18===o?e+112:e+144)+"' in channel "+n),a=[i]):t>=32&&t<=127&&(a=0===e?[t]:[t,e]),a){var u=h(a);this.logger.log(r.DEBUG,"Char codes =  "+u.join(",")),_(t,e,this.cmdHistory)}return a},e.parseBackgroundAttributes=function(t,e){var n;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var r={};return 16===t||24===t?(n=Math.floor((e-32)/2),r.background=d[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),this.channels[t<=23?1:2].setBkgData(r),_(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}()},"./src/utils/codecs.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"isCodecType",(function(){return i})),n.d(e,"isCodecSupportedInMp4",(function(){return a}));var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(t,e){var n=r[e];return!!n&&!0===n[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}},"./src/utils/cues.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/vttparser.ts"),i=n("./src/utils/webvtt-parser.ts"),a=n("./src/utils/texttrack-utils.ts"),s=/\s/;e.default={newCue:function(t,e,n,o){for(var u,l,c,d,f,h=[],p=self.VTTCue||self.TextTrackCue,g=0;g<o.rows.length;g++)if(c=!0,d=0,f="",!(u=o.rows[g]).isEmpty()){for(var m=0;m<u.chars.length;m++)s.test(u.chars[m].uchar)&&c?d++:(f+=u.chars[m].uchar,c=!1);u.cueStartTime=e,e===n&&(n+=1e-4),d>=16?d--:d++;var y=Object(r.fixLineBreaks)(f.trim()),v=Object(i.generateCueId)(e,n,y);t&&t.cues&&t.cues.getCueById(v)||((l=new p(e,n,y)).id=v,l.line=g+1,l.align="left",l.position=10+Math.min(80,10*Math.floor(8*d/32)),h.push(l))}return t&&h.length&&(h.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),h.forEach((function(e){return Object(a.addCueToTrack)(t,e)}))),h}}},"./src/utils/discontinuities.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"findFirstFragWithCC",(function(){return s})),n.d(e,"shouldAlignOnDiscontinuities",(function(){return o})),n.d(e,"findDiscontinuousReferenceFrag",(function(){return u})),n.d(e,"adjustSlidingStart",(function(){return c})),n.d(e,"alignStream",(function(){return d})),n.d(e,"alignPDT",(function(){return f})),n.d(e,"alignFragmentByPDTDelta",(function(){return h})),n.d(e,"alignMediaPlaylistByPDT",(function(){return p}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts"),a=n("./src/controller/level-helper.ts");function s(t,e){for(var n=null,r=0,i=t.length;r<i;r++){var a=t[r];if(a&&a.cc===e){n=a;break}}return n}function o(t,e,n){return!(!e.details||!(n.endCC>n.startCC||t&&t.cc<n.startCC))}function u(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var a=s(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(t,e){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function c(t,e){for(var n=e.fragments,r=0,i=n.length;r<i;r++)l(n[r],t);e.fragmentHint&&l(e.fragmentHint,t),e.alignedSliding=!0}function d(t,e,n){e&&(function(t,e,n){if(o(t,n,e)){var a=u(n.details,e);a&&Object(r.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+e.url),c(a.start,e))}}(t,n,e),!n.alignedSliding&&e.details&&f(n,e.details),n.alignedSliding||!e.details||n.skippedSegments||Object(a.adjustSliding)(e.details,n))}function f(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,s=(a-n)/1e3+e.fragments[0].start;s&&Object(r.isFiniteNumber)(s)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+s.toFixed(3)+" "+t.url+" "),c(s,t))}}function h(t,e){var n=t.programDateTime;if(n){var r=(n-e)/1e3;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function p(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime-1e3*e.fragments[0].start;t.fragments.forEach((function(t){h(t,n)})),t.fragmentHint&&h(t.fragmentHint,n),t.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/ewma.ts");e.default=function(){function t(t,e,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(e)}var e=t.prototype;return e.update=function(t,e){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new r.default(t,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new r.default(e,i.getEstimate(),i.getTotalWeight()))},e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}()},"./src/utils/ewma.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=n}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}()},"./src/utils/fetch-loader.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"fetchSupported",(function(){return f}));var r=n("./src/polyfills/number.ts"),i=n("./src/loader/load-stats.ts"),a=n("./src/demux/chunk-cache.ts");function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return o(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function o(t,e,n){return(o=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function f(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}var h=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||p,this.controller=new self.AbortController,this.stats=new i.LoadStats}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var s=function(t,e){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(d({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}(t,this.controller.signal),o=n.onProgress,u="arraybuffer"===t.responseType,l=u?"byteLength":"length";this.context=t,this.config=e,this.callbacks=n,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(a,t,i.response)}),e.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok)throw new g(n.statusText||"fetch, bad network response",n.status,n);return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),o&&Object(r.isFiniteNumber)(e.highWaterMark)?i.loadProgressively(n,a,t,e.highWaterMark,o):u?n.arrayBuffer():n.text()})).then((function(s){var u=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=s[l];var c={url:u.url,data:s};o&&!Object(r.isFiniteNumber)(e.highWaterMark)&&o(a,t,s,u),n.onSuccess(c,a,t,u)})).catch((function(e){self.clearTimeout(i.requestTimeout),a.aborted||n.onError({code:e.code||0,text:e.message},t,e.details)}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,n,r,i){void 0===r&&(r=0);var s=new a.default,o=t.body.getReader();return function a(){return o.read().then((function(o){if(o.done)return s.dataLength&&i(e,n,s.flush(),t),Promise.resolve(new ArrayBuffer(0));var u=o.value,l=u.length;return e.loaded+=l,l<r||s.dataLength?(s.push(u),s.dataLength>=r&&i(e,n,s.flush(),t)):i(e,n,u,t),a()})).catch((function(){return Promise.reject()}))}()},t}();function p(t,e){return new self.Request(t.url,e)}var g=function(t){var e,n;function r(e,n,r){var i;return(i=t.call(this,e)||this).code=void 0,i.details=void 0,i.code=n,i.details=r,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n),r}(s(Error));e.default=h},"./src/utils/imsc1-ttml-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"IMSC1_CODEC",(function(){return c})),n.d(e,"parseIMSC1",(function(){return p}));var r=n("./src/utils/mp4-tools.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/utils/vttcue.ts"),s=n("./src/demux/id3.ts"),o=n("./src/utils/timescale-conversion.ts"),u=n("./src/utils/webvtt-parser.ts");function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,f=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,h={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(t,e,n,i,c){var d=Object(r.findBox)(new Uint8Array(t),["mdat"]);if(0!==d.length){var f=d[0],p=Object(s.utf8ArrayToStr)(new Uint8Array(t,f.start,f.end-f.start)),b=Object(o.toTimescaleFromScale)(e,1,n);try{i(function(t,e){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((function(t,e){return t[e]=n.getAttribute("ttp:"+e)||r[e],t}),{}),s="preserve"!==n.getAttribute("xml:space"),o=m(g(n,"styling","style")),c=m(g(n,"layout","region")),d=g(n,"body","[begin]");return[].map.call(d,(function(t){var n=function t(e,n){return[].slice.call(e.childNodes).reduce((function(e,r,i){var a;return"br"===r.nodeName&&i?e+"\n":null!==(a=r.childNodes)&&void 0!==a&&a.length?t(r,n):n?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}(t,s);if(!n||!t.hasAttribute("begin"))return null;var r=_(t.getAttribute("begin"),i),d=_(t.getAttribute("dur"),i),f=_(t.getAttribute("end"),i);if(null===r)throw v(t);if(null===f){if(null===d)throw v(t);f=r+d}var p=new a.default(r-e,f-e,n);p.id=Object(u.generateCueId)(p.startTime,p.endTime,p.text);var g=c[t.getAttribute("region")],m=o[t.getAttribute("style")];p.position=10,p.size=80;var b=function(t,e){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(r,i){var a=y(e,n,i)||y(t,n,i);return a&&(r[i]=a),r}),{})}(g,m),E=b.textAlign;if(E){var T=h[E];T&&(p.lineAlign=T),p.align=E}return l(p,b),p})).filter((function(t){return null!==t}))}(p,b))}catch(E){c(E)}}else c(new Error("Could not parse IMSC1 mdat"))}function g(t,e,n){var r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function m(t){return t.reduce((function(t,e){var n=e.getAttribute("xml:id");return n&&(t[n]=e),t}),{})}function y(t,e,n){return t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function v(t){return new Error("Could not parse ttml timestamp "+t)}function _(t,e){if(!t)return null;var n=Object(i.parseTimeStamp)(t);return null===n&&(d.test(t)?n=function(t,e){var n=d.exec(t);return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+((0|n[4])+(0|n[5])/e.subFrameRate)/e.frameRate}(t,e):f.test(t)&&(n=function(t,e){var n=f.exec(t),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}(t,e))),n}},"./src/utils/logger.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"enableLogs",(function(){return o})),n.d(e,"logger",(function(){return u}));var r=function(){},i={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=i;function s(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):r}function o(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){a[e]=t[e]?t[e].bind(t):s(e)}))}(t,"debug","log","info","warn","error");try{a.log()}catch(e){a=i}}else a=i}var u=i},"./src/utils/mediakeys-helper.ts":function(t,e,n){"use strict";var r;n.r(e),n.d(e,"KeySystems",(function(){return r})),n.d(e,"requestMediaKeySystemAccess",(function(){return i})),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(r||(r={}));var i="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(t,e,n){"use strict";function r(){return self.MediaSource||self.WebKitMediaSource}n.r(e),n.d(e,"getMediaSource",(function(){return r}))},"./src/utils/mp4-tools.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"bin2str",(function(){return o})),n.d(e,"readUint16",(function(){return u})),n.d(e,"readUint32",(function(){return l})),n.d(e,"writeUint32",(function(){return c})),n.d(e,"findBox",(function(){return d})),n.d(e,"parseSegmentIndex",(function(){return f})),n.d(e,"parseInitSegment",(function(){return h})),n.d(e,"getStartDTS",(function(){return p})),n.d(e,"getDuration",(function(){return g})),n.d(e,"computeRawDurationFromSamples",(function(){return m})),n.d(e,"offsetStartDTS",(function(){return y})),n.d(e,"segmentValidRange",(function(){return v})),n.d(e,"appendUint8Array",(function(){return _}));var r=n("./src/utils/typed-array.ts"),i=n("./src/loader/fragment.ts"),a=Math.pow(2,32)-1,s=[].push;function o(t){return String.fromCharCode.apply(null,t)}function u(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n}function c(t,e,n){"data"in t&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function d(t,e){var n,r,i,a=[];if(!e.length)return a;"data"in t?(n=t.data,r=t.start,i=t.end):(r=0,i=(n=t).byteLength);for(var u=r;u<i;){var c=l(n,u),f=c>1?u+c:i;if(o(n.subarray(u+4,u+8))===e[0])if(1===e.length)a.push({data:n,start:u+8,end:f});else{var h=d({data:n,start:u+8,end:f},e.slice(1));h.length&&s.apply(a,h)}u=f}return a}function f(t){var e=d(t,["moov"])[0],n=e?e.end:null,r=d(t,["sidx"]);if(!r||!r[0])return null;var i=[],a=r[0],s=a.data[0],o=0===s?8:16,c=l(a,o);o+=4,o+=0===s?8:16;var f=a.end+0,h=u(a,o+=2);o+=2;for(var p=0;p<h;p++){var g=o,m=l(a,g);g+=4;var y=2147483647&m;if(1==(2147483648&m)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var v=l(a,g);g+=4,i.push({referenceSize:y,subsegmentDuration:v,info:{duration:v/c,start:f,end:f+y-1}}),f+=y,o=g+=4}return{earliestPresentationTime:0,timescale:c,version:s,referencesCount:h,references:i,moovEndOffset:n}}function h(t){for(var e=[],n=d(t,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],s=d(a,["tkhd"])[0];if(s){var u=s.data[s.start],c=0===u?12:20,f=l(s,c),h=d(a,["mdia","mdhd"])[0];if(h){var p=l(h,c=0===(u=h.data[h.start])?12:20),g=d(a,["mdia","hdlr"])[0];if(g){var m=o(g.data.subarray(g.start+8,g.start+12)),y={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[m];if(y){var v=d(a,["mdia","minf","stbl","stsd"])[0],_=void 0;v&&(_=o(v.data.subarray(v.start+12,v.start+16))),e[f]={timescale:p,type:y},e[y]={timescale:p,id:f,codec:_}}}}}}return d(t,["moov","mvex","trex"]).forEach((function(t){var n=l(t,4),r=e[n];r&&(r.default={duration:l(t,12),flags:l(t,20)})})),e}function p(t,e){return d(e,["moof","traf"]).reduce((function(e,n){var r=d(n,["tfdt"])[0],i=r.data[r.start],a=d(n,["tfhd"]).reduce((function(e,n){var a=l(n,4),s=t[a];if(s){var o=l(r,4);1===i&&(o*=Math.pow(2,32),o+=l(r,8));var u=o/(s.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)||0}function g(t,e){for(var n=0,r=0,a=0,s=d(t,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],c=d(u,["tfhd"])[0],h=e[l(c,4)];if(h){var p=h.default,g=l(c,0)|(null==p?void 0:p.flags),y=null==p?void 0:p.duration;8&g&&(y=l(c,2&g?12:8));for(var v=h.timescale||9e4,_=d(u,["trun"]),b=0;b<_.length;b++)!(n=m(_[b]))&&y&&(n=y*l(_[b],4)),h.type===i.ElementaryStreamTypes.VIDEO?r+=n/v:h.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/v)}}if(0===r&&0===a){var E=f(t);if(null!=E&&E.references)return E.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return r||a}function m(t){var e=l(t,0),n=8;1&e&&(n+=4),4&e&&(n+=4);for(var r=0,i=l(t,4),a=0;a<i;a++)256&e&&(r+=l(t,n),n+=4),512&e&&(n+=4),1024&e&&(n+=4),2048&e&&(n+=4);return r}function y(t,e,n){d(e,["moof","traf"]).forEach((function(e){d(e,["tfhd"]).forEach((function(r){var i=l(r,4),s=t[i];if(s){var o=s.timescale||9e4;d(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],r=l(t,4);if(0===e)c(t,4,r-n*o);else{r*=Math.pow(2,32),r+=l(t,8),r-=n*o,r=Math.max(r,0);var i=Math.floor(r/(a+1)),s=Math.floor(r%(a+1));c(t,4,i),c(t,8,s)}}))}}))}))}function v(t){var e={valid:null,remainder:null},n=d(t,["moof"]);if(!n)return e;if(n.length<2)return e.remainder=t,e;var i=n[n.length-1];return e.valid=Object(r.sliceUint8)(t,0,i.start-8),e.remainder=Object(r.sliceUint8)(t,i.start-8),e}function _(t,e){var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}},"./src/utils/output-filter.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}()},"./src/utils/texttrack-utils.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"sendAddTrackEvent",(function(){return i})),n.d(e,"addCueToTrack",(function(){return a})),n.d(e,"clearCurrentCues",(function(){return s})),n.d(e,"removeCuesInRange",(function(){return o})),n.d(e,"getCuesInRange",(function(){return u}));var r=n("./src/utils/logger.ts");function i(t,e){var n;try{n=new Event("addtrack")}catch(r){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function a(t,e){var n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(a){r.logger.debug("[texttrack-utils]: "+a);var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}"disabled"===n&&(t.mode=n)}function s(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);"disabled"===e&&(t.mode=e)}function o(t,e,n){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var i=u(t.cues,e,n),a=0;a<i.length;a++)t.removeCue(i[a]);"disabled"===r&&(t.mode=r)}function u(t,e,n){var r=[],i=function(t,e){if(e<t[0].startTime)return 0;var n=t.length-1;if(e>t[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(e<t[a].startTime)i=a-1;else{if(!(e>t[a].startTime&&r<n))return a;r=a+1}}return t[r].startTime-e<e-t[i].startTime?r:i}(t,e);if(i>-1)for(var a=i,s=t.length;a<s;a++){var o=t[a];if(o.startTime>=e&&o.endTime<=n)r.push(o);else if(o.startTime>n)return r}return r}},"./src/utils/time-ranges.ts":function(t,e,n){"use strict";n.r(e),e.default={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}}},"./src/utils/timescale-conversion.ts":function(t,e,n){"use strict";function r(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=t*e*n;return r?Math.round(i):i}function i(t,e,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),r(t,e,1/n,i)}function a(t,e){return void 0===e&&(e=!1),r(t,1e3,1/9e4,e)}function s(t,e){return void 0===e&&(e=1),r(t,9e4,1/e)}n.r(e),n.d(e,"toTimescaleFromBase",(function(){return r})),n.d(e,"toTimescaleFromScale",(function(){return i})),n.d(e,"toMsFromMpegTsClock",(function(){return a})),n.d(e,"toMpegTsClockFromTimescale",(function(){return s}))},"./src/utils/typed-array.ts":function(t,e,n){"use strict";function r(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}n.r(e),n.d(e,"sliceUint8",(function(){return r}))},"./src/utils/vttcue.ts":function(t,e,n){"use strict";n.r(e),e.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function n(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var n=e.toLowerCase();return!!~t.indexOf(n)&&n}function r(t){return n(e,t)}function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var s in a)t[s]=a[s]}return t}function a(e,a,s){var o=this,u={enumerable:!0};o.hasBeenReset=!1;var l="",c=!1,d=e,f=a,h=s,p=null,g="",m=!0,y="auto",v="start",_=50,b="middle",E=50,T="middle";Object.defineProperty(o,"id",i({},u,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(o,"pauseOnExit",i({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(o,"startTime",i({},u,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},u,{get:function(){return h},set:function(t){h=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},u,{get:function(){return g},set:function(e){var r=function(e){return n(t,e)}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},u,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},u,{get:function(){return y},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},u,{get:function(){return v},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},u,{get:function(){return b},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},u,{get:function(){return T},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"parseTimeStamp",(function(){return a})),n.d(e,"fixLineBreaks",(function(){return d})),n.d(e,"VTTParser",(function(){return f}));var r=n("./src/utils/vttcue.ts"),i=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function a(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+parseFloat(r||0)}var n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}var s=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var n=parseFloat(e);if(n>=0&&n<=100)return this.set(t,n),!0}return!1},t}();function o(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(n);2===s.length&&e(s[0],s[1])}}var u=new r.default(0,0,""),l="middle"===u.align?"middle":"center";function c(t,e,n){var r=t;function i(){var e=a(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function c(){t=t.replace(/^\s+/,"")}if(c(),e.startTime=i(),c(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),c(),e.endTime=i(),c(),function(t,e){var r=new s;o(t,(function(t,e){var i;switch(t){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===e){r.set(t,n[a].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":i=e.split(","),r.integer(t,i[0]),r.percent(t,i[0])&&r.set("snapToLines",!1),r.alt(t,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",l,"end"]);break;case"position":i=e.split(","),r.percent(t,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",l,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",l);var a=r.get("position","auto");"auto"===a&&50===u.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function d(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var f=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=d(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(i=n()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var s=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(s?s=!1:i=n(),e.state){case"HEADER":/:/.test(i)?o(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new r.default(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{c(i,e.cue,e.regionList)}catch(l){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=-1!==i.indexOf("--\x3e");if(!i||u&&(s=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID")}}}catch(l){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t)}return this.onflush&&this.onflush(),this},t}()},"./src/utils/webvtt-parser.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"generateCueId",(function(){return d})),n.d(e,"parseWebVTT",(function(){return f}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/demux/id3.ts"),s=n("./src/utils/timescale-conversion.ts"),o=n("./src/remux/mp4-remuxer.ts"),u=/\r\n|\n\r|\n|\r/g,l=function(t,e,n){return void 0===n&&(n=0),t.substr(n,e.length)===e},c=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()};function d(t,e,n){return c(t.toString())+c(e.toString())+c(n)}function f(t,e,n,c,f,h,p,g){var m,y=new i.VTTParser,v=Object(a.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(u,"\n").split("\n"),_=[],b=Object(s.toMpegTsClockFromTimescale)(e,n),E="00:00.000",T=0,S=0,w=!0,A=!1;y.oncue=function(t){var e=c[f],n=c.ccOffset,r=(T-b)/9e4;if(null!=e&&e.new&&(void 0!==S?n=c.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC]}t.presentationOffset=n}(c,f,r)),r&&(n=r-c.presentationOffset),A){var i=t.endTime-t.startTime,a=Object(o.normalizePts)(9e4*(t.startTime+n-S),9e4*h)/9e4;t.startTime=a,t.endTime=a+i}var s=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(s)),t.id||(t.id=d(t.startTime,t.endTime,s)),t.endTime>0&&_.push(t)},y.onparsingerror=function(t){m=t},y.onflush=function(){m?g(m):p(_)},v.forEach((function(t){if(w){if(l(t,"X-TIMESTAMP-MAP=")){w=!1,A=!0,t.substr(16).split(",").forEach((function(t){l(t,"LOCAL:")?E=t.substr(6):l(t,"MPEGTS:")&&(T=parseInt(t.substr(7)))}));try{S=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(r.isFiniteNumber)(e)&&Object(r.isFiniteNumber)(n)&&Object(r.isFiniteNumber)(i)&&Object(r.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*i)+36e5*a}(E)/1e3}catch(e){A=!1,m=e}return}""===t&&(w=!1)}y.parse(t+"\n")})),y.flush()}},"./src/utils/xhr-loader.ts":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.ts"),i=n("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m;e.default=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=n,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,e.url)}catch(o){n.open("GET",e.url,!0),i(n,e.url)}n.readyState||n.open("GET",e.url,!0);var a=this.context.headers;if(a)for(var s in a)n.setRequestHeader(s,a[s])}catch(o){return void this.callbacks.onError({code:n.status,text:o.message},e,n)}e.rangeEnd&&n.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),n.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,n=this.stats;if(t&&e){var i=e.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){e.onreadystatechange=null,e.onprogress=null;var s=e.status;if(s>=200&&s<300){var o,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u="arraybuffer"===t.responseType?(o=e.response).byteLength:(o=e.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(n,t,o,e),!this.callbacks)return;this.callbacks.onSuccess({url:e.responseURL,data:o},n,t,e)}else n.retry>=a.maxRetry||s>=400&&s<499?(r.logger.error(s+" while loading "+t.url),this.callbacks.onError({code:s,text:e.statusText},t,e)):(r.logger.warn(s+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},e.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}()}}).default},t.exports=r())},vtNb:function(t,e,n){"use strict";const r=function(t){return String.fromCharCode(t)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},a=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(t,e,n){if("string"==typeof e)return o(t&&t[0]&&void 0!==t[0].val?t[0].val:t,e);{const a=void 0===(r=t)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===a){let r="";if(Array.isArray(e)){r+=i.arrStart;const a=e[0],l=t.length;if("string"==typeof a)for(let e=0;e<l;e++){const n=o(t[e].val,a);r=u(r,n)}else for(let e=0;e<l;e++){const i=s(t[e],a,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const a=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in a){const o=a[i];let l;l=s(!n.ignoreAttributes&&t.attrsMap&&t.attrsMap[o]?t.attrsMap[o]:o===n.textNodeName?t.val:t.child[o],e[o],n),r=u(r,l)}}return r}return a}var r},o=function(t){switch(t){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}},u=function(t,e){return l(e[0])||l(t[t.length-1])||(t+=i.boundryChar),t+e},l=function(t){return-1!==a.indexOf(t)},c=n("E1E9"),d=n("4abu").buildOptions;e.convert2nimn=function(t,e,n){return n=d(n,c.defaultOptions,c.props),s(t,e,n)}},"wnj/":function(t,e,n){const r=n("ScnH"),{Rendition:i,Variant:a,SessionData:s,Key:o,MediaInitializationSection:u,DateRange:l,SpliceInfo:c,MasterPlaylist:d,MediaPlaylist:f,Segment:h}=n("DbhI");function p(t){return r.trim(t,'"')}function g(t){const e=r.splitAt(t,",");return{duration:r.toNumber(e[0]),title:decodeURIComponent(escape(e[1])),raw:e[0]}}function m(t){const e=r.splitAt(t,"@");return{length:r.toNumber(e[0]),offset:e[1]?r.toNumber(e[1]):-1}}function y(t,e){e.IV&&t.compatibleVersion<2&&(t.compatibleVersion=2),(e.KEYFORMAT||e.KEYFORMATVERSIONS)&&t.compatibleVersion<5&&(t.compatibleVersion=5)}function v(t){const e=r.splitByCommaWithPreservingQuotes(t),n={};return e.forEach(t=>{const[e,i]=r.splitAt(t,"="),a=p(i);switch(e){case"URI":n[e]=a;break;case"START-DATE":case"END-DATE":n[e]=new Date(a);break;case"IV":n[e]=function(t){const e=r.hexToByteSequence(t);return 16!==e.length&&r.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),e}(a);break;case"BYTERANGE":n[e]=m(a);break;case"RESOLUTION":n[e]=function(t){const e=r.splitAt(t,"x");return{width:r.toNumber(e[0]),height:r.toNumber(e[1])}}(a);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":n[e]="YES"===a;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":n[e]=r.toNumber(a);break;default:n[e]=e.startsWith("SCTE35-")?r.hexToByteSequence(a):e.startsWith("X-")?(s=i).startsWith('"')?p(s):s.startsWith("0x")||s.startsWith("0X")?r.hexToByteSequence(s):r.toNumber(s):a}var s}),n}function _(t){r.INVALIDPLAYLIST("The file contains both media and master playlist tags.",t)}function b(t,e,n){const a=function({attributes:t}){return new i({type:t.TYPE,uri:t.URI,groupId:t["GROUP-ID"],language:t.LANGUAGE,assocLanguage:t["ASSOC-LANGUAGE"],name:t.NAME,isDefault:t.DEFAULT,autoselect:t.AUTOSELECT,forced:t.FORCED,instreamId:t["INSTREAM-ID"],characteristics:t.CHARACTERISTICS,channels:t.CHANNELS})}(e),s=t[r.camelify(n)],o=function(t,e){let n=!1;for(const r of t){if(r.name===e.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";r.isDefault&&(n=!0)}return n&&e.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(s,a);o&&r.INVALIDPLAYLIST(o),s.push(a),a.isDefault&&(t.currentRenditions[r.camelify(n)]=s.length-1)}function E(t,e,n,i,s,o){const u=new a({uri:n,bandwidth:e.BANDWIDTH,averageBandwidth:e["AVERAGE-BANDWIDTH"],codecs:e.CODECS,resolution:e.RESOLUTION,frameRate:e["FRAME-RATE"],hdcpLevel:e["HDCP-LEVEL"]});for(const a of t)if("EXT-X-MEDIA"===a.name){const t=a.attributes,n=t.TYPE;if(n&&t["GROUP-ID"]||r.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED.",o),e[n]===t["GROUP-ID"]&&(b(u,a,n),"CLOSED-CAPTIONS"===n))for(const{instreamId:e}of u.closedCaptions)if(e&&e.startsWith("SERVICE")&&s.compatibleVersion<7){s.compatibleVersion=7;break}}return function(t,e,n){["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{"CLOSED-CAPTIONS"===i&&"NONE"===t[i]?(n.isClosedCaptionsNone=!0,e.closedCaptions=[]):t[i]&&!e[r.camelify(i)].find(e=>e.groupId===t[i])&&r.INVALIDPLAYLIST(`${i} attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ${i}.`)})}(e,u,s),u.isIFrameOnly=i,u}function T(t,e){if(t.method!==e.method)return!1;if(t.uri!==e.uri)return!1;if(t.iv){if(!e.iv)return!1;if(t.iv.length!==e.iv.length)return!1;for(let n=0;n<t.iv.length;n++)if(t.iv[n]!==e.iv[n])return!1}else if(e.iv)return!1;return t.format===e.format&&t.formatVersion===e.formatVersion}function S(t,e,n,i,a,s,d){const f=new h({uri:e,mediaSequenceNumber:a,discontinuitySequence:s});for(let h=n;h<=i;h++){const{name:e,value:n,attributes:i}=t[h];if("EXTINF"===e)n.raw.includes(".")&&d.compatibleVersion<3&&(d.compatibleVersion=3),Math.round(n.duration)>d.targetDuration&&r.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),f.duration=n.duration,f.title=n.title;else if("EXT-X-BYTERANGE"===e)d.compatibleVersion<4&&(d.compatibleVersion=4),f.byterange=n;else if("EXT-X-DISCONTINUITY"===e)f.discontinuity=!0;else if("EXT-X-KEY"===e)y(d,i),f.key=new o({method:i.METHOD,uri:i.URI,iv:i.IV,format:i.KEYFORMAT,formatVersion:i.KEYFORMATVERSIONS});else if("EXT-X-MAP"===e)d.compatibleVersion<5&&(d.compatibleVersion=5),d.hasMap=!0,f.map=new u({uri:i.URI,byterange:i.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===e)f.programDateTime=n;else if("EXT-X-DATERANGE"===e){const t={};Object.keys(i).forEach(e=>{(e.startsWith("SCTE35-")||e.startsWith("X-"))&&(t[e]=i[e])}),f.dateRange=new l({id:i.ID,classId:i.CLASS,start:i["START-DATE"],end:i["END-DATE"],duration:i.DURATION,plannedDuration:i["PLANNED-DURATION"],endOnNext:i["END-ON-NEXT"],attributes:t})}else"EXT-X-CUE-OUT"===e?f.markers.push(new c({type:"OUT",duration:n})):"EXT-X-CUE-IN"===e?f.markers.push(new c({type:"IN"})):"EXT-X-CUE-OUT-CONT"!==e&&"EXT-X-CUE"!==e&&"EXT-OATCLS-SCTE35"!==e&&"EXT-X-ASSET"!==e&&"EXT-X-SCTE35"!==e||f.markers.push(new c({type:"RAW",tagName:e,value:n}))}return f}t.exports=function(t){const e={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},n=function(t,e){let n;return e.isMasterPlaylist?n=function(t,e){const n=new d;for(const[i,{name:a,value:u,attributes:l}]of t.entries())if("EXT-X-VERSION"===a)n.version=u;else if("EXT-X-STREAM-INF"===a){const a=t[i+1];("string"!=typeof a||a.startsWith("#EXT"))&&r.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line",i);const s=E(t,l,a,!1,e,i);s&&n.variants.push(s)}else if("EXT-X-I-FRAME-STREAM-INF"===a){const r=E(t,l,l.URI,!0,e,i);r&&n.variants.push(r)}else if("EXT-X-SESSION-DATA"===a){const t=new s({id:l["DATA-ID"],value:l.VALUE,uri:l.URI,language:l.LANGUAGE});n.sessionDataList.find(e=>e.id===t.id&&e.language===t.language)&&r.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute.",i),n.sessionDataList.push(t)}else if("EXT-X-SESSION-KEY"===a){"NONE"===l.METHOD&&r.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE",i);const t=new o({method:l.METHOD,uri:l.URI,iv:l.IV,format:l.KEYFORMAT,formatVersion:l.KEYFORMATVERSIONS});n.sessionKeyList.find(e=>T(e,t))&&r.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values.",i),y(e,l),n.sessionKeyList.push(t)}else"EXT-X-INDEPENDENT-SEGMENTS"===a?(n.independentSegments&&r.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",i),n.independentSegments=!0):"EXT-X-START"===a&&(n.start&&r.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist",i),"number"!=typeof l["TIME-OFFSET"]&&r.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED",i),n.start={offset:l["TIME-OFFSET"],precise:l.PRECISE||!1});if(e.isClosedCaptionsNone)for(const i of n.variants)i.closedCaptions.length>0&&r.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE",index);return n}(t,e):(n=function(t,e){const n=new f;let i=-1,a=0,s=!1,o=0,u=null,l=null;for(const[c,d]of t.entries()){const{name:f,value:h,attributes:p,category:g}=d;if("Segment"!==g){if("EXT-X-VERSION"===f)void 0===n.version?n.version=h:r.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.",c);else if("EXT-X-TARGETDURATION"===f)n.targetDuration=e.targetDuration=h;else if("EXT-X-MEDIA-SEQUENCE"===f)n.segments.length>0&&r.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",c),n.mediaSequenceBase=a=h;else if("EXT-X-DISCONTINUITY-SEQUENCE"===f)n.segments.length>0&&r.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",c),s&&r.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag.",c),n.discontinuitySequenceBase=o=h;else if("EXT-X-ENDLIST"===f)n.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===f)n.playlistType=h;else if("EXT-X-I-FRAMES-ONLY"===f)e.compatibleVersion<4&&(e.compatibleVersion=4),n.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===f)n.independentSegments&&r.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",c),n.independentSegments=!0;else if("EXT-X-START"===f)n.start&&r.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist",c),"number"!=typeof p["TIME-OFFSET"]&&r.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED",c),n.start={offset:p["TIME-OFFSET"],precise:p.PRECISE||!1};else if("string"==typeof d){-1===i&&r.INVALIDPLAYLIST("A URI line is not preceded by any segment tags",c),n.targetDuration||r.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED",c);const s=S(t,d,i,c-1,a++,o,e);if(s){const{discontinuity:t,key:e,map:i,byterange:a,uri:d}=s;if(t&&(s.discontinuitySequence=++o),e?u=e:u&&(s.key=u),i?l=i:l&&(s.map=l),a&&-1===a.offset){const{segments:t}=n;if(t.length>0){const e=t[t.length-1];e.byterange&&e.uri===d?a.offset=e.byterange.offset+e.byterange.length:r.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource",c)}else r.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file",c)}n.segments.push(s)}i=-1}}else-1===i&&(i=c),"EXT-X-DISCONTINUITY"===f&&(s=!0)}return function(t){const e=new Map,n=new Map;let i=!1,a=!1;for(let s=t.length-1;s>=0;s--){const{programDateTime:o,dateRange:u}=t[s];if(o&&(a=!0),u){i=!0,u.endOnNext&&(u.end||u.duration)&&r.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");const t=u.start.getTime(),a=u.duration||0;u.end&&u.duration&&t+1e3*a!==u.end.getTime()&&r.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),u.endOnNext&&(u.end=e.get(u.classId)),e.set(u.classId,u.start);const s=u.end?u.end.getTime():u.start.getTime()+1e3*(u.duration||0),o=n.get(u.classId);if(o){for(const e of o)(e.start<=t&&e.end>t||e.start>=t&&e.start<s)&&r.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap");o.push({start:t,end:s})}else n.set(u.classId,[{start:t,end:s}])}}i&&!a&&r.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(n.segments),n}(t,e),!n.isIFrame&&e.hasMap&&e.compatibleVersion<6&&(e.compatibleVersion=6)),e.compatibleVersion>1&&(!n.version||n.version<e.compatibleVersion)&&r.INVALIDPLAYLIST(`EXT-X-VERSION needs to be ${e.compatibleVersion} or higher.`),n}(function(t,e){const n=[];return t.split("\n").forEach(t=>{const i=t.trim();if(i)if(i.startsWith("#")){if(i.startsWith("#EXT")){const t=function(t,e,n){const[i,a]=function(t){const e=t.indexOf(":");return-1===e?[t.slice(1).trim(),null]:[t.slice(1,e).trim(),t.slice(e+1).trim()]}(t),s=function(t){switch(t){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(i);if(function(t,e,n){if("Segment"===t||"MediaPlaylist"===t)return void 0===e.isMasterPlaylist?void(e.isMasterPlaylist=!1):void(e.isMasterPlaylist&&_(n));if("MasterPlaylist"===t){if(void 0===e.isMasterPlaylist)return void(e.isMasterPlaylist=!0);!1===e.isMasterPlaylist&&_(n)}}(s,e,n),"Unknown"===s)return null;"MediaPlaylist"===s&&(e.hash[i]&&r.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist",n),e.hash[i]=!0);const[o,u]=function(t,e,n){switch(t){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-CUE-OUT":return[r.toNumber(e),null];case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":let i=r.toInteger(e);return isNaN(i)&&r.INVALIDPLAYLIST(`The ${t} tag MUST be an integer.`,n),[i,null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":return[null,v(e)];case"EXTINF":return[g(e),null];case"EXT-X-BYTERANGE":return[m(e),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(e),null];case"EXT-X-PLAYLIST-TYPE":default:return[e,null]}}(i,a,n);return{name:i,category:s,value:o,attributes:u}}(i,e,n.length);return void(t&&n.push(t))}}else n.push(i)}),0!==n.length&&"EXTM3U"===n[0].name||r.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line.",0),n}(t,e),e);return n.source=t,n}},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const o={closed:!0,next(t){},error(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let d=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:a}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(s){e=s instanceof c?f(s.errors):[s]}if(u(a)){let t=-1,n=a.length;for(;++t<n;){const n=a[t];if(l(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof c?e=e.concat(f(s.errors)):e.push(s)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const h=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o;break;case 1:if(!t){this.destination=o;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[h](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let a;super(),this._parentSubscriber=t;let s=this;r(e)?a=e:e&&(a=e.next,n=e.error,i=e.complete,e!==o&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=a,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[h])return t[h]()}return t||e||n?new p(t,e,n):new p(o)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class E extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class T extends p{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[h](){return new T(this)}lift(t){const e=new w(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new E(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new w(t,e),t})();class w extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function A(t){return t&&"function"==typeof t.schedule}class x extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const C=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=D(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return C(t);if(O(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[I])return e=t,t=>{const n=e[I]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function M(t,e,n,r,i=new x(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):P(e)(i)}class L extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function N(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new k(t,e))}}class k{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new F(t,this.project,this.thisArg))}}class F extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function B(t,e){return new v(n=>{const r=new d;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function j(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new v(n=>{const r=new d;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(O(t))return function(t,e){return new v(n=>{const r=new d;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return B(t,e);if(function(t){return t&&"function"==typeof t[I]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[I](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(P(t))}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(U((n,r)=>j(t(n,r)).pipe(N((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new x(this,e,n),i=this.destination;i.add(r);const a=M(this,t,void 0,void 0,r);a!==r&&i.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return U(y,t)}function Y(t,e){return e?B(t,e):new v(C(t))}function z(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return A(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:H(e)(Y(t,n))}function q(){return function(t){return t.lift(new X(t))}}class X{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new K(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class K extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class W extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new d,t.add(this.source.subscribe(new Z(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t}refCount(){return q()(this)}}const Q=(()=>{const t=W.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Z extends T{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new S}function tt(){return t=>{return q()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Q);return r.source=t,r.subjectFactory=n,r})(t));var e}}function et(t){return{toString:t}.toString()}function nt(t,e,n){return et(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const rt=nt("Inject",t=>({token:t})),it=nt("Optional"),at=nt("Self"),st=nt("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ut(t){for(let e in t)if(t[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function lt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ft(t){return ht(t,t[gt])||ht(t,t[vt])}function ht(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(_t))?t[mt]:null}const gt=ut({\u0275prov:ut}),mt=ut({\u0275inj:ut}),yt=ut({\u0275provFallback:ut}),vt=ut({ngInjectableDef:ut}),_t=ut({ngInjectorDef:ut});function bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Tt=ut({__forward_ref__:ut});function St(t){return t.__forward_ref__=St,t.toString=function(){return bt(this())},t}function wt(t){return At(t)?t():t}function At(t){return"function"==typeof t&&t.hasOwnProperty(Tt)&&t.__forward_ref__===St}const xt="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,Dt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,Rt=xt||It||Ct||Dt,Ot=ut({\u0275cmp:ut}),Pt=ut({\u0275dir:ut}),Mt=ut({\u0275pipe:ut}),Lt=ut({\u0275mod:ut}),Nt=ut({\u0275loc:ut}),kt=ut({\u0275fac:ut}),Ft=ut({__NG_ELEMENT_ID__:ut});class Bt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const jt=new Bt("INJECTOR",-1),Ut={},Vt=/\n/gm,Gt=ut({provide:String,useValue:ut});let Ht,Yt=void 0;function zt(t){const e=Yt;return Yt=t,e}function qt(t){const e=Ht;return Ht=t,e}function Xt(t,e=ot.Default){if(void 0===Yt)throw new Error("inject() must be called from an injection context");return null===Yt?Wt(t,void 0,e):Yt.get(t,e&ot.Optional?null:void 0,e)}function Kt(t,e=ot.Default){return(Ht||Xt)(wt(t),e)}function Wt(t,e,n){const r=ft(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${bt(t)}]`)}function $t(t){const e=[];for(let n=0;n<t.length;n++){const r=wt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof it||"Optional"===i.ngMetadataName||i===it?n|=ot.Optional:i instanceof st||"SkipSelf"===i.ngMetadataName||i===st?n|=ot.SkipSelf:i instanceof at||"Self"===i.ngMetadataName||i===at?n|=ot.Self:t=i instanceof rt||i===rt?i.token:i}e.push(Kt(t,n))}else e.push(Kt(r))}return e}class Qt{get(t,e=Ut){if(e===Ut){const e=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Zt{}class Jt{}function te(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function ee(t,e){t.forEach(t=>Array.isArray(t)?ee(t,e):e(t))}function ne(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function re(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ie(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ae(t,e,n){let r=oe(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function se(t,e){const n=oe(t,e);if(n>=0)return t[1|n]}function oe(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),a=t[n<<1];if(e===a)return n<<1;a>e?i=n:r=n+1}return~(i<<1)}(t,e)}var ue=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),le=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ce={},de=[];let fe=0;function he(t){return et(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||de,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||le.Emulated,id:"c",styles:t.styles||de,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,a=t.pipes;return n.id+=fe++,n.inputs=ve(t.inputs,e),n.outputs=ve(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(pe):null,n.pipeDefs=a?()=>("function"==typeof a?a():a).map(ge):null,n})}function pe(t){return be(t)||function(t){return t[Pt]||null}(t)}function ge(t){return function(t){return t[Mt]||null}(t)}const me={};function ye(t){const e={type:t.type,bootstrap:t.bootstrap||de,declarations:t.declarations||de,imports:t.imports||de,exports:t.exports||de,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&et(()=>{me[t.id]=t.type}),e}function ve(t,e){if(null==t)return ce;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,e&&(e[i]=a)}return n}const _e=he;function be(t){return t[Ot]||null}function Ee(t,e){return t.hasOwnProperty(kt)?t[kt]:null}function Te(t,e){const n=t[Lt]||null;if(!n&&!0===e)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function Se(t){return Array.isArray(t)&&"object"==typeof t[1]}function we(t){return Array.isArray(t)&&!0===t[1]}function Ae(t){return 0!=(8&t.flags)}function xe(t){return 2==(2&t.flags)}function Ce(t){return 1==(1&t.flags)}function De(t){return null!==t.template}function Ie(t){return 0!=(512&t[2])}class Re{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Oe(){return Pe}function Pe(t){return t.type.prototype.ngOnChanges&&(t.setInput=Le),Me}function Me(){const t=Ne(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ce)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Le(t,e,n,r){const i=Ne(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ce,current:null}),a=i.current||(i.current={}),s=i.previous,o=this.declaredInputs[n],u=s[o];a[o]=new Re(u&&u.currentValue,e,s===ce),t[r]=e}function Ne(t){return t.__ngSimpleChanges__||null}Oe.ngInherit=!0;let ke=void 0;function Fe(){return void 0!==ke?ke:"undefined"!=typeof document?document:void 0}function Be(t){return!!t.listen}const je={createRenderer:(t,e)=>Fe()};function Ue(t){for(;Array.isArray(t);)t=t[0];return t}function Ve(t,e){return Ue(e[t+20])}function Ge(t,e){return Ue(e[t.index])}function He(t,e){return t.data[e+20]}function Ye(t,e){const n=e[t];return Se(n)?n:n[0]}function ze(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function qe(t){return 4==(4&t[2])}function Xe(t){return 128==(128&t[2])}function Ke(t,e){return null===t||null==e?null:t[e]}function We(t){t[18]=0}function $e(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Qe={lFrame:vn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ze(){return Qe.bindingsEnabled}function Je(){return Qe.lFrame.lView}function tn(){return Qe.lFrame.tView}function en(t){Qe.lFrame.contextLView=t}function nn(){return Qe.lFrame.previousOrParentTNode}function rn(t,e){Qe.lFrame.previousOrParentTNode=t,Qe.lFrame.isParent=e}function an(){return Qe.lFrame.isParent}function sn(){Qe.lFrame.isParent=!1}function on(){return Qe.checkNoChangesMode}function un(t){Qe.checkNoChangesMode=t}function ln(){return Qe.lFrame.bindingIndex++}function cn(t){const e=Qe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function dn(t,e){const n=Qe.lFrame;n.bindingIndex=n.bindingRootIndex=t,fn(e)}function fn(t){Qe.lFrame.currentDirectiveIndex=t}function hn(){return Qe.lFrame.currentQueryIndex}function pn(t){Qe.lFrame.currentQueryIndex=t}function gn(t,e){const n=yn();Qe.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function mn(t,e){const n=yn(),r=t[1];Qe.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function yn(){const t=Qe.lFrame,e=null===t?null:t.child;return null===e?vn(t):e}function vn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function _n(){const t=Qe.lFrame;return Qe.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const bn=_n;function En(){const t=_n();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Tn(){return Qe.lFrame.selectedIndex}function Sn(t){Qe.lFrame.selectedIndex=t}function wn(){const t=Qe.lFrame;return He(t.tView,t.selectedIndex)}function An(){Qe.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function xn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:a,ngAfterViewChecked:s,ngOnDestroy:o}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),a&&(t.viewHooks||(t.viewHooks=[])).push(-n,a),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=o&&(t.destroyHooks||(t.destroyHooks=[])).push(n,o)}}function Cn(t,e,n){Rn(t,e,3,n)}function Dn(t,e,n,r){(3&t[2])===n&&Rn(t,e,n,r)}function In(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Rn(t,e,n,r){const i=null!=r?r:-1;let a=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(a=e[s],null!=r&&a>=r)break}else e[s]<0&&(t[18]+=65536),(a<i||-1==i)&&(On(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function On(t,e,n,r){const i=n[r]<0,a=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,a.call(s)):a.call(s)}class Pn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Mn(t,e,n){const r=Be(t);let i=0;for(;i<n.length;){const a=n[i];if("number"==typeof a){if(0!==a)break;i++;const s=n[i++],o=n[i++],u=n[i++];r?t.setAttribute(e,o,u,s):e.setAttributeNS(s,o,u)}else{const s=a,o=n[++i];Nn(s)?r&&t.setProperty(e,s,o):r?t.setAttribute(e,s,o):e.setAttribute(s,o),i++}}return i}function Ln(t){return 3===t||4===t||6===t}function Nn(t){return 64===t.charCodeAt(0)}function kn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Fn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Fn(t,e,n,r,i){let a=0,s=t.length;if(-1===e)s=-1;else for(;a<t.length;){const n=t[a++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=a-1;break}}}for(;a<t.length;){const e=t[a];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[a+1]=i));if(r===t[a+1])return void(t[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==s&&(t.splice(s,0,e),a=s+1),t.splice(a++,0,n),null!==r&&t.splice(a++,0,r),null!==i&&t.splice(a++,0,i)}function Bn(t){return-1!==t}function jn(t){return 32767&t}function Un(t){return t>>16}function Vn(t,e){let n=Un(t),r=e;for(;n>0;)r=r[15],n--;return r}function Gn(t){return"string"==typeof t?t:null==t?"":""+t}function Hn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Gn(t)}const Yn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function zn(t){return t instanceof Function?t():t}let qn=!0;function Xn(t){const e=qn;return qn=t,e}let Kn=0;function Wn(t,e){const n=Qn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,$n(r.data,t),$n(e,null),$n(r.blueprint,null));const i=Zn(t,e),a=t.injectorIndex;if(Bn(i)){const t=jn(i),n=Vn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[a+i]=n[t+i]|r[t+i]}return e[a+8]=i,a}function $n(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Qn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Zn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Jn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ft)&&(r=n[Ft]),null==r&&(r=n[Ft]=Kn++);const i=255&r,a=1<<i,s=64&i,o=32&i,u=e.data;128&i?s?o?u[t+7]|=a:u[t+6]|=a:o?u[t+5]|=a:u[t+4]|=a:s?o?u[t+3]|=a:u[t+2]|=a:o?u[t+1]|=a:u[t]|=a}(t,e,n)}function tr(t,e,n,r=ot.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ft)?t[Ft]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){gn(e,t);try{const t=i();if(null!=t||r&ot.Optional)return t;throw new Error(`No provider for ${Hn(n)}!`)}finally{bn()}}else if("number"==typeof i){if(-1===i)return new or(t,e);let a=null,s=Qn(t,e),o=-1,u=r&ot.Host?e[16][6]:null;for((-1===s||r&ot.SkipSelf)&&(o=-1===s?Zn(t,e):e[s+8],sr(r,!1)?(a=e[1],s=jn(o),e=Vn(o,e)):s=-1);-1!==s;){o=e[s+8];const t=e[1];if(ar(i,s,t.data)){const t=nr(s,e,n,a,r,u);if(t!==er)return t}sr(r,e[1].data[s+8]===u)&&ar(i,s,e)?(a=t,s=jn(o),e=Vn(o,e)):s=-1}}}if(r&ot.Optional&&void 0===i&&(i=null),0==(r&(ot.Self|ot.Host))){const t=e[9],a=qt(void 0);try{return t?t.get(n,i,r&ot.Optional):Wt(n,i,r&ot.Optional)}finally{qt(a)}}if(r&ot.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Hn(n)}]`)}const er={};function nr(t,e,n,r,i,a){const s=e[1],o=s.data[t+8],u=rr(o,s,n,null==r?xe(o)&&qn:r!=s&&3===o.type,i&ot.Host&&a===o);return null!==u?ir(e,s,u,o):er}function rr(t,e,n,r,i){const a=t.providerIndexes,s=e.data,o=1048575&a,u=t.directiveStart,l=a>>20,c=i?o+l:t.directiveEnd;for(let d=r?o:o+l;d<c;d++){const t=s[d];if(d<u&&n===t||d>=u&&t.type===n)return d}if(i){const t=s[u];if(t&&De(t)&&t.type===n)return u}return null}function ir(t,e,n,r){let i=t[n];const a=e.data;if(i instanceof Pn){const s=i;if(s.resolving)throw new Error("Circular dep for "+Hn(a[n]));const o=Xn(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=qt(s.injectImpl)),gn(t,r);try{i=t[n]=s.factory(void 0,a,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=e.type.prototype;if(r){const r=Pe(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,a[n],e)}finally{s.injectImpl&&qt(u),Xn(o),s.resolving=!1,bn()}}return i}function ar(t,e,n){const r=64&t,i=32&t;let a;return a=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(a&1<<t)}function sr(t,e){return!(t&ot.Self||t&ot.Host&&e)}class or{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return tr(this._tNode,this._lView,t,void 0,e)}}function ur(t){const e=t;if(At(t))return()=>{const t=ur(wt(e));return t?t():null};let n=Ee(e);if(null===n){const t=pt(e);n=t&&t.factory}return n||null}function lr(t){return et(()=>{const e=t.prototype.constructor,n=e[kt]||ur(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[kt]||ur(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function cr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class hr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cr(t)?cr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}class pr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function gr(t){return t instanceof pr?t.changingThisBreaksApplicationSecurity:t}function mr(t,e){const n=function(t){return t instanceof pr&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}let yr=!0,vr=!1;function _r(){return vr=!0,yr}class br{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Er{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Tr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Sr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function wr(t){return(t=String(t)).match(Tr)||t.match(Sr)?t:(_r()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Ar(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function xr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Cr=Ar("area,br,col,hr,img,wbr"),Dr=Ar("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ir=Ar("rp,rt"),Rr=xr(Ir,Dr),Or=xr(Cr,xr(Dr,Ar("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xr(Ir,Ar("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rr),Pr=Ar("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mr=Ar("srcset"),Lr=xr(Pr,Mr,Ar("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ar("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Nr=Ar("script,style,template");class kr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Or.hasOwnProperty(e))return this.sanitizedSomething=!0,!Nr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,a=e.toLowerCase();if(!Lr.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let s=t.value;Pr[a]&&(s=wr(s)),Mr[a]&&(r=s,s=(r=String(r)).split(",").map(t=>wr(t.trim())).join(", ")),this.buf.push(" ",e,'="',jr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Or.hasOwnProperty(e)&&!Cr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(jr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Br=/([^\#-~ |!])/g;function jr(t){return t.replace(/&/g,"&amp;").replace(Fr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Br,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ur;function Vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Hr(t){const e=zr();return e?e.sanitize(Gr.HTML,t)||"":mr(t,"HTML")?gr(t):function(t,e){let n=null;try{Ur=Ur||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new br:new Er(t)}(t);let r=e?String(e):"";n=Ur.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=Ur.getInertBodyElement(r)}while(r!==a);const s=new kr,o=s.sanitizeChildren(Vr(n)||n);return _r()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),o}finally{if(n){const t=Vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(Fe(),Gn(t))}function Yr(t){const e=zr();return e?e.sanitize(Gr.URL,t)||"":mr(t,"URL")?gr(t):wr(Gn(t))}function zr(){const t=Je();return t&&t[12]}function qr(t,e){t.__ngContext__=e}function Xr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function Kr(){throw new Error("Cannot mix multi providers and regular providers")}function Wr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function $r(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Wr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 0===t.type&&"ng-template"!==t.tagName}function Zr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Jr(t,e,n){let r=4;const i=t.attrs||[],a=function(t){for(let e=0;e<t.length;e++)if(Ln(t[e]))return e;return t.length}(i);let s=!1;for(let o=0;o<e.length;o++){const u=e[o];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Zr(t,u,n)||""===u&&1===e.length){if(ti(r))return!1;s=!0}}else{const l=8&r?u:e[++o];if(8&r&&null!==t.attrs){if(!$r(t.attrs,l,n)){if(ti(r))return!1;s=!0}continue}const c=ei(8&r?"class":u,i,Qr(t),n);if(-1===c){if(ti(r))return!1;s=!0;continue}if(""!==l){let t;t=c>a?"":i[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Wr(e,l,0)||2&r&&l!==t){if(ti(r))return!1;s=!0}}}}else{if(!s&&!ti(r)&&!ti(u))return!1;if(s&&ti(u))continue;s=!1,r=u|1&r}}return ti(r)||s}function ti(t){return 0==(1&t)}function ei(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ni(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jr(t,e[r],n))return!0;return!1}function ri(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ii(t,e){return t?":not("+e.trim()+")":e}function ai(t){let e=t[0],n=1,r=2,i="",a=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ti(s)||(e+=ii(a,i),i=""),r=s,a=a||!ti(r);n++}return""!==i&&(e+=ii(a,i)),e}const si={};function oi(t){const e=t[3];return we(e)?e[3]:e}function ui(t){return ci(t[13])}function li(t){return ci(t[4])}function ci(t){for(;null!==t&&!we(t);)t=t[4];return t}function di(t){fi(tn(),Je(),Tn()+t,on())}function fi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Cn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Dn(e,r,0,n)}Sn(n)}function hi(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function gi(t){return 2|t}function mi(t){return(131068&t)>>2}function yi(t,e){return-131069&t|e<<2}function vi(t){return 1|t}function _i(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],a=n[r+1];if(-1!==a){const n=t.data[a];pn(i),n.contentQueries(2,e[a],a)}}}function bi(t,e,n){return Be(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ei(t,e,n,r,i,a,s,o,u,l){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,We(c),c[3]=c[15]=t,c[8]=n,c[10]=s||t&&t[10],c[11]=o||t&&t[11],c[12]=u||t&&t[12]||null,c[9]=l||t&&t[9]||null,c[6]=a,c[16]=2==e.type?t[16]:c,c}function Ti(t,e,n,r,i,a){const s=n+20,o=t.data[s]||function(t,e,n,r,i,a){const s=nn(),o=an(),u=o?s:s&&s.parent,l=t.data[n]=Mi(0,u&&u!==e?u:null,r,n,i,a);return null===t.firstChild&&(t.firstChild=l),s&&(!o||null!=s.child||null===l.parent&&2!==s.type?o||(s.next=l):s.child=l),l}(t,e,s,r,i,a);return rn(o,!0),o}function Si(t,e,n){mn(e,e[6]);try{const r=t.viewQuery;null!==r&&na(1,r,n);const i=t.template;null!==i&&xi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_i(t,e),t.staticViewQueries&&na(2,t.viewQuery,n);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Qi(t,e[n])}(e,a)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,En()}}function wi(t,e,n,r){const i=e[2];if(256==(256&i))return;mn(e,e[6]);const a=on();try{We(e),Qe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&xi(t,e,n,2,r);const s=3==(3&i);if(!a)if(s){const n=t.preOrderCheckHooks;null!==n&&Cn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Dn(e,n,0,null),In(e,0)}if(function(t){for(let e=ui(t);null!==e;e=li(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&$e(r,1),n[2]|=1024}}}(e),function(t){for(let e=ui(t);null!==e;e=li(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Xe(n)&&wi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&_i(t,e),!a)if(s){const n=t.contentCheckHooks;null!==n&&Cn(e,n)}else{const n=t.contentHooks;null!==n&&Dn(e,n,1),In(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,a=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(a=0-s,Sn(a),r+=9+n[++t],i=r):r+=s:(null!==s&&(dn(r,i),s(2,e[i])),i++)}}}finally{Sn(-1)}}(t,e);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)$i(t,e[n])}(e,o);const u=t.viewQuery;if(null!==u&&na(2,u,r),!a)if(s){const n=t.viewCheckHooks;null!==n&&Cn(e,n)}else{const n=t.viewHooks;null!==n&&Dn(e,n,2),In(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,$e(e[3],-1))}finally{En()}}function Ai(t,e,n,r){const i=e[10],a=!on(),s=qe(e);try{a&&!s&&i.begin&&i.begin(),s&&Si(t,e,r),wi(t,e,n,r)}finally{a&&!s&&i.end&&i.end()}}function xi(t,e,n,r,i){const a=Tn();try{Sn(-1),2&r&&e.length>20&&fi(t,e,0,on()),n(r,i)}finally{Sn(a)}}function Ci(t,e,n){if(Ae(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Di(t,e,n){Ze()&&(function(t,e,n,r){const i=n.directiveStart,a=n.directiveEnd;t.firstCreatePass||Wn(n,e),qr(r,e);const s=n.initialInputs;for(let o=i;o<a;o++){const r=t.data[o],a=De(r);a&&zi(e,n,r);const u=ir(e,t,o,n);qr(u,e),null!==s&&Xi(0,o-i,u,r,0,s),a&&(Ye(n.index,e)[8]=u)}}(t,e,n,Ge(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=t.expandoInstructions,s=t.firstCreatePass,o=n.index-20,u=Qe.lFrame.currentDirectiveIndex;try{Sn(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];fn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?ji(r,i):s&&a.push(null)}}finally{Sn(-1),fn(u)}}(t,e,n))}function Ii(t,e,n=Ge){const r=e.localNames;if(null!==r){let i=e.index+1;for(let a=0;a<r.length;a+=2){const s=r[a+1],o=-1===s?n(e,t):t[s];t[i++]=o}}}function Ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Oi(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Oi(t,e,n,r,i,a,s,o,u,l){const c=20+r,d=c+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:si);return n}(c,d);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:o,node:null,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:l,incompleteFirstPass:!1}}function Pi(t,e,n,r){const i=ia(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Mi(t,e,n,r,i,a){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Li(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ni(t,e,n,r,i,a,s,o){const u=Ge(e,n);let l,c=e.inputs;var d;!o&&null!=c&&(l=c[r])?(sa(t,n,l,r,i),xe(e)&&function(t,e){const n=Ye(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=s?s(i,e.tagName||"",r):i,Be(a)?a.setProperty(u,r,i):Nn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ki(t,e,n,r){let i=!1;if(Ze()){const a=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let a=0;a<r.length;a++){const s=r[a];ni(n,s.selectors,!1)&&(i||(i=[]),Jn(Wn(n,e),t,s.type),De(s)?(2&n.flags&&Xr(n),Vi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==a){let r=0;i=!0,Hi(n,t.data.length,a.length);for(let t=0;t<a.length;t++){const e=a[t];e.providersResolver&&e.providersResolver(e)}Ui(t,n,a.length);let o=!1,u=!1;for(let i=0;i<a.length;i++){const l=a[i];n.mergedAttrs=kn(n.mergedAttrs,l.hostAttrs),Yi(t,e,l),Gi(t.data.length-1,l,s),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128);const c=l.type.prototype;!o&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),o=!0),u||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),Fi(t,l),r+=l.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,a=[];let s=null,o=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,l=null===i||Qr(e)?null:Ki(n,i);a.push(l),s=Li(n,u,s),o=Li(t.outputs,u,o)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=s,e.outputs=o}(t,n),Bi(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=kn(n.mergedAttrs,n.attrs),i}function Fi(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Bi(t,e,n){for(let r=0;r<n;r++)e.push(si),t.blueprint.push(si),t.data.push(null)}function ji(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ui(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Vi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Gi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;De(e)&&(n[""]=t)}}function Hi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ee(n.type)),i=new Pn(r,De(n),null);t.blueprint.push(i),e.push(i)}function zi(t,e,n){const r=Ge(e,t),i=Ri(n),a=t[10],s=Zi(t,Ei(t,i,null,n.onPush?64:16,r,e,a,a.createRenderer(r,n)));t[e.index]=s}function qi(t,e,n,r,i,a){const s=Ge(t,e),o=e[11];if(null==r)Be(o)?o.removeAttribute(s,n,a):s.removeAttribute(n);else{const e=null==i?Gn(r):i(r,t.tagName||"",n);Be(o)?o.setAttribute(s,n,e,a):a?s.setAttributeNS(a,n,e):s.setAttribute(n,e)}}function Xi(t,e,n,r,i,a){const s=a[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],a=s[e++],o=s[e++];null!==t?r.setInput(n,o,i,a):n[a]=o}}}function Ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function $i(t,e){const n=Ye(e,t);if(Xe(n)){const t=n[1];80&n[2]?wi(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=ui(e);null!==r;r=li(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];wi(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ye(n[r],e);Xe(i)&&i[5]>0&&t(i)}}(n)}}function Qi(t,e){const n=Ye(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Si(r,n,n[8])}function Zi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ji(t){for(;t;){t[2]|=64;const e=oi(t);if(Ie(t)&&!e)return t;t=e}return null}function ta(t,e,n){const r=e[10];r.begin&&r.begin();try{wi(t,e,t.template,n)}catch(i){throw aa(e,i),i}finally{r.end&&r.end()}}function ea(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ze(n),i=r[1];Ai(i,r,i.template,n)}}(t[8])}function na(t,e,n){pn(0),e(t,n)}const ra=(()=>Promise.resolve(null))();function ia(t){return t[7]||(t[7]=[])}function aa(t,e){const n=t[9],r=n?n.get(hr,null):null;r&&r.handleError(e)}function sa(t,e,n,r,i){for(let a=0;a<n.length;){const s=n[a++],o=n[a++],u=e[s],l=t.data[s];null!==l.setInput?l.setInput(u,i,r,o):u[o]=i}}function oa(t,e){const n=e[3];return-1===t.index?we(n)?n:null:n}function ua(t,e){const n=oa(t,e);return n?ba(e[11],n[7]):null}function la(t,e,n,r,i){if(null!=r){let a,s=!1;we(r)?a=r:Se(r)&&(s=!0,r=r[0]);const o=Ue(r);0===t&&null!==n?null==i?va(e,n,o):ya(e,n,o,i||null):1===t&&null!==n?ya(e,n,o,i||null):2===t?function(t,e,n){const r=ba(t,e);r&&function(t,e,n,r){Be(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,o,s):3===t&&e.destroyNode(o),null!=a&&function(t,e,n,r,i){const a=n[7];a!==Ue(n)&&la(e,t,r,a,i);for(let s=10;s<n.length;s++){const i=n[s];Aa(i[1],i,t,e,r,a)}}(e,t,a,n,i)}}function ca(t,e,n,r){const i=ua(t.node,e);i&&Aa(t,e,e[11],n?1:2,i,r)}function da(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&$e(e[3],-1),n.splice(r,1)}function fa(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&da(i,r),e>0&&(t[n-1][4]=r[4]);const a=re(t,10+e);ca(r[1],r,!1,null);const s=a[19];null!==s&&s.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ha(t,e){if(!(256&e[2])){const n=e[11];Be(n)&&n.destroyNode&&Aa(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ga(t[1],t);for(;e;){let n=null;if(Se(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Se(e)&&ga(e[1],e),e=pa(e,t);null===e&&(e=t),Se(e)&&ga(e[1],e),n=e&&e[4]}e=n}}(e)}}function pa(t,e){let n;return Se(t)&&(n=t[6])&&2===n.type?oa(n,t):t[3]===e?null:t[3]}function ga(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Pn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],a="function"==typeof i?i(e):Ue(e[i]),s=t[n[r+2]],o=n[r+3];"boolean"==typeof o?a.removeEventListener(n[r],s,o):o>=0?t[o]():t[-o].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Be(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&we(e[3])){r!==e[3]&&da(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function ma(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?ua(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ge(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==le.ShadowDom&&n!==le.Native)return null}return Ge(r,n)}function ya(t,e,n,r){Be(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function va(t,e,n){Be(t)?t.appendChild(e,n):e.appendChild(n)}function _a(t,e,n,r){null!==r?ya(t,e,n,r):va(t,e,n)}function ba(t,e){return Be(t)?t.parentNode(e):e.parentNode}function Ea(t,e){if(2===t.type){const n=oa(t,e);return null===n?null:Sa(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Ge(t,e):null}function Ta(t,e,n,r){const i=ma(t,r,e);if(null!=i){const t=e[11],a=Ea(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)_a(t,i,n[e],a);else _a(t,i,n,a)}}function Sa(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Ge(n,e);if(0===r)return Sa(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return we(t)?Sa(-1,t):Ue(t)}}{const r=e[16],i=r[6],a=oi(r),s=i.projection[n.projection];return null!=s?t(a,s):t(e,n.next)}}return null}(t,r)}return e[7]}function wa(t,e,n,r,i,a,s){for(;null!=n;){const o=r[n.index],u=n.type;s&&0===e&&(o&&qr(Ue(o),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(wa(t,e,n.child,r,i,a,!1),la(e,t,i,o,a)):1===u?xa(t,e,r,n,i,a):la(e,t,i,o,a)),n=s?n.projectionNext:n.next}}function Aa(t,e,n,r,i,a){wa(n,r,t.node.child,e,i,a,!1)}function xa(t,e,n,r,i,a){const s=n[16],o=s[6].projection[r.projection];if(Array.isArray(o))for(let u=0;u<o.length;u++)la(e,t,i,o[u],a);else wa(t,e,o,s[3],i,a,!0)}function Ca(t,e,n){Be(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Da(t,e,n){Be(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ia{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,a=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Ue(s)),we(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const o=r.type;if(4===o||5===o)t(e,n,r.child,i);else if(1===o){const e=n[16],a=e[6].projection[r.projection];if(Array.isArray(a))i.push(...a);else{const n=oi(e);t(n[1],n,a,i,!0)}}r=a?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}ha(this._lView[1],this._lView)}onDestroy(t){Pi(this._lView[1],this._lView,null,t)}markForCheck(){Ji(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ta(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){un(!0);try{ta(t,e,n)}finally{un(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Aa(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ra extends Ia{constructor(t){super(t),this._view=t}detectChanges(){ea(this._view)}checkNoChanges(){!function(t){un(!0);try{ea(t)}finally{un(!1)}}(this._view)}get context(){return null}}let Oa,Pa,Ma;function La(t,e,n){return Oa||(Oa=class extends t{}),new Oa(Ge(e,n))}function Na(t,e,n,r){return Pa||(Pa=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ei(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Si(e,n,t),new Ia(n)}}),0===n.type?new Pa(r,n,La(e,n,r)):null}function ka(t,e,n,r){let i;Ma||(Ma=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return La(e,this._hostTNode,this._hostView)}get injector(){return new or(this._hostTNode,this._hostView)}get parentInjector(){const t=Zn(this._hostTNode,this._hostView),e=Vn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=Un(t),i=e,a=e[6];for(;r>1;)i=i[15],a=i[6],r--;return a}(t,this._hostView,this._hostTNode);return Bn(t)&&null!=n?new or(n,e):new or(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const a=n||this.parentInjector;if(!i&&null==t.ngModule&&a){const t=a.get(Zt,null);t&&(i=t)}const s=t.create(a,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),we(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,a=n.length;r>0&&(n[i-1][4]=e),r<a-10?(e[4]=n[i],ne(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const o=e[19];null!==o&&o.insertView(t),e[2]|=128}(r,n,this._lContainer,i),ca(r,n,!0,Sa(i,this._lContainer)),t.attachToViewContainerRef(this),ne(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=fa(this._lContainer,e);n&&(re(this._lContainer[8],e),ha(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=fa(this._lContainer,e);return n&&null!=re(this._lContainer[8],e)?new Ia(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const a=r[n.index];if(we(a))i=a;else{let t;if(4===n.type)t=Ue(a);else if(t=r[11].createComment(""),Ie(r)){const e=r[11],i=Ge(n,r);ya(e,ba(e,i),t,function(t,e){return Be(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Ta(r[1],r,t,n);r[n.index]=i=Wi(a,r,t,n),Zi(r,i)}return new Ma(i,n,r)}let Fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ba(),t})();const Ba=function(t=!1){return function(t,e,n){if(!n&&xe(t)){const n=Ye(t.index,e);return new Ia(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Ia(e[16],e):null}(nn(),Je(),t)},ja=Function,Ua=new Bt("Set Injector scope."),Va={},Ga={},Ha=[];let Ya=void 0;function za(){return void 0===Ya&&(Ya=new Qt),Ya}function qa(t,e=null,n=null,r){return new Xa(t,n,e||za(),r)}class Xa{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ee(e,n=>this.processProvider(n,t,e)),ee([t],t=>this.processInjectorType(t,[],i)),this.records.set(jt,$a(void 0,this));const a=this.records.get(Ua);this.scope=null!=a?a.value:null,this.source=r||("object"==typeof t?null:bt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ut,n=ot.Default){this.assertNotDestroyed();const r=zt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Bt)&&ft(t);e=n&&this.injectableDefInScope(n)?$a(Ka(t),Va):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?za():this.parent).get(t,e=n&ot.Optional&&e===Ut?null:e)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(bt(t)),r)throw a;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):bt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Vt,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(a,t,"R3InjectorError",this.source)}throw a}finally{zt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(bt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=wt(t)))return!1;let r=pt(t);const i=null==r&&t.ngModule||void 0,a=void 0===i?t:i,s=-1!==n.indexOf(a);if(void 0!==i&&(r=pt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(a);try{ee(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ee(r,t=>this.processProvider(t,n,r||Ha))}}this.injectorDefTypes.add(a),this.records.set(a,$a(r.factory,Va));const o=r.providers;if(null!=o&&!s){const e=t;ee(o,t=>this.processProvider(t,e,o))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Za(t=wt(t))?t:wt(t&&t.provide);const i=function(t,e,n){return Qa(t)?$a(void 0,t.useValue):$a(Wa(t,e,n),Va)}(t,e,n);if(Za(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&Kr()}else{let e=this.records.get(r);e?void 0===e.multi&&Kr():(e=$a(void 0,Va,!0),e.factory=()=>$t(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ga?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(bt(t)):e.value===Va&&(e.value=Ga,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ka(t){const e=ft(t),n=null!==e?e.factory:Ee(t);if(null!==n)return n;const r=pt(t);if(null!==r)return r.factory;if(t instanceof Bt)throw new Error(`Token ${bt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ie(e,"?");throw new Error(`Can't resolve all parameters for ${bt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[gt]||t[vt]||t[yt]&&t[yt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Wa(t,e,n){let r=void 0;if(Za(t)){const e=wt(t);return Ee(e)||Ka(e)}if(Qa(t))r=()=>wt(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...$t(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Kt(wt(t.useExisting));else{const i=wt(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${bt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Ee(i)||Ka(i);r=()=>new i(...$t(t.deps))}var i;return r}function $a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Qa(t){return null!==t&&"object"==typeof t&&Gt in t}function Za(t){return"function"==typeof t}const Ja=function(t,e,n){return function(t,e=null,n=null,r){const i=qa(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ts=(()=>{class t{static create(t,e){return Array.isArray(t)?Ja(t,e,""):Ja(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Ut,t.NULL=new Qt,t.\u0275prov=ct({token:t,providedIn:"any",factory:()=>Kt(jt)}),t.__NG_ELEMENT_ID__=-1,t})();const es=new Bt("AnalyzeForEntryComponents");function ns(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,a=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?a=t:1==a?i=Et(i,t):2==a&&(r=Et(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let rs=null;function is(){if(!rs){const t=Rt.Symbol;if(t&&t.iterator)rs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(rs=n)}}}return rs}function as(t){return!!ss(t)&&(Array.isArray(t)||!(t instanceof Map)&&is()in t)}function ss(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function os(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function us(t,e,n,r){const i=Je();return os(i,ln(),e)&&(tn(),qi(wn(),i,t,e,n,r)),us}function ls(t,e,n,r){return os(t,ln(),n)?e+Gn(n)+r:si}function cs(t,e,n,r,i,a,s,o){const u=Je(),l=tn(),c=t+20,d=l.firstCreatePass?function(t,e,n,r,i,a,s,o,u){const l=e.consts,c=Ti(e,n[6],t,0,s||null,Ke(l,o));ki(e,n,c,Ke(l,u)),xn(e,c);const d=c.tViews=Oi(2,-1,r,i,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l),f=Mi(0,null,2,-1,null,null);return f.injectorIndex=c.injectorIndex,d.node=f,null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(t,l,u,e,n,r,i,a,s):l.data[c];rn(d,!1);const f=u[11].createComment("");Ta(l,u,f,d),qr(f,u),Zi(u,u[c]=Wi(f,u,f,d)),Ce(d)&&Di(l,u,d),null!=s&&Ii(u,d,o)}function ds(t){return function(t,e){return t[e+20]}(Qe.lFrame.contextLView,t)}function fs(t,e=ot.Default){const n=Je();return null==n?Kt(t,e):tr(nn(),n,wt(t),e)}function hs(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ln(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(nn(),t)}function ps(t,e,n){const r=Je();return os(r,ln(),e)&&Ni(tn(),wn(),r,t,e,r[11],n,!1),ps}function gs(t,e,n,r,i){const a=i?"class":"style";sa(t,n,e.inputs[a],a,r)}function ms(t,e,n,r){const i=Je(),a=tn(),s=20+t,o=i[11],u=i[s]=bi(e,o,Qe.lFrame.currentNamespace),l=a.firstCreatePass?function(t,e,n,r,i,a,s){const o=e.consts,u=Ke(o,a),l=Ti(e,n[6],t,3,i,u);return ki(e,n,l,Ke(o,s)),null!==l.attrs&&ns(l,l.attrs,!1),null!==l.mergedAttrs&&ns(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(t,a,i,0,e,n,r):a.data[s];rn(l,!0);const c=l.mergedAttrs;null!==c&&Mn(o,u,c);const d=l.classes;null!==d&&Da(o,u,d);const f=l.styles;null!==f&&Ca(o,u,f),Ta(a,i,u,l),0===Qe.lFrame.elementDepthCount&&qr(u,i),Qe.lFrame.elementDepthCount++,Ce(l)&&(Di(a,i,l),Ci(a,l,i)),null!==r&&Ii(i,l)}function ys(){let t=nn();an()?sn():(t=t.parent,rn(t,!1));const e=t;Qe.lFrame.elementDepthCount--;const n=tn();n.firstCreatePass&&(xn(n,t),Ae(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&gs(n,e,Je(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&gs(n,e,Je(),e.stylesWithoutHost,!1)}function vs(t,e,n,r){ms(t,e,n,r),ys()}function _s(t,e,n){const r=Je(),i=tn(),a=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const a=e.consts,s=Ke(a,r),o=Ti(e,n[6],t,4,"ng-container",s);return null!==s&&ns(o,s,!0),ki(e,n,o,Ke(a,i)),null!==e.queries&&e.queries.elementStart(e,o),o}(t,i,r,e,n):i.data[a];rn(s,!0);const o=r[a]=r[11].createComment("");Ta(i,r,o,s),qr(o,r),Ce(s)&&(Di(i,r,s),Ci(i,s,r)),null!=n&&Ii(r,s)}function bs(){let t=nn();const e=tn();an()?sn():(t=t.parent,rn(t,!1)),e.firstCreatePass&&(xn(e,t),Ae(t)&&e.queries.elementEnd(t))}function Es(){return Je()}function Ts(t){return!!t&&"function"==typeof t.then}function Ss(t){return!!t&&"function"==typeof t.subscribe}function ws(t,e,n=!1,r){const i=Je(),a=tn(),s=nn();return function(t,e,n,r,i,a,s=!1,o){const u=Ce(r),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),c=ia(e);let d=!0;if(3===r.type){const f=Ge(r,e),h=o?o(f):ce,p=h.target||f,g=c.length,m=o?t=>o(Ue(t[r.index])).target:r.index;if(Be(n)){let s=null;if(!o&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const t=i[a];if(t===n&&i[a+1]===r){const t=e[7],n=i[a+2];return t.length>n?t[n]:null}"string"==typeof t&&(a+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=a,s.__ngLastListenerFn__=a,d=!1;else{a=xs(r,e,a,!1);const t=n.listen(h.name||p,i,a);c.push(a,t),l&&l.push(i,m,g,g+1)}}else a=xs(r,e,a,!0),p.addEventListener(i,a,s),c.push(a),l&&l.push(i,m,g,s)}const f=r.outputs;let h;if(d&&null!==f&&(h=f[i])){const t=h.length;if(t)for(let n=0;n<t;n+=2){const t=e[h[n]][h[n+1]].subscribe(a),s=c.length;c.push(a,t),l&&l.push(i,r.index,s,-(s+1))}}}(a,i,i[11],s,t,e,n,r),ws}function As(t,e,n){try{return!1!==e(n)}catch(r){return aa(t,r),!1}}function xs(t,e,n,r){return function i(a){if(a===Function)return n;const s=2&t.flags?Ye(t.index,e):e;0==(32&e[2])&&Ji(s);let o=As(e,n,a),u=i.__ngNextListenerFn__;for(;u;)o=As(e,u,a)&&o,u=u.__ngNextListenerFn__;return r&&!1===o&&(a.preventDefault(),a.returnValue=!1),o}}function Cs(t=1){return function(t){return(Qe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Qe.lFrame.contextLView))[8]}(t)}function Ds(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const a=e[i];if("*"!==a){if(null===r?ni(t,a,!0):ri(r,a))return i}else n=i}return n}function Is(t){const e=Je()[16][6];if(!e.projection){const n=e.projection=ie(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ds(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Rs(t,e=0,n){const r=Je(),i=tn(),a=Ti(i,r[6],t,1,null,n||null);null===a.projection&&(a.projection=e),sn(),function(t,e,n){xa(e[11],0,e,n,ma(t,n,e),Ea(n.parent||e[6],e))}(i,r,a)}function Os(t,e,n){return Ps(t,"",e,"",n),Os}function Ps(t,e,n,r,i){const a=Je(),s=ls(a,e,n,r);return s!==si&&Ni(tn(),wn(),a,t,s,a[11],i,!1),Ps}const Ms=[];function Ls(t,e,n,r,i){const a=t[n+1],s=null===e;let o=r?pi(a):mi(a),u=!1;for(;0!==o&&(!1===u||s);){const n=t[o+1];Ns(t[o],e)&&(u=!0,t[o+1]=r?vi(n):gi(n)),o=r?pi(n):mi(n)}u&&(t[n+1]=r?gi(a):vi(a))}function Ns(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oe(t,e)>=0}const ks={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fs(t){return t.substring(ks.key,ks.keyEnd)}function Bs(t,e){const n=ks.textEnd;return n===e?-1:(e=ks.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ks.key=e,n),js(t,e,n))}function js(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Us(t,e){return function(t,e,n,r){const i=Je(),a=tn(),s=cn(2);a.firstUpdatePass&&Ys(a,t,s,!0),e!==si&&os(i,s,e)&&Xs(a,a.data[Tn()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=bt(gr(t))),t}(e),!0,s)}(t,e),Us}function Vs(t){!function(t,e,n,r){const i=tn(),a=cn(2);i.firstUpdatePass&&Ys(i,null,a,!0);const s=Je();if(n!==si&&os(s,a,n)){const r=i.data[Tn()+20];if($s(r,!0)&&!Hs(i,a)){let t=r.classesWithoutHost;null!==t&&(n=Et(t,n||"")),gs(i,r,s,n,!0)}else!function(t,e,n,r,i,a,s,o){i===si&&(i=Ms);let u=0,l=0,c=0<i.length?i[0]:null,d=0<a.length?a[0]:null;for(;null!==c||null!==d;){const s=u<i.length?i[u+1]:void 0,f=l<a.length?a[l+1]:void 0;let h=null,p=void 0;c===d?(u+=2,l+=2,s!==f&&(h=d,p=f)):null===d||null!==c&&c<d?(u+=2,h=c):(l+=2,h=d,p=f),null!==h&&Xs(t,e,n,r,h,p,!0,o),c=u<i.length?i[u]:null,d=l<a.length?a[l]:null}}(i,r,s,s[11],s[a+1],s[a+1]=function(t,e,n){if(null==n||""===n)return Ms;const r=[],i=gr(n);if(Array.isArray(i))for(let a=0;a<i.length;a++)t(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&t(r,a,i[a]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,a)}}(ae,Gs,t)}function Gs(t,e){for(let n=function(t){return function(t){ks.key=0,ks.keyEnd=0,ks.value=0,ks.valueEnd=0,ks.textEnd=t.length}(t),Bs(t,js(t,0,ks.textEnd))}(e);n>=0;n=Bs(e,n))ae(t,Fs(e),!0)}function Hs(t,e){return e>=t.expandoStartIndex}function Ys(t,e,n,r){const i=t.data;if(null===i[n+1]){const a=i[Tn()+20],s=Hs(t,n);$s(a,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Qe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let a=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qs(n=zs(null,t,e,n,r),e.attrs,r),a=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=zs(i,t,e,n,r),null===a){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==mi(r))return t[pi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=zs(null,t,e,n[1],r),n=qs(n,e.attrs,r),function(t,e,n,r){t[pi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else a=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let a=1+e.directiveStylingLast;a<i;a++)r=qs(r,t[a].hostAttrs,n);return qs(r,e.attrs,n)}(t,e,r)}return void 0!==a&&(r?e.residualClasses=a:e.residualStyles=a),n}(i,a,e,r),function(t,e,n,r,i,a){let s=a?e.classBindings:e.styleBindings,o=pi(s),u=mi(s);t[r]=n;let l,c=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||oe(t,l)>0)&&(c=!0)}else l=n;if(i)if(0!==u){const e=pi(t[o+1]);t[r+1]=hi(e,o),0!==e&&(t[e+1]=yi(t[e+1],r)),t[o+1]=131071&t[o+1]|r<<17}else t[r+1]=hi(o,0),0!==o&&(t[o+1]=yi(t[o+1],r)),o=r;else t[r+1]=hi(u,0),0===o?o=r:t[u+1]=yi(t[u+1],r),u=r;c&&(t[r+1]=gi(t[r+1])),Ls(t,l,r,!0),Ls(t,l,r,!1),function(t,e,n,r,i){const a=i?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof e&&oe(a,e)>=0&&(n[r+1]=vi(n[r+1]))}(e,l,t,r,a),s=hi(o,u),a?e.classBindings=s:e.styleBindings=s}(i,a,e,n,s,r)}}function zs(t,e,n,r,i){let a=null;const s=n.directiveEnd;let o=n.directiveStylingLast;for(-1===o?o=n.directiveStart:o++;o<s&&(a=e[o],r=qs(r,a.hostAttrs,i),a!==t);)o++;return null!==t&&(n.directiveStylingLast=o),r}function qs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let a=0;a<e.length;a++){const s=e[a];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ae(t,s,!!n||e[++a]))}return void 0===t?null:t}function Xs(t,e,n,r,i,a,s,o){if(3!==e.type)return;const u=t.data,l=u[o+1];Ws(1==(1&l)?Ks(u,e,n,i,mi(l),s):void 0)||(Ws(a)||function(t){return 2==(2&t)}(l)&&(a=Ks(u,null,n,i,o,s)),function(t,e,n,r,i){const a=Be(t);if(e)i?a?t.addClass(n,r):n.classList.add(r):a?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?a?t.removeStyle(n,r,e):n.style.removeProperty(r):a?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Ve(Tn(),n),i,a))}function Ks(t,e,n,r,i,a){const s=null===e;let o=void 0;for(;i>0;){const e=t[i],a=Array.isArray(e),u=a?e[1]:e,l=null===u;let c=n[i+1];c===si&&(c=l?Ms:void 0);let d=l?se(c,r):u===r?c:void 0;if(a&&!Ws(d)&&(d=se(e,r)),Ws(d)&&(o=d,s))return o;const f=t[i+1];i=s?pi(f):mi(f)}if(null!==e){let t=a?e.residualClasses:e.residualStyles;null!=t&&(o=se(t,r))}return o}function Ws(t){return void 0!==t}function $s(t,e){return 0!=(t.flags&(e?16:32))}function Qs(t,e=""){const n=Je(),r=tn(),i=t+20,a=r.firstCreatePass?Ti(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Be(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ta(r,n,s,a),rn(a,!1)}function Zs(t){return Js("",t,""),Zs}function Js(t,e,n){const r=Je(),i=ls(r,t,e,n);return i!==si&&function(t,e,n){const r=Ve(e,t),i=t[11];Be(i)?i.setValue(r,n):r.textContent=n}(r,Tn(),i),Js}function to(t,e,n){const r=Je();return os(r,ln(),e)&&Ni(tn(),wn(),r,t,e,r[11],n,!0),to}function eo(t,e){const n=ze(t)[1],r=n.data.length-1;xn(n,{directiveStart:r,directiveEnd:r+1})}function no(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(De(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ro(t.inputs),e.declaredInputs=ro(t.declaredInputs),e.outputs=ro(t.outputs);const n=i.hostBindings;n&&so(t,n);const a=i.viewQuery,s=i.contentQueries;if(a&&io(t,a),s&&ao(t,s),lt(t.inputs,i.inputs),lt(t.declaredInputs,i.declaredInputs),lt(t.outputs,i.outputs),De(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===no&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=kn(i.hostAttrs,n=kn(n,i.hostAttrs))}}(r)}function ro(t){return t===ce?{}:t===de?[]:t}function io(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ao(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function so(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function oo(t,e,n,r,i){if(t=wt(t),Array.isArray(t))for(let a=0;a<t.length;a++)oo(t[a],e,n,r,i);else{const a=tn(),s=Je();let o=Za(t)?t:wt(t.provide),u=Wa(t);const l=nn(),c=1048575&l.providerIndexes,d=l.directiveStart,f=l.providerIndexes>>20;if(Za(t)||!t.multi){const r=new Pn(u,i,fs),h=co(o,e,i?c:c+f,d);-1===h?(Jn(Wn(l,s),a,o),uo(a,t,e.length),e.push(o),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(r),s.push(r)):(n[h]=r,s[h]=r)}else{const h=co(o,e,c+f,d),p=co(o,e,c,c+f),g=h>=0&&n[h],m=p>=0&&n[p];if(i&&!m||!i&&!g){Jn(Wn(l,s),a,o);const c=function(t,e,n,r,i){const a=new Pn(t,n,fs);return a.multi=[],a.index=e,a.componentProviders=0,lo(a,i,r&&!n),a}(i?ho:fo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=c),uo(a,t,e.length,0),e.push(o),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(c),s.push(c)}else uo(a,t,h>-1?h:p,lo(n[i?p:h],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function uo(t,e,n,r){const i=Za(e);if(i||e.useClass){const a=(e.useClass||e).prototype.ngOnDestroy;if(a){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,a]):s[t+1].push(r,a)}else s.push(n,a)}}}function lo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function co(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function fo(t,e,n,r){return po(this.multi,[])}function ho(t,e,n,r){const i=this.multi;let a;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ir(n,n[1],this.providerFactory.index,r);a=e.slice(0,t),po(i,a);for(let n=t;n<e.length;n++)a.push(e[n])}else a=[],po(i,a);return a}function po(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function go(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=tn();if(r.firstCreatePass){const i=De(t);oo(n,r.data,r.blueprint,i,!0),oo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class mo{}class yo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${bt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let vo=(()=>{class t{}return t.NULL=new yo,t})(),_o=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>bo(t),t})();const bo=function(t){return La(t,nn(),Je())};class Eo{}var To=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let So=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>wo(),t})();const wo=function(){const t=Je(),e=Ye(nn().index,t);return function(t){const e=t[11];if(Be(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Se(e)?e:t)};let Ao=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>null}),t})();class xo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Co=new xo("10.0.12");class Do{constructor(){}supports(t){return as(t)}create(t){return new Ro(t)}}const Io=(t,e)=>e;class Ro{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Io}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const a=!n||e&&e.currentIndex<Lo(n,r,i)?e:n,s=Lo(a,r,i),o=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(e=e._next,null==a.previousIndex)r++;else{i||(i=[]);const t=s-r,e=o-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,a=r+n;e<=a&&a<t&&(i[n]=r+1)}i[a.previousIndex]=e-t}}s!==o&&t(a,s,o)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!as(t))throw new Error(`Error trying to diff '${bt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),a=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[is()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),a=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Oo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Mo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Oo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Po{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Mo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Po,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class No{constructor(){}supports(t){return t instanceof Map||ss(t)}create(){return new ko}}class ko{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ss(t)))throw new Error(`Error trying to diff '${bt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Fo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Fo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Bo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new Do])}),t})(),jo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new No])}),t})();const Uo=[new No],Vo=new Bo([new Do]),Go=new jo(Uo);let Ho=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Yo(t,_o),t})();const Yo=function(t,e){return Na(t,e,nn(),Je())};let zo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>qo(t,_o),t})();const qo=function(t,e){return ka(t,e,nn(),Je())},Xo={};class Ko extends vo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new Qo(e,this.ngModule)}}function Wo(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const $o=new Bt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Yn});class Qo extends mo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ai).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Wo(this.componentDef.inputs)}get outputs(){return Wo(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const a=t.get(n,Xo,i);return a!==Xo||r===Xo?a:e.get(n,r,i)}}}(t,r.injector):t,a=i.get(Eo,je),s=i.get(Ao,null),o=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(Be(t))return t.selectRootElement(e,n===le.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(o,n,this.componentDef.encapsulation):bi(u,a.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),c=this.componentDef.onPush?576:528,d={components:[],scheduler:Yn,clean:ra,playerHandler:null,flags:0},f=Oi(0,-1,null,1,0,null,null,null,null,null),h=Ei(null,f,d,c,null,null,a,o,s,i);let p,g;mn(h,null);try{const t=function(t,e,n,r,i,a){const s=n[1];n[20]=t;const o=Ti(s,null,0,3,null,null),u=o.mergedAttrs=e.hostAttrs;null!==u&&(ns(o,u,!0),null!==t&&(Mn(i,t,u),null!==o.classes&&Da(i,t,o.classes),null!==o.styles&&Ca(i,t,o.styles)));const l=r.createRenderer(t,e),c=Ei(n,Ri(e),null,e.onPush?64:16,n[20],o,r,l,void 0);return s.firstCreatePass&&(Jn(Wn(o,n),s,e.type),Vi(s,o),Hi(o,n.length,1)),Zi(n,c),n[20]=c}(l,this.componentDef,h,a,o);if(l)if(n)Mn(o,l,["ng-version",Co.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let a=t[r];if("string"==typeof a)2===i?""!==a&&e.push(a,t[++r]):8===i&&n.push(a);else{if(!ti(i))break;i=a}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Mn(o,l,t),e&&e.length>0&&Da(o,l,e.join(" "))}if(g=He(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const a=n[1],s=function(t,e,n){const r=nn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ui(t,r,1),Yi(t,e,n));const i=ir(e,t,e.length-1,r);qr(i,e);const a=Ge(r,e);return a&&qr(a,e),i}(a,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const o=nn();if(a.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Sn(o.index-20);const t=n[1];Fi(t,e),Bi(t,n,e.hostVars),ji(e,s)}return s}(t,this.componentDef,h,d,[eo]),Si(f,h,null)}finally{En()}const m=new Zo(this.componentType,p,La(_o,g,h),h,g);return f.node.child=g,m}}class Zo extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Ra(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=Mi(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new or(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Jo=void 0;var tu=["en",[["a","p"],["AM","PM"],Jo],[["AM","PM"],Jo,Jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jo,"{1} 'at' {0}",Jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let eu={};function nu(t){return t in eu||(eu[t]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[t]),eu[t]}var ru=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let iu="en-US";function au(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(iu=t.toLowerCase().replace(/_/g,"-"))}const su=/\ufffd(\d+):?\d*\ufffd/gi,ou=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi;function uu(t,e,n,r=null){const i=[null,null],a=t.split(su);let s=0;for(let o=0;o<a.length;o++){const t=a[o];if(1&o){const e=parseInt(t,10);i.push(-1-e),s|=lu(e)}else""!==t&&i.push(t)}return i.push(e<<2|(n?1:0)),n&&i.push(n,r),i[0]=s,i[1]=i.length-2,i}function lu(t){return 1<<Math.min(t,31)}const cu=new Map;class du extends Zt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ko(this);const n=Te(t),r=t[Nt]||null;r&&au(r),this._bootstrapComponents=zn(n.bootstrap),this._r3Injector=qa(t,e,[{provide:Zt,useValue:this},{provide:vo,useValue:this.componentFactoryResolver}],bt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ts.THROW_IF_NOT_FOUND,n=ot.Default){return t===ts||t===Zt||t===jt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fu extends Jt{constructor(t){super(),this.moduleType=t,null!==Te(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${bt(e)} vs ${bt(e.name)}`)})(t,cu.get(t),e),cu.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new du(this.moduleType,t)}}function hu(t,e,n){const r=function(){const t=Qe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=Je();return i[r]===si?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}const pu=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,a=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(a=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(a=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,a);return t instanceof d&&t.add(s),s}};function gu(){return this._results[is()]()}class mu{constructor(){this.dirty=!0,this._results=[],this.changes=new pu,this.length=0;const t=is(),e=mu.prototype;e[t]||(e[t]=gu)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class yu{constructor(t){this.queryList=t,this.matches=null}clone(){return new yu(this.queryList)}setDirty(){this.queryList.setDirty()}}class vu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new vu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Mu(t,e).matches&&this.queries[e].setDirty()}}class _u{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class bu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new bu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Eu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Eu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Tu(e,i)),this.matchTNodeWithReadOption(t,e,rr(e,t,i,!1,!1))}else n===Ho?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,rr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===_o||r===zo||r===Ho&&0===e.type)this.addMatch(e.index,-2);else{const n=rr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Tu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Su(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?La(_o,t,e):0===t.type?Na(Ho,_o,t,e):null}(e,t):-2===n?function(t,e,n){return n===_o?La(_o,e,t):n===Ho?Na(Ho,_o,e,t):n===zo?ka(zo,_o,e,t):void 0}(t,e,r):ir(t,t[1],n,e)}function wu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,a=n.matches,s=[];for(let t=0;t<a.length;t+=2){const i=a[t];s.push(i<0?null:Su(e,r[i],a[t+1],n.metadata.read))}i.matches=s}return i.matches}function Au(t){const e=Je(),n=tn(),r=hn();pn(r+1);const i=Mu(n,r);if(t.dirty&&qe(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const a=i.crossesNgTemplate?function t(e,n,r,i){const a=e.queries.getByIndex(r),s=a.matches;if(null!==s){const o=wu(e,n,a,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(o[e/2]);else{const a=s[e+1],o=n[-r];for(let e=10;e<o.length;e++){const n=o[e];n[17]===n[3]&&t(n[1],n,a,i)}if(null!==o[9]){const e=o[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,a,i)}}}}}return i}(n,e,r,[]):wu(n,e,i,r);t.reset(a),t.notifyOnChanges()}return!0}return!1}function xu(t,e,n){Du(tn(),Je(),t,e,n,!0)}function Cu(t,e,n){Du(tn(),Je(),t,e,n,!1)}function Du(t,e,n,r,i,a){t.firstCreatePass&&(Pu(t,new _u(n,r,a,i),-1),a&&(t.staticViewQueries=!0)),Ou(t,e)}function Iu(t,e,n,r){!function(t,e,n,r,i,a,s,o){t.firstCreatePass&&(Pu(t,new _u(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,o)),Ou(t,e)}(tn(),Je(),e,n,r,0,nn(),t)}function Ru(){return t=Je(),e=hn(),t[19].queries[e].queryList;var t,e}function Ou(t,e){const n=new mu;Pi(t,e,n,n.destroy),null===e[19]&&(e[19]=new vu),e[19].queries.push(new yu(n))}function Pu(t,e,n){null===t.queries&&(t.queries=new bu),t.queries.track(new Eu(e,n))}function Mu(t,e){return t.queries.getByIndex(e)}function Lu(t,e){return Na(Ho,_o,t,e)}const Nu=new Bt("Application Initializer");let ku=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ts(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Kt(Nu,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Fu=new Bt("AppId"),Bu={provide:Fu,useFactory:function(){return`${ju()}${ju()}${ju()}`},deps:[]};function ju(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uu=new Bt("Platform Initializer"),Vu=new Bt("Platform ID"),Gu=new Bt("appBootstrapListener");let Hu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Yu=new Bt("LocaleId"),zu=new Bt("DefaultCurrencyCode");class qu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Xu=function(t){return new fu(t)},Ku=Xu,Wu=function(t){return Promise.resolve(Xu(t))},$u=function(t){const e=Xu(t),n=zn(Te(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new Qo(n)),t},[]);return new qu(e,n)},Qu=$u,Zu=function(t){return Promise.resolve($u(t))};let Ju=(()=>{class t{constructor(){this.compileModuleSync=Ku,this.compileModuleAsync=Wu,this.compileModuleAndAllComponentsSync=Qu,this.compileModuleAndAllComponentsAsync=Zu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const tl=(()=>Promise.resolve(0))();function el(t){"undefined"==typeof Zone?tl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pu(!1),this.onMicrotaskEmpty=new pu(!1),this.onStable=new pu(!1),this.onError=new pu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sl(t),al(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sl(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,a,s,o)=>{try{return ol(t),n.invokeTask(i,a,s,o)}finally{e&&"eventTask"===a.type&&e(),ul(t)}},onInvoke:(e,n,r,i,a,s,o)=>{try{return ol(t),e.invoke(r,i,a,s,o)}finally{ul(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,sl(t),al(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,t,il,rl,rl);try{return i.runTask(a,e,n)}finally{i.cancelTask(a)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function rl(){}const il={};function al(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ol(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ul(t){t._nesting--,al(t)}class ll{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pu,this.onMicrotaskEmpty=new pu,this.onStable=new pu,this.onError=new pu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let cl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nl.assertNotInAngularZone(),el(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())el(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Kt(nl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),dl=(()=>{class t{constructor(){this._applications=new Map,pl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return pl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class fl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let hl,pl=new fl;const gl=new Bt("AllowMultipleToken");class ml{constructor(t,e){this.name=t,this.token=e}}function yl(t,e,n=[]){const r="Platform: "+e,i=new Bt(r);return(e=[])=>{let a=vl();if(!a||a.injector.get(gl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ua,useValue:"platform"});!function(t){if(hl&&!hl.destroyed&&!hl.injector.get(gl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");hl=t.get(_l);const e=t.get(Uu,null);e&&e.forEach(t=>t())}(ts.create({providers:t,name:r}))}return function(t){const e=vl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function vl(){return hl&&!hl.destroyed?hl:null}let _l=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ll:("zone.js"===t?void 0:t)||new nl({enableLongStackTrace:_r(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:nl,useValue:n}];return n.run(()=>{const e=ts.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),a=i.injector.get(hr,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Tl(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{a.handleError(t)}})),function(t,e,n){try{const r=n();return Ts(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,n,()=>{const t=i.injector.get(ku);return t.runInitializers(),t.donePromise.then(()=>(au(i.injector.get(Yu,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=bl({},e);return function(t,e,n){const r=new fu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(El);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${bt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Kt(ts))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function bl(t,e){return Array.isArray(e)?e.reduce(bl,t):Object.assign(Object.assign({},t),e)}let El=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=_r(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{nl.assertNotInAngularZone(),el(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{nl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=z(s,o.pipe(tt()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof mo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zt),i=n.create(ts.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const a=i.injector.get(cl,null);return a&&i.injector.get(dl).registerApplication(i.location.nativeElement,a),this._loadComponent(i),_r()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Tl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Gu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Tl(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Kt(nl),Kt(Hu),Kt(ts),Kt(hr),Kt(vo),Kt(ku))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Tl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Sl{}class wl{}const Al={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let xl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Al}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Cl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Cl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ju),Kt(wl,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Cl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Dl=yl(null,"core",[{provide:Vu,useValue:"unknown"},{provide:_l,deps:[ts]},{provide:dl,deps:[]},{provide:Hu,deps:[]}]),Il=[{provide:El,useClass:El,deps:[nl,Hu,ts,hr,vo,ku]},{provide:$o,deps:[nl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ku,useClass:ku,deps:[[new it,Nu]]},{provide:Ju,useClass:Ju,deps:[]},Bu,{provide:Bo,useFactory:function(){return Vo},deps:[]},{provide:jo,useFactory:function(){return Go},deps:[]},{provide:Yu,useFactory:function(t){return au(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new rt(Yu),new it,new st]]},{provide:zu,useValue:"USD"}];let Rl=(()=>{class t{constructor(t){}}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Kt(El))},providers:Il}),t})(),Ol=null;function Pl(){return Ol}const Ml=new Bt("DocumentToken");let Ll=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Nl,token:t,providedIn:"platform"}),t})();function Nl(){return Kt(Fl)}const kl=new Bt("Location Initialized");let Fl=(()=>{class t extends Ll{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Pl().getLocation(),this._history=Pl().getHistory()}getBaseHrefFromDOM(){return Pl().getBaseHref(this._doc)}onPopState(t){Pl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Pl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Bl()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Bl()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ml))},t.\u0275prov=ct({factory:jl,token:t,providedIn:"platform"}),t})();function Bl(){return!!window.history.pushState}function jl(){return new Fl(Kt(Ml))}function Ul(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Vl(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Gl(t){return t&&"?"!==t[0]?"?"+t:t}let Hl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Yl,token:t,providedIn:"root"}),t})();function Yl(t){const e=Kt(Ml).location;return new ql(Kt(Ll),e&&e.origin||"")}const zl=new Bt("appBaseHref");let ql=(()=>{class t extends Hl{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ul(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Gl(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Gl(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Gl(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ll),Kt(zl,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Xl=(()=>{class t extends Hl{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Ul(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Gl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Gl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ll),Kt(zl,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Kl=(()=>{class t{constructor(t,e){this._subject=new pu,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Vl($l(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Gl(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,$l(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gl(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gl(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Kt(Hl),Kt(Ll))},t.normalizeQueryParams=Gl,t.joinWithSlash=Ul,t.stripTrailingSlash=Vl,t.\u0275prov=ct({factory:Wl,token:t,providedIn:"root"}),t})();function Wl(){return new Kl(Kt(Hl),Kt(Ll))}function $l(t){return t.replace(/\/index.html$/,"")}var Ql=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Zl{}let Jl=(()=>{class t extends Zl{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=nu(e);if(n)return n;const r=e.split("-")[0];if(n=nu(r),n)return n;if("en"===r)return tu;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[ru.PluralCase]}(e||this.locale)(t)){case Ql.Zero:return"zero";case Ql.One:return"one";case Ql.Two:return"two";case Ql.Few:return"few";case Ql.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Yu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function tc(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class ec{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){_r()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ec(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new rc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const a=new rc(t,i);e.push(a)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fs(zo),fs(Ho),fs(Bo))},t.\u0275dir=_e({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class rc{constructor(t,e){this.record=t,this.view=e}}let ic=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new ac,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fs(zo),fs(Ho))},t.\u0275dir=_e({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class ac{constructor(){this.$implicit=null,this.ngIf=null}}function sc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}let oc=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(fs(zo))},t.\u0275dir=_e({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Oe]}),t})(),uc=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[{provide:Zl,useClass:Jl}]}),t})(),lc=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new cc(Kt(Ml),window,Kt(hr))}),t})();class cc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=dc(this.window.history)||dc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function dc(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class fc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new fc,Ol||(Ol=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=pc||(pc=document.querySelector("base"),pc)?pc.getAttribute("href"):null;return null==e?null:(n=e,hc||(hc=document.createElement("a")),hc.setAttribute("href",n),"/"===hc.pathname.charAt(0)?hc.pathname:"/"+hc.pathname);var n}resetBaseElement(){pc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return tc(document.cookie,t)}}let hc,pc=null;const gc=new Bt("TRANSITION_ID"),mc=[{provide:Nu,useFactory:function(t,e,n){return()=>{n.get(ku).donePromise.then(()=>{const n=Pl();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gc,Ml,ts],multi:!0}];class yc{static init(){var t;t=new yc,pl=t}addToWindow(t){Rt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Rt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rt.getAllAngularRootElements=()=>t.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(t=>{const e=Rt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Pl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const vc=new Bt("EventManagerPlugins");let _c=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(vc),Kt(nl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class bc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Pl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Ec=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Tc=(()=>{class t extends Ec{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Pl().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ml))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Sc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wc=/%COMP%/g;function Ac(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ac(t,i,n):(i=i.replace(wc,t),n.push(i))}return n}function xc(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Cc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Dc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case le.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Ic(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case le.Native:case le.ShadowDom:return new Rc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ac(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Kt(_c),Kt(Tc),Kt(Fu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class Dc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Sc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Sc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Sc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&To.DashCase?t.style.setProperty(e,n,r&To.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&To.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xc(n)):this.eventManager.addEventListener(t,e,xc(n))}}class Ic extends Dc{constructor(t,e,n,r){super(t),this.component=n;const i=Ac(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(wc,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(wc,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Rc extends Dc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===le.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Ac(r.id,r.styles,[]);for(let a=0;a<i.length;a++){const t=document.createElement("style");t.textContent=i[a],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Oc=(()=>{class t extends bc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ml))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Pc=["alt","control","meta","shift"],Mc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Nc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let kc=(()=>{class t extends bc{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),a=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pl().onAndCancel(e,i.domEventName,a))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let a="";if(Pc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),a+=t+".")}),a+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=a,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Lc.hasOwnProperty(e)&&(e=Lc[e]))}return Mc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Pc.forEach(r=>{r!=n&&(0,Nc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ml))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Fc=yl(Dl,"browser",[{provide:Vu,useValue:"browser"},{provide:Uu,useValue:function(){fc.makeCurrent(),yc.init()},multi:!0},{provide:Ml,useFactory:function(){return function(t){ke=t}(document),document},deps:[]}]),Bc=[[],{provide:Ua,useValue:"root"},{provide:hr,useFactory:function(){return new hr},deps:[]},{provide:vc,useClass:Oc,multi:!0,deps:[Ml,nl,Vu]},{provide:vc,useClass:kc,multi:!0,deps:[Ml]},[],{provide:Cc,useClass:Cc,deps:[_c,Tc,Fu]},{provide:Eo,useExisting:Cc},{provide:Ec,useExisting:Tc},{provide:Tc,useClass:Tc,deps:[Ml]},{provide:cl,useClass:cl,deps:[nl]},{provide:_c,useClass:_c,deps:[vc,nl]},[]];let jc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Fu,useValue:e.appId},{provide:gc,useExisting:Fu},mc]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Kt(t,12))},providers:Bc,imports:[uc,Rl]}),t})();function Uc(...t){let e=t[t.length-1];return A(e)?(t.pop(),B(t,e)):Y(t)}function Vc(t,e){return U(t,e,1)}function Gc(t,e){return function(n){return n.lift(new Hc(t,e))}}"undefined"!=typeof window&&window;class Hc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Yc(t,this.predicate,this.thisArg))}}class Yc extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class zc{}class qc{}class Xc{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Xc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Xc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Xc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Kc{encodeKey(t){return Wc(t)}encodeValue(t){return Wc(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Wc(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class $c{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Kc,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,a]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(a),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new $c({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Qc(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Zc(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Jc(t){return"undefined"!=typeof FormData&&t instanceof FormData}class td{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Xc),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new $c,this.urlWithParams=e}serializeBody(){return null===this.body?null:Qc(this.body)||Zc(this.body)||Jc(this.body)||"string"==typeof this.body?this.body:this.body instanceof $c?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jc(this.body)?null:Zc(this.body)?this.body.type||null:Qc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $c?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let o=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(o=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),o)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new td(e,n,i,{params:u,headers:o,reportProgress:s,responseType:r,withCredentials:a})}}var ed=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class nd{constructor(t,e=200,n="OK"){this.headers=t.headers||new Xc,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class rd extends nd{constructor(t={}){super(t),this.type=ed.ResponseHeader}clone(t={}){return new rd({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class id extends nd{constructor(t={}){super(t),this.type=ed.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new id({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ad extends nd{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function sd(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let od=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof td)r=t;else{let i=void 0;i=n.headers instanceof Xc?n.headers:new Xc(n.headers);let a=void 0;n.params&&(a=n.params instanceof $c?n.params:new $c({fromObject:n.params})),r=new td(t,e,void 0!==n.body?n.body:null,{headers:i,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Uc(r).pipe(Vc(t=>this.handler.handle(t)));if(t instanceof td||"events"===n.observe)return i;const a=i.pipe(Gc(t=>t instanceof id));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(N(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return a.pipe(N(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return a.pipe(N(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return a.pipe(N(t=>t.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new $c).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,sd(n,e))}post(t,e,n={}){return this.request("POST",t,sd(n,e))}put(t,e,n={}){return this.request("PUT",t,sd(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Kt(zc))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class ud{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const ld=new Bt("HTTP_INTERCEPTORS");let cd=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const dd=/^\)\]\}',?\n/;class fd{}let hd=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),pd=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new v(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const a=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",a=new Xc(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new rd({headers:a,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:o}=a(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let l=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(dd,"");try{u=""!==u?JSON.parse(u):null}catch(c){u=t,l&&(l=!1,u={error:c,text:u})}}l?(e.next(new id({body:u,headers:r,status:i,statusText:s,url:o||void 0})),e.complete()):e.error(new ad({error:u,headers:r,status:i,statusText:s,url:o||void 0}))},o=t=>{const{url:r}=a(),i=new ad({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const l=r=>{u||(e.next(a()),u=!0);let i={type:ed.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:ed.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",o),t.reportProgress&&(n.addEventListener("progress",l),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:ed.Sent}),()=>{n.removeEventListener("error",o),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",l),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Kt(fd))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const gd=new Bt("XSRF_COOKIE_NAME"),md=new Bt("XSRF_HEADER_NAME");class yd{}let vd=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ml),Kt(Vu),Kt(gd))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),_d=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(yd),Kt(md))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),bd=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(ld,[]);this.chain=t.reduceRight((t,e)=>new ud(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(qc),Kt(ts))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Ed=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:_d,useClass:cd}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:gd,useValue:e.cookieName}:[],e.headerName?{provide:md,useValue:e.headerName}:[]]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[_d,{provide:ld,useExisting:_d,multi:!0},{provide:yd,useClass:vd},{provide:gd,useValue:"XSRF-TOKEN"},{provide:md,useValue:"X-XSRF-TOKEN"}]}),t})(),Td=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[od,{provide:zc,useClass:bd},pd,{provide:qc,useExisting:pd},hd,{provide:fd,useExisting:hd}],imports:[[Ed.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();class Sd extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}const wd=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Ad={};class xd{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Cd(t,this.resultSelector))}}class Cd extends L{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ad),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(M(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const a=this.values,s=this.toRespond?a[n]===Ad?--this.toRespond:this.toRespond:0;a[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Dd=new v(t=>t.complete());function Id(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):Dd}function Rd(t){return new v(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?j(n):Id()).subscribe(e)})}function Od(){return H(1)}const Pd=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Md(t){return function(e){return 0===t?Id():e.lift(new Ld(t))}}class Ld{constructor(t){if(this.total=t,this.total<0)throw new Pd}call(t,e){return e.subscribe(new Nd(t,this.total))}}class Nd extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function kd(t=jd){return e=>e.lift(new Fd(t))}class Fd{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Bd(t,this.errorFactory))}}class Bd extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function jd(){return new wd}function Ud(t=null){return e=>e.lift(new Vd(t))}class Vd{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Gd(t,this.defaultValue))}}class Gd extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Hd(t){return function(e){const n=new Yd(t),r=e.lift(n);return n.caught=r}}class Yd{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zd(t,this.selector,this.caught))}}class zd extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new x(this,void 0,void 0);this.add(r);const i=M(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function qd(t){return e=>0===t?Id():e.lift(new Xd(t))}class Xd{constructor(t){if(this.total=t,this.total<0)throw new Pd}call(t,e){return e.subscribe(new Kd(t,this.total))}}class Kd extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Gc((e,n)=>t(e,n,r)):y,qd(1),n?Ud(e):kd(()=>new wd))}function $d(){}function Qd(t,e,n){return function(r){return r.lift(new Zd(t,e,n))}}class Zd{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Jd(t,this.nextOrObserver,this.error,this.complete))}}class Jd extends p{constructor(t,e,n,i){super(t),this._tapNext=$d,this._tapError=$d,this._tapComplete=$d,this._tapError=n||$d,this._tapComplete=i||$d,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||$d,this._tapError=e.error||$d,this._tapComplete=e.complete||$d)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class tf{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new ef(t,this.predicate,this.thisArg,this.source))}}class ef extends p{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function nf(t,e){return"function"==typeof e?n=>n.pipe(nf((n,r)=>j(t(n,r)).pipe(N((t,i)=>e(n,t,r,i))))):e=>e.lift(new rf(t))}class rf{constructor(t){this.project=t}call(t,e){return e.subscribe(new af(t,this.project))}}class af extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new x(this,e,n),a=this.destination;a.add(i),this.innerSubscription=M(this,t,void 0,void 0,i),this.innerSubscription!==i&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function sf(...t){return Od()(Uc(...t))}class of{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new uf(t,this.accumulator,this.seed,this.hasSeed))}}class uf extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class lf{constructor(t){this.callback=t}call(t,e){return e.subscribe(new cf(t,this.callback))}}class cf extends p{constructor(t,e){super(t),this.add(new d(e))}}class df{constructor(t,e){this.id=t,this.url=e}}class ff extends df{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hf extends df{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pf extends df{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gf extends df{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mf extends df{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yf extends df{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vf extends df{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _f extends df{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bf extends df{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ef{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tf{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sf{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Af{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xf{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cf{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Df{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function If(t){return new Df(t)}function Rf(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Of(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let a=0;a<r.length;a++){const e=r[a],n=t[a];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Pf(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(i=n[a],!Mf(t[i],e[i]))return!1;return!0}function Mf(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Lf(t){return Array.prototype.concat.apply([],t)}function Nf(t){return t.length>0?t[t.length-1]:null}function kf(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ff(t){return Ss(t)?t:Ts(t)?j(Promise.resolve(t)):Uc(t)}function Bf(t,e,n){return n?function(t,e){return Pf(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Gf(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Mf(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Gf(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Gf(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!Gf(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,a)}}(e,n,n.segments)}(t.root,e.root)}class jf{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=If(this.queryParams)),this._queryParamMap}toString(){return qf.serialize(this)}}class Uf{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kf(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xf(this)}}class Vf{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=If(this.parameters)),this._parameterMap}toString(){return Jf(this)}}function Gf(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Hf(t,e){let n=[];return kf(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),kf(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class Yf{}class zf{parse(t){const e=new ih(t);return new jf(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Xf(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return kf(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Hf(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Xf(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Wf(e)}=${Wf(t)}`).join("&"):`${Wf(e)}=${Wf(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+function(t){return encodeURI(t)}(t.fragment):""}`}}const qf=new zf;function Xf(t){return t.segments.map(t=>Jf(t)).join("/")}function Kf(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(t){return Kf(t).replace(/%3B/gi,";")}function $f(t){return Kf(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(t){return decodeURIComponent(t)}function Zf(t){return Qf(t.replace(/\+/g,"%20"))}function Jf(t){return`${$f(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${$f(t)}=${$f(e[t])}`).join("")}`;var e}const th=/^[^\/()?;=#]+/;function eh(t){const e=t.match(th);return e?e[0]:""}const nh=/^[^=?&#]+/,rh=/^[^?&#]+/;class ih{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Uf([],{}):new Uf([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Uf(t,e)),n}parseSegment(){const t=eh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Vf(Qf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=eh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=eh(this.remaining);t&&(n=t,this.capture(n))}t[Qf(e)]=Qf(n)}parseQueryParam(t){const e=function(t){const e=t.match(nh);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(rh);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Zf(e),i=Zf(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=eh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const a=this.parseChildren();e[i]=1===Object.keys(a).length?a.primary:new Uf([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ah{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=sh(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=sh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=oh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return oh(t,this._root).map(t=>t.value)}}function sh(t,e){if(t===e.value)return e;for(const n of e.children){const e=sh(t,n);if(e)return e}return null}function oh(t,e){if(t===e.value)return[e];for(const n of e.children){const r=oh(t,n);if(r.length)return r.unshift(e),r}return[]}class uh{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function lh(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ch extends ah{constructor(t,e){super(t),this.snapshot=e,mh(this,t)}toString(){return this.snapshot.toString()}}function dh(t,e){const n=function(t,e){const n=new ph([],{},{},"",{},"primary",e,null,t.root,-1,{});return new gh("",new uh(n,[]))}(t,e),r=new Sd([new Vf("",{})]),i=new Sd({}),a=new Sd({}),s=new Sd({}),o=new Sd(""),u=new fh(r,i,s,o,a,"primary",e,n.root);return u.snapshot=n.root,new ch(new uh(u,[]),n)}class fh{constructor(t,e,n,r,i,a,s,o){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=s,this._futureSnapshot=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(N(t=>If(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(N(t=>If(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hh(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ph{constructor(t,e,n,r,i,a,s,o,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=s,this.routeConfig=o,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=If(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=If(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gh extends ah{constructor(t,e){super(e),this.url=t,mh(this,e)}toString(){return yh(this._root)}}function mh(t,e){e.value._routerState=t,e.children.forEach(e=>mh(t,e))}function yh(t){const e=t.children.length>0?` { ${t.children.map(yh).join(", ")} } `:"";return`${t.value}${e}`}function vh(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pf(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Pf(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pf(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Pf(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function _h(t,e){var n,r;return Pf(t.params,e.params)&&Gf(n=t.url,r=e.url)&&n.every((t,e)=>Pf(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||_h(t.parent,e.parent))}function bh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Eh(t,e,n,r,i){let a={};return r&&kf(r,(t,e)=>{a[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new jf(n.root===t?e:function t(e,n,r){const i={};return kf(e.children,(e,a)=>{i[a]=e===n?r:t(e,n,r)}),new Uf(e.segments,i)}(n.root,t,e),a,i)}class Th{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&bh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Nf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sh{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function wh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Ah(t,e,n){if(t||(t=new Uf([],{})),0===t.segments.length&&t.hasChildren())return xh(t,e,n);const r=function(t,e,n){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return a;const e=t.segments[i],s=wh(n[r]),o=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&o&&"object"==typeof o&&void 0===o.outlets){if(!Rh(s,o,e))return a;r+=2}else{if(!Rh(s,{},e))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Uf(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Uf(t.segments.slice(r.pathIndex),t.children),xh(e,0,i)}return r.match&&0===i.length?new Uf(t.segments,{}):r.match&&!t.hasChildren()?Ch(t,e,n):r.match?xh(t,0,i):Ch(t,e,n)}function xh(t,e,n){if(0===n.length)return new Uf(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return kf(r,(n,r)=>{null!==n&&(i[r]=Ah(t.children[r],e,n))}),kf(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Uf(t.segments,i)}}function Ch(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=Dh(n[i].outlets);return new Uf(r,t)}if(0===i&&bh(n[0])){r.push(new Vf(t.segments[e].path,n[0])),i++;continue}const a=wh(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&bh(s)?(r.push(new Vf(a,Ih(s))),i+=2):(r.push(new Vf(a,{})),i++)}return new Uf(r,{})}function Dh(t){const e={};return kf(t,(t,n)=>{null!==t&&(e[n]=Ch(new Uf([],{}),0,t))}),e}function Ih(t){const e={};return kf(t,(t,n)=>e[n]=""+t),e}function Rh(t,e,n){return t==n.path&&Pf(e,n.parameters)}class Oh{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),vh(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=lh(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kf(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=lh(t),i=t.value.component?n.children:e;kf(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=lh(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new xf(t.value.snapshot))}),t.children.length&&this.forwardEvent(new wf(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(vh(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ph(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ph(t){vh(t.value),t.children.forEach(Ph)}class Mh{constructor(t,e){this.routes=t,this.module=e}}function Lh(t){return"function"==typeof t}function Nh(t){return t instanceof jf}class kh{constructor(t){this.segmentGroup=t||null}}class Fh{constructor(t){this.urlTree=t}}function Bh(t){return new v(e=>e.error(new kh(t)))}function jh(t){return new v(e=>e.error(new Fh(t)))}function Uh(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Vh{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Zt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(N(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hd(t=>{if(t instanceof Fh)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof kh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(N(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Hd(t=>{if(t instanceof kh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Uf([],{primary:t}):t;return new jf(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(N(t=>new Uf([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Uc({});const n=[],r=[],i={};return kf(t,(t,a)=>{const s=e(a,t).pipe(N(t=>i[a]=t));"primary"===a?n.push(s):r.push(s)}),Uc.apply(null,n.concat(r)).pipe(Od(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Gc((e,n)=>t(e,n,r)):y,Md(1),n?Ud(e):kd(()=>new wd))}(),N(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,a){return Uc(...n).pipe(N(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,a).pipe(Hd(t=>{if(t instanceof kh)return Uc(null);throw t}))),Od(),Wd(t=>!!t),Hd((t,n)=>{if(t instanceof wd||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Uc(new Uf([],{}));throw new kh(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,a,s){return zh(r)!==a?Bh(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a):Bh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?jh(i):this.lineralizeSegments(n,i).pipe(U(n=>{const i=new Uf(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){const{matched:s,consumedSegments:o,lastChild:u,positionalParamSegments:l}=Gh(e,r,i);if(!s)return Bh(e);const c=this.applyRedirectCommands(o,r.redirectTo,l);return r.redirectTo.startsWith("/")?jh(c):this.lineralizeSegments(r,c).pipe(U(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),a,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(N(t=>(n._loadedConfig=t,new Uf(r,{})))):Uc(new Uf(r,{}));const{matched:i,consumedSegments:a,lastChild:s}=Gh(e,n,r);if(!i)return Bh(e);const o=r.slice(s);return this.getChildConfig(t,n,r).pipe(U(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Yh(t,e,n)&&"primary"!==zh(n))}(t,n,r)?{segmentGroup:Hh(new Uf(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==zh(r)&&(n[zh(r)]=new Uf([],{}));return n}(r,new Uf(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Yh(t,e,n))}(t,n,r)?{segmentGroup:Hh(new Uf(t.segments,function(t,e,n,r){const i={};for(const a of n)Yh(t,e,a)&&!r[zh(a)]&&(i[zh(a)]=new Uf([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,a,o,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(N(t=>new Uf(a,t))):0===r.length&&0===s.length?Uc(new Uf(a,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(N(t=>new Uf(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Uc(new Mh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Uc(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(N(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(Rf(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Uc(new Mh([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?j(r).pipe(N(r=>{const i=t.get(r);let a;if(function(t){return t&&Lh(t.canLoad)}(i))a=i.canLoad(e,n);else{if(!Lh(i))throw new Error("Invalid CanLoad guard");a=i(e,n)}return Ff(a)})).pipe(Od(),Qd(t=>{if(!Nh(t))return;const e=Rf(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new tf(i,void 0,t)))):Uc(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Uc(n);if(r.numberOfChildren>1||!r.children.primary)return Uh(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new jf(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kf(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let a={};return kf(e.children,(e,i)=>{a[i]=this.createSegmentGroup(t,e,n,r)}),new Uf(i,a)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Gh(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Of)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Hh(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Uf(t.segments.concat(e.segments),e.children)}return t}function Yh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function zh(t){return t.outlet||"primary"}class qh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Xh{constructor(t,e){this.component=t,this.route=e}}function Kh(t,e,n){const r=t._root;return function t(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const s=lh(n);return e.children.forEach(e=>{!function(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Gf(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gf(t.url,e.url)||!Pf(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_h(t,e)||!Pf(t.queryParams,e.queryParams);case"paramsChange":default:return!_h(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?a.canActivateChecks.push(new qh(i)):(s.data=o.data,s._resolvedData=o._resolvedData),t(e,n,s.component?u?u.children:null:r,i,a),l&&a.canDeactivateChecks.push(new Xh(u&&u.outlet&&u.outlet.component||null,o))}else o&&$h(n,u,a),a.canActivateChecks.push(new qh(i)),t(e,null,s.component?u?u.children:null:r,i,a)}(e,s[e.value.outlet],r,i.concat([e.value]),a),delete s[e.value.outlet]}),kf(s,(t,e)=>$h(t,r.getContext(e),a)),a}(r,e?e._root:null,n,[r.value])}function Wh(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function $h(t,e,n){const r=lh(t),i=t.value;kf(r,(t,r)=>{$h(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Xh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Qh=Symbol("INITIAL_VALUE");function Zh(){return nf(t=>function(...t){let e=null,n=null;return A(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),Y(t,n).lift(new xd(e))}(...t.map(t=>t.pipe(qd(1),function(...t){const e=t[t.length-1];return A(e)?(t.pop(),n=>sf(t,n,e)):e=>sf(t,e)}(Qh)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new of(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Qh)return t;if(r===Qh&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Nh(r))return r}return t},t)},Qh),Gc(t=>t!==Qh),N(t=>Nh(t)?t:!0===t),qd(1)))}function Jh(t,e){return null!==t&&e&&e(new Af(t)),Uc(!0)}function tp(t,e){return null!==t&&e&&e(new Sf(t)),Uc(!0)}function ep(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Uc(r.map(r=>Rd(()=>{const i=Wh(r,e,n);let a;if(function(t){return t&&Lh(t.canActivate)}(i))a=Ff(i.canActivate(e,t));else{if(!Lh(i))throw new Error("Invalid CanActivate guard");a=Ff(i(e,t))}return a.pipe(Wd())}))).pipe(Zh()):Uc(!0)}function np(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Rd(()=>Uc(e.guards.map(i=>{const a=Wh(i,e.node,n);let s;if(function(t){return t&&Lh(t.canActivateChild)}(a))s=Ff(a.canActivateChild(r,t));else{if(!Lh(a))throw new Error("Invalid CanActivateChild guard");s=Ff(a(r,t))}return s.pipe(Wd())})).pipe(Zh())));return Uc(i).pipe(Zh())}class rp{}class ip{constructor(t,e,n,r,i,a){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=a}recognize(){try{const t=op(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new ph([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new uh(n,e),i=new gh(this.url,r);return this.inheritParamsAndData(i._root),Uc(i)}catch(t){return new v(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=hh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Hf(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const a of t)try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(i){if(!(i instanceof rp))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new rp}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new rp;if((t.outlet||"primary")!==r)throw new rp;let i,a=[],s=[];if("**"===t.path){const a=n.length>0?Nf(n).parameters:{};i=new ph(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cp(t),r,t.component,t,ap(e),sp(e)+n.length,dp(t))}else{const o=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new rp;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Of)(n,t,e);if(!r)throw new rp;const i={};kf(r.posParams,(t,e)=>{i[e]=t.path});const a=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=o.consumedSegments,s=n.slice(o.lastChild),i=new ph(a,o.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cp(t),r,t.component,t,ap(e),sp(e)+a.length,dp(t))}const o=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=op(e,a,s,o,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const t=this.processChildren(o,u);return[new uh(i,t)]}if(0===o.length&&0===l.length)return[new uh(i,[])];const c=this.processSegment(o,u,l,"primary");return[new uh(i,c)]}}function ap(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function sp(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function op(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>up(t,e,n)&&"primary"!==lp(n))}(t,n,r)){const i=new Uf(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const a of n)if(""===a.path&&"primary"!==lp(a)){const n=new Uf([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lp(a)]=n}return i}(t,e,r,new Uf(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>up(t,e,n))}(t,n,r)){const a=new Uf(t.segments,function(t,e,n,r,i,a){const s={};for(const o of r)if(up(t,n,o)&&!i[lp(o)]){const n=new Uf([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===a?t.segments.length:e.length,s[lp(o)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}const a=new Uf(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function up(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function lp(t){return t.outlet||"primary"}function cp(t){return t.data||{}}function dp(t){return t.resolve||{}}function fp(t){return function(e){return e.pipe(nf(e=>{const n=t(e);return n?j(n).pipe(N(()=>e)):j([e])}))}}class hp{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let pp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&vs(0,"router-outlet")},directives:function(){return[Pp]},encapsulation:2}),t})();function gp(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];mp(r,yp(e,r))}}function mp(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&gp(t.children,e)}function yp(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function vp(t){const e=t.children&&t.children.map(vp),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=pp),n}const _p=new Bt("ROUTES");class bp{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(N(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Mh(Lf(r.injector.get(_p)).map(vp),r)}))}loadModuleFactory(t){return"string"==typeof t?j(this.loader.load(t)):Ff(t()).pipe(U(t=>t instanceof Jt?Uc(t):j(this.compiler.compileModuleAsync(t))))}}class Ep{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tp,this.attachRef=null}}class Tp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ep,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Sp{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function wp(t){throw t}function Ap(t,e,n){return e.parse("/")}function xp(t,e){return Uc(null)}let Cp=(()=>{class t{constructor(t,e,n,r,i,a,s,o){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=o,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=wp,this.malformedUriErrorHandler=Ap,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xp,afterPreactivation:xp},this.urlHandlingStrategy=new Sp,this.routeReuseStrategy=new hp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Zt),this.console=i.get(Hu);const u=i.get(nl);this.isNgZoneEnabled=u instanceof nl,this.resetConfig(o),this.currentUrlTree=new jf(new Uf([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bp(a,s,t=>this.triggerEvent(new Ef(t)),t=>this.triggerEvent(new Tf(t))),this.routerState=dh(this.currentUrlTree,this.rootComponentType),this.transitions=new Sd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Gc(t=>0!==t.id),N(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),nf(t=>{let n=!1,r=!1;return Uc(t).pipe(Qd(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nf(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Uc(t).pipe(nf(t=>{const n=this.transitions.getValue();return e.next(new ff(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Dd:[t]}),nf(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,a=this.urlSerializer,s=this.config,function(t){return t.pipe(nf(t=>function(t,e,n,r,i){return new Vh(t,e,n,r,i).apply()}(r,i,a,t.extractedUrl,s).pipe(N(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Qd(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(a){return a.pipe(U(a=>function(t,e,n,r,i="emptyOnly",a="legacy"){return new ip(t,e,n,r,i,a).recognize()}(t,e,a.urlAfterRedirects,n(a.urlAfterRedirects),r,i).pipe(N(t=>Object.assign(Object.assign({},a),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Qd(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Qd(t=>{const n=new mf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,a,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:a,extras:s}=t,o=new ff(n,this.serializeUrl(r),i,a);e.next(o);const u=dh(r,this.rootComponentType).snapshot;return Uc(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Dd}),fp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!s})}),Qd(t=>{const e=new yf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),N(t=>Object.assign(Object.assign({},t),{guards:Kh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:s}}=n;return 0===s.length&&0===a.length?Uc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return j(t).pipe(U(t=>function(t,e,n,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Uc(a.map(a=>{const s=Wh(a,e,i);let o;if(function(t){return t&&Lh(t.canDeactivate)}(s))o=Ff(s.canDeactivate(t,e,n,r));else{if(!Lh(s))throw new Error("Invalid CanDeactivate guard");o=Ff(s(t,e,n,r))}return o.pipe(Wd())})).pipe(Zh()):Uc(!0)}(t.component,t.route,n,e,r)),Wd(t=>!0!==t,!0))}(s,r,i,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,r){return j(e).pipe(Vc(e=>j([tp(e.route.parent,r),Jh(e.route,r),np(t,e.path,n),ep(t,e.route,n)]).pipe(Od(),Wd(t=>!0!==t,!0))),Wd(t=>!0!==t,!0))}(r,a,t,e):Uc(n)),N(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Qd(t=>{if(Nh(t.guardsResult)){const e=Rf(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Qd(t=>{const e=new vf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Gc(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new pf(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),fp(t=>{if(t.guards.canActivateChecks.length)return Uc(t).pipe(Qd(t=>{const e=new _f(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),nf(t=>{let n=!1;return Uc(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Uc(t);let a=0;return j(n).pipe(Vc(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Uc({});const a={};return j(i).pipe(U(i=>function(t,e,n,r){const i=Wh(t,e,r);return Ff(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Qd(t=>{a[i]=t}))),Md(1),U(()=>Object.keys(a).length===i.length?Uc(a):Dd))}(t._resolve,t,e,r).pipe(N(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),hh(t,n).resolve),null)))}(t.route,e,r,i)),Qd(()=>a++),Md(1),U(e=>a===n.length?Uc(t):Dd))}))}),Qd({next:()=>n=!0,complete:()=>{if(!n){const n=new pf(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Qd(t=>{const e=new bf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),fp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!s})}),N(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const a=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new uh(i,a)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new fh(new Sd((i=n.value).url),new Sd(i.params),new Sd(i.queryParams),new Sd(i.fragment),new Sd(i.data),i.outlet,i.component,i),a=n.children.map(n=>t(e,n));return new uh(r,a)}}var i}(t,e._root,n?n._root:void 0);return new ch(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Qd(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(a=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),N(t=>(new Oh(s,t.targetRouterState,t.currentRouterState,o).activate(a),t))),Qd({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new pf(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new lf(i))),Hd(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Nh(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new pf(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new gf(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(a){t.reject(a)}}var i;return Dd}));var i,a,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gp(t),this.config=t.map(vp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:a,queryParamsHandling:s,preserveFragment:o}=e;_r()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=o?this.currentUrlTree.fragment:i;let c=null;if(s)switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=a?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Eh(e.root,e.root,e,r,i);const a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Th(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kf(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Th(n,e,r)}(n);if(a.toRoot())return Eh(e.root,new Uf([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Sh(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Sh(t,t===e.root,0)}const r=bh(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,a=n;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Sh(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(a,e,t),o=s.processChildren?xh(s.segmentGroup,s.index,a.commands):Ah(s.segmentGroup,s.index,a.commands);return Eh(s.segmentGroup,o,e,r,i)}(u,this.currentUrlTree,t,c,l)}navigateByUrl(t,e={skipLocationChange:!1}){_r()&&this.isNgZoneEnabled&&!nl.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Nh(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Nh(t))return Bf(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Bf(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new hf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const a=this.getTransition();if(a&&"imperative"!==e&&"imperative"===a.source&&a.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(a&&"hashchange"==e&&"popstate"===a.source&&a.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(a&&"popstate"==e&&"hashchange"===a.source&&a.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,o,u;i?(s=i.resolve,o=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,o=e});const l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Kt(ja),Kt(Yf),Kt(Tp),Kt(Kl),Kt(ts),Kt(Sl),Kt(Ju),Kt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Dp=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new S,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){_r()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:Rp(this.skipLocationChange),replaceUrl:Rp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Rp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Rp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp),fs(fh),hs("tabindex"),fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&ws("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Oe]}),t})(),Ip=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new S,this.subscription=t.events.subscribe(t=>{t instanceof hf&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){_r()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Rp(this.skipLocationChange),replaceUrl:Rp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Rp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Rp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp),fs(fh),fs(Hl))},t.\u0275dir=_e({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&ws("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(to("href",e.href,Yr),us("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Oe]}),t})();function Rp(t){return""===t||!!t}let Op=(()=>{class t{constructor(t,e,n,r,i,a){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof hf&&this.update()})}ngAfterContentInit(){j([this.links.changes,this.linksWithHrefs.changes,Uc(null)]).pipe(H()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=j(e).pipe(H()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp),fs(_o),fs(So),fs(Fa),fs(Dp,8),fs(Ip,8))},t.\u0275dir=_e({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(Iu(n,Dp,!0),Iu(n,Ip,!0)),2&t&&(Au(r=Ru())&&(e.links=r),Au(r=Ru())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Oe]}),t})(),Pp=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new pu,this.deactivateEvents=new pu,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Mp(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(fs(Tp),fs(zo),fs(vo),hs("name"),fs(Fa))},t.\u0275dir=_e({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Mp{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===fh?this.route:t===Tp?this.childContexts:this.parent.get(t,e)}}class Lp{}class Np{preload(t,e){return Uc(null)}}let kp=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new bp(e,n,e=>t.triggerEvent(new Ef(e)),e=>t.triggerEvent(new Tf(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gc(t=>t instanceof hf),Vc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return j(n).pipe(H(),N(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Cp),Kt(Sl),Kt(Ju),Kt(ts),Kt(Lp))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Fp=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ff?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Cf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Cp),Kt(lc),Kt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Bp=new Bt("ROUTER_CONFIGURATION"),jp=new Bt("ROUTER_FORROOT_GUARD"),Up=[Kl,{provide:Yf,useClass:zf},{provide:Cp,useFactory:function(t,e,n,r,i,a,s,o={},u,l){const c=new Cp(null,t,e,n,r,i,a,Lf(s));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),o.errorHandler&&(c.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(c.malformedUriErrorHandler=o.malformedUriErrorHandler),o.enableTracing){const t=Pl();c.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return o.onSameUrlNavigation&&(c.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.urlUpdateStrategy&&(c.urlUpdateStrategy=o.urlUpdateStrategy),o.relativeLinkResolution&&(c.relativeLinkResolution=o.relativeLinkResolution),c},deps:[Yf,Tp,Kl,ts,Sl,Ju,_p,Bp,[class{},new it],[class{},new it]]},Tp,{provide:fh,useFactory:function(t){return t.routerState.root},deps:[Cp]},{provide:Sl,useClass:xl},kp,Np,class{preload(t,e){return e().pipe(Hd(()=>Uc(null)))}},{provide:Bp,useValue:{enableTracing:!1}}];function Vp(){return new ml("Router",Cp)}let Gp=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Up,qp(e),{provide:jp,useFactory:zp,deps:[[Cp,new it,new st]]},{provide:Bp,useValue:n||{}},{provide:Hl,useFactory:Yp,deps:[Ll,[new rt(zl),new it],Bp]},{provide:Fp,useFactory:Hp,deps:[Cp,lc,Bp]},{provide:Lp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Np},{provide:ml,multi:!0,useFactory:Vp},[Xp,{provide:Nu,multi:!0,useFactory:Kp,deps:[Xp]},{provide:$p,useFactory:Wp,deps:[Xp]},{provide:Gu,multi:!0,useExisting:$p}]]}}static forChild(e){return{ngModule:t,providers:[qp(e)]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(Kt(jp,8),Kt(Cp,8))}}),t})();function Hp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Fp(t,e,n)}function Yp(t,e,n={}){return n.useHash?new Xl(t,e):new ql(t,e)}function zp(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qp(t){return[{provide:es,multi:!0,useValue:t},{provide:_p,multi:!0,useValue:t}]}let Xp=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(kl,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Cp),r=this.injector.get(Bp);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Uc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Bp),n=this.injector.get(kp),r=this.injector.get(Fp),i=this.injector.get(Cp),a=this.injector.get(El);t===a.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Kt(ts))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Kp(t){return t.appInitializer.bind(t)}function Wp(t){return t.bootstrapListener.bind(t)}const $p=new Bt("Router Initializer");function Qp(t,e){return new v(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let a=0,s=0;for(let o=0;o<r;o++){const u=j(t[o]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,s++),i[o]=t},error:t=>n.error(t),complete:()=>{a++,a!==r&&l||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Zp=new Bt("NgValueAccessor"),Jp={provide:Zp,useExisting:St(()=>tg),multi:!0};let tg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&ws("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[go([Jp])]}),t})();const eg={provide:Zp,useExisting:St(()=>rg),multi:!0},ng=new Bt("CompositionEventMode");let rg=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Pl()?Pl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o),fs(ng,8))},t.\u0275dir=_e({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&ws("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[go([eg])]}),t})(),ig=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t}),t})(),ag=(()=>{class t extends ig{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return sg(e||t)},t.\u0275dir=_e({type:t,features:[no]}),t})();const sg=lr(ag);function og(){throw new Error("unimplemented")}class ug extends ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return og()}get asyncValidator(){return og()}}class lg{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let cg=(()=>{class t extends lg{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(ug,2))},t.\u0275dir=_e({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Us("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[no]}),t})(),dg=(()=>{class t extends lg{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(ag,2))},t.\u0275dir=_e({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Us("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[no]}),t})();function fg(t){return null==t||0===t.length}function hg(t){return null!=t&&"number"==typeof t.length}const pg=new Bt("NgValidators"),gg=new Bt("NgAsyncValidators"),mg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class yg{static min(t){return e=>{if(fg(e.value)||fg(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(fg(e.value)||fg(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return fg(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return fg(t.value)||mg.test(t.value)?null:{email:!0}}static minLength(t){return e=>fg(e.value)||!hg(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>hg(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return yg.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(fg(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(vg);return 0==e.length?null:function(t){return bg(Eg(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(vg);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Qp(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Qp(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Qp(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(N(t=>e(...t)))}return Qp(t,null)}(Eg(t,e).map(_g)).pipe(N(bg))}}}function vg(t){return null!=t}function _g(t){const e=Ts(t)?j(t):t;if(!Ss(e))throw new Error("Expected validator to return Promise or Observable.");return e}function bg(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Eg(t,e){return e.map(e=>e(t))}function Tg(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const Sg={provide:Zp,useExisting:St(()=>wg),multi:!0};let wg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&ws("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[go([Sg])]}),t})();const Ag={provide:Zp,useExisting:St(()=>Cg),multi:!0};let xg=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Cg=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ug),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o),fs(xg),fs(ts))},t.\u0275dir=_e({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&ws("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[go([Ag])]}),t})();const Dg={provide:Zp,useExisting:St(()=>Ig),multi:!0};let Ig=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&ws("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[go([Dg])]}),t})();const Rg='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Og='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });';class Pg{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Rg)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Og}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Rg)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Og)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const Mg={provide:Zp,useExisting:St(()=>Lg),multi:!0};let Lg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&ws("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[go([Mg])]}),t})();const Ng={provide:Zp,useExisting:St(()=>kg),multi:!0};let kg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(fs(So),fs(_o))},t.\u0275dir=_e({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&ws("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[go([Ng])]}),t})();function Fg(t,e){return[...e.path,t]}function Bg(t,e){t||Gg(e,"Cannot find control with"),e.valueAccessor||Gg(e,"No value accessor for form control with"),t.validator=yg.compose([t.validator,e.validator]),t.asyncValidator=yg.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&jg(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&jg(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function jg(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ug(t,e){null==t&&Gg(e,"Cannot find control with"),t.validator=yg.compose([t.validator,e.validator]),t.asyncValidator=yg.composeAsync([t.asyncValidator,e.asyncValidator])}function Vg(t){return Gg(t,"There is no FormControl instance attached to form control element with")}function Gg(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Hg(t){return null!=t?yg.compose(Tg(t)):null}function Yg(t){return null!=t?yg.composeAsync(Tg(t)):null}const zg=[tg,Ig,wg,Lg,kg,Cg];function qg(t){const e=Kg(t)?t.validators:t;return Array.isArray(e)?Hg(e):e||null}function Xg(t,e){const n=Kg(e)?e.asyncValidators:t;return Array.isArray(n)?Yg(n):n||null}function Kg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Wg{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=qg(t)}setAsyncValidators(t){this.asyncValidator=Xg(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=_g(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Qg?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Zg&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new pu,this.statusChanges=new pu}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Kg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class $g extends Wg{constructor(t=null,e,n){super(qg(e),Xg(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Qg extends Wg{constructor(t,e,n){super(qg(e),Xg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof $g?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Zg extends Wg{constructor(t,e,n){super(qg(e),Xg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof $g?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Jg=(()=>{class t extends ag{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Fg(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Hg(this._validators)}get asyncValidator(){return Yg(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return tm(e||t)},t.\u0275dir=_e({type:t,features:[no]}),t})();const tm=lr(Jg);let em=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const nm=new Bt("NgModelWithFormControlWarning"),rm={provide:ag,useExisting:St(()=>im)};let im=(()=>{class t extends ag{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new pu}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Bg(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Ug(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Ug(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Vg(e)),e.valueAccessor.registerOnTouched(()=>Vg(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Bg(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Hg(this._validators);this.form.validator=yg.compose([this.form.validator,t]);const e=Yg(this._asyncValidators);this.form.asyncValidator=yg.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||Pg.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(fs(pg,10),fs(gg,10))},t.\u0275dir=_e({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&ws("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[go([rm]),no,Oe]}),t})();const am={provide:ag,useExisting:St(()=>sm)};let sm=(()=>{class t extends Jg{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){lm(this._parent)&&Pg.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(fs(ag,13),fs(pg,10),fs(gg,10))},t.\u0275dir=_e({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[go([am]),no]}),t})();const om={provide:ag,useExisting:St(()=>um)};let um=(()=>{class t extends ag{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Fg(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return Hg(this._validators)}get asyncValidator(){return Yg(this._asyncValidators)}_checkParentType(){lm(this._parent)&&Pg.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(fs(ag,13),fs(pg,10),fs(gg,10))},t.\u0275dir=_e({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[go([om]),no]}),t})();function lm(t){return!(t instanceof sm||t instanceof im||t instanceof um)}const cm={provide:ug,useExisting:St(()=>dm)};let dm=(()=>{class t extends ug{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new pu,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Gg(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var a;e.constructor===rg?n=e:(a=e,zg.some(t=>a.constructor===t)?(r&&Gg(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Gg(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(Gg(t,"No valid value accessor for form control with"),null)}(this,r)}set isDisabled(t){Pg.disabledAttrWarning()}ngOnChanges(e){var n,r;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&("formControlName",n=t,this,r=this._ngModelWarningConfig,_r()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Pg.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Fg(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Hg(this._rawValidators)}get asyncValidator(){return Yg(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof sm)&&this._parent instanceof Jg?Pg.ngModelGroupException():this._parent instanceof sm||this._parent instanceof im||this._parent instanceof um||Pg.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(fs(ag,13),fs(pg,10),fs(gg,10),fs(Zp,10),fs(nm,8))},t.\u0275dir=_e({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[go([cm]),no,Oe]}),t._ngModelWarningSentOnce=!1,t})(),fm=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})(),hm=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,a=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,a=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Qg(n,{asyncValidators:i,updateOn:a,validators:r})}control(t,e,n){return new $g(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Zg(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof $g||t instanceof Qg||t instanceof Zg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),pm=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[xg],imports:[fm]}),t})(),gm=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:nm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[hm,xg],imports:[fm]}),t})();class mm extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class ym extends mm{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let vm=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class _m extends vm{constructor(t,e=vm.now){super(t,()=>_m.delegate&&_m.delegate!==this?_m.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return _m.delegate&&_m.delegate!==this?_m.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const bm=new _m(ym);function Em(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Em(t,e,n).pipe(N(t=>u(t)?i(...t):i(t))):new v(r=>{!function t(e,n,r,i,a){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,a),s=()=>t.removeEventListener(n,r,a)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)t(e[s],n,r,i,a)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}class Tm{call(t,e){return e.subscribe(new Sm(t))}}class Sm extends L{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],r=M(this,e,e,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function wm(t){return e=>e.lift(new Am(t))}class Am{constructor(t){this.notifier=t}call(t,e){const n=new xm(t),r=M(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class xm extends L{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}function Cm(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Dm(t,n))}}class Dm{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Im(t,this.observables,this.project))}}class Im extends L{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(M(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const a=this.toRespond;if(a.length>0){const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}let Rm=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Uc(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return Id()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function Om(t,e=bm){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Pm(r,e))}class Pm{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Mm(t,this.delay,this.scheduler))}}class Mm extends p{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Mm.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Lm(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Rm.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Rm.createComplete()),this.unsubscribe()}}class Lm{constructor(t,e){this.time=t,this.notification=e}}const Nm=["aria-label",$localize`:@@ngb.alert.close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`];function km(t,e){if(1&t){const t=Es();ms(0,"button",1),n=Nm,function(t,e,n,r){const i=nn().index-20,a=[];for(let s=0;s<r.length;s+=2){const n=r[s],o=r[s+1].split(ou);for(let r=0;r<o.length;r++){const s=o[r];if(1&r)throw new Error("ICU expressions are not yet supported in attributes");if(""!==s)if(s.match(su))e.firstCreatePass&&null===e.data[21]&&te(uu(s,i,n),a);else{const r=He(e,i);3===r.type&&qi(r,t,n,s,null,null);const a=null!==r.inputs&&r.inputs[n];a&&sa(e,t,a,n,s)}}}e.firstCreatePass&&null===e.data[21]&&(e.data[21]=a)}(Je(),tn(),0,n),ws("click",(function(){return en(t),Cs().closeHandler()})),ms(2,"span",2),Qs(3,"\xd7"),ys(),ys()}var n}const Fm=["*"];$localize`:@@ngb.carousel.previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,$localize`:@@ngb.carousel.next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`;const Bm=["dialog"];function jm(t,e){1&t&&Qs(0),2&t&&Zs(Cs(2).title)}function Um(t,e){}function Vm(t,e){if(1&t&&(ms(0,"h3",3),cs(1,jm,1,1,"ng-template",null,4,Lu),cs(3,Um,0,0,"ng-template",5),ys()),2&t){const t=ds(2),e=Cs();di(3),ps("ngTemplateOutlet",e.isTitleTemplate()?e.title:t)("ngTemplateOutletContext",e.context)}}function Gm(t){return null!=t}$localize`:@@ngb.pagination.first␟656506dfd46380956a655f919f1498d018f75ca0␟6867721956102594380:««`,$localize`:@@ngb.pagination.previous␟6e52b6ee77a4848d899dd21b591c6fd499e3aef3␟6479320895410098858:«`,$localize`:@@ngb.pagination.next␟ba9cbb4ff311464308a3627e4f1c3345d9fe6d7d␟5458177150283468089:»`,$localize`:@@ngb.pagination.last␟49f27a460bc97e7e00be5b37098bfa79884fc7d9␟5277020320267646988:»»`,$localize`:@@ngb.pagination.first-aria␟f2f852318759c6396b5d3d17031d53817d7b38cc␟2241508602425256033:First`,$localize`:@@ngb.pagination.previous-aria␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,$localize`:@@ngb.pagination.next-aria␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,$localize`:@@ngb.pagination.last-aria␟5c729788ba138508aca1bec050b610f7bf81db3e␟4882268002141858767:Last`,$localize`:@@ngb.progressbar.value␟f8e9a947b9db4252c0e9905765338712f2fd032f␟3720830768741091151:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.timepicker.HH␟ce676ab1d6d98f85c836381cf100a4a91ef95a1f␟4043638465245303811:HH`,$localize`:@@ngb.timepicker.hours␟3bbce5fef7e1151da052a4e529453edb340e3912␟8070396816726827304:Hours`,$localize`:@@ngb.timepicker.MM␟72c8edf6a50068a05bde70991e36b1e881f4ca54␟1647282246509919852:MM`,$localize`:@@ngb.timepicker.minutes␟41e62daa962947c0d23ded0981975d1bddf0bf38␟5531237363767747080:Minutes`,$localize`:@@ngb.timepicker.increment-hours␟cb74bc1d625a6c1742f0d7d47306cf495780c218␟5939278348542933629:Increment hours`,$localize`:@@ngb.timepicker.decrement-hours␟147c7a19429da7d999e247d22e33fee370b1691b␟3651829882940481818:Decrement hours`,$localize`:@@ngb.timepicker.increment-minutes␟f5a4a3bc05e053f6732475d0e74875ec01c3a348␟180147720391025024:Increment minutes`,$localize`:@@ngb.timepicker.decrement-minutes␟c1a6899e529c096da5b660385d4e77fe1f7ad271␟7447789825403243588:Decrement minutes`,$localize`:@@ngb.timepicker.SS␟ebe38d36a40a2383c5fefa9b4608ffbda08bd4a3␟3628127143071124194:SS`,$localize`:@@ngb.timepicker.seconds␟4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c␟8874012390997067175:Seconds`,$localize`:@@ngb.timepicker.increment-seconds␟912322ecee7d659d04dcf494a70e22e49d334b26␟5364772110539092174:Increment seconds`,$localize`:@@ngb.timepicker.decrement-seconds␟5db47ac104294243a70eb9124fbea9d0004ddf69␟753633511487974857:Decrement seconds`,$localize`:@@ngb.timepicker.PM␟8d6e691e10306c1b34c6b26805151aaea320ef7f␟3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.timepicker.AM␟69a1f176a93998876952adac57c3bc3863b6105e␟4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.toast.close-aria␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});let Hm=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Ym=(()=>{let t=class{constructor(){this.dismissible=!0,this.type="warning"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})(),zm=(()=>{let t=class{constructor(t,e,n){this._renderer=e,this._element=n,this.close=new pu,this.dismissible=t.dismissible,this.type=t.type}closeHandler(){this.close.emit()}ngOnChanges(t){const e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+e.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+e.currentValue))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)}};return t.\u0275fac=function(e){return new(e||t)(fs(Ym),fs(So),fs(_o))},t.\u0275cmp=he({type:t,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert"],hostVars:2,hostBindings:function(t,e){2&t&&Us("alert-dismissible",e.dismissible)},inputs:{dismissible:"dismissible",type:"type"},outputs:{close:"close"},features:[Oe],ngContentSelectors:Fm,decls:2,vars:1,consts:[["type","button","class","close",3,"click",4,"ngIf",6,"aria-label"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(t,e){1&t&&(Is(),Rs(0),cs(1,km,4,0,"button",0)),2&t&&(di(1),ps("ngIf",e.dismissible))},directives:[ic],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),t})(),qm=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Xm=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})(),Km=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Wm=(()=>{let t=class{constructor(){this.collapsed=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngbCollapse",""]],hostVars:4,hostBindings:function(t,e){2&t&&Us("collapse",!0)("show",!e.collapsed)},inputs:{collapsed:["ngbCollapse","collapsed"]},exportAs:["ngbCollapse"]}),t})(),$m=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})();var Qm=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const Zm=(t,e)=>!!e&&e.some(e=>e.contains(t)),Jm=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),ty=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))();const ey=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ny(t){const e=Array.from(t.querySelectorAll(ey)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}class ry{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let a={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(t,e,n,r){const[i="top",a="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),o=this.getAllStyles(e),u=parseFloat(o.marginTop),l=parseFloat(o.marginBottom),c=parseFloat(o.marginLeft),d=parseFloat(o.marginRight);let f=0,h=0;switch(i){case"top":f=s.top-(e.offsetHeight+u+l);break;case"bottom":f=s.top+s.height;break;case"left":h=s.left-(e.offsetWidth+c+d);break;case"right":h=s.left+s.width}switch(a){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":h=s.left;break;case"right":h=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?h=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(h)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}}const iy=/\s+/,ay=new ry;let sy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc,pm]]}),t})(),oy=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["",8,"navbar"]]}),t})(),uy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})(),ly=(()=>{let t=class{constructor(){this.backdrop=!0,this.keyboard=!0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})();class cy{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class dy{constructor(t,e,n,r,i,a){this._type=t,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._componentFactoryResolver=i,this._applicationRef=a,this._windowRef=null,this._contentRef=null}open(t,e){return this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes)),this._windowRef}close(){var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null))}_getContentRef(t,e){if(t){if(t instanceof Ho){const n=t.createEmbeddedView(e);return this._applicationRef.attachView(n),new cy([n.rootNodes],n)}return new cy([[this._renderer.createText(""+t)]])}return new cy([])}}const fy=()=>{};let hy=(()=>{let t=class{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):fy}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=r+t+"px",()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}};return t.\u0275fac=function(e){return new(e||t)(Kt(Ml))},t.\u0275prov=ct({factory:function(){return new t(Kt(Ml))},token:t,providedIn:"root"}),t})(),py=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(t,e){2&t&&Vs("modal-backdrop fade show"+(e.backdropClass?" "+e.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class gy{close(t){}dismiss(t){}}class my{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}_dismiss(t){this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){const t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}var yy=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let vy=(()=>{let t=class{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new S,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new pu}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:t}=this._elRef;if(this._zone.runOutsideAngular(()=>{Em(t,"keydown").pipe(wm(this._closed$),Gc(t=>t.which===Qm.Escape&&this.keyboard)).subscribe(t=>requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(yy.ESC))}));let e=!1;Em(this._dialogEl.nativeElement,"mousedown").pipe(wm(this._closed$),Qd(()=>e=!1),nf(()=>Em(t,"mouseup").pipe(wm(this._closed$),qd(1))),Gc(({target:e})=>t===e)).subscribe(()=>{e=!0}),Em(t,"click").pipe(wm(this._closed$)).subscribe(({target:n})=>{!0!==this.backdrop||t!==n||e||this._zone.run(()=>this.dismiss(yy.BACKDROP_CLICK)),e=!1})}),!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=ny(t)[0];(e||n||t).focus()}}ngOnDestroy(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null}),this._closed$.next()}};return t.\u0275fac=function(e){return new(e||t)(fs(Ml),fs(_o),fs(nl))},t.\u0275cmp=he({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var n;1&t&&xu(Bm,!0),2&t&&Au(n=Ru())&&(e._dialogEl=n.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(t,e){2&t&&(us("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),Vs("modal fade show d-block"+(e.windowClass?" "+e.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Fm,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(Is(),ms(0,"div",0,1),ms(2,"div",2),Rs(3),ys(),ys()),2&t&&Vs("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),_y=(()=>{let t=class{constructor(t,e,n,r,i,a){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=r,this._rendererFactory=i,this._ngZone=a,this._activeWindowCmptHasChanged=new S,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new pu,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=Em(e,"focusin").pipe(wm(n),N(t=>t.target));Em(e,"keydown").pipe(wm(n),Gc(t=>t.which===Qm.Tab),Cm(t)).subscribe(([t,n])=>{const[r,i]=ny(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&Em(e,"click").pipe(wm(n),Cm(t),N(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:Gm(r.container)?this._document.querySelector(r.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),o=()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new gy,l=this._getContentRef(t,r.injector||e,n,u,r);let c=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,d=this._attachWindowComponent(t,i,l),f=new my(d,l,c,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.result.then(s,s),f.result.then(o,o),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),c&&c.instance&&this._applyBackdropOptions(c.instance,r),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(py).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(vy).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{Gm(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{Gm(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,r,i){return n?n instanceof Ho?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,r,i):new cy([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new cy([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(""+t);return new cy([[e]])}_createFromComponent(t,e,n,r,i){const a=t.resolveComponentFactory(n),s=ts.create({providers:[{provide:gy,useValue:r}],parent:e}),o=a.create(s),u=o.location.nativeElement;return i.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(o.hostView),new cy([[u]],o.hostView,o)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}};return t.\u0275fac=function(e){return new(e||t)(Kt(El),Kt(ts),Kt(Ml),Kt(hy),Kt(Eo),Kt(nl))},t.\u0275prov=ct({factory:function(){return new t(Kt(El),Kt(jt),Kt(Ml),Kt(hy),Kt(Eo),Kt(nl))},token:t,providedIn:"root"}),t})(),by=(()=>{let t=class{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}};return t.\u0275fac=function(e){return new(e||t)(Kt(vo),Kt(ts),Kt(_y),Kt(ly))},t.\u0275prov=ct({factory:function(){return new t(Kt(vo),Kt(jt),Kt(_y),Kt(ly))},token:t,providedIn:"root"}),t})(),Ey=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[by]}),t})(),Ty=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Sy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})();class wy{constructor(t,e){this.open=t,this.close=e,e||(this.close=t)}isManual(){return"manual"===this.open||"manual"===this.close}}const Ay={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},xy=t=>t>0?Om(t):t=>t;let Cy=(()=>{let t=class{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Dy=0,Iy=(()=>{let t=class{isTitleTemplate(){return this.title instanceof Ho}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(t,e){2&t&&(to("id",e.id),Vs("popover"+(e.popoverClass?" "+e.popoverClass:"")))},inputs:{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:Fm,decls:4,vars:1,consts:[[1,"arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Is(),vs(0,"div",0),cs(1,Vm,4,2,"h3",1),ms(2,"div",2),Rs(3),ys()),2&t&&(di(1),ps("ngIf",null!=e.title))},directives:[ic,oc],styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],encapsulation:2,changeDetection:0}),t})(),Ry=(()=>{let t=class{constructor(t,e,n,r,i,a,s,o,u,l){this._elementRef=t,this._renderer=e,this._ngZone=s,this._document=o,this._changeDetector=u,this.shown=new pu,this.hidden=new pu,this._ngbPopoverWindowId="ngb-popover-"+Dy++,this._windowRef=null,this.autoClose=a.autoClose,this.placement=a.placement,this.triggers=a.triggers,this.container=a.container,this.disablePopover=a.disablePopover,this.popoverClass=a.popoverClass,this.openDelay=a.openDelay,this.closeDelay=a.closeDelay,this._popupService=new dy(Iy,n,i,e,r,l),this._zoneSubscription=s.onStable.subscribe(()=>{this._windowRef&&function(t,e,n,r,i){let a=Array.isArray(n)?n:n.split(iy);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],o=e.classList,u=t=>{const[e,n]=t.split("-"),r=[];return r.push("bs-popover-"+e),n&&r.push(`bs-popover-${e}-${n}`),r.forEach(t=>{o.add(t)}),r};s.forEach(t=>{o.remove("bs-popover-"+t)});let l=a.findIndex(t=>"auto"===t);l>=0&&s.forEach((function(t){null==a.find(e=>-1!==e.search("^"+t))&&a.splice(l++,1,t)}));const c=e.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let d=null,f=!1;for(d of a){let n=u(d);if(ay.positionElements(t,e,d,r)){f=!0;break}n.forEach(t=>{o.remove(t)})}f||(d=a[0],u(d),ay.positionElements(t,e,d,r))}(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container)})}_isDisabled(){return!!this.disablePopover||!this.ngbPopover&&!this.popoverTitle}open(t){this._windowRef||this._isDisabled()||(this._windowRef=this._popupService.open(this.ngbPopover,t),this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=t,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),function(t,e,n,r,i,a,s,o){var l;n&&t.runOutsideAngular((l=()=>{const l=Em(e,"keydown").pipe(wm(i),Gc(t=>t.which===Qm.Escape),Qd(t=>t.preventDefault())),c=Em(e,"mousedown").pipe(N(t=>{const e=t.target;return 2!==t.button&&!Zm(e,s)&&("inside"===n?Zm(e,a)&&Jm(e,o):"outside"===n?!Zm(e,a):Jm(e,o)||!Zm(e,a))}),wm(i)),d=Em(e,"mouseup").pipe(Cm(c),Gc(([t,e])=>e),Om(0),wm(i));(function(...t){if(1===t.length){if(!u(t[0]))return t[0];t=t[0]}return Y(t,void 0).lift(new Tm)})([l.pipe(N(t=>0)),d.pipe(N(t=>1))]).subscribe(e=>t.run(()=>r(e)))},ty?()=>setTimeout(()=>l(),100):l))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function(t,e,n,r,i,a,s=0,o=0){const u=function(t,e=Ay){const n=(t||"").trim();if(0===n.length)return[];const r=n.split(/\s+/).map(t=>t.split(":")).map(t=>{let n=e[t[0]]||t;return new wy(n[0],n[1])}),i=r.filter(t=>t.isManual());if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===i.length&&r.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r}(n);if(1===u.length&&u[0].isManual())return()=>{};const l=function(t,e,n,r){return new v(i=>{const a=[],s=()=>i.next(!0),o=()=>i.next(!1),u=()=>i.next(!r());return n.forEach(n=>{n.open===n.close?a.push(t.listen(e,n.open,u)):a.push(t.listen(e,n.open,s),t.listen(e,n.close,o))}),()=>{a.forEach(t=>t())}})}(t,e,u,r).pipe(function(t,e,n){return r=>{let i=null;const a=r.pipe(N(t=>({open:t})),Gc(t=>{const e=n();return e===t.open||i&&i.open!==e?(i&&i.open!==t.open&&(i=null),!1):(i=t,!0)}),tt());return z(a.pipe(Gc(t=>t.open),xy(t)),a.pipe(Gc(t=>!t.open),xy(e))).pipe(Gc(t=>t===i&&(i=null,t.open!==n())),N(t=>t.open))}}(s,o,r)).subscribe(t=>t?i():a());return()=>l.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:t,popoverTitle:e,disablePopover:n,popoverClass:r}){r&&this.isOpen()&&(this._windowRef.instance.popoverClass=r.currentValue),(t||e||n)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(fs(_o),fs(So),fs(ts),fs(vo),fs(zo),fs(Cy),fs(nl),fs(Ml),fs(Fa),fs(El))},t.\u0275dir=_e({type:t,selectors:[["","ngbPopover",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Oe]}),t})(),Oy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Py=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),My=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Ly=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Ny=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),ky=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})(),Fy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)}}),t})(),By=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[uc]]}),t})();const jy=[Hm,qm,Xm,Km,$m,sy,uy,Ey,Ty,Sy,Oy,Py,My,Ny,ky,Fy,By,Ly];let Uy=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[jy,Hm,qm,Xm,Km,$m,sy,uy,Ey,Ty,Sy,Oy,Py,My,Ny,ky,Fy,By,Ly]}),t})();n("EVdn");const Vy=function(){return["active"]},Gy=function(){return{exact:!0}};let Hy=(()=>{class t{constructor(){this.isCollapsed=!0}ngOnInit(){const t=$(".navbar");$(window).scroll(()=>{$(window).scrollTop()>=5?t.addClass("ak-sl2"):t.removeClass("ak-sl2")})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-top-bar"]],decls:15,vars:11,consts:[["id","nav",1,"navbar","fixed-top","navbar-expand-lg","navbar-light","bg-light","px-0"],[1,"col-12","row","justify-content-center","px-0"],[1,"col-10","px-0","row","py-1"],["rel","author","href","/","title","Akamai Debug Players",1,"navbar-brand"],["alt","Akamai Debug Players","src","./assets/img/Akamai-Logo-RGB.png","alt","html","height","47px"],["type","button",1,"navbar-toggler","ml-auto",3,"click"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","mr-auto","h6","mt-3"],[1,"nav-item","active","mx-2"],["name","players","title","Players","alt","Players",1,"nav-link",3,"routerLinkActive","routerLinkActiveOptions","routerLink","click"],[1,"nav-item","mx-2",3,"routerLinkActive","routerLinkActiveOptions"],["name","stream-validator","title","Stream Validator","alt","Stream Validator",1,"nav-link",3,"routerLink","click"]],template:function(t,e){1&t&&(ms(0,"nav",0),ms(1,"div",1),ms(2,"div",2),ms(3,"a",3),vs(4,"img",4),ys(),ms(5,"button",5),ws("click",(function(){return e.isCollapsed=!e.isCollapsed})),vs(6,"span",6),ys(),ms(7,"div",7),ms(8,"ul",8),ms(9,"li",9),ms(10,"a",10),ws("click",(function(){return e.isCollapsed=!0})),Qs(11,"Players"),ys(),ys(),ms(12,"li",11),ms(13,"a",12),ws("click",(function(){return e.isCollapsed=!0})),Qs(14,"Stream Validator"),ys(),ys(),ys(),ys(),ys(),ys(),ys()),2&t&&(di(7),ps("ngbCollapse",e.isCollapsed),di(3),ps("routerLinkActive",hu(7,Vy))("routerLinkActiveOptions",hu(8,Gy))("routerLink","players"),di(2),ps("routerLinkActive",hu(9,Vy))("routerLinkActiveOptions",hu(10,Gy)),di(1),ps("routerLink","stream-validator"))},directives:[oy,Wm,Ip,Op],styles:[".navbar[_ngcontent-%COMP%]{z-index:100000}.ak-sl2[_ngcontent-%COMP%]{box-shadow:1px 2px 3px 0 rgba(92,92,92,.25)!important;transition:opacity 100 ease-in-out!important;transition:all .9s ease-out 0s}"]}),t})();var Yy=n("kiQV");let zy=(()=>{class t{constructor(){this.version=Yy.a}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-bottom-bar"]],decls:15,vars:1,consts:[[1,"page-footer"],[1,"footer-copyright","text-center","py-3"],[1,"text-muted"],["routerLink","/release-notes"],["href","https://forms.gle/KjsEhkyApnS1HQQX8"],[2,"color","var(--akamai-orange)"]],template:function(t,e){1&t&&(ms(0,"footer",0),ms(1,"div",1),ms(2,"span",2),Qs(3),ms(4,"a",3),Qs(5,"Release Notes"),ys(),Qs(6,"."),ys(),vs(7,"br"),ms(8,"span",2),Qs(9,"Please provide "),ms(10,"a",4),Qs(11,"feedback"),ys(),Qs(12," or direct questions "),ys(),ms(13,"span",5),Qs(14,"dl-playersakamai@akamai.com"),ys(),ys(),ys()),2&t&&(di(3),Js("Akamai Stream Validation and Player Test Page v",e.version,". See "))},directives:[Ip],styles:[".footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:60px;text-align:center;line-height:60px;background-color:#f5f5f5}"]}),t})(),qy=(()=>{class t{constructor(t){this.router=t,this.title="players-akamai"}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp))},t.\u0275cmp=he({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(vs(0,"app-top-bar"),vs(1,"router-outlet"),vs(2,"app-bottom-bar"))},directives:[Hy,Pp,zy],styles:[""]}),t})(),Xy=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(e){return new(e||t)(fs(zo))},t.\u0275dir=_e({type:t,selectors:[["","appPlayer",""]]}),t})();const Ky=["video"];let Wy=(()=>{class t{constructor(){this.rebufferingEvents=[],this.ongoingBufferingEvent=!1,this.debug=!1,this.showOptions=!1,this.errors=[],this.downloadedFrags=[],this.newPlayer()}ngAfterViewInit(){this.videoElement=this.video.nativeElement,this.videoElement.addEventListener("waiting",t=>{this.debug&&console.log("Waiting event fired"),this.ongoingBufferingEvent||(this.bufferingStartTime=Date.now()),this.ongoingBufferingEvent=!0}),this.debug&&this.videoElement.addEventListener("stalled",t=>{console.log("Stalled event fired")}),this.videoElement.addEventListener("playing",t=>{if(this.debug&&console.log("Playing event fired"),this.ongoingBufferingEvent){const t=Date.now();this.rebufferingEvents.push({startTime:this.bufferingStartTime,duration:t-this.bufferingStartTime})}this.ongoingBufferingEvent=!1})}updateShowOptions(t){this.showOptions=t}getAllStatistics(){const t=this.videoElement.buffered;let e=NaN;if(t.length>0){const n=t.start(t.length-1);e=t.end(t.length-1)-Math.max(n,this.videoElement.currentTime)}let n=void 0,r=void 0;if(void 0!==this.videoElement.getVideoPlaybackQuality){let t=void 0;t=this.videoElement.getVideoPlaybackQuality(),n=t.droppedVideoFrames,r=t.totalVideoFrames}const i={bufferLevel:e,bufferingEvents:this.rebufferingEvents,droppedFrames:n,totalFrames:r};this.rebufferingEvents=[];let a=this.getStatistics();return a.generalStats!={}&&(this.prevPlayerStats=Object.assign(Object.assign({},this.prevPlayerStats),a),a=this.prevPlayerStats),Object.assign(Object.assign({},a),{html5Stats:i})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&Cu(Ky,!0),2&t&&Au(n=Ru())&&(e.video=n.first)},decls:1,vars:0,template:function(t,e){1&t&&Qs(0,"no-ui")},encapsulation:2}),t})();var $y=n("ulZh"),Qy=n.n($y),Zy=n("XkjI");function Jy(t,e){if(1&t){const t=Es();ms(0,"ngb-alert",16),ws("close",(function(){return en(t),Cs().closeAlert()})),Qs(1),ys()}if(2&t){const t=Cs();ps("type",t.alertType),di(1),Js(" ",t.alertMessage,"")}}class tv{constructor(t){this.settings=t}getPlayerConfig(){return this.settings}}class ev extends tv{getCMCD(){return this.settings.streaming.cmcd.enabled}setCMCD(t){t?(this.settings.streaming.cmcd.enabled=!0,this.settings.streaming.cmcd.mode="query"):this.settings.streaming.cmcd.enabled=!1}NewPlayerSettings(t){return new ev(t)}}class nv extends tv{getCMCD(){return null!=this.settings.cmcd}setCMCD(t){t?this.settings.cmcd={useHeaders:!1}:delete this.settings.cmcd}NewPlayerSettings(t){return new nv(t)}}let rv=(()=>{class t{constructor(t){this.formBuilder=t,this.submitPlayerOptionsEvent=new pu,this.resetPlayerOptionsEvent=new pu,this.activeForm="simple"}ngOnChanges(t){t.settings&&this.settings&&this.optionsJsonForm&&this.optionsJsonForm.patchValue({json:Object(Zy.stringify)(this.settings.getPlayerConfig(),null,"  "),cmcd:this.settings.getCMCD()})}enableCard(t){const e=`#${t}ConfigButton`,n=`#${t}Input`;$(e).removeClass("btn-secondary"),$(e).addClass("btn-primary"),$(n).removeClass("d-none")}disableCard(t){const e=`#${t}ConfigButton`,n=`#${t}Input`;$(e).removeClass("btn-primary"),$(e).addClass("btn-secondary"),$(n).addClass("d-none")}ngOnInit(){const t=this.settings.getCMCD();this.optionsJsonForm=this.formBuilder.group({cmcd:t,json:Object(Zy.stringify)(this.settings.getPlayerConfig(),null,"  ")})}showSimpleOptions(){this.enableCard("simple"),this.disableCard("JSON"),this.activeForm="simple"}showJSONOptions(){this.disableCard("simple"),this.enableCard("JSON"),this.activeForm="JSON"}onSubmitPlayerOptions(t){let e;try{e=Object(Zy.parse)(t.json)}catch(r){return this.alertMessage="Invalid JSON input. See console.",this.alertType="danger",void console.error(r)}const n=this.settings.NewPlayerSettings(e);try{"simple"==this.activeForm&&n.setCMCD(t.cmcd)}catch(r){return this.alertMessage="Unable to update configuration. See console.",this.alertType="danger",void console.error(r)}try{this.submitPlayerOptionsEvent.emit(n),this.alertMessage="Configuration updated.",this.alertType="success",setTimeout(()=>this.closeAlert(),3e3)}catch(r){this.alertMessage="Invalid configuration. See console.",this.alertType="warning",console.error(r)}}resetPlayerOptions(){console.log("Reset player options. "),this.resetPlayerOptionsEvent.emit()}closeAlert(){this.alertMessage=null,this.alertType=null}}return t.\u0275fac=function(e){return new(e||t)(fs(hm))},t.\u0275cmp=he({type:t,selectors:[["player-options"]],inputs:{settings:"settings"},outputs:{submitPlayerOptionsEvent:"submitPlayerOptionsEvent",resetPlayerOptionsEvent:"resetPlayerOptionsEvent"},features:[Oe],decls:23,vars:2,consts:[[1,"card","h-100","w-100",2,"display","flex","flex-direction","column"],[1,"card-header"],[1,"row"],[1,"col-md-8","col-lg-10","text-left"],["role","group",1,"col-md-4","col-lg-2","btn-group"],["type","button","id","simpleConfigButton",1,"btn","btn-primary","btn-sm",3,"click"],["type","button","id","JSONConfigButton",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"card-body","w-100","player-options-card-body"],[1,"w-100","player-options-card-form",3,"formGroup","ngSubmit"],["style","flex-grow: 0",3,"type","close",4,"ngIf"],["id","simpleInput",1,"text-left","form-control","form-group","checkbox"],["type","checkbox","formControlName","cmcd",2,"margin-right","8px"],["id","JSONInput","formControlName","json","rows","10",1,"form-control","d-none",2,"flex-grow","6"],["role","group",1,"btn-group","float-right","mt-3",2,"align-self","flex-end","flex-grow","0"],["type","button",1,"btn","btn-primary",3,"click"],["type","submit",1,"btn","btn-primary"],[2,"flex-grow","0",3,"type","close"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"div",2),ms(3,"div",3),Qs(4," Player Options "),ys(),ms(5,"div",4),ms(6,"button",5),ws("click",(function(){return e.showSimpleOptions()})),Qs(7," Simple "),ys(),ms(8,"button",6),ws("click",(function(){return e.showJSONOptions()})),Qs(9," JSON "),ys(),ys(),ys(),ys(),ms(10,"div",7),ms(11,"form",8),ws("ngSubmit",(function(){return e.onSubmitPlayerOptions(e.optionsJsonForm.value)})),cs(12,Jy,2,2,"ngb-alert",9),ms(13,"div",10),ms(14,"label"),vs(15,"input",11),Qs(16," Enable Common Media Client Data (CMCD) "),ys(),ys(),vs(17,"textarea",12),ms(18,"div",13),ms(19,"button",14),ws("click",(function(){return e.resetPlayerOptions()})),Qs(20,"Reset"),ys(),ms(21,"button",15),Qs(22,"Save"),ys(),ys(),ys(),ys(),ys()),2&t&&(di(11),ps("formGroup",e.optionsJsonForm),di(1),ps("ngIf",null!=e.alertMessage))},directives:[em,dg,im,ic,tg,cg,dm,rg,zm],styles:[".player-options-card-body[_ngcontent-%COMP%]{align-self:flex-end;flex-grow:1;height:100%}.player-options-card-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;flex-grow:1;height:100%}"]}),t})();function iv(t,e){if(1&t){const t=Es();ms(0,"player-options",5),ws("submitPlayerOptionsEvent",(function(e){return en(t),Cs().submitPlayerOptions(e)}))("resetPlayerOptionsEvent",(function(){return en(t),Cs().resetPlayerOptions()})),ys()}2&t&&ps("settings",Cs().settings)}let av=(()=>{class t extends Wy{constructor(){super(...arguments),this.name="hls.js"}get settings(){return null==this.hlsJsSettings&&(this.hlsJsSettings=new nv(Object(Zy.parse)(Object(Zy.stringify)(Qy.a.DefaultConfig))),this.hlsJsSettings.setCMCD(!0)),this.hlsJsSettings}set settings(t){new Qy.a(t.getPlayerConfig()).destroy(),this.hlsJsSettings=t}newPlayer(t,e=!1){this.hls&&this.hls.destroy();const n=this.settings.getPlayerConfig();this.settings.getCMCD()&&(n.cmcd.contentId=t),n.xhrSetup=function(t,n){t.withCredentials=e},this.hls=new Qy.a(n);let r=this;this.hls.on(Qy.a.Events.ERROR,(function(t,e){r.errors.push(e.type)})),this.hls.on(Qy.a.Events.FRAG_LOADED,(function(t,e){const n=e.frag.stats,i=n.loading.end-n.loading.start;r.downloadedFrags.push({url:e.frag.url,startTime:Date.now()-i,duration:i})}))}playUrl(t,e,n=!1){this.newPlayer(e,n);let r=this.hls,i=this.video;function a(t,e){i.nativeElement.play()}r.once(Qy.a.Events.MEDIA_ATTACHED,(function(){r.once(Qy.a.Events.MANIFEST_PARSED,a),r.loadSource(t)})),r.attachMedia(this.video.nativeElement)}stop(){this.hls.destroy()}getPlayerInfo(){return{name:this.name,version:Qy.a.version}}getStatistics(){let t={basicStats:{}};return t.basicStats.errorLogs=this.errors,this.errors=[],this.hls.currentLevel>=0&&null!=this.hls.levels[this.hls.currentLevel]&&(t.basicStats.currentBitrate=this.hls.levels[this.hls.currentLevel].bitrate),t.advancedStats={},t.advancedStats.measuredThroughput=this.hls.bandwidthEstimate,t.advancedStats.resourceDownloadEvents=this.downloadedFrags,this.downloadedFrags=[],t.generalStats={},null!=this.hls.levels&&(t.generalStats.availableBitRates=this.hls.levels.map(t=>t.bitrate),t.generalStats.bitrateResolutions=this.hls.levels.map(t=>({height:t.height,width:t.width}))),this.hls.currentLevel>=0&&null!=this.hls.levels[this.hls.currentLevel]&&(t.generalStats.segmentLength=this.hls.levels[this.hls.currentLevel].details.targetduration),t.generalStats.separateAudioVideo=this.hls.audioTracks.length>0,t}submitPlayerOptions(t){this.settings=t}resetPlayerOptions(){this.settings=void 0}}return t.\u0275fac=function(e){return sv(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-hlsjs"]],features:[no],decls:5,vars:1,consts:[[1,"hls-container"],["class","player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent",4,"ngIf"],[1,"player","w-100","pl-0","pr-0"],["controls","","width","100%","id","video","muted","",2,"background","black"],["video",""],[1,"player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent"]],template:function(t,e){1&t&&(ms(0,"div",0),cs(1,iv,1,1,"player-options",1),ms(2,"div",2),vs(3,"video",3,4),ys(),ys()),2&t&&(di(1),ps("ngIf",e.showOptions))},directives:[ic,rv],styles:[""]}),t})();const sv=lr(av);var ov=n("Yvhy"),uv=n.n(ov);function lv(t,e){if(1&t){const t=Es();ms(0,"player-options",5),ws("submitPlayerOptionsEvent",(function(e){return en(t),Cs().submitPlayerOptions(e)}))("resetPlayerOptionsEvent",(function(){return en(t),Cs().resetPlayerOptions()})),ys()}2&t&&ps("settings",Cs().settings)}let cv=(()=>{class t extends Wy{constructor(){super(...arguments),this.name="dash.js"}get settings(){return void 0===this.dashJsConfig&&(this.dashJsConfig=new ev(this.dash.getSettings()),this.dashJsConfig.setCMCD(!0)),this.dashJsConfig}set settings(t){this.dashJsConfig=t}newPlayer(){if(this.dash)try{this.dash.reset()}catch(t){}this.dash=uv.a.MediaPlayer().create(),this.dash.setAutoPlay(!1),this.dash.on("error",t=>{this.errors.push(JSON.stringify(t))})}playUrl(t,e,n=!1){this.newPlayer(),this.dash.updateSettings(this.settings.getPlayerConfig()),this.settings.getCMCD()&&this.dash.updateSettings({streaming:{cmcd:{cid:e}}}),this.dash.setXHRWithCredentialsForType(void 0,n),this.dash.initialize(this.video.nativeElement),this.dash.attachSource(t)}stop(){this.dash.reset()}getPlayerInfo(){return{name:this.name,version:this.dash.getVersion()}}getStatistics(){const t=this.dash.getBitrateInfoListFor("video");let e={basicStats:{}};e.basicStats.errorLogs=this.errors,this.errors=[];const n=this.dash.getQualityFor("video");return n>=0&&t[n]&&(e.basicStats.currentBitrate=t[n].bitrate),e.advancedStats={},e.advancedStats.measuredThroughput=this.dash.getAverageThroughput(),e.generalStats={},t.length>0&&(e.generalStats.availableBitRates=t.map(t=>t.bitrate),e.generalStats.bitrateResolutions=t.map(t=>({height:t.height,width:t.width}))),e.generalStats.separateAudioVideo=this.dash.getBitrateInfoListFor("audio").length>0,e}submitPlayerOptions(t){null!=t&&(this.settings=t)}resetPlayerOptions(){this.dash.resetSettings(),this.dashJsConfig=void 0}}return t.\u0275fac=function(e){return dv(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-dashjs"]],features:[no],decls:5,vars:1,consts:[[1,"dash-container","pl-0","pr-0","player-container"],["class","player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent",4,"ngIf"],[1,"player","w-100","pl-0","pr-0"],["controls","","width","100%","id","video","muted","",2,"background","black"],["video",""],[1,"player-options",3,"settings","submitPlayerOptionsEvent","resetPlayerOptionsEvent"]],template:function(t,e){1&t&&(ms(0,"div",0),cs(1,lv,1,1,"player-options",1),ms(2,"div",2),vs(3,"video",3,4),ys(),ys()),2&t&&(di(1),ps("ngIf",e.showOptions))},directives:[ic,rv],styles:[".player-container[_ngcontent-%COMP%]{position:relative}.player-options[_ngcontent-%COMP%]{width:100%;height:500px;left:0;top:0;bottom:500px;opacity:1}"]}),t})();const dv=lr(cv);var fv=n("KjvB");function hv(t,e){if(1&t){const t=Es();ms(0,"ngb-alert",1),ws("close",(function(){return en(t),Cs().close()})),ms(1,"strong"),Qs(2,"Error!"),ys(),Qs(3),ys()}if(2&t){const t=Cs();ps("dismissible",!0),di(3),Js(" ",t.reason," ")}}let pv=(()=>{class t{constructor(){this.isAlertDismissed=!0,this.reason=""}ngOnChanges(t){void 0!==this.badUrlMsg.reason&&(this.reason=this.badUrlMsg.reason,this.isAlertDismissed=!1)}close(){this.isAlertDismissed=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["bad-url-alert"]],inputs:{badUrlMsg:"badUrlMsg"},features:[Oe],decls:2,vars:1,consts:[["type","danger",3,"dismissible","close",4,"ngIf"],["type","danger",3,"dismissible","close"]],template:function(t,e){1&t&&(ms(0,"p"),cs(1,hv,4,2,"ngb-alert",0),ys()),2&t&&(di(1),ps("ngIf",!e.isAlertDismissed))},directives:[ic,zm],encapsulation:2}),t})();function gv(t,e){if(1&t){const t=Es();ms(0,"li",19),ws("click",(function(){en(t);const n=e.$implicit;return Cs().onPlayerSubmit(n)})),Qs(1),ys()}if(2&t){const t=e.$implicit;di(1),Zs(t.name)}}function mv(t,e){if(1&t){const t=Es();ms(0,"li",19),ws("click",(function(){en(t);const n=e.$implicit;return Cs(),ds(23).value=n.url})),Qs(1),ys()}if(2&t){const t=e.$implicit;di(1),Zs(t.name)}}function yv(t,e){if(1&t){const t=Es();ms(0,"li",19),ws("click",(function(){en(t);const n=e.$implicit;return Cs(),ds(23).value=n.url})),Qs(1),ys()}if(2&t){const t=e.$implicit;di(1),Zs(t.name)}}function vv(t,e){1&t&&(An(),Qe.lFrame.currentNamespace=null,ms(0,"div"),An(),ms(1,"svg",26),vs(2,"path",27),vs(3,"path",28),ys(),Qs(4," Copied to clipboard "),ys())}function _v(t,e){if(1&t){const t=Es();ms(0,"div",1),ms(1,"div",2),vs(2,"input",20),ys(),ms(3,"div",6),ms(4,"button",21),ws("click",(function(){en(t);const e=Cs();return e.copyMessage(e.sharableLink)})),An(),ms(5,"svg",22),vs(6,"path",23),vs(7,"path",24),ys(),ys(),ys(),ys(),cs(8,vv,5,0,"div",25)}if(2&t){const t=Cs();di(2),Os("value",t.sharableLink),di(6),ps("ngIf",t.linkCopied)}}function bv(t,e){1&t&&Qs(0,"Share link")}function Ev(t,e){if(1&t){const t=Es();ms(0,"button",29),ws("click",(function(){en(t);const e=Cs();return e.copyMessage(e.sharableLink)})),Qs(1," Share "),ys()}if(2&t){Cs();const t=ds(26),e=ds(28);ps("autoClose","outside")("ngbPopover",t)("popoverTitle",e)}}const Tv=n("tcQk");let Sv=(()=>{class t{constructor(t,e,n){this.router=t,this.activatedRoute=e,this.location=n,this.streamChangeEvent=new pu,this.playerChangeEvent=new pu,this.showPlayerOptionsEvent=new pu,this.badUrlMsg={reason:void 0,counter:0},this.showSharableLink=!1,this.linkCopied=!1,this.players=[{name:"hls.js",type:"hlsjs",stream_types:["hls"]},{name:"dash.js",type:"dashjs",stream_types:["dash"]}]}onStreamSubmit(){const e=$("#selectedstream").val();let n,r=!1,i="";try{n=new URL(e),t.loadedUsingHTTPS()&&"http:"==n.protocol?i="Cannot play HTTP stream from HTTPS page due to Content Security Policy. Reload players.akamai.com via HTTP.":r=!0}catch(a){i="URL cannot be parsed"}if(r){const t=encodeURIComponent(n.href);this.location.go("players/"+this.currentPlayer,"streamUrl="+t),this.streamChangeEvent.emit(e),this.sharableLink=window.location.href,this.showSharableLink=!0}else this.badUrlMsg={reason:`Cannot play URL "${e}": ${i}`,counter:this.badUrlMsg.counter+1}}onPlayerSubmit(t){this.currentVodStreams=[],this.currentLiveStreams=[];for(const r of t.stream_types)this.currentVodStreams.push(...Tv[r].VOD),this.currentLiveStreams.push(...Tv[r].LIVE);this.currentPlayer=t.type,$("#players").html(t.name),$("#streams").prop("disabled",!1),$("#selectedstream").prop("disabled",!1);let e="";const n=this.activatedRoute.snapshot.queryParamMap.get("streamUrl");null!=n&&(e=decodeURIComponent(n)||""),$("#selectedstream").val(e),$("#playButton").prop("disabled",!1),"dashjs"==t.type||"hlsjs"==t.type?$("#playerOptionsButton").prop("disabled",!1):$("#playerOptionsButton").prop("disabled",!0),this.showPlayerOptions(!1),this.playerChangeEvent.emit(t.type)}ngOnChanges(t){if(null!=t.setPlayer)for(const e of this.players)e.type==this.setPlayer&&this.onPlayerSubmit(e)}toggleShowPlayerOptions(){this.showPlayerOptions(!this.showPlayerOptionsOverlay)}showPlayerOptions(t){this.showPlayerOptionsOverlay=t,this.showPlayerOptionsEvent.emit(t),this.showPlayerOptionsOverlay?($("#playerOptionsButton").removeClass("btn-primary"),$("#playerOptionsButton").addClass("btn-secondary"),$("#playerOptionsButton").text("Hide options")):($("#playerOptionsButton").removeClass("btn-secondary"),$("#playerOptionsButton").addClass("btn-primary"),$("#playerOptionsButton").text("Player options"))}copyMessage(t){const e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=t,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.linkCopied=!0,setTimeout(()=>{this.linkCopied=!1},5e3)}static loadedUsingHTTPS(){return"https:"==document.location.protocol}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp),fs(fh),fs(Kl))},t.\u0275cmp=he({type:t,selectors:[["app-selector"]],inputs:{setPlayer:"setPlayer"},outputs:{streamChangeEvent:"streamChangeEvent",playerChangeEvent:"playerChangeEvent",showPlayerOptionsEvent:"showPlayerOptionsEvent"},features:[Oe],decls:36,vars:5,consts:[[1,"row","my-2"],[1,"input-group"],[1,"input-group-prepend"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","id","players",1,"btn","btn-primary","dropdown-toggle",2,"width","150px !important"],["aria-labelledby","players",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"input-group-append"],["id","playerOptionsButton","disabled","",1,"btn","btn-primary",2,"width","150px !important",3,"click"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","id","streams","disabled","",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","streams",1,"dropdown-menu"],[1,"dropdown-item","disabled"],["id","selectedstream","type","text","placeholder","Input stream URL","aria-label","Text input with dropdown button","disabled","",1,"form-control"],["selectedstream",""],["popContent",""],["popTitle",""],["type","button","class","btn btn-secondary","placement","bottom",3,"autoClose","ngbPopover","popoverTitle","click",4,"ngIf"],["id","playButton","disabled","",1,"btn","btn-primary",3,"click"],[1,"w-100"],[3,"badUrlMsg"],[1,"dropdown-item",3,"click"],["type","text","readonly","",1,"form-control","form-rounded-left",3,"value"],["type","button",1,"btn","btn-secondary",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","black","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-clipboard"],["fill-rule","evenodd","d","M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"],["fill-rule","evenodd","d","M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"],[4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","green","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-check-circle"],["fill-rule","evenodd","d","M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["fill-rule","evenodd","d","M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"],["type","button","placement","bottom",1,"btn","btn-secondary",3,"autoClose","ngbPopover","popoverTitle","click"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"div",2),ms(3,"button",3),Qs(4," Select player "),ys(),ms(5,"ul",4),cs(6,gv,2,1,"li",5),ys(),ys(),ms(7,"div",6),ms(8,"button",7),ws("click",(function(){return e.toggleShowPlayerOptions()})),Qs(9,"Player options"),ys(),ys(),ms(10,"div",2),ms(11,"button",8),Qs(12,"Select stream"),ys(),ms(13,"ul",9),ms(14,"li",10),ms(15,"b"),Qs(16,"VOD Streams"),ys(),ys(),cs(17,mv,2,1,"li",5),ms(18,"li",10),ms(19,"b"),Qs(20,"LIVE Streams"),ys(),ys(),cs(21,yv,2,1,"li",5),ys(),ys(),vs(22,"input",11,12),ms(24,"div",2),cs(25,_v,9,2,"ng-template",null,13,Lu),cs(27,bv,1,0,"ng-template",null,14,Lu),cs(29,Ev,2,3,"button",15),ys(),ms(30,"div",6),ms(31,"button",16),ws("click",(function(){return e.onStreamSubmit()})),Qs(32,"Play stream"),ys(),ys(),ys(),ys(),ms(33,"div",0),ms(34,"div",17),vs(35,"bad-url-alert",18),ys(),ys()),2&t&&(di(6),ps("ngForOf",e.players),di(11),ps("ngForOf",e.currentVodStreams),di(4),ps("ngForOf",e.currentLiveStreams),di(8),ps("ngIf",e.showSharableLink),di(6),ps("badUrlMsg",e.badUrlMsg))},directives:[nc,ic,pv,Ry],styles:[""]}),t})();class wv{static isSafari(){const t=navigator.userAgent.toLowerCase();return t.indexOf("safari")>-1&&-1==t.indexOf("chrome")}}function Av(t,e){if(1&t){const t=Es();ms(0,"ngb-alert",1),ws("close",(function(){return en(t),Cs().close()})),Qs(1," Error! Token Authentication is currently not supported on Safari browsers. "),ys()}2&t&&ps("dismissible",!0)}let xv=(()=>{class t{constructor(){this.isAlertDismissed=!1,this.isSafari=wv.isSafari()}ngOnChanges(t){t.hasAmdStyleTokenAuth&&(this.isAlertDismissed=!1)}close(){this.isAlertDismissed=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["safari-token-auth-alert"]],inputs:{hasAmdStyleTokenAuth:"hasAmdStyleTokenAuth"},features:[Oe],decls:2,vars:1,consts:[["type","danger",3,"dismissible","close",4,"ngIf"],["type","danger",3,"dismissible","close"]],template:function(t,e){1&t&&(ms(0,"p"),cs(1,Av,2,1,"ngb-alert",0),ys()),2&t&&(di(1),ps("ngIf",e.isSafari&&!e.isAlertDismissed&&e.hasAmdStyleTokenAuth))},directives:[ic,zm],encapsulation:2}),t})(),Cv=(()=>{class t{constructor(){}ngOnChanges(t){this.info=null==this.playerInfo?{name:"No player loaded",version:""}:{name:this.playerInfo.name,version:this.playerInfo.version}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-player-info"]],inputs:{playerInfo:"playerInfo"},features:[Oe],decls:20,vars:2,consts:[[1,"container-fluid","card"],[1,"card-header","row"],[1,"col-12"],[1,"card-body","row","p-0"],[1,"col-12","p-0","m-0"],[1,"table","table-sm"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"div",2),Qs(3," Player Info "),ys(),ys(),ms(4,"div",3),ms(5,"div",4),ms(6,"table",5),ms(7,"tbody"),ms(8,"tr"),ms(9,"th"),ms(10,"i"),Qs(11,"Name"),ys(),ys(),ms(12,"th"),ms(13,"i"),Qs(14,"Version"),ys(),ys(),ys(),ms(15,"tr"),ms(16,"td"),Qs(17),ys(),ms(18,"td"),Qs(19),ys(),ys(),ys(),ys(),ys(),ys(),ys()),2&t&&(di(17),Js(" ",e.info.name," "),di(2),Js(" ",e.info.version," "))},styles:[""]}),t})();function Dv(t,e){if(1&t&&(ms(0,"tr"),ms(1,"td"),Qs(2),ys(),ms(3,"td"),Qs(4),ys(),ys()),2&t){const t=e.$implicit;di(2),Zs(t.first),di(2),Zs(t.second)}}function Iv(t,e){if(1&t&&(ms(0,"tr",12),ms(1,"td",12),Qs(2),ys(),ms(3,"td",12),Qs(4),ys(),ys()),2&t){const t=e.$implicit;di(2),Zs(t.rate),di(2),Zs(t.resolution)}}function Rv(t,e){if(1&t&&(_s(0),ms(1,"table",10),ms(2,"tbody"),cs(3,Iv,5,2,"tr",11),ys(),ys(),bs()),2&t){const t=Cs(2);di(3),ps("ngForOf",t.bitrates)}}function Ov(t,e){1&t&&(_s(0),Qs(1," No bitrates found "),bs())}function Pv(t,e){if(1&t&&(_s(0),ms(1,"div",1),ms(2,"div",2),ms(3,"div",3),Qs(4," General Statistics "),ys(),ys(),ms(5,"div",4),ms(6,"div",5),ms(7,"table",6),ms(8,"tbody"),cs(9,Dv,5,2,"tr",7),ms(10,"tr"),ms(11,"td",8),Qs(12,"Available Bitrate "),vs(13,"br"),Qs(14," (Mbps) / resolution: "),ys(),ms(15,"td",9),cs(16,Rv,4,1,"ng-container",0),cs(17,Ov,2,0,"ng-container",0),ys(),ys(),ys(),ys(),ys(),ys(),ys(),bs()),2&t){const t=Cs();di(9),ps("ngForOf",t.stats),di(7),ps("ngIf",t.bitrates.length>0),di(1),ps("ngIf",0==t.bitrates.length)}}let Mv=(()=>{class t{constructor(){}ngAfterViewInit(){this.formatGeneralStats({})}ngOnChanges(t){this.formatGeneralStats(this.generalStats)}formatGeneralStats(t){this.foundAny=!1,this.stats=[],this.bitrates=[];let e="No segment length found";t&&t.segmentLength&&(this.foundAny=!0,e=t.segmentLength+"s"),this.stats.push({first:"Segment length:",second:e});let n="N/A";t&&void 0!==t.separateAudioVideo&&(this.foundAny=!0,n=t.separateAudioVideo.toString()),this.stats.push({first:"Separate Audio/Video:",second:n}),t&&t.availableBitRates&&t.availableBitRates.forEach((e,n)=>{this.foundAny=!0;const r=(e/1e6).toFixed(2),i=t.bitrateResolutions[n];this.bitrates.push({rate:r,resolution:i.height+"x"+i.width})})}clearStats(){this.formatGeneralStats({})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-general-stats"]],inputs:{generalStats:"generalStats"},features:[Oe],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","card"],[1,"card-header","row"],[1,"col-12"],[1,"card-body","row","p-0"],[1,"col-12","p-0","m-0"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[1,"my-0","py-0"],[1,"m-0","p-0"],[1,"table","table-sm","table-borderless","mb-0"],["class","py-0 my-0",4,"ngFor","ngForOf"],[1,"py-0","my-0"]],template:function(t,e){1&t&&cs(0,Pv,18,3,"ng-container",0),2&t&&ps("ngIf",1==e.foundAny)},directives:[ic,nc],styles:[""]}),t})(),Lv=(()=>{class t{constructor(e,n,r){this.groupId=e,this.title=n,this.columns=new Map,this.dataLabel="",this.dataSetLabels=[],this.plotIDNum=t.plotIDNum++,this.options=this.setDefaultOptions(r)}static resetPlotIDNum(){this.plotIDNum=0}clear(){this.columns.clear(),this.maxKey=void 0}getGroupID(){return this.groupId}getDescription(){return this.options.description}setDescription(t){this.options.description=t}setDataSetLabel(t,e){return this.dataSetLabels[t]=e,this}setDataLabel(t){return this.dataLabel=t,this}isEmpty(){return 0===this.columns.size}getDataLabel(){return this.dataLabel}reduceDimensions(t,e,n){let r=-1,i=0;if(t.length>0){const n=t[0].length-1,a=new Array(n).fill(0);for(let e=0;e<t.length;e++)for(let r=1;r<=n;r++){const n=t[e][r];null!=t[e][r]&&(a[r-1]+=n)}const s=a.reduce((t,e)=>t+e);a.forEach((a,o)=>{null!=this.options.thresholdForDimensions&&a/s<this.options.thresholdForDimensions.countPercentage&&n>=this.options.thresholdForDimensions.minDimensions&&(-1==r?(r=o+1,e[o]="Others"):(t.forEach((e,n)=>{t[n][r]+=t[n][o+1-i],t[n].splice(o+1-i,1)}),e.splice(o-i,1),i+=1))})}if(0!=t.length&&n){const e=t[0].length-1,n=new Array(e).fill(0);for(let r=0;r<t.length;r++)for(let i=0;i<e;i++)n[i]+=t[r][i+1];for(let r=0;r<t.length;r++)for(let i=0;i<e;i++)t[r][i+1]/=n[i]}}getDataSetLabels(t){for(let e=0;e<t;e++)null==this.dataSetLabels[e]&&(this.dataSetLabels[e]=this.dataLabel+e);return this.dataSetLabels.slice(0,t)}updateValue(t,e,n,r){if(null==t)throw new Error("Columns cannot be changed at undefined column with value: "+e);if(!isFinite(e))throw new Error(`Columns cannot be changed by infinite value ${e} for column ${t}`);if("number"==typeof t&&!isFinite(t))throw new Error("Columns cannot be changed at infinite column: "+t);let i=this.columns.get(t);null==i&&(i=[]),null!=i[n]&&r?i[n]+=e:i[n]=e,this.columns.set(t,i),(null==this.maxKey||this.maxKey<t)&&(this.maxKey=t)}setValue(t,e,n=0){this.updateValue(t,e,n,!1)}accumValue(t,e,n=0){this.updateValue(t,e,n,!0)}incrValue(t,e=0){this.accumValue(t,1,e)}getMaxValue(){let t=-1/0;return this.columns.forEach(e=>{e.forEach(e=>{t=Math.max(e,t)})}),t}getColumns(){return this.columns}getTitle(){return this.title}isNumberArray(t){return Array.isArray(t)&&t.length>0&&"number"==typeof t[0]}static sortChartsOnTitle(t){const e=Array.from(t.values());return e.sort((t,e)=>t.getTitle()||e.getTitle()?t.getTitle()?e.getTitle()?t.getTitle().localeCompare(e.getTitle()):1:-1:0),e}static printHTMLTable(t){let e=`<summary>${t.label}</summary>${t.summary}<table class='${t.htmlClass}'>`;return t.table.forEach((t,n)=>{0==n?(e+="<thead><tr>",t.forEach(t=>{e+="<th>"+t+"</th>"}),e+="</tr></thead><tbody>"):(e+="<tr>",t.forEach(t=>{e+="<td>"+t+"</td>"}),e+="</tr>")}),e+="</tbody></table><br>",e}}return t.plotIDNum=0,t})();class Nv extends Lv{constructor(t,e,n={}){super(t,e,n),this.annotations=[],this.plotIDNum=Nv.plotIDNum++}setDefaultOptions(t){return Object.assign(Object.assign({xlabel:"Time",ylabel:void 0,syncID:void 0,description:"",maxSampleTime:NaN,height:300,showLegend:!0,timeBin:1e3},t),{dygraphOptions:Object.assign({stackedGraph:!1,drawPoints:!0,axes:{y:{axisLabelWidth:75,maxNumberWidth:5}}},t.dygraphOptions)})}clear(){super.clear(),this.annotations=[]}getSyncPlot(){let t=0;const e=[],n=this.getColumns(),r=Array.from(n.keys()).sort((t,e)=>t-e);let i;for(let o=0;o<r.length;o++){const a=r[o],s=n.get(a);if(null==s)throw new Error("Map was empty at key");for(t=Math.max(t,s.length);null!=i&&!isNaN(this.options.maxSampleTime)&&a>i+this.options.maxSampleTime;){const t=i+this.options.maxSampleTime;e.push([t]),i=t}const u=[];e.push(u),u[0]=a;for(let t=0;t<s.length;t++){const e=s[t];null!=u[t+1]&&console.error("Multiple values written to same cell"),u[t+1]=e}i=a}for(let o=0;o<e.length;o++)for(let n=1;n<=t;n++)null==e[o][n]&&(e[o][n]=null);const a=[this.options.xlabel].concat(this.getDataSetLabels(t)),s=null!=this.options.dygraphOptions.stackedGraph&&this.options.dygraphOptions.stackedGraph;return{groupID:this.groupId,id:"timeSync"+this.plotIDNum,syncID:this.options.syncID,plotType:"timeSeries",synchronizedPlots:[Object.assign(Object.assign({},{labels:a,dataRows:e}),{isStacked:s,heading:this.getTitle(),xlabel:this.options.xlabel,ylabel:this.options.ylabel,dygraphOptions:this.options.dygraphOptions,showLegend:this.options.showLegend,annotations:this.annotations,description:this.options.description,id:"time"+this.plotIDNum,height:this.options.height})],synchronizedOnlyXAxis:!0}}addAnnotation(t){this.annotations.push(t)}}var kv=n("LV99");class Fv{constructor(){this.graphs=new Map}resize(){this.graphs.forEach(t=>{t.resize()})}}let Bv=(()=>{class t extends Fv{constructor(t){super(),this.parentElement=t}plot(e){e.forEach(e=>{const n=t.ELEMENT_ID_COUNTER++,r=document.createElement("h2");r.innerHTML=e.heading;const i=document.createElement("div"),a=`c3${this.plotType}Plot${n}`;if(i.setAttribute("id",a),this.parentElement.appendChild(r),this.parentElement.appendChild(i),null!=e.description){const t=document.createElement("div");t.setAttribute("id","description"+n),t.innerHTML+=e.description+"<br>\n",this.parentElement.appendChild(t)}let s;s=e.isStacked?[e.labels.slice(1)]:e.labels.slice(1).map(t=>[t]);const o=this.plotSingle(e,s,a);this.graphs.set(e.heading,kv.generate(o))})}update(t){let e=0;this.graphs.forEach(n=>{this.updateSingle(t[e],n),e++})}clear(){this.graphs.forEach(t=>{t.load({columns:[]})})}}return t.ELEMENT_ID_COUNTER=1,t})();class jv extends Bv{constructor(t){super(t),this.parentElement=t,this.plotType="bar"}plotSingle(t,e,n){const r=t.dataRows.map(t=>t.slice(1));r.unshift(t.labels);let i=[];null!=t.categories&&(i=t.categories.slice());const a={bindto:"#"+n,size:{height:t.height},data:{rows:r,groups:e,type:"bar"},bar:{width:{ratio:1}},axis:{x:{type:"category",categories:i,label:t.xlabel},y:{label:t.ylabel}}};return 0==t.showLegend&&(a.legend={show:!1}),a}updateSingle(t,e){const n=t.dataRows[0].map((e,n)=>t.dataRows.map(t=>t[n])).slice(1);e.load({columns:n})}}var Uv=n("Cnnb");let Vv=(()=>{class t extends Fv{constructor(t,e={}){super(),this.parentElement=t,this.options=e,this.rows=new Map,this.labels=new Map,this.dateWindow=[1/0,0],this.annotations=new Map}updateDateWindow(t){for(const e of t)e.dataRows.length>0&&(this.dateWindow[0]=Math.min(this.dateWindow[0],e.dataRows[0][0]),this.dateWindow[1]=Math.max(this.dateWindow[1],e.dataRows[e.dataRows.length-1][0]))}plot(t){this.updateDateWindow(t),this.synchronize(t.map(t=>this.plotSynchronized(t)),this.options)}plotSynchronized(e){this.rows.set(e.heading,e.dataRows),this.labels.set(e.heading,e.labels),this.annotations.set(e.heading,e.annotations);const n=t.ELEMENT_ID_COUNTER++,r=document.createElement("h2");r.innerHTML=e.heading;const i=document.createElement("div"),a="dygraphPlot"+n;i.setAttribute("id",a),i.setAttribute("style","height: 250px;");const s=document.createElement("div"),o="dygraphLabel"+n;s.setAttribute("id",o),s.setAttribute("class","digraph-legend");const u=document.createElement("div");u.setAttribute("style","height: 2em;"),u.appendChild(s);const l=document.createElement("div");if(l.appendChild(r),l.appendChild(i),l.appendChild(i),l.appendChild(u),null!=e.description){const t=document.createElement("div");t.setAttribute("id","description"+e.id),t.innerHTML+=e.description+"<br><br>\n",l.appendChild(t)}this.parentElement.appendChild(l);const c={};null!=e.axes&&e.axes.forEach((t,n)=>{c[e.labels[n+1]]={axis:t}}),null==e.dygraphOptions.axes&&(e.dygraphOptions.axes={}),null==e.dygraphOptions.axes.x&&(e.dygraphOptions.axes.x={}),null==e.dygraphOptions.axes.x.axisLabelFormatter&&(e.dygraphOptions.axes.x.axisLabelFormatter=(t,e,n)=>Uv.default.dateAxisLabelFormatter(new Date(t),e,n)),null==e.dygraphOptions.axes.x.valueFormatter&&(e.dygraphOptions.axes.x.valueFormatter=(t,e)=>Uv.default.dateString_(t,e("labelsUTC"))),null==e.dygraphOptions.axes.x.ticker&&(e.dygraphOptions.axes.x.ticker=(t,e,n,r,i,a)=>Uv.default.dateTicker(t,e,n,r,i,a));const d=new Uv.default(a,e.dataRows,Object.assign(Object.assign({colors:["red","green","blue","purple","orange"],labelsUTC:!0,highlightCircleSize:e.dygraphOptions.drawPoints?7:2,strokeWidth:e.dygraphOptions.drawPoints?0:1,strokeBorderWidth:e.isStacked?void 0:1,labels:e.labels,xlabel:e.xlabel,ylabel:e.ylabel,labelsDiv:o,series:c,showLabelsOnHighlight:e.showLegend,dateWindow:this.dateWindow},e.dygraphOptions),{drawCallback:function(t,n){n&&null!=e.annotations&&e.annotations.length>0&&t.setAnnotations(e.annotations)}}));return this.graphs.set(e.heading,d),d}update(t){this.updateDateWindow(t),t.forEach(t=>{if(this.graphs.has(t.heading)){const e=this.graphs.get(t.heading);this.rows.get(t.heading).push(...t.dataRows);const n=this.labels.get(t.heading);if(n.length<t.labels.length&&(n.push(...t.labels.slice(n.length)),this.rows.get(t.heading).forEach(e=>{e.length=t.labels.length})),null!=t.description){const e=document.getElementById("description"+t.id);null!=e?e.innerHTML=t.description+"<br><br>\n":console.error("Couldn't find description element with id: description"+t.id)}if(t.dataRows.forEach(t=>{const e=t[0];this.dateWindow[0]=Math.min(this.dateWindow[0],e),this.dateWindow[1]=Math.max(this.dateWindow[1],e)}),e.updateOptions({file:this.rows.get(t.heading),labels:n,dateWindow:this.dateWindow}),null!=t.annotations&&t.annotations.length>0){let n=this.annotations.get(t.heading);null==n&&(n=[],this.annotations.set(t.heading,n)),n.push(...t.annotations),e.setAnnotations(n,!0)}}else this.plotSynchronized(t),this.synchronize(Array.from(this.graphs.values()),this.options)})}clear(){this.dateWindow=[1/0,0],this.rows.forEach((t,e)=>{this.rows.set(e,[])}),this.labels.forEach((t,e)=>{this.labels.set(e,[])}),this.annotations.forEach((t,e)=>{this.annotations.set(e,[])}),this.graphs.forEach(t=>{t.updateOptions({file:[],dateWindow:this.dateWindow})})}synchronize(t,e){t.length>1&&(null==e?e={dateWindow:this.dateWindow}:e.dateWindow=this.dateWindow,Uv.default.synchronize(...t,e))}}return t.ELEMENT_ID_COUNTER=1,t})();class Gv extends Bv{constructor(t){super(t),this.parentElement=t,this.plotType="hist"}plotSingle(t,e,n){const r=t.labels[0],i=t.dataRows.slice();i.unshift(t.labels);const a={bindto:"#"+n,size:{height:t.height},data:{type:"bar",x:r,rows:i,groups:e},bar:{zerobased:!0},axis:{x:{label:t.xlabel,tick:{format:e=>null!=t.outlierThresholdValue&&e==t.outlierThresholdValue?" >="+e.toString():e.toString()}},y:{label:t.ylabel}}};return 0==t.showLegend&&(a.legend={show:!1}),a}updateSingle(t,e){const n=t.dataRows.slice();n.unshift(t.labels),e.load({rows:n})}}class Hv extends Bv{constructor(t){super(t),this.parentElement=t,this.plotType="pie"}plotSingle(t,e,n){const r=t.dataRows.slice();r.unshift(t.labels);const i={bindto:"#"+n,size:{height:t.height},data:{rows:r,type:"pie"}};return 0==t.showLegend&&(i.legend={show:!1}),i}updateSingle(t,e){const n=t.dataRows.slice();e.load({rows:n})}}class Yv{constructor(t,e=!0){this.parentElement=t,this.addCollapsibles=e,this.groupedPlots=new Map,this.plotGroupHTMLElements=new Map,this.graphs=new Map}toggleCollapsed(t){t.classList.toggle("lib-plot-report-active");const e=t.innerHTML,n=t.nextElementSibling;n&&("block"===n.style.display?n.style.display="none":(n.style.display="block",setTimeout(()=>{const t=this.groupedPlots.get(e);void 0!==t&&t.forEach(t=>{t.resize()})},1)))}clearPlots(){this.groupedPlots.forEach(t=>{t.forEach(t=>t.clear())})}plotChart(t,e){let n=void 0;switch(e.plotType){case"timeSeries":n=new Vv(t,{range:!e.synchronizedOnlyXAxis}),n.plot(e.synchronizedPlots);break;case"histogram":n=new Gv(t),n.plot(e.synchronizedPlots);break;case"bar":n=new jv(t),n.plot(e.synchronizedPlots);break;case"html":{const n=document.createElement("div");n.innerHTML=e.html,t.appendChild(n);break}case"pie":n=new Hv(t),n.plot(e.synchronizedPlots);break;default:throw new Error("Unknown plot type in plot: "+JSON.stringify(e))}return"html"!=e.plotType&&null!=n&&n.graphs.forEach((t,e)=>{this.graphs.set(e,t)}),n}updateChart(t,e){"bar"!=t.plotType&&"histogram"!=t.plotType&&"timeSeries"!=t.plotType||e.update(t.synchronizedPlots)}plot(t,e){const n=[];t.forEach(t=>{let e;if("html"!=t.plotType&&t.synchronizedPlots.forEach(e=>{null!=e.dataRows&&null!=e.dataRows[0]||console.error("Cannot plot synchronized plot that contains empty plots: "+JSON.stringify(t))}),e=t.groupID?t.groupID:"Others",null==this.plotGroupHTMLElements.get(e)){const t=document.createElement("div"),r=document.createElement("div");if(this.addCollapsibles){const n=document.createElement("button");n.setAttribute("class","lib-plot-report-collapsible"),n.innerHTML=e,t.appendChild(n),r.setAttribute("class","lib-plot-report-content"),r.setAttribute("style","display: none;")}t.appendChild(r),n.push(t),this.plotGroupHTMLElements.set(e,r)}}),n.sort((t,e)=>t.firstElementChild||e.firstElementChild?t.firstElementChild?e.firstElementChild?t.firstElementChild.innerHTML.localeCompare(e.firstElementChild.innerHTML):1:-1:0);for(let r=0;r<n.length;r++)this.parentElement.appendChild(n[r]);if(t.forEach(t=>{let n;n=t.groupID?t.groupID:"Others";const r=this.plotGroupHTMLElements.get(n);let i=this.groupedPlots.get(n);if(null==i&&(i=new Map,this.groupedPlots.set(n,i)),i.has(t.id))this.updateChart(t,i.get(t.id));else{const e=this.plotChart(r,t);null!=e&&i.set(t.id,e)}if("html"!=t.plotType&&null!=t.details){const n=t.id+"details";let i=document.getElementById(n);null==i&&(i=document.createElement("details"),i.setAttribute("id",n),i.style.marginBottom="1.5rem",r.appendChild(i)),null==e?i.innerHTML=Lv.printHTMLTable(t.details):e(n,t.details)}}),this.addCollapsibles){const t=this;for(let e=0;e<n.length;e++){const r=n[e].getElementsByClassName("lib-plot-report-collapsible");r[0].addEventListener("click",(function(){t.toggleCollapsed(r[0])}))}}}}class zv{static synchronizePlots(t){const e=[],n=new Map;let r=0;return t.forEach(i=>{let a=i.syncID;null==a&&(a="undefined");const s=a+"+"+i.groupID+"+"+i.plotType;let o=n.get(s);if("undefined"==a||"timeSeries"!=i.plotType||null==o)o=r,r++,n.set(s,o),e[o]=i;else{const n=e[o];if(null==n||"timeSeries"!=n.plotType)throw new Error("synchronizePlots: Unexpected plots: "+JSON.stringify(t));if(n.groupID!=i.groupID)throw new Error("synchronizePlots: Different groupIDs for the same syncID: "+JSON.stringify(t));n.synchronizedPlots=n.synchronizedPlots.concat(i.synchronizedPlots),n.id+=i.id}}),e}static removeEmptyPlots(t,e=0){return(t=this.removeEmptySynchronizedPlots(t,e)).filter(t=>{if("bar"===t.plotType||"histogram"===t.plotType||"timeSeries"===t.plotType||"pie"===t.plotType){for(let n=0;n<t.synchronizedPlots.length;n++)if(t.synchronizedPlots[n].dataRows.length>e)return!0;return!1}return!0})}static removeEmptySynchronizedPlots(t,e=0){const n=[];return t.forEach(t=>{n.push("bar"===t.plotType||"histogram"===t.plotType||"timeSeries"===t.plotType?Object.assign(Object.assign({},t),{synchronizedPlots:t.synchronizedPlots.filter(t=>t.dataRows.length>e)}):t)}),n}static getPercentile(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;const n=e.sort((t,e)=>t-e),r=t/100*(n.length-1),i=Math.floor(r);let a;return a=void 0!==n[i+1]?n[i]+(r-i)*(n[i+1]-n[i]):n[i],a}static getPercentileFrequencies(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;const n=e.sort((t,e)=>t.key-e.key);let r=0;n.forEach(t=>{r+=t.count});const i=t/100*(r-1),a=Math.floor(i),s=i-a;let o=-1;for(let u=0;u<n.length;u++){const t=n[u];if(o+=t.count,a<o)return t.key;if(a==o){const e=n[u+1];return void 0!==e?t.key+s*(e.key-t.key):t.key}}throw new Error("getPercentileFrequencies() failed to calculate percentile: accum "+o+" base "+a+" totalCount "+r+" remain "+s+" percentileVal "+i+" percentile "+t)}static getPercentilePDF(t,e){if(t<0||t>100)throw new Error("Invalid percentile");if(0==e.length)return 0;if(1==e.length)return e[0].key;const n=e.sort((t,e)=>t.key-e.key);let r=0;n.forEach(t=>{r+=t.count});const i=r*(t/100);let a=0;for(let s=0;s<n.length;s++){const t=n[s];if(a+=t.count,i<=a)return t.key}throw new Error("getPercentilePDF() failed to calculate percentile: accum "+a+" totalCount "+r+" percentileVal "+i+" percentile "+t)}static roundForHist(t){if(Number.isInteger(t)||(t=Math.round(t)),-10<t&&t<10)return t;const e=Math.abs(t),n=Math.trunc(Math.log10(e));switch(n){case 0:return t;case 1:{const r=Math.pow(10,n),i=r/2;return Math.sign(t)*Math.trunc((e+i)/r)*r}default:{const r=Math.pow(10,n-1),i=r/2;return Math.sign(t)*Math.trunc((e+i)/r)*r}}}}const qv=["plotDiv"];let Xv=(()=>{class t{constructor(){this.updateStats=new pu,this.updateGeneralStats=new pu(!0),this.startStats=!1,this.statData=new Map,this.updatePlotsActive=!0,this.startStopButtonText="Stop",this.pauseResumeButtonText="Pause"}ngAfterViewInit(){$("#controlButtons").hide(),this.plotDrawer=new Yv(this.plotDiv.nativeElement),this.errorLogsDiv=document.createElement("div"),this.plotDiv.nativeElement.parentElement.appendChild(this.errorLogsDiv),this.getTimeSeries("1 - HTML5 Statistics","Buffer Level (seconds)"),this.getTimeSeries("1 - HTML5 Statistics","Buffering events (y-value is duration in milliseconds)"),this.getTimeSeries("1 - HTML5 Statistics","Dropped Frames"),this.getTimeSeries("1 - HTML5 Statistics","Total Frames"),this.getTimeSeries("2 - Basic Statistics","Current Bitrate (Mbps)"),this.getTimeSeries("3 - Advanced Statistics","Bandwidth estimate (Mbps)"),this.getTimeSeries("3 - Advanced Statistics","Resource download events (y-value is download duration in milliseconds)")}startTimer(){this.statInterval=setInterval(()=>this.updateStats.emit(),1e3)}stopTimer(){this.statInterval=clearInterval(this.statInterval)}startStopButton(){null!=this.statInterval?(this.stopTimer(),this.startStopButtonText="Start"):(this.startTimer(),this.startStopButtonText="Stop")}pauseResumeButton(){this.updatePlotsActive=!this.updatePlotsActive,this.updatePlotsActive?(this.pauseResumeButtonText="Pause",this.updatePlots()):this.pauseResumeButtonText="Resume"}clearButton(){const t=this.updatePlotsActive;this.updatePlotsActive=!1,this.plotDrawer.clearPlots(),this.updatePlotsActive=t,this.errorLogsDiv.innerHTML=""}ngOnChanges(t){if(null!=t.startStats&&(0==t.startStats.previousValue&&1==t.startStats.currentValue&&($("#controlButtons").show(),this.startTimer()),1==t.startStats.previousValue&&0==t.startStats.currentValue))return $("#controlButtons").hide(),this.stopTimer(),this.clearButton(),this.plotDiv.nativeElement.innerHTML="",void(this.plotDrawer=new Yv(this.plotDiv.nativeElement));const e=Date.now();if(this.stats){if(this.stats.html5Stats){if(this.stats.html5Stats.bufferLevel&&this.getTimeSeries("1 - HTML5 Statistics","Buffer Level (seconds)").setValue(e,this.stats.html5Stats.bufferLevel),this.stats.html5Stats.bufferingEvents){const t=this.getTimeSeries("1 - HTML5 Statistics","Buffering events (y-value is duration in milliseconds)");this.stats.html5Stats.bufferingEvents.forEach(e=>{t.setValue(e.startTime,e.duration)})}this.stats.html5Stats.droppedFrames&&this.getTimeSeries("1 - HTML5 Statistics","Dropped Frames").setValue(e,this.stats.html5Stats.droppedFrames),this.stats.html5Stats.totalFrames&&this.getTimeSeries("1 - HTML5 Statistics","Total Frames").setValue(e,this.stats.html5Stats.totalFrames)}if(this.stats.basicStats&&(this.stats.basicStats.currentBitrate&&this.getTimeSeries("2 - Basic Statistics","Current Bitrate (Mbps)").setValue(e,this.stats.basicStats.currentBitrate/1e6),this.stats.basicStats.errorLogs&&this.stats.basicStats.errorLogs.forEach(t=>{this.errorLogsDiv.innerHTML+=t+"<br>"})),this.stats.generalStats&&0!=Object.keys(this.stats.generalStats).length&&this.updateGeneralStats.emit(this.stats.generalStats),this.stats.advancedStats&&(this.stats.advancedStats.measuredThroughput&&this.getTimeSeries("3 - Advanced Statistics","Bandwidth estimate (Mbps)").setValue(e,this.stats.advancedStats.measuredThroughput/1e6),this.stats.advancedStats.resourceDownloadEvents)){const t=this.getTimeSeries("3 - Advanced Statistics","Resource download events (y-value is download duration in milliseconds)");t.setDataSetLabel(0,"Download"),this.stats.advancedStats.resourceDownloadEvents.forEach(e=>{t.setValue(e.startTime,e.duration),t.addAnnotation({series:"Download",x:e.startTime.toString(),shortText:"D",text:e.url})})}this.updatePlotsActive&&this.updatePlots()}}updatePlots(){if(null==this.plotDrawer)return void console.log("stat-viewer: plotDrawer is undefined");let t=[];this.statData.forEach(e=>{t.push(e.getSyncPlot()),e.clear()}),t=zv.removeEmptyPlots(t);const e=zv.synchronizePlots(t);this.plotDrawer.plot(e),$(".lib-plot-report-collapsible").parent().addClass("col-xl-6 col-12")}getTimeSeries(t,e){const n=t+"+"+e;return this.statData.has(n)||this.statData.set(n,new Nv(t,e,{dygraphOptions:{includeZero:!0}})),this.statData.get(n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-stat-viewer"]],viewQuery:function(t,e){var n;1&t&&Cu(qv,!0),2&t&&Au(n=Ru())&&(e.plotDiv=n.first)},inputs:{startStats:"startStats",stats:"stats"},outputs:{updateStats:"updateStats",updateGeneralStats:"updateGeneralStats"},features:[Oe],decls:14,vars:2,consts:[[1,"container-fluid","m-0","p-0"],[1,"row"],[1,"col-10"],["id","controlButtons",1,"input-group"],[1,"input-group-prepend"],[1,"btn","btn-secondary",3,"click"],[1,"input-group-append"],["plotDiv",""]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"div",2),ms(3,"div",3),ms(4,"div",4),ms(5,"button",5),ws("click",(function(){return e.startStopButton()})),Qs(6),ys(),ys(),ms(7,"div",6),ms(8,"button",5),ws("click",(function(){return e.pauseResumeButton()})),Qs(9),ys(),ms(10,"button",5),ws("click",(function(){return e.clearButton()})),Qs(11,"Clear"),ys(),ys(),ys(),ys(),ys(),vs(12,"div",1,7),ys()),2&t&&(di(6),Zs(e.startStopButtonText),di(3),Zs(e.pauseResumeButtonText))},styles:['.c3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3[_ngcontent-%COMP%]   line[_ngcontent-%COMP%], .c3[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:#000}.c3[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-bars[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .c3-event-rect[_ngcontent-%COMP%], .c3-legend-item-tile[_ngcontent-%COMP%], .c3-xgrid-focus[_ngcontent-%COMP%], .c3-ygrid[_ngcontent-%COMP%]{shape-rendering:crispEdges}.c3-chart-arc[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff}.c3-chart-arc[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#fff;stroke-width:1}.c3-chart-arc[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#fff;font-size:13px}.c3-grid[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#aaa}.c3-grid[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#aaa}.c3-xgrid[_ngcontent-%COMP%], .c3-ygrid[_ngcontent-%COMP%]{stroke-dasharray:3 3}.c3-text.c3-empty[_ngcontent-%COMP%]{fill:grey;font-size:2em}.c3-line[_ngcontent-%COMP%]{stroke-width:1px}.c3-circle._expanded_[_ngcontent-%COMP%]{stroke-width:1px;stroke:#fff}.c3-selected-circle[_ngcontent-%COMP%]{fill:#fff;stroke-width:2px}.c3-bar[_ngcontent-%COMP%]{stroke-width:0}.c3-bar._expanded_[_ngcontent-%COMP%]{fill-opacity:1;fill-opacity:.75}.c3-target.c3-focused[_ngcontent-%COMP%]{opacity:1}.c3-target.c3-focused[_ngcontent-%COMP%]   path.c3-line[_ngcontent-%COMP%], .c3-target.c3-focused[_ngcontent-%COMP%]   path.c3-step[_ngcontent-%COMP%]{stroke-width:2px}.c3-target.c3-defocused[_ngcontent-%COMP%]{opacity:.3!important}.c3-region[_ngcontent-%COMP%]{fill:#4682b4;fill-opacity:.1}.c3-brush[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]{fill-opacity:.1}.c3-legend-item[_ngcontent-%COMP%]{font-size:12px}.c3-legend-item-hidden[_ngcontent-%COMP%]{opacity:.15}.c3-legend-background[_ngcontent-%COMP%]{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title[_ngcontent-%COMP%]{font:14px sans-serif}.c3-tooltip-container[_ngcontent-%COMP%]{z-index:10}.c3-tooltip[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ccc}.c3-tooltip[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#fff}.c3-tooltip[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{text-align:right}.c3-area[_ngcontent-%COMP%]{stroke-width:0;opacity:.2}.c3-chart-arcs-title[_ngcontent-%COMP%]{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-background[_ngcontent-%COMP%]{fill:#e0e0e0;stroke:#fff}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-unit[_ngcontent-%COMP%]{fill:#000;font-size:16px}.c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-max[_ngcontent-%COMP%], .c3-chart-arcs[_ngcontent-%COMP%]   .c3-chart-arcs-gauge-min[_ngcontent-%COMP%]{fill:#777}.c3-chart-arc[_ngcontent-%COMP%]   .c3-gauge-value[_ngcontent-%COMP%]{fill:#000}.c3-chart-arc.c3-target.c3-focused[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .c3-chart-arc.c3-target[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{opacity:1}.digraph-legend[_ngcontent-%COMP%] > span.highlight[_ngcontent-%COMP%]{border:3px solid #000}.digraph-legend[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px}.dygraph-annotation[_ngcontent-%COMP%]{position:absolute;z-index:10;overflow:hidden}.dygraph-default-annotation[_ngcontent-%COMP%]{border:1px solid #000;background-color:#fff;text-align:center;box-sizing:content-box}.dygraph-label-rotate-left[_ngcontent-%COMP%]{text-align:center;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}.dygraph-label-rotate-right[_ngcontent-%COMP%]{text-align:center;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.lib-plot-report-collapsible[_ngcontent-%COMP%]{background-color:#adb5bd;color:#fff;cursor:pointer;margin-top:10px;padding:18px;width:100%;border:none;text-align:left;outline:none;font-size:15px;border-radius:1.078em}.lib-plot-report-active[_ngcontent-%COMP%], .lib-plot-report-collapsible[_ngcontent-%COMP%]:hover{background-color:#919ca6;border-color:#8a95a1}.lib-plot-report-active[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.lib-plot-report-content[_ngcontent-%COMP%]{padding:0 18px 5px;display:block;overflow:hidden;border:1px solid #8a95a1;border-bottom-left-radius:1.078em;border-bottom-right-radius:1.078em}.lib-plot-report-collapsible[_ngcontent-%COMP%]:after{content:"\\02795";font-size:13px;color:#fff;float:right;margin-left:5px}.lib-plot-report-active[_ngcontent-%COMP%]:after{content:"\\2796"}.lib-plot-report[_ngcontent-%COMP%]{border-collapse:collapse;margin:0 auto;border:2px solid grey}.lib-plot-report[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .lib-plot-report[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px}.lib-plot-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e6e5e5}.lib-plot-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}']}),t})();function Kv(t,e){}let Wv=(()=>{class t{constructor(t,e,n){this.componentFactoryResolver=t,this.activatedRoute=e,this.location=n,this.startStats=!1,this.urlHasAmdStyleTokenAuth=!1}ngOnInit(){this.setPlayer=this.activatedRoute.snapshot.data.player}ngOnDestroy(){this.playerComponent&&this.playerComponent.stop()}resetStats(){this.startStats=!1}playUrl(t){this.urlHasAmdStyleTokenAuth=!1,setTimeout(()=>{let e=!1;new RegExp(/\?.*hdnts/).test(t)&&(e=!0),this.urlHasAmdStyleTokenAuth=e;let n=fv.sync(t.split("?")[0]).substr(0,12);this.playerComponent.playUrl(t,n,e),this.startStats=!0},1)}showOptions(t){null!=this.playerComponent&&this.playerComponent.updateShowOptions(t)}changePlayer(t){let e;"hlsjs"==t?e=av:"dashjs"==t&&(e=cv);const n=this.componentFactoryResolver.resolveComponentFactory(e),r=this.appPlayer.viewContainerRef;r.clear(),this.updateGeneralStats({});const i=r.createComponent(n);this.playerComponent=i.instance,this.playerInfo=this.playerComponent.getPlayerInfo(),this.location.go("players/"+t,"")}getStatistics(){this.stats=this.playerComponent.getAllStatistics()}updateGeneralStats(t){this.generalStats=t}}return t.\u0275fac=function(e){return new(e||t)(fs(vo),fs(fh),fs(Kl))},t.\u0275cmp=he({type:t,selectors:[["app-players"]],viewQuery:function(t,e){var n;1&t&&xu(Xy,!0),2&t&&Au(n=Ru())&&(e.appPlayer=n.first)},decls:20,vars:6,consts:[[1,"row","justify-content-center","my-3"],[1,"col-10","px-0"],[1,"row","justify-content-center"],[1,"col-10"],[3,"setPlayer","playerChangeEvent","streamChangeEvent","showPlayerOptionsEvent"],[3,"hasAmdStyleTokenAuth"],[1,"col-xl-7","col-10"],["appPlayer",""],[1,"col-xl-3","col-10","m-0","p-0"],[1,"row-xl-3","mt-2"],[3,"playerInfo"],[3,"generalStats"],[1,"row","justify-content-center","stats"],[3,"stats","startStats","updateStats","updateGeneralStats"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"h1"),Qs(3,"Player Testing"),ys(),ys(),ys(),ms(4,"div",2),ms(5,"div",3),ms(6,"app-selector",4),ws("playerChangeEvent",(function(t){return e.resetStats(),e.changePlayer(t)}))("streamChangeEvent",(function(t){return e.resetStats(),e.playUrl(t)}))("showPlayerOptionsEvent",(function(t){return e.showOptions(t)})),ys(),ys(),ms(7,"div",1),vs(8,"safari-token-auth-alert",5),ys(),ys(),ms(9,"div",0),ms(10,"div",6),cs(11,Kv,0,0,"ng-template",7),ys(),ms(12,"div",8),ms(13,"div",9),vs(14,"app-player-info",10),ys(),ms(15,"div",9),vs(16,"app-general-stats",11),ys(),ys(),ys(),ms(17,"div",12),ms(18,"div",1),ms(19,"app-stat-viewer",13),ws("updateStats",(function(){return e.getStatistics()}))("updateGeneralStats",(function(t){return e.updateGeneralStats(t)})),ys(),ys(),ys()),2&t&&(di(6),ps("setPlayer",e.setPlayer),di(2),ps("hasAmdStyleTokenAuth",e.urlHasAmdStyleTokenAuth),di(6),ps("playerInfo",e.playerInfo),di(2),ps("generalStats",e.generalStats),di(3),ps("stats",e.stats)("startStats",e.startStats))},directives:[Sv,xv,Xy,Cv,Mv,Xv],styles:[""]}),t})();var $v=n("elGS"),Qv=n("NMsv");class Zv{constructor(t,e,n){this.url=t,this.callback=n;const r=new XMLHttpRequest;r.open("GET",t),r.withCredentials=e,r.onload=()=>{this.callback(r)},r.send()}}class Jv{constructor(){this.errors=new Map}addError(t,e,n){let r=this.errors.get(t);if(null==r)this.errors.set(t,new Map([[e,new Set([n])]]));else{let t=r.get(e);null==t?r.set(e,new Set([n])):t.add(n)}}getFileErrors(t){let e=this.errors.get(t);return null==e?new Map:e}[Symbol.iterator](){return this.errors[Symbol.iterator]()}}class t_{constructor(t,e){this.masterUrl=t,this.withCredentials=e,this.levelPlaylistInfos=[],this.levelPlaylists=[],this.errors=new Jv}clearData(){this.masterPlaylist=void 0,this.levelPlaylists=[],this.levelPlaylistInfos=[],this.errors=new Jv}getPlaylists(){return this.clearData(),new Promise(t=>{new Zv(this.masterUrl,this.withCredentials,e=>{let n=this;if(Qv.setOptions({onError:function(t,e){n.errors.addError(n.masterUrl,t,e)}}),!(e.status>=300)){this.masterPlaylist=Qv.parse(e.response);let n=[];return this.levelPlaylistInfos=this.masterPlaylist.variants,this.levelPlaylistInfos.forEach((t,e)=>{let r=new Promise(n=>{const r=new URL(t.uri,this.masterUrl).href;new Zv(r,this.withCredentials,t=>{let r,i=this;Qv.setOptions({onError:function(e,n){i.errors.addError(t.responseURL.substring(t.responseURL.lastIndexOf("/")+1),e,n)}}),t.status>=300?(i.errors.addError(t.responseURL.substring(t.responseURL.lastIndexOf("/")+1),t.responseText,0),this.levelPlaylists[e]=t.responseText):(r=Qv.parse(t.response),this.levelPlaylists[e]=r),n()})});n.push(r)}),Promise.all(n).then(()=>{t()})}n.errors.addError(e.responseURL.substring(e.responseURL.lastIndexOf("/")+1),e.responseText,0)})})}}var e_=function(t){return t[t.WARNING=0]="WARNING",t[t.ERROR=1]="ERROR",t}({}),n_=function(t){return t.NOT_SAME_ASPECT_RATIO="Not Same Aspect Ratio",t.NO_RESOLUTION="No Resolution",t.INVALID_RESOLUTION="InvalidResolution",t.CHANGING_RESOLUTION="Changing Resolution",t.MISSING_CODECS_ATTRIBUTE="Missing Codecs Attribute",t.INCONSISTENT_VERSION="Versions are inconsistent",t.INCONSISTENT_DURATION="Playlists have varying target durations",t.NO_MULTIPLE_BITRATES="No multiple bitrates",t.BAD_DEFAULT_BITRATE="Bad default bitrate",t}({});const r_=[{code:"2dcc",description:"2D Cartesian coordinates",handler:"Metadata",specification:"Metrics",objectType:""},{code:"3glo",description:"3GPP Location",handler:"Metadata",specification:"3GPP",objectType:""},{code:"3gor",description:"3GPP Orientation",handler:"Metadata",specification:"3GPP",objectType:""},{code:"3gvo",description:"3GPP Video Orientation",handler:"Metadata",specification:"3GPP",objectType:""},{code:"a3d1",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d2",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d3",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3d4",description:"3D-AVC track with 3D-AVC NAL units only",handler:"Video",specification:"NALu Video",objectType:""},{code:"a3ds",description:"Auro-Cx 3D audio",handler:"Audio",specification:"Auro",objectType:"0xAF"},{code:"ac-3",description:"AC-3 audio",handler:"Audio",specification:"ETSI AC-3",objectType:"0xA5"},{code:"ac-4",description:"AC-4 audio",handler:"Audio",specification:"ETSI AC-4",objectType:"0xAE"},{code:"alac",description:"Apple lossless audio codec",handler:"Audio",specification:"Apple",objectType:""},{code:"alaw",description:"a-Law",handler:"Audio",specification:"QT",objectType:""},{code:"av01",description:"AOM Video Codec",handler:"Video",specification:"AV1-ISOBMFF",objectType:""},{code:"avc1",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc2",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc3",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avc4",description:"Advanced Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x21"},{code:"avcp",description:"Advanced Video Coding Parameters",handler:"Video",specification:"NALu Video",objectType:"0x22"},{code:"camm",description:"Camera motion metadata track",handler:"Video",specification:"CamMotion",objectType:""},{code:"dra1",description:"DRA Audio",handler:"Audio",specification:"DRA",objectType:"0xA7"},{code:"drac",description:"Dirac Video Coder",handler:"Video",specification:"Dirac",objectType:"0xA4"},{code:"dts+",description:"Enhancement layer for DTS layered audio",handler:"Audio",specification:"DTS",objectType:""},{code:"dts-",description:"Dependent base layer for DTS layered audio",handler:"Audio",specification:"DTS",objectType:""},{code:"dtsc",description:"Core Substream",handler:"Audio",specification:"DTS-HD",objectType:"0xA9"},{code:"dtse",description:"Extension Substream containing only LBR",handler:"Audio",specification:"DTS-HD",objectType:"0xAC"},{code:"dtsh",description:"Core Substream + Extension Substream",handler:"Audio",specification:"DTS-HD",objectType:"0xAA"},{code:"dtsl",description:"Extension Substream containing only XLL",handler:"Audio",specification:"DTS-HD",objectType:"0xAB"},{code:"dtsx",description:"DTS-UHD profile 2",handler:"Audio",specification:"DTS-UHD",objectType:"0xB2"},{code:"dtsy",description:"DTS-UHD profile 3 or higher",handler:"Audio",specification:"DTS-UHD",objectType:"0xB3"},{code:"dva1",description:"AVC-based Dolby Vision derived from avc1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvav",description:"AVC-based Dolby Vision derived from avc3",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvh1",description:"HEVC-based Dolby Vision derived from hvc1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"dvhe",description:"HEVC-based Dolby Vision derived from hev1",handler:"Video",specification:"Dolby Vision",objectType:""},{code:"ec-3",description:"Enhanced AC-3 audio",handler:"Audio",specification:"ETSI AC-3",objectType:"0xA6"},{code:"enca",description:"Encrypted/Protected audio",handler:"Audio",specification:"ISO",objectType:""},{code:"encf",description:"Encrypted/Protected font",handler:"Font",specification:"ISO",objectType:""},{code:"encm",description:"Encrypted/Protected metadata",handler:"Metadata",specification:"ISO",objectType:""},{code:"encs",description:"Encrypted Systems stream",handler:"(various)",specification:"ISO",objectType:""},{code:"enct",description:"Encrypted Text",handler:"Text",specification:"ISO",objectType:""},{code:"encv",description:"Encrypted/protected video",handler:"Video",specification:"ISO",objectType:""},{code:"fdp$20",description:"File delivery hints",handler:"Hint",specification:"ISO",objectType:""},{code:"g719",description:"ITU-T Recommendation G.719 (2008)",handler:"Audio",specification:"ITU G.719",objectType:"0xA8"},{code:"g726",description:"ITU-T Recommendation G.726 (1990)",handler:"Audio",specification:"SDV",objectType:""},{code:"hev1",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hev2",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvc1",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvc2",description:"High Efficiency Video Coding",handler:"Video",specification:"NALu Video",objectType:"0x23"},{code:"hvt1",description:"HEVC tile tracks",handler:"Video",specification:"NALu Video",objectType:""},{code:"icpv",description:"Incomplete video",handler:"Video",specification:"ISO",objectType:""},{code:"ixse",description:"DVB Track Level Index Track",handler:"Metadata",specification:"DVB",objectType:""},{code:"jxsm",description:"Video and image sequences coded to the JPEG-XS coding format",handler:"Video",specification:"JPXS",objectType:""},{code:"lhe1",description:"Layered HEVC",handler:"Video",specification:"NALu Video",objectType:""},{code:"lht1",description:"Layered HEVC tile tracks",handler:"Video",specification:"NALu Video",objectType:""},{code:"lhv1",description:"Layered HEVC",handler:"Video",specification:"NALu Video",objectType:""},{code:"m2ts",description:"MPEG-2 transport stream for DMB",handler:"Hint",specification:"DMB-MAF",objectType:""},{code:"m4ae",description:"MPEG-4 Audio Enhancement",handler:"Audio",specification:"MP4v2",objectType:"0x40"},{code:"mebx",description:"Timed metadata multiplex",handler:"Metadata",specification:"ISO",objectType:""},{code:"mett",description:"Text timed metadata that is not XML",handler:"Metadata",specification:"ISO",objectType:""},{code:"metx",description:"XML timed metadata",handler:"Metadata",specification:"ISO",objectType:""},{code:"mha1",description:"MPEG-H Audio (single stream",handler:" unencapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mha2",description:"MPEG-H Audio (multi-stream",handler:" unencapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mhm1",description:"MPEG-H Audio (single stream",handler:" MHAS encapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mhm2",description:"MPEG-H Audio (multi-stream",handler:" MHAS encapsulated)",specification:"Audio",objectType:"MPEG-H"},{code:"mjp2",description:"Motion JPEG 2000",handler:"Video",specification:"MJ2",objectType:""},{code:"mjpg",description:"JPEG image sequences",handler:"Video",specification:"HEIF",objectType:""},{code:"mlix",description:"DVB Movie level index track",handler:"Metadata",specification:"DVB",objectType:""},{code:"mlpa",description:"MLP Audio",handler:"Audio",specification:"Dolby MLP",objectType:""},{code:"mp4a",description:"MPEG-4 Audio",handler:"Audio",specification:"MP4v1",objectType:"0x40"},{code:"mp4s",description:"MPEG-4 Systems",handler:"(various)",specification:"MP4v1",objectType:"various"},{code:"mp4v",description:"MPEG-4 Visual",handler:"Video",specification:"MP4v1",objectType:"0x20"},{code:"mvc1",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc2",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc3",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvc4",description:"Multiview coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd1",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd2",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd3",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"mvd4",description:"MVD stream",handler:"Video",specification:"NALu Video",objectType:""},{code:"oksd",description:"OMA Keys",handler:"Metadata",specification:"OMA DRM XBS",objectType:""},{code:"Opus",description:"Opus audio coding",handler:"Audio",specification:"Opus",objectType:"0xAD"},{code:"pm2t",description:"Protected MPEG-2 Transport",handler:"Hint",specification:"ISO",objectType:""},{code:"prtp",description:"Protected RTP Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"raw$20",description:"Uncompressed audio",handler:"Audio",specification:"MJ2",objectType:""},{code:"resv",description:"Restricted Video",handler:"Video",specification:"NALu Video",objectType:""},{code:"rm2t",description:"MPEG-2 Transport Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rrtp",description:"RTP reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rsrp",description:"SRTP Reception",handler:"Hint",specification:"ISO",objectType:""},{code:"rtcp",description:"RTCP reception hint track",handler:"Hint",specification:"ISO",objectType:""},{code:"rtmd",description:"Real Time Metadata Sample Entry(XAVC Format)",handler:"Metadata",specification:"Sony",objectType:""},{code:"rtp$20",description:"RTP Hints",handler:"Hint",specification:"ISO",objectType:"n/a"},{code:"rv60",description:"RealVideo Codec 11",handler:"Video",specification:"RealHD",objectType:"0xB0"},{code:"s263",description:"ITU H.263 video (3GPP format)",handler:"Video",specification:"3GPP",objectType:""},{code:"samr",description:"Narrowband AMR voice",handler:"Audio",specification:"3GPP",objectType:""},{code:"sawb",description:"Wideband AMR voice",handler:"Audio",specification:"3GPP",objectType:""},{code:"sawp",description:"Extended AMR-WB (AMR-WB+)",handler:"Audio",specification:"3GPP",objectType:""},{code:"sbtt",description:"Text subtitles",handler:"Subtitles",specification:"ISO",objectType:""},{code:"sevc",description:"EVRC Voice",handler:"Audio",specification:"3GPP2",objectType:"0xA0"},{code:"sevs",description:"Enhanced Voice Services (EVS)",handler:"Audio",specification:"3GPP",objectType:""},{code:"sm2t",description:"MPEG-2 Transport Server",handler:"Hint",specification:"ISO",objectType:""},{code:"sqcp",description:"13K Voice",handler:"Audio",specification:"3GPP2",objectType:"0xE1"},{code:"srtp",description:"SRTP Hints",handler:"Hint",specification:"ISO",objectType:"n/a"},{code:"ssmv",description:"SMV Voice",handler:"Audio",specification:"3GPP2",objectType:"0xA1"},{code:"stcp",description:"SRTCP reception hint track",handler:"Hint",specification:"ISO",objectType:""},{code:"STGS",description:"Subtitle Sample Entry (HMMP)",handler:"Subtitle Graphics",specification:"Sony",objectType:""},{code:"stpp",description:"Subtitles (Timed Text)",handler:"Subtitles",specification:"ISO",objectType:""},{code:"stxt",description:"Simple timed text",handler:"Text",specification:"ISO",objectType:""},{code:"svc1",description:"Scalable Video Coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"svc2",description:"Scalable Video Coding",handler:"Video",specification:"NALu Video",objectType:""},{code:"svcM",description:"SVC metadata",handler:"Metadata",specification:"NALu Video",objectType:""},{code:"tc64",description:"64 bit timecode samples",handler:"Timecode",specification:"Apple",objectType:""},{code:"tmcd",description:"32 bit timecode samples",handler:"Timecode",specification:"Apple",objectType:""},{code:"twos",description:"Uncompressed 16-bit audio",handler:"Audio",specification:"MJ2",objectType:""},{code:"tx3g",description:"Timed Text stream",handler:"Text",specification:"3GPP",objectType:""},{code:"ulaw",description:"Samples have been compressed using uLaw 2:1.",handler:"Audio",specification:"QT",objectType:""},{code:"unid",description:"Dynamic Range Control (DRC) data",handler:"Metadata",specification:"DRC",objectType:""},{code:"urim",description:"Binary timed metadata identified by URI",handler:"Metadata",specification:"ISO",objectType:""},{code:"vc-1",description:"SMPTE VC-1",handler:"Video",specification:"SMPTE",objectType:"0xA3"},{code:"vp08",description:"VP8 video",handler:"Video",specification:"VPxx",objectType:""},{code:"vp09",description:"VP9 video",handler:"Video",specification:"VPxx",objectType:"0xB1"},{code:"wvtt",description:"WebVTT data",handler:"Text",specification:"ISO-Text",objectType:""}];class i_{constructor(t){if(this.codecAttribute=t,this.codecs=[],null==t)return;let e=t.split(",");for(let n of e){n=n.trim();let t=!1;for(let e of r_)if(n.startsWith(e.code)){this.codecs.push({value:n,codec:e}),t=!0;break}t||this.codecs.push({value:n,codec:void 0})}}toStringArray(){if(0==this.codecs.length)return[];let t=[];for(let e of this.codecs){let n=e.value+" => ";n+=null==e.codec?"unknown":`${e.codec.description}, ${e.codec.handler}, ${e.codec.specification}`,t.push(n)}return t}hasHandler(t){for(let e of this.codecs)if(void 0!==e.codec&&e.codec.handler==t)return!0;return!1}hasVideo(){return this.hasHandler("Video")}hasAudio(){return this.hasHandler("Audio")}}class a_{static check(t){let e=new Array;return a_.checkResolutionAndAspectRatio(t.masterPlaylist.variants,e),a_.checkCodecsPresent(t.masterPlaylist.variants,e),a_.checkVersionConsistency(t.masterPlaylist,t.levelPlaylists,e),a_.checkTargetDurations(t.levelPlaylists,e),a_.checkMultipleBitrates(t.masterPlaylist,e),a_.checkDefaultBitrate(t.masterPlaylist,e),e}static checkCodecsPresent(t,e){for(const n of t)null==n.codecs&&e.push({type:e_.WARNING,kind:n_.MISSING_CODECS_ATTRIBUTE,msg:`Violating Apple 9.1. Your EXT-X-STREAM-INF tag MUST always provide the CODECS attribute. Stream ${n.uri} has no CODECS attribute.`})}static checkResolutionAndAspectRatio(t,e){let n,r,i=1<<28,a=-(1<<28);for(const s of t){const t=new i_(s.codecs),o=s.resolution;if(null==o){t.hasVideo()&&e.push({type:e_.WARNING,kind:n_.NO_RESOLUTION,msg:`Violating Apple rule 9.2 due to missing RESOLUTION attribute for video stream ${s.uri}.`});continue}if(o.width<=0||o.height<=0){e.push({type:e_.ERROR,kind:n_.INVALID_RESOLUTION,msg:`Invalid resolution width: ${o.width}, height: ${o.height} for stream ${s.uri}.`});continue}let u=1*o.width/o.height;u<i&&(i=u,n=o),u>a&&(a=u,r=o)}i!=-a&&Math.abs(i-a)>.16&&e.push({type:e_.WARNING,kind:n_.CHANGING_RESOLUTION,msg:`Violating Apple rule 1.33 due to aspect ratio changing aspect ratio. Minimum aspect ratio ${n.width}x${n.height}=${i} vs. ${r.width}x${r.height}=${a}.`})}static checkVersionConsistency(t,e,n){for(let r in e)"string"!=typeof e[r]&&(null==t.version&&(t.version=1),null==e[r].version&&(e[r].version=1),e[r].version!=t.version&&n.push({type:e_.WARNING,kind:n_.INCONSISTENT_VERSION,msg:`Media playlist ${t.variants[r].uri} has version ${e[r].version}, but master playlist has version ${t.version}.`}))}static checkTargetDurations(t,e){let n=new Set(t.map(t=>t.targetDuration));n.size>1&&e.push({type:e_.WARNING,kind:n_.INCONSISTENT_DURATION,msg:`Violating Apple rule 8.2 by having several different target durations (${Array.from(n).join(", ")}) detected in media playlists.`})}static checkMultipleBitrates(t,e){1==new Set(t.variants.map(t=>t.bandwidth)).size&&e.push({type:e_.WARNING,kind:n_.NO_MULTIPLE_BITRATES,msg:"Violating Apple rule 9.9 that a stream should include different bitrates."})}static checkDefaultBitrate(t,e){let n=t.variants.filter(t=>new i_(t.codecs).hasVideo());0==n.length&&(n=t.variants),null!=n[0].bandwidth&&(n[0].bandwidth>25e5||n[0].bandwidth<15e5)&&e.push({type:e_.WARNING,kind:n_.BAD_DEFAULT_BITRATE,msg:"Violating Apple rule 1.32 that the default bitrate should be approximate 2000 kb/s."})}}class s_{constructor(t){this.dygraphOptions={dygraphOptions:{axes:{x:{axisLabelFormatter:t=>new Date(t).getTime().toString(),valueFormatter:t=>new Date(t).getTime().toString()}},labelsUTC:!1}},this.bitrate=new Nv("","Bitrate",this.dygraphOptions),this.plotDrawer=new Yv(t)}addDownloadData(t){"initSegment"!=t.sn&&"main"==t.type&&this.bitrate.setValue(t.sn,8*t.stats.loaded/t.duration/1e3)}clear(){this.plotDrawer.clearPlots(),this.updatePlots()}updatePlots(){let t=[];t.push(this.bitrate.getSyncPlot()),t=zv.removeEmptyPlots(t),t.length>0&&(this.bitrate.clear(),this.plotDrawer.plot(t))}}var o_=!1;const u_=n("uHMj");let l_=(()=>{class t{constructor(t){this.withCredentials=!1,this.numSegments=0;let e=this;this.hls=new Qy.a({fLoader:class extends Qy.a.DefaultConfig.loader{constructor(t){super(t)}load(t,n,r){var i=r.onSuccess;r.onSuccess=function(t,n,r,a){e.analyzeSegment(r,t.data),e.addSegmentInfo(r,n,t.data),i(t,n,r,a)},super.load(t,n,r)}},xhrSetup:function(t,n){t.withCredentials=e.withCredentials}}),this.hls.on(Qy.a.Events.FRAG_LOADED,(t,n)=>{$("#streamButton").html("Analyze Stream"),e.plotter.addDownloadData(n.frag)}),t.events.subscribe(t=>{t instanceof ff&&$("#betaModal").modal("hide")})}ngOnInit(){const t=document.createElement("script");t.src="./assets/mediainfo/mediainfo.js",t.type="text/javascript",t.async=!0,t.charset="utf-8",t.onload=()=>{$("#streamButton").prop("disabled",!1)},document.getElementsByTagName("head")[0].appendChild(t)}ngAfterContentInit(){$("#betaModal").modal("show"),$("#streamList").html((t,e)=>{for(let n of u_.streams)e+=`<li class="dropdown-item" data-url="${n.url}">${n.name}</li>`;return e}),$("#streamList").on("click","li",t=>{$("#inputUrl").val(t.currentTarget.dataset.url)}),$("#streamButton").on("click",()=>{this.loadStream()}),$("#inputUrl").on("keyup",t=>{t.preventDefault(),13===t.keyCode&&$("#streamButton").click()});let t=this;$("#plotCollapse").on("shown.bs.collapse",()=>{t.plotter.updatePlots(),null!=t.updateTimer&&window.clearInterval(t.updateTimer),t.updateTimer=window.setInterval(()=>t.plotter.updatePlots(),1e3)})}resetEverything(){this.hls.stopLoad(),this.plotter.clear(),this.numSegments=0,$("#infoOutput").html(""),$("#errorsCollapseBtn").text("Detected Issues"),$("#errorOutput").html(""),$("#rawOutput").html(""),$("#downloadedSegmentsBtnText").text("Downloaded Segments"),$("#segmentOutput").html(""),null!=this.cbOnLoadedRef&&this.hls.off(Qy.a.Events.LEVEL_LOADED,this.cbOnLoadedRef)}loadStream(){let t=document.getElementById("inputUrl"),e="DefaultUrl",n=this;if(!(null!=t&&t instanceof HTMLInputElement&&""!=t.value))return;e=t.value,this.startAnalysis(e),$("#plotOutput").html(""),this.plotter=new s_($("#plotOutput").get(0));let r=MediaInfo((function(){n.mediaInfo=new r.MediaInfo("XML")}))}startAnalysis(t){if(this.withCredentials=!1,this.withCredentials=!!new RegExp(/\?.*hdnts/).test(t),wv.isSafari()&&this.withCredentials)return void this.resetEverything();this.hlsDownloader=new t_(t,this.withCredentials);let e=[];this.hlsDownloader.getPlaylists().then(()=>{let n=document.getElementById("bitrateModalBody");n.innerHTML="",this.hlsDownloader.levelPlaylistInfos.forEach((t,r)=>{const i=document.createElement("div");i.setAttribute("class","custom-control custom-radio");const a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("class","custom-control-input"),a.setAttribute("name","custom-radio"),"string"==typeof this.hlsDownloader.levelPlaylists[r]&&(a.disabled=!0);let s="";null!=t.resolution&&(s=t.resolution.width+"x"+t.resolution.height);const o="bitrateModalBodyCheck"+r;e.push(o);const u="Bandwidth: "+t.bandwidth+" Resolution: "+s+" Codecs: "+t.codecs;a.setAttribute("id",o),i.appendChild(a);const l=document.createElement("label");l.setAttribute("class","custom-control-label"),l.setAttribute("for",o),l.innerHTML=u,i.appendChild(l),n.appendChild(i)}),$("#bitrateModal").modal();let r=this;$("#selectBitrates").on("click",(function(){r.resetEverything();let n=document.getElementById("video"),i="";e.forEach((t,e)=>{$("#"+t).prop("checked")&&(i=r.hlsDownloader.levelPlaylistInfos[e].uri)}),i=new URL(i,t).href,Qy.a.isSupported()&&null!=n&&n instanceof HTMLVideoElement&&(r.hls.on($y.Events.MANIFEST_PARSED,(t,e)=>{let n=!1;e.levels.forEach((t,e)=>{-1!=t.url.indexOf(i)&&(r.hls.currentLevel=e,n=!0)}),n||(r.hls.currentLevel=0)}),r.createRaw(r.hlsDownloader),r.createInfo(r.hlsDownloader),r.cbOnLoadedRef=()=>{r.onLevelLoaded(r.hlsDownloader)},r.hls.on(Qy.a.Events.LEVEL_LOADED,r.cbOnLoadedRef),$("#streamButton").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n            Analysing...'),r.hls.loadSource(t),r.hls.attachMedia(n))}))})}onLevelLoaded(t){const e=document.getElementById("video");null!=e&&e instanceof HTMLVideoElement&&(e.play(),t.getPlaylists().then(()=>{this.displayRaw(t),this.displayInfo(t),this.displayErrors(t)}))}displayErrors(t){let e=document.getElementById("errorOutput"),n=a_.check(t),r=!1,i=0;if(null!=e&&e instanceof HTMLDivElement){e.innerHTML="";for(let[n,a]of t.errors)for(let[t,s]of a){r=!0,i+=1;let a=s.size>5?Array.from(s).slice(0,5).join(", ")+", ...":Array.from(s).join(", ");e.innerHTML+=this.makeSimpleCardHtml(`<b>File (Lines):</b> ${n} (${a})<br><b>Error:</b> ${t}<br>`,"bg-danger text-white")}for(let t of n){i+=1;let n=`<b>Warning:</b> ${t.kind}<br><b>Message:</b> ${t.msg}<br>`;t.type==e_.ERROR&&(r=!0,e.innerHTML+=this.makeSimpleCardHtml(""+n,"bg-danger text-white")),t.type==e_.WARNING&&(e.innerHTML+=this.makeSimpleCardHtml(""+n,"bg-warning text-white"))}$("#errorsCollapseBtn").text(`Detected Issues (${i})`),r&&$("#errorsCollapse").collapse("show")}}addInfo(t,e,n){return null!=e?t+n:t}createInfo(t){const e=document.getElementById("infoOutput");if(null!=e&&e instanceof HTMLDivElement){const n=this.getStreamType(t);e.innerHTML=`<div>                                <b>Stream Format:</b> HLS<br>                                <b>Stream Type:</b> ${n}<br><br>                              </div>`,e.innerHTML+=this.makeCardHtml("Master Playlist","","masterInfo",!1);for(let[r,i]of t.levelPlaylistInfos.entries()){let t=i.uri.substring(i.uri.lastIndexOf("/")+1);e.innerHTML+=this.makeCardHtml("Level Playlist: "+t,"",`levelPlaylist${r}Info`,!1)}e.innerHTML+='<div style="text-align: right; font-family: monospace" id="timestampInfo"></div>'}}displayInfo(t){const e=document.getElementById("infoOutput");if(null!=e&&e instanceof HTMLDivElement){let e="";e=this.addInfo(e,t.masterPlaylist.version,`<b>Version</b>: ${t.masterPlaylist.version}<br>`),e=this.addInfo(e,t.masterPlaylist.independentSegments,`<b>Independent segments</b>: ${t.masterPlaylist.independentSegments}<br>`),e=this.addInfo(e,t.masterPlaylist.start,`<b>Start</b>: ${t.masterPlaylist.start}<br>`),this.updateCardHtml("masterInfo",e);for(let[n,r]of t.levelPlaylistInfos.entries()){e="";const i=t.levelPlaylists[n];if("string"==typeof i)e=i;else{if(r.uri.substring(r.uri.lastIndexOf("/")+1),e=this.addInfo(e,i.version,`<b>Version:</b> ${i.version}<br>`),e=this.addInfo(e,i.independentSegments,`<b>Independent segments:</b> ${i.independentSegments}<br>`),e=this.addInfo(e,i.start,`<b>Start:</b> ${i.start}<br>`),e=this.addInfo(e,i.targetDuration,`<b>Target duration:</b> ${i.targetDuration}<br>`),e=this.addInfo(e,i.mediaSequenceBase,`<b>Media sequence:</b> ${i.mediaSequenceBase}<br>`),e=this.addInfo(e,i.discontinuitySequenceBase,`<b>Discontinuity sequence:</b> ${i.discontinuitySequenceBase}<br>`),e=this.addInfo(e,i.playlistType,`<b>Type:</b> ${i.playlistType}<br>`),e=this.addInfo(e,r.bandwidth,`<b>Bandwidth:</b> ${r.bandwidth}<br>`),e=this.addInfo(e,r.averageBandwidth,`<b>Average bandwidth:</b> ${r.averageBandwidth}<br>`),e=this.addInfo(e,r.codecs,`<b>Codecs:</b> ${r.codecs}<br>`),void 0!==r.codecs){const t=new i_(r.codecs);t.hasAudio()&&t.hasVideo()?e+="Muxed audio and video<br/>":t.hasVideo()?e+="Video only<br/>":t.hasAudio()?e+="Audio only<br/>":e+="No audio nor video<br/>";for(let n of t.toStringArray())e+=n+"</b><br>"}null!=r.resolution&&(e+=`<b>Resolution:</b> ${r.resolution.width}x${r.resolution.height}<br>`),e=this.addInfo(e,r.frameRate,`<b>Frame rate:</b> ${r.frameRate}<br>`),e+=`<b>Audio renditions:</b> ${r.audio.map(t=>`(${t.toString()})`).join(",")}<br>`,e+=`<b>Video renditions:</b> ${r.video.map(t=>`(${t.toString()})`).join(",")}<br>`,e+=`<b>Subtitles renditions:</b> ${r.subtitles.map(t=>`(${t.toString()})`).join(",")}<br>`,e+=`<b>Closed captions renditions:</b> ${r.closedCaptions.map(t=>`(${t.toString()})`).join(",")}<br>`}this.updateCardHtml(`levelPlaylist${n}Info`,e)}this.addTimestamp("timestampInfo")}}createRaw(t){$("#rawOutput").html((t,e)=>{e+=this.makeCardHtml("Master Playlist","","masterRaw",!0);for(let[n,r]of this.hlsDownloader.levelPlaylistInfos.entries()){const t=r.uri.substring(r.uri.lastIndexOf("/")+1);e+=this.makeCardHtml("Level Playlist: "+t,"",`levelPlaylist${n}Raw`,!0)}return e+'<div style="text-align: right; font-family: monospace" id="timestampRaw"></div>'})}displayRaw(t){let e=new Set;t.errors.getFileErrors(t.masterUrl).forEach(t=>{t.forEach(t=>e.add(t))});const n='<table style="font-family: monospace;">'+t.masterPlaylist.source.replace(/^\s*[\r\n]/gm,"").replace("\n\n","\n").split("\n").map((function(t,n){return`<tr><span style="${e.has(n)?"color:#ce1a1a":""}"><td style="color:LightGray; border-right: solid 1.5px; padding-right: 5px">${n}</td><td style="padding-left: 5px"> ${t}<td></span>`})).join("")+"</table>";this.updateCardHtml("masterRaw",n);for(let[r,i]of t.levelPlaylistInfos.entries()){const e=new Set;t.errors.getFileErrors(i.uri).forEach(t=>{t.forEach(t=>e.add(t))});const n=t.levelPlaylists[r],a='<table style="font-family: monospace;">'+(n.source?n.source.replace(/^\s*[\r\n]/gm,""):n).replace("\n\n","\n").split("\n").map((function(t,n){return`<tr><span style="${e.has(n)?"color:#ce1a1a":""}"><td style="color:LightGray; border-right: solid 1.5px; padding-right: 5px">${n}</td><td style="padding-left: 5px"> ${t}<td></span>`})).join("")+"</table>";this.updateCardHtml(`levelPlaylist${r}Raw`,a)}this.addTimestamp("timestampRaw")}analyzeSegment(t,e){}addSegmentInfo(e,n,r){let i=document.getElementById("segmentOutput");if(null!=i&&i instanceof HTMLDivElement&&!e.frag.encrypted){let a=e.url,s=a.substring(a.lastIndexOf("/")+1),o="";o+=`<b>Continuity Counter:</b> ${e.frag.cc}<br>`,o+=`<b>Duration:</b> ${e.frag.duration}<br>`,o+=`<b>Sequence Number:</b> ${e.frag.sn}<br>`,o+=`<b>Type:</b> ${e.frag.type}<br>`,o+=`<b>Bitrate:</b> ${Math.round(8*n.loaded/e.frag.duration/1e3)} kbps<br>`;let u=new File([r],s);!function(t,e,n){if(!o_){o_=!0;var r=e.size,i=0,a=0,s=null;t.open_buffer_init(r,i);var o=function(e){var o;if(null!==e.target.error){var l="An error happened reading your file!";return console.error(l,e.target.error),u(),void alert(l)}var c=new Uint8Array(e.target.result);a=t.open_buffer_continue(c,o=c.length);var d,f=t.open_buffer_continue_goto_get_lower(),h=t.open_buffer_continue_goto_get_upper();if(-1===(d=-1==f&&-1==h?-1:f<0?f+4294967296+4294967296*h:f+4294967296*h)?i+=o:(i=d,t.open_buffer_init(r,d)),c=null,i>=r||8&a){t.open_buffer_finalize();var p=t.inform();return t.close(),n(p),void u()}s(o)};(s=function(n){if(o_){var r=new FileReader,a=e.slice(i,n+i);r.onload=o,r.readAsArrayBuffer(a)}else t.close(),u()})(5242880)}function u(){o_=!1}}(this.mediaInfo,u,e=>{const n=$v.parse(e),r=t.extractAudioAndVideoTracks(n);if(o+="<br>",r.frameRate&&(o+=`<b>Frame Rate:</b> ${r.frameRate}<br>`),r.video.length>0){o+="<b>Video Tracks:</b><br>";let t=1;r.video.forEach(e=>{o+='<div style="padding-left: 10px">',o+=`Track ${t}<br>`,o+=`<div style="padding-left: 10px">Format: ${e.Format}<br>\n                     Format Profile: ${e.Format_Profile}<br> Format Level: ${e.Format_Level}<br>\n                     Standard: ${e.Standard}<br>Aspect Ratio: ${e.DisplayAspectRatio}</div>`,o+="</div><br>",t+=1})}if(r.audio.length>0){o+="<b>Audio Tracks:</b><br>";let t=1;r.audio.forEach(e=>{o+='<div style="padding-left: 10px">',o+=`Track ${t}<br>`,o+=`<div style="padding-left: 10px">Format: ${e.Format}<br>Compression_Mode: ${e.Compression_Mode}</div>`,o+="</div><br>",t+=1})}i.innerHTML+=this.makeCardHtml(s,o,"seg"+this.numSegments.toString(),!1),this.numSegments+=1,$("#downloadedSegmentsBtnText").text(`Downloaded Segments (${this.numSegments})`)})}}addTimestamp(t){$("#"+t).html("timestamp: "+new Date(Date.now()).toISOString())}makeCardHtml(t,e,n,r){return`<div class="card bg-light">\n      <div class="card-header" id="${n}Heading">\n        <h2 class="mb-0">\n          <button class="btn btn-link collapsed text-dark" type="button" data-toggle="collapse" data-target="#${n}Collapse" aria-expanded="false" aria-controls="${n}Collapse">\n            <h6>${t}</h6>\n          </button>\n        </h2>\n      </div>\n\n      <div id="${n}Collapse" class="collapse" aria-labelledby="${n}Heading">\n        <div class="card-body" ${r?'style="display: block; height: 500px; overflow-x: scroll; overflow-y: scroll; white-space: nowrap;"':""}>\n          ${e}\n        </div>\n      </div>\n    </div>`}updateCardHtml(t,e){document.getElementById(t+"Collapse").firstElementChild.innerHTML=e}makeSimpleCardHtml(t,e){return`<div class="card">\n      <div class="card-body ${e}">\n        ${t}\n      </div>\n    </div>`}getStreamType(t){if(null!=t.masterPlaylist.playlistType)return t.masterPlaylist.playlistType;{let e="LIVE";return t.levelPlaylists.forEach(t=>{t.endlist&&(e="VOD")}),e}}static extractAudioAndVideoTracks(t){const e=t.MediaInfo.media.track,n=[],r=[];let i=void 0;for(let a=0;a<e.length;a++)"AVC"==e[a].Format?n.push(e[a]):"AAC"==e[a].Format?r.push(e[a]):"MPEG-TS"==e[a].Format&&(i=e[a].FrameRate);return{video:n,audio:r,frameRate:i}}}return t.\u0275fac=function(e){return new(e||t)(fs(Cp))},t.\u0275cmp=he({type:t,selectors:[["app-stream-validator"]],decls:366,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-10"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"ml-auto","row"],["role","group",1,"btn-group"],["onclick","$('#infoModal').modal()",1,"btn","btn-primary"],["onclick","$('#betaModal').modal()",1,"btn","btn-danger"],["id","infoModal","tabindex","-1","role","dialog","aria-labelledby","infoModalLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","100px","height","80%"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","infoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["id","infoModalBody",1,"modal-body"],[2,"color","#ce1a1a"],[2,"color","#dbd336"],["size","3"],[1,"table","table-striped"],[1,"thead-dark"],["scope","col"],["href","mailto:dl-playersakamai@akamai.com"],["id","bitrateModal","tabindex","-1","role","dialog","aria-labelledby","bitrateModalLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","100px"],[1,"modal-dialog","modal-lg"],["id","exampleModalLabel",1,"modal-title"],["id","bitrateModalBody",1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","id","selectBitrates","data-dismiss","modal",1,"btn","btn-primary"],[1,"row","p-2"],[1,"col-12","col-lg-6"],[1,"row"],[1,"col"],[1,"col-12"],[1,"input-group"],[1,"input-group-prepend"],["id","streamButton","type","submit","disabled","true",1,"btn","btn-primary"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle","dropdown-toggle-split"],["id","streamList",1,"dropdown-menu"],["id","inputUrl","type","text","placeholder","Input master manifest URI or select stream from the list","aria-label","Input master manifest URI","aria-describedby","addon-wrapping",1,"form-control"],[1,"col-12","mt-2","mb-0"],[3,"hasAmdStyleTokenAuth"],[1,"pt-2","col-12"],["id","video","width","100%","muted","muted",2,"background","black"],[1,"card"],["id","errorsHeading",1,"card-header","bg-secondary"],[1,"mb-0"],["id","errorsCollapseBtn","type","button","data-toggle","collapse","data-target","#errorsCollapse","aria-expanded","false","aria-controls","errorsCollapse",1,"btn","btn-link","collapsed","text-white"],["id","errorsCollapse","aria-labelledby","errorsHeading",1,"collapse"],["id","errorOutput",1,"card-body"],["id","generalInfoHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#generalInfoCollapse","aria-expanded","false","aria-controls","generalInfoCollapse",1,"btn","btn-link","collapsed","text-white"],["id","generalInfoCollapse","aria-labelledby","generalInfoHeading",1,"collapse"],["id","infoOutput",1,"card-body"],["id","infoList",1,"list-group"],["id","plotHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#plotCollapse","aria-expanded","false","aria-controls","plotCollapse",1,"btn","btn-link","collapsed","text-white"],["id","plotCollapse","aria-labelledby","plotHeading",1,"collapse"],["id","plotOutput",1,"card-body"],["id","rawHeading",1,"card-header","bg-secondary"],["type","button","data-toggle","collapse","data-target","#rawCollapse","aria-expanded","false","aria-controls","rawCollapse",1,"btn","btn-link","collapsed","text-white"],["id","rawCollapse","aria-labelledby","rawHeading",1,"collapse"],["id","rawOutput",1,"card-body"],["id","segmentHeading",1,"card-header","bg-secondary"],["id","downloadedSegmentsBtnText","type","button","data-toggle","collapse","data-target","#segmentCollapse","aria-expanded","false","aria-controls","segmentCollapse",1,"btn","btn-link","collapsed","text-white"],["id","segmentCollapse","aria-labelledby","segmentHeading",1,"collapse"],["id","segmentOutput",1,"card-body",2,"display","block","height","600px","overflow-x","scroll","overflow-y","scroll","white-space","nowrap"],["id","betaModal","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog","aria-labelledby","betaModalLabel","aria-hidden","false",1,"modal","fade",2,"margin-top","100px"],["id","betaModalLabel",1,"modal-title"],["id","betaModalBody",1,"modal-body"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"nav",2),ms(3,"h1"),Qs(4,"Stream Validator"),ys(),ms(5,"div",3),ms(6,"div",4),ms(7,"button",5),Qs(8,"INFO"),ys(),ms(9,"button",6),Qs(10,"BETA"),ys(),ys(),ys(),ys(),ms(11,"div",7),ms(12,"div",8),ms(13,"div",9),ms(14,"div",10),ms(15,"h6",11),Qs(16,"Info"),ys(),ms(17,"button",12),ms(18,"span",13),Qs(19,"\xd7"),ys(),ys(),ys(),ms(20,"div",14),ms(21,"b"),Qs(22,"The Stream Validator"),ys(),Qs(23," can be used to check an HLS stream for errors. "),ms(24,"ul"),ms(25,"li"),Qs(26," Input the stream you want to analyse with "),ms(27,"b"),Qs(28,"The Stream Validator"),ys(),Qs(29,' in the text input. Information about the stream is output in the "General Information" section. '),ys(),ms(30,"li"),Qs(31," The "),ms(32,"span",15),Qs(33,"errors"),ys(),Qs(34," and "),ms(35,"span",16),Qs(36,"warnings"),ys(),Qs(37," that "),ms(38,"b"),Qs(39,"The Stream Validator"),ys(),Qs(40,' finds are reported in the "Detected Issues" section. '),ys(),ms(41,"li"),Qs(42,' The playlists are shown in the "Raw Playlist" section, and lines with errors are highlighted. '),ys(),ms(43,"li"),Qs(44,' Segments are analysed as they are downloaded, and information about them are shown in the "Segment Statistics" and "Downloaded Segments" sections. '),ys(),ys(),Qs(45," Below is a list of all the requirements "),ms(46,"b"),Qs(47,"The Stream Validator"),ys(),Qs(48," will check for you, as well as some recommendations we will make. "),vs(49,"br"),vs(50,"br"),ms(51,"font",17),ms(52,"table",18),ms(53,"thead",19),ms(54,"tr"),ms(55,"th",20),Qs(56,"Hard Requirements"),ys(),ms(57,"th",20),Qs(58,"Checked in File"),ys(),ys(),ys(),ms(59,"tbody"),ms(60,"tr"),ms(61,"td"),Qs(62," EXT-X-MEDIA tags in the same Group have different NAME attributes "),ys(),ms(63,"td"),Qs(64," Master Playlist "),ys(),ys(),ms(65,"tr"),ms(66,"td"),Qs(67," Groups do not have more than one member with a DEFAULT attribute of YES "),ys(),ms(68,"td"),Qs(69," Master Playlist "),ys(),ys(),ms(70,"tr"),ms(71,"td"),Qs(72," GROUP TYPE matches EXT-X-MEDIA TYPE "),ys(),ms(73,"td"),Qs(74," Master Playlist "),ys(),ys(),ms(75,"tr"),ms(76,"td"),Qs(77," EXT-X-STREAM-INF is followed by a URI line "),ys(),ms(78,"td"),Qs(79," Master Playlist "),ys(),ys(),ms(80,"tr"),ms(81,"td"),Qs(82," Only one EXT-X-SESSION-DATA tag with the same DATA-ID and LANGUAGE "),ys(),ms(83,"td"),Qs(84," Master Playlist "),ys(),ys(),ms(85,"tr"),ms(86,"td"),Qs(87," METHOD attribute of EXT-X-SESSION-KEY is not NONE "),ys(),ms(88,"td"),Qs(89," Master Playlist "),ys(),ys(),ms(90,"tr"),ms(91,"td"),Qs(92," Master Playlist does not contain multiple EXT-X-SESSION-KEY tags with the same METHOD, URI, IV, KEYFORMAT, KEYFORMATVERSIONS "),ys(),ms(93,"td"),Qs(94," Master Playlist "),ys(),ys(),ms(95,"tr"),ms(96,"td"),Qs(97," Only one EXT-X-INDEPENDENT-SEGMENTS in a playlist "),ys(),ms(98,"td"),Qs(99," Master Playlist "),ys(),ys(),ms(100,"tr"),ms(101,"td"),Qs(102," Resolution is greater than zero "),ys(),ms(103,"td"),Qs(104," Master Playlist "),ys(),ys(),ms(105,"tr"),ms(106,"td"),Qs(107," Only one EXT-X-START in a playlist "),ys(),ms(108,"td"),Qs(109," Master Playlist "),ys(),ys(),ms(110,"tr"),ms(111,"td"),Qs(112," Consitent CLOSED-CAPTIONS attributes "),ys(),ms(113,"td"),Qs(114," Master Playlist "),ys(),ys(),ms(115,"tr"),ms(116,"td"),Qs(117," EXT-X-MEDIA-SEQUENCE is an integer "),ys(),ms(118,"td"),Qs(119," Media Playlist "),ys(),ys(),ms(120,"tr"),ms(121,"td"),Qs(122," EXTINF duration, when rounded, is less than or equal to the target duration "),ys(),ms(123,"td"),Qs(124," Media Playlist "),ys(),ys(),ms(125,"tr"),ms(126,"td"),Qs(127," Only one EXT-X-VERSION in a playlist "),ys(),ms(128,"td"),Qs(129," Media Playlist "),ys(),ys(),ms(130,"tr"),ms(131,"td"),Qs(132," EXT-X-MEDIA-SEQUENCE appears before the first segment in the playlist "),ys(),ms(133,"td"),Qs(134," Media Playlist "),ys(),ys(),ms(135,"tr"),ms(136,"td"),Qs(137," EXT-X-DISCONTINUITY-SEQUENCE appears before the first media segment in the playlist "),ys(),ms(138,"td"),Qs(139," Media Playlist "),ys(),ys(),ms(140,"tr"),ms(141,"td"),Qs(142," EXT-X-DISCONTINUITY-SEQUENCE appears before EXT-X-DISCONTINUITY "),ys(),ms(143,"td"),Qs(144," Media Playlist "),ys(),ys(),ms(145,"tr"),ms(146,"td"),Qs(147," Only one EXT-X-INDEPENDENT-SEGMENTS in a playlist "),ys(),ms(148,"td"),Qs(149," Media Playlist "),ys(),ys(),ms(150,"tr"),ms(151,"td"),Qs(152," Only one EXT-X-START in a Playlist "),ys(),ms(153,"td"),Qs(154," Media Playlist "),ys(),ys(),ms(155,"tr"),ms(156,"td"),Qs(157," TIME-OFFSET is present in EXT-X-START "),ys(),ms(158,"td"),Qs(159," Media Playlist "),ys(),ys(),ms(160,"tr"),ms(161,"td"),Qs(162," URI line is not preceded by any segment tags "),ys(),ms(163,"td"),Qs(164," Media Playlist "),ys(),ys(),ms(165,"tr"),ms(166,"td"),Qs(167," EXT-X-TARGETDURATION is present "),ys(),ms(168,"td"),Qs(169," Media Playlist "),ys(),ys(),ms(170,"tr"),ms(171,"td"),Qs(172," Correct usage of EXT-X-BYTERANGE "),ys(),ms(173,"td"),Qs(174," Media Playlist "),ys(),ys(),ms(175,"tr"),ms(176,"td"),Qs(177," EXT-X-DATERANGE with END-ON-NEXT=YES has no DURATION or END-DATE "),ys(),ms(178,"td"),Qs(179," Media Playlist "),ys(),ys(),ms(180,"tr"),ms(181,"td"),Qs(182," END-DATE is equal to START-DATE plus DURATION "),ys(),ms(183,"td"),Qs(184," Media Playlist "),ys(),ys(),ms(185,"tr"),ms(186,"td"),Qs(187," DATERANGE with the same CLASS does not overlap "),ys(),ms(188,"td"),Qs(189," Media Playlist "),ys(),ys(),ms(190,"tr"),ms(191,"td"),Qs(192," Playlist with EXT-X-DATERANGE contains EXT-X-PROGRAM-DATE-TIME "),ys(),ms(193,"td"),Qs(194," Media Playlist "),ys(),ys(),ms(195,"tr"),ms(196,"td"),Qs(197," Only one media playlist tag of each type in any media playlist "),ys(),ms(198,"td"),Qs(199," Media Playlist "),ys(),ys(),ms(200,"tr"),ms(201,"td"),Qs(202," TIME-OFFSET appears in EXT-X-START "),ys(),ms(203,"td"),Qs(204," Both "),ys(),ys(),ms(205,"tr"),ms(206,"td"),Qs(207," EXTM3U is the first line "),ys(),ms(208,"td"),Qs(209," Both "),ys(),ys(),ms(210,"tr"),ms(211,"td"),Qs(212," Check correct EXT-X-VERSION "),ys(),ms(213,"td"),Qs(214," Both "),ys(),ys(),ms(215,"tr"),ms(216,"td"),Qs(217," File does not contain both media and master playlist tags "),ys(),ms(218,"td"),Qs(219," Both "),ys(),ys(),ys(),ys(),ms(220,"table",18),ms(221,"thead",19),ms(222,"tr"),ms(223,"th",20),Qs(224,"Recommendations"),ys(),ms(225,"th",20),Qs(226,"Checked in File"),ys(),ys(),ys(),ms(227,"tbody"),ms(228,"tr"),ms(229,"td"),Qs(230," EXT-X-STREAM-INF has a CODECS attribute "),ys(),ms(231,"td"),Qs(232," Master Playlist "),ys(),ys(),ms(233,"tr"),ms(234,"td"),Qs(235," RESOLUTION is present for video renditions "),ys(),ms(236,"td"),Qs(237," Master Playlist "),ys(),ys(),ms(238,"tr"),ms(239,"td"),Qs(240," Aspect rations is identical for all video variants "),ys(),ms(241,"td"),Qs(242," Master Playlist "),ys(),ys(),ms(243,"tr"),ms(244,"td"),Qs(245," The stream has multiple different bitrates "),ys(),ms(246,"td"),Qs(247," Master Playlist "),ys(),ys(),ms(248,"tr"),ms(249,"td"),Qs(250," The default bitrate should be approximately 2000 kb/s "),ys(),ms(251,"td"),Qs(252," Master Playlist "),ys(),ys(),ms(253,"tr"),ms(254,"td"),Qs(255," All EXT-X-TARGETDURATION are identical in a playlist "),ys(),ms(256,"td"),Qs(257," Media Playlist "),ys(),ys(),ms(258,"tr"),ms(259,"td"),Qs(260," All manifests have the same EXT-X-VERSION "),ys(),ms(261,"td"),Qs(262," Both "),ys(),ys(),ys(),ys(),ys(),Qs(263," If you have questions or suggestions to the "),ms(264,"b"),Qs(265,"Stream Validator"),ys(),Qs(266," team, please send an email to "),ms(267,"a",21),Qs(268,"dl-playersakamai@akamai.com"),ys(),ys(),ys(),ys(),ys(),ms(269,"div",22),ms(270,"div",23),ms(271,"div",9),ms(272,"div",10),ms(273,"h6",24),Qs(274,"Select bitrate to analyze"),ys(),ms(275,"button",12),ms(276,"span",13),Qs(277,"\xd7"),ys(),ys(),ys(),vs(278,"div",25),ms(279,"div",26),ms(280,"button",27),Qs(281,"Close"),ys(),ms(282,"button",28),Qs(283,"Select Bitrates"),ys(),ys(),ys(),ys(),ys(),ms(284,"div",29),ms(285,"div",30),ms(286,"div",31),ms(287,"div",32),ms(288,"div",31),ms(289,"div",33),ms(290,"div",34),ms(291,"div",35),ms(292,"button",36),Qs(293,"Analyze Stream"),ys(),vs(294,"button",37),vs(295,"div",38),ys(),vs(296,"input",39),ys(),ys(),ms(297,"div",40),vs(298,"safari-token-auth-alert",41),ys(),ys(),ms(299,"div",31),ms(300,"div",42),vs(301,"video",43),ys(),ys(),ys(),ys(),ms(302,"div",31),ms(303,"div",32),ms(304,"div",44),ms(305,"div",45),ms(306,"h2",46),ms(307,"button",47),Qs(308," Detected Errors "),ys(),ys(),ys(),ms(309,"div",48),vs(310,"div",49),ys(),ys(),ys(),ys(),ys(),ms(311,"div",30),ms(312,"div",31),ms(313,"div",32),ms(314,"div",44),ms(315,"div",50),ms(316,"h2",46),ms(317,"button",51),Qs(318," General Information "),ys(),ys(),ys(),ms(319,"div",52),ms(320,"div",53),vs(321,"ul",54),ys(),ys(),ys(),ys(),ys(),ms(322,"div",31),ms(323,"div",32),ms(324,"div",44),ms(325,"div",55),ms(326,"h2",46),ms(327,"button",56),Qs(328," Segment Statistics "),ys(),ys(),ys(),ms(329,"div",57),vs(330,"div",58),ys(),ys(),ys(),ys(),ms(331,"div",31),ms(332,"div",32),ms(333,"div",44),ms(334,"div",59),ms(335,"h2",46),ms(336,"button",60),Qs(337," Raw Playlists "),ys(),ys(),ys(),ms(338,"div",61),vs(339,"div",62),ys(),ys(),ys(),ys(),ms(340,"div",31),ms(341,"div",32),ms(342,"div",44),ms(343,"div",63),ms(344,"h2",46),ms(345,"button",64),Qs(346," Downloaded Segments "),ys(),ys(),ys(),ms(347,"div",65),vs(348,"div",66),ys(),ys(),ys(),ys(),ys(),ys(),ms(349,"div",67),ms(350,"div",23),ms(351,"div",9),ms(352,"div",10),ms(353,"h4",68),ms(354,"b"),Qs(355,"This page is in Beta!"),ys(),ys(),ys(),ms(356,"div",69),ms(357,"b"),Qs(358,"The Stream Validator"),ys(),Qs(359," is currently in development, and is not a finished product. There will be bugs and inaccurate results. "),vs(360,"br"),vs(361,"br"),Qs(362,' THIS SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL AKAMAI TECHNOLOGIES BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. '),ys(),ms(363,"div",26),ms(364,"button",28),Qs(365,"I understand!"),ys(),ys(),ys(),ys(),ys(),ys(),ys()),2&t&&(di(298),ps("hasAmdStyleTokenAuth",e.withCredentials))},directives:[oy,xv],styles:[""]}),t})(),c_=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-welcome-page"]],decls:22,vars:2,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-7","col-lg-5","linkbox","m-4","p-3","border-1","rounded"],[1,"row","m-0",3,"routerLink"],[1,"col"],["src","./assets/img/players.png",1,"img-fluid",2,"position","relative","top","30%","width","80%"],[1,"col-12","col-md-7","col-lg-5","linkbox","m-4","p-3","border-1","rounded",3,"routerLink"],[1,"row","m-0"],["src","./assets/img/stream_validator.png",1,"img-fluid",2,"width","50%"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),ms(2,"div",2),ms(3,"div",3),ms(4,"div",4),vs(5,"img",5),ys(),ms(6,"div",4),ms(7,"h2"),ms(8,"b"),Qs(9,"Players"),ys(),ys(),Qs(10," Check the integration of a reference player with an HLS/DASH stream. "),ys(),ys(),ys(),ys(),ys(),ms(11,"div",0),ms(12,"div",1),ms(13,"div",6),ms(14,"div",7),ms(15,"div",4),ms(16,"h2"),ms(17,"b"),Qs(18,"Stream Validator"),ys(),ys(),Qs(19," Validate your HLS stream with respect to the standard. "),ys(),ms(20,"div",4),vs(21,"img",8),ys(),ys(),ys(),ys(),ys()),2&t&&(di(3),ps("routerLink","players"),di(10),ps("routerLink","stream-validator"))},directives:[Dp],styles:[""]}),t})(),d_=(()=>{class t{constructor(t){this.http=t}getReleaseNotes(){return this.http.get("assets/RELEASENOTES.md",{responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(Kt(od))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();var f_=n("DlQD");let h_=(()=>{class t{constructor(t){this.releaseNotesReader=t}ngOnInit(){this.releaseNotesReader.getReleaseNotes().subscribe(t=>{this.convertedReleaseNotes=f_.parse(t)},t=>{this.convertedReleaseNotes="An error has occurred: "+JSON.stringify(t)})}}return t.\u0275fac=function(e){return new(e||t)(fs(d_))},t.\u0275cmp=he({type:t,selectors:[["app-release-notes"]],features:[go([d_])],decls:3,vars:1,consts:[[1,"container"],[1,"col-10"],[3,"innerHTML"]],template:function(t,e){1&t&&(ms(0,"div",0),ms(1,"div",1),vs(2,"div",2),ys(),ys()),2&t&&(di(2),ps("innerHTML",e.convertedReleaseNotes,Hr))},styles:[""]}),t})(),p_=(()=>{class t{}return t.\u0275mod=ye({type:t,bootstrap:[Hy]}),t.\u0275inj=dt({factory:function(e){return new(e||t)},imports:[[jc,Uy,Gp.forRoot([])]]}),t})();window.Dygraph=Uv.default,n("kyqF");let g_=(()=>{class t{}return t.\u0275mod=ye({type:t,bootstrap:[qy]}),t.\u0275inj=dt({factory:function(e){return new(e||t)},providers:[],imports:[[jc,Td,gm,qm,Uy,p_,Gp.forRoot([{path:"",component:c_},{path:"stream-validator",component:l_},{path:"players",component:Wv},{path:"players/hlsjs",component:Wv,data:{player:"hlsjs"}},{path:"players/dashjs",component:Wv,data:{player:"dashjs"}},{path:"release-notes",component:h_}])]]}),t})();(function(){if(vr)throw new Error("Cannot enable prod mode after platform setup.");yr=!1})(),Fc().bootstrapModule(g_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);